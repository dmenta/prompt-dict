import{e as $,k as j,l as U,m as z,o as J,r as K,s as Q,u as W,v as X,w as Y}from"./chunk-SAX6VCBM.js";import{$c as le,Ca as B,Db as T,Eb as D,Pa as f,Qc as Z,R as _,Ra as g,Rb as R,Rc as b,Sc as ee,Ta as E,Tc as te,Ua as h,Va as S,Vc as ie,W as P,Wa as u,X as k,Xa as n,Xc as oe,Ya as r,Yc as re,Za as c,Zc as ne,_c as ae,bb as H,bd as me,ca as C,cb as v,cd as pe,eb as A,lb as I,mb as q,ob as l,p as V,pb as M,qa as a,qb as G,vb as O,wb as L,ya as y}from"./chunk-YSAVDWCI.js";var N=class i{apply=T();waiting=D(!1);enabled=D(!0);router=_($);titulo=D("Tarea");onBack(t){t.stopPropagation(),this.router.navigate(["/"])}onTaskButtonClicked(t){t.stopPropagation(),this.apply.emit(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["pd-task-header"]],inputs:{waiting:[1,"waiting"],enabled:[1,"enabled"],titulo:[1,"titulo"]},outputs:{apply:"apply"},features:[B([Q])],decls:7,vars:5,consts:[["pdHeaderContent",""],["pdHeaderRow","",1,""],["pdHeaderBackButton","",3,"back"],["pdTruncate","",1,"text-header-contrast","text-2xl",3,"title"],[1,"spinner"],["pdHeaderActionButton","","title","Aceptar","aria-label","Aceptar","pdIcon","check",1,"mr-2","disabled:pointer-events-none","md:hidden","disabled:bg-neutral-500","dark:disabled:bg-neutral-600","transition-colors","duration-300",3,"click","disabled"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),v("back",function(m){return o.onBack(m)}),r(),n(3,"h1",3),l(4),r(),c(5,"div",4),n(6,"button",5),v("click",function(m){return o.onTaskButtonClicked(m)}),r()()()),e&2&&(a(3),u("title",o.titulo()),a(),G(" ",o.titulo()," "),a(),q("spinner-show",o.waiting()),a(),u("disabled",!o.enabled()||o.waiting()))},dependencies:[K,Y,W,X,z,J],encapsulation:2})};var ce=(i,t)=>t.value;function fe(i,t){i&1&&(n(0,"div",4),l(1,"Campo obligatorio"),r())}function ge(i,t){i&1&&(n(0,"div",4),l(1,"Campo obligatorio"),r())}function be(i,t){i&1&&(n(0,"div",4),l(1,"Campo obligatorio"),r())}function ve(i,t){if(i&1&&c(0,"option",9),i&2){let e=t.$implicit;u("value",e)}}function Ce(i,t){i&1&&(n(0,"div",4),l(1,"Campo obligatorio"),r())}function _e(i,t){if(i&1&&c(0,"option",9),i&2){let e=t.$implicit;u("value",e)}}function ye(i,t){if(i&1&&h(0,_e,1,1,"option",9,E),i&2){let e=A();S(e.tags())}}function he(i,t){i&1&&(n(0,"div",4),l(1,"Campo obligatorio"),r())}function Se(i,t){i&1&&(n(0,"div",4),l(1,"Campo obligatorio"),r())}function xe(i,t){if(i&1&&(n(0,"option",15),l(1),O(2,"titlecase"),r()),i&2){let e=t.$implicit;u("value",e),a(),M(L(2,2,e))}}function we(i,t){if(i&1&&(n(0,"option",9),l(1),r()),i&2){let e=t.$implicit;u("value",e.value),a(),M(e.label)}}function Pe(i,t){i&1&&c(0,"span",18)}var F=class i{notificationService=_(j);isSubmitting=C(!1);formBuilder=_(me);appData=_(U);usoOptions=["texto","c\xF3digo","imagen","video","audio","otro"];idiomaOptions=[{value:"es-AR",label:"Espa\xF1ol (Argentina)"},{value:"EN",label:"English"}];categorias=C([]);tags=C([]);form=this.formBuilder.nonNullable.group({titulo:["",[b.required,this.trimValidator]],descripcion:["",b.required,this.trimValidator],autor:["",[b.required,this.trimValidator]],categoria:["",[b.required,this.trimValidator]],tags:[[],[b.required]],prompt:["",[b.required,this.trimValidator]],uso:["texto",[b.required]],idioma:["es-AR",[b.required]]});valid=this.form.statusChanges.pipe(V(t=>t==="VALID"));submiting=T();async trimValidator(t){return typeof t.value=="string"&&t.value.trim().length===0?{trim:!0}:null}constructor(){this.appData.categories().subscribe(t=>this.categorias.set([...t.map(e=>e.name)])),this.appData.tags().subscribe(t=>this.tags.set([...t.map(e=>e.name)]))}async onSubmit(t){if(t.stopPropagation(),!(this.form.invalid||this.isSubmitting())){this.submiting.emit(!0),this.isSubmitting.set(!0);try{let e=this.form.value,o=e.categoria.trim().toLowerCase(),p=typeof e.tags=="string"?e.tags.split(",").map(s=>s.trim().toLowerCase()).filter(s=>s):Array.isArray(e.tags)?e.tags.map(s=>s.trim().toLowerCase()):[],d={titulo:e.titulo.trim(),descripcion:e.descripcion.trim(),autor:e.autor.trim(),categoria:o,tags:p,prompt:e.prompt.trim(),uso:e.uso,idioma:e.idioma};await this.appData.createPrompt(d),this.form.reset(),this.notificationService.success("Prompt creado")}finally{this.isSubmitting.set(!1),this.submiting.emit(!1)}}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["pd-create-prompt-form"]],outputs:{valid:"valid",submiting:"submiting"},decls:54,vars:10,consts:[[1,"flex","justify-center","items-start","text-sm","w-full","min-h-[80vh]","px-6","py-8"],[1,"w-full","max-w-xl","rounded-xl","space-y-6",3,"ngSubmit","formGroup"],[1,"block","mb-1","text-inverse-low"],["formControlName","titulo","type","text",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],[1,"text-red-400","text-xs","mt-1"],["formControlName","descripcion","rows","2",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["formControlName","autor","autocomplete","name","type","text",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["formControlName","categoria","type","text","list","cat-list","autocomplete","off",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["id","cat-list"],[3,"value"],["formControlName","tags","type","text","list","tags-list","placeholder","","autocomplete","off",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["id","tags-list"],[1,"text-xs","text-neutral-500","dark:text-neutral-400","mt-1"],["formControlName","prompt","rows","3",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["formControlName","uso",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],[1,"appearance-none",3,"value"],["formControlName","idioma",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["type","submit",1,"w-full","hidden","md:flex","bg-primary","text-white","rounded-lg","px-6","py-2","font-semibold","shadow","hover:bg-primary-dark","transition","disabled:opacity-60","items-center","justify-center","gap-2",3,"disabled"],[1,"spinner"]],template:function(e,o){if(e&1&&(n(0,"div",0)(1,"form",1),v("ngSubmit",function(m){return o.onSubmit(m)}),n(2,"div")(3,"label",2),l(4,"T\xEDtulo *"),r(),c(5,"input",3),f(6,fe,2,0,"div",4),r(),n(7,"div")(8,"label",2),l(9,"Descripci\xF3n *"),r(),c(10,"textarea",5),f(11,ge,2,0,"div",4),r(),n(12,"div")(13,"label",2),l(14,"Autor *"),r(),c(15,"input",6),f(16,be,2,0,"div",4),r(),n(17,"div")(18,"label",2),l(19,"Categor\xEDa *"),r(),c(20,"input",7),n(21,"datalist",8),h(22,ve,1,1,"option",9,E),r(),f(24,Ce,2,0,"div",4),r(),n(25,"div")(26,"label",2),l(27,"Tags"),r(),c(28,"input",10),n(29,"datalist",11),f(30,ye,2,0),r(),n(31,"div",12),l(32," Separados por coma "),r(),f(33,he,2,0,"div",4),r(),n(34,"div")(35,"label",2),l(36,"Prompt *"),r(),c(37,"textarea",13),f(38,Se,2,0,"div",4),r(),n(39,"div")(40,"label",2),l(41,"Uso"),r(),n(42,"select",14),h(43,xe,3,4,"option",15,E),r()(),n(45,"div")(46,"label",2),l(47,"Idioma"),r(),n(48,"select",16),h(49,we,2,2,"option",9,ce),r()(),n(51,"button",17),l(52," Guardar Prompt "),f(53,Pe,1,0,"span",18),r()()()),e&2){let p,m,d,s,x,w;a(),u("formGroup",o.form),a(5),g((p=o.form.get("titulo"))!=null&&p.invalid&&((p=o.form.get("titulo"))!=null&&p.touched)?6:-1),a(5),g((m=o.form.get("descripcion"))!=null&&m.invalid&&((m=o.form.get("descripcion"))!=null&&m.touched)?11:-1),a(5),g((d=o.form.get("autor"))!=null&&d.invalid&&((d=o.form.get("autor"))!=null&&d.touched)?16:-1),a(6),S(o.categorias()),a(2),g((s=o.form.get("categoria"))!=null&&s.invalid&&((s=o.form.get("categoria"))!=null&&s.touched)?24:-1),a(6),g(o.form.controls.tags.value.length>1?30:-1),a(3),g((x=o.form.get("tags"))!=null&&x.invalid&&((x=o.form.get("tags"))!=null&&x.touched)?33:-1),a(5),g((w=o.form.get("prompt"))!=null&&w.invalid&&((w=o.form.get("prompt"))!=null&&w.touched)?38:-1),a(5),S(o.usoOptions),a(6),S(o.idiomaOptions),a(2),u("disabled",o.form.invalid||o.isSubmitting()),a(2),g(o.isSubmitting()?53:-1)}},dependencies:[pe,ie,ae,le,Z,ne,ee,te,oe,re,R],encapsulation:2})};var ue=class i{enabled=C(!1);submitting=C(!1);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=y({type:i,selectors:[["pd-create-prompt-page"]],decls:3,vars:2,consts:[["form",""],["titulo","Nuevo Prompt",3,"apply","enabled","waiting"],[3,"valid","submiting"]],template:function(e,o){if(e&1){let p=H();n(0,"pd-task-header",1),v("apply",function(d){P(p);let s=I(2);return k(s.onSubmit(d))}),r(),n(1,"pd-create-prompt-form",2,0),v("valid",function(d){return P(p),k(o.enabled.set(d))})("submiting",function(d){return P(p),k(o.submitting.set(d))}),r()}e&2&&u("enabled",o.enabled())("waiting",o.submitting())},dependencies:[N,F],encapsulation:2})};export{ue as CreatePromptPage};
