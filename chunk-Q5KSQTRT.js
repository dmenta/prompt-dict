import{$a as V,A as y,B as m,C as o,D as r,E as s,F as J,G as w,H as _,I as K,K as a,L as h,La as me,M as W,Ma as se,N as X,O as Y,P as Z,Pa as P,Q as ee,Qa as c,Ra as T,Sa as k,T as te,Ta as A,U as v,Ua as L,Va as M,Wa as de,X as ie,Xa as pe,Y as ne,Ya as ue,Z as re,Za as ce,_a as I,c as $,da as oe,ea as ae,f as x,h as B,ha as le,hb as fe,i as R,l as S,n as l,p as g,q as j,r as U,t as Q,u as z,v as H,w as p,x as u,y as D,z as C}from"./chunk-EL7QZYI6.js";var ye=()=>[import("./chunk-KSOTELTE.js").then(e=>e.DisplayPrompt)],_e=(e,i)=>i.id;function xe(e,i){if(e&1&&s(0,"li",0),e&2){let t=_().$implicit;m("prompt",t),H("tabindex",1)}}function he(e,i){e&1&&s(0,"li",1)}function Ne(e,i){e&1&&(U(0,xe,1,2)(1,he,1,0),Q(2,0,ye,null,1),z(0,-1))}var ge=class e{prompts=v([]);static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["pd-prompts-list"],["","pd-prompts-list",""]],hostAttrs:[1,"flex","flex-col","md:flex-row","flex-wrap","h-full","w-full","gap-6"],inputs:{prompts:[1,"prompts"]},decls:2,vars:0,consts:[["pd-display-prompt","",3,"prompt"],[1,"h-48","select-none","md:min-w-[16rem]","md:w-[24rem]","md:max-w-[36rem]","grow-1","relative","inline-block","group","px-2","py-4","shadow-md/30","shadow-black/40","dark:shadow-black/80","bg-card","hover:bg-card-hover","dark:hover:bg-card-hover/30","transition-colors","duration-150"]],template:function(t,n){t&1&&C(0,Ne,4,0,null,null,_e),t&2&&y(n.prompts())},encapsulation:2})};var we=(e,i)=>i.value;function Ee(e,i){e&1&&(o(0,"div",4),a(1,"Campo obligatorio"),r())}function Fe(e,i){e&1&&(o(0,"div",4),a(1,"Campo obligatorio"),r())}function De(e,i){e&1&&(o(0,"div",4),a(1,"Campo obligatorio"),r())}function Pe(e,i){if(e&1&&s(0,"option",9),e&2){let t=i.$implicit;m("value",t)}}function Te(e,i){e&1&&(o(0,"div",4),a(1,"Campo obligatorio"),r())}function ke(e,i){if(e&1&&s(0,"option",9),e&2){let t=i.$implicit;m("value",t)}}function Ae(e,i){if(e&1&&C(0,ke,1,1,"option",9,D),e&2){let t=_();y(t.appData.tags())}}function Le(e,i){e&1&&(o(0,"div",4),a(1,"Campo obligatorio"),r())}function Me(e,i){e&1&&(o(0,"div",4),a(1,"Campo obligatorio"),r())}function Ie(e,i){if(e&1&&(o(0,"option",15),a(1),Z(2,"titlecase"),r()),e&2){let t=i.$implicit;m("value",t),l(),h(ee(2,2,t))}}function Ve(e,i){if(e&1&&(o(0,"option",9),a(1),r()),e&2){let t=i.$implicit;m("value",t.value),l(),h(t.label)}}function qe(e,i){e&1&&s(0,"span",18)}var ve=class e{notificationService=x(le);isSubmitting=S(!1);formBuilder=x(I);appData=x(me);usoOptions=["texto","c\xF3digo","imagen","video","audio","otro"];idiomaOptions=[{value:"es-AR",label:"Espa\xF1ol (Argentina)"},{value:"EN",label:"English"}];form=this.formBuilder.nonNullable.group({titulo:["",[c.required,this.trimValidator]],descripcion:["",c.required,this.trimValidator],autor:["",[c.required,this.trimValidator]],categoria:["",[c.required,this.trimValidator]],tags:[[],[c.required]],prompt:["",[c.required,this.trimValidator]],uso:["texto",[c.required]],idioma:["es-AR",[c.required]]});valid=this.form.statusChanges.pipe($(i=>i==="VALID"));submiting=te();async trimValidator(i){return typeof i.value=="string"&&i.value.trim().length===0?{trim:!0}:null}async onSubmit(i){if(i.stopPropagation(),!(this.form.invalid||this.isSubmitting())){this.submiting.emit(!0),this.isSubmitting.set(!0);try{let t=this.form.value,n=t.categoria.trim().toLowerCase(),d=typeof t.tags=="string"?t.tags.split(",").map(f=>f.trim().toLowerCase()).filter(f=>f):Array.isArray(t.tags)?t.tags.map(f=>f.trim().toLowerCase()):[],N={titulo:t.titulo.trim(),descripcion:t.descripcion.trim(),autor:t.autor.trim(),categoria:n,tags:d,prompt:t.prompt.trim(),uso:t.uso,idioma:t.idioma};await this.appData.createPrompt(N),this.form.reset(),this.notificationService.success("Prompt creado")}finally{this.isSubmitting.set(!1),this.submiting.emit(!1)}}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["pd-create-prompt-form"]],outputs:{valid:"valid",submiting:"submiting"},decls:54,vars:10,consts:[[1,"flex","justify-center","items-start","text-sm","w-full","min-h-[80vh]","px-6","py-8"],[1,"w-full","max-w-xl","rounded-xl","space-y-6",3,"ngSubmit","formGroup"],[1,"block","mb-1","text-inverse-low"],["formControlName","titulo","type","text",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],[1,"text-red-400","text-xs","mt-1"],["formControlName","descripcion","rows","2",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["formControlName","autor","autocomplete","name","type","text",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["formControlName","categoria","type","text","list","cat-list","autocomplete","off",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["id","cat-list"],[3,"value"],["formControlName","tags","type","text","list","tags-list","placeholder","","autocomplete","off",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["id","tags-list"],[1,"text-xs","text-neutral-500","dark:text-neutral-400","mt-1"],["formControlName","prompt","rows","3",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["formControlName","uso",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],[1,"appearance-none",3,"value"],["formControlName","idioma",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["type","submit",1,"w-full","hidden","md:flex","bg-primary","text-white","rounded-lg","px-6","py-2","font-semibold","shadow","hover:bg-primary-dark","transition","disabled:opacity-60","items-center","justify-center","gap-2",3,"disabled"],[1,"spinner"]],template:function(t,n){if(t&1&&(o(0,"div",0)(1,"form",1),w("ngSubmit",function(b){return n.onSubmit(b)}),o(2,"div")(3,"label",2),a(4,"T\xEDtulo *"),r(),s(5,"input",3),p(6,Ee,2,0,"div",4),r(),o(7,"div")(8,"label",2),a(9,"Descripci\xF3n *"),r(),s(10,"textarea",5),p(11,Fe,2,0,"div",4),r(),o(12,"div")(13,"label",2),a(14,"Autor *"),r(),s(15,"input",6),p(16,De,2,0,"div",4),r(),o(17,"div")(18,"label",2),a(19,"Categor\xEDa *"),r(),s(20,"input",7),o(21,"datalist",8),C(22,Pe,1,1,"option",9,D),r(),p(24,Te,2,0,"div",4),r(),o(25,"div")(26,"label",2),a(27,"Tags"),r(),s(28,"input",10),o(29,"datalist",11),p(30,Ae,2,0),r(),o(31,"div",12),a(32," Separados por coma "),r(),p(33,Le,2,0,"div",4),r(),o(34,"div")(35,"label",2),a(36,"Prompt *"),r(),s(37,"textarea",13),p(38,Me,2,0,"div",4),r(),o(39,"div")(40,"label",2),a(41,"Uso"),r(),o(42,"select",14),C(43,Ie,3,4,"option",15,D),r()(),o(45,"div")(46,"label",2),a(47,"Idioma"),r(),o(48,"select",16),C(49,Ve,2,2,"option",9,we),r()(),o(51,"button",17),a(52," Guardar Prompt "),p(53,qe,1,0,"span",18),r()()()),t&2){let d,b,N,f,E,F;l(),m("formGroup",n.form),l(5),u((d=n.form.get("titulo"))!=null&&d.invalid&&((d=n.form.get("titulo"))!=null&&d.touched)?6:-1),l(5),u((b=n.form.get("descripcion"))!=null&&b.invalid&&((b=n.form.get("descripcion"))!=null&&b.touched)?11:-1),l(5),u((N=n.form.get("autor"))!=null&&N.invalid&&((N=n.form.get("autor"))!=null&&N.touched)?16:-1),l(6),y(n.appData.categories()),l(2),u((f=n.form.get("categoria"))!=null&&f.invalid&&((f=n.form.get("categoria"))!=null&&f.touched)?24:-1),l(6),u(n.form.controls.tags.value.length>1?30:-1),l(3),u((E=n.form.get("tags"))!=null&&E.invalid&&((E=n.form.get("tags"))!=null&&E.touched)?33:-1),l(5),u((F=n.form.get("prompt"))!=null&&F.invalid&&((F=n.form.get("prompt"))!=null&&F.touched)?38:-1),l(5),y(n.usoOptions),l(6),y(n.idiomaOptions),l(2),m("disabled",n.form.invalid||n.isSubmitting()),l(2),u(n.isSubmitting()?53:-1)}},dependencies:[V,A,pe,ue,P,de,T,k,L,M,ne],encapsulation:2})};function Ge(e,i){if(e&1&&(o(0,"div",6),a(1),r()),e&2){let t=_();l(),h(t.error())}}function Oe(e,i){e&1&&(o(0,"div"),a(1,"Cargando..."),r())}function $e(e,i){if(e&1){let t=J();o(0,"tr")(1,"td"),a(2),r(),o(3,"td",10),a(4),r(),o(5,"td")(6,"button",11),w("click",function(){let d=B(t).$implicit,b=_();return R(b.removeAdmin(d.uid))}),a(7," Eliminar "),r()()()}if(e&2){let t=i.$implicit;l(2),h(t.email||"(sin email)"),l(2),h(t.uid)}}var be=class e{adminService=x(se);fb=x(I);admins=S([]);isLoading=S(!1);error=S(null);form=this.fb.group({uid:["",[c.required]],email:["",[c.email]]});constructor(){this.loadAdmins()}async loadAdmins(){this.isLoading.set(!0),this.error.set(null);try{this.admins.set(await this.adminService.getAdmins())}catch(i){this.error.set(i.message||"Error al cargar admins")}finally{this.isLoading.set(!1)}}async addAdmin(){if(!this.form.invalid){this.isLoading.set(!0);try{await this.adminService.addAdminByUid(this.form.value.uid,this.form.value.email||void 0),this.form.reset(),await this.loadAdmins()}catch(i){this.error.set(i.message||"Error al agregar admin")}finally{this.isLoading.set(!1)}}}async removeAdmin(i){this.isLoading.set(!0);try{await this.adminService.removeAdmin(i),await this.loadAdmins()}catch(t){this.error.set(t.message||"Error al eliminar admin")}finally{this.isLoading.set(!1)}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["pd-admin-management"]],decls:21,vars:5,consts:[[1,"max-w-xl","mx-auto","p-6","bg-white","dark:bg-neutral-900","rounded-xl","shadow","border","border-neutral-200","dark:border-neutral-800","mt-8"],[1,"text-lg","font-semibold","mb-4"],[1,"flex","gap-2","mb-6",3,"ngSubmit","formGroup"],["formControlName","uid","type","text","placeholder","UID del nuevo admin","required","",1,"flex-1","px-3","py-2","rounded","border","border-neutral-300","dark:border-neutral-700","bg-white","dark:bg-neutral-800"],["formControlName","email","type","email","placeholder","Email (opcional, solo referencia)",1,"flex-1","px-3","py-2","rounded","border","border-neutral-300","dark:border-neutral-700","bg-white","dark:bg-neutral-800"],["type","submit",1,"bg-primary","text-white","px-4","py-2","rounded","disabled:opacity-60",3,"disabled"],[1,"text-red-600","mb-2"],[1,"w-full","text-sm"],[1,"text-left","border-b","border-neutral-200","dark:border-neutral-700"],[4,"ngFor","ngForOf"],[1,"font-mono","text-xs"],[1,"text-red-600","hover:underline",3,"click"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"h2",1),a(2,"Administradores"),r(),o(3,"form",2),w("ngSubmit",function(){return n.addAdmin()}),s(4,"input",3)(5,"input",4),o(6,"button",5),a(7," Agregar "),r()(),p(8,Ge,2,1,"div",6),p(9,Oe,2,0,"div"),o(10,"table",7)(11,"thead")(12,"tr",8)(13,"th"),a(14,"Email"),r(),o(15,"th"),a(16,"UID"),r(),o(17,"th"),a(18,"Acciones"),r()()(),o(19,"tbody"),j(20,$e,8,2,"tr",9),r()()()),t&2&&(l(3),m("formGroup",n.form),l(3),m("disabled",n.form.invalid||n.isLoading()),l(2),u(n.error()?8:-1),l(),u(n.isLoading()?9:-1),l(11),m("ngForOf",n.admins()))},dependencies:[re,ie,V,A,P,T,k,ce,L,M],encapsulation:2})};var bt={category:{title:"Categor\xEDa",lowercase:"categor\xEDa"},tag:{title:"Etiqueta",lowercase:"etiqueta"}};var Be=["pd-nav-item",""],Re=(e,i)=>[e,i],je=e=>({name:e}),O=class e{paramName=v(null);slug=v(null);name=v("");cantidad=v(0);static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["","pd-nav-item",""]],hostAttrs:[1,"w-full","block"],inputs:{paramName:[1,"paramName"],slug:[1,"slug"],name:[1,"name"],cantidad:[1,"cantidad"]},attrs:Be,decls:6,vars:10,consts:[["rla","routerLinkActive"],["routerLinkActive","",1,"select-none",3,"routerLink","state"],[1,"inline-flex","items-center","whitespace-nowrap","rounded-md","font-regular","ring-offset-background","transition-colors","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:pointer-events-none","text-sm","disabled:opacity-50","hover:bg-item-hover","hover:text-item-hover-contrast","h-10","px-4","py-8","md:py-4","w-full","gap-2",3,"disabled"],[3,"quantity"]],template:function(t,n){if(t&1&&(o(0,"a",1,0)(2,"button",2),s(3,"pd-quantity-bagde",3),o(4,"span"),a(5),r()()()),t&2){let d=K(1);m("routerLink",Y(5,Re,n.paramName(),n.slug()))("state",X(8,je,n.name())),l(2),m("disabled",d.isActive),l(),m("quantity",n.cantidad()),l(2),W(" ",n.name())}},dependencies:[oe,ae,fe],encapsulation:2})};var Ue=["pd-nav-list",""],Qe=(e,i)=>i.slug;function ze(e,i){if(e&1&&s(0,"li",0),e&2){let t=i.$implicit,n=_();m("slug",t.slug)("name",t.name)("paramName",n.list())("cantidad",t.prompt_count)}}var Ce=class e{list=v("category");items=v();static \u0275fac=function(t){return new(t||e)};static \u0275cmp=g({type:e,selectors:[["nav","pd-nav-list",""],["ul","pd-nav-list",""],["ol","pd-nav-list",""]],hostAttrs:[1,"space-y-1","w-full","h-full"],inputs:{list:[1,"list"],items:[1,"items"]},attrs:Ue,decls:2,vars:0,consts:[["pd-nav-item","",3,"slug","name","paramName","cantidad"]],template:function(t,n){t&1&&C(0,ze,1,4,"li",0,Qe),t&2&&y(n.items())},dependencies:[O],encapsulation:2})};export{ge as a,ve as b,bt as c,Ce as d,be as e};
