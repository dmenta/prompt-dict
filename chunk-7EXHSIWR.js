import{a as ot,b as H,c as nt}from"./chunk-BD5OTDZL.js";import"./chunk-Q42VBNZ4.js";import{A as X,B as G,E as T,F as a,G as p,H as D,I as P,J as S,K as C,L as Z,M as J,N as g,O,P as Q,V as b,a as w,b as v,c as V,d as E,e as F,f as L,g as z,h as _,i as R,j as N,ja as $,k as u,l as h,n as y,o as j,p as Y,q as d,qa as tt,r as x,s as q,sa as et,t as A,v as W,va as it,w as B}from"./chunk-LRZU5E3F.js";function ut(t,e,i,o){let n=window&&!!window.document&&window.document.documentElement,r=n&&e?window:i;if(t&&(r=t&&n&&typeof t=="string"?ht(t,i.nativeElement,o):t,!r))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return r}function ht(t,e,i){return(i?window.document:e).querySelector(t)}function M(t){return t&&!t.firstChange}function gt(){return typeof window<"u"}var mt={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},St={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"},U=class{constructor(e=!0){this.vertical=e,this.propsMap=e?mt:St}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}};function wt(t,e,i){return!!(t&&e||!i&&e)}function vt({windowElement:t,axis:e}){return yt({axis:e,isWindow:Tt(t)},t)}function yt(t,e){let i=t.isWindow||e&&!e.nativeElement?e:e.nativeElement;return v(w({},t),{container:i})}function Tt(t){return["Window","global"].some(i=>Object.prototype.toString.call(t).includes(i))}function k(t,e){return t?e.document.documentElement:null}function rt(t,e){let i=bt(e);return e.isWindow?Dt(i,t,e):Ct(i,t,e)}function Dt(t,e,i){let{axis:o,container:n,isWindow:r}=i,{offsetHeightKey:l,clientHeightKey:c}=lt(o),f=t+ct(k(r,n),o,r),s=st(e.nativeElement,r,l,c),m=Ht(e.nativeElement,o,r)+s;return{height:t,scrolled:f,totalToScroll:m,isWindow:r}}function Ct(t,e,i){let{axis:o,container:n}=i,r=n[o.scrollTopKey()],l=n[o.scrollHeightKey()];return{height:t,scrolled:r,totalToScroll:l,isWindow:!1}}function lt(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function bt({container:t,isWindow:e,axis:i}){let{offsetHeightKey:o,clientHeightKey:n}=lt(i);return st(t,e,o,n)}function st(t,e,i,o){if(isNaN(t[i])){let n=k(e,t);return n?n[o]:0}else return t[i]}function Ht(t,e,i){let o=e.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[o]+ct(t,e,i)}function ct(t,e,i){let o=e.pageYOffsetKey(),n=e.scrollTopKey(),r=e.offsetTopKey();return isNaN(window.pageYOffset)?k(i,t)[n]:t.ownerDocument?t.ownerDocument.defaultView[o]:t[r]}function Et(t,e={down:0,up:0},i){let o,n;if(t.totalToScroll<=0)return!1;let r=t.isWindow?t.scrolled:t.height+t.scrolled;if(i)o=(t.totalToScroll-r)/t.totalToScroll,n=(e?.down?e.down:0)/10;else{let c=t.scrolled+(t.totalToScroll-r);o=t.scrolled/c,n=(e?.up?e.up:0)/10}return o<=n}function _t(t,e){return t<e.scrolled}function Nt(t,e,i){let o=_t(t,e);return{fire:Et(e,i,o),scrollDown:o}}var K=class{constructor(e){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},Object.assign(this,e)}updateScrollPosition(e){return this.lastScrollPosition=e}updateTotalToScroll(e){this.lastTotalToScroll!==e&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=e)}updateScroll(e,i){this.updateScrollPosition(e),this.updateTotalToScroll(i)}updateTriggeredFlag(e,i){i?this.triggered.down=e:this.triggered.up=e}isTriggeredScroll(e,i){return i?this.triggered.down===e:this.triggered.up===e}};function xt(t){let{scrollContainer:e,scrollWindow:i,element:o,fromRoot:n}=t,r=vt({axis:new U(!t.horizontal),windowElement:ut(e,i,o,n)}),l=new K({totalToScroll:rt(o,r).totalToScroll}),c={container:r.container,throttle:t.throttle},f={up:t.upDistance,down:t.downDistance};return Wt(c).pipe(F(()=>V(rt(o,r))),E(s=>Pt(l.lastScrollPosition,s,f)),_(({stats:s})=>l.updateScroll(s.scrolled,s.totalToScroll)),z(({fire:s,scrollDown:m,stats:{totalToScroll:dt}})=>wt(t.alwaysCallback,s,l.isTriggeredScroll(dt,m))),_(({scrollDown:s,stats:{totalToScroll:m}})=>{l.updateTriggeredFlag(m,s)}),E(Ot))}function Wt(t){let e=L(t.container,"scroll");return t.throttle&&(e=e.pipe(R(t.throttle,void 0,{leading:!0,trailing:!0}))),e}function Pt(t,e,i){let{scrollDown:o,fire:n}=Nt(t,e,i);return{scrollDown:o,fire:n,stats:e}}var I={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function Ot(t){let{scrollDown:e,stats:{scrolled:i}}=t;return{type:e?I.DOWN:I.UP,payload:{currentScrollPosition:i}}}var at=(()=>{let e=class e{constructor(o,n){this.element=o,this.zone=n,this.scrolled=new W,this.scrolledUp=new W,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:o,infiniteScrollDisabled:n,infiniteScrollDistance:r}){let l=M(o),c=M(n),f=M(r),s=!c&&!this.infiniteScrollDisabled||c&&!n.currentValue||f;(l||c||f)&&(this.destroyScroller(),s&&this.setup())}ngOnDestroy(){this.destroyScroller()}setup(){gt()&&this.zone.runOutsideAngular(()=>{this.disposeScroller=xt({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(o=>this.handleOnScroll(o))})}handleOnScroll({type:o,payload:n}){let r=o===I.DOWN?this.scrolled:this.scrolledUp;Mt(r)&&this.zone.run(()=>r.emit(n))}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}};e.\u0275fac=function(n){return new(n||e)(x(Y),x(B))},e.\u0275dir=A({type:e,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[j]});let t=e;return t})();function Mt(t){return t.observed??t.observers.length>0}function Ut(t,e){if(t&1){let i=P();a(0,"div",10),S("scrolled",function(){u(i);let n=C();return h(n.onScrollDown())})("scrolledUp",function(){u(i);let n=C();return h(n.onScrollUp())}),a(1,"div",11),D(2,"ul",12),p()()}if(t&2){let i=C();T("infiniteScrollDistance",2)("infiniteScrollUpDistance",1.5)("infiniteScrollThrottle",50),d(2),T("prompts",i.prompts())}}function Kt(t,e){t&1&&(a(0,"div",9)(1,"span",13)(2,"span",14),D(3,"span",15)(4,"span",16),p()(),a(5,"span",17),g(6,"cargando"),p(),a(7,"span",17),g(8,"prompts"),p()())}var pt=class t{throttle=300;scrollDistance=1;scrollUpDistance=2;direction="";store=N($);listData=y(this.store.get("navListConfig")??{category:"alpha",tag:"qty"});persistService=N(tt);prompts=y([]);list=y(this.store.get("navList")??"category");sort=b(()=>this.listData()[this.list()]??"qty");constructor(){this.persistService.prompts().then(e=>{this.prompts.set(e)})}onClick(e,i){e.stopPropagation(),this.list.set(i),this.store.save("navList",i)}onSortChange(){let i=this.sort()==="qty"?"alpha":"qty";this.listData.update(o=>v(w({},o),{[this.list()]:i})),this.store.save("navListConfig",this.listData())}inactivo=b(()=>this.list()==="category"?H.tag.title:H.category.title);activo=b(()=>H[this.list()].title);onScrollDown(){this.persistService.prompts().then(e=>{this.prompts.set(e)})}onScrollUp(){console.log("scrolled up!!")}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=q({type:t,selectors:[["pd-home"]],hostAttrs:[1,"w-full"],decls:14,vars:10,consts:[["drawer",""],["pd-main-header","",3,"open"],["pd-drawer","",1,"w-fit","select-none"],["drawer-title","",1,"flex","items-center","justify-between","w-full"],[1,"font-semibold","text-list-name","pr-1"],[1,"cursor-pointer","text-xs","opacity-85",3,"click"],[1,"opacity-85","font-light","hover:opacity-100",3,"click"],["pd-nav-list","",3,"list","sort"],["infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollUpDistance","infiniteScrollThrottle"],[1,"flex","flex-col","md:ml-72","items-center","justify-center","h-[80svh]"],["infiniteScroll","",3,"scrolled","scrolledUp","infiniteScrollDistance","infiniteScrollUpDistance","infiniteScrollThrottle"],[1,"flex","flex-row","md:ml-72"],["pd-prompts-list","",1,"px-6","py-6",3,"prompts"],[1,"relative","inline-flex","mb-2"],[1,"flex","size-5"],[1,"absolute","inline-flex","h-full","w-full","animate-ping","rounded-full","bg-primary","opacity-75"],[1,"relative","inline-flex","size-5","rounded-full","bg-primary-light"],[1,"opacity-95"]],template:function(i,o){if(i&1){let n=P();a(0,"header",1),S("open",function(){u(n);let l=Z(2);return h(l.show())}),p(),a(1,"div",2,0)(3,"div",3)(4,"div")(5,"span",4),g(6),p(),a(7,"button",5),S("click",function(){return u(n),h(o.onSortChange())}),g(8),p()(),a(9,"span",6),S("click",function(l){return u(n),h(o.onClick(l,o.list()==="category"?"tag":"category"))}),g(10),p()(),D(11,"nav",7),p(),X(12,Ut,3,4,"div",8)(13,Kt,9,0,"div",9)}i&2&&(d(3),J("flex-row",o.list()==="category")("flex-row-reverse",o.list()==="tag"),d(3),O(o.activo()),d(2),Q(" [",o.sort()==="qty"?"Num":"A-Z","] "),d(2),O(o.inactivo()),d(),T("list",o.list())("sort",o.sort()),d(),G(o.prompts().length>0?12:13))},dependencies:[ot,it,et,nt,at],encapsulation:2})};export{pt as Home};
