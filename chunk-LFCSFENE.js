import{$a as be,A as h,B as x,C as m,D as r,E as o,F as s,I as te,K as S,M as N,N as ie,O as ne,P as a,Q as y,R as P,Ra as L,S as oe,Sa as ve,T as re,U as ae,Ua as A,V as le,Va as f,Wa as I,X as D,Xa as q,Y as me,Ya as V,Z as C,Za as G,_a as O,a as z,aa as se,ab as ye,b as Q,bb as Ce,c as Z,ca as pe,cb as _e,da as de,db as $,eb as B,f as b,h as H,i as J,ja as ue,ka as ce,l as _,n as l,na as fe,ob as he,p as d,pa as ge,q as K,r as W,t as X,u as Y,v as ee,w as u,y as c,z as M}from"./chunk-HIGNFRHE.js";var De=()=>[import("./chunk-D35NB4YK.js").then(t=>t.DisplayPrompt)],Ee=(t,i)=>i.id;function Te(t,i){if(t&1&&s(0,"li",0),t&2){let e=N().$implicit;m("prompt",e),ee("tabindex",1)}}function ke(t,i){t&1&&s(0,"li",1)}function Fe(t,i){t&1&&(W(0,Te,1,2)(1,ke,1,0),X(2,0,De,null,1),Y(0,-1))}var xe=class t{prompts=C([]);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["pd-prompts-list"],["","pd-prompts-list",""]],hostAttrs:[1,"flex","flex-col","md:flex-row","flex-wrap","h-full","w-full","gap-6"],inputs:{prompts:[1,"prompts"]},decls:2,vars:0,consts:[["pd-display-prompt","",3,"prompt"],[1,"h-48","select-none","md:min-w-[16rem]","md:w-[24rem]","md:max-w-[36rem]","grow-1","relative","inline-block","group","px-2","py-4","shadow-md/30","shadow-black/40","dark:shadow-black/80","bg-card","hover:bg-card-hover","dark:hover:bg-card-hover/30","transition-colors","duration-150"]],template:function(e,n){e&1&&h(0,Fe,4,0,null,null,Ee),e&2&&x(n.prompts())},encapsulation:2})};var Pe=(t,i)=>i.value;function Le(t,i){t&1&&(r(0,"div",4),a(1,"Campo obligatorio"),o())}function Ae(t,i){t&1&&(r(0,"div",4),a(1,"Campo obligatorio"),o())}function Ie(t,i){t&1&&(r(0,"div",4),a(1,"Campo obligatorio"),o())}function qe(t,i){if(t&1&&s(0,"option",9),t&2){let e=i.$implicit;m("value",e)}}function Ve(t,i){t&1&&(r(0,"div",4),a(1,"Campo obligatorio"),o())}function Ge(t,i){if(t&1&&s(0,"option",9),t&2){let e=i.$implicit;m("value",e)}}function Oe(t,i){if(t&1&&h(0,Ge,1,1,"option",9,M),t&2){let e=N();x(e.appData.tags())}}function $e(t,i){t&1&&(r(0,"div",4),a(1,"Campo obligatorio"),o())}function Be(t,i){t&1&&(r(0,"div",4),a(1,"Campo obligatorio"),o())}function Re(t,i){if(t&1&&(r(0,"option",15),a(1),ae(2,"titlecase"),o()),t&2){let e=i.$implicit;m("value",e),l(),y(le(2,2,e))}}function je(t,i){if(t&1&&(r(0,"option",9),a(1),o()),t&2){let e=i.$implicit;m("value",e.value),l(),y(e.label)}}function Ue(t,i){t&1&&s(0,"span",18)}var Ne=class t{notificationService=b(fe);isSubmitting=_(!1);formBuilder=b($);appData=b(L);usoOptions=["texto","c\xF3digo","imagen","video","audio","otro"];idiomaOptions=[{value:"es-AR",label:"Espa\xF1ol (Argentina)"},{value:"EN",label:"English"}];form=this.formBuilder.nonNullable.group({titulo:["",[f.required,this.trimValidator]],descripcion:["",f.required,this.trimValidator],autor:["",[f.required,this.trimValidator]],categoria:["",[f.required,this.trimValidator]],tags:[[],[f.required]],prompt:["",[f.required,this.trimValidator]],uso:["texto",[f.required]],idioma:["es-AR",[f.required]]});valid=this.form.statusChanges.pipe(Z(i=>i==="VALID"));submiting=me();async trimValidator(i){return typeof i.value=="string"&&i.value.trim().length===0?{trim:!0}:null}async onSubmit(i){if(i.stopPropagation(),!(this.form.invalid||this.isSubmitting())){this.submiting.emit(!0),this.isSubmitting.set(!0);try{let e=this.form.value,n=e.categoria.trim().toLowerCase(),p=typeof e.tags=="string"?e.tags.split(",").map(v=>v.trim().toLowerCase()).filter(v=>v):Array.isArray(e.tags)?e.tags.map(v=>v.trim().toLowerCase()):[],w={titulo:e.titulo.trim(),descripcion:e.descripcion.trim(),autor:e.autor.trim(),categoria:n,tags:p,prompt:e.prompt.trim(),uso:e.uso,idioma:e.idioma};await this.appData.createPrompt(w),this.form.reset(),this.notificationService.success("Prompt creado")}finally{this.isSubmitting.set(!1),this.submiting.emit(!1)}}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["pd-create-prompt-form"]],outputs:{valid:"valid",submiting:"submiting"},decls:54,vars:10,consts:[[1,"flex","justify-center","items-start","text-sm","w-full","min-h-[80vh]","px-6","py-8"],[1,"w-full","max-w-xl","rounded-xl","space-y-6",3,"ngSubmit","formGroup"],[1,"block","mb-1","text-inverse-low"],["formControlName","titulo","type","text",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],[1,"text-red-400","text-xs","mt-1"],["formControlName","descripcion","rows","2",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["formControlName","autor","autocomplete","name","type","text",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["formControlName","categoria","type","text","list","cat-list","autocomplete","off",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["id","cat-list"],[3,"value"],["formControlName","tags","type","text","list","tags-list","placeholder","","autocomplete","off",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["id","tags-list"],[1,"text-xs","text-neutral-500","dark:text-neutral-400","mt-1"],["formControlName","prompt","rows","3",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["formControlName","uso",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],[1,"appearance-none",3,"value"],["formControlName","idioma",1,"w-full","px-4","py-2","rounded-lg","border","border-neutral-300","dark:border-neutral-700","focus:outline-none","focus:ring-2","focus:ring-primary","transition"],["type","submit",1,"w-full","hidden","md:flex","bg-primary","text-white","rounded-lg","px-6","py-2","font-semibold","shadow","hover:bg-primary-dark","transition","disabled:opacity-60","items-center","justify-center","gap-2",3,"disabled"],[1,"spinner"]],template:function(e,n){if(e&1&&(r(0,"div",0)(1,"form",1),S("ngSubmit",function(g){return n.onSubmit(g)}),r(2,"div")(3,"label",2),a(4,"T\xEDtulo *"),o(),s(5,"input",3),u(6,Le,2,0,"div",4),o(),r(7,"div")(8,"label",2),a(9,"Descripci\xF3n *"),o(),s(10,"textarea",5),u(11,Ae,2,0,"div",4),o(),r(12,"div")(13,"label",2),a(14,"Autor *"),o(),s(15,"input",6),u(16,Ie,2,0,"div",4),o(),r(17,"div")(18,"label",2),a(19,"Categor\xEDa *"),o(),s(20,"input",7),r(21,"datalist",8),h(22,qe,1,1,"option",9,M),o(),u(24,Ve,2,0,"div",4),o(),r(25,"div")(26,"label",2),a(27,"Tags"),o(),s(28,"input",10),r(29,"datalist",11),u(30,Oe,2,0),o(),r(31,"div",12),a(32," Separados por coma "),o(),u(33,$e,2,0,"div",4),o(),r(34,"div")(35,"label",2),a(36,"Prompt *"),o(),s(37,"textarea",13),u(38,Be,2,0,"div",4),o(),r(39,"div")(40,"label",2),a(41,"Uso"),o(),r(42,"select",14),h(43,Re,3,4,"option",15,M),o()(),r(45,"div")(46,"label",2),a(47,"Idioma"),o(),r(48,"select",16),h(49,je,2,2,"option",9,Pe),o()(),r(51,"button",17),a(52," Guardar Prompt "),u(53,Ue,1,0,"span",18),o()()()),e&2){let p,g,w,v,k,F;l(),m("formGroup",n.form),l(5),c((p=n.form.get("titulo"))!=null&&p.invalid&&((p=n.form.get("titulo"))!=null&&p.touched)?6:-1),l(5),c((g=n.form.get("descripcion"))!=null&&g.invalid&&((g=n.form.get("descripcion"))!=null&&g.touched)?11:-1),l(5),c((w=n.form.get("autor"))!=null&&w.invalid&&((w=n.form.get("autor"))!=null&&w.touched)?16:-1),l(6),x(n.appData.categories()),l(2),c((v=n.form.get("categoria"))!=null&&v.invalid&&((v=n.form.get("categoria"))!=null&&v.touched)?24:-1),l(6),c(n.form.controls.tags.value.length>1?30:-1),l(3),c((k=n.form.get("tags"))!=null&&k.invalid&&((k=n.form.get("tags"))!=null&&k.touched)?33:-1),l(5),c((F=n.form.get("prompt"))!=null&&F.invalid&&((F=n.form.get("prompt"))!=null&&F.touched)?38:-1),l(5),x(n.usoOptions),l(6),x(n.idiomaOptions),l(2),m("disabled",n.form.invalid||n.isSubmitting()),l(2),c(n.isSubmitting()?53:-1)}},dependencies:[B,V,ye,Ce,A,be,I,q,G,O,pe],encapsulation:2})};var R={category:{title:"Categor\xEDa",lowercase:"categor\xEDa"},tag:{title:"Etiqueta",lowercase:"etiqueta"}};var ze=["pd-nav-item",""],Qe=(t,i)=>[t,i],Ze=t=>({name:t}),j=class t{paramName=C(null);slug=C(null);name=C("");cantidad=C(0);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["","pd-nav-item",""]],hostAttrs:[1,"w-full","block"],inputs:{paramName:[1,"paramName"],slug:[1,"slug"],name:[1,"name"],cantidad:[1,"cantidad"]},attrs:ze,decls:6,vars:10,consts:[["rla","routerLinkActive"],["routerLinkActive","",1,"select-none",3,"routerLink","state"],[1,"inline-flex","items-center","whitespace-nowrap","rounded-md","font-regular","ring-offset-background","transition-colors","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-ring","focus-visible:ring-offset-2","disabled:pointer-events-none","text-sm","disabled:opacity-50","hover:bg-item-hover","hover:text-item-hover-contrast","h-10","px-4","py-8","md:py-4","w-full","gap-2",3,"disabled"],[3,"quantity"]],template:function(e,n){if(e&1&&(r(0,"a",1,0)(2,"button",2),s(3,"pd-quantity-bagde",3),r(4,"span"),a(5),o()()()),e&2){let p=ie(1);m("routerLink",re(5,Qe,n.paramName(),n.slug()))("state",oe(8,Ze,n.name())),l(2),m("disabled",p.isActive),l(),m("quantity",n.cantidad()),l(2),P(" ",n.name())}},dependencies:[ue,ce,he],encapsulation:2})};var He=["pd-nav-list",""],Je=(t,i)=>i.slug;function Ke(t,i){if(t&1&&s(0,"li",0),t&2){let e=i.$implicit,n=N();m("slug",e.slug)("name",e.name)("paramName",n.list())("cantidad",e.prompt_count)}}var U=class t{list=C("category");items=C();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["nav","pd-nav-list",""],["ul","pd-nav-list",""],["ol","pd-nav-list",""]],hostAttrs:[1,"space-y-1","w-full","h-full"],inputs:{list:[1,"list"],items:[1,"items"]},attrs:He,decls:2,vars:0,consts:[["pd-nav-item","",3,"slug","name","paramName","cantidad"]],template:function(e,n){e&1&&h(0,Ke,1,4,"li",0,Je),e&2&&x(n.items())},dependencies:[j],encapsulation:2})};var Se=class t{store=b(ge);listData=_(this.store.get("navListConfig")??{category:"alpha",tag:"qty"});appService=b(L);list=_(this.store.get("navList")??"category");sort=D(()=>this.listData()[this.list()]??"qty");sortedItems=D(()=>{let i=this.list()==="category"?this.appService.categories():this.appService.tags(),e=this.sort();return i?i.sort((n,p)=>e==="qty"?p.prompt_count-n.prompt_count:n.name.localeCompare(p.name)):[]});async onClick(i,e){i.stopPropagation(),this.list.set(e),this.store.save("navList",e)}onSortChange(){let e=this.sort()==="qty"?"alpha":"qty";this.listData.update(n=>Q(z({},n),{[this.list()]:e})),this.store.save("navListConfig",this.listData())}inactivo=D(()=>this.list()==="category"?R.tag.title:R.category.title);activo=D(()=>R[this.list()].title);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["pd-nav-menu"]],decls:12,vars:9,consts:[[1,"bg-drawer-header","absolute","top-0","left-0","right-0","h-14","z-20","flex","items-center","pl-4","pr-5"],[1,"flex","items-center","justify-between","w-full"],[1,"font-semibold","text-list-name","pr-1"],[1,"cursor-pointer","text-xs","opacity-85",3,"click"],[1,"opacity-85","font-light","hover:opacity-100",3,"click"],[1,"w-full","absolute","top-14","bottom-0","right-0","overflow-x-hidden","overflow-y-auto"],[1,"pt-4","h-full"],["pd-nav-list","",3,"list","items"]],template:function(e,n){e&1&&(r(0,"h5",0)(1,"div",1)(2,"div")(3,"span",2),a(4),o(),r(5,"button",3),S("click",function(){return n.onSortChange()}),a(6),o()(),r(7,"span",4),S("click",function(g){return n.onClick(g,n.list()==="category"?"tag":"category")}),a(8),o()()(),r(9,"div",5)(10,"div",6),s(11,"nav",7),o()()),e&2&&(l(),ne("flex-row",n.list()==="category")("flex-row-reverse",n.list()==="tag"),l(3),y(n.activo()),l(2),P(" [",n.sort()==="qty"?"Num":"A-Z","] "),l(2),y(n.inactivo()),l(3),m("list",n.list())("items",n.sortedItems()))},dependencies:[U],encapsulation:2})};function We(t,i){if(t&1&&(r(0,"div",6),a(1),o()),t&2){let e=N();l(),y(e.error())}}function Xe(t,i){t&1&&(r(0,"div"),a(1,"Cargando..."),o())}function Ye(t,i){if(t&1){let e=te();r(0,"tr")(1,"td"),a(2),o(),r(3,"td",10),a(4),o(),r(5,"td")(6,"button",11),S("click",function(){let p=H(e).$implicit,g=N();return J(g.removeAdmin(p.uid))}),a(7," Eliminar "),o()()()}if(t&2){let e=i.$implicit;l(2),y(e.email||"(sin email)"),l(2),y(e.uid)}}var we=class t{adminService=b(ve);fb=b($);admins=_([]);isLoading=_(!1);error=_(null);form=this.fb.group({uid:["",[f.required]],email:["",[f.email]]});constructor(){this.loadAdmins()}async loadAdmins(){this.isLoading.set(!0),this.error.set(null);try{this.admins.set(await this.adminService.getAdmins())}catch(i){this.error.set(i.message||"Error al cargar admins")}finally{this.isLoading.set(!1)}}async addAdmin(){if(!this.form.invalid){this.isLoading.set(!0);try{await this.adminService.addAdminByUid(this.form.value.uid,this.form.value.email||void 0),this.form.reset(),await this.loadAdmins()}catch(i){this.error.set(i.message||"Error al agregar admin")}finally{this.isLoading.set(!1)}}}async removeAdmin(i){this.isLoading.set(!0);try{await this.adminService.removeAdmin(i),await this.loadAdmins()}catch(e){this.error.set(e.message||"Error al eliminar admin")}finally{this.isLoading.set(!1)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["pd-admin-management"]],decls:21,vars:5,consts:[[1,"max-w-xl","mx-auto","p-6","bg-white","dark:bg-neutral-900","rounded-xl","shadow","border","border-neutral-200","dark:border-neutral-800","mt-8"],[1,"text-lg","font-semibold","mb-4"],[1,"flex","gap-2","mb-6",3,"ngSubmit","formGroup"],["formControlName","uid","type","text","placeholder","UID del nuevo admin","required","",1,"flex-1","px-3","py-2","rounded","border","border-neutral-300","dark:border-neutral-700","bg-white","dark:bg-neutral-800"],["formControlName","email","type","email","placeholder","Email (opcional, solo referencia)",1,"flex-1","px-3","py-2","rounded","border","border-neutral-300","dark:border-neutral-700","bg-white","dark:bg-neutral-800"],["type","submit",1,"bg-primary","text-white","px-4","py-2","rounded","disabled:opacity-60",3,"disabled"],[1,"text-red-600","mb-2"],[1,"w-full","text-sm"],[1,"text-left","border-b","border-neutral-200","dark:border-neutral-700"],[4,"ngFor","ngForOf"],[1,"font-mono","text-xs"],[1,"text-red-600","hover:underline",3,"click"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"h2",1),a(2,"Administradores"),o(),r(3,"form",2),S("ngSubmit",function(){return n.addAdmin()}),s(4,"input",3)(5,"input",4),r(6,"button",5),a(7," Agregar "),o()(),u(8,We,2,1,"div",6),u(9,Xe,2,0,"div"),r(10,"table",7)(11,"thead")(12,"tr",8)(13,"th"),a(14,"Email"),o(),r(15,"th"),a(16,"UID"),o(),r(17,"th"),a(18,"Acciones"),o()()(),r(19,"tbody"),K(20,Ye,8,2,"tr",9),o()()()),e&2&&(l(3),m("formGroup",n.form),l(3),m("disabled",n.form.invalid||n.isLoading()),l(2),c(n.error()?8:-1),l(),c(n.isLoading()?9:-1),l(11),m("ngForOf",n.admins()))},dependencies:[de,se,B,V,A,I,q,_e,G,O],encapsulation:2})};export{xe as a,Ne as b,R as c,Se as d,we as e};
