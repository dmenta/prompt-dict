var Q1=Object.defineProperty,Y1=Object.defineProperties;var Z1=Object.getOwnPropertyDescriptors;var m0=Object.getOwnPropertySymbols;var J1=Object.prototype.hasOwnProperty,X1=Object.prototype.propertyIsEnumerable;var y0=(n,e,t)=>e in n?Q1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,k=(n,e)=>{for(var t in e||={})J1.call(e,t)&&y0(n,t,e[t]);if(m0)for(var t of m0(e))X1.call(e,t)&&y0(n,t,e[t]);return n},J=(n,e)=>Y1(n,Z1(e));var iy;function kd(){return iy}function cr(n){let e=iy;return iy=n,e}var v0=Symbol("NotFound");function Us(n){return n===v0||n?.name==="\u0275NotFound"}function jd(n,e){return Object.is(n,e)}var gt=null,Od=!1,oy=1,eF=null,zt=Symbol("SIGNAL");function X(n){let e=gt;return gt=n,e}function Ud(){return gt}var Pi={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Bs(n){if(Od)throw new Error("");if(gt===null)return;gt.consumerOnSignalRead(n);let e=gt.nextProducerIndex++;if(Hd(gt),e<gt.producerNode.length&&gt.producerNode[e]!==n&&lu(gt)){let t=gt.producerNode[e];$d(t,gt.producerIndexOfThis[e])}gt.producerNode[e]!==n&&(gt.producerNode[e]=n,gt.producerIndexOfThis[e]=lu(gt)?E0(n,gt,e):0),gt.producerLastReadVersion[e]=n.version}function _0(){oy++}function Bd(n){if(!(lu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===oy)){if(!n.producerMustRecompute(n)&&!$s(n)){Vd(n);return}n.producerRecomputeValue(n),Vd(n)}}function sy(n){if(n.liveConsumerNode===void 0)return;let e=Od;Od=!0;try{for(let t of n.liveConsumerNode)t.dirty||tF(t)}finally{Od=e}}function ay(){return gt?.consumerAllowSignalWrites!==!1}function tF(n){n.dirty=!0,sy(n),n.consumerMarkedDirty?.(n)}function Vd(n){n.dirty=!1,n.lastCleanEpoch=oy}function xi(n){return n&&(n.nextProducerIndex=0),X(n)}function Ro(n,e){if(X(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(lu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)$d(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function $s(n){Hd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Bd(t),r!==t.version))return!0}return!1}function Hs(n){if(Hd(n),lu(n))for(let e=0;e<n.producerNode.length;e++)$d(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function E0(n,e,t){if(I0(n),n.liveConsumerNode.length===0&&w0(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=E0(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function $d(n,e){if(I0(n),n.liveConsumerNode.length===1&&w0(n))for(let r=0;r<n.producerNode.length;r++)$d(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Hd(i),i.producerIndexOfThis[r]=e}}function lu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Hd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function I0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function w0(n){return n.producerNode!==void 0}function qd(n){eF?.(n)}function zd(n,e){let t=Object.create(nF);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Bd(t),Bs(t),t.value===uu)throw t.error;return t.value};return r[zt]=t,qd(t),r}var Fd=Symbol("UNSET"),Ld=Symbol("COMPUTING"),uu=Symbol("ERRORED"),nF=J(k({},Pi),{value:Fd,dirty:!0,error:null,equal:jd,kind:"computed",producerMustRecompute(n){return n.value===Fd||n.value===Ld},producerRecomputeValue(n){if(n.value===Ld)throw new Error("");let e=n.value;n.value=Ld;let t=xi(n),r,i=!1;try{r=n.computation(),X(null),i=e!==Fd&&e!==uu&&r!==uu&&n.equal(e,r)}catch(o){r=uu,n.error=o}finally{Ro(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function rF(){throw new Error}var D0=rF;function b0(n){D0(n)}function cy(n){D0=n}var iF=null;function uy(n,e){let t=Object.create(Gd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>T0(t);return r[zt]=t,qd(t),[r,s=>qs(t,s),s=>ly(t,s)]}function T0(n){return Bs(n),n.value}function qs(n,e){ay()||b0(n),n.equal(n.value,e)||(n.value=e,oF(n))}function ly(n,e){ay()||b0(n),qs(n,e(n.value))}var Gd=J(k({},Pi),{equal:jd,value:void 0,kind:"signal"});function oF(n){n.version++,_0(),sy(n),iF?.(n)}function Q(n){return typeof n=="function"}function zs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Wd=zs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function No(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Qe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Q(r))try{r()}catch(o){e=o instanceof Wd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{C0(o)}catch(s){e=e??[],s instanceof Wd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Wd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)C0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&No(t,e)}remove(e){let{_finalizers:t}=this;t&&No(t,e),e instanceof n&&e._removeParent(this)}};Qe.EMPTY=(()=>{let n=new Qe;return n.closed=!0,n})();var dy=Qe.EMPTY;function Kd(n){return n instanceof Qe||n&&"closed"in n&&Q(n.remove)&&Q(n.add)&&Q(n.unsubscribe)}function C0(n){Q(n)?n():n.unsubscribe()}var $n={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gs={setTimeout(n,e,...t){let{delegate:r}=Gs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Gs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Qd(n){Gs.setTimeout(()=>{let{onUnhandledError:e}=$n;if(e)e(n);else throw n})}function du(){}var S0=hy("C",void 0,void 0);function A0(n){return hy("E",void 0,n)}function R0(n){return hy("N",n,void 0)}function hy(n,e,t){return{kind:n,value:e,error:t}}var Mo=null;function Ws(n){if($n.useDeprecatedSynchronousErrorHandling){let e=!Mo;if(e&&(Mo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Mo;if(Mo=null,t)throw r}}else n()}function N0(n){$n.useDeprecatedSynchronousErrorHandling&&Mo&&(Mo.errorThrown=!0,Mo.error=n)}var Po=class extends Qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Kd(e)&&e.add(this)):this.destination=cF}static create(e,t,r){return new Ks(e,t,r)}next(e){this.isStopped?py(R0(e),this):this._next(e)}error(e){this.isStopped?py(A0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?py(S0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sF=Function.prototype.bind;function fy(n,e){return sF.call(n,e)}var gy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Yd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Yd(r)}else Yd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Yd(t)}}},Ks=class extends Po{constructor(e,t,r){super();let i;if(Q(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&$n.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&fy(e.next,o),error:e.error&&fy(e.error,o),complete:e.complete&&fy(e.complete,o)}):i=e}this.destination=new gy(i)}};function Yd(n){$n.useDeprecatedSynchronousErrorHandling?N0(n):Qd(n)}function aF(n){throw n}function py(n,e){let{onStoppedNotification:t}=$n;t&&Gs.setTimeout(()=>t(n,e))}var cF={closed:!0,next:du,error:aF,complete:du};var Qs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yn(n){return n}function Zd(...n){return my(n)}function my(n){return n.length===0?yn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var te=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=lF(t)?t:new Ks(t,r,i);return Ws(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=M0(r),new r((i,o)=>{let s=new Ks({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Qs](){return this}pipe(...t){return my(t)(this)}toPromise(t){return t=M0(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function M0(n){var e;return(e=n??$n.Promise)!==null&&e!==void 0?e:Promise}function uF(n){return n&&Q(n.next)&&Q(n.error)&&Q(n.complete)}function lF(n){return n&&n instanceof Po||uF(n)&&Kd(n)}function yy(n){return Q(n?.lift)}function ye(n){return e=>{if(yy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(n,e,t,r,i){return new vy(n,e,t,r,i)}var vy=class extends Po{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ys(){return ye((n,e)=>{let t=null;n._refCount++;let r=pe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Zs=class extends te{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,yy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Qe;let t=this.getSubject();e.add(this.source.subscribe(pe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Qe.EMPTY)}return e}refCount(){return Ys()(this)}};var P0=zs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=(()=>{class n extends te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Jd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new P0}next(t){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ws(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?dy:(this.currentObservers=null,o.push(t),new Qe(()=>{this.currentObservers=null,No(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new te;return t.source=this,t}}return n.create=(e,t)=>new Jd(e,t),n})(),Jd=class extends nt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:dy}};var Nt=class extends nt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var _y={now(){return(_y.delegate||Date).now()},delegate:void 0};var Xd=class extends Qe{constructor(e,t){super()}schedule(e,t=0){return this}};var hu={setInterval(n,e,...t){let{delegate:r}=hu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=hu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Js=class extends Xd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return hu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&hu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,No(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Xs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Xs.now=_y.now;var ea=class extends Xs{constructor(e,t=Xs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ki=new ea(Js),Ey=ki;var eh=class extends Js{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var th=class extends ea{};var Iy=new th(eh);var cn=new te(n=>n.complete());function nh(n){return n&&Q(n.schedule)}function x0(n){return n[n.length-1]}function rh(n){return Q(x0(n))?n.pop():void 0}function Oi(n){return nh(x0(n))?n.pop():void 0}function ih(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function O0(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function k0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xo(n){return this instanceof xo?(this.v=n,this):new xo(n)}function F0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(_){return Promise.resolve(_).then(y,p)}}function a(y,_){r[y]&&(i[y]=function(A){return new Promise(function(R,x){o.push([y,A,R,x])>1||u(y,A)})},_&&(i[y]=_(i[y])))}function u(y,_){try{l(r[y](_))}catch(A){g(o[0][3],A)}}function l(y){y.value instanceof xo?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,_){y(_),o.shift(),o.length&&u(o[0][0],o[0][1])}}function L0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof k0=="function"?k0(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var ta=n=>n&&typeof n.length=="number"&&typeof n!="function";function oh(n){return Q(n?.then)}function sh(n){return Q(n[Qs])}function ah(n){return Symbol.asyncIterator&&Q(n?.[Symbol.asyncIterator])}function ch(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function dF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var uh=dF();function lh(n){return Q(n?.[uh])}function dh(n){return F0(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield xo(t.read());if(i)return yield xo(void 0);yield yield xo(r)}}finally{t.releaseLock()}})}function hh(n){return Q(n?.getReader)}function $e(n){if(n instanceof te)return n;if(n!=null){if(sh(n))return hF(n);if(ta(n))return fF(n);if(oh(n))return pF(n);if(ah(n))return V0(n);if(lh(n))return gF(n);if(hh(n))return mF(n)}throw ch(n)}function hF(n){return new te(e=>{let t=n[Qs]();if(Q(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fF(n){return new te(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function pF(n){return new te(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Qd)})}function gF(n){return new te(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function V0(n){return new te(e=>{yF(n,e).catch(t=>e.error(t))})}function mF(n){return V0(dh(n))}function yF(n,e){var t,r,i,o;return O0(this,void 0,void 0,function*(){try{for(t=L0(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function un(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Fi(n,e=0){return ye((t,r)=>{t.subscribe(pe(r,i=>un(r,n,()=>r.next(i),e),()=>un(r,n,()=>r.complete(),e),i=>un(r,n,()=>r.error(i),e)))})}function Li(n,e=0){return ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function j0(n,e){return $e(n).pipe(Li(e),Fi(e))}function U0(n,e){return $e(n).pipe(Li(e),Fi(e))}function B0(n,e){return new te(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function $0(n,e){return new te(t=>{let r;return un(t,e,()=>{r=n[uh](),un(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Q(r?.return)&&r.return()})}function fh(n,e){if(!n)throw new Error("Iterable cannot be null");return new te(t=>{un(t,e,()=>{let r=n[Symbol.asyncIterator]();un(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function H0(n,e){return fh(dh(n),e)}function q0(n,e){if(n!=null){if(sh(n))return j0(n,e);if(ta(n))return B0(n,e);if(oh(n))return U0(n,e);if(ah(n))return fh(n,e);if(lh(n))return $0(n,e);if(hh(n))return H0(n,e)}throw ch(n)}function Fe(n,e){return e?q0(n,e):$e(n)}function B(...n){let e=Oi(n);return Fe(n,e)}function na(n,e){let t=Q(n)?n:()=>n,r=i=>i.error(t());return new te(e?i=>e.schedule(r,0,i):r)}function wy(n){return!!n&&(n instanceof te||Q(n.lift)&&Q(n.subscribe))}var Gr=zs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function z0(n){return n instanceof Date&&!isNaN(n)}function $(n,e){return ye((t,r)=>{let i=0;t.subscribe(pe(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:vF}=Array;function _F(n,e){return vF(e)?n(...e):n(e)}function ra(n){return $(e=>_F(n,e))}var{isArray:EF}=Array,{getPrototypeOf:IF,prototype:wF,keys:DF}=Object;function ph(n){if(n.length===1){let e=n[0];if(EF(e))return{args:e,keys:null};if(bF(e)){let t=DF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function bF(n){return n&&typeof n=="object"&&IF(n)===wF}function gh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function mh(...n){let e=Oi(n),t=rh(n),{args:r,keys:i}=ph(n);if(r.length===0)return Fe([],e);let o=new te(TF(r,e,i?s=>gh(i,s):yn));return t?o.pipe(ra(t)):o}function TF(n,e,t=yn){return r=>{G0(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)G0(e,()=>{let l=Fe(n[u],e),h=!1;l.subscribe(pe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function G0(n,e,t){n?un(t,n,e):e()}function W0(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?_(A):u.push(A),_=A=>{o&&e.next(A),l++;let R=!1;$e(t(A,h++)).subscribe(pe(e,x=>{i?.(x),o?y(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let x=u.shift();s?un(e,s,()=>_(x)):_(x)}g()}catch(x){e.error(x)}}))};return n.subscribe(pe(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Ye(n,e,t=1/0){return Q(e)?Ye((r,i)=>$((o,s)=>e(r,o,i,s))($e(n(r,i))),t):(typeof e=="number"&&(t=e),ye((r,i)=>W0(r,i,n,t)))}function ia(n=1/0){return Ye(yn,n)}function K0(){return ia(1)}function oa(...n){return K0()(Fe(n,Oi(n)))}function fu(n){return new te(e=>{$e(n()).subscribe(e)})}function Dy(...n){let e=rh(n),{args:t,keys:r}=ph(n),i=new te(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;$e(t[h]).subscribe(pe(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?gh(r,a):a),o.complete())}))}});return e?i.pipe(ra(e)):i}var CF=["addListener","removeListener"],SF=["addEventListener","removeEventListener"],AF=["on","off"];function by(n,e,t,r){if(Q(t)&&(r=t,t=void 0),r)return by(n,e,t).pipe(ra(r));let[i,o]=MF(n)?SF.map(s=>a=>n[s](e,a,t)):RF(n)?CF.map(Q0(n,e)):NF(n)?AF.map(Q0(n,e)):[];if(!i&&ta(n))return Ye(s=>by(s,e,t))($e(n));if(!i)throw new TypeError("Invalid event target");return new te(s=>{let a=(...u)=>s.next(1<u.length?u:u[0]);return i(a),()=>o(a)})}function Q0(n,e){return t=>r=>n[t](e,r)}function RF(n){return Q(n.addListener)&&Q(n.removeListener)}function NF(n){return Q(n.on)&&Q(n.off)}function MF(n){return Q(n.addEventListener)&&Q(n.removeEventListener)}function Y0(n=0,e,t=Ey){let r=-1;return e!=null&&(nh(e)?t=e:r=e),new te(i=>{let o=z0(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Gt(n,e){return ye((t,r)=>{let i=0;t.subscribe(pe(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Wr(n){return ye((e,t)=>{let r=null,i=!1,o;r=e.subscribe(pe(t,void 0,void 0,s=>{o=$e(n(s,Wr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Z0(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(pe(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ko(n,e){return Q(e)?Ye(n,e,1):Ye(n,1)}function Ty(n,e=ki){return ye((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}t.subscribe(pe(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Vi(n){return ye((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Wt(n){return n<=0?()=>cn:ye((e,t)=>{let r=0;e.subscribe(pe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function yh(n=PF){return ye((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function PF(){return new Gr}function pu(n){return ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Kr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gt((i,o)=>n(i,o,r)):yn,Wt(1),t?Vi(e):yh(()=>new Gr))}function sa(n){return n<=0?()=>cn:ye((e,t)=>{let r=[];e.subscribe(pe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Cy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Gt((i,o)=>n(i,o,r)):yn,sa(1),t?Vi(e):yh(()=>new Gr))}function vh(n,e){return ye(Z0(n,e,arguments.length>=2,!0))}function _h(...n){let e=Oi(n);return ye((t,r)=>{(e?oa(n,t,e):oa(n,t)).subscribe(r)})}function Kt(n,e){return ye((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(pe(r,u=>{i?.unsubscribe();let l=0,h=o++;$e(n(u,h)).subscribe(i=pe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Eh(n){return ye((e,t)=>{$e(n).subscribe(pe(t,()=>t.complete(),du)),!t.closed&&e.subscribe(t)})}function xe(n,e,t){let r=Q(n)||e||t?{next:n,error:e,complete:t}:n;return r?ye((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(pe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):yn}function J0(n,e){return ye((t,r)=>{let{leading:i=!0,trailing:o=!1}=e??{},s=!1,a=null,u=null,l=!1,h=()=>{u?.unsubscribe(),u=null,o&&(y(),l&&r.complete())},p=()=>{u=null,l&&r.complete()},g=_=>u=$e(n(_)).subscribe(pe(r,h,p)),y=()=>{if(s){s=!1;let _=a;a=null,r.next(_),!l&&g(_)}};t.subscribe(pe(r,_=>{s=!0,a=_,!(u&&!u.closed)&&(i?y():g(_))},()=>{l=!0,!(o&&s&&u&&!u.closed)&&r.complete()}))})}function xF(n,e=ki,t){let r=Y0(n,e);return J0(()=>r,t)}function X0(n){let e=X(null);try{return n()}finally{X(e)}}var Th="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,t){super(jo(e,t)),this.code=e}};function kF(n){return`NG0${Math.abs(n)}`}function jo(n,e){return`${kF(n)}${e?": "+e:""}`}var Eu=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("")}function nC(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Yr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Yr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Ch(n,e){return n?e?`${n} ${e}`:n:e||""}var OF=Se({__forward_ref__:Se});function Rn(n){return n.__forward_ref__=Rn,n.toString=function(){return Yr(this())},n}function mt(n){return Vy(n)?n():n}function Vy(n){return typeof n=="function"&&n.hasOwnProperty(OF)&&n.__forward_ref__===Rn}function rC(n,e){n==null&&jy(e,n,null,"!=")}function jy(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function L(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ur(n){return{providers:n.providers||[],imports:n.imports||[]}}function Iu(n){return FF(n,Sh)}function Uy(n){return Iu(n)!==null}function FF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function LF(n){let e=n?.[Sh]??null;return e||null}function Ay(n){return n&&n.hasOwnProperty(wh)?n[wh]:null}var Sh=Se({\u0275prov:Se}),wh=Se({\u0275inj:Se}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=L({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function By(n){return n&&!!n.\u0275providers}var $y=Se({\u0275cmp:Se}),Hy=Se({\u0275dir:Se}),qy=Se({\u0275pipe:Se}),zy=Se({\u0275mod:Se}),yu=Se({\u0275fac:Se}),Uo=Se({__NG_ELEMENT_ID__:Se}),eC=Se({__NG_ENV_ID__:Se});function Bo(n){return typeof n=="string"?n:n==null?"":String(n)}function Dh(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Bo(n)}var Gy=Se({ngErrorCode:Se}),iC=Se({ngErrorMessage:Se}),mu=Se({ngTokenPath:Se});function Wy(n,e){return oC("",-200,e)}function Ah(n,e){throw new j(-201,!1)}function VF(n,e){n[mu]??=[];let t=n[mu],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(rC(e.provide,"Token with multi: true should have a provide property"),r=Dh(e.provide)):r=Dh(e),t[0]!==r&&n[mu].unshift(r)}function jF(n,e){let t=n[mu],r=n[Gy],i=n[iC]||n.message;return n.message=BF(i,r,t,e),n}function oC(n,e,t){let r=new j(e,n);return r[Gy]=e,r[iC]=n,t&&(r[mu]=t),r}function UF(n){return n[Gy]}function BF(n,e,t=[],r=null){let i="";t&&t.length>1&&(i=` Path: ${t.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return jo(e,`${n}${o}${i}`)}var Ry;function sC(){return Ry}function Qt(n){let e=Ry;return Ry=n,e}function Ky(n,e,t){let r=Iu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ah(n,"Injector")}var $F={},Oo=$F,Ny="__NG_DI_FLAG__",My=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Fo(t)||0;try{return this.injector.get(e,r&8?null:Oo,r)}catch(i){if(Us(i))return i;throw i}}};function HF(n,e=0){let t=kd();if(t===void 0)throw new j(-203,!1);if(t===null)return Ky(n,void 0,e);{let r=qF(e),i=t.retrieve(n,r);if(Us(i)){if(r.optional)return null;throw i}return i}}function se(n,e=0){return(sC()||HF)(mt(n),e)}function C(n,e){return se(n,Fo(e))}function Fo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function qF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Py(n){let e=[];for(let t=0;t<n.length;t++){let r=mt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=zF(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(se(i,o))}else e.push(se(r))}return e}function Qy(n,e){return n[Ny]=e,n.prototype[Ny]=e,n}function zF(n){return n[Ny]}function ji(n,e){let t=n.hasOwnProperty(yu);return t?n[yu]:null}function aC(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function cC(n){return n.flat(Number.POSITIVE_INFINITY)}function Rh(n,e){n.forEach(t=>Array.isArray(t)?Rh(t,e):e(t))}function Yy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function wu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function uC(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function lC(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Nh(n,e,t){let r=ca(n,e);return r>=0?n[r|1]=t:(r=~r,lC(n,r,e,t)),r}function Mh(n,e){let t=ca(n,e);if(t>=0)return n[t|1]}function ca(n,e){return GF(n,e,1)}function GF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Hn={},Yt=[],Zr=new U(""),Zy=new U("",-1),Jy=new U(""),vu=class{get(e,t=Oo){if(t===Oo){let i=oC("",-201);throw i.name="\u0275NotFound",i}return t}};function Xy(n){return n[zy]||null}function Jr(n){return n[$y]||null}function Du(n){return n[Hy]||null}function ev(n){return n[qy]||null}function Zt(n){return{\u0275providers:n}}function dC(n){return Zt([{provide:Zr,multi:!0,useValue:n}])}function hC(...n){return{\u0275providers:Ph(!0,n),\u0275fromNgModule:!0}}function Ph(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Rh(e,s=>{let a=s;bh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&fC(i,o),t}function fC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];tv(i,o=>{e(o,r)})}}function bh(n,e,t,r){if(n=mt(n),!n)return!1;let i=null,o=Ay(n),s=!o&&Jr(n);if(!o&&!s){let u=n.ngModule;if(o=Ay(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)bh(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Rh(o.imports,h=>{bh(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&fC(l,e)}if(!a){let l=ji(i)||(()=>new i);e({provide:i,useFactory:l,deps:Yt},i),e({provide:Jy,useValue:i,multi:!0},i),e({provide:Zr,useValue:()=>se(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;tv(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function tv(n,e){for(let t of n)By(t)&&(t=t.\u0275providers),Array.isArray(t)?tv(t,e):e(t)}var WF=Se({provide:String,useValue:Se});function pC(n){return n!==null&&typeof n=="object"&&WF in n}function KF(n){return!!(n&&n.useExisting)}function QF(n){return!!(n&&n.useFactory)}function Lo(n){return typeof n=="function"}function gC(n){return!!n.useClass}var bu=new U(""),Ih={},tC={},Sy;function Tu(){return Sy===void 0&&(Sy=new vu),Sy}var rt=class{},Vo=class extends rt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,ky(e,s=>this.processProvider(s)),this.records.set(Zy,aa(void 0,this)),i.has("environment")&&this.records.set(rt,aa(void 0,this));let o=this.records.get(bu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Jy,Yt,{self:!0}))}retrieve(e,t){let r=Fo(t)||0;try{return this.get(e,Oo,r)}catch(i){if(Us(i))return i;throw i}}destroy(){gu(this),this._destroyed=!0;let e=X(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),X(e)}}onDestroy(e){return gu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){gu(this);let t=cr(this),r=Qt(void 0),i;try{return e()}finally{cr(t),Qt(r)}}get(e,t=Oo,r){if(gu(this),e.hasOwnProperty(eC))return e[eC](this);let i=Fo(r),o,s=cr(this),a=Qt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=eL(e)&&Iu(e);h&&this.injectableDefInScope(h)?l=aa(xy(e),Ih):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Tu():this.parent;return t=i&8&&t===Oo?null:t,u.get(e,t)}catch(u){let l=UF(u);throw l===-200||l===-201?new j(l,null):u}finally{Qt(a),cr(s)}}resolveInjectorInitializers(){let e=X(null),t=cr(this),r=Qt(void 0),i;try{let o=this.get(Zr,Yt,{self:!0});for(let s of o)s()}finally{cr(t),Qt(r),X(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Yr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=mt(e);let t=Lo(e)?e:mt(e&&e.provide),r=ZF(e);if(!Lo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=aa(void 0,Ih,!0),i.factory=()=>Py(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=X(null);try{if(t.value===tC)throw Wy(Yr(e));return t.value===Ih&&(t.value=tC,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&XF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{X(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=mt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function xy(n){let e=Iu(n),t=e!==null?e.factory:ji(n);if(t!==null)return t;if(n instanceof U)throw new j(204,!1);if(n instanceof Function)return YF(n);throw new j(204,!1)}function YF(n){if(n.length>0)throw new j(204,!1);let t=LF(n);return t!==null?()=>t.factory(n):()=>new n}function ZF(n){if(pC(n))return aa(void 0,n.useValue);{let e=nv(n);return aa(e,Ih)}}function nv(n,e,t){let r;if(Lo(n)){let i=mt(n);return ji(i)||xy(i)}else if(pC(n))r=()=>mt(n.useValue);else if(QF(n))r=()=>n.useFactory(...Py(n.deps||[]));else if(KF(n))r=(i,o)=>se(mt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=mt(n&&(n.useClass||n.provide));if(JF(n))r=()=>new i(...Py(n.deps));else return ji(i)||xy(i)}return r}function gu(n){if(n.destroyed)throw new j(205,!1)}function aa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function JF(n){return!!n.deps}function XF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function eL(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function ky(n,e){for(let t of n)Array.isArray(t)?ky(t,e):t&&By(t)?ky(t.\u0275providers,e):e(t)}function yt(n,e){let t;n instanceof Vo?(gu(n),t=n):t=new My(n);let r,i=cr(t),o=Qt(void 0);try{return e()}finally{cr(i),Qt(o)}}function mC(){return sC()!==void 0||kd()!=null}var qn=0,H=1,re=2,ct=3,Nn=4,Jt=5,$o=6,ua=7,it=8,_n=9,lr=10,He=11,la=12,rv=13,Ho=14,Xt=15,Bi=16,qo=17,dr=18,Cu=19,iv=20,Qr=21,xh=22,Xr=23,En=24,zo=25,ke=26,yC=1,$i=6,Hi=7,Su=8,Go=9,vt=10;function hr(n){return Array.isArray(n)&&typeof n[yC]=="object"}function zn(n){return Array.isArray(n)&&n[yC]===!0}function ov(n){return(n.flags&4)!==0}function qi(n){return n.componentOffset>-1}function Au(n){return(n.flags&1)===1}function Gn(n){return!!n.template}function da(n){return(n[re]&512)!==0}function fr(n){return(n[re]&256)===256}var vC="svg",_C="math";function Mn(n){for(;Array.isArray(n);)n=n[qn];return n}function kh(n,e){return Mn(e[n])}function Wn(n,e){return Mn(e[n.index])}function Wo(n,e){return n.data[e]}function sv(n,e){return n[e]}function av(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Pn(n,e){let t=e[n];return hr(t)?t:t[qn]}function EC(n){return(n[re]&4)===4}function Oh(n){return(n[re]&128)===128}function IC(n){return zn(n[ct])}function In(n,e){return e==null?null:n[e]}function cv(n){n[qo]=0}function uv(n){n[re]&1024||(n[re]|=1024,Oh(n)&&zi(n))}function lv(n,e){for(;n>0;)e=e[Ho],n--;return e}function Ru(n){return!!(n[re]&9216||n[En]?.dirty)}function Fh(n){n[lr].changeDetectionScheduler?.notify(8),n[re]&64&&(n[re]|=1024),Ru(n)&&zi(n)}function zi(n){n[lr].changeDetectionScheduler?.notify(0);let e=Ui(n);for(;e!==null&&!(e[re]&8192||(e[re]|=8192,!Oh(e)));)e=Ui(e)}function Nu(n,e){if(fr(n))throw new j(911,!1);n[Qr]===null&&(n[Qr]=[]),n[Qr].push(e)}function Lh(n,e){if(n[Qr]===null)return;let t=n[Qr].indexOf(e);t!==-1&&n[Qr].splice(t,1)}function Ui(n){let e=n[ct];return zn(e)?e[ct]:e}function dv(n){return n[ua]??=[]}function hv(n){return n.cleanup??=[]}function wC(n,e,t,r){let i=dv(e);i.push(t),n.firstCreatePass&&hv(n).push(r,i.length-1)}var ge={lFrame:kC(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Mu=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(Mu||{}),tL=0,Oy=!1;function DC(){return ge.lFrame.elementDepthCount}function bC(){ge.lFrame.elementDepthCount++}function fv(){ge.lFrame.elementDepthCount--}function pv(){return ge.bindingsEnabled}function gv(){return ge.skipHydrationRootTNode!==null}function mv(n){return ge.skipHydrationRootTNode===n}function yv(){ge.skipHydrationRootTNode=null}function ee(){return ge.lFrame.lView}function Ge(){return ge.lFrame.tView}function ot(n){return ge.lFrame.contextLView=n,n[it]}function st(n){return ge.lFrame.contextLView=null,n}function _t(){let n=vv();for(;n!==null&&n.type===64;)n=n.parent;return n}function vv(){return ge.lFrame.currentTNode}function TC(){let n=ge.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ha(n,e){let t=ge.lFrame;t.currentTNode=n,t.isParent=e}function _v(){return ge.lFrame.isParent}function Ev(){ge.lFrame.isParent=!1}function CC(){return ge.lFrame.contextLView}function Iv(n){jy("Must never be called in production mode"),tL=n}function wv(){return Oy}function fa(n){let e=Oy;return Oy=n,e}function Pu(){let n=ge.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function SC(){return ge.lFrame.bindingIndex}function AC(n){return ge.lFrame.bindingIndex=n}function pa(){return ge.lFrame.bindingIndex++}function Vh(n){let e=ge.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function RC(){return ge.lFrame.inI18n}function NC(n,e){let t=ge.lFrame;t.bindingIndex=t.bindingRootIndex=n,jh(e)}function MC(){return ge.lFrame.currentDirectiveIndex}function jh(n){ge.lFrame.currentDirectiveIndex=n}function PC(n){let e=ge.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Dv(){return ge.lFrame.currentQueryIndex}function Uh(n){ge.lFrame.currentQueryIndex=n}function nL(n){let e=n[H];return e.type===2?e.declTNode:e.type===1?n[Jt]:null}function bv(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=nL(o),i===null||(o=o[Ho],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ge.lFrame=xC();return r.currentTNode=e,r.lView=n,!0}function Bh(n){let e=xC(),t=n[H];ge.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function xC(){let n=ge.lFrame,e=n===null?null:n.child;return e===null?kC(n):e}function kC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function OC(){let n=ge.lFrame;return ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Tv=OC;function $h(){let n=OC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function FC(n){return(ge.lFrame.contextLView=lv(n,ge.lFrame.contextLView))[it]}function pr(){return ge.lFrame.selectedIndex}function Gi(n){ge.lFrame.selectedIndex=n}function Cv(){let n=ge.lFrame;return Wo(n.tView,n.selectedIndex)}function LC(){return ge.lFrame.currentNamespace}var VC=!0;function Hh(){return VC}function qh(n){VC=n}function Fy(n,e=null,t=null,r){let i=Sv(n,e,t,r);return i.resolveInjectorInitializers(),i}function Sv(n,e=null,t=null,r,i=new Set){let o=[t||Yt,hC(n)];return r=r||(typeof n=="object"?void 0:Yr(n)),new Vo(o,e||Tu(),r||null,i)}var je=class n{static THROW_IF_NOT_FOUND=Oo;static NULL=new vu;static create(e,t){if(Array.isArray(e))return Fy({name:""},t,e,"");{let r=e.name??"";return Fy({name:r},e.parent,e.providers,r)}}static \u0275prov=L({token:n,providedIn:"any",factory:()=>se(Zy)});static __NG_ELEMENT_ID__=-1},wt=new U(""),Mt=(()=>{class n{static __NG_ELEMENT_ID__=rL;static __NG_ENV_ID__=t=>t}return n})(),_u=class extends Mt{_lView;constructor(e){super(),this._lView=e}get destroyed(){return fr(this._lView)}onDestroy(e){let t=this._lView;return Nu(t,e),()=>Lh(t,e)}};function rL(){return new _u(ee())}var vn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Lt=new U("",{providedIn:"root",factory:()=>{let n=C(rt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(vn),e.handleError(t))}}}),jC={provide:Zr,useValue:()=>void C(vn),multi:!0},iL=new U("",{providedIn:"root",factory:()=>{let n=C(wt).defaultView;if(!n)return;let e=C(Lt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),C(Mt).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function oL(){return Zt([dC(()=>void C(iL))])}function Ae(n,e){let[t,r,i]=uy(n,e?.equal),o=t,s=o[zt];return o.set=r,o.update=i,o.asReadonly=Av.bind(o),o}function Av(){let n=this[zt];if(n.readonlyFn===void 0){let e=()=>this();e[zt]=n,n.readonlyFn=e}return n.readonlyFn}var An=class{},xu=new U("",{providedIn:"root",factory:()=>!1});var Rv=new U(""),zh=new U("");var ga=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=sL}return n})();function sL(){return new ga(ee(),_t())}var gr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Nt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new te(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),Wi=(()=>{class n{internalPendingTasks=C(gr);scheduler=C(An);errorHandler=C(Lt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})();function Ko(...n){}var ku=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>new Ly})}return n})(),Ly=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Ta(n){return{toString:n}.toString()}var Gh="__parameters__";function gL(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function wS(n,e,t){return Ta(()=>{let r=gL(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Gh)?u[Gh]:Object.defineProperty(u,Gh,{value:[]})[Gh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Et=Qy(wS("Optional"),8);var DS=Qy(wS("SkipSelf"),4);function mL(n){return typeof n=="function"}var tf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function bS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var xn=(()=>{let n=()=>TS;return n.ngInherit=!0,n})();function TS(n){return n.type.prototype.ngOnChanges&&(n.setInput=vL),yL}function yL(){let n=SS(this),e=n?.current;if(e){let t=n.previous;if(t===Hn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function vL(n,e,t,r,i){let o=this.declaredInputs[r],s=SS(n)||_L(n,{previous:Hn,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new tf(l&&l.currentValue,t,u===Hn),bS(n,e,i,t)}var CS="__ngSimpleChanges__";function SS(n){return n[CS]||null}function _L(n,e){return n[CS]=e}var UC=[];var be=function(n,e=null,t){for(let r=0;r<UC.length;r++){let i=UC[r];i(n,e,t)}};function EL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=TS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function AS(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Qh(n,e,t){RS(n,e,3,t)}function Yh(n,e,t,r){(n[re]&3)===t&&RS(n,e,t,r)}function Nv(n,e){let t=n[re];(t&3)===e&&(t&=16383,t+=1,n[re]=t)}function RS(n,e,t,r){let i=r!==void 0?n[qo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[qo]+=65536),(a<o||o==-1)&&(IL(n,t,e,u),n[qo]=(n[qo]&4294901760)+u+2),u++}function BC(n,e){be(4,n,e);let t=X(null);try{e.call(n)}finally{X(t),be(5,n,e)}}function IL(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[re]>>14<n[qo]>>16&&(n[re]&3)===e&&(n[re]+=16384,BC(a,o)):BC(a,o)}var _a=-1,Yo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function wL(n){return(n.flags&8)!==0}function DL(n){return(n.flags&16)!==0}function bL(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];TL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function NS(n){return n===3||n===4||n===6}function TL(n){return n.charCodeAt(0)===64}function Ia(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?$C(n,t,i,null,e[++r]):$C(n,t,i,null,null))}}return n}function $C(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function MS(n){return n!==_a}function nf(n){return n&32767}function CL(n){return n>>16}function rf(n,e){let t=CL(n),r=e;for(;t>0;)r=r[Ho],t--;return r}var Hv=!0;function of(n){let e=Hv;return Hv=n,e}var SL=256,PS=SL-1,xS=5,AL=0,mr={};function RL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Uo)&&(r=t[Uo]),r==null&&(r=t[Uo]=AL++);let i=r&PS,o=1<<i;e.data[n+(i>>xS)]|=o}function sf(n,e){let t=kS(n,e);if(t!==-1)return t;let r=e[H];r.firstCreatePass&&(n.injectorIndex=e.length,Mv(r.data,n),Mv(e,null),Mv(r.blueprint,null));let i=E_(n,e),o=n.injectorIndex;if(MS(i)){let s=nf(i),a=rf(i,e),u=a[H].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Mv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function kS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function E_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=jS(i),r===null)return _a;if(t++,i=i[Ho],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return _a}function qv(n,e,t){RL(n,e,t)}function NL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(NS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function OS(n,e,t){if(t&8||n!==void 0)return n;Ah(e,"NodeInjector")}function FS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[_n],o=Qt(void 0);try{return i?i.get(e,r,t&8):Ky(e,r,t&8)}finally{Qt(o)}}return OS(r,e,t)}function LS(n,e,t,r=0,i){if(n!==null){if(e[re]&2048&&!(r&2)){let s=kL(n,e,t,r,mr);if(s!==mr)return s}let o=VS(n,e,t,r,mr);if(o!==mr)return o}return FS(e,t,r,i)}function VS(n,e,t,r,i){let o=PL(t);if(typeof o=="function"){if(!bv(e,n,r))return r&1?OS(i,t,r):FS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ah(t);else return s}finally{Tv()}}else if(typeof o=="number"){let s=null,a=kS(n,e),u=_a,l=r&1?e[Xt][Jt]:null;for((a===-1||r&4)&&(u=a===-1?E_(n,e):e[a+8],u===_a||!qC(r,!1)?a=-1:(s=e[H],a=nf(u),e=rf(u,e)));a!==-1;){let h=e[H];if(HC(o,a,h.data)){let p=ML(a,e,t,s,r,l);if(p!==mr)return p}u=e[a+8],u!==_a&&qC(r,e[H].data[a+8]===l)&&HC(o,a,e)?(s=h,a=nf(u),e=rf(u,e)):a=-1}}return i}function ML(n,e,t,r,i,o){let s=e[H],a=s.data[n+8],u=r==null?qi(a)&&Hv:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Zh(a,s,t,u,l);return h!==null?Lu(e,s,h,a,i):mr}function Zh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let _=s[y];if(y<u&&t===_||y>=u&&_.type===t)return y}if(i){let y=s[u];if(y&&Gn(y)&&y.type===t)return u}return null}function Lu(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Yo){let a=o;if(a.resolving){let y=Dh(s[t]);throw Wy(y)}let u=of(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?Qt(a.injectImpl):null,g=bv(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&EL(t,s[t],e)}finally{p!==null&&Qt(p),of(u),a.resolving=!1,Tv()}}return o}function PL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Uo)?n[Uo]:void 0;return typeof e=="number"?e>=0?e&PS:xL:e}function HC(n,e,t){let r=1<<n;return!!(t[e+(n>>xS)]&r)}function qC(n,e){return!(n&2)&&!(n&1&&e)}var Qo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return LS(this._tNode,this._lView,e,Fo(r),t)}};function xL(){return new Qo(_t(),ee())}function ti(n){return Ta(()=>{let e=n.prototype.constructor,t=e[yu]||zv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[yu]||zv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function zv(n){return Vy(n)?()=>{let e=zv(mt(n));return e&&e()}:ji(n)}function kL(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[re]&2048&&!da(s);){let a=VS(o,s,t,r|2,mr);if(a!==mr)return a;let u=o.parent;if(!u){let l=s[iv];if(l){let h=l.get(t,mr,r);if(h!==mr)return h}u=jS(s),s=s[Ho]}o=u}return i}function jS(n){let e=n[H],t=e.type;return t===2?e.declTNode:t===1?n[Jt]:null}function Hu(n){return NL(_t(),n)}function OL(){return Ca(_t(),ee())}function Ca(n,e){return new Vt(Wn(n,e))}var Vt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=OL}return n})();function FL(n){return n instanceof Vt?n.nativeElement:n}function LL(){return this._results[Symbol.iterator]()}var af=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new nt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=cC(e);(this._changesDetected=!aC(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=LL};function US(n){return(n.flags&128)===128}var I_=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(I_||{}),BS=new Map,VL=0;function jL(){return VL++}function UL(n){BS.set(n[Cu],n)}function Gv(n){BS.delete(n[Cu])}var zC="__ngContext__";function wa(n,e){hr(e)?(n[zC]=e[Cu],UL(e)):n[zC]=e}function $S(n){return qS(n[la])}function HS(n){return qS(n[Nn])}function qS(n){for(;n!==null&&!zn(n);)n=n[Nn];return n}var Wv;function w_(n){Wv=n}function zS(){if(Wv!==void 0)return Wv;if(typeof document<"u")return document;throw new j(210,!1)}var Df=new U("",{providedIn:"root",factory:()=>BL}),BL="ng",bf=new U(""),Yi=new U("",{providedIn:"platform",factory:()=>"unknown"});var Tf=new U("",{providedIn:"root",factory:()=>zS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var $L="h",HL="b";var GS="r";var D_="di",b_="s";var WS=!1,KS=new U("",{providedIn:"root",factory:()=>WS});var QS=new U("");var ya=new WeakMap;var ma=null,Pv=0,Kv=class{callbacks=new Set;listener=()=>{for(let e of this.callbacks)e()}};function qL(){return new IntersectionObserver(n=>{for(let e of n)e.isIntersecting&&ya.has(e.target)&&ya.get(e.target).listener()})}function zL(n,e,t){let r=ya.get(n);return ma=ma||t(),r||(r=new Kv,ma.observe(n),ya.set(n,r),Pv++),r.callbacks.add(e),()=>{ya.has(n)&&(r.callbacks.delete(e),r.callbacks.size===0&&(ma?.unobserve(n),ya.delete(n),Pv--),Pv===0&&(ma?.disconnect(),ma=null))}}var GL=(n,e,t,r)=>{};function WL(n,e,t,r){GL(n,e,t,r)}var YS=new U("");function Cf(n){return(n.flags&32)===32}var KL=()=>null;function ZS(n,e,t=!1){return KL(n,e,t)}function JS(n){return n.get(QS,!1,{optional:!0})}function XS(n,e){let t=n.contentQueries;if(t!==null){let r=X(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Uh(o),a.contentQueries(2,e[s],s)}}}finally{X(r)}}}function Qv(n,e,t){Uh(0);let r=X(null);try{e(n,t)}finally{X(r)}}function eA(n,e,t){if(ov(e)){let r=X(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{X(r)}}}var ei=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ei||{});var Wh;function QL(){if(Wh===void 0&&(Wh=null,Eu.trustedTypes))try{Wh=Eu.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wh}function GC(n){return QL()?.createScriptURL(n)||n}var cf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Th})`}};function qu(n){return n instanceof cf?n.changingThisBreaksApplicationSecurity:n}function T_(n,e){let t=tA(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Th})`)}return t===e}function tA(n){return n instanceof cf&&n.getTypeName()||null}var YL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function nA(n){return n=String(n),n.match(YL)?n:"unsafe:"+n}var Sf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Sf||{});function rA(n){let e=oA();return e?e.sanitize(Sf.URL,n)||"":T_(n,"URL")?qu(n):nA(Bo(n))}function iA(n){let e=oA();if(e)return GC(e.sanitize(Sf.RESOURCE_URL,n)||"");if(T_(n,"ResourceURL"))return GC(qu(n));throw new j(904,!1)}function ZL(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?iA:rA}function C_(n,e,t){return ZL(e,t)(n)}function oA(){let n=ee();return n&&n[lr].sanitizer}function sA(n){return n instanceof Function?n():n}function JL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var aA="ng-template";function XL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&JL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(S_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function S_(n){return n.type===4&&n.value!==aA}function eV(n,e,t){let r=n.type===4&&!t?aA:n.value;return e===r}function tV(n,e,t){let r=4,i=n.attrs,o=i!==null?iV(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Kn(r)&&!Kn(u))return!1;if(s&&Kn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!eV(n,u,t)||u===""&&e.length===1){if(Kn(r))return!1;s=!0}}else if(r&8){if(i===null||!XL(n,i,u,t)){if(Kn(r))return!1;s=!0}}else{let l=e[++a],h=nV(u,i,S_(n),t);if(h===-1){if(Kn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Kn(r))return!1;s=!0}}}}return Kn(r)||s}function Kn(n){return(n&1)===0}function nV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return oV(e,n)}function cA(n,e,t=!1){for(let r=0;r<e.length;r++)if(tV(n,e[r],t))return!0;return!1}function rV(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function iV(n){for(let e=0;e<n.length;e++){let t=n[e];if(NS(t))return e}return n.length}function oV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function sV(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function WC(n,e){return n?":not("+e.trim()+")":e}function aV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Kn(s)&&(e+=WC(o,i),i=""),r=s,o=o||!Kn(r);t++}return i!==""&&(e+=WC(o,i)),e}function cV(n){return n.map(aV).join(",")}function uV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Kn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var en={};function lV(n,e){return n.createText(e)}function dV(n,e,t){n.setValue(e,t)}function uA(n,e,t){return n.createElement(e,t)}function uf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function lA(n,e,t){n.appendChild(e,t)}function KC(n,e,t,r,i){r!==null?uf(n,e,t,r,i):lA(n,e,t)}function dA(n,e,t){n.removeChild(null,e,t)}function hV(n,e,t){n.setAttribute(e,"style",t)}function fV(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function hA(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&bL(n,e,r),i!==null&&fV(n,e,i),o!==null&&hV(n,e,o)}function A_(n,e,t,r,i,o,s,a,u,l,h){let p=ke+r,g=p+i,y=pV(p,g),_=typeof l=="function"?l():l;return y[H]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:_,incompleteFirstPass:!1,ssrId:h}}function pV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:en);return t}function gV(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=A_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function R_(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[qn]=i,p[re]=r|4|128|8|64|1024,(l!==null||n&&n[re]&2048)&&(p[re]|=2048),cv(p),p[ct]=p[Ho]=n,p[it]=t,p[lr]=s||n&&n[lr],p[He]=a||n&&n[He],p[_n]=u||n&&n[_n]||null,p[Jt]=o,p[Cu]=jL(),p[$o]=h,p[iv]=l,p[Xt]=e.type==2?n[Xt]:p,p}function mV(n,e,t){let r=Wn(e,n),i=gV(t),o=n[lr].rendererFactory,s=N_(n,R_(n,i,null,fA(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function fA(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function pA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function N_(n,e){return n[la]?n[rv][Nn]=e:n[la]=e,n[rv]=e,e}function ne(n=1){gA(Ge(),ee(),pr()+n,!1)}function gA(n,e,t,r){if(!r)if((e[re]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Qh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Yh(e,o,0,t)}Gi(t)}var Af=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Af||{});function Yv(n,e,t,r){let i=X(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Af.SignalBased)!==0&&(u=e[o][zt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):bS(e,u,o,r)}finally{X(i)}}var yr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(yr||{}),yV;function M_(n,e){return yV(n,e)}function va(n,e,t,r,i){if(r!=null){let o,s=!1;zn(r)?o=r:hr(r)&&(s=!0,r=r[qn]);let a=Mn(r);n===0&&t!==null?i==null?lA(e,t,a):uf(e,t,a,i||null,!0):n===1&&t!==null?uf(e,t,a,i||null,!0):n===2?dA(e,a,s):n===3&&e.destroyNode(a),o!=null&&SV(e,n,o,t,i)}}function vV(n,e){mA(n,e),e[qn]=null,e[Jt]=null}function _V(n,e,t,r,i,o){r[qn]=i,r[Jt]=e,Nf(n,r,t,1,i,o)}function mA(n,e){e[lr].changeDetectionScheduler?.notify(9),Nf(n,e,e[He],2,null,null)}function EV(n){let e=n[la];if(!e)return xv(n[H],n);for(;e;){let t=null;if(hr(e))t=e[la];else{let r=e[vt];r&&(t=r)}if(!t){for(;e&&!e[Nn]&&e!==n;)hr(e)&&xv(e[H],e),e=e[ct];e===null&&(e=n),hr(e)&&xv(e[H],e),t=e&&e[Nn]}e=t}}function P_(n,e){let t=n[Go],r=t.indexOf(e);t.splice(r,1)}function Rf(n,e){if(fr(e))return;let t=e[He];t.destroyNode&&Nf(n,e,t,3,null,null),EV(e)}function xv(n,e){if(fr(e))return;let t=X(null);try{e[re]&=-129,e[re]|=256,e[En]&&Hs(e[En]),wV(n,e),IV(n,e),e[H].type===1&&e[He].destroy();let r=e[Bi];if(r!==null&&zn(e[ct])){r!==e[ct]&&P_(r,e);let i=e[dr];i!==null&&i.detachView(n)}Gv(e)}finally{X(t)}}function IV(n,e){let t=n.cleanup,r=e[ua];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ua]=null);let i=e[Qr];if(i!==null){e[Qr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Xr];if(o!==null){e[Xr]=null;for(let s of o)s.destroy()}}function wV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Yo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];be(4,a,u);try{u.call(a)}finally{be(5,a,u)}}else{be(4,i,o);try{o.call(i)}finally{be(5,i,o)}}}}}function yA(n,e,t){return DV(n,e.parent,t)}function DV(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[qn];if(qi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ei.None||i===ei.Emulated)return null}return Wn(r,t)}function vA(n,e,t){return TV(n,e,t)}function bV(n,e,t){return n.type&40?Wn(n,t):null}var TV=bV,QC;function x_(n,e,t,r){let i=yA(n,r,e),o=e[He],s=r.parent||e[Jt],a=vA(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)KC(o,i,t[u],a,!1);else KC(o,i,t,a,!1);QC!==void 0&&QC(o,r,e,t,i)}function Ou(n,e){if(e!==null){let t=e.type;if(t&3)return Wn(e,n);if(t&4)return Zv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ou(n,r);{let i=n[e.index];return zn(i)?Zv(-1,i):Mn(i)}}else{if(t&128)return Ou(n,e.next);if(t&32)return M_(e,n)()||Mn(n[e.index]);{let r=_A(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ui(n[Xt]);return Ou(i,r)}else return Ou(n,e.next)}}}return null}function _A(n,e){if(e!==null){let r=n[Xt][Jt],i=e.projection;return r.projection[i]}return null}function Zv(n,e){let t=vt+n+1;if(t<e.length){let r=e[t],i=r[H].firstChild;if(i!==null)return Ou(r,i)}return e[Hi]}function k_(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&wa(Mn(a),r),t.flags|=2),!Cf(t))if(u&8)k_(n,e,t.child,r,i,o,!1),va(e,n,i,a,o);else if(u&32){let l=M_(t,r),h;for(;h=l();)va(e,n,i,h,o);va(e,n,i,a,o)}else u&16?EA(n,e,r,t,i,o):va(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Nf(n,e,t,r,i,o){k_(t,r,n.firstChild,e,i,o,!1)}function CV(n,e,t){let r=e[He],i=yA(n,t,e),o=t.parent||e[Jt],s=vA(o,t,e);EA(r,0,e,t,i,s)}function EA(n,e,t,r,i,o){let s=t[Xt],u=s[Jt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];va(e,n,i,h,o)}else{let l=u,h=s[ct];US(r)&&(l.flags|=128),k_(n,e,l,h,i,o,!0)}}function SV(n,e,t,r,i){let o=t[Hi],s=Mn(t);o!==s&&va(e,n,r,o,i);for(let a=vt;a<t.length;a++){let u=t[a];Nf(u[H],u,n,e,r,o)}}function AV(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:yr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=yr.Important),n.setStyle(t,r,i,o))}}function IA(n,e,t,r,i){let o=pr(),s=r&2;try{Gi(-1),s&&e.length>ke&&gA(n,e,ke,!1),be(s?2:0,i,t),t(r,i)}finally{Gi(o),be(s?3:1,i,t)}}function O_(n,e,t){FV(n,e,t),(t.flags&64)===64&&LV(n,e,t)}function Mf(n,e,t=Wn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function RV(n,e,t,r){let o=r.get(KS,WS)||t===ei.ShadowDom,s=n.selectRootElement(e,o);return NV(s),s}function NV(n){MV(n)}var MV=()=>null;function PV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function xV(n,e,t,r,i,o){let s=e[H];if(L_(n,s,e,t,r)){qi(n)&&OV(e,n.index);return}n.type&3&&(t=PV(t)),kV(n,e,t,r,i,o)}function kV(n,e,t,r,i,o){if(n.type&3){let s=Wn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function OV(n,e){let t=Pn(e,n);t[re]&16||(t[re]|=64)}function FV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;qi(t)&&mV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||sf(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Lu(e,n,s,t);if(wa(u,e),o!==null&&BV(e,s-r,u,a,t,o),Gn(a)){let l=Pn(t.index,e);l[it]=Lu(e,n,s,t)}}}function LV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=MC();try{Gi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];jh(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&VV(u,l)}}finally{Gi(-1),jh(s)}}function VV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function wA(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];cA(e,o.selectors,!1)&&(r??=[],Gn(o)?r.unshift(o):r.push(o))}return r}function jV(n,e,t,r,i,o){let s=Wn(n,e);UV(e[He],s,o,n.value,t,r,i)}function UV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Bo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function BV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Yv(r,t,u,l)}}function DA(n,e,t,r,i){let o=ke+t,s=e[H],a=i(s,e,n,r,t);e[o]=a,ha(n,!0);let u=n.type===2;return u?(hA(e[He],a,n),(DC()===0||Au(n))&&wa(a,e),bC()):wa(a,e),Hh()&&(!u||!Cf(n))&&x_(s,e,a,n),n}function bA(n){let e=n;return _v()?Ev():(e=e.parent,ha(e,!1)),e}function F_(n,e){let t=n[_n];if(!t)return;t.get(Lt,null)?.(e)}function L_(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Yv(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Yv(h,l,r,i),a=!0}return a}function $V(n,e){let t=Pn(e,n),r=t[H];HV(r,t);let i=t[qn];i!==null&&t[$o]===null&&(t[$o]=ZS(i,t[_n])),be(18),V_(r,t,t[it]),be(19,t[it])}function HV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function V_(n,e,t){Bh(e);try{let r=n.viewQuery;r!==null&&Qv(1,r,t);let i=n.template;i!==null&&IA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[dr]?.finishViewCreation(n),n.staticContentQueries&&XS(n,e),n.staticViewQueries&&Qv(2,n.viewQuery,t);let o=n.components;o!==null&&qV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[re]&=-5,$h()}}function qV(n,e){for(let t=0;t<e.length;t++)$V(n,e[t])}function Sa(n,e,t,r){let i=X(null);try{let o=e.tView,a=n[re]&4096?4096:16,u=R_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Bi]=l;let h=n[dr];return h!==null&&(u[dr]=h.createEmbeddedView(o)),V_(o,u,t),u}finally{X(i)}}function Zo(n,e){return!e||e.firstChild===null||US(n)}var YC=!1,zV=new U("");function Vu(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Mn(o)),zn(o)&&TA(o,r);let s=t.type;if(s&8)Vu(n,e,t.child,r);else if(s&32){let a=M_(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=_A(e,t);if(Array.isArray(a))r.push(...a);else{let u=Ui(e[Xt]);Vu(u[H],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function TA(n,e){for(let t=vt;t<n.length;t++){let r=n[t],i=r[H].firstChild;i!==null&&Vu(r[H],r,i,e)}n[Hi]!==n[qn]&&e.push(n[Hi])}function CA(n){if(n[zo]!==null){for(let e of n[zo])e.impl.addSequence(e);n[zo].length=0}}var SA=[];function GV(n){return n[En]??WV(n)}function WV(n){let e=SA.pop()??Object.create(QV);return e.lView=n,e}function KV(n){n.lView[En]!==n&&(n.lView=null,SA.push(n))}var QV=J(k({},Pi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{zi(n.lView)},consumerOnSignalRead(){this.lView[En]=this}});function YV(n){let e=n[En]??Object.create(ZV);return e.lView=n,e}var ZV=J(k({},Pi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ui(n.lView);for(;e&&!AA(e[H]);)e=Ui(e);e&&uv(e)},consumerOnSignalRead(){this.lView[En]=this}});function AA(n){return n.type!==2}function RA(n){if(n[Xr]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Xr])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[re]&8192)}}var JV=100;function j_(n,e=0){let r=n[lr].rendererFactory,i=!1;i||r.begin?.();try{XV(n,e)}finally{i||r.end?.()}}function XV(n,e){let t=wv();try{fa(!0),Jv(n,e);let r=0;for(;Ru(n);){if(r===JV)throw new j(103,!1);r++,Jv(n,1)}}finally{fa(t)}}function NA(n,e){Iv(e?Mu.Exhaustive:Mu.OnlyDirtyViews);try{j_(n)}finally{Iv(Mu.Off)}}function e2(n,e,t,r){if(fr(e))return;let i=e[re],o=!1,s=!1;Bh(e);let a=!0,u=null,l=null;o||(AA(n)?(l=GV(e),u=xi(l)):Ud()===null?(a=!1,l=YV(e),u=xi(l)):e[En]&&(Hs(e[En]),e[En]=null));try{cv(e),AC(n.bindingStartIndex),t!==null&&IA(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Qh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Yh(e,y,0,null),Nv(e,0)}if(s||t2(e),RA(e),MA(e,0),n.contentQueries!==null&&XS(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Qh(e,y)}else{let y=n.contentHooks;y!==null&&Yh(e,y,1),Nv(e,1)}r2(n,e);let p=n.components;p!==null&&xA(e,p,0);let g=n.viewQuery;if(g!==null&&Qv(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Qh(e,y)}else{let y=n.viewHooks;y!==null&&Yh(e,y,2),Nv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[xh]){for(let y of e[xh])y();e[xh]=null}o||(CA(e),e[re]&=-73)}catch(h){throw o||zi(e),h}finally{l!==null&&(Ro(l,u),a&&KV(l)),$h()}}function MA(n,e){for(let t=$S(n);t!==null;t=HS(t))for(let r=vt;r<t.length;r++){let i=t[r];PA(i,e)}}function t2(n){for(let e=$S(n);e!==null;e=HS(e)){if(!(e[re]&2))continue;let t=e[Go];for(let r=0;r<t.length;r++){let i=t[r];uv(i)}}}function n2(n,e,t){be(18);let r=Pn(e,n);PA(r,t),be(19,r[it])}function PA(n,e){Oh(n)&&Jv(n,e)}function Jv(n,e){let r=n[H],i=n[re],o=n[En],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&$s(o)),s||=!1,o&&(o.dirty=!1),n[re]&=-9217,s)e2(r,n,r.template,n[it]);else if(i&8192){let a=X(null);try{RA(n),MA(n,1);let u=r.components;u!==null&&xA(n,u,1),CA(n)}finally{X(a)}}}function xA(n,e,t){for(let r=0;r<e.length;r++)n2(n,e[r],t)}function r2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Gi(~i);else{let o=i,s=t[++r],a=t[++r];NC(s,o);let u=e[o];be(24,u),a(2,u),be(25,u)}}}finally{Gi(-1)}}function Pf(n,e){let t=wv()?64:1088;for(n[lr].changeDetectionScheduler?.notify(e);n;){n[re]|=t;let r=Ui(n);if(da(n)&&!r)return n;n=r}return null}function kA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function OA(n,e){let t=vt+e;if(t<n.length)return n[t]}function Aa(n,e,t,r=!0){let i=e[H];if(i2(i,e,n,t),r){let s=Zv(t,n),a=e[He],u=a.parentNode(n[Hi]);u!==null&&_V(i,n[Jt],a,e,u,s)}let o=e[$o];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function U_(n,e){let t=ju(n,e);return t!==void 0&&Rf(t[H],t),t}function ju(n,e){if(n.length<=vt)return;let t=vt+e,r=n[t];if(r){let i=r[Bi];i!==null&&i!==n&&P_(i,r),e>0&&(n[t-1][Nn]=r[Nn]);let o=wu(n,vt+e);vV(r[H],r);let s=o[dr];s!==null&&s.detachView(o[H]),r[ct]=null,r[Nn]=null,r[re]&=-129}return r}function i2(n,e,t,r){let i=vt+r,o=t.length;r>0&&(t[i-1][Nn]=e),r<o-vt?(e[Nn]=t[i],Yy(t,vt+r,e)):(t.push(e),e[Nn]=null),e[ct]=t;let s=e[Bi];s!==null&&t!==s&&FA(s,e);let a=e[dr];a!==null&&a.insertView(n),Fh(e),e[re]|=128}function FA(n,e){let t=n[Go],r=e[ct];if(hr(r))n[re]|=2;else{let i=r[ct][Xt];e[Xt]!==i&&(n[re]|=2)}t===null?n[Go]=[e]:t.push(e)}var Qi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[H];return Vu(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[it]}set context(e){this._lView[it]=e}get destroyed(){return fr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ct];if(zn(e)){let t=e[Su],r=t?t.indexOf(this):-1;r>-1&&(ju(e,r),wu(t,r))}this._attachedToViewContainer=!1}Rf(this._lView[H],this._lView)}onDestroy(e){Nu(this._lView,e)}markForCheck(){Pf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[re]&=-129}reattach(){Fh(this._lView),this._lView[re]|=128}detectChanges(){this._lView[re]|=1024,j_(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[_n].get(zV,YC)}catch{this.exhaustive=YC}}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=da(this._lView),t=this._lView[Bi];t!==null&&!e&&P_(t,this._lView),mA(this._lView[H],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=da(this._lView),r=this._lView[Bi];r!==null&&!t&&FA(r,this._lView),Fh(this._lView)}};var Jo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=o2;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=Sa(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Qi(o)}}return n})();function o2(){return B_(_t(),ee())}function B_(n,e){return n.type&4?new Jo(e,n,Ca(n,e)):null}function Ra(n,e,t,r,i){let o=n.data[e];if(o===null)o=s2(n,e,t,r,i),RC()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=TC();o.injectorIndex=s===null?-1:s.injectorIndex}return ha(o,!0),o}function s2(n,e,t,r,i){let o=vv(),s=_v(),a=s?o:o&&o.parent,u=n.data[e]=c2(n,a,t,e,r,i);return a2(n,u,o,s),u}function a2(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function c2(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return gv()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var dX=new RegExp(`^(\\d+)*(${HL}|${$L})*(.*)`);function u2(n){let e=n[$i]??[],r=n[ct][He],i=[];for(let o of e)o.data[D_]!==void 0?i.push(o):l2(o,r);n[$i]=i}function l2(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[GS];for(;t<i;){let o=r.nextSibling;dA(e,r,!1),r=o,t++}}}var d2=()=>null,h2=()=>null;function lf(n,e){return d2(n,e)}function LA(n,e,t){return h2(n,e,t)}var VA=class{},xf=class{},Xv=class{resolveComponentFactory(e){throw new j(917,!1)}},zu=class{static NULL=new Xv},Xo=class{},dn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>f2()}return n})();function f2(){let n=ee(),e=_t(),t=Pn(e.index,n);return(hr(t)?t:n)[He]}var jA=(()=>{class n{static \u0275prov=L({token:n,providedIn:"root",factory:()=>null})}return n})();var Jh={},Ea=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Jh,r);return i!==Jh||t===Jh?i:this.parentInjector.get(e,t,r)}};function df(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ch(i,a);else if(o==2){let u=a,l=e[++s];r=Ch(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function W(n,e=0){let t=ee();if(t===null)return se(n,e);let r=_t();return LS(r,t,mt(n),e)}function UA(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}m2(n,e,t,a,o,u,l)}o!==null&&r!==null&&p2(t,r,o)}function p2(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function g2(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function m2(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&Gn(y)&&(u=!0,g2(n,t,g)),qv(sf(t,e),n,y.type)}w2(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=pA(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=Ia(t.mergedAttrs,y.hostAttrs),v2(n,t,e,p,y),I2(p,y,i),s!==null&&s.has(y)){let[A,R]=s.get(y);t.directiveToIndex.set(y.type,[p,A+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let _=y.type.prototype;!l&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}y2(n,t,o)}function y2(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))ZC(0,e,i,r),ZC(1,e,i,r),XC(e,r,!1);else{let o=t.get(i);JC(0,e,o,r),JC(1,e,o,r),XC(e,r,!0)}}}function ZC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),BA(e,o)}}function JC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),BA(e,s)}}function BA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function XC(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||S_(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function v2(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ji(i.type,!0)),s=new Yo(o,Gn(i),W,null);n.blueprint[r]=s,t[r]=s,_2(n,e,r,pA(n,t,i.hostVars,en),i)}function _2(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;E2(s)!=a&&s.push(a),s.push(t,r,o)}}function E2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function I2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Gn(e)&&(t[""]=n)}}function w2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function $A(n,e,t,r,i,o,s,a){let u=e[H],l=u.consts,h=In(l,s),p=Ra(u,n,t,r,h);return o&&UA(u,e,p,In(l,a),i),p.mergedAttrs=Ia(p.mergedAttrs,p.attrs),p.attrs!==null&&df(p,p.attrs,!1),p.mergedAttrs!==null&&df(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function HA(n,e){AS(n,e),ov(e)&&n.queries.elementEnd(e)}function D2(n,e,t,r,i,o){let s=e.consts,a=In(s,i),u=Ra(e,n,t,r,a);if(u.mergedAttrs=Ia(u.mergedAttrs,u.attrs),o!=null){let l=In(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&df(u,u.attrs,!1),u.mergedAttrs!==null&&df(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function $_(n){return zA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function qA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function zA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function H_(n,e,t){return n[e]=t}function b2(n,e){return n[e]}function vr(n,e,t){if(t===en)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function GA(n,e,t,r){let i=vr(n,e,t);return vr(n,e+1,r)||i}function Xh(n,e,t){return function r(i){let o=qi(n)?Pn(n.index,e):e;Pf(o,5);let s=e[it],a=eS(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=eS(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function eS(n,e,t,r){let i=X(null);try{return be(6,e,t),t(r)!==!1}catch(o){return F_(n,o),!1}finally{be(7,e,t),X(i)}}function WA(n,e,t,r,i,o,s,a){let u=Au(n),l=!1,h=null;if(!r&&u&&(h=T2(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Wn(n,t),g=r?r(p):p;WL(t,g,o,a);let y=i.listen(g,o,a),_=r?A=>r(Mn(A[n.index])):n.index;KA(_,e,t,o,a,y,!1)}return l}function T2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ua],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function KA(n,e,t,r,i,o,s){let a=e.firstCreatePass?hv(e):null,u=dv(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function tS(n,e,t,r,i,o){let s=e[t],a=e[H],l=a.data[t].outputs[r],p=s[l].subscribe(o);KA(n.index,a,e,i,o,p,!0)}var e_=Symbol("BINDING");var hf=class extends zu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Jr(e);return new Da(t,this.ngModule)}};function C2(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Af.SignalBased)!==0};return i&&(o.transform=i),o})}function S2(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function A2(n,e,t){let r=e instanceof rt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Ea(t,r):t}function R2(n){let e=n.get(Xo,null);if(e===null)throw new j(407,!1);let t=n.get(jA,null),r=n.get(An,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function N2(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return uA(e,t,t==="svg"?vC:t==="math"?_C:null)}var Da=class extends xf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=C2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=S2(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=cV(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){be(22);let a=X(null);try{let u=this.componentDef,l=M2(r,u,s,o),h=A2(u,i||this.ngModule,e),p=R2(h),g=p.rendererFactory.createRenderer(null,u),y=r?RV(g,r,u.encapsulation,h):N2(u,g),_=s?.some(nS)||o?.some(x=>typeof x!="function"&&x.bindings.some(nS)),A=R_(null,l,null,512|fA(u),null,null,p,g,h,null,ZS(y,h,!0));A[ke]=y,Bh(A);let R=null;try{let x=$A(ke,A,2,"#host",()=>l.directiveRegistry,!0,0);y&&(hA(g,y,x),wa(y,A)),O_(l,A,x),eA(l,x,A),HA(l,x),t!==void 0&&x2(x,this.ngContentSelectors,t),R=Pn(x.index,A),A[it]=R[it],V_(l,A,null)}catch(x){throw R!==null&&Gv(R),Gv(A),x}finally{be(23),$h()}return new ff(this.componentType,A,!!_)}finally{X(a)}}};function M2(n,e,t,r){let i=n?["ng-version","20.1.2"]:uV(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[e_].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[e_].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Du(p);u.push(g)}return A_(0,null,P2(o,s),1,a,u,null,null,null,[i],null)}function P2(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function nS(n){let e=n[e_].kind;return e==="input"||e==="twoWay"}var ff=class extends VA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Wo(t[H],ke),this.location=Ca(this._tNode,t),this.instance=Pn(this._tNode.index,t)[it],this.hostView=this.changeDetectorRef=new Qi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=L_(r,i[H],i,e,t);this.previousInputValues.set(e,t);let s=Pn(r.index,i);Pf(s,1)}get injector(){return new Qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function x2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Zi=(()=>{class n{static __NG_ELEMENT_ID__=k2}return n})();function k2(){let n=_t();return YA(n,ee())}var O2=Zi,QA=class extends O2{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ca(this._hostTNode,this._hostLView)}get injector(){return new Qo(this._hostTNode,this._hostLView)}get parentInjector(){let e=E_(this._hostTNode,this._hostLView);if(MS(e)){let t=rf(e,this._hostLView),r=nf(e),i=t[H].data[r+8];return new Qo(i,t)}else return new Qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=rS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-vt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=lf(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Zo(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!mL(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new Da(Jr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let x=(u?p:this.parentInjector).get(rt,null);x&&(o=x)}let g=Jr(h.componentType??{}),y=lf(this._lContainer,g?.id??null),_=y?.firstChild??null,A=h.create(p,i,_,o,s,a);return this.insertImpl(A.hostView,l,Zo(this._hostTNode,y)),A}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(IC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ct],l=new QA(u,u[Jt],u[ct]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Aa(s,i,o,r),e.attachToViewContainerRef(),Yy(kv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=rS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ju(this._lContainer,t);r&&(wu(kv(this._lContainer),t),Rf(r[H],r))}detach(e){let t=this._adjustIndex(e,-1),r=ju(this._lContainer,t);return r&&wu(kv(this._lContainer),t)!=null?new Qi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function rS(n){return n[Su]}function kv(n){return n[Su]||(n[Su]=[])}function YA(n,e){let t,r=e[n.index];return zn(r)?t=r:(t=kA(r,e,null,n),e[n.index]=t,N_(e,t)),L2(t,e,n,r),new QA(t,n,e)}function F2(n,e){let t=n[He],r=t.createComment(""),i=Wn(e,n),o=t.parentNode(i);return uf(t,o,r,t.nextSibling(i),!1),r}var L2=j2,V2=()=>!1;function ZA(n,e,t){return V2(n,e,t)}function j2(n,e,t,r){if(n[Hi])return;let i;t.type&8?i=Mn(r):i=F2(e,t),n[Hi]=i}var t_=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},n_=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)q_(e,t).matches!==null&&this.queries[t].setDirty()}},pf=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=W2(e):this.predicate=e}},r_=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},i_=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,U2(t,o)),this.matchTNodeWithReadOption(e,t,Zh(t,e,o,!1,!1))}else r===Jo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Zh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Vt||i===Zi||i===Jo&&t.type&4)this.addMatch(t.index,-2);else{let o=Zh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function U2(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function B2(n,e){return n.type&11?Ca(n,e):n.type&4?B_(n,e):null}function $2(n,e,t,r){return t===-1?B2(e,n):t===-2?H2(n,e,r):Lu(n,n[H],t,e)}function H2(n,e,t){if(t===Vt)return Ca(e,n);if(t===Jo)return B_(e,n);if(t===Zi)return YA(e,n)}function JA(n,e,t,r){let i=e[dr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push($2(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function o_(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=JA(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=vt;p<h.length;p++){let g=h[p];g[Bi]===g[ct]&&o_(g[H],g,l,r)}if(h[Go]!==null){let p=h[Go];for(let g=0;g<p.length;g++){let y=p[g];o_(y[H],y,l,r)}}}}}return r}function q2(n,e){return n[dr].queries[e].queryList}function XA(n,e,t){let r=new af((t&4)===4);return wC(n,e,r,r.destroy),(e[dr]??=new n_).queries.push(new t_(r))-1}function z2(n,e,t){let r=Ge();return r.firstCreatePass&&(eR(r,new pf(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),XA(r,ee(),e)}function G2(n,e,t,r){let i=Ge();if(i.firstCreatePass){let o=_t();eR(i,new pf(e,t,r),o.index),K2(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return XA(i,ee(),t)}function W2(n){return n.split(",").map(e=>e.trim())}function eR(n,e,t){n.queries===null&&(n.queries=new r_),n.queries.track(new i_(e,t))}function K2(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function q_(n,e){return n.queries.getByIndex(e)}function Q2(n,e){let t=n[H],r=q_(t,e);return r.crossesNgTemplate?o_(t,n,e,[]):JA(t,n,r,e)}var iS=new Set;function Yn(n){iS.has(n)||(iS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var es=class{},kf=class{};var gf=class extends es{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new hf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Xy(e);this._bootstrapComponents=sA(o.bootstrap),this._r3Injector=Sv(e,t,[{provide:es,useValue:this},{provide:zu,useValue:this.componentFactoryResolver},...r],Yr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},mf=class extends kf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new gf(this.moduleType,e,[])}};var Uu=class extends es{injector;componentFactoryResolver=new hf(this);instance=null;constructor(e){super();let t=new Vo([...e.providers,{provide:es,useValue:this},{provide:zu,useValue:this.componentFactoryResolver}],e.parent||Tu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Na(n,e,t=null){return new Uu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Y2=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Ph(!1,t.type),i=r.length>0?Na([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=L({token:n,providedIn:"environment",factory:()=>new n(se(rt))})}return n})();function le(n){return Ta(()=>{let e=tR(n),t=J(k({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===I_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Y2).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ei.Emulated,styles:n.styles||Yt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Yn("NgStandalone"),nR(t);let r=n.dependencies;return t.directiveDefs=oS(r,Z2),t.pipeDefs=oS(r,ev),t.id=ej(t),t})}function Z2(n){return Jr(n)||Du(n)}function ni(n){return Ta(()=>({type:n.type,bootstrap:n.bootstrap||Yt,declarations:n.declarations||Yt,imports:n.imports||Yt,exports:n.exports||Yt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function J2(n,e){if(n==null)return Hn;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Af.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function X2(n){if(n==null)return Hn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function de(n){return Ta(()=>{let e=tR(n);return nR(e),e})}function Ma(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function tR(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Hn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Yt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:J2(n.inputs,e),outputs:X2(n.outputs),debugInfo:null}}function nR(n){n.features?.forEach(e=>e(n))}function oS(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function ej(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function tj(n){return Object.getPrototypeOf(n.prototype).constructor}function tn(n){let e=tj(n.type),t=!0,r=[n];for(;e;){let i;if(Gn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Ov(n.inputs),s.declaredInputs=Ov(n.declaredInputs),s.outputs=Ov(n.outputs);let a=i.hostBindings;a&&sj(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&ij(n,u),l&&oj(n,l),nj(n,i),nC(n.outputs,i.outputs),Gn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===tn&&(t=!1)}}e=Object.getPrototypeOf(e)}rj(r)}function nj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function rj(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ia(i.hostAttrs,t=Ia(t,i.hostAttrs))}}function Ov(n){return n===Hn?{}:n===Yt?[]:n}function ij(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function oj(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function sj(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function It(n){let e=t=>{let r=Array.isArray(n);t.hostDirectives===null?(t.resolveHostDirectives=aj,t.hostDirectives=r?n.map(s_):[n]):r?t.hostDirectives.unshift(...n.map(s_)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function aj(n){let e=[],t=!1,r=null,i=null;for(let o=0;o<n.length;o++){let s=n[o];if(s.hostDirectives!==null){let a=e.length;r??=new Map,i??=new Map,rR(s,e,r),i.set(s,[a,e.length-1])}o===0&&Gn(s)&&(t=!0,e.push(s))}for(let o=t?1:0;o<n.length;o++)e.push(n[o]);return[e,r,i]}function rR(n,e,t){if(n.hostDirectives!==null)for(let r of n.hostDirectives)if(typeof r=="function"){let i=r();for(let o of i)sS(s_(o),e,t)}else sS(r,e,t)}function sS(n,e,t){let r=Du(n.directive);cj(r.declaredInputs,n.inputs),rR(r,e,t),t.set(r,n),e.push(r)}function s_(n){return typeof n=="function"?{directive:mt(n),inputs:Hn,outputs:Hn}:{directive:mt(n.directive),inputs:aS(n.inputs),outputs:aS(n.outputs)}}function aS(n){if(n===void 0||n.length===0)return Hn;let e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function cj(n,e){for(let t in e)if(e.hasOwnProperty(t)){let r=e[t],i=n[t];n[r]=i}}function iR(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Ia(n.mergedAttrs,n.attrs);let h=n.tView=A_(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ha(n,!1);let u=lj(t,e,n,r);Hh()&&x_(t,e,u,n),wa(u,e);let l=kA(u,e,u,n);e[r+ke]=l,N_(e,l),ZA(l,n,e)}function uj(n,e,t,r,i,o,s,a,u,l,h){let p=t+ke,g;return e.firstCreatePass?(g=Ra(e,p,4,s||null,a||null),pv()&&UA(e,n,g,In(e.consts,l),wA),AS(e,g)):g=e.data[p],iR(g,n,e,t,r,i,o,u),Au(g)&&O_(e,n,g),l!=null&&Mf(n,g,h),g}function ts(n,e,t,r,i,o,s,a,u,l,h){let p=t+ke,g;if(e.firstCreatePass){if(g=Ra(e,p,4,s||null,a||null),l!=null){let y=In(e.consts,l);g.localNames=[];for(let _=0;_<y.length;_+=2)g.localNames.push(y[_],-1)}}else g=e.data[p];return iR(g,n,e,t,r,i,o,u),l!=null&&Mf(n,g,h),g}function oR(n,e,t,r,i,o,s,a){let u=ee(),l=Ge(),h=In(l.consts,o);return uj(u,l,n,e,t,r,i,h,void 0,s,a),oR}function sR(n,e,t,r,i,o,s,a){let u=ee(),l=Ge(),h=In(l.consts,o);return ts(u,l,n,e,t,r,i,h,void 0,s,a),sR}var lj=dj;function dj(n,e,t,r){return qh(!0),e[He].createComment("")}var ln=function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n}(ln||{}),cS=0,hj=1,at=function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n}(at||{}),z_=function(n){return n[n.Initial=-1]="Initial",n}(z_||{}),fj=0,Gu=1;var pj=4,gj=5,mj=6,yj=7,Fv=8,vj=9,G_=function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n}(G_||{});function aR(n,e,t){let r=uR(n);e[r]===null&&(e[r]=[]),e[r].push(t)}function ef(n,e){let t=uR(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function cR(n){ef(1,n),ef(0,n),ef(2,n)}function uR(n){let e=pj;return n===1?e=gj:n===2&&(e=vj),e}var Of=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Of||{}),rs=new U(""),lR=!1,a_=class extends nt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,mC()&&(this.destroyRef=C(Mt,{optional:!0})??void 0,this.pendingTasks=C(gr,{optional:!0})??void 0)}emit(e){let t=X(null);try{super.next(e)}finally{X(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Qe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ze=a_;function dR(n){let e,t;function r(){n=Ko;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function uS(n){return queueMicrotask(()=>n()),()=>{n=Ko}}var W_="isAngularZone",yf=W_+"_ID",_j=0,Ie=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ze(!1);onMicrotaskEmpty=new Ze(!1);onStable=new Ze(!1);onError=new Ze(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=lR}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,wj(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(W_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Ej,Ko,Ko);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Ej={};function K_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Ij(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){dR(()=>{n.callbackScheduled=!1,c_(n),n.isCheckStableRunning=!0,K_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),c_(n)}function wj(n){let e=()=>{Ij(n)},t=_j++;n._inner=n._inner.fork({name:"angular",properties:{[W_]:!0,[yf]:t,[yf+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Dj(u))return r.invokeTask(o,s,a,u);try{return lS(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),dS(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return lS(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!bj(u)&&e(),dS(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,c_(n),K_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function c_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function lS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function dS(n){n._nesting--,K_(n)}var Bu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ze;onMicrotaskEmpty=new Ze;onStable=new Ze;onError=new Ze;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Dj(n){return hR(n,"__ignore_ng_zone__")}function bj(n){return hR(n,"__scheduler_tick__")}function hR(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Q_=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),fR=[0,1,2,3],pR=(()=>{class n{ngZone=C(Ie);scheduler=C(An);errorHandler=C(vn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){C(rs,{optional:!0})}execute(){let t=this.sequences.size>0;t&&be(16),this.executing=!0;for(let r of fR)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&be(17)}register(t){let{view:r}=t;r!==void 0?((r[zo]??=[]).push(t),zi(r),r[re]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Of.AFTER_NEXT_RENDER,t):t()}static \u0275prov=L({token:n,providedIn:"root",factory:()=>new n})}return n})(),vf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[zo];e&&(this.view[zo]=e.filter(t=>t!==this))}};function gR(n,e){let t=e?.injector??C(je);return Yn("NgAfterRender"),mR(n,t,e,!1)}function Ff(n,e){let t=e?.injector??C(je);return Yn("NgAfterNextRender"),mR(n,t,e,!0)}function Tj(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function mR(n,e,t,r){let i=e.get(Q_);i.impl??=e.get(pR);let o=e.get(rs,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Mt):null,a=e.get(ga,null,{optional:!0}),u=new vf(i.impl,Tj(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}function Lf(n){return n+1}function Pa(n,e){let t=n[H],r=Lf(e.index);return n[r]}function Cj(n,e,t){let r=n[H],i=Lf(e);n[i]=t}function xa(n,e){let t=Lf(e.index);return n.data[t]}function Sj(n,e,t){let r=Lf(e);n.data[r]=t}function Aj(n,e,t){let r=e[H],i=xa(r,t);switch(n){case at.Complete:return i.primaryTmplIndex;case at.Loading:return i.loadingTmplIndex;case at.Error:return i.errorTmplIndex;case at.Placeholder:return i.placeholderTmplIndex;default:return null}}function hS(n,e){return e===at.Placeholder?n.placeholderBlockConfig?.[cS]??null:e===at.Loading?n.loadingBlockConfig?.[cS]??null:null}function Rj(n){return n.loadingBlockConfig?.[hj]??null}function fS(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function Nj(n,e){let t=e.primaryTmplIndex+ke;return Wo(n,t)}function Mj(n,e,t){let r=t.get(Ie);return zL(n,()=>r.run(e),()=>r.runOutsideAngular(()=>qL()))}function Pj(n,e,t){return t==null?n:t>=0?lv(t,n):n[e.index][vt]??null}function xj(n,e){return kh(ke+e,n)}function kj(n,e,t,r,i,o,s){let a=n[_n],u=a.get(Ie),l;function h(){if(fr(n)){l.destroy();return}let p=Pa(n,e),g=p[Gu];if(g!==z_.Initial&&g!==at.Placeholder){l.destroy();return}let y=Pj(n,e,r);if(!y||(l.destroy(),fr(y)))return;let _=xj(y,t),A=i(_,()=>{u.run(()=>{n!==y&&Lh(y,A),o()})},a);n!==y&&Nu(y,A),aR(s,p,A)}l=gR({read:h},{injector:a})}var Oj=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?Na(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=L({token:n,providedIn:"environment",factory:()=>new n})}return n})();var yR=new U("");function Lv(n,e,t){return n.get(Oj).getOrCreateInjector(e,n,t,"")}function Fj(n,e,t){if(n instanceof Ea){let i=n.injector,o=n.parentInjector,s=Lv(o,e,t);return new Ea(i,s)}let r=n.get(rt);if(r!==n){let i=Lv(r,e,t);return new Ea(n,i)}return Lv(n,e,t)}function Ki(n,e,t,r=!1){let i=t[ct],o=i[H];if(fr(i))return;let s=Pa(i,e),a=s[Gu],u=s[yj];if(!(u!==null&&n<u)&&pS(a,n)&&pS(s[fj]??-1,n)){let l=xa(o,e),p=!r&&!0&&(Rj(l)!==null||hS(l,at.Loading)!==null||hS(l,at.Placeholder))?Uj:Vj;try{p(n,s,t,e,i)}catch(g){F_(i,g)}}}function Lj(n,e){let t=n[$i]?.findIndex(i=>i.data[b_]===e[Gu])??-1;return{dehydratedView:t>-1?n[$i][t]:null,dehydratedViewIx:t}}function Vj(n,e,t,r,i){be(20);let o=Aj(n,i,r);if(o!==null){e[Gu]=n;let s=i[H],a=o+ke,u=Wo(s,a),l=0;U_(t,l);let h;if(n===at.Complete){let _=xa(s,r),A=_.providers;A&&A.length>0&&(h=Fj(i[_n],_,A))}let{dehydratedView:p,dehydratedViewIx:g}=Lj(t,e),y=Sa(i,u,null,{injector:h,dehydratedView:p});if(Aa(t,y,l,Zo(u,p)),Pf(y,2),g>-1&&t[$i]?.splice(g,1),(n===at.Complete||n===at.Error)&&Array.isArray(e[Fv])){for(let _ of e[Fv])_();e[Fv]=null}}be(21)}function pS(n,e){return n<e}function jj(n,e){let t=n[e.index];Ki(at.Placeholder,e,t)}function gS(n,e,t){n.loadingPromise.then(()=>{n.loadingState===ln.COMPLETE?Ki(at.Complete,e,t):n.loadingState===ln.FAILED&&Ki(at.Error,e,t)})}var Uj=null;var Y_=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Z_=new U("");function ri(n){return!!n&&typeof n.then=="function"}function Vf(n){return!!n&&typeof n.subscribe=="function"}var vR=new U("");var J_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=C(vR,{optional:!0})??[];injector=C(je);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=yt(this.injector,i);if(ri(o))t.push(o);else if(Vf(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jf=new U("");function _R(){cy(()=>{let n="";throw new j(600,n)})}function ER(n){return n.isBoundToModule}var Bj=10;var ii=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=C(Lt);afterRenderManager=C(Q_);zonelessEnabled=C(xu);rootEffectScheduler=C(ku);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new nt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=C(gr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe($(t=>!t))}constructor(){C(rs,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=C(rt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=je.NULL){return this._injector.get(Ie).run(()=>{be(10);let s=t instanceof xf;if(!this._injector.get(J_).done){let _="";throw new j(405,_)}let u;s?u=t:u=this._injector.get(zu).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=ER(u)?void 0:this._injector.get(es),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Z_,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Fu(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),be(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){be(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Of.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let t=X(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,X(t),this.afterTick.next(),be(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Xo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Bj;)be(14),this.synchronizeOnce(),be(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ru(i))continue;let o=r&&!this.zonelessEnabled?0:1;j_(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ru(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Fu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(jf,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Fu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function IR(n,e,t){let r=e[_n],i=e[H];if(n.loadingState!==ln.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=Pa(e,t),s=Nj(i,n);n.loadingState=ln.IN_PROGRESS,ef(1,o);let a=n.dependencyResolverFn,u=r.get(Wi).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(l=>{let h=!1,p=[],g=[];for(let y of l)if(y.status==="fulfilled"){let _=y.value,A=Jr(_)||Du(_);if(A)p.push(A);else{let R=ev(_);R&&g.push(R)}}else{h=!0;break}if(h){if(n.loadingState=ln.FAILED,n.errorTmplIndex===null){let y="",_=new j(-750,!1);F_(e,_)}}else{n.loadingState=ln.COMPLETE;let y=s.tView;if(p.length>0){y.directiveRegistry=fS(y.directiveRegistry,p);let _=p.map(R=>R.type),A=Ph(!1,..._);n.providers=A}g.length>0&&(y.pipeRegistry=fS(y.pipeRegistry,g))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,u()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=ln.COMPLETE,u()}),n.loadingPromise)}function $j(n,e){return e[_n].get(yR,null,{optional:!0})?.behavior!==G_.Manual}function Hj(n,e,t){let r=e[H],i=e[t.index];if(!$j(n,e))return;let o=Pa(e,t),s=xa(r,t);switch(cR(o),s.loadingState){case ln.NOT_STARTED:Ki(at.Loading,t,i),IR(s,e,t),s.loadingState===ln.IN_PROGRESS&&gS(s,t,i);break;case ln.IN_PROGRESS:Ki(at.Loading,t,i),gS(s,t,i);break;case ln.COMPLETE:Ki(at.Complete,t,i);break;case ln.FAILED:Ki(at.Error,t,i);break;default:}}function qj(n,e,t){return n===0?mS(e,t):n===2?!mS(e,t):!0}function zj(n){return n!=null&&(n&1)===1}function mS(n,e){let t=n[_n],r=xa(n[H],e),i=JS(t),o=zj(r.flags),a=Pa(n,e)[mj]!==null;return!(o&&a&&i)}function Gj(n,e,t,r,i,o,s,a,u,l){let h=ee(),p=Ge(),g=n+ke,y=ts(h,p,n,null,0,0),_=h[_n];if(p.firstCreatePass){Yn("NgDefer");let tt={primaryTmplIndex:e,loadingTmplIndex:r??null,placeholderTmplIndex:i??null,errorTmplIndex:o??null,placeholderBlockConfig:null,loadingBlockConfig:null,dependencyResolverFn:t??null,loadingState:ln.NOT_STARTED,loadingPromise:null,providers:null,hydrateTriggers:null,debug:null,flags:l??0};u?.(p,tt,a,s),Sj(p,g,tt)}let A=h[g];ZA(A,y,h);let R=null,x=null;if(A[$i]?.length>0){let tt=A[$i][0].data;x=tt[D_]??null,R=tt[b_]}let q=[null,z_.Initial,null,null,null,null,x,R,null,null];Cj(h,g,q);let Z=null;x!==null&&(Z=_.get(YS),Z.add(x,{lView:h,tNode:y,lContainer:A}));let Ce=()=>{cR(q),x!==null&&Z?.cleanup([x])};aR(0,q,()=>Lh(h,Ce)),Nu(h,Ce)}function Wj(n,e){let t=ee(),r=_t();qj(0,t,r)&&(jj(t,r),kj(t,r,n,e,Mj,()=>Hj(0,t,r),0))}function ka(n,e,t,r){let i=ee(),o=pa();if(vr(i,o,e)){let s=Ge(),a=Cv();jV(a,i,n,e,t,r)}return ka}var u_=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Vv(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function Kj(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=n.at(o),h=e[o],p=Vv(o,l,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let g=n.at(s),y=e[u],_=Vv(s,g,u,y,t);if(_!==0){_<0&&n.updateValue(s,y),s--,u--;continue}let A=t(o,l),R=t(s,g),x=t(o,h);if(Object.is(x,R)){let q=t(u,y);Object.is(q,A)?(n.swap(o,s),n.updateValue(s,y),u--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new _f,i??=vS(n,o,s,t),l_(n,r,o,x))n.updateValue(o,h),o++,s++;else if(i.has(x))r.set(A,n.detach(o)),s--;else{let q=n.create(o,e[o]);n.attach(o,q),o++,s++}}for(;o<=u;)yS(n,r,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=n.at(o),p=l.value,g=Vv(o,h,o,p,t);if(g!==0)g<0&&n.updateValue(o,p),o++,l=u.next();else{r??=new _f,i??=vS(n,o,s,t);let y=t(o,p);if(l_(n,r,o,y))n.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))n.attach(o,n.create(o,p)),o++,s++,l=u.next();else{let _=t(o,h);r.set(_,n.detach(o)),s--}}}for(;!l.done;)yS(n,r,t,n.length,l.value),l=u.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(u=>{n.destroy(u)})}function l_(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function yS(n,e,t,r,i){if(l_(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function vS(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var _f=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Zn(n,e,t,r,i,o,s,a){Yn("NgControlFlow");let u=ee(),l=Ge(),h=In(l.consts,o);return ts(u,l,n,e,t,r,i,h,256,s,a),Wu}function Wu(n,e,t,r,i,o,s,a){Yn("NgControlFlow");let u=ee(),l=Ge(),h=In(l.consts,o);return ts(u,l,n,e,t,r,i,h,512,s,a),Wu}function Jn(n,e){Yn("NgControlFlow");let t=ee(),r=pa(),i=t[r]!==en?t[r]:-1,o=i!==-1?Ef(t,ke+i):void 0,s=0;if(vr(t,r,n)){let a=X(null);try{if(o!==void 0&&U_(o,s),n!==-1){let u=ke+n,l=Ef(t,u),h=p_(t[H],u),p=LA(l,h,t),g=Sa(t,h,e,{dehydratedView:p});Aa(l,g,s,Zo(h,p))}}finally{X(a)}}else if(o!==void 0){let a=OA(o,s);a!==void 0&&(a[it]=e)}}var d_=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-vt}};function X_(n){return n}function Qj(n,e){return e}var h_=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function eE(n,e,t,r,i,o,s,a,u,l,h,p,g){Yn("NgControlFlow");let y=ee(),_=Ge(),A=u!==void 0,R=ee(),x=a?s.bind(R[Xt][it]):s,q=new h_(A,x);R[ke+n]=q,ts(y,_,n+1,e,t,r,i,In(_.consts,o),256),A&&ts(y,_,n+2,u,l,h,p,In(_.consts,g),512)}var f_=class extends u_{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-vt}at(e){return this.getLView(e)[it].$implicit}attach(e,t){let r=t[$o];this.needsIndexUpdate||=e!==this.length,Aa(this.lContainer,t,e,Zo(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Yj(this.lContainer,e)}create(e,t){let r=lf(this.lContainer,this.templateTNode.tView.ssrId),i=Sa(this.hostLView,this.templateTNode,new d_(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Rf(e[H],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[it].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[it].$index=e}getLView(e){return Zj(this.lContainer,e)}};function tE(n){let e=X(null),t=pr();try{let r=ee(),i=r[H],o=r[t],s=t+1,a=Ef(r,s);if(o.liveCollection===void 0){let l=p_(i,s);o.liveCollection=new f_(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(Kj(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=pa(),h=u.length===0;if(vr(r,l,h)){let p=t+2,g=Ef(r,p);if(h){let y=p_(i,p),_=LA(g,y,r),A=Sa(r,y,void 0,{dehydratedView:_});Aa(g,A,0,Zo(y,_))}else i.firstUpdatePass&&u2(g),U_(g,0)}}}finally{X(e)}}function Ef(n,e){return n[e]}function Yj(n,e){return ju(n,e)}function Zj(n,e){return OA(n,e)}function p_(n,e){return Wo(n,e)}function Re(n,e,t){let r=ee(),i=pa();if(vr(r,i,e)){let o=Ge(),s=Cv();xV(s,r,n,e,r[He],t)}return Re}function g_(n,e,t,r,i){L_(e,n,t,i?"class":"style",r)}function K(n,e,t,r){let i=ee(),o=i[H],s=n+ke,a=o.firstCreatePass?$A(s,i,2,e,wA,pv(),t,r):o.data[s];if(DA(a,i,n,e,wR),Au(a)){let u=i[H];O_(u,i,a),eA(u,a,i)}return r!=null&&Mf(i,a),K}function G(){let n=Ge(),e=_t(),t=bA(e);return n.firstCreatePass&&HA(n,t),mv(t)&&yv(),fv(),t.classesWithoutHost!=null&&wL(t)&&g_(n,t,ee(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&DL(t)&&g_(n,t,ee(),t.stylesWithoutHost,!1),G}function Le(n,e,t,r){return K(n,e,t,r),G(),Le}function jt(n,e,t,r){let i=ee(),o=i[H],s=n+ke,a=o.firstCreatePass?D2(s,o,2,e,t,r):o.data[s];return DA(a,i,n,e,wR),r!=null&&Mf(i,a),jt}function Ut(){let n=_t(),e=bA(n);return mv(e)&&yv(),fv(),Ut}function Ji(n,e,t,r){return jt(n,e,t,r),Ut(),Ji}var wR=(n,e,t,r,i)=>(qh(!0),uA(e[He],r,LC()));function hn(){return ee()}var Ku="en-US";var Jj=Ku;function DR(n){typeof n=="string"&&(Jj=n.toLowerCase().replace(/_/g,"-"))}function ae(n,e,t){let r=ee(),i=Ge(),o=_t();return Xj(i,r,r[He],o,n,e,t),ae}function Oa(n,e,t){let r=ee(),i=Ge(),o=_t();return(o.type&3||t)&&WA(o,i,r,t,r[He],n,e,Xh(o,r,e)),Oa}function Xj(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Xh(r,e,o),WA(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Xh(r,e,o),tS(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Xh(r,e,o),tS(r,e,p,i,i,u)}}function wn(n=1){return FC(n)}function eU(n,e){let t=null,r=rV(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?cA(n,o,!0):sV(r,o))return i}return t}function Qu(n){let e=ee()[Xt][Jt];if(!e.projection){let t=n?n.length:1,r=e.projection=uC(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?eU(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Fa(n,e=0,t,r,i,o){let s=ee(),a=Ge(),u=r?n+1:null;u!==null&&ts(s,a,u,r,i,o,null,t);let l=Ra(a,ke+n,16,null,t||null);l.projection===null&&(l.projection=e),Ev();let p=!s[$o]||gv();s[Xt][Jt].projection[l.projection]===null&&u!==null?tU(s,a,u):p&&!Cf(l)&&CV(a,s,l)}function tU(n,e,t){let r=ke+t,i=e.data[r],o=n[r],s=lf(o,i.tView.ssrId),a=Sa(n,i,void 0,{dehydratedView:s});Aa(o,a,0,Zo(i,s))}function nE(n,e,t,r){G2(n,e,t,r)}function Yu(n,e,t){z2(n,e,t)}function is(n){let e=ee(),t=Ge(),r=Dv();Uh(r+1);let i=q_(t,r);if(n.dirty&&EC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=Q2(e,r);n.reset(o,FL),n.notifyOnChanges()}return!0}return!1}function os(){return q2(ee(),Dv())}function ss(n){let e=CC();return sv(e,ke+n)}function Kh(n,e){return n<<17|e<<2}function ns(n){return n>>17&32767}function nU(n){return(n&2)==2}function rU(n,e){return n&131071|e<<17}function m_(n){return n|2}function ba(n){return(n&131068)>>2}function jv(n,e){return n&-131069|e<<2}function iU(n){return(n&1)===1}function y_(n){return n|1}function oU(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ns(s),u=ba(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||ca(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let g=ns(n[a+1]);n[r+1]=Kh(g,a),g!==0&&(n[g+1]=jv(n[g+1],r)),n[a+1]=rU(n[a+1],r)}else n[r+1]=Kh(a,0),a!==0&&(n[a+1]=jv(n[a+1],r)),a=r;else n[r+1]=Kh(u,0),a===0?a=r:n[u+1]=jv(n[u+1],r),u=r;l&&(n[r+1]=m_(n[r+1])),_S(n,h,r,!0),_S(n,h,r,!1),sU(e,h,n,r,o),s=Kh(a,u),o?e.classBindings=s:e.styleBindings=s}function sU(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ca(o,e)>=0&&(t[r+1]=y_(t[r+1]))}function _S(n,e,t,r){let i=n[t+1],o=e===null,s=r?ns(i):ba(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];aU(u,e)&&(a=!0,n[s+1]=r?y_(l):m_(l)),s=r?ns(l):ba(l)}a&&(n[t+1]=r?m_(i):y_(i))}function aU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ca(n,e)>=0:!1}var Qn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function cU(n){return n.substring(Qn.key,Qn.keyEnd)}function uU(n){return lU(n),bR(n,TR(n,0,Qn.textEnd))}function bR(n,e){let t=Qn.textEnd;return t===e?-1:(e=Qn.keyEnd=dU(n,Qn.key=e,t),TR(n,e,t))}function lU(n){Qn.key=0,Qn.keyEnd=0,Qn.value=0,Qn.valueEnd=0,Qn.textEnd=n.length}function TR(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function dU(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function nn(n,e){return fU(n,e,null,!0),nn}function rE(n){pU(EU,hU,n,!0)}function hU(n,e){for(let t=uU(e);t>=0;t=bR(e,t))Nh(n,cU(e),!0)}function fU(n,e,t,r){let i=ee(),o=Ge(),s=Vh(2);if(o.firstUpdatePass&&SR(o,n,s,r),e!==en&&vr(i,s,e)){let a=o.data[pr()];AR(o,a,i,i[He],n,i[s+1]=wU(e,t),r,s)}}function pU(n,e,t,r){let i=Ge(),o=Vh(2);i.firstUpdatePass&&SR(i,null,o,r);let s=ee();if(t!==en&&vr(s,o,t)){let a=i.data[pr()];if(RR(a,r)&&!CR(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Ch(u,t||"")),g_(i,a,s,t,r)}else IU(i,a,s,s[He],s[o+1],s[o+1]=_U(n,e,t),r,o)}}function CR(n,e){return e>=n.expandoStartIndex}function SR(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[pr()],s=CR(n,t);RR(o,r)&&e===null&&!s&&(e=!1),e=gU(i,o,e,r),oU(i,o,e,t,s,r)}}function gU(n,e,t,r){let i=PC(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Uv(null,n,e,t,r),t=$u(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Uv(i,n,e,t,r),o===null){let u=mU(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Uv(null,n,e,u[1],r),u=$u(u,e.attrs,r),yU(n,e,r,u))}else o=vU(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function mU(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ba(r)!==0)return n[ns(r)]}function yU(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ns(i)]=r}function vU(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=$u(r,s,t)}return $u(r,e.attrs,t)}function Uv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=$u(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function $u(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Nh(n,s,t?!0:e[++o]))}return n===void 0?null:n}function _U(n,e,t){if(t==null||t==="")return Yt;let r=[],i=qu(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function EU(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Nh(n,r,t)}function IU(n,e,t,r,i,o,s,a){i===en&&(i=Yt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,_=null,A;h===p?(u+=2,l+=2,g!==y&&(_=p,A=y)):p===null||h!==null&&h<p?(u+=2,_=h):(l+=2,_=p,A=y),_!==null&&AR(n,e,t,r,_,A,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function AR(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=iU(l)?ES(u,e,t,i,ba(l),s):void 0;if(!If(h)){If(o)||nU(l)&&(o=ES(u,null,t,i,a,s));let p=kh(pr(),t);AV(r,s,p,i,o)}}function ES(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=t[i+1];g===en&&(g=p?Yt:void 0);let y=p?Mh(g,r):h===r?g:void 0;if(l&&!If(y)&&(y=Mh(u,r)),If(y)&&(a=y,s))return a;let _=n[i+1];i=s?ns(_):ba(_)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Mh(u,r))}return a}function If(n){return n!==void 0}function wU(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Yr(qu(n)))),n}function RR(n,e){return(n.flags&(e?8:16))!==0}function ve(n,e=""){let t=ee(),r=Ge(),i=n+ke,o=r.firstCreatePass?Ra(r,i,1,e,null):r.data[i],s=DU(r,t,o,e,n);t[i]=s,Hh()&&x_(r,t,s,o),ha(o,!1)}var DU=(n,e,t,r,i)=>(qh(!0),lV(e[He],r));function bU(n,e,t,r=""){return vr(n,pa(),t)?e+Bo(t)+r:en}function TU(n,e,t,r,i,o=""){let s=SC(),a=GA(n,s,t,i);return Vh(2),a?e+Bo(t)+r+Bo(i)+o:en}function _r(n){return Je("",n),_r}function Je(n,e,t){let r=ee(),i=bU(r,n,e,t);return i!==en&&NR(r,pr(),i),Je}function Uf(n,e,t,r,i){let o=ee(),s=TU(o,n,e,t,r,i);return s!==en&&NR(o,pr(),s),Uf}function NR(n,e,t){let r=kh(e,n);dV(n[He],r,t)}function CU(n,e,t){let r=Ge();if(r.firstCreatePass){let i=Gn(n);v_(t,r.data,r.blueprint,i,!0),v_(e,r.data,r.blueprint,i,!1)}}function v_(n,e,t,r,i){if(n=mt(n),Array.isArray(n))for(let o=0;o<n.length;o++)v_(n[o],e,t,r,i);else{let o=Ge(),s=ee(),a=_t(),u=Lo(n)?n:mt(n.provide),l=nv(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Lo(n)||!n.multi){let y=new Yo(l,i,W,null),_=$v(u,e,i?h:h+g,p);_===-1?(qv(sf(a,s),o,u),Bv(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[_]=y,s[_]=y)}else{let y=$v(u,e,h+g,p),_=$v(u,e,h,h+g),A=y>=0&&t[y],R=_>=0&&t[_];if(i&&!R||!i&&!A){qv(sf(a,s),o,u);let x=RU(i?AU:SU,t.length,i,r,l,n);!i&&R&&(t[_].providerFactory=x),Bv(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(x),s.push(x)}else{let x=MR(t[i?_:y],l,!i&&r);Bv(o,n,y>-1?y:_,x)}!i&&r&&R&&t[_].componentProviders++}}}function Bv(n,e,t,r){let i=Lo(e),o=gC(e);if(i||o){let u=(o?mt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function MR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function $v(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function SU(n,e,t,r,i){return __(this.multi,[])}function AU(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Lu(r,r[H],this.providerFactory.index,i);s=u.slice(0,a),__(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],__(o,s);return s}function __(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function RU(n,e,t,r,i,o){let s=new Yo(n,t,W,null);return s.multi=[],s.index=e,s.componentProviders=0,MR(s,i,r&&!t),s}function oi(n,e=[]){return t=>{t.providersResolver=(r,i)=>CU(r,i?i(n):n,e)}}function Zu(n,e,t){let r=Pu()+n,i=ee();return i[r]===en?H_(i,r,t?e.call(t):e()):b2(i,r)}function iE(n,e,t,r){return xR(ee(),Pu(),n,e,t,r)}function oE(n,e,t,r,i){return NU(ee(),Pu(),n,e,t,r,i)}function PR(n,e){let t=n[e];return t===en?void 0:t}function xR(n,e,t,r,i,o){let s=e+t;return vr(n,s,i)?H_(n,s+1,o?r.call(o,i):r(i)):PR(n,s+1)}function NU(n,e,t,r,i,o,s){let a=e+t;return GA(n,a,i,o)?H_(n,a+2,s?r.call(s,i,o):r(i,o)):PR(n,a+2)}function si(n,e){let t=Ge(),r,i=n+ke;t.firstCreatePass?(r=MU(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ji(r.type,!0)),s,a=Qt(W);try{let u=of(!1),l=o();return of(u),av(t,ee(),i,l),l}finally{Qt(a)}}function MU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function ai(n,e,t){let r=n+ke,i=ee(),o=sv(i,r);return PU(i,r)?xR(i,Pu(),e,o.transform,t,o):o.transform(t)}function PU(n,e){return n[H].data[e].pure}var wf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},sE=(()=>{class n{compileModuleSync(t){return new mf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Xy(t),o=sA(i.declarations).reduce((s,a)=>{let u=Jr(a);return u&&s.push(new Da(u)),s},[]);return new wf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xU=(()=>{class n{zone=C(Ie);changeDetectionScheduler=C(An);applicationRef=C(ii);applicationErrorHandler=C(Lt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kR({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ie(J(k({},OR()),{scheduleInRootZone:t})),[{provide:Ie,useFactory:n},{provide:Zr,multi:!0,useFactory:()=>{let r=C(xU,{optional:!0});return()=>r.initialize()}},{provide:Zr,multi:!0,useFactory:()=>{let r=C(kU);return()=>{r.initialize()}}},e===!0?{provide:Rv,useValue:!0}:[],{provide:zh,useValue:t??lR},{provide:Lt,useFactory:()=>{let r=C(Ie),i=C(rt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(vn),o.handleError(s))})}}}]}function OR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var kU=(()=>{class n{subscription=new Qe;initialized=!1;zone=C(Ie);pendingTasks=C(gr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var aE=(()=>{class n{applicationErrorHandler=C(Lt);appRef=C(ii);taskService=C(gr);ngZone=C(Ie);zonelessEnabled=C(xu);tracing=C(rs,{optional:!0});disableScheduling=C(Rv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Qe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(yf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(C(zh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Bu||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?uS:dR;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(yf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,uS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OU(){return Yn("NgZoneless"),Zt([{provide:An,useExisting:aE},{provide:Ie,useClass:Bu},{provide:xu,useValue:!0},{provide:zh,useValue:!1},[]])}function FU(){return typeof $localize<"u"&&$localize.locale||Ku}var Bf=new U("",{providedIn:"root",factory:()=>C(Bf,{optional:!0,skipSelf:!0})||FU()});var $f=class{destroyed=!1;listeners=null;errorHandler=C(vn,{optional:!0});destroyRef=C(Mt);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new j(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(jo(953,!1));return}if(this.listeners===null)return;let t=X(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{X(t)}}};function rn(n){return X0(n)}function fn(n,e){return zd(n,e?.equal)}var cE=class{[zt];constructor(e){this[zt]=e}destroy(){this[zt].destroy()}};function La(n,e){let t=e?.injector??C(je),r=e?.manualCleanup!==!0?t.get(Mt):null,i,o=t.get(ga,null,{optional:!0}),s=t.get(An);return o!==null?(i=jU(o.view,s,n),r instanceof _u&&r._lView===o.view&&(r=null)):i=UU(n,t.get(ku),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new cE(i)}var FR=J(k({},Pi),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Ko,run(){if(this.dirty=!1,this.hasRun&&!$s(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=xi(this),t=fa(!1);try{this.maybeCleanup(),this.fn(n)}finally{fa(t),Ro(this,e)}},maybeCleanup(){if(!this.cleanupFns?.length)return;let n=X(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],X(n)}}}),LU=J(k({},FR),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Hs(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),VU=J(k({},FR),{consumerMarkedDirty(){this.view[re]|=8192,zi(this.view),this.notifier.notify(13)},destroy(){Hs(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Xr]?.delete(this)}});function jU(n,e,t){let r=Object.create(VU);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[Xr]??=new Set,n[Xr].add(r),r.consumerMarkedDirty(r),r}function UU(n,e,t){let r=Object.create(LU);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}var UR=Symbol("InputSignalNode#UNSET"),iB=J(k({},Gd),{transformFn:void 0,applyValueToInputSignal(n,e){qs(n,e)}});function BR(n,e){let t=Object.create(iB);t.value=n,t.transformFn=e?.transform;function r(){if(Bs(t),t.value===UR){let i=null;throw new j(-950,i)}return t.value}return r[zt]=t,r}var qf=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Hu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},oB=new U("");oB.__NG_ELEMENT_ID__=n=>{let e=_t();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new j(204,!1)};function lt(n){return new $f}function LR(n,e){return BR(n,e)}function sB(n){return BR(UR,n)}var ce=(LR.required=sB,LR);var Va=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},$R=new Va("20.1.2");var uE=new U(""),aB=new U("");function Ju(n){return!n.moduleRef}function cB(n){let e=Ju(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ie);return t.run(()=>{Ju(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Lt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Ju(n)){let o=()=>e.destroy(),s=n.platformInjector.get(uE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(uE);s.add(o),n.moduleRef.onDestroy(()=>{Fu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return lB(r,t,()=>{let o=e.get(gr),s=o.add(),a=e.get(J_);return a.runInitializers(),a.donePromise.then(()=>{try{let u=e.get(Bf,Ku);if(DR(u||Ku),!e.get(aB,!0))return Ju(n)?e.get(ii):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ju(n)){let h=e.get(ii);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return uB?.(n.moduleRef,n.allPlatformModules),n.moduleRef}finally{o.remove(s)}})})})}var uB;function lB(n,e,t){try{let r=t();return ri(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Hf=null;function dB(n=[],e){return je.create({name:e,providers:[{provide:bu,useValue:"platform"},{provide:uE,useValue:new Set([()=>Hf=null])},...n]})}function hB(n=[]){if(Hf)return Hf;let e=dB(n);return Hf=e,_R(),fB(e),e}function fB(n){let e=n.get(bf,null);yt(n,()=>{e?.forEach(t=>t())})}function pE(){return!1}var Xi=(()=>{class n{static __NG_ELEMENT_ID__=pB}return n})();function pB(n){return gB(_t(),ee(),(n&16)===16)}function gB(n,e,t){if(qi(n)&&!t){let r=Pn(n.index,e);return new Qi(r,r)}else if(n.type&175){let r=e[Xt];return new Qi(r,e)}return null}var lE=class{constructor(){}supports(e){return $_(e)}create(e){return new dE(e)}},mB=(n,e)=>e,dE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||mB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<VR(r,i,o)?t:r,a=VR(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,_=y+g;h<=_&&_<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!$_(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,qA(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new hE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new zf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new zf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},hE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},fE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},zf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new fE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function VR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function jR(){return new gE([new lE])}var gE=(()=>{class n{factories;static \u0275prov=L({token:n,providedIn:"root",factory:jR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||jR()),deps:[[n,new DS,new Et]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new j(901,!1)}}return n})();function HR(n){be(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=hB(r),o=[kR({}),{provide:An,useExisting:aE},jC,...t||[]],s=new Uu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return cB({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{be(9)}}function ja(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var Er=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=de({type:n,selectors:[["button","pd-button",""]],hostAttrs:[1,"h-10","min-w-10","flex","items-center","justify-center","active:scale-95","transition-all","duration-150"]})};var Gf=class n{clicked=lt();onClick(e){this.clicked.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=de({type:n,selectors:[["button","pd-action-button",""]],hostAttrs:[1,"shadow-md/80","rounded-full","shadow-black/60","text-action-contrast","bg-action"],hostBindings:function(t,r){t&1&&ae("click",function(o){return r.onClick(o)})},outputs:{clicked:"clicked"},features:[It([Er])]})};var Ua=class n{showNotification=Ae(!1);notificationMessage=Ae({type:"success",message:""});lastTimeoutId=void 0;abort=void 0;success(e){this.notificationMessage.set({type:"success",message:e??""}),this.setNotification(!0)}warn(e){this.notificationMessage.set({type:"warn",message:e??""}),this.setNotification(!0)}notFound(e){this.notificationMessage.set({type:"404",message:e??""}),this.setNotification(!0)}setNotification(e){if(this.showNotification.set(e),this.abort?.abort(),this.showNotification()){this.abort=new AbortController;let t=this.abort.signal;window.addEventListener("keydown",this.onKeyDown.bind(this),{once:!0,signal:t,capture:!0}),window.addEventListener("click",this.onClick.bind(this),{once:!0,signal:t,capture:!0}),this.setHideTimeout()}else this.clearHideTimeout()}setHideTimeout(){this.clearHideTimeout(),this.lastTimeoutId=window.setTimeout(()=>{this.setNotification(!1)},3e3)}clearHideTimeout(){this.lastTimeoutId&&(clearTimeout(this.lastTimeoutId),this.lastTimeoutId=void 0)}onKeyDown(e){e.key==="Escape"&&this.setNotification(!1)}onClick(e){this.setNotification(!1)}ngOnDestroy(){this.abort?.abort()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wf=class n{notificationService=C(Ua);copy(e,t){navigator.clipboard?(navigator.clipboard.writeText(e),this.notificationService.success(t??"Copiado!")):this.notificationService.warn(t??"No se puede copiar!")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kf=class n{baseId="prompt-dict";save(e,t){localStorage.setItem(this.fullIdentifier(e),JSON.stringify(t))}get(e){let t=localStorage.getItem(this.fullIdentifier(e));if(t)try{return JSON.parse(t)}catch(r){return console.error(`Error parsing value for ${e}:`,r),null}return null}delete(e){localStorage.removeItem(this.fullIdentifier(e))}fullIdentifier(e){return`${this.baseId}-${e}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qf=class n{store=C(Kf);darkMode=Ae(this.store.get("darkMode")??this.darkModeSystem());setDarkMode(e){this.darkMode.set(e)}toggle(){this.darkMode.set(!this.darkMode())}constructor(){La(()=>this.apply(this.darkMode()))}apply(e){this.store.save("darkMode",e),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");let t=document.querySelector("meta[name='color-scheme']");if(t)t.setAttribute("content",e?"dark light":"light");else{let r=document.createElement("meta");r.setAttribute("name","color-scheme"),r.setAttribute("content",e?"dark light":"light"),document.head.appendChild(r)}}darkModeSystem(){return window.matchMedia("(prefers-color-scheme: dark)").matches}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var qR=()=>{};var WR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},yB=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Yf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(WR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new vE;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let _=l<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},vE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},vB=function(n){let e=WR(n);return Yf.encodeByteArray(e,!0)},el=function(n){return vB(n).replace(/\./g,"")},Zf=function(n){try{return Yf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function EE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var _B=()=>EE().__FIREBASE_DEFAULTS__,EB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},IB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Zf(n[1]);return e&&JSON.parse(e)},Jf=()=>{try{return qR()||_B()||EB()||IB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IE=n=>{var e,t;return(t=(e=Jf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Xf=n=>{let e=IE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wE=()=>{var n;return(n=Jf())===null||n===void 0?void 0:n.config},DE=n=>{var e;return(e=Jf())===null||e===void 0?void 0:e[`_${n}`]};var as=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ir(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ba(n){return(await fetch(n,{credentials:"include"})).ok}function KR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[el(JSON.stringify(t)),el(JSON.stringify(s)),""].join(".")}var Xu={};function wB(){let n={prod:[],emulator:[]};for(let e of Object.keys(Xu))Xu[e]?n.emulator.push(e):n.prod.push(e);return n}function DB(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var zR=!1;function $a(n,e){if(typeof window>"u"||typeof document>"u"||!Ir(window.location.host)||Xu[n]===e||Xu[n]||zR)return;Xu[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=wB().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{zR=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=DB(r),y=t("text"),_=document.getElementById(y)||document.createElement("span"),A=t("learnmore"),R=document.getElementById(A)||document.createElement("a"),x=t("preprendIcon"),q=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let Z=g.element;a(Z),h(R,A);let Ce=l();u(q,x),Z.append(q,_,R,Ce),document.body.appendChild(Z)}o?(_.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function bB(){var n;let e=(n=Jf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function JR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XR(){let n=Dt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function eN(){return!bB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tl(){try{return typeof indexedDB=="object"}catch{return!1}}function tN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var TB="FirebaseError",on=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=TB,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xn.prototype.create)}},Xn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?CB(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new on(i,a,r)}};function CB(n,e){return n.replace(SB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var SB=/\{\$([^}]+)}/g;function nN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function wr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(GR(o)&&GR(s)){if(!wr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function GR(n){return n!==null&&typeof n=="object"}function Ha(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rN(n,e){let t=new _E(n,e);return t.subscribe.bind(t)}var _E=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");AB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=yE),i.error===void 0&&(i.error=yE),i.complete===void 0&&(i.complete=yE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function AB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function yE(){}var _oe=4*60*60*1e3;function Ue(n){return n&&n._delegate?n._delegate:n}var Pt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var cs="[DEFAULT]";var bE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new as;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NB(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function RB(n){return n===cs?void 0:n}function NB(n){return n.instantiationMode==="EAGER"}var ep=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new bE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var MB=[],_e=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(_e||{}),PB={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},xB=_e.INFO,kB={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},OB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=kB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Dr=class{constructor(e){this.name=e,this._logLevel=xB,this._logHandler=OB,this._userLogHandler=null,MB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}};var FB=(n,e)=>e.some(t=>n instanceof t),iN,oN;function LB(){return iN||(iN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VB(){return oN||(oN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var sN=new WeakMap,CE=new WeakMap,aN=new WeakMap,TE=new WeakMap,AE=new WeakMap;function jB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(br(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&sN.set(t,n)}).catch(()=>{}),AE.set(e,n),e}function UB(n){if(CE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});CE.set(n,e)}var SE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return CE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||aN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return br(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cN(n){SE=n(SE)}function BB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(tp(this),e,...t);return aN.set(r,e.sort?e.sort():[e]),br(r)}:VB().includes(n)?function(...e){return n.apply(tp(this),e),br(sN.get(this))}:function(...e){return br(n.apply(tp(this),e))}}function $B(n){return typeof n=="function"?BB(n):(n instanceof IDBTransaction&&UB(n),FB(n,LB())?new Proxy(n,SE):n)}function br(n){if(n instanceof IDBRequest)return jB(n);if(TE.has(n))return TE.get(n);let e=$B(n);return e!==n&&(TE.set(n,e),AE.set(e,n)),e}var tp=n=>AE.get(n);function lN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=br(s);return r&&s.addEventListener("upgradeneeded",u=>{r(br(s.result),u.oldVersion,u.newVersion,br(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var HB=["get","getKey","getAll","getAllKeys","count"],qB=["put","add","delete","clear"],RE=new Map;function uN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(RE.get(e))return RE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=qB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||HB.includes(t)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&u.done]))[0]};return RE.set(e,o),o}cN(n=>J(k({},n),{get:(e,t,r)=>uN(e,t)||n.get(e,t,r),has:(e,t)=>!!uN(e,t)||n.has(e,t)}));var ME=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function zB(n){let e=n.getComponent();return e?.type==="VERSION"}var PE="@firebase/app",dN="0.13.2";var ci=new Dr("@firebase/app"),GB="@firebase/app-compat",WB="@firebase/analytics-compat",KB="@firebase/analytics",QB="@firebase/app-check-compat",YB="@firebase/app-check",ZB="@firebase/auth",JB="@firebase/auth-compat",XB="@firebase/database",e$="@firebase/data-connect",t$="@firebase/database-compat",n$="@firebase/functions",r$="@firebase/functions-compat",i$="@firebase/installations",o$="@firebase/installations-compat",s$="@firebase/messaging",a$="@firebase/messaging-compat",c$="@firebase/performance",u$="@firebase/performance-compat",l$="@firebase/remote-config",d$="@firebase/remote-config-compat",h$="@firebase/storage",f$="@firebase/storage-compat",p$="@firebase/firestore",g$="@firebase/ai",m$="@firebase/firestore-compat",y$="firebase",v$="11.10.0";var xE="[DEFAULT]",_$={[PE]:"fire-core",[GB]:"fire-core-compat",[KB]:"fire-analytics",[WB]:"fire-analytics-compat",[YB]:"fire-app-check",[QB]:"fire-app-check-compat",[ZB]:"fire-auth",[JB]:"fire-auth-compat",[XB]:"fire-rtdb",[e$]:"fire-data-connect",[t$]:"fire-rtdb-compat",[n$]:"fire-fn",[r$]:"fire-fn-compat",[i$]:"fire-iid",[o$]:"fire-iid-compat",[s$]:"fire-fcm",[a$]:"fire-fcm-compat",[c$]:"fire-perf",[u$]:"fire-perf-compat",[l$]:"fire-rc",[d$]:"fire-rc-compat",[h$]:"fire-gcs",[f$]:"fire-gcs-compat",[p$]:"fire-fst",[m$]:"fire-fst-compat",[g$]:"fire-vertex","fire-js":"fire-js",[y$]:"fire-js-all"};var nl=new Map,E$=new Map,kE=new Map;function hN(n,e){try{n.container.addComponent(e)}catch(t){ci.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Dn(n){let e=n.name;if(kE.has(e))return ci.debug(`There were multiple attempts to register component ${e}.`),!1;kE.set(e,n);for(let t of nl.values())hN(t,n);for(let t of E$.values())hN(t,n);return!0}function to(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function sn(n){return n==null?!1:n.settings!==void 0}var I$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},eo=new Xn("app","Firebase",I$);var OE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eo.create("app-deleted",{appName:this._name})}};var no=v$;function VE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:xE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw eo.create("bad-app-name",{appName:String(i)});if(t||(t=wE()),!t)throw eo.create("no-options");let o=nl.get(i);if(o){if(wr(t,o.options)&&wr(r,o.config))return o;throw eo.create("duplicate-app",{appName:i})}let s=new ep(i);for(let u of kE.values())s.addComponent(u);let a=new OE(t,r,s);return nl.set(i,a),a}function ui(n=xE){let e=nl.get(n);if(!e&&n===xE&&wE())return VE();if(!e)throw eo.create("no-app",{appName:n});return e}function np(){return Array.from(nl.values())}function Oe(n,e,t){var r;let i=(r=_$[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ci.warn(a.join(" "));return}Dn(new Pt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var w$="firebase-heartbeat-database",D$=1,rl="firebase-heartbeat-store",NE=null;function mN(){return NE||(NE=lN(w$,D$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(rl)}catch(t){console.warn(t)}}}}).catch(n=>{throw eo.create("idb-open",{originalErrorMessage:n.message})})),NE}async function b$(n){try{let t=(await mN()).transaction(rl),r=await t.objectStore(rl).get(yN(n));return await t.done,r}catch(e){if(e instanceof on)ci.warn(e.message);else{let t=eo.create("idb-get",{originalErrorMessage:e?.message});ci.warn(t.message)}}}async function fN(n,e){try{let r=(await mN()).transaction(rl,"readwrite");await r.objectStore(rl).put(e,yN(n)),await r.done}catch(t){if(t instanceof on)ci.warn(t.message);else{let r=eo.create("idb-set",{originalErrorMessage:t?.message});ci.warn(r.message)}}}function yN(n){return`${n.name}!${n.options.appId}`}var T$=1024,C$=30,FE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new LE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=pN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>C$){let s=A$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ci.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=pN(),{heartbeatsToSend:r,unsentEntries:i}=S$(this._heartbeatsCache.heartbeats),o=el(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ci.warn(t),""}}};function pN(){return new Date().toISOString().substring(0,10)}function S$(n,e=T$){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),gN(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),gN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var LE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tl()?tN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await b$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return fN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return fN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function gN(n){return el(JSON.stringify({version:2,heartbeats:n})).length}function A$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function R$(n){Dn(new Pt("platform-logger",e=>new ME(e),"PRIVATE")),Dn(new Pt("heartbeat",e=>new FE(e),"PRIVATE")),Oe(PE,dN,n),Oe(PE,dN,"esm2017"),Oe("fire-js","")}R$("");var N$="firebase",M$="11.10.0";Oe(N$,M$,"app");function Koe(n,e){let r=!e?.manualCleanup?e?.injector?.get(Mt)??C(Mt):null,i=P$(e?.equal),o;e?.requireSync?o=Ae({kind:0},{equal:i}):o=Ae({kind:1,value:e?.initialValue},{equal:i});let s,a=n.subscribe({next:u=>o.set({kind:1,value:u}),error:u=>{o.set({kind:2,error:u}),s?.()},complete:()=>{s?.()}});if(e?.requireSync&&o().kind===0)throw new j(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),fn(()=>{let u=o();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new j(601,!1)}},{equal:e?.equal})}function P$(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function vN(n){n===void 0&&(n=C(je));let e=n.get(Wi);return t=>new te(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Tr=new Va("ANGULARFIRE2_VERSION");function ls(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ro=(n,e)=>{let t=e?[e]:np(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},qa=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(qa||{}),_N=pE()&&typeof Zone<"u"?qa.WARN:qa.SILENT;var rp=class{zone;delegate;constructor(e,t=Iy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Cr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=C(Ie);this.outsideAngular=t.runOutsideAngular(()=>new rp(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new rp(typeof Zone>"u"?void 0:Zone.current,ki))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),EN=!1;function x$(n,e){!EN&&(_N>qa.SILENT||pE())&&(EN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),_N>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function k$(n){let e=C(Ie,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function us(n){let e=C(Ie,{optional:!0});return e?e.run(()=>n()):n()}var O$=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),yt(t,()=>us(()=>n.apply(void 0,r)))),We=(n,e,t)=>(t||=e?qa.WARN:qa.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=C(Cr),s=C(Wi),a=C(rt)}catch{return x$(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=us(()=>s.add())),i[l]=O$(i[l],r,a));let u=k$(()=>n.apply(this,i));return e?u instanceof te?u.pipe(Li(o.outsideAngular),Fi(o.insideAngular),vN(a)):u instanceof Promise?us(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>yt(a,()=>us(()=>h(g))),g=>yt(a,()=>us(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:us(()=>u):u instanceof te?u.pipe(Li(o.outsideAngular),Fi(o.insideAngular)):us(()=>u)});var er=class{constructor(e){return e}},li=class{constructor(){return np()}};function F$(n){return n&&n.length===1?n[0]:new er(ui())}var jE=new U("angularfire2._apps"),L$={provide:er,useFactory:F$,deps:[[new Et,jE]]},V$={provide:li,deps:[[new Et,jE]]};function j$(n){return(e,t)=>{let r=t.get(Yi);Oe("angularfire",Tr.full,"core"),Oe("angularfire",Tr.full,"app"),Oe("angular",$R.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new er(i)}}function fse(n,...e){return Zt([L$,V$,{provide:jE,useFactory:j$(n),multi:!0,deps:[Ie,je,Cr,...e]}])}var pse=We(VE,!0);var DN=null;function kn(){return DN}function UE(n){DN??=n}var il=class{},BE=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>C(bN),providedIn:"platform"})}return n})();var bN=(()=>{class n extends BE{_location;_history;_doc=C(wt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kn().getBaseHref(this._doc)}onPopState(t){let r=kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function TN(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function IN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function io(n){return n&&n[0]!=="?"?`?${n}`:n}var za=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>C(CN),providedIn:"root"})}return n})(),ip=new U(""),CN=(()=>{class n extends za{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??C(wt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return TN(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+io(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+io(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+io(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(se(BE),se(ip,8))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ga=(()=>{class n{_subject=new nt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=$$(IN(wN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+io(r))}normalize(t){return n.stripTrailingSlash(B$(this._basePath,wN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+io(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+io(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=io;static joinWithSlash=TN;static stripTrailingSlash=IN;static \u0275fac=function(r){return new(r||n)(se(za))};static \u0275prov=L({token:n,factory:()=>U$(),providedIn:"root"})}return n})();function U$(){return new Ga(se(za))}function B$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function wN(n){return n.replace(/\/index.html$/,"")}function $$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var op=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},AN=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new op(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),SN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);SN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(W(Zi),W(Jo),W(gE))};static \u0275dir=de({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function SN(n,e){n.context.$implicit=e.item}function RN(n,e){return new j(2100,!1)}var $E=class{createSubscription(e,t,r){return rn(()=>e.subscribe({next:t,error:r}))}dispose(e){rn(()=>e.unsubscribe())}},HE=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},H$=new HE,q$=new $E,ds=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=C(Lt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(ri(t))return H$;if(Vf(t))return q$;throw RN(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(W(Xi,16))};static \u0275pipe=Ma({name:"async",type:n,pure:!1})}return n})();var z$=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,G$=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw RN(n,t);return t.replace(z$,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Ma({name:"titlecase",type:n,pure:!0})}return n})();var NN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ni({type:n});static \u0275inj=ur({})}return n})();function qE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ol=class{};var MN="browser";var K$=new Map,Q$={activated:!1,tokenObservers:[]},Y$={initialized:!1,enabled:!1};function tr(n){return K$.get(n)||Object.assign({},Q$)}function ON(){return Y$}var Z$="https://content-firebaseappcheck.googleapis.com/v1";var J$="exchangeDebugToken",PN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},ece=24*60*60*1e3;var WE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new as,this.pending.promise.catch(t=>{}),await X$(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new as,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function X$(n){return new Promise(e=>{setTimeout(e,n)})}var eH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},oo=new Xn("appCheck","AppCheck",eH);function FN(n){if(!tr(n).activated)throw oo.create("use-before-activation",{appName:n.name})}async function LN({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(n,o)}catch(p){throw oo.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw oo.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw oo.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw oo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function VN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Z$}/projects/${t}/apps/${r}:${J$}?key=${i}`,body:{debug_token:e}}}var tH="firebase-app-check-database",nH=1,KE="firebase-app-check-store";var sp=null;function rH(){return sp||(sp=new Promise((n,e)=>{try{let t=indexedDB.open(tH,nH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(oo.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(KE,{keyPath:"compositeKey"})}}}catch(t){e(oo.create("storage-open",{originalErrorMessage:t?.message}))}}),sp)}function iH(n,e){return oH(sH(n),e)}async function oH(n,e){let r=(await rH()).transaction(KE,"readwrite"),o=r.objectStore(KE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(oo.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function sH(n){return`${n.options.appId}-${n.name}`}var sl=new Dr("@firebase/app-check");function zE(n,e){return tl()?iH(n,e).catch(t=>{sl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function jN(){return ON().enabled}async function UN(){let n=ON();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var aH={error:"UNKNOWN_ERROR"};function cH(n){return Yf.encodeString(JSON.stringify(n),!1)}async function QE(n,e=!1,t=!1){let r=n.app;FN(r);let i=tr(r),o=i.token,s;if(o&&!al(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(al(l)?o=l:await zE(r,void 0))}if(!e&&o&&al(o))return{token:o.token};let a=!1;if(jN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=LN(VN(r,await UN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await zE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?sl.warn(l.message):t&&sl.error(l),GE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await tr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?sl.warn(l.message):t&&sl.error(l),s=l}let u;return o?s?al(o)?u={token:o.token,internalError:s}:u=GE(s):(u={token:o.token},i.token=o,await zE(r,o)):u=GE(s),a&&hH(r,u),u}async function uH(n){let e=n.app;FN(e);let{provider:t}=tr(e);if(jN()){let r=await UN(),{token:i}=await LN(VN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function lH(n,e,t,r){let{app:i}=n,o=tr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&al(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),xN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>xN(n))}function BN(n,e){let t=tr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function xN(n){let{app:e}=n,t=tr(e),r=t.tokenRefresher;r||(r=dH(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function dH(n){let{app:e}=n;return new WE(async()=>{let t=tr(e),r;if(t.token?r=await QE(n,!0):r=await QE(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},PN.RETRIAL_MIN_WAIT,PN.RETRIAL_MAX_WAIT)}function hH(n,e){let t=tr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function al(n){return n.expireTimeMillis-Date.now()>0}function GE(n){return{token:cH(aH),error:n}}var YE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=tr(this.app);for(let t of e)BN(this.app,t.next);return Promise.resolve()}};function fH(n,e){return new YE(n,e)}function pH(n){return{getToken:e=>QE(n,e),getLimitedUseToken:()=>uH(n),addTokenListener:e=>lH(n,"INTERNAL",e),removeTokenListener:e=>BN(n.app,e)}}var gH="@firebase/app-check",mH="0.10.1";var yH="app-check",kN="app-check-internal";function vH(){Dn(new Pt(yH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return fH(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kN).initialize()})),Dn(new Pt(kN,n=>{let e=n.getProvider("app-check").getImmediate();return pH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Oe(gH,mH)}vH();var _H="app-check";var so=class{constructor(){return ro(_H)}};var EH=["localhost","0.0.0.0","127.0.0.1"],hce=typeof window<"u"&&EH.includes(window.location.hostname);function nM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var rM=nM,iM=new Xn("auth","Firebase",nM());var hp=new Dr("@firebase/auth");function IH(n,...e){hp.logLevel<=_e.WARN&&hp.warn(`Auth (${no}): ${n}`,...e)}function cp(n,...e){hp.logLevel<=_e.ERROR&&hp.error(`Auth (${no}): ${n}`,...e)}function Ar(n,...e){throw pI(n,...e)}function nr(n,...e){return pI(n,...e)}function fI(n,e,t){let r=Object.assign(Object.assign({},rM()),{[e]:t});return new Xn("auth","Firebase",r).create(e,{appName:n.name})}function hs(n){return fI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wH(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ar(n,"argument-error"),fI(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return iM.create(n,...e)}function oe(n,e,...t){if(!n)throw pI(e,...t)}function di(n){let e="INTERNAL ASSERTION FAILED: "+n;throw cp(e),new Error(e)}function fi(n,e){n||di(e)}function XE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function DH(){return $N()==="http:"||$N()==="https:"}function $N(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function bH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DH()||ZR()||"connection"in navigator)?navigator.onLine:!0}function TH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var fs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,fi(t>e,"Short delay should be less than long delay!"),this.isMobile=QR()||JR()}get(){return bH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function gI(n,e){fi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var fp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var CH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var SH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AH=new fs(3e4,6e4);function mI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ka(n,e,t,r,i={}){return oM(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Ha(Object.assign({key:n.config.apiKey},s)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:u},o);return YR()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Ir(n.emulatorConfig.host)&&(l.credentials="include"),fp.fetch()(await sM(n,n.config.apiHost,t,a),l)})}async function oM(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},CH),e);try{let i=new eI(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw ap(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ap(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw ap(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw ap(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw fI(n,h,l);Ar(n,h)}}catch(i){if(i instanceof on)throw i;Ar(n,"network-request-failed",{message:String(i)})}}async function RH(n,e,t,r,i={}){let o=await Ka(n,e,t,r,i);return"mfaPendingCredential"in o&&Ar(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function sM(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?gI(n.config,i):`${n.config.apiScheme}://${i}`;return SH.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var eI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),AH.get())})}};function ap(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=nr(n,e,r);return i.customData._tokenResponse=t,i}async function NH(n,e){return Ka(n,"POST","/v1/accounts:delete",e)}async function pp(n,e){return Ka(n,"POST","/v1/accounts:lookup",e)}function cl(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yI(n,e=!1){let t=Ue(n),r=await t.getIdToken(e),i=vI(r);oe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:cl(ZE(i.auth_time)),issuedAtTime:cl(ZE(i.iat)),expirationTime:cl(ZE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function ZE(n){return Number(n)*1e3}function vI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return cp("JWT malformed, contained fewer than 3 sections"),null;try{let i=Zf(t);return i?JSON.parse(i):(cp("Failed to decode base64 JWT payload"),null)}catch(i){return cp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function HN(n){let e=vI(n);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ll(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof on&&MH(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function MH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var tI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var dl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cl(this.lastLoginAt),this.creationTime=cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function gp(n){var e;let t=n.auth,r=await n.getIdToken(),i=await ll(n,pp(t,{idToken:r}));oe(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?aM(o.providerUserInfo):[],a=PH(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new dl(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function _I(n){let e=Ue(n);await gp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aM(n){return n.map(e=>{var{providerId:t}=e,r=ih(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function xH(n,e){let t=await oM(n,{},async()=>{let r=Ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await sM(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&Ir(n.emulatorConfig.host)&&(u.credentials="include"),fp.fetch()(s,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kH(n,e){return Ka(n,"POST","/v2/accounts:revokeToken",mI(n,e))}var ul=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){oe(e.length!==0,"internal-error");let t=HN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await xH(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(oe(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(oe(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return di("not implemented")}};function ao(n,e){oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var co=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=ih(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new dl(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let t=await ll(this,this.stsTokenManager.getToken(this.auth,e));return oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yI(this,e)}reload(){return _I(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await gp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(hs(this.auth));let e=await this.getIdToken();return await ll(this,NH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,_=(s=t.photoURL)!==null&&s!==void 0?s:void 0,A=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=t.createdAt)!==null&&l!==void 0?l:void 0,q=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Z,emailVerified:Ce,isAnonymous:tt,providerData:Me,stsTokenManager:D}=t;oe(Z&&D,e,"internal-error");let v=ul.fromJSON(this.name,D);oe(typeof Z=="string",e,"internal-error"),ao(p,e.name),ao(g,e.name),oe(typeof Ce=="boolean",e,"internal-error"),oe(typeof tt=="boolean",e,"internal-error"),ao(y,e.name),ao(_,e.name),ao(A,e.name),ao(R,e.name),ao(x,e.name),ao(q,e.name);let I=new n({uid:Z,auth:e,email:g,emailVerified:Ce,displayName:p,isAnonymous:tt,photoURL:_,phoneNumber:y,tenantId:A,stsTokenManager:v,createdAt:x,lastLoginAt:q});return Me&&Array.isArray(Me)&&(I.providerData=Me.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new ul;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await gp(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];oe(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?aM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new ul;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new dl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var qN=new Map;function hi(n){fi(n instanceof Function,"Expected a class definition");let e=qN.get(n);return e?(fi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qN.set(n,e),e)}var OH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),nI=OH;function up(n,e,t){return`firebase:${n}:${e}:${t}`}var mp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=up(this.userKey,i.apiKey,o),this.fullPersistenceKey=up("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await pp(this.auth,{idToken:e}).catch(()=>{});return t?co._fromGetAccountInfoResponse(this.auth,t,e):null}return co._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(hi(nI),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||hi(nI),s=up(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await pp(e,{idToken:h}).catch(()=>{});if(!g)break;p=await co._fromGetAccountInfoResponse(e,g,h)}else p=co._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new n(o,e,r))}};function zN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fM(e))return"Blackberry";if(pM(e))return"Webos";if(uM(e))return"Safari";if((e.includes("chrome/")||lM(e))&&!e.includes("edge/"))return"Chrome";if(hM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function cM(n=Dt()){return/firefox\//i.test(n)}function uM(n=Dt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lM(n=Dt()){return/crios\//i.test(n)}function dM(n=Dt()){return/iemobile/i.test(n)}function hM(n=Dt()){return/android/i.test(n)}function fM(n=Dt()){return/blackberry/i.test(n)}function pM(n=Dt()){return/webos/i.test(n)}function EI(n=Dt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function FH(n=Dt()){var e;return EI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function LH(){return XR()&&document.documentMode===10}function gM(n=Dt()){return EI(n)||hM(n)||pM(n)||fM(n)||/windows phone/i.test(n)||dM(n)}function mM(n,e=[]){let t;switch(n){case"Browser":t=zN(Dt());break;case"Worker":t=`${zN(Dt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${no}/${r}`}var rI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function VH(n,e={}){return Ka(n,"GET","/v2/passwordPolicy",mI(n,e))}var jH=6,iI=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:jH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var oI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yp(this),this.idTokenSubscription=new yp(this),this.beforeStateQueue=new rI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=hi(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await mp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await pp(this,{idToken:e}),r=await co._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(sn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await gp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(hs(this));let t=e?Ue(e):null;return t&&oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(hs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(hs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await VH(this),t=new iI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kH(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&hi(e)||this._popupRedirectResolver;oe(t,this,"argument-error"),this.redirectPersistenceManager=await mp.create(this,[hi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&IH(`Error while retrieving App Check token: ${t.error}`),t?.token}};function Tp(n){return Ue(n)}var yp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=rN(t=>this.observer=t)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var II={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UH(n){II=n}function BH(n){return II.loadJS(n)}function $H(){return II.gapiScript}function yM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function wI(n,e){let t=to(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(wr(o,e??{}))return i;Ar(i,"already-initialized")}return t.initialize({options:e})}function HH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(hi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function DI(n,e,t){let r=Tp(n);oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=vM(e),{host:s,port:a}=qH(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),oe(wr(l,r.config.emulator)&&wr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ir(s)?(Ba(`${o}//${s}${u}`),$a("Auth",!0)):i||zH()}function vM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function qH(n){let e=vM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:GN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:GN(s)}}}function GN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function zH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var hl=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return di("not implemented")}_getIdTokenResponse(e){return di("not implemented")}_linkToIdToken(e,t){return di("not implemented")}_getReauthenticationResolver(e){return di("not implemented")}};async function Wa(n,e){return RH(n,"POST","/v1/accounts:signInWithIdp",mI(n,e))}var GH="http://localhost",vp=class n extends hl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ar("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=ih(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Wa(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Wa(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Wa(e,t)}buildRequest(){let e={requestUri:GH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ha(t)}return e}};var fl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var _p=class extends fl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var bI=(()=>{class n extends _p{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return vp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var pl=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await co._fromIdTokenResponse(e,r,i),s=WN(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=WN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function WN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var sI=class n extends on{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function _M(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sI._fromErrorAndOperation(n,o,e,r):o})}async function WH(n,e,t=!1){let r=await ll(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return pl._forOperation(n,"link",r)}async function KH(n,e,t=!1){let{auth:r}=n;if(sn(r.app))return Promise.reject(hs(r));let i="reauthenticate";try{let o=await ll(n,_M(r,i,e,n),t);oe(o.idToken,r,"internal-error");let s=vI(o.idToken);oe(s,r,"internal-error");let{sub:a}=s;return oe(n.uid===a,r,"user-mismatch"),pl._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ar(r,"user-mismatch"),o}}async function QH(n,e,t=!1){if(sn(n.app))return Promise.reject(hs(n));let r="signIn",i=await _M(n,r,e),o=await pl._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function TI(n,e,t,r){return Ue(n).onIdTokenChanged(e,t,r)}function CI(n,e,t){return Ue(n).beforeAuthStateChanged(e,t)}function SI(n){return Ue(n).signOut()}var Ep="__sak";var Ip=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ep,"1"),this.storage.removeItem(Ep),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var YH=1e3,ZH=10,JH=(()=>{class n extends Ip{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);LH()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,ZH):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},YH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),EM=JH;var XH=(()=>{class n extends Ip{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),AI=XH;function e4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var t4=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await e4(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function RI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var aI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=RI("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Sr(){return window}function n4(n){Sr().location.href=n}function IM(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function r4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function i4(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function o4(){return IM()?self:null}var wM="firebaseLocalStorageDb",s4=1,wp="firebaseLocalStorage",DM="fbase_key",ps=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Cp(n,e){return n.transaction([wp],e?"readwrite":"readonly").objectStore(wp)}function a4(){let n=indexedDB.deleteDatabase(wM);return new ps(n).toPromise()}function cI(){let n=indexedDB.open(wM,s4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(wp,{keyPath:DM})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(wp)?e(r):(r.close(),await a4(),e(await cI()))})})}async function KN(n,e,t){let r=Cp(n,!0).put({[DM]:e,value:t});return new ps(r).toPromise()}async function c4(n,e){let t=Cp(n,!1).get(e),r=await new ps(t).toPromise();return r===void 0?null:r.value}function QN(n,e){let t=Cp(n,!0).delete(e);return new ps(t).toPromise()}var u4=800,l4=3,d4=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cI(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>l4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=t4._getInstance(o4()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await r4(),!this.activeServiceWorker)return;this.sender=new aI(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||i4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await cI();return await KN(t,Ep,"1"),await QN(t,Ep),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>KN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>c4(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>QN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=Cp(o,!1).getAll();return new ps(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),u4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),bM=d4;var wce=yM("rcb"),Dce=new fs(3e4,6e4);function TM(n,e){return e?hi(e):(oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var gl=class extends hl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wa(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function h4(n){return QH(n.auth,new gl(n),n.bypassAuthState)}function f4(n){let{auth:e,user:t}=n;return oe(t,e,"internal-error"),KH(t,new gl(n),n.bypassAuthState)}async function p4(n){let{auth:e,user:t}=n;return oe(t,e,"internal-error"),WH(t,new gl(n),n.bypassAuthState)}var Dp=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return h4;case"linkViaPopup":case"linkViaRedirect":return p4;case"reauthViaPopup":case"reauthViaRedirect":return f4;default:Ar(this.auth,"internal-error")}}resolve(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var g4=new fs(2e3,1e4);async function NI(n,e,t){if(sn(n.app))return Promise.reject(nr(n,"operation-not-supported-in-this-environment"));let r=Tp(n);wH(n,e,fl);let i=TM(r,t);return new m4(r,"signInViaPopup",e,i).executeNotNull()}var m4=(()=>{class n extends Dp{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return oe(t,this.auth,"internal-error"),t}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");let t=RI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,g4.get())};t()}}n.currentPopupAction=null;return n})(),y4="pendingRedirect",lp=new Map,uI=class extends Dp{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=lp.get(this.auth._key());if(!e){try{let r=await v4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}lp.set(this.auth._key(),e)}return this.bypassAuthState||lp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function v4(n,e){let t=I4(e),r=E4(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function _4(n,e){lp.set(n._key(),e)}function E4(n){return hi(n._redirectPersistence)}function I4(n){return up(y4,n.config.apiKey,n.name)}async function w4(n,e,t=!1){if(sn(n.app))return Promise.reject(hs(n));let r=Tp(n),i=TM(r,e),s=await new uI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var D4=10*60*1e3,lI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!CM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(nr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=D4&&this.cachedEventUids.clear(),this.cachedEventUids.has(YN(e))}saveEventToCache(e){this.cachedEventUids.add(YN(e)),this.lastProcessedEventTime=Date.now()}};function YN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function CM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function b4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CM(n);default:return!1}}async function T4(n,e={}){return Ka(n,"GET","/v1/projects",e)}var C4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S4=/^https?/;async function A4(n){if(n.config.emulator)return;let{authorizedDomains:e}=await T4(n);for(let t of e)try{if(R4(t))return}catch{}Ar(n,"unauthorized-domain")}function R4(n){let e=XE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!S4.test(t))return!1;if(C4.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var N4=new fs(3e4,6e4);function ZN(){let n=Sr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function M4(n){return new Promise((e,t)=>{var r,i,o;function s(){ZN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZN(),t(nr(n,"network-request-failed"))},timeout:N4.get()})}if(!((i=(r=Sr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Sr().gapi)===null||o===void 0)&&o.load)s();else{let a=yM("iframefcb");return Sr()[a]=()=>{gapi.load?s():t(nr(n,"network-request-failed"))},BH(`${$H()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw dp=null,e})}var dp=null;function P4(n){return dp=dp||M4(n),dp}var x4=new fs(5e3,15e3),k4="__/auth/iframe",O4="emulator/auth/iframe",F4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V4(n){let e=n.config;oe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?gI(e,O4):`https://${n.config.authDomain}/${k4}`,r={apiKey:e.apiKey,appName:n.name,v:no},i=L4.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Ha(r).slice(1)}`}async function j4(n){let e=await P4(n),t=Sr().gapi;return oe(t,n,"internal-error"),e.open({where:document.body,url:V4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F4,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=nr(n,"network-request-failed"),a=Sr().setTimeout(()=>{o(s)},x4.get());function u(){Sr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var U4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B4=500,$4=600,H4="_blank",q4="http://localhost",bp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function z4(n,e,t,r=B4,i=$4){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},U4),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Dt().toLowerCase();t&&(a=lM(l)?H4:t),cM(l)&&(e=e||q4,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,_])=>`${g}${y}=${_},`,"");if(FH(l)&&a!=="_self")return G4(e||"",a),new bp(null);let p=window.open(e||"",a,h);oe(p,n,"popup-blocked");try{p.focus()}catch{}return new bp(p)}function G4(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var W4="__/auth/handler",K4="emulator/auth/handler",Q4=encodeURIComponent("fac");async function JN(n,e,t,r,i,o){oe(n.config.authDomain,n,"auth-domain-config-required"),oe(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:no,eventId:i};if(e instanceof fl){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",nN(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof _p){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await n._getAppCheckToken(),l=u?`#${Q4}=${encodeURIComponent(u)}`:"";return`${Y4(n)}?${Ha(a).slice(1)}${l}`}function Y4({config:n}){return n.emulator?gI(n,K4):`https://${n.authDomain}/${W4}`}var JE="webStorageSupport",dI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AI,this._completeRedirectFn=w4,this._overrideRedirectResult=_4}async _openPopup(e,t,r,i){var o;fi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await JN(e,t,r,XE(),i);return z4(e,s,RI())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await JN(e,t,r,XE(),i);return n4(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(fi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await j4(e),r=new lI(e);return t.register("authEvent",i=>(oe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(JE,{type:JE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[JE];s!==void 0&&t(!!s),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=A4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gM()||uM()||EI()}},SM=dI;var XN="@firebase/auth",eM="1.10.8";var hI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Z4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J4(n){Dn(new Pt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;oe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mM(n)},l=new oI(r,i,o,u);return HH(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Dn(new Pt("auth-internal",e=>{let t=Tp(e.getProvider("auth").getImmediate());return(r=>new hI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oe(XN,eM,Z4(n)),Oe(XN,eM,"esm2017")}var X4=5*60,e3=DE("authIdTokenMaxAge")||X4,tM=null,t3=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>e3)return;let i=t?.token;tM!==i&&(tM=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function MI(n=ui()){let e=to(n,"auth");if(e.isInitialized())return e.getImmediate();let t=wI(n,{popupRedirectResolver:SM,persistence:[bM,EM,AI]}),r=DE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=t3(o.toString());CI(t,s,()=>s(t.currentUser)),TI(t,a=>s(a))}}let i=IE("auth");return i&&DI(t,`http://${i}`),t}function n3(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}UH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=nr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",n3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J4("Browser");var AM="auth",pi=class{constructor(e){return e}},gs=class{constructor(){return ro(AM)}};var PI=new U("angularfire2.auth-instances");function W3(n,e){let t=ls(AM,n,e);return t&&new pi(t)}function K3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new pi(r)}}var Q3={provide:gs,deps:[[new Et,PI]]},Y3={provide:pi,useFactory:W3,deps:[[new Et,PI],er]};function uue(n,...e){return Oe("angularfire",Tr.full,"auth"),Zt([Y3,Q3,{provide:PI,useFactory:K3(n),multi:!0,deps:[Ie,je,Cr,li,[new Et,so],...e]}])}var lue=We(MI,!0);var RM=We(NI,!0,2);var NM=We(SI,!0,2);var MM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},PM={};var gi,xI;(function(){var n;function e(D,v){function I(){}I.prototype=v.prototype,D.D=v.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(w,b,S){for(var E=Array(arguments.length-2),Hr=2;Hr<arguments.length;Hr++)E[Hr-2]=arguments[Hr];return v.prototype[b].apply(w,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)w[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)w[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=D.g[0],I=D.g[1],b=D.g[2];var S=D.g[3],E=v+(S^I&(b^S))+w[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=S+(b^v&(I^b))+w[1]+3905402710&4294967295,S=v+(E<<12&4294967295|E>>>20),E=b+(I^S&(v^I))+w[2]+606105819&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(v^b&(S^v))+w[3]+3250441966&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(S^I&(b^S))+w[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(b^v&(I^b))+w[5]+1200080426&4294967295,S=v+(E<<12&4294967295|E>>>20),E=b+(I^S&(v^I))+w[6]+2821735955&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(v^b&(S^v))+w[7]+4249261313&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(S^I&(b^S))+w[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(b^v&(I^b))+w[9]+2336552879&4294967295,S=v+(E<<12&4294967295|E>>>20),E=b+(I^S&(v^I))+w[10]+4294925233&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(v^b&(S^v))+w[11]+2304563134&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(S^I&(b^S))+w[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=S+(b^v&(I^b))+w[13]+4254626195&4294967295,S=v+(E<<12&4294967295|E>>>20),E=b+(I^S&(v^I))+w[14]+2792965006&4294967295,b=S+(E<<17&4294967295|E>>>15),E=I+(v^b&(S^v))+w[15]+1236535329&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(b^S&(I^b))+w[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(v^I))+w[6]+3225465664&4294967295,S=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(S^v))+w[11]+643717713&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(b^S))+w[0]+3921069994&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^S&(I^b))+w[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(v^I))+w[10]+38016083&4294967295,S=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(S^v))+w[15]+3634488961&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(b^S))+w[4]+3889429448&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^S&(I^b))+w[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(v^I))+w[14]+3275163606&4294967295,S=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(S^v))+w[3]+4107603335&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(b^S))+w[8]+1163531501&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^S&(I^b))+w[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=S+(I^b&(v^I))+w[2]+4243563512&4294967295,S=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(S^v))+w[7]+1735328473&4294967295,b=S+(E<<14&4294967295|E>>>18),E=I+(S^v&(b^S))+w[12]+2368359562&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(I^b^S)+w[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^b)+w[8]+2272392833&4294967295,S=v+(E<<11&4294967295|E>>>21),E=b+(S^v^I)+w[11]+1839030562&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^v)+w[14]+4259657740&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^S)+w[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^b)+w[4]+1272893353&4294967295,S=v+(E<<11&4294967295|E>>>21),E=b+(S^v^I)+w[7]+4139469664&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^v)+w[10]+3200236656&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^S)+w[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^b)+w[0]+3936430074&4294967295,S=v+(E<<11&4294967295|E>>>21),E=b+(S^v^I)+w[3]+3572445317&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^v)+w[6]+76029189&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^S)+w[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=S+(v^I^b)+w[12]+3873151461&4294967295,S=v+(E<<11&4294967295|E>>>21),E=b+(S^v^I)+w[15]+530742520&4294967295,b=S+(E<<16&4294967295|E>>>16),E=I+(b^S^v)+w[2]+3299628645&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(b^(I|~S))+w[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~b))+w[7]+1126891415&4294967295,S=v+(E<<10&4294967295|E>>>22),E=b+(v^(S|~I))+w[14]+2878612391&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~v))+w[5]+4237533241&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~S))+w[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~b))+w[3]+2399980690&4294967295,S=v+(E<<10&4294967295|E>>>22),E=b+(v^(S|~I))+w[10]+4293915773&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~v))+w[1]+2240044497&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~S))+w[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~b))+w[15]+4264355552&4294967295,S=v+(E<<10&4294967295|E>>>22),E=b+(v^(S|~I))+w[6]+2734768916&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~v))+w[13]+1309151649&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~S))+w[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=S+(I^(v|~b))+w[11]+3174756917&4294967295,S=v+(E<<10&4294967295|E>>>22),E=b+(v^(S|~I))+w[2]+718787259&4294967295,b=S+(E<<15&4294967295|E>>>17),E=I+(S^(b|~v))+w[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var I=v-this.blockSize,w=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=I;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<v;)if(w[b++]=D.charCodeAt(S++),b==this.blockSize){i(this,w),b=0;break}}else for(;S<v;)if(w[b++]=D[S++],b==this.blockSize){i(this,w),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var I=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=I&255,I/=256;for(this.u(D),D=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)D[I++]=this.g[v]>>>w&255;return D};function o(D,v){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=v(D)}function s(D,v){this.h=v;for(var I=[],w=!0,b=D.length-1;0<=b;b--){var S=D[b]|0;w&&S==v||(I[b]=S,w=!1)}this.g=I}var a={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var v=[],I=1,w=0;D>=I;w++)v[w]=D/I|0,I*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return R(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),w=p,b=0;b<D.length;b+=8){var S=Math.min(8,D.length-b),E=parseInt(D.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),w=w.j(S).add(l(E))):(w=w.j(I),w=w.add(l(E)))}return w}var p=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-R(this).m();for(var D=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);D+=(0<=w?w:4294967296+w)*v,v*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(_(this))return"0";if(A(this))return"-"+R(this).toString(D);for(var v=l(Math.pow(D,6)),I=this,w="";;){var b=Ce(I,v).g;I=x(I,b.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=b,_(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function _(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function A(D){return D.h==-1}n.l=function(D){return D=x(this,D),A(D)?-1:_(D)?0:1};function R(D){for(var v=D.g.length,I=[],w=0;w<v;w++)I[w]=~D.g[w];return new s(I,~D.h).add(g)}n.abs=function(){return A(this)?R(this):this},n.add=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],w=0,b=0;b<=v;b++){var S=w+(this.i(b)&65535)+(D.i(b)&65535),E=(S>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);w=E>>>16,S&=65535,E&=65535,I[b]=E<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function x(D,v){return D.add(R(v))}n.j=function(D){if(_(this)||_(D))return p;if(A(this))return A(D)?R(this).j(R(D)):R(R(this).j(D));if(A(D))return R(this.j(R(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<D.g.length;b++){var S=this.i(w)>>>16,E=this.i(w)&65535,Hr=D.i(b)>>>16,qc=D.i(b)&65535;I[2*w+2*b]+=E*qc,q(I,2*w+2*b),I[2*w+2*b+1]+=S*qc,q(I,2*w+2*b+1),I[2*w+2*b+1]+=E*Hr,q(I,2*w+2*b+1),I[2*w+2*b+2]+=S*Hr,q(I,2*w+2*b+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new s(I,0)};function q(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function Z(D,v){this.g=D,this.h=v}function Ce(D,v){if(_(v))throw Error("division by zero");if(_(D))return new Z(p,p);if(A(D))return v=Ce(R(D),v),new Z(R(v.g),R(v.h));if(A(v))return v=Ce(D,R(v)),new Z(R(v.g),v.h);if(30<D.g.length){if(A(D)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,w=v;0>=w.l(D);)I=tt(I),w=tt(w);var b=Me(I,1),S=Me(w,1);for(w=Me(w,2),I=Me(I,2);!_(w);){var E=S.add(w);0>=E.l(D)&&(b=b.add(I),S=E),w=Me(w,1),I=Me(I,1)}return v=x(D,b.j(v)),new Z(b,v)}for(b=p;0<=D.l(v);){for(I=Math.max(1,Math.floor(D.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),E=S.j(v);A(E)||0<E.l(D);)I-=w,S=l(I),E=S.j(v);_(S)&&(S=g),b=b.add(S),D=x(D,E)}return new Z(b,D)}n.A=function(D){return Ce(this,D).h},n.and=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&D.i(w);return new s(I,this.h&D.h)},n.or=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|D.i(w);return new s(I,this.h|D.h)},n.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^D.i(w);return new s(I,this.h^D.h)};function tt(D){for(var v=D.g.length+1,I=[],w=0;w<v;w++)I[w]=D.i(w)<<1|D.i(w-1)>>>31;return new s(I,D.h)}function Me(D,v){var I=v>>5;v%=32;for(var w=D.g.length-I,b=[],S=0;S<w;S++)b[S]=0<v?D.i(S+I)>>>v|D.i(S+I+1)<<32-v:D.i(S+I);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xI=PM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,gi=PM.Integer=s}).apply(typeof MM<"u"?MM:typeof self<"u"?self:typeof window<"u"?window:{});var Sp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mi={};var kI,Z3,Qa,OI,ml,Ap,FI,LI,VI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sp=="object"&&Sp];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var T=c[m];if(!(T in f))break e;f=f[T]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,T={next:function(){if(!m&&f<c.length){var N=f++;return{value:d(N,c[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function _(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,T,N){for(var O=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)O[Pe-2]=arguments[Pe];return d.prototype[T].apply(m,O)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let T=c.length||0,N=m.length||0;c.length=T+N;for(let O=0;O<N;O++)c[T+O]=m[O]}else c.push(m)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(c){return/^[\s\xa0]*$/.test(c)}function Z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ce(c){return Ce[" "](c),c}Ce[" "]=function(){};var tt=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function Me(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(f in m)c[f]=m[f];for(let N=0;N<I.length;N++)f=I[N],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function E(){var c=xm;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Hr{constructor(){this.h=this.g=null}add(d,f){let m=qc.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var qc=new x(()=>new g1,c=>c.reset());class g1{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let zc,Gc=!1,xm=new Hr,gT=()=>{let c=a.Promise.resolve(void 0);zc=()=>{c.then(m1)}};var m1=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){S(f)}var d=qc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Gc=!1};function Ai(){this.s=this.s,this.C=this.C}Ai.prototype.s=!1,Ai.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ai.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var y1=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Wc(c,d){if(xt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(tt){e:{try{Ce(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:v1[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Wc.aa.h.call(this)}}_(Wc,xt);var v1={2:"touch",3:"pen",4:"mouse"};Wc.prototype.h=function(){Wc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Kc="closure_listenable_"+(1e6*Math.random()|0),_1=0;function E1(c,d,f,m,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=T,this.key=++_1,this.da=this.fa=!1}function yd(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function vd(c){this.src=c,this.g={},this.h=0}vd.prototype.add=function(c,d,f,m,T){var N=c.toString();c=this.g[N],c||(c=this.g[N]=[],this.h++);var O=Om(c,d,m,T);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new E1(d,this.src,N,!!m,T),d.fa=f,c.push(d)),d};function km(c,d){var f=d.type;if(f in c.g){var m=c.g[f],T=Array.prototype.indexOf.call(m,d,void 0),N;(N=0<=T)&&Array.prototype.splice.call(m,T,1),N&&(yd(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Om(c,d,f,m){for(var T=0;T<c.length;++T){var N=c[T];if(!N.da&&N.listener==d&&N.capture==!!f&&N.ha==m)return T}return-1}var Fm="closure_lm_"+(1e6*Math.random()|0),Lm={};function mT(c,d,f,m,T){if(m&&m.once)return vT(c,d,f,m,T);if(Array.isArray(d)){for(var N=0;N<d.length;N++)mT(c,d[N],f,m,T);return null}return f=Bm(f),c&&c[Kc]?c.K(d,f,l(m)?!!m.capture:!!m,T):yT(c,d,f,!1,m,T)}function yT(c,d,f,m,T,N){if(!d)throw Error("Invalid event type");var O=l(T)?!!T.capture:!!T,Pe=jm(c);if(Pe||(c[Fm]=Pe=new vd(c)),f=Pe.add(d,f,m,O,N),f.proxy)return f;if(m=I1(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)y1||(T=O),T===void 0&&(T=!1),c.addEventListener(d.toString(),m,T);else if(c.attachEvent)c.attachEvent(ET(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function I1(){function c(f){return d.call(c.src,c.listener,f)}let d=w1;return c}function vT(c,d,f,m,T){if(Array.isArray(d)){for(var N=0;N<d.length;N++)vT(c,d[N],f,m,T);return null}return f=Bm(f),c&&c[Kc]?c.L(d,f,l(m)?!!m.capture:!!m,T):yT(c,d,f,!0,m,T)}function _T(c,d,f,m,T){if(Array.isArray(d))for(var N=0;N<d.length;N++)_T(c,d[N],f,m,T);else m=l(m)?!!m.capture:!!m,f=Bm(f),c&&c[Kc]?(c=c.i,d=String(d).toString(),d in c.g&&(N=c.g[d],f=Om(N,f,m,T),-1<f&&(yd(N[f]),Array.prototype.splice.call(N,f,1),N.length==0&&(delete c.g[d],c.h--)))):c&&(c=jm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Om(d,f,m,T)),(f=-1<c?d[c]:null)&&Vm(f))}function Vm(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Kc])km(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(ET(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=jm(d))?(km(f,c),f.h==0&&(f.src=null,d[Fm]=null)):yd(c)}}}function ET(c){return c in Lm?Lm[c]:Lm[c]="on"+c}function w1(c,d){if(c.da)c=!0;else{d=new Wc(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Vm(c),c=f.call(m,d)}return c}function jm(c){return c=c[Fm],c instanceof vd?c:null}var Um="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bm(c){return typeof c=="function"?c:(c[Um]||(c[Um]=function(d){return c.handleEvent(d)}),c[Um])}function kt(){Ai.call(this),this.i=new vd(this),this.M=this,this.F=null}_(kt,Ai),kt.prototype[Kc]=!0,kt.prototype.removeEventListener=function(c,d,f,m){_T(this,c,d,f,m)};function Ht(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new xt(d,c);else if(d instanceof xt)d.target=d.target||c;else{var T=d;d=new xt(m,c),w(d,T)}if(T=!0,f)for(var N=f.length-1;0<=N;N--){var O=d.g=f[N];T=_d(O,m,!0,d)&&T}if(O=d.g=c,T=_d(O,m,!0,d)&&T,T=_d(O,m,!1,d)&&T,f)for(N=0;N<f.length;N++)O=d.g=f[N],T=_d(O,m,!1,d)&&T}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)yd(f[m]);delete c.g[d],c.h--}}this.F=null},kt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},kt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function _d(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,N=0;N<d.length;++N){var O=d[N];if(O&&!O.da&&O.capture==f){var Pe=O.listener,Rt=O.ha||O.src;O.fa&&km(c.i,O),T=Pe.call(Rt,m)!==!1&&T}}return T&&!m.defaultPrevented}function IT(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function wT(c){c.g=IT(()=>{c.g=null,c.i&&(c.i=!1,wT(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class D1 extends Ai{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:wT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qc(c){Ai.call(this),this.h=c,this.g={}}_(Qc,Ai);var DT=[];function bT(c){Me(c.g,function(d,f){this.g.hasOwnProperty(f)&&Vm(d)},c),c.g={}}Qc.prototype.N=function(){Qc.aa.N.call(this),bT(this)},Qc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $m=a.JSON.stringify,b1=a.JSON.parse,T1=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Hm(){}Hm.prototype.h=null;function TT(c){return c.h||(c.h=c.i())}function CT(){}var Yc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qm(){xt.call(this,"d")}_(qm,xt);function zm(){xt.call(this,"c")}_(zm,xt);var To={},ST=null;function Ed(){return ST=ST||new kt}To.La="serverreachability";function AT(c){xt.call(this,To.La,c)}_(AT,xt);function Zc(c){let d=Ed();Ht(d,new AT(d))}To.STAT_EVENT="statevent";function RT(c,d){xt.call(this,To.STAT_EVENT,c),this.stat=d}_(RT,xt);function qt(c){let d=Ed();Ht(d,new RT(d,c))}To.Ma="timingevent";function NT(c,d){xt.call(this,To.Ma,c),this.size=d}_(NT,xt);function Jc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Xc(){this.g=!0}Xc.prototype.xa=function(){this.g=!1};function C1(c,d,f,m,T,N){c.info(function(){if(c.g)if(N)for(var O="",Pe=N.split("&"),Rt=0;Rt<Pe.length;Rt++){var De=Pe[Rt].split("=");if(1<De.length){var Ot=De[0];De=De[1];var Ft=Ot.split("_");O=2<=Ft.length&&Ft[1]=="type"?O+(Ot+"="+De+"&"):O+(Ot+"=redacted&")}}else O=null;else O=N;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+d+`
`+f+`
`+O})}function S1(c,d,f,m,T,N,O){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+d+`
`+f+`
`+N+" "+O})}function Fs(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+R1(c,f)+(m?" "+m:"")})}function A1(c,d){c.info(function(){return"TIMEOUT: "+d})}Xc.prototype.info=function(){};function R1(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var N=T[0];if(N!="noop"&&N!="stop"&&N!="close")for(var O=1;O<T.length;O++)T[O]=""}}}}return $m(f)}catch{return d}}var Id={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},MT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gm;function wd(){}_(wd,Hm),wd.prototype.g=function(){return new XMLHttpRequest},wd.prototype.i=function(){return{}},Gm=new wd;function Ri(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Qc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new PT}function PT(){this.i=null,this.g="",this.h=!1}var xT={},Wm={};function Km(c,d,f){c.L=1,c.v=Cd(qr(d)),c.m=f,c.P=!0,kT(c,null)}function kT(c,d){c.F=Date.now(),Dd(c),c.A=qr(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),KT(f.i,"t",m),c.C=0,f=c.j.J,c.h=new PT,c.g=h0(c.j,f?d:null,!c.m),0<c.O&&(c.M=new D1(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(DT[0]=T.toString()),T=DT);for(var N=0;N<T.length;N++){var O=mT(f,T[N],m||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Zc(),C1(c.i,c.u,c.A,c.l,c.R,c.m)}Ri.prototype.ca=function(c){c=c.target;let d=this.M;d&&zr(c)==3?d.j():this.Y(c)},Ri.prototype.Y=function(c){try{if(c==this.g)e:{let Ft=zr(this.g);var d=this.g.Ba();let js=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||t0(this.g)))){this.J||Ft!=4||d==7||(d==8||0>=js?Zc(3):Zc(2)),Qm(this);var f=this.g.Z();this.X=f;t:if(OT(this)){var m=t0(this.g);c="";var T=m.length,N=zr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Co(this),eu(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(N&&d==T-1)});m.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,S1(this.i,this.u,this.A,this.l,this.R,Ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,Rt=this.g;if((Pe=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Pe)){var De=Pe;break t}}De=null}if(f=De)Fs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ym(this,f);else{this.o=!1,this.s=3,qt(12),Co(this),eu(this);break e}}if(this.P){f=!0;let Bn;for(;!this.J&&this.C<O.length;)if(Bn=N1(this,O),Bn==Wm){Ft==4&&(this.s=4,qt(14),f=!1),Fs(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==xT){this.s=4,qt(15),Fs(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Fs(this.i,this.l,Bn,null),Ym(this,Bn);if(OT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||O.length!=0||this.h.h||(this.s=1,qt(16),f=!1),this.o=this.o&&f,!f)Fs(this.i,this.l,O,"[Invalid Chunked Response]"),Co(this),eu(this);else if(0<O.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),ny(Ot),Ot.M=!0,qt(11))}}else Fs(this.i,this.l,O,null),Ym(this,O);Ft==4&&Co(this),this.o&&!this.J&&(Ft==4?c0(this.j,this):(this.o=!1,Dd(this)))}else W1(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,qt(12)):(this.s=0,qt(13)),Co(this),eu(this)}}}catch{}finally{}};function OT(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function N1(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Wm:(f=Number(d.substring(f,m)),isNaN(f)?xT:(m+=1,m+f>d.length?Wm:(d=d.slice(m,m+f),c.C=m+f,d)))}Ri.prototype.cancel=function(){this.J=!0,Co(this)};function Dd(c){c.S=Date.now()+c.I,FT(c,c.I)}function FT(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Jc(g(c.ba,c),d)}function Qm(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ri.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(A1(this.i,this.A),this.L!=2&&(Zc(),qt(17)),Co(this),this.s=2,eu(this)):FT(this,this.S-c)};function eu(c){c.j.G==0||c.J||c0(c.j,c)}function Co(c){Qm(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,bT(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Ym(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Zm(f.h,c))){if(!c.K&&Zm(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Md(f),Rd(f);else break e;ty(f),qt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Jc(g(f.Za,f),6e3));if(1>=jT(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ao(f,11)}else if((c.K||f.g==c)&&Md(f),!q(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let De=T[d];if(f.T=De[0],De=De[1],f.G==2)if(De[0]=="c"){f.K=De[1],f.ia=De[2];let Ot=De[3];Ot!=null&&(f.la=Ot,f.j.info("VER="+f.la));let Ft=De[4];Ft!=null&&(f.Aa=Ft,f.j.info("SVER="+f.Aa));let js=De[5];js!=null&&typeof js=="number"&&0<js&&(m=1.5*js,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Bn=c.g;if(Bn){let xd=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xd){var N=m.h;N.g||xd.indexOf("spdy")==-1&&xd.indexOf("quic")==-1&&xd.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Jm(N,N.h),N.h=null))}if(m.D){let ry=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;ry&&(m.ya=ry,Ve(m.I,m.D,ry))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=c;if(m.qa=d0(m,m.J?m.ia:null,m.W),O.K){UT(m.h,O);var Pe=O,Rt=m.L;Rt&&(Pe.I=Rt),Pe.B&&(Qm(Pe),Dd(Pe)),m.g=O}else s0(m);0<f.i.length&&Nd(f)}else De[0]!="stop"&&De[0]!="close"||Ao(f,7);else f.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Ao(f,7):ey(f):De[0]!="noop"&&f.l&&f.l.ta(De),f.v=0)}}Zc(4)}catch{}}var M1=class{constructor(c,d){this.g=c,this.map=d}};function LT(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function VT(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function jT(c){return c.h?1:c.g?c.g.size:0}function Zm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Jm(c,d){c.g?c.g.add(d):c.h=d}function UT(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}LT.prototype.cancel=function(){if(this.i=BT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function BT(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function P1(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function x1(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function $T(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=x1(c),m=P1(c),T=m.length,N=0;N<T;N++)d.call(void 0,m[N],f&&f[N],c)}var HT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k1(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),T=null;if(0<=m){var N=c[f].substring(0,m);T=c[f].substring(m+1)}else N=c[f];d(N,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function So(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof So){this.h=c.h,bd(this,c.j),this.o=c.o,this.g=c.g,Td(this,c.s),this.l=c.l;var d=c.i,f=new ru;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),qT(this,f),this.m=c.m}else c&&(d=String(c).match(HT))?(this.h=!1,bd(this,d[1]||"",!0),this.o=tu(d[2]||""),this.g=tu(d[3]||"",!0),Td(this,d[4]),this.l=tu(d[5]||"",!0),qT(this,d[6]||"",!0),this.m=tu(d[7]||"")):(this.h=!1,this.i=new ru(null,this.h))}So.prototype.toString=function(){var c=[],d=this.j;d&&c.push(nu(d,zT,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(nu(d,zT,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(nu(f,f.charAt(0)=="/"?L1:F1,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",nu(f,j1)),c.join("")};function qr(c){return new So(c)}function bd(c,d,f){c.j=f?tu(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Td(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function qT(c,d,f){d instanceof ru?(c.i=d,U1(c.i,c.h)):(f||(d=nu(d,V1)),c.i=new ru(d,c.h))}function Ve(c,d,f){c.i.set(d,f)}function Cd(c){return Ve(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function tu(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function nu(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,O1),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function O1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var zT=/[#\/\?@]/g,F1=/[#\?:]/g,L1=/[#\?]/g,V1=/[#\?@]/g,j1=/#/g;function ru(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ni(c){c.g||(c.g=new Map,c.h=0,c.i&&k1(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ru.prototype,n.add=function(c,d){Ni(this),this.i=null,c=Ls(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function GT(c,d){Ni(c),d=Ls(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function WT(c,d){return Ni(c),d=Ls(c,d),c.g.has(d)}n.forEach=function(c,d){Ni(this),this.g.forEach(function(f,m){f.forEach(function(T){c.call(d,T,m,this)},this)},this)},n.na=function(){Ni(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let T=c[m];for(let N=0;N<T.length;N++)f.push(d[m])}return f},n.V=function(c){Ni(this);let d=[];if(typeof c=="string")WT(this,c)&&(d=d.concat(this.g.get(Ls(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Ni(this),this.i=null,c=Ls(this,c),WT(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function KT(c,d,f){GT(c,d),0<f.length&&(c.i=null,c.g.set(Ls(c,d),A(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let N=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var T=N;O[m]!==""&&(T+="="+encodeURIComponent(String(O[m]))),c.push(T)}}return this.i=c.join("&")};function Ls(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function U1(c,d){d&&!c.j&&(Ni(c),c.i=null,c.g.forEach(function(f,m){var T=m.toLowerCase();m!=T&&(GT(this,m),KT(this,T,f))},c)),c.j=d}function B1(c,d){let f=new Xc;if(a.Image){let m=new Image;m.onload=y(Mi,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Mi,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Mi,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Mi,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function $1(c,d){let f=new Xc,m=new AbortController,T=setTimeout(()=>{m.abort(),Mi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(N=>{clearTimeout(T),N.ok?Mi(f,"TestPingServer: ok",!0,d):Mi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Mi(f,"TestPingServer: error",!1,d)})}function Mi(c,d,f,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(f)}catch{}}function H1(){this.g=new T1}function q1(c,d,f){let m=f||"";try{$T(c,function(T,N){let O=T;l(T)&&(O=$m(T)),d.push(m+N+"="+encodeURIComponent(O))})}catch(T){throw d.push(m+"type="+encodeURIComponent("_badmap")),T}}function iu(c){this.l=c.Ub||null,this.j=c.eb||!1}_(iu,Hm),iu.prototype.g=function(){return new Sd(this.l,this.j)},iu.prototype.i=function(c){return function(){return c}}({});function Sd(c,d){kt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Sd,kt),n=Sd.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,su(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ou(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,su(this)),this.g&&(this.readyState=3,su(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;QT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function QT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ou(this):su(this),this.readyState==3&&QT(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ou(this))},n.Qa=function(c){this.g&&(this.response=c,ou(this))},n.ga=function(){this.g&&ou(this)};function ou(c){c.readyState=4,c.l=null,c.j=null,c.v=null,su(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function su(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Sd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function YT(c){let d="";return Me(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Xm(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=YT(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ve(c,d,f))}function Ke(c){kt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Ke,kt);var z1=/^https?$/i,G1=["POST","PUT"];n=Ke.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gm.g(),this.v=this.o?TT(this.o):TT(Gm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(N){ZT(this,N);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)f.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())f.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(N=>N.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(G1,d,void 0))||m||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,O]of f)this.g.setRequestHeader(N,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{e0(this),this.u=!0,this.g.send(c),this.u=!1}catch(N){ZT(this,N)}};function ZT(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,JT(c),Ad(c)}function JT(c){c.A||(c.A=!0,Ht(c,"complete"),Ht(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ht(this,"complete"),Ht(this,"abort"),Ad(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ad(this,!0)),Ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?XT(this):this.bb())},n.bb=function(){XT(this)};function XT(c){if(c.h&&typeof s<"u"&&(!c.v[1]||zr(c)!=4||c.Z()!=2)){if(c.u&&zr(c)==4)IT(c.Ea,0,c);else if(Ht(c,"readystatechange"),zr(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=O===0){var T=String(c.D).match(HT)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),m=!z1.test(T?T.toLowerCase():"")}f=m}if(f)Ht(c,"complete"),Ht(c,"success");else{c.m=6;try{var N=2<zr(c)?c.g.statusText:""}catch{N=""}c.l=N+" ["+c.Z()+"]",JT(c)}}finally{Ad(c)}}}}function Ad(c,d){if(c.g){e0(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ht(c,"ready");try{f.onreadystatechange=m}catch{}}}function e0(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function zr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<zr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),b1(d)}};function t0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function W1(c){let d={};c=(c.g&&2<=zr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(q(c[m]))continue;var f=b(c[m]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let N=d[T]||[];d[T]=N,N.push(f)}D(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function au(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function n0(c){this.Aa=0,this.i=[],this.j=new Xc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=au("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=au("baseRetryDelayMs",5e3,c),this.cb=au("retryDelaySeedMs",1e4,c),this.Wa=au("forwardChannelMaxRetries",2,c),this.wa=au("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new LT(c&&c.concurrentRequestLimit),this.Da=new H1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=n0.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){qt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=d0(this,null,this.W),Nd(this)};function ey(c){if(r0(c),c.G==3){var d=c.U++,f=qr(c.I);if(Ve(f,"SID",c.K),Ve(f,"RID",d),Ve(f,"TYPE","terminate"),cu(c,f),d=new Ri(c,c.j,d),d.L=2,d.v=Cd(qr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=h0(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Dd(d)}l0(c)}function Rd(c){c.g&&(ny(c),c.g.cancel(),c.g=null)}function r0(c){Rd(c),c.u&&(a.clearTimeout(c.u),c.u=null),Md(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Nd(c){if(!VT(c.h)&&!c.s){c.s=!0;var d=c.Ga;zc||gT(),Gc||(zc(),Gc=!0),xm.add(d,c),c.B=0}}function K1(c,d){return jT(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Jc(g(c.Ga,c,d),u0(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new Ri(this,this.j,c),N=this.o;if(this.S&&(N?(N=v(N),w(N,this.S)):N=this.S),this.m!==null||this.O||(T.H=N,N=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=o0(this,T,d),f=qr(this.I),Ve(f,"RID",c),Ve(f,"CVER",22),this.D&&Ve(f,"X-HTTP-Session-Id",this.D),cu(this,f),N&&(this.O?d="headers="+encodeURIComponent(String(YT(N)))+"&"+d:this.m&&Xm(f,this.m,N)),Jm(this.h,T),this.Ua&&Ve(f,"TYPE","init"),this.P?(Ve(f,"$req",d),Ve(f,"SID","null"),T.T=!0,Km(T,f,null)):Km(T,f,d),this.G=2}}else this.G==3&&(c?i0(this,c):this.i.length==0||VT(this.h)||i0(this))};function i0(c,d){var f;d?f=d.l:f=c.U++;let m=qr(c.I);Ve(m,"SID",c.K),Ve(m,"RID",f),Ve(m,"AID",c.T),cu(c,m),c.m&&c.o&&Xm(m,c.m,c.o),f=new Ri(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=o0(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Jm(c.h,f),Km(f,m,d)}function cu(c,d){c.H&&Me(c.H,function(f,m){Ve(d,m,f)}),c.l&&$T({},function(f,m){Ve(d,m,f)})}function o0(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var T=c.i;let N=-1;for(;;){let O=["count="+f];N==-1?0<f?(N=T[0].g,O.push("ofs="+N)):N=0:O.push("ofs="+N);let Pe=!0;for(let Rt=0;Rt<f;Rt++){let De=T[Rt].g,Ot=T[Rt].map;if(De-=N,0>De)N=Math.max(0,T[Rt].g-100),Pe=!1;else try{q1(Ot,O,"req"+De+"_")}catch{m&&m(Ot)}}if(Pe){m=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function s0(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;zc||gT(),Gc||(zc(),Gc=!0),xm.add(d,c),c.v=0}}function ty(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Jc(g(c.Fa,c),u0(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,a0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Jc(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qt(10),Rd(this),a0(this))};function ny(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function a0(c){c.g=new Ri(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=qr(c.qa);Ve(d,"RID","rpc"),Ve(d,"SID",c.K),Ve(d,"AID",c.T),Ve(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ve(d,"TO",c.ja),Ve(d,"TYPE","xmlhttp"),cu(c,d),c.m&&c.o&&Xm(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Cd(qr(d)),f.m=null,f.P=!0,kT(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Rd(this),ty(this),qt(19))};function Md(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function c0(c,d){var f=null;if(c.g==d){Md(c),ny(c),c.g=null;var m=2}else if(Zm(c.h,d))f=d.D,UT(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;m=Ed(),Ht(m,new NT(m,f)),Nd(c)}else s0(c);else if(T=d.s,T==3||T==0&&0<d.X||!(m==1&&K1(c,d)||m==2&&ty(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:Ao(c,5);break;case 4:Ao(c,10);break;case 3:Ao(c,6);break;default:Ao(c,2)}}}function u0(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Ao(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let T=!m;m=new So(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||bd(m,"https"),Cd(m),T?B1(m.toString(),f):$1(m.toString(),f)}else qt(2);c.G=0,c.l&&c.l.sa(d),l0(c),r0(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function l0(c){if(c.G=0,c.ka=[],c.l){let d=BT(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function d0(c,d,f){var m=f instanceof So?qr(f):new So(f);if(m.g!="")d&&(m.g=d+"."+m.g),Td(m,m.s);else{var T=a.location;m=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var N=new So(null);m&&bd(N,m),d&&(N.g=d),T&&Td(N,T),f&&(N.l=f),m=N}return f=c.D,d=c.ya,f&&d&&Ve(m,f,d),Ve(m,"VER",c.la),cu(c,m),m}function h0(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ke(new iu({eb:f})):new Ke(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function f0(){}n=f0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Pd(){}Pd.prototype.g=function(c,d){return new mn(c,d)};function mn(c,d){kt.call(this),this.g=new n0(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Vs(this)}_(mn,kt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){ey(this.g)},mn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=$m(c),c=f);d.i.push(new M1(d.Ya++,c)),d.G==3&&Nd(d)},mn.prototype.N=function(){this.g.l=null,delete this.j,ey(this.g),delete this.g,mn.aa.N.call(this)};function p0(c){qm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}_(p0,qm);function g0(){zm.call(this),this.status=1}_(g0,zm);function Vs(c){this.g=c}_(Vs,f0),Vs.prototype.ua=function(){Ht(this.g,"a")},Vs.prototype.ta=function(c){Ht(this.g,new p0(c))},Vs.prototype.sa=function(c){Ht(this.g,new g0)},Vs.prototype.ra=function(){Ht(this.g,"b")},Pd.prototype.createWebChannel=Pd.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,VI=mi.createWebChannelTransport=function(){return new Pd},LI=mi.getStatEventTarget=function(){return Ed()},FI=mi.Event=To,Ap=mi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Id.NO_ERROR=0,Id.TIMEOUT=8,Id.HTTP_ERROR=6,ml=mi.ErrorCode=Id,MT.COMPLETE="complete",OI=mi.EventType=MT,CT.EventType=Yc,Yc.OPEN="a",Yc.CLOSE="b",Yc.ERROR="c",Yc.MESSAGE="d",kt.prototype.listen=kt.prototype.K,Qa=mi.WebChannel=CT,Z3=mi.FetchXmlHttpFactory=iu,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,kI=mi.XhrIo=Ke}).apply(typeof Sp<"u"?Sp:typeof self<"u"?self:typeof window<"u"?window:{});var xM="@firebase/firestore",kM="4.8.0";var bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");var mc="11.10.0";var Is=new Dr("@firebase/firestore");function Ya(){return Is.logLevel}function V(n,...e){if(Is.logLevel<=_e.DEBUG){let t=e.map(AD);Is.debug(`Firestore (${mc}): ${n}`,...t)}}function yi(n,...e){if(Is.logLevel<=_e.ERROR){let t=e.map(AD);Is.error(`Firestore (${mc}): ${n}`,...t)}}function po(n,...e){if(Is.logLevel<=_e.WARN){let t=e.map(AD);Is.warn(`Firestore (${mc}): ${n}`,...t)}}function AD(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Y(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,TP(n,r,t)}function TP(n,e,t){let r=`FIRESTORE (${mc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw yi(r),new Error(r)}function Ne(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||TP(e,i,r)}function ue(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends on{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Rr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Op=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},HI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bt.UNAUTHENTICATED))}shutdown(){}},qI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zI=class{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ne(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string",31837,{l:r}),new Op(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new bt(e)}},GI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},WI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new GI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Fp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},KI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ne(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Fp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ne(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Fp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function J3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function CP(){return new TextEncoder}var Il=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=J3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function me(n,e){return n<e?-1:n>e?1:0}function QI(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return me(r,i);{let o=CP(),s=X3(o.encode(OM(n,t)),o.encode(OM(e,t)));return s!==0?s:me(r,i)}}t+=r>65535?2:1}return me(n.length,e.length)}function OM(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function X3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return me(n[t],e[t]);return me(n.length,e.length)}function ic(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var FM="__name__",Lp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Y(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Y(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return me(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):QI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gi.fromString(e.substring(4,e.length-2))}},Be=class n extends Lp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},e5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tn=class n extends Lp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return e5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===FM}static keyField(){return new n([FM])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new F(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Be.fromString(e))}static fromName(e){return new n(Be.fromString(e).popFirst(5))}static empty(){return new n(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Be(e.slice()))}};function SP(n,e,t){if(!t)throw new F(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function t5(n,e,t,r){if(e===!0&&r===!0)throw new F(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function LM(n){if(!z.isDocumentKey(n))throw new F(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VM(n){if(z.isDocumentKey(n))throw new F(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AP(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function mg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Y(12329,{type:typeof n})}function Ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new F(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=mg(n);throw new F(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function n5(n,e){if(e<=0)throw new F(M.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function pt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Ol(n,e){if(!AP(n))throw new F(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new F(M.INVALID_ARGUMENT,t);return!0}var jM=-62135596800,UM=1e6,ze=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*UM);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new F(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jM)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/UM}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ol(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-jM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ze._jsonSchemaVersion="firestore/timestamp/1.0",ze._jsonSchema={type:pt("string",ze._jsonSchemaVersion),seconds:pt("number"),nanoseconds:pt("number")};var he=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new ze(0,0))}static max(){return new n(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var wl=-1,YI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};YI.UNKNOWN_ID=-1;function r5(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new ze(t+1,0):new ze(t,r));return new ws(i,z.empty(),e)}function i5(n){return new ws(n.readTime,n.key,wl)}var ws=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(he.min(),z.empty(),wl)}static max(){return new n(he.max(),z.empty(),wl)}};function o5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:me(n.largestBatchId,e.largestBatchId))}var s5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ZI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function yc(n){if(n.code!==M.FAILED_PRECONDITION||n.message!==s5)throw n;V("LocalStore","Unexpectedly lost primary lease")}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function a5(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vc(n){return n.name==="IndexedDbTransactionError"}var RD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),ND=-1;function yg(n){return n==null}function Dl(n){return n===0&&1/n==-1/0}function c5(n){return typeof n=="number"&&Number.isInteger(n)&&!Dl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var RP="";function u5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=BM(e)),e=l5(n.get(t),e);return BM(e)}function l5(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case RP:t+="";break;default:t+=o}}return t}function BM(n){return n+RP+""}var d5="remoteDocuments",NP="owner";var MP="mutationQueues";var PP="mutations";var xP="documentMutations",h5="remoteDocumentsV14";var kP="remoteDocumentGlobal";var OP="targets";var FP="targetDocuments";var LP="targetGlobal",VP="collectionParents";var jP="clientMetadata";var UP="bundles";var BP="namedQueries";var f5="indexConfiguration";var p5="indexState";var g5="indexEntries";var $P="documentOverlays";var m5="globals";var y5=[MP,PP,xP,d5,OP,NP,LP,FP,jP,kP,VP,UP,BP],Tue=[...y5,$P],v5=[MP,PP,xP,h5,OP,NP,LP,FP,jP,kP,VP,UP,BP,$P],_5=v5,E5=[..._5,f5,p5,g5];var Cue=[...E5,m5];function $M(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _o(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function HP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Xe=class n{constructor(e,t){this.comparator=e,this.root=t||Nr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ec(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ec(this.root,e,this.comparator,!1)}getReverseIterator(){return new ec(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ec(this.root,e,this.comparator,!0)}},ec=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}};Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1;Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Nr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Tt=class n{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vp(this.data.getIterator())}getIteratorFrom(e){return new Vp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Vp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Fn=class n{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Tt(Tn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var jp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var $t=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new jp("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};$t.EMPTY_BYTE_STRING=new $t("");var I5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(n){if(Ne(!!n,39018),typeof n=="string"){let e=0,t=I5.exec(n);if(Ne(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(n.seconds),nanos:qe(n.nanos)}}function qe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function _i(n){return typeof n=="string"?$t.fromBase64String(n):$t.fromUint8Array(n)}var qP="server_timestamp",zP="__type__",GP="__previous_value__",WP="__local_write_time__";function vg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[zP])===null||t===void 0?void 0:t.stringValue)===qP}function _g(n){let e=n.mapValue.fields[GP];return vg(e)?_g(e):e}function bl(n){let e=vi(n.mapValue.fields[WP].timestampValue);return new ze(e.seconds,e.nanos)}var JI=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Up="(default)",Bp=class n{constructor(e,t){this.projectId=e,this.database=t||Up}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Up}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var MD="__type__",KP="__max__",Rp={mapValue:{fields:{__type__:{stringValue:KP}}}},PD="__vector__",oc="value";function go(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vg(n)?4:YP(n)?9007199254740991:QP(n)?10:11:Y(28295,{value:n})}function kr(n,e){if(n===e)return!0;let t=go(n);if(t!==go(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bl(n).isEqual(bl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=vi(i.timestampValue),a=vi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return _i(i.bytesValue).isEqual(_i(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return qe(i.geoPointValue.latitude)===qe(o.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return qe(i.integerValue)===qe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=qe(i.doubleValue),a=qe(o.doubleValue);return s===a?Dl(s)===Dl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ic(n.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if($M(s)!==$M(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!kr(s[u],a[u])))return!1;return!0}(n,e);default:return Y(52216,{left:n})}}function Tl(n,e){return(n.values||[]).find(t=>kr(t,e))!==void 0}function sc(n,e){if(n===e)return 0;let t=go(n),r=go(e);if(t!==r)return me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return me(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=qe(o.integerValue||o.doubleValue),u=qe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return HM(n.timestampValue,e.timestampValue);case 4:return HM(bl(n),bl(e));case 5:return QI(n.stringValue,e.stringValue);case 6:return function(o,s){let a=_i(o),u=_i(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=me(a[l],u[l]);if(h!==0)return h}return me(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=me(qe(o.latitude),qe(s.latitude));return a!==0?a:me(qe(o.longitude),qe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return qM(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[oc])===null||a===void 0?void 0:a.arrayValue,_=(u=g[oc])===null||u===void 0?void 0:u.arrayValue,A=me(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=_?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:qM(y,_)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Rp.mapValue&&s===Rp.mapValue)return 0;if(o===Rp.mapValue)return 1;if(s===Rp.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=QI(u[p],h[p]);if(g!==0)return g;let y=sc(a[u[p]],l[h[p]]);if(y!==0)return y}return me(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Y(23264,{le:t})}}function HM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return me(n,e);let t=vi(n),r=vi(e),i=me(t.seconds,r.seconds);return i!==0?i:me(t.nanos,r.nanos)}function qM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=sc(t[i],r[i]);if(o)return o}return me(t.length,r.length)}function ac(n){return XI(n)}function XI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=vi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return _i(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=XI(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${XI(t.fields[s])}`;return i+"}"}(n.mapValue):Y(61005,{value:n})}function Pp(n){switch(go(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=_g(n);return e?16+Pp(e):16;case 5:return 2*n.stringValue.length;case 6:return _i(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Pp(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return _o(r.fields,(o,s)=>{i+=o.length+Pp(s)}),i}(n.mapValue);default:throw Y(13486,{value:n})}}function $p(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ew(n){return!!n&&"integerValue"in n}function xD(n){return!!n&&"arrayValue"in n}function zM(n){return!!n&&"nullValue"in n}function GM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xp(n){return!!n&&"mapValue"in n}function QP(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[MD])===null||t===void 0?void 0:t.stringValue)===PD}function vl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return _o(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function YP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===KP}var Aue={mapValue:{fields:{[MD]:{stringValue:PD},[oc]:{arrayValue:{}}}}};var bn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vl(t)}setAll(e){let t=Tn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=vl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());xp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){_o(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(vl(this.value))}};function ZP(n){let e=[];return _o(n.fields,(t,r)=>{let i=new Tn([t]);if(xp(r)){let o=ZP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Fn(e)}var rr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,he.min(),he.min(),he.min(),bn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,he.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,he.min(),he.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,he.min(),he.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var mo=class{constructor(e,t){this.position=e,this.inclusive=t}};function WM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),t.key):r=sc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function KM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kr(n.position[t],e.position[t]))return!1;return!0}var Ds=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function w5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Hp=class{},ft=class n extends Hp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new nw(e,t,r):t==="array-contains"?new ow(e,r):t==="in"?new sw(e,r):t==="not-in"?new aw(e,r):t==="array-contains-any"?new cw(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new rw(e,r):new iw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(sc(t,this.value)):t!==null&&go(this.value)===go(t)&&this.matchesComparison(sc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ir=class n extends Hp{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return JP(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function JP(n){return n.op==="and"}function XP(n){return D5(n)&&JP(n)}function D5(n){for(let e of n.filters)if(e instanceof ir)return!1;return!0}function tw(n){if(n instanceof ft)return n.field.canonicalString()+n.op.toString()+ac(n.value);if(XP(n))return n.filters.map(e=>tw(e)).join(",");{let e=n.filters.map(t=>tw(t)).join(",");return`${n.op}(${e})`}}function ex(n,e){return n instanceof ft?function(r,i){return i instanceof ft&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)}(n,e):n instanceof ir?function(r,i){return i instanceof ir&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&ex(s,i.filters[a]),!0):!1}(n,e):void Y(19439)}function tx(n){return n instanceof ft?function(t){return`${t.field.canonicalString()} ${t.op} ${ac(t.value)}`}(n):n instanceof ir?function(t){return t.op.toString()+" {"+t.getFilters().map(tx).join(" ,")+"}"}(n):"Filter"}var nw=class extends ft{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},rw=class extends ft{constructor(e,t){super(e,"in",t),this.keys=nx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},iw=class extends ft{constructor(e,t){super(e,"not-in",t),this.keys=nx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function nx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}var ow=class extends ft{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return xD(t)&&Tl(t.arrayValue,this.value)}},sw=class extends ft{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Tl(this.value.arrayValue,t)}},aw=class extends ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tl(this.value.arrayValue,t)}},cw=class extends ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!xD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tl(this.value.arrayValue,r))}};var uw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function QM(n,e=null,t=[],r=[],i=null,o=null,s=null){return new uw(n,e,t,r,i,o,s)}function kD(n){let e=ue(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>tw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),yg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ac(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ac(r)).join(",")),e.Pe=t}return e.Pe}function OD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!w5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ex(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!KM(n.startAt,e.startAt)&&KM(n.endAt,e.endAt)}function lw(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ei=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function b5(n,e,t,r,i,o,s,a){return new Ei(n,e,t,r,i,o,s,a)}function FD(n){return new Ei(n)}function YM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function LD(n){return n.collectionGroup!==null}function tc(n){let e=ue(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Tt(Tn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ds(o,r))}),t.has(Tn.keyField().canonicalString())||e.Te.push(new Ds(Tn.keyField(),r))}return e.Te}function Mr(n){let e=ue(n);return e.Ie||(e.Ie=T5(e,tc(n))),e.Ie}function T5(n,e){if(n.limitType==="F")return QM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ds(i.field,o)});let t=n.endAt?new mo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new mo(n.startAt.position,n.startAt.inclusive):null;return QM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function dw(n,e){let t=n.filters.concat([e]);return new Ei(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qp(n,e,t){return new Ei(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Eg(n,e){return OD(Mr(n),Mr(e))&&n.limitType===e.limitType}function rx(n){return`${kD(Mr(n))}|lt:${n.limitType}`}function Za(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>tx(i)).join(", ")}]`),yg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ac(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ac(i)).join(",")),`Target(${r})`}(Mr(n))}; limitType=${n.limitType})`}function Ig(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of tc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=WM(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,tc(r),i)||r.endAt&&!function(s,a,u){let l=WM(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,tc(r),i))}(n,e)}function C5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ix(n){return(e,t)=>{let r=!1;for(let i of tc(n)){let o=S5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function S5(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?sc(u,l):Y(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:n.dir})}}var Ii=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return HP(this.inner)}size(){return this.innerSize}};var A5=new Xe(z.comparator);function wi(){return A5}var ox=new Xe(z.comparator);function yl(...n){let e=ox;for(let t of n)e=e.insert(t.key,t);return e}function sx(n){let e=ox;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ms(){return _l()}function ax(){return _l()}function _l(){return new Ii(n=>n.toString(),(n,e)=>n.isEqual(e))}var R5=new Xe(z.comparator),N5=new Tt(z.comparator);function Ee(...n){let e=N5;for(let t of n)e=e.add(t);return e}var M5=new Tt(me);function P5(){return M5}function VD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dl(e)?"-0":e}}function cx(n){return{integerValue:""+n}}function x5(n,e){return c5(e)?cx(e):VD(n,e)}var cc=class{constructor(){this._=void 0}};function k5(n,e,t){return n instanceof uc?function(i,o){let s={fields:{[zP]:{stringValue:qP},[WP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&vg(o)&&(o=_g(o)),o&&(s.fields[GP]=o),{mapValue:s}}(t,e):n instanceof bs?lx(n,e):n instanceof Ts?dx(n,e):function(i,o){let s=ux(i,o),a=ZM(s)+ZM(i.Ee);return ew(s)&&ew(i.Ee)?cx(a):VD(i.serializer,a)}(n,e)}function O5(n,e,t){return n instanceof bs?lx(n,e):n instanceof Ts?dx(n,e):t}function ux(n,e){return n instanceof lc?function(r){return ew(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var uc=class extends cc{},bs=class extends cc{constructor(e){super(),this.elements=e}};function lx(n,e){let t=hx(e);for(let r of n.elements)t.some(i=>kr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ts=class extends cc{constructor(e){super(),this.elements=e}};function dx(n,e){let t=hx(e);for(let r of n.elements)t=t.filter(i=>!kr(i,r));return{arrayValue:{values:t}}}var lc=class extends cc{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function ZM(n){return qe(n.integerValue||n.doubleValue)}function hx(n){return xD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function F5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof bs&&i instanceof bs||r instanceof Ts&&i instanceof Ts?ic(r.elements,i.elements,kr):r instanceof lc&&i instanceof lc?kr(r.Ee,i.Ee):r instanceof uc&&i instanceof uc}(n.transform,e.transform)}var hw=class{constructor(e,t){this.version=e,this.transformResults=t}},Pr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function kp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var dc=class{};function fx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Cl(n.key,Pr.none()):new Cs(n.key,n.data,Pr.none());{let t=n.data,r=bn.empty(),i=new Tt(Tn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Or(n.key,r,new Fn(i.toArray()),Pr.none())}}function L5(n,e,t){n instanceof Cs?function(i,o,s){let a=i.value.clone(),u=XM(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Or?function(i,o,s){if(!kp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=XM(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(px(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function El(n,e,t,r){return n instanceof Cs?function(o,s,a,u){if(!kp(o.precondition,s))return a;let l=o.value.clone(),h=eP(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Or?function(o,s,a,u){if(!kp(o.precondition,s))return a;let l=eP(o.fieldTransforms,u,s),h=s.data;return h.setAll(px(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return kp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function V5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=ux(r.transform,i||null);o!=null&&(t===null&&(t=bn.empty()),t.set(r.field,o))}return t||null}function JM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ic(r,i,(o,s)=>F5(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Cs=class extends dc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Or=class extends dc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function px(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function XM(n,e,t){let r=new Map;Ne(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,O5(s,a,t[i]))}return r}function eP(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,k5(o,s,e))}return r}var Cl=class extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},fw=class extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var pw=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&L5(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=El(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=El(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=ax();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=fx(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ee())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,(t,r)=>JM(t,r))&&ic(this.baseMutations,e.baseMutations,(t,r)=>JM(t,r))}},gw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ne(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return R5}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var mw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var yw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var dt,we;function j5(n){switch(n){case M.OK:return Y(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return Y(15467,{code:n})}}function gx(n){if(n===void 0)return yi("GRPC error has no .code"),M.UNKNOWN;switch(n){case dt.OK:return M.OK;case dt.CANCELLED:return M.CANCELLED;case dt.UNKNOWN:return M.UNKNOWN;case dt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case dt.INTERNAL:return M.INTERNAL;case dt.UNAVAILABLE:return M.UNAVAILABLE;case dt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case dt.NOT_FOUND:return M.NOT_FOUND;case dt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case dt.ABORTED:return M.ABORTED;case dt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case dt.DATA_LOSS:return M.DATA_LOSS;default:return Y(39323,{code:n})}}(we=dt||(dt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var tP=null;var U5=new gi([4294967295,4294967295],0);function nP(n){let e=CP().encode(n),t=new xI;return t.update(e),new Uint8Array(t.digest())}function rP(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new gi([t,r],0),new gi([i,o],0)]}var vw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ys(`Invalid padding: ${t}`);if(r<0)throw new ys(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ys(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ys(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=gi.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(gi.fromNumber(r)));return i.compare(U5)===1&&(i=new gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=nP(e),[r,i]=rP(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=nP(e),[r,i]=rP(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ys=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var zp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Sl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(he.min(),i,new Xe(me),wi(),Ee())}},Sl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ee(),Ee(),Ee())}};var nc=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Gp=class{constructor(e,t){this.targetId=e,this.De=t}},Wp=class{constructor(e,t,r=$t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Kp=class{constructor(){this.ve=0,this.Ce=iP(),this.Fe=$t.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ee(),t=Ee(),r=Ee();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Y(38017,{changeType:o})}}),new Sl(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=iP()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},_w=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=wi(),this.je=Np(),this.Je=Np(),this.He=new Xe(me)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(lw(o))if(r===0){let s=new z(o.path);this.Xe(t,s,rr.newNoDocument(s,he.min()))}else Ne(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}tP?.ct(function(h,p,g,y,_){var A,R,x,q,Z,Ce;let tt={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Me=p.unchangedNames;return Me&&(tt.bloomFilter={applied:_===0,hashCount:(A=Me?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(q=(x=(R=Me?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&q!==void 0?q:0,padding:(Ce=(Z=Me?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&Ce!==void 0?Ce:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),tt}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=_i(r).toUint8Array()}catch(u){if(u instanceof jp)return po("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new vw(s,i,o)}catch(u){return po(u instanceof ys?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&lw(a.target)){let u=new z(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,rr.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Ee();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new zp(e,t,this.He,this.ze,r);return this.ze=wi(),this.je=Np(),this.Je=Np(),this.He=new Xe(me),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Kp,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Tt(me),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Tt(me),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Kp),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Np(){return new Xe(z.comparator)}function iP(){return new Xe(z.comparator)}var B5={asc:"ASCENDING",desc:"DESCENDING"},$5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H5={and:"AND",or:"OR"},Ew=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Iw(n,e){return n.useProto3Json||yg(e)?e:{value:e}}function Qp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function q5(n,e){return Qp(n,e.toTimestamp())}function xr(n){return Ne(!!n,49232),he.fromTimestamp(function(t){let r=vi(t);return new ze(r.seconds,r.nanos)}(n))}function jD(n,e){return ww(n,e).canonicalString()}function ww(n,e){let t=function(i){return new Be(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function yx(n){let e=Be.fromString(n);return Ne(wx(e),10190,{key:e.toString()}),e}function Dw(n,e){return jD(n.databaseId,e.path)}function jI(n,e){let t=yx(e);if(t.get(1)!==n.databaseId.projectId)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new F(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(_x(t))}function vx(n,e){return jD(n.databaseId,e)}function z5(n){let e=yx(n);return e.length===4?Be.emptyPath():_x(e)}function bw(n){return new Be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _x(n){return Ne(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function oP(n,e,t){return{name:Dw(n,e),fields:t.value.mapValue.fields}}function G5(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Y(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Ne(h===void 0||typeof h=="string",58123),$t.fromBase64String(h||"")):(Ne(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),$t.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:gx(l.code);return new F(h,l.message||"")}(s);t=new Wp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=jI(n,r.document.name),o=xr(r.document.updateTime),s=r.document.createTime?xr(r.document.createTime):he.min(),a=new bn({mapValue:{fields:r.document.fields}}),u=rr.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new nc(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=jI(n,r.document),o=r.readTime?xr(r.readTime):he.min(),s=rr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new nc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=jI(n,r.document),o=r.removedTargetIds||[];t=new nc([],o,i,null)}else{if(!("filter"in e))return Y(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new yw(i,o),a=r.targetId;t=new Gp(a,s)}}return t}function W5(n,e){let t;if(e instanceof Cs)t={update:oP(n,e.key,e.value)};else if(e instanceof Cl)t={delete:Dw(n,e.key)};else if(e instanceof Or)t={update:oP(n,e.key,e.data),updateMask:nq(e.fieldMask)};else{if(!(e instanceof fw))return Y(16599,{Rt:e.type});t={verify:Dw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof uc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof bs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ts)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof lc)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Y(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:q5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Y(27497)}(n,e.precondition)),t}function K5(n,e){return n&&n.length>0?(Ne(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?xr(i.updateTime):xr(o);return s.isEqual(he.min())&&(s=xr(o)),new hw(s,i.transformResults||[])}(t,e))):[]}function Q5(n,e){return{documents:[vx(n,e.path)]}}function Y5(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=vx(n,i);let o=function(l){if(l.length!==0)return Ix(ir.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Ja(g.field),direction:X5(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Iw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:t,parent:i}}function Z5(n){let e=z5(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ne(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let g=Ex(p);return g instanceof ir&&XP(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(_){return new Ds(Xa(_.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,yg(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new mo(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new mo(y,g)}(t.endAt)),b5(e,i,s,o,a,"F",u,l)}function J5(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ex(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Xa(t.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Xa(t.unaryFilter.field);return ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Xa(t.unaryFilter.field);return ft.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Xa(t.unaryFilter.field);return ft.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(n):n.fieldFilter!==void 0?function(t){return ft.create(Xa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ir.create(t.compositeFilter.filters.map(r=>Ex(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(t.compositeFilter.op))}(n):Y(30097,{filter:n})}function X5(n){return B5[n]}function eq(n){return $5[n]}function tq(n){return H5[n]}function Ja(n){return{fieldPath:n.canonicalString()}}function Xa(n){return Tn.fromServerFormat(n.fieldPath)}function Ix(n){return n instanceof ft?function(t){if(t.op==="=="){if(GM(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NAN"}};if(zM(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(GM(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NOT_NAN"}};if(zM(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ja(t.field),op:eq(t.op),value:t.value}}}(n):n instanceof ir?function(t){let r=t.getFilters().map(i=>Ix(i));return r.length===1?r[0]:{compositeFilter:{op:tq(t.op),filters:r}}}(n):Y(54877,{filter:n})}function nq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Al=class n{constructor(e,t,r,i,o=he.min(),s=he.min(),a=$t.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Tw=class{constructor(e){this.gt=e}};function rq(n){let e=Z5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qp(e,e.limit,"L"):e}var Yp=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(qe(e.integerValue));else if("doubleValue"in e){let r=qe(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Dl(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=vi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(_i(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?YP(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):QP(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Y(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=oc,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(qe(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),z.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Yp.Ut=new Yp;var Cw=class{constructor(){this.Dn=new Sw}addToCollectionParentIndex(e,t){return this.Dn.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(ws.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},Sw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tt(Be.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt(Be.comparator)).toArray()}};var Rue=new Uint8Array(0);var sP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dx=41943040,On=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(Dx,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);var Rl=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var aP="LruGarbageCollector",iq=1048576;function cP([n,e],[t,r]){let i=me(n,t);return i===0?me(e,r):i}var Aw=class{constructor(e){this.Tr=e,this.buffer=new Tt(cP),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();cP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Rw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(aP,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){vc(t)?V(aP,"Ignoring IndexedDB error during garbage collection: ",t):await yc(t)}await this.Rr(3e5)})}},Nw=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return P.resolve(RD.ue);let r=new Aw(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(sP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sP):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ya()<=_e.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function oq(n,e){return new Nw(n,e)}var Mw=class{constructor(){this.changes=new Ii(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Pw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var xw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&El(r.mutation,i,Fn.empty(),ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ee()){let i=ms();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=yl();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ms();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ee()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=wi(),s=_l(),a=function(){return _l()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Or)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),El(h.mutation,l,h.mutation.getFieldMask(),ze.now())):s.set(l.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Pw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=_l(),i=new Xe((s,a)=>s-a),o=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Fn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||Ee()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=ax();h.forEach(g=>{if(!o.has(g)){let y=fx(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):LD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):P.resolve(ms()),a=wl,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Ee())).next(h=>({batchId:a,changes:sx(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=yl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=yl();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=function(p,g){return new Ei(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,rr.newInvalidDocument(h)))});let a=yl();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&El(h.mutation,l,Fn.empty(),ze.now()),Ig(t,l)&&(a=a.insert(u,l))}),a})}};var kw=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return P.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:xr(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:rq(i.bundledQuery),readTime:xr(i.readTime)}}(t)),P.resolve()}};var Ow=class{constructor(){this.overlays=new Xe(z.comparator),this.kr=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ms();return P.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=ms(),o=t.length+1,s=new z(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Xe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ms(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ms(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new mw(t,r));let o=this.kr.get(t);o===void 0&&(o=Ee(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var Fw=class{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var Nl=class{constructor(){this.qr=new Tt(ht.Qr),this.$r=new Tt(ht.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new ht(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new ht(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new z(new Be([])),r=new ht(t,e),i=new ht(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new z(new Be([])),r=new ht(t,e),i=new ht(t,e+1),o=Ee();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ht(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ht=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return z.comparator(e.key,t.key)||me(e.Hr,t.Hr)}static Ur(e,t){return me(e.Hr,t.Hr)||z.comparator(e.key,t.key)}};var Lw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Tt(ht.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new pw(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new ht(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,t){return P.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?ND:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ht(t,0),i=new ht(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tt(me);return t.forEach(i=>{let o=new ht(i,0),s=new ht(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new ht(new z(o),0),a=new Tt(me);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ne(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(t.mutations,i=>{let o=new ht(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new ht(t,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Vw=class{constructor(e){this.ni=e,this.docs=function(){return new Xe(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():rr.newInvalidDocument(t))}getEntries(e,t){let r=wi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():rr.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=wi(),s=t.path,a=new z(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||o5(i5(h),r)<=0||(i.has(h.key)||Ig(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Y(9500)}ri(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new jw(this)}getSize(e){return P.resolve(this.size)}},jw=class extends Mw{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var Uw=class{constructor(e){this.persistence=e,this.ii=new Ii(t=>kD(t),OD),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.si=0,this.oi=new Nl,this.targetCount=0,this._i=Rl.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),P.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Rl(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.hr(t),P.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.oi.containsKey(t))}};var Zp=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new RD(0),this.ci=!1,this.ci=!0,this.li=new Fw,this.referenceDelegate=e(this),this.hi=new Uw(this),this.indexManager=new Cw,this.remoteDocumentCache=function(i){return new Vw(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new Tw(t),this.Ti=new kw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ow,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Lw(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new Bw(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},Bw=class extends ZI{constructor(e){super(),this.currentSequenceNumber=e}},$w=class n{constructor(e){this.persistence=e,this.Ai=new Nl,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Y(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),P.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=z.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,he.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return P.or([()=>P.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Jp=class n{constructor(e,t){this.persistence=e,this.gi=new Ii(r=>u5(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=oq(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return P.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,he.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),P.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),P.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pp(e.data.value)),t}Sr(e,t,r){return P.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Hw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ee(),i=Ee();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var qw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var zw=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return eN()?8:a5(Dt())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new qw;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ya()<=_e.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Ya()<=_e.DEBUG&&V("QueryEngine","Query:",Za(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ya()<=_e.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(t))):P.resolve())}ps(e,t){if(YM(t))return P.resolve(null);let r=Mr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=qp(t,null,"F"),r=Mr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ee(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,qp(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return YM(t)||i.isEqual(he.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?P.resolve(null):(Ya()<=_e.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Za(t)),this.vs(e,s,t,r5(i,wl)).next(a=>a))})}bs(e,t){let r=new Tt(ix(e));return t.forEach((i,o)=>{Ig(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Ya()<=_e.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Za(t)),this.gs.getDocumentsMatchingQuery(e,t,ws.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var UD="LocalStore",sq=3e8,Gw=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Xe(me),this.Ms=new Ii(o=>kD(o),OD),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function aq(n,e,t,r){return new Gw(n,e,t,r)}async function bx(n,e){let t=ue(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=Ee();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function cq(n,e){let t=ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),y=P.resolve();return g.forEach(_=>{y=y.next(()=>h.getEntry(u,_)).next(A=>{let R=l.docVersions.get(_);Ne(R!==null,48541),A.version.compareTo(R)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ee();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Tx(n){let e=ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function uq(n,e){let t=ue(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken($t.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,R,x){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=sq?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=wi(),l=Ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(lq(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(he.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function lq(n,e,t){let r=Ee(),i=Ee();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=wi();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(he.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(UD,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function dq(n,e){let t=ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ND),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hq(n,e){let t=ue(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Al(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Ww(n,e,t){let r=ue(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!vc(s))throw s;V(UD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function uP(n,e,t){let r=ue(n),i=he.min(),o=Ee();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=ue(u),g=p.Ms.get(h);return g!==void 0?P.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)}(r,s,Mr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:he.min(),t?o:Ee())).next(a=>(fq(r,C5(e),a),{documents:a,qs:o})))}function fq(n,e,t){let r=n.xs.get(e)||he.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Xp=class{constructor(){this.activeTargetIds=P5()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Kw=class{constructor(){this.Fo=new Xp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Xp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Qw=class{xo(e){}shutdown(){}};var lP="ConnectivityMonitor",eg=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(lP,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(lP,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Mp=null;function Yw(){return Mp===null?Mp=function(){return 268435456+Math.round(2147483648*Math.random())}():Mp++,"0x"+Mp.toString(16)}var UI="RestConnection",pq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Zw=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Up?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=Yw(),a=this.Go(e,t.toUriEncodedString());V(UI,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Ir(l);return this.jo(e,a,u,r,h).then(p=>(V(UI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw po(UI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=pq[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var Jw=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Bt="WebChannelConnection",Xw=class extends Zw{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=Yw();return new Promise((a,u)=>{let l=new kI;l.setWithCredentials(!0),l.listenOnce(OI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ml.NO_ERROR:let p=l.getResponseJson();V(Bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case ml.TIMEOUT:V(Bt,`RPC '${e}' ${s} timed out`),u(new F(M.DEADLINE_EXCEEDED,"Request time out"));break;case ml.HTTP_ERROR:let g=l.getStatus();if(V(Bt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let _=y?.error;if(_&&_.status&&_.message){let A=function(x){let q=x.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(q)>=0?q:M.UNKNOWN}(_.status);u(new F(A,_.message))}else u(new F(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new F(M.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(Bt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(Bt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=Yw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=VI(),a=LI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(Bt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,_=new Jw({Ho:R=>{y?V(Bt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(V(Bt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),V(Bt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),A=(R,x,q)=>{R.listen(x,Z=>{try{q(Z)}catch(Ce){setTimeout(()=>{throw Ce},0)}})};return A(p,Qa.EventType.OPEN,()=>{y||(V(Bt,`RPC '${e}' stream ${i} transport opened.`),_.s_())}),A(p,Qa.EventType.CLOSE,()=>{y||(y=!0,V(Bt,`RPC '${e}' stream ${i} transport closed`),_.__(),this.I_(p))}),A(p,Qa.EventType.ERROR,R=>{y||(y=!0,po(Bt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),_.__(new F(M.UNAVAILABLE,"The operation could not be completed")))}),A(p,Qa.EventType.MESSAGE,R=>{var x;if(!y){let q=R.data[0];Ne(!!q,16349);let Z=q,Ce=Z?.error||((x=Z[0])===null||x===void 0?void 0:x.error);if(Ce){V(Bt,`RPC '${e}' stream ${i} received error:`,Ce);let tt=Ce.status,Me=function(I){let w=dt[I];if(w!==void 0)return gx(w)}(tt),D=Ce.message;Me===void 0&&(Me=M.INTERNAL,D="Unknown error status: "+tt+" with message "+Ce.message),y=!0,_.__(new F(Me,D)),p.close()}else V(Bt,`RPC '${e}' stream ${i} received:`,q),_.a_(q)}}),A(a,FI.STAT_EVENT,R=>{R.stat===Ap.PROXY?V(Bt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Ap.NOPROXY&&V(Bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.o_()},0),_}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function BI(){return typeof document<"u"?document:null}function wg(n){return new Ew(n,!0)}var tg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var dP="PersistentStream",ng=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new tg(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(yi(t.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new F(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return V(dP,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(V(dP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},eD=class extends ng{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=G5(this.serializer,e),r=function(o){if(!("targetChange"in o))return he.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?he.min():s.readTime?xr(s.readTime):he.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=bw(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=lw(u)?{documents:Q5(o,u)}:{query:Y5(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=mx(o,s.resumeToken);let l=Iw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(he.min())>0){a.readTime=Qp(o,s.snapshotVersion.toTimestamp());let l=Iw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=J5(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=bw(this.serializer),t.removeTarget=e,this.k_(t)}},tD=class extends ng{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=K5(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=bw(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>W5(this.serializer,r))};this.k_(t)}};var nD=class{},rD=class extends nD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,ww(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(M.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,ww(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},iD=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(yi(t),this._a=!1):V("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ss="RemoteStore",oD=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{As(this)&&(V(Ss,"Restarting streams for network reachability change."),await async function(u){let l=ue(u);l.Ia.add(4),await Fl(l),l.Aa.set("Unknown"),l.Ia.delete(4),await Dg(l)}(this))})}),this.Aa=new iD(r,i)}};async function Dg(n){if(As(n))for(let e of n.da)await e(!0)}async function Fl(n){for(let e of n.da)await e(!1)}function Cx(n,e){let t=ue(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),qD(t)?HD(t):_c(t).x_()&&$D(t,e))}function BD(n,e){let t=ue(n),r=_c(t);t.Ta.delete(e),r.x_()&&Sx(t,e),t.Ta.size===0&&(r.x_()?r.B_():As(t)&&t.Aa.set("Unknown"))}function $D(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_c(n).H_(e)}function Sx(n,e){n.Ra.$e(e),_c(n).Y_(e)}function HD(n){n.Ra=new _w({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),_c(n).start(),n.Aa.aa()}function qD(n){return As(n)&&!_c(n).M_()&&n.Ta.size>0}function As(n){return ue(n).Ia.size===0}function Ax(n){n.Ra=void 0}async function gq(n){n.Aa.set("Online")}async function mq(n){n.Ta.forEach((e,t)=>{$D(n,e)})}async function yq(n,e){Ax(n),qD(n)?(n.Aa.la(e),HD(n)):n.Aa.set("Unknown")}async function vq(n,e,t){if(n.Aa.set("Online"),e instanceof Wp&&e.state===2&&e.cause)try{await async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))}(n,e)}catch(r){V(Ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rg(n,r)}else if(e instanceof nc?n.Ra.Ye(e):e instanceof Gp?n.Ra.it(e):n.Ra.et(e),!t.isEqual(he.min()))try{let r=await Tx(n.localStore);t.compareTo(r)>=0&&await function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken($t.EMPTY_BYTE_STRING,h.snapshotVersion)),Sx(o,u);let p=new Al(h.target,u,l,h.sequenceNumber);$D(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){V(Ss,"Failed to raise snapshot:",r),await rg(n,r)}}async function rg(n,e,t){if(!vc(e))throw e;n.Ia.add(1),await Fl(n),n.Aa.set("Offline"),t||(t=()=>Tx(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{V(Ss,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Dg(n)})}function Rx(n,e){return e().catch(t=>rg(n,t,e))}async function bg(n){let e=ue(n),t=yo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ND;for(;_q(e);)try{let i=await dq(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Eq(e,i)}catch(i){await rg(e,i)}Nx(e)&&Mx(e)}function _q(n){return As(n)&&n.Pa.length<10}function Eq(n,e){n.Pa.push(e);let t=yo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function Nx(n){return As(n)&&!yo(n).M_()&&n.Pa.length>0}function Mx(n){yo(n).start()}async function Iq(n){yo(n).na()}async function wq(n){let e=yo(n);for(let t of n.Pa)e.X_(t.mutations)}async function Dq(n,e,t){let r=n.Pa.shift(),i=gw.from(r,e,t);await Rx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await bg(n)}async function bq(n,e){e&&yo(n).Z_&&await async function(r,i){if(function(s){return j5(s)&&s!==M.ABORTED}(i.code)){let o=r.Pa.shift();yo(r).N_(),await Rx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await bg(r)}}(n,e),Nx(n)&&Mx(n)}async function hP(n,e){let t=ue(n);t.asyncQueue.verifyOperationInProgress(),V(Ss,"RemoteStore received new credentials");let r=As(t);t.Ia.add(3),await Fl(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Dg(t)}async function Tq(n,e){let t=ue(n);e?(t.Ia.delete(2),await Dg(t)):e||(t.Ia.add(2),await Fl(t),t.Aa.set("Unknown"))}function _c(n){return n.Va||(n.Va=function(t,r,i){let o=ue(t);return o.ia(),new eD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:gq.bind(null,n),e_:mq.bind(null,n),n_:yq.bind(null,n),J_:vq.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),qD(n)?HD(n):n.Aa.set("Unknown")):(await n.Va.stop(),Ax(n))})),n.Va}function yo(n){return n.ma||(n.ma=function(t,r,i){let o=ue(t);return o.ia(),new tD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Iq.bind(null,n),n_:bq.bind(null,n),ea:wq.bind(null,n),ta:Dq.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await bg(n)):(await n.ma.stop(),n.Pa.length>0&&(V(Ss,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var sD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function zD(n,e){if(yi("AsyncQueue",`${e}: ${n}`),vc(n))return new F(M.UNAVAILABLE,`${e}: ${n}`);throw n}var ig=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=yl(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var og=class{constructor(){this.fa=new Xe(z.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Y(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},hc=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,ig.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var aD=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},cD=class{constructor(){this.queries=fP(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ue(t),o=i.queries;i.queries=fP(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new F(M.ABORTED,"Firestore shutting down"))}};function fP(){return new Ii(n=>rx(n),Eg)}async function Px(n,e){let t=ue(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new aD,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(i,!0);break;case 1:o.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=zD(s,`Initialization of query '${Za(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&GD(t)}async function xx(n,e){let t=ue(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Cq(n,e){let t=ue(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&GD(t)}function Sq(n,e,t){let r=ue(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function GD(n){n.Da.forEach(e=>{e.next()})}var uD,pP;(pP=uD||(uD={})).Fa="default",pP.Cache="cache";var sg=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new hc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==uD.Cache}};var ag=class{constructor(e){this.key=e}},cg=class{constructor(e){this.key=e}},lD=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ee(),this.mutatedKeys=Ee(),this.Xa=ix(e),this.eu=new ig(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new og,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Ig(this.query,p)?p:null,_=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?_!==A&&(r.track({type:3,doc:y}),R=!0):this.iu(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,_){let A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{At:R})}};return A(y)-A(_)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new hc(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new og,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ee(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new cg(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new ag(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ee();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return hc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},WD="SyncEngine",dD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},hD=class{constructor(e){this.key=e,this.lu=!1}},fD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ii(a=>rx(a),Eg),this.Tu=new Map,this.Iu=new Set,this.du=new Xe(z.comparator),this.Eu=new Map,this.Au=new Nl,this.Ru={},this.Vu=new Map,this.mu=Rl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function Aq(n,e,t=!0){let r=jx(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await kx(r,e,t,!0),i}async function Rq(n,e){let t=jx(n);await kx(t,e,!0,!1)}async function kx(n,e,t,r){let i=await hq(n.localStore,Mr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await Nq(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Cx(n.remoteStore,i),a}async function Nq(n,e,t,r,i){n.gu=(p,g,y)=>async function(A,R,x,q){let Z=R.view.nu(x);Z.Ds&&(Z=await uP(A.localStore,R.query,!1).then(({documents:D})=>R.view.nu(D,Z)));let Ce=q&&q.targetChanges.get(R.targetId),tt=q&&q.targetMismatches.get(R.targetId)!=null,Me=R.view.applyChanges(Z,A.isPrimaryClient,Ce,tt);return mP(A,R.targetId,Me._u),Me.snapshot}(n,p,g,y);let o=await uP(n.localStore,e,!0),s=new lD(e,o.qs),a=s.nu(o.documents),u=Sl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);mP(n,t,l._u);let h=new dD(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function Mq(n,e,t){let r=ue(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Eg(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ww(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&BD(r.remoteStore,i.targetId),pD(r,i.targetId)}).catch(yc)):(pD(r,i.targetId),await Ww(r.localStore,i.targetId,!0))}async function Pq(n,e){let t=ue(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),BD(t.remoteStore,r.targetId))}async function xq(n,e,t){let r=Uq(n);try{let i=await function(s,a){let u=ue(s),l=ze.now(),h=a.reduce((y,_)=>y.add(_.key),Ee()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=wi(),A=Ee();return u.Os.getEntries(y,h).next(R=>{_=R,_.forEach((x,q)=>{q.isValidDocument()||(A=A.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,_)).next(R=>{p=R;let x=[];for(let q of a){let Z=V5(q,p.get(q.key).overlayedDocument);Z!=null&&x.push(new Or(q.key,Z,ZP(Z.value.mapValue),Pr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,x,a)}).next(R=>{g=R;let x=R.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,R.batchId,x)})}).then(()=>({batchId:g.batchId,changes:sx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Xe(me)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,t),await Ll(r,i.changes),await bg(r.remoteStore)}catch(i){let o=zD(i,"Failed to persist write");t.reject(o)}}async function Ox(n,e){let t=ue(n);try{let r=await uq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ne(s.lu,14607):i.removedDocuments.size>0&&(Ne(s.lu,42227),s.lu=!1))}),await Ll(t,r,e)}catch(r){await yc(r)}}function gP(n,e,t){let r=ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=ue(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&GD(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kq(n,e,t){let r=ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Xe(z.comparator);s=s.insert(o,rr.newNoDocument(o,he.min()));let a=Ee().add(o),u=new zp(he.min(),new Map,new Xe(me),s,a);await Ox(r,u),r.du=r.du.remove(o),r.Eu.delete(e),KD(r)}else await Ww(r.localStore,e,!1).then(()=>pD(r,e,t)).catch(yc)}async function Oq(n,e){let t=ue(n),r=e.batch.batchId;try{let i=await cq(t.localStore,e);Lx(t,r,null),Fx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ll(t,i)}catch(i){await yc(i)}}async function Fq(n,e,t){let r=ue(n);try{let i=await function(s,a){let u=ue(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ne(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);Lx(r,e,t),Fx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ll(r,i)}catch(i){await yc(i)}}function Fx(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function Lx(n,e,t){let r=ue(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function pD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||Vx(n,r)})}function Vx(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(BD(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),KD(n))}function mP(n,e,t){for(let r of t)r instanceof ag?(n.Au.addReference(r.key,e),Lq(n,r)):r instanceof cg?(V(WD,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||Vx(n,r.key)):Y(19791,{yu:r})}function Lq(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(V(WD,"New document in limbo: "+t),n.Iu.add(r),KD(n))}function KD(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new z(Be.fromString(e)),r=n.mu.next();n.Eu.set(r,new hD(t)),n.du=n.du.insert(t,r),Cx(n.remoteStore,new Al(Mr(FD(t.path)),r,"TargetPurposeLimboResolution",RD.ue))}}async function Ll(n,e,t){let r=ue(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Hw.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await async function(u,l){let h=ue(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,g=>P.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>P.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!vc(p))throw p;V(UD,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),_=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(_);h.Fs=h.Fs.insert(g,A)}}}(r.localStore,o))}async function Vq(n,e){let t=ue(n);if(!t.currentUser.isEqual(e)){V(WD,"User change. New user:",e.toKey());let r=await bx(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new F(M.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ll(t,r.Bs)}}function jq(n,e){let t=ue(n),r=t.Eu.get(e);if(r&&r.lu)return Ee().add(r.key);{let i=Ee(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function jx(n){let e=ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ox.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kq.bind(null,e),e.hu.J_=Cq.bind(null,e.eventManager),e.hu.pu=Sq.bind(null,e.eventManager),e}function Uq(n){let e=ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Oq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fq.bind(null,e),e}var Ux=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=wg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return aq(this.persistence,new zw,t.initialUser,this.serializer)}Du(t){return new Zp($w.Vi,this.serializer)}bu(t){return new Kw}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),gD=class extends Ux{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ne(this.persistence.referenceDelegate instanceof Jp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Rw(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new Zp(r=>Jp.Vi(r,t),this.serializer)}};var Bq=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>gP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vq.bind(null,this.syncEngine),await Tq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new cD}()}createDatastore(t){let r=wg(t.databaseInfo.databaseId),i=function(s){return new Xw(s)}(t.databaseInfo);return function(s,a,u,l){return new rD(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new oD(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>gP(this.syncEngine,r,0),function(){return eg.C()?new eg:new Qw}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let g=new fD(o,s,a,u,l,h);return p&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(o){let s=ue(o);V(Ss,"RemoteStore shutting down."),s.Ia.add(5),await Fl(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var ug=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var vo="FirestoreClient",mD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bt.UNAUTHENTICATED,this.clientId=Il.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{V(vo,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(V(vo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=zD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function $I(n,e){n.asyncQueue.verifyOperationInProgress(),V(vo,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await bx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{po("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{po("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function yP(n,e){n.asyncQueue.verifyOperationInProgress();let t=await $q(n);V(vo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>hP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>hP(e.remoteStore,i)),n._onlineComponents=e}async function $q(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V(vo,"Using user provided OfflineComponentProvider");try{await $I(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;po("Error using user provided cache. Falling back to memory cache: "+t),await $I(n,new Ux)}}else V(vo,"Using default OfflineComponentProvider"),await $I(n,new gD(void 0));return n._offlineComponents}async function Bx(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(V(vo,"Using user provided OnlineComponentProvider"),await yP(n,n._uninitializedComponentsProvider._online)):(V(vo,"Using default OnlineComponentProvider"),await yP(n,new Bq))),n._onlineComponents}function Hq(n){return Bx(n).then(e=>e.syncEngine)}async function yD(n){let e=await Bx(n),t=e.eventManager;return t.onListen=Aq.bind(null,e.syncEngine),t.onUnlisten=Mq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Rq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Pq.bind(null,e.syncEngine),t}function qq(n,e,t={}){let r=new Rr;return n.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){let h=new ug({next:g=>{h.Ou(),s.enqueueAndForget(()=>xx(o,p)),g.fromCache&&u.source==="server"?l.reject(new F(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new sg(a,h,{includeMetadataChanges:!0,ka:!0});return Px(o,p)}(await yD(n),n.asyncQueue,e,t,r)),r.promise}function $x(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var vP=new Map;var Hx="firestore.googleapis.com",_P=!0,lg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hx,this.ssl=_P}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:_P;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Dx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iq)throw new F(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}t5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$x((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},fc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HI;switch(r.type){case"firstParty":return new WI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=vP.get(t);r&&(V("ComponentProvider","Removing Datastore"),vP.delete(t),r.terminate())}(this),Promise.resolve()}};function qx(n,e,t,r={}){var i;n=Ln(n,fc);let o=Ir(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Ba(`https://${u}`),$a("Firestore",!0)),s.host!==Hx&&s.host!==u&&po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!wr(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=bt.MOCK_USER;else{h=KR(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new F(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new bt(g)}n._authCredentials=new qI(new Op(h,p))}}var Fr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ct=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ol(t,n._jsonSchema))return new n(e,r||null,new z(Be.fromString(t.referencePath)))}};Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:pt("string",Ct._jsonSchemaVersion),referencePath:pt("string")};var uo=class n extends Fr{constructor(e,t,r){super(e,t,FD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function zx(n,e,...t){if(n=Ue(n),SP("collection","path",e),n instanceof fc){let r=Be.fromString(e,...t);return VM(r),new uo(n,null,r)}{if(!(n instanceof Ct||n instanceof uo))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Be.fromString(e,...t));return VM(r),new uo(n.firestore,null,r)}}function QD(n,e,...t){if(n=Ue(n),arguments.length===1&&(e=Il.newId()),SP("doc","path",e),n instanceof fc){let r=Be.fromString(e,...t);return LM(r),new Ct(n,null,new z(r))}{if(!(n instanceof Ct||n instanceof uo))throw new F(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Be.fromString(e,...t));return LM(r),new Ct(n.firestore,n instanceof uo?n.converter:null,new z(r))}}var EP="AsyncQueue",dg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new tg(this,"async_queue_retry"),this.oc=()=>{let r=BI();r&&V(EP,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=BI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=BI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Rr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!vc(e))throw e;V(EP,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,yi("INTERNAL UNHANDLED ERROR: ",IP(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=sD.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Y(47125,{hc:IP(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function IP(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function wP(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Lr=class extends fc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new dg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new dg(e),this._firestoreClient=void 0,await e}}};function Gx(n,e){let t=typeof n=="object"?n:ui(),r=typeof n=="string"?n:e||Up,i=to(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Xf("firestore");o&&qx(i,...o)}return i}function YD(n){if(n._terminated)throw new F(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zq(n),n._firestoreClient}function zq(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new JI(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,$x(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new mD(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var lo=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n($t.fromBase64String(e))}catch(t){throw new F(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ol(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};lo._jsonSchemaVersion="firestore/bytes/1.0",lo._jsonSchema={type:pt("string",lo._jsonSchemaVersion),bytes:pt("string")};var pc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new F(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ml=class{constructor(e){this._methodName=e}};var ho=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Ol(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ho._jsonSchemaVersion="firestore/geoPoint/1.0",ho._jsonSchema={type:pt("string",ho._jsonSchemaVersion),latitude:pt("number"),longitude:pt("number")};var fo=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ol(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new F(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};fo._jsonSchemaVersion="firestore/vectorValue/1.0",fo._jsonSchema={type:pt("string",fo._jsonSchemaVersion),vectorValues:pt("object")};var Gq=/^__.*__$/,vD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cs(e,this.data,t,this.fieldTransforms)}},hg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Or(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Wx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ec:n})}}var _D=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return pg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Wx(this.Ec)&&Gq.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},ED=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||wg(e)}Dc(e,t,r,i=!1){return new _D({Ec:e,methodName:t,bc:r,path:Tn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Vl(n){let e=n._freezeSettings(),t=wg(n._databaseId);return new ED(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Kx(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);ZD("Data must be an object, but it was:",s,r);let a=Yx(r,s),u,l;if(o.merge)u=new Fn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=ID(e,p,t);if(!s.contains(g))throw new F(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Jx(h,g)||h.push(g)}u=new Fn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new vD(new bn(a),u,l)}var fg=class n extends Ml{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Wq(n,e,t,r){let i=n.Dc(1,e,t);ZD("Data must be an object, but it was:",i,r);let o=[],s=bn.empty();_o(r,(u,l)=>{let h=JD(e,u,t);l=Ue(l);let p=i.gc(h);if(l instanceof fg)o.push(h);else{let g=jl(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Fn(o);return new hg(s,a,i.fieldTransforms)}function Kq(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[ID(e,r,t)],u=[i];if(o.length%2!=0)throw new F(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(ID(e,o[g])),u.push(o[g+1]);let l=[],h=bn.empty();for(let g=a.length-1;g>=0;--g)if(!Jx(l,a[g])){let y=a[g],_=u[g];_=Ue(_);let A=s.gc(y);if(_ instanceof fg)l.push(y);else{let R=jl(_,A);R!=null&&(l.push(y),h.set(y,R))}}let p=new Fn(l);return new hg(h,p,s.fieldTransforms)}function Qx(n,e,t,r=!1){return jl(t,n.Dc(r?4:3,e))}function jl(n,e){if(Zx(n=Ue(n)))return ZD("Unsupported field value:",e,n),Yx(n,e);if(n instanceof Ml)return function(r,i){if(!Wx(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=jl(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return x5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ze.fromDate(r);return{timestampValue:Qp(i.serializer,o)}}if(r instanceof ze){let o=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qp(i.serializer,o)}}if(r instanceof ho)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lo)return{bytesValue:mx(i.serializer,r._byteString)};if(r instanceof Ct){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof fo)return function(s,a){return{mapValue:{fields:{[MD]:{stringValue:PD},[oc]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return VD(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${mg(r)}`)}(n,e)}function Yx(n,e){let t={};return HP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(n,(r,i)=>{let o=jl(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Zx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ze||n instanceof ho||n instanceof lo||n instanceof Ct||n instanceof Ml||n instanceof fo)}function ZD(n,e,t){if(!Zx(t)||!AP(t)){let r=mg(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function ID(n,e,t){if((e=Ue(e))instanceof pc)return e._internalPath;if(typeof e=="string")return JD(n,e);throw pg("Field path arguments must be of type string or ",n,!1,void 0,t)}var Qq=new RegExp("[~\\*/\\[\\]]");function JD(n,e,t){if(e.search(Qq)>=0)throw pg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pc(...e.split("."))._internalPath}catch{throw pg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(M.INVALID_ARGUMENT,a+n+u)}function Jx(n,e){return n.some(t=>t.isEqual(e))}var Pl=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new wD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Tg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},wD=class extends Pl{data(){return super.data()}};function Tg(n,e){return typeof e=="string"?JD(n,e):e instanceof pc?e._internalPath:e._delegate._internalPath}function Xx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new F(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xl=class{},gc=class extends xl{};function ek(n,e,...t){let r=[];e instanceof xl&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof DD).length,a=o.filter(u=>u instanceof gg).length;if(s>1||s>0&&a>0)throw new F(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var gg=class n extends gc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return rk(e._query,t),new Fr(e.firestore,e.converter,dw(e._query,t))}_parse(e){let t=Vl(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){bP(p,h);let _=[];for(let A of p)_.push(DP(u,o,A));g={arrayValue:{values:_}}}else g=DP(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||bP(p,h),g=Qx(a,s,p,h==="in"||h==="not-in");return ft.create(l,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function tk(n,e,t){let r=e,i=Tg("where",n);return gg._create(i,r,t)}var DD=class n extends xl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ir.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)rk(s,u),s=dw(s,u)}(e._query,t),new Fr(e.firestore,e.converter,dw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var bD=class n extends gc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new F(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ds(o,s)}(e._query,this._field,this._direction);return new Fr(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ei(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function nk(n,e="asc"){let t=e,r=Tg("orderBy",n);return bD._create(r,t)}var TD=class n extends gc{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Fr(e.firestore,e.converter,qp(e._query,this._limit,this._limitType))}};function Ec(n){return n5("limit",n),TD._create("limit",n,"F")}var CD=class n extends gc{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Yq(e,this.type,this._docOrFields,this._inclusive);return new Fr(e.firestore,e.converter,function(i,o){return new Ei(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function XD(...n){return CD._create("startAfter",n,!1)}function Yq(n,e,t,r){if(t[0]=Ue(t[0]),t[0]instanceof Pl)return function(o,s,a,u,l){if(!u)throw new F(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of tc(o))if(p.field.isKeyField())h.push($p(s,u.key));else{let g=u.data.field(p.field);if(vg(g))throw new F(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=p.field.canonicalString();throw new F(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(g)}return new mo(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Vl(n.firestore);return function(s,a,u,l,h,p){let g=s.explicitOrderBy;if(h.length>g.length)throw new F(M.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let _=0;_<h.length;_++){let A=h[_];if(g[_].field.isKeyField()){if(typeof A!="string")throw new F(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!LD(s)&&A.indexOf("/")!==-1)throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let R=s.path.child(Be.fromString(A));if(!z.isDocumentKey(R))throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);let x=new z(R);y.push($p(a,x))}else{let R=Qx(u,l,A);y.push(R)}}return new mo(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function DP(n,e,t){if(typeof(t=Ue(t))=="string"){if(t==="")throw new F(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LD(e)&&t.indexOf("/")!==-1)throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Be.fromString(t));if(!z.isDocumentKey(r))throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $p(n,new z(r))}if(t instanceof Ct)return $p(n,t._key);throw new F(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mg(t)}.`)}function bP(n,e){if(!Array.isArray(n)||n.length===0)throw new F(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rk(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var SD=class{convertValue(e,t="none"){switch(go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return _o(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[oc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>qe(s.doubleValue));return new fo(o)}convertGeoPoint(e){return new ho(qe(e.latitude),qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=_g(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bl(e));default:return null}}convertTimestamp(e){let t=vi(e);return new ze(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Be.fromString(e);Ne(wx(r),9688,{name:e});let i=new Bp(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(t)||yi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function ik(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var vs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},_s=class n extends Pl{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Tg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};_s._jsonSchemaVersion="firestore/documentSnapshot/1.0",_s._jsonSchema={type:pt("string",_s._jsonSchemaVersion),bundleSource:pt("string","DocumentSnapshot"),bundleName:pt("string"),bundle:pt("string")};var rc=class extends _s{data(e={}){return super.data(e)}},Es=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new rc(this._firestore,this._userDataWriter,r.key,r,new vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new F(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new rc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new rc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Zq(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Il.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Zq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:n})}}Es._jsonSchemaVersion="firestore/querySnapshot/1.0",Es._jsonSchema={type:pt("string",Es._jsonSchemaVersion),bundleSource:pt("string","QuerySnapshot"),bundleName:pt("string"),bundle:pt("string")};var kl=class extends SD{constructor(e){super(),this.firestore=e}convertBytes(e){return new lo(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}};function ok(n){n=Ln(n,Fr);let e=Ln(n.firestore,Lr),t=YD(e),r=new kl(e);return Xx(n._query),qq(t,n._query).then(i=>new Es(e,r,n,i))}function sk(n,e,t){n=Ln(n,Ct);let r=Ln(n.firestore,Lr),i=ik(n.converter,e,t);return Cg(r,[Kx(Vl(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Pr.none())])}function ak(n,e,t,...r){n=Ln(n,Ct);let i=Ln(n.firestore,Lr),o=Vl(i),s;return s=typeof(e=Ue(e))=="string"||e instanceof pc?Kq(o,"updateDoc",n._key,e,t,r):Wq(o,"updateDoc",n._key,e),Cg(i,[s.toMutation(n._key,Pr.exists(!0))])}function ck(n){return Cg(Ln(n.firestore,Lr),[new Cl(n._key,Pr.none())])}function uk(n,e){let t=Ln(n.firestore,Lr),r=QD(n),i=ik(n.converter,e);return Cg(t,[Kx(Vl(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Pr.exists(!1))]).then(()=>r)}function eb(n,...e){var t,r,i;n=Ue(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||wP(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(wP(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Ct)l=Ln(n.firestore,Lr),h=FD(n._key.path),u={next:p=>{e[s]&&e[s](Jq(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Ln(n,Fr);l=Ln(p.firestore,Lr),h=p._query;let g=new kl(l);u={next:y=>{e[s]&&e[s](new Es(l,g,p,y))},error:e[s+1],complete:e[s+2]},Xx(n._query)}return function(g,y,_,A){let R=new ug(A),x=new sg(y,R,_);return g.asyncQueue.enqueueAndForget(async()=>Px(await yD(g),x)),()=>{R.Ou(),g.asyncQueue.enqueueAndForget(async()=>xx(await yD(g),x))}}(YD(l),h,a,u)}function Cg(n,e){return function(r,i){let o=new Rr;return r.asyncQueue.enqueueAndForget(async()=>xq(await Hq(r),i,o)),o.promise}(YD(n),e)}function Jq(n,e,t){let r=t.docs.get(e._key),i=new kl(n);return new _s(n,i,e._key,r,new vs(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){mc=i})(no),Dn(new Pt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Lr(new zI(r.getProvider("auth-internal")),new KI(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bp(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Oe(xM,kM,e),Oe(xM,kM,"esm2017")})();var Sg=function(){return Sg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Sg.apply(this,arguments)};var t6={includeMetadataChanges:!1};function tb(n,e){return e===void 0&&(e=t6),new te(function(t){var r=eb(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function lk(n){return tb(n,{includeMetadataChanges:!0})}function dk(n,e){return e===void 0&&(e={}),lk(n).pipe($(function(t){return nb(t,e)}))}function nb(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Sg(Sg({},r),(t={},t[e.idField]=n.id,t))}function hk(n){return tb(n,{includeMetadataChanges:!0}).pipe($(function(e){return e.docs}))}function fk(n,e){return e===void 0&&(e={}),hk(n).pipe($(function(t){return t.map(function(r){return nb(r,e)})}))}var Di=class{constructor(e){return e}},pk="firestore",rb=class{constructor(){return ro(pk)}};var ib=new U("angularfire2.firestore-instances");function n6(n,e){let t=ls(pk,n,e);return t&&new Di(t)}function r6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Di(r)}}var i6={provide:rb,deps:[[new Et,ib]]},o6={provide:Di,useFactory:n6,deps:[[new Et,ib],er]};function Ule(n,...e){return Oe("angularfire",Tr.full,"fst"),Zt([o6,i6,{provide:ib,useFactory:r6(n),multi:!0,deps:[Ie,je,Cr,li,[new Et,gs],[new Et,so],...e]}])}var Ul=We(fk,!0);var Bl=We(dk,!0);var Ag=We(uk,!0,2);var Ic=We(zx,!0,2);var wc=We(ck,!0,2);var Vn=We(QD,!0,2);var gk=We(ok,!0);var Ble=We(Gx,!0);var ob=We(nk,!0,2),sb=We(ek,!0,2);var mk=We(sk,!0,2);var Rg=We(ak,!0,2);var Dc=We(tk,!0,2);var Ng=class n{firestore=C(Di);promptsCollection=Ic(this.firestore,"prompts");categoriesCollection=Ic(this.firestore,"categories");tagsCollection=Ic(this.firestore,"tags");currCategories=Ae([]);currTags=Ae([]);promptsPaginados=Ae([]);promptsLoaded=Ae(!1);getPrompts(){let e=this.promptsPaginados();if(e.length>0&&this.promptsLoaded())return B(e);let t=e.length===0?[ze.fromDate(new Date),1e3]:[e[e.length-1].fecha_creacion,e[e.length-1].old_id??999];return this.getPromptsQuery([ob("fecha_creacion","desc"),ob("old_id","desc"),XD(...t),Ec(10)]).pipe(xe(r=>{r.length<=0&&this.promptsLoaded.set(!0),this.promptsPaginados.set([...e,...r])}),$(()=>this.promptsPaginados()))}getPromptBySlug(e){let t=this.promptsPaginados();if(t.length>0){let r=t.find(i=>i.slug===e);if(r)return B(r)}return this.getPromptsQuery([Dc("slug","==",e),Ec(1)]).pipe($(r=>r.length===0?null:r[0]))}getPromptById(e){let t=this.promptsPaginados();if(t.length>0){let r=t.find(i=>i.id===e);if(r)return B(r)}try{let r=Vn(this.firestore,`prompts/${e}`);return Bl(r,{idField:"id"})}catch(r){let i=`Error al obtener prompt ${e}: ${r}`;return console.error(i),null}}getPromptsByCategory(e){return this.getPromptsQuery([Dc("categoria","==",e)])}getPromptsByTag(e){return this.getPromptsQuery([Dc("tags","array-contains",e)])}getPromptsQuery(e){try{return Ul(sb(this.promptsCollection,...e),{idField:"id"})}catch(t){let r=`Error al obtener prompts: ${t}`;return console.error(r),B([])}}async createPrompt(e){try{let t=J(k({},e),{old_id:900,slug:e.titulo??this.generateSlug(e.titulo),fecha_creacion:new Date});return(await Ag(this.promptsCollection,t).then(i=>Bl(i,{idField:"id"}))).pipe(xe(i=>this.promptsPaginados.update(o=>[i,...o])),$(i=>i.id))}catch(t){let r=`Error al crear prompt: ${t}`;return console.error(r),B(null)}}async updatePrompt(e,t){try{let r=Vn(this.firestore,"prompts",e);return await Rg(r,J(k({},t),{fechaModificacion:new Date})),!0}catch(r){let i=`Error al actualizar prompt ${e}: ${r}`;return console.error(i),!1}}async deletePrompt(e){try{let t=Vn(this.firestore,"prompts",e);return await wc(t).then(()=>{this.promptsPaginados.update(r=>r.filter(i=>i.id!==e))}),!0}catch(t){let r=`Error al eliminar prompt ${e}: ${t}`;return console.error(r),!1}}async updateCategoryPromptCount(e,t){let r=Vn(this.firestore,"categories",e);await Rg(r,{prompt_count:t,fecha_edicion:new Date})}async createCategory(e){await Ag(this.categoriesCollection,J(k({},e),{slug:this.generateSlug(e.name||""),fecha_creacion:new Date})).then(t=>Bl(t,{idField:"id"})).then(t=>{t.pipe(Wt(1)).subscribe(r=>this.currCategories.update(i=>[...i,r]))})}async updateTagPromptCount(e,t){let r=Vn(this.firestore,"tags",e);await Rg(r,{prompt_count:t,fecha_edicion:new Date})}async createTag(e){await Ag(this.tagsCollection,J(k({},e),{slug:this.generateSlug(e.name||""),fecha_creacion:new Date})).then(t=>Bl(t,{idField:"id"})).then(t=>t.pipe(Wt(1)).subscribe(r=>this.currTags.update(i=>[...i,r])))}async deleteCategory(e){try{let t=Vn(this.firestore,"categories",e);return await wc(t).then(()=>{this.currCategories.update(r=>r.filter(i=>i.id!==e))}),!0}catch(t){let r=`Error al eliminar la categor\xEDa ${e}: ${t}`;return console.error(r),!1}}async deleteTag(e){try{let t=Vn(this.firestore,"tags",e);return await wc(t).then(()=>{this.currTags.update(r=>r.filter(i=>i.id!==e))}),!0}catch(t){let r=`Error al eliminar la etiqueta ${e}: ${t}`;return console.error(r),!1}}searchPrompts(e){try{let t=e.toLowerCase();return this.getPrompts().pipe($(r=>r.filter(i=>i.titulo.toLowerCase().includes(t)||i.prompt.toLowerCase().includes(t)||i.descripcion.toLowerCase().includes(t)||i.categoria.toLowerCase().includes(t)||i.tags.some(o=>o.toLowerCase().includes(t)))))}catch(t){let r=`Error en b\xFAsqueda: ${t}`;return console.error(r),B([])}}getCategories(){return this.currCategories().length>0?B(this.currCategories()):Ul(this.categoriesCollection,{idField:"id"}).pipe(xe(e=>this.currCategories.set(e)))}getTags(){return this.currTags().length>0?B(this.currTags()):Ul(this.tagsCollection,{idField:"id"}).pipe(xe(e=>this.currTags.set(e)))}getCategoryBySlug(e){return this.currCategories().length>0?B(this.currCategories().find(t=>t.slug===e)):this.getElementsQuery(this.categoriesCollection,[Dc("slug","==",e),Ec(1)]).pipe($(t=>t===null||t.length===0?null:t[0]))}getTagBySlug(e){return this.currTags().length>0?B(this.currTags().find(t=>t.slug===e)):this.getElementsQuery(this.tagsCollection,[Dc("slug","==",e),Ec(1)]).pipe($(t=>t===null||t.length===0?null:t[0]))}getElementsQuery(e,t){try{return Ul(sb(e,...t),{idField:"id"})}catch(r){let i=`Error al obtener: ${r}`;return console.error(i),B([])}}generateSlug(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var bi=class n{firestoreService=C(Ng);search(e){return this.searchInFirestore(e)}prompts(){return this.firestoreService.getPrompts()}categories(){return this.firestoreService.getCategories()}tags(){return this.firestoreService.getTags()}byCategorySlug(e){return this.firestoreService.getCategoryBySlug(e).pipe($(t=>{if(!t)throw new Error(`No se encontr\xF3 la categor\xEDa '${e}'.`);return this.byCategoryName(t.name)}))}byCategoryName(e){return this.firestoreService.getPromptsByCategory(e).pipe($(t=>({name:this.titleCase(e),prompts:t})))}byTagSlug(e){return this.firestoreService.getTagBySlug(e).pipe($(t=>{if(!t)throw new Error(`No se encontr\xF3 el tag '${e}'.`);return this.byTagName(t.name)}))}byTagName(e){return this.firestoreService.getPromptsByTag(e).pipe($(t=>({name:this.titleCase(e),prompts:t})))}async createPrompt(e){await this.firestoreService.createPrompt(e).then(t=>{this.addOrUpdateCategory(e.categoria),this.addOrUpdateTags(e.tags)})}addOrUpdateCategory(e){this.categories().subscribe(async t=>{let r=t.find(i=>i.name.toLowerCase()===e);if(r){let i=r.prompt_count+1;await this.firestoreService.updateCategoryPromptCount(r.id,i),r.prompt_count=i}else await this.firestoreService.createCategory({name:e,prompt_count:1,slug:""})})}addOrUpdateTags(e){this.tags().subscribe(async t=>{for(let r of e){let i=t.find(o=>o.name.toLowerCase()===r);if(i){let o=(i.prompt_count??0)+1;await this.firestoreService.updateTagPromptCount(i.id,o),i.prompt_count=o}else await this.firestoreService.createTag({name:r,prompt_count:1,slug:""})}})}async updateOrDeleteCategory(e){this.categories().subscribe(t=>{let r=t.find(i=>i.name.toLowerCase()===e);if(r){let i=r.prompt_count-1;i<=0?this.firestoreService.deleteCategory(r.id):(this.firestoreService.updateCategoryPromptCount(r.id,i),r.prompt_count=i)}})}async updateOrDeleteTags(e){this.tags().subscribe(t=>{for(let r of e){let i=t.find(o=>o.name.toLowerCase()===r);if(i){let o=i.prompt_count-1;o<=0?this.firestoreService.deleteTag(i.id):(this.firestoreService.updateTagPromptCount(i.id,o),i.prompt_count=o)}}})}deletePrompt(e){this.firestoreService.getPromptById(e)?.subscribe(async t=>{if(!t)return;let r=[...t.tags],i=t.categoria;await this.firestoreService.deletePrompt(e).then(()=>{this.updateOrDeleteCategory(i),this.updateOrDeleteTags(r)})})}deleteTag(e){return this.tags().pipe($(t=>t.find(r=>r.name.toLowerCase()===e.toLowerCase())),xe(t=>{if(!t)throw new Error(`No se encontr\xF3 el tag '${e}'.`);this.firestoreService.deleteTag(t.id)}))}deleteCategory(e){return this.categories().pipe($(t=>t.find(r=>r.name.toLowerCase()===e.toLowerCase())),xe(t=>{if(!t)throw new Error(`No se encontr\xF3 la categor\xEDa '${e}'.`);this.firestoreService.deleteCategory(t.id)}))}bySlug(e){return this.firestoreService.getPromptBySlug(e)}byId(e){return this.firestoreService.getPromptById(e)}searchInFirestore(e){try{return this.firestoreService.searchPrompts(e).pipe($(t=>{let r=t.map(i=>({item:i,foundIn:"titulo",position:0,relevanceScore:1}));return{search:e,found:r}}))}catch(t){return console.error("Error en b\xFAsqueda de Firestore:",t),B({search:e,found:[]})}}titleCase(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var s6="type.googleapis.com/google.protobuf.Int64Value",a6="type.googleapis.com/google.protobuf.UInt64Value";function Ek(n,e){let t={};for(let r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Mg(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Mg(e));if(typeof n=="function"||typeof n=="object")return Ek(n,e=>Mg(e));throw new Error("Data cannot be encoded in JSON: "+n)}function bc(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case s6:case a6:{let e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>bc(e)):typeof n=="function"||typeof n=="object"?Ek(n,e=>bc(e)):n}var lb="functions";var yk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},pn=class n extends on{constructor(e,t,r){super(`${lb}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,n.prototype)}};function c6(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Pg(n,e){let t=c6(n),r=t,i;try{let o=e&&e.error;if(o){let s=o.status;if(typeof s=="string"){if(!yk[s])return new pn("internal","internal");t=yk[s],r=s}let a=o.message;typeof a=="string"&&(r=a),i=o.details,i!==void 0&&(i=bc(i))}}catch{}return t==="ok"?null:new pn(t,r,i)}var ab=class{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,sn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{let e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){let t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}};var cb="us-central1",u6=/^data: (.*?)(?:\n|$)/;function l6(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new pn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}var ub=class{constructor(e,t,r,i,o=cb,s=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new ab(e,t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=cb}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function d6(n,e,t){let r=Ir(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Ba(n.emulatorOrigin),$a("Functions",!0))}function h6(n,e,t){let r=i=>p6(n,e,i,t||{});return r.stream=(i,o)=>m6(n,e,i,o),r}async function f6(n,e,t,r){t["Content-Type"]="application/json";let i;try{i=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function Ik(n,e){let t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function p6(n,e,t,r){let i=n._url(e);return g6(n,i,t,r)}async function g6(n,e,t,r){t=Mg(t);let i={data:t},o=await Ik(n,r),s=r.timeout||7e4,a=l6(s),u=await Promise.race([f6(e,i,o,n.fetchImpl),a.promise,n.cancelAllRequests]);if(a.cancel(),!u)throw new pn("cancelled","Firebase Functions instance was deleted.");let l=Pg(u.status,u.json);if(l)throw l;if(!u.json)throw new pn("internal","Response is not valid JSON object.");let h=u.json.data;if(typeof h>"u"&&(h=u.json.result),typeof h>"u")throw new pn("internal","Response is missing data field.");return{data:bc(h)}}function m6(n,e,t,r){let i=n._url(e);return y6(n,i,t,r||{})}async function y6(n,e,t,r){var i;t=Mg(t);let o={data:t},s=await Ik(n,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:s,signal:r?.signal})}catch(y){if(y instanceof Error&&y.name==="AbortError"){let A=new pn("cancelled","Request was cancelled.");return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}let _=Pg(0,null);return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}let u,l,h=new Promise((y,_)=>{u=y,l=_});(i=r?.signal)===null||i===void 0||i.addEventListener("abort",()=>{let y=new pn("cancelled","Request was cancelled.");l(y)});let p=a.body.getReader(),g=v6(p,u,l,r?.signal);return{stream:{[Symbol.asyncIterator](){let y=g.getReader();return{async next(){let{value:_,done:A}=await y.read();return{value:_,done:A}},async return(){return await y.cancel(),{done:!0,value:void 0}}}}},data:h}}function v6(n,e,t,r){let i=(s,a)=>{let u=s.match(u6);if(!u)return;let l=u[1];try{let h=JSON.parse(l);if("result"in h){e(bc(h.result));return}if("message"in h){a.enqueue(bc(h.message));return}if("error"in h){let p=Pg(0,h);a.error(p),t(p);return}}catch(h){if(h instanceof pn){a.error(h),t(h);return}}},o=new TextDecoder;return new ReadableStream({start(s){let a="";return u();async function u(){if(r?.aborted){let l=new pn("cancelled","Request was cancelled");return s.error(l),t(l),Promise.resolve()}try{let{value:l,done:h}=await n.read();if(h){a.trim()&&i(a.trim(),s),s.close();return}if(r?.aborted){let g=new pn("cancelled","Request was cancelled");s.error(g),t(g),await n.cancel();return}a+=o.decode(l,{stream:!0});let p=a.split(`
`);a=p.pop()||"";for(let g of p)g.trim()&&i(g.trim(),s);return u()}catch(l){let h=l instanceof pn?l:Pg(0,null);s.error(h),t(h)}}},cancel(){return n.cancel()}})}var vk="@firebase/functions",_k="0.12.9";var _6="auth-internal",E6="app-check-internal",I6="messaging-internal";function w6(n){let e=(t,{instanceIdentifier:r})=>{let i=t.getProvider("app").getImmediate(),o=t.getProvider(_6),s=t.getProvider(I6),a=t.getProvider(E6);return new ub(i,o,s,a,r)};Dn(new Pt(lb,e,"PUBLIC").setMultipleInstances(!0)),Oe(vk,_k,n),Oe(vk,_k,"esm2017")}function D6(n=ui(),e=cb){let r=to(Ue(n),lb).getImmediate({identifier:e}),i=Xf("functions");return i&&wk(r,...i),r}function wk(n,e,t){d6(Ue(n),e,t)}function Dk(n,e,t){return h6(Ue(n),e,t)}w6();var Rs=class{constructor(e){return e}},bk="functions",db=class{constructor(){return ro(bk)}};var hb=new U("angularfire2.functions-instances");function b6(n,e){let t=ls(bk,n,e);return t&&new Rs(t)}function T6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Rs(r)}}var C6={provide:db,deps:[[new Et,hb]]},S6={provide:Rs,useFactory:b6,deps:[[new Et,hb],er]};function Ide(n,...e){return Oe("angularfire",Tr.full,"fn"),Zt([S6,C6,{provide:hb,useFactory:T6(n),multi:!0,deps:[Ie,je,Cr,li,[new Et,gs],[new Et,so],...e]}])}var Tk=We(Dk,!0);var Eo=class n{firestore=C(Di);auth=C(pi);functions=C(Rs);async getAdmins(){let e=Ic(this.firestore,"admins");return(await gk(e)).docs.map(r=>k({uid:r.id},r.data()))}async getUidByEmail(e){let r=await Tk(this.functions,"getUidByEmail")({email:e}),i=r&&typeof r.data=="object"?r.data:{};if(!i.uid)throw new Error("No existe un usuario con ese email");return{uid:i.uid,email:i.email}}async addAdminByEmail(e){let{uid:t}=await this.getUidByEmail(e);await this.addAdminByUid(t,e)}async addAdminByUid(e,t){let r=Vn(this.firestore,"admins",e);await mk(r,{email:t})}async removeAdmin(e){let t=Vn(this.firestore,"admins",e);await wc(t)}isCurrentUserAdmin(){return this.auth.currentUser?Fe(this.auth.currentUser.getIdToken()).pipe(Kt(()=>{let e=this.auth.currentUser?.uid;return e?B(Vn(this.firestore,"admins",e)).pipe($(t=>t.id===e)):B(!1)})):B(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var R6={menu:"M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z",back:"m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z",search:"M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z",copy:"M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z",share:"M680-80q-50 0-85-35t-35-85q0-6 3-28L282-392q-16 15-37 23.5t-45 8.5q-50 0-85-35t-35-85q0-50 35-85t85-35q24 0 45 8.5t37 23.5l281-164q-2-7-2.5-13.5T560-760q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35q-24 0-45-8.5T598-672L317-508q2 7 2.5 13.5t.5 14.5q0 8-.5 14.5T317-452l281 164q16-15 37-23.5t45-8.5q50 0 85 35t35 85q0 50-35 85t-85 35Z","dark-mode":"M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z","light-mode":"M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z",close:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z",link:"M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z",terminal:"M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H160v400Zm140-40-56-56 103-104-104-104 57-56 160 160-160 160Zm180 0v-80h240v80H480Z",check:"M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z",add:"M440-120v-320H120v-80h320v-320h80v320h320v80H520v320h-80Z",delete:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z",logout:"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z",login:"M480-120v-80h280v-560H480v-80h280q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H480Zm-80-160-55-58 102-102H120v-80h327L345-622l55-58 200 200-200 200Z"},St=class n{elementRef=C(Vt);renderer=C(dn);icon=ce.required({alias:"pdIcon"});size=ce(24);fill=ce("currentColor");constructor(){La(()=>{this.createSvgIcon()})}createSvgIcon(){let e=R6[this.icon()];if(!e){console.warn(`Icon "${this.icon()}" not found`);return}this.elementRef.nativeElement.innerHTML="";let t=this.renderer.createElement("svg","http://www.w3.org/2000/svg");this.renderer.setAttribute(t,"height",`${this.size()}px`),this.renderer.setAttribute(t,"width",`${this.size()}px`),this.renderer.setAttribute(t,"viewBox","0 -960 960 960"),this.renderer.setAttribute(t,"fill",this.fill());let r=this.renderer.createElement("path","http://www.w3.org/2000/svg");this.renderer.setAttribute(r,"d",e),this.renderer.appendChild(t,r),this.renderer.appendChild(this.elementRef.nativeElement,t)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=de({type:n,selectors:[["","pdIcon",""]],inputs:{icon:[1,"pdIcon","icon"],size:[1,"size"],fill:[1,"fill"]}})};var xg=class n{copyService=C(Wf);promptText=ce("");promptUrl=ce(null);copyPrompt(){this.promptText()&&this.copyService.copy(this.promptText())}copyUrl(){this.promptUrl()&&this.copyService.copy(this.promptUrl())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-copy-actions"]],inputs:{promptText:[1,"promptText"],promptUrl:[1,"promptUrl"]},decls:3,vars:0,consts:[[1,"space-x-2","flex"],["pd-action-button","","title","Copiar la direcci\xF3n","aria-label","Copiar la direcci\xF3n","pdIcon","link",3,"clicked"],["pd-action-button","","title","Copiar el prompt","aria-label","Copiar el prompt","pdIcon","copy",3,"clicked"]],template:function(t,r){t&1&&(K(0,"div",0)(1,"button",1),ae("clicked",function(){return r.copyUrl()}),G(),K(2,"button",2),ae("clicked",function(){return r.copyPrompt()}),G()())},dependencies:[Gf,St],encapsulation:2})};var N6=[[["","drawer-title",""]],"*"],M6=["[drawer-title]","*"],Ck=class n{constructor(e){this.renderer=e;this.setListeners()}isOpen=Ae(!1);removeDocumentClickListenerFn=null;removeDocumentEscapeListenerFn=null;show(){this.isOpen()!==!0&&(this.isOpen.set(!0),this.setListeners())}hide(){this.isOpen()&&(this.isOpen.set(!1),this.removeDocumentClickListenerFn?.(),this.removeDocumentEscapeListenerFn?.())}onClick(){this.hide()}setListeners(){this.isOpen()===!0&&(this.removeDocumentClickListenerFn=this.renderer.listen("document","click",()=>this.hide()),this.removeDocumentEscapeListenerFn=this.renderer.listen("document","keydown.escape",()=>this.hide(),{passive:!0}))}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeDocumentEscapeListenerFn?.()}static \u0275fac=function(t){return new(t||n)(W(dn))};static \u0275cmp=le({type:n,selectors:[["pd-drawer"],["","pd-drawer",""]],ngContentSelectors:M6,decls:7,vars:4,consts:[[1,"drawer","shadow-lg/60","dark:shadow-lg/70","md:shadow-sm/40","md:dark:shadow-md/70","fixed","md:top-14","top-0","z-14","dark:shadow-black","shadow-black/80","bg-drawer","bottom-0","overflow-hidden",3,"click"],[1,"bg-drawer-header","absolute","top-0","left-0","right-0","h-14","z-20","flex","items-center","pl-4","pr-5"],[1,"w-full","absolute","top-14","bottom-0","right-0","overflow-x-hidden","overflow-y-auto"],[1,"pt-4","h-full"],[1,"fixed","md:hidden","top-0","left-0","z-12","bg-black/10","dark:bg-black/20","block","opacity-100","w-screen","h-screen"]],template:function(t,r){t&1&&(Qu(N6),jt(0,"div",0),Oa("click",function(o){return o.stopPropagation()}),jt(1,"h5",1),Fa(2),Ut(),jt(3,"div",2)(4,"div",3),Fa(5,1),Ut()()(),Ji(6,"div",4)),t&2&&(nn("open",r.isOpen()),ne(6),nn("hidden",!r.isOpen()))},encapsulation:2})};var Og=new U(""),yb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(se(Og),se(Ie))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),$l=class{_doc;constructor(e){this._doc=e}manager},fb="ng-app-id";function Sk(n){for(let e of n)e.remove()}function Ak(n,e){let t=e.createElement("style");return t.textContent=n,t}function P6(n,e,t,r){let i=n.head?.querySelectorAll(`style[${fb}="${e}"],link[${fb}="${e}"]`);if(i)for(let o of i)o.removeAttribute(fb),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function gb(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var vb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,P6(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Ak);r?.forEach(i=>this.addUsage(i,this.external,gb))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Sk(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Sk(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Ak(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,gb(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(se(wt),se(Df),se(Tf,8),se(Yi))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),pb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},_b=/%COMP%/g;var Nk="%COMP%",x6=`_nghost-${Nk}`,k6=`_ngcontent-${Nk}`,O6=!0,F6=new U("",{providedIn:"root",factory:()=>O6});function L6(n){return k6.replace(_b,n)}function V6(n){return x6.replace(_b,n)}function Mk(n,e){return e.map(t=>t.replace(_b,n))}var Eb=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Hl(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof kg?i.applyToHost(t):i instanceof ql&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case ei.Emulated:o=new kg(u,l,r,this.appId,h,s,a,p,g);break;case ei.ShadowDom:return new mb(u,l,t,r,s,a,this.nonce,p,g);default:o=new ql(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(se(yb),se(vb),se(Df),se(F6),se(wt),se(Yi),se(Ie),se(Tf),se(rs,8))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Hl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(pb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Rk(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Rk(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=pb[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=pb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(yr.DashCase|yr.Important)?e.style.setProperty(t,r,i&yr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&yr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=kn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Rk(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var mb=class extends Hl{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=Mk(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=gb(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ql=class extends Hl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?Mk(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},kg=class extends ql{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=L6(h),this.hostAttr=V6(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Fg=class n extends il{supportsDOMEvents=!0;static makeCurrent(){UE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=j6();return t==null?null:U6(t)}resetBaseElement(){zl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qE(document.cookie,e)}},zl=null;function j6(){return zl=zl||document.head.querySelector("base"),zl?zl.getAttribute("href"):null}function U6(n){return new URL(n,document.baseURI).pathname}var B6=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),xk=(()=>{class n extends $l{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(se(wt))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})(),Pk=["alt","control","meta","shift"],$6={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},H6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},kk=(()=>{class n extends $l{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Pk.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=$6[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Pk.forEach(s=>{if(s!==i){let a=H6[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(se(wt))};static \u0275prov=L({token:n,factory:n.\u0275fac})}return n})();function q6(n,e){return HR(k({rootComponent:n},z6(e)))}function z6(n){return{appProviders:[...Y6,...n?.providers??[]],platformProviders:Q6}}function G6(){Fg.makeCurrent()}function W6(){return new vn}function K6(){return w_(document),document}var Q6=[{provide:Yi,useValue:MN},{provide:bf,useValue:G6,multi:!0},{provide:wt,useFactory:K6}];var Y6=[{provide:bu,useValue:"root"},{provide:vn,useFactory:W6},{provide:Og,useClass:xk,multi:!0,deps:[wt]},{provide:Og,useClass:kk,multi:!0,deps:[wt]},Eb,vb,yb,{provide:Xo,useExisting:Eb},{provide:ol,useClass:B6},[]];var Ok=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(se(wt))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fe="primary",sd=Symbol("RouteTitle"),Tb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ps(n){return new Tb(n)}function Hk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function J6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Vr(n[t],e[t]))return!1;return!0}function Vr(n,e){let t=n?Cb(n):void 0,r=e?Cb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!qk(n[i],e[i]))return!1;return!0}function Cb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function zk(n){return n.length>0?n[n.length-1]:null}function Si(n){return wy(n)?n:ri(n)?Fe(Promise.resolve(n)):B(n)}var X6={exact:Wk,subset:Kk},Gk={exact:e8,subset:t8,ignored:()=>!0};function Fk(n,e,t){return X6[t.paths](n.root,e.root,t.matrixParams)&&Gk[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function e8(n,e){return Vr(n,e)}function Wk(n,e,t){if(!Ns(n.segments,e.segments)||!jg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Wk(n.children[r],e.children[r],t))return!1;return!0}function t8(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>qk(n[t],e[t]))}function Kk(n,e,t){return Qk(n,e,e.segments,t)}function Qk(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ns(i,t)||e.hasChildren()||!jg(i,t,r))}else if(n.segments.length===t.length){if(!Ns(n.segments,t)||!jg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Kk(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ns(n.segments,i)||!jg(n.segments,i,r)||!n.children[fe]?!1:Qk(n.children[fe],e,o,r)}}function jg(n,e,t){return e.every((r,i)=>Gk[t](n[i].parameters,r.parameters))}var Ur=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Te([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ps(this.queryParams),this._queryParamMap}toString(){return i8.serialize(this)}},Te=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ug(this)}},Io=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ps(this.parameters),this._parameterMap}toString(){return Zk(this)}};function n8(n,e){return Ns(n,e)&&n.every((t,r)=>Vr(t.parameters,e[r].parameters))}function Ns(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function r8(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var ad=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>new xs,providedIn:"root"})}return n})(),xs=class{parse(e){let t=new Ab(e);return new Ur(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Gl(e.root,!0)}`,r=a8(e.queryParams),i=typeof e.fragment=="string"?`#${o8(e.fragment)}`:"";return`${t}${r}${i}`}},i8=new xs;function Ug(n){return n.segments.map(e=>Zk(e)).join("/")}function Gl(n,e){if(!n.hasChildren())return Ug(n);if(e){let t=n.children[fe]?Gl(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==fe&&r.push(`${i}:${Gl(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=r8(n,(r,i)=>i===fe?[Gl(n.children[fe],!1)]:[`${i}:${Gl(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${Ug(n)}/${t[0]}`:`${Ug(n)}/(${t.join("//")})`}}function Yk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Lg(n){return Yk(n).replace(/%3B/gi,";")}function o8(n){return encodeURI(n)}function Sb(n){return Yk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bg(n){return decodeURIComponent(n)}function Lk(n){return Bg(n.replace(/\+/g,"%20"))}function Zk(n){return`${Sb(n.path)}${s8(n.parameters)}`}function s8(n){return Object.entries(n).map(([e,t])=>`;${Sb(e)}=${Sb(t)}`).join("")}function a8(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Lg(t)}=${Lg(i)}`).join("&"):`${Lg(t)}=${Lg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var c8=/^[^\/()?;#]+/;function Ib(n){let e=n.match(c8);return e?e[0]:""}var u8=/^[^\/()?;=#]+/;function l8(n){let e=n.match(u8);return e?e[0]:""}var d8=/^[^=?&#]+/;function h8(n){let e=n.match(d8);return e?e[0]:""}var f8=/^[^&#]+/;function p8(n){let e=n.match(f8);return e?e[0]:""}var Ab=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new Te(e,t)),r}parseSegment(){let e=Ib(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Io(Bg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=l8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ib(this.remaining);i&&(r=i,this.capture(r))}e[Bg(t)]=Bg(r)}parseQueryParam(e){let t=h8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=p8(this.remaining);s&&(r=s,this.capture(r))}let i=Lk(t),o=Lk(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ib(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=fe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[fe]:new Te([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function Jk(n){return n.segments.length>0?new Te([],{[fe]:n}):n}function Xk(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=Xk(i);if(r===fe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Te(n.segments,e);return g8(t)}function g8(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new Te(n.segments.concat(e.segments),e.children)}return n}function wo(n){return n instanceof Ur}function eO(n,e,t=null,r=null){let i=tO(n);return nO(i,e,t,r)}function tO(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Te(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=Jk(r);return e??i}function nO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return wb(i,i,i,t,r);let o=m8(e);if(o.toRoot())return wb(i,i,new Te([],{}),t,r);let s=y8(o,i,n),a=s.processChildren?Kl(s.segmentGroup,s.index,o.commands):iO(s.segmentGroup,s.index,o.commands);return wb(i,s.segmentGroup,a,t,r)}function $g(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Zl(n){return typeof n=="object"&&n!=null&&n.outlets}function wb(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=rO(n,e,t);let a=Jk(Xk(s));return new Ur(a,o,i)}function rO(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=rO(o,e,t)}),new Te(n.segments,r)}var Hg=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&$g(r[0]))throw new j(4003,!1);let i=r.find(Zl);if(i&&i!==zk(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function m8(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Hg(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Hg(t,e,r)}var Sc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function y8(n,e,t){if(n.isAbsolute)return new Sc(e,!0,0);if(!t)return new Sc(e,!1,NaN);if(t.parent===null)return new Sc(t,!0,0);let r=$g(n.commands[0])?0:1,i=t.segments.length-1+r;return v8(t,i,n.numberOfDoubleDots)}function v8(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Sc(r,!1,i-o)}function _8(n){return Zl(n[0])?n[0].outlets:{[fe]:n}}function iO(n,e,t){if(n??=new Te([],{}),n.segments.length===0&&n.hasChildren())return Kl(n,e,t);let r=E8(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Te(n.segments.slice(0,r.pathIndex),{});return o.children[fe]=new Te(n.segments.slice(r.pathIndex),n.children),Kl(o,0,i)}else return r.match&&i.length===0?new Te(n.segments,{}):r.match&&!n.hasChildren()?Rb(n,e,t):r.match?Kl(n,0,i):Rb(n,e,t)}function Kl(n,e,t){if(t.length===0)return new Te(n.segments,{});{let r=_8(t),i={};if(Object.keys(r).some(o=>o!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let o=Kl(n.children[fe],e,t);return new Te(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=iO(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Te(n.segments,i)}}function E8(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Zl(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!jk(u,l,s))return o;r+=2}else{if(!jk(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Rb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Zl(o)){let u=I8(o.outlets);return new Te(r,u)}if(i===0&&$g(t[0])){let u=n.segments[e];r.push(new Io(u.path,Vk(t[0]))),i++;continue}let s=Zl(o)?o.outlets[fe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&$g(a)?(r.push(new Io(s,Vk(a))),i+=2):(r.push(new Io(s,{})),i++)}return new Te(r,{})}function I8(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Rb(new Te([],{}),0,r))}),e}function Vk(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function jk(n,e,t){return n==t.path&&Vr(e,t.parameters)}var Ql="imperative",At=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(At||{}),Sn=class{id;url;constructor(e,t){this.id=e,this.url=t}},ks=class extends Sn{type=At.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sr=class extends Sn{urlAfterRedirects;type=At.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},an=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(an||{}),Jl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Jl||{}),jr=class extends Sn{reason;code;type=At.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ti=class extends Sn{reason;code;type=At.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Rc=class extends Sn{error;target;type=At.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Xl=class extends Sn{urlAfterRedirects;state;type=At.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qg=class extends Sn{urlAfterRedirects;state;type=At.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zg=class extends Sn{urlAfterRedirects;state;shouldActivate;type=At.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gg=class extends Sn{urlAfterRedirects;state;type=At.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wg=class extends Sn{urlAfterRedirects;state;type=At.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kg=class{route;type=At.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qg=class{route;type=At.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yg=class{snapshot;type=At.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zg=class{snapshot;type=At.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jg=class{snapshot;type=At.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xg=class{snapshot;type=At.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ed=class{},Nc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function w8(n){return!(n instanceof ed)&&!(n instanceof Nc)}function D8(n,e){return n.providers&&!n._injector&&(n._injector=Na(n.providers,e,`Route: ${n.path}`)),n._injector??e}function or(n){return n.outlet||fe}function b8(n,e){let t=n.filter(r=>or(r)===e);return t.push(...n.filter(r=>or(r)!==e)),t}function xc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var em=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return xc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new kc(this.rootInjector)}},kc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new em(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(se(rt))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tm=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Nb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Nb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Mb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Mb(e,this._root).map(t=>t.value)}};function Nb(n,e){if(n===e.value)return e;for(let t of e.children){let r=Nb(n,t);if(r)return r}return null}function Mb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Mb(n,t);if(r.length)return r.unshift(e),r}return[]}var Cn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Cc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var td=class extends tm{snapshot;constructor(e,t){super(e),this.snapshot=t,jb(this,e)}toString(){return this.snapshot.toString()}};function oO(n){let e=T8(n),t=new Nt([new Io("",{})]),r=new Nt({}),i=new Nt({}),o=new Nt({}),s=new Nt(""),a=new Ci(t,r,o,s,i,fe,n,e.root);return a.snapshot=e.root,new td(new Cn(a,[]),e)}function T8(n){let e={},t={},r={},i="",o=new Ms([],e,r,i,t,fe,n,null,{});return new nd("",new Cn(o,[]))}var Ci=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe($(l=>l[sd]))??B(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($(e=>Ps(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($(e=>Ps(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function nm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),n.params),data:k(k({},e.data),n.data),resolve:k(k(k(k({},n.data),e.data),i?.data),n._resolvedData)}:r={params:k({},n.params),data:k({},n.data),resolve:k(k({},n.data),n._resolvedData??{})},i&&aO(i)&&(r.resolve[sd]=i.title),r}var Ms=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[sd]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ps(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ps(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},nd=class extends tm{url;constructor(e,t){super(t),this.url=e,jb(this,t)}toString(){return sO(this._root)}};function jb(n,e){e.value._routerState=n,e.children.forEach(t=>jb(n,t))}function sO(n){let e=n.children.length>0?` { ${n.children.map(sO).join(", ")} } `:"";return`${n.value}${e}`}function Db(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Vr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Vr(e.params,t.params)||n.paramsSubject.next(t.params),J6(e.url,t.url)||n.urlSubject.next(t.url),Vr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Pb(n,e){let t=Vr(n.params,e.params)&&n8(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Pb(n.parent,e.parent))}function aO(n){return typeof n.title=="string"||n.title===null}var cO=new U(""),Ub=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=fe;activateEvents=new Ze;deactivateEvents=new Ze;attachEvents=new Ze;detachEvents=new Ze;routerOutletData=ce(void 0);parentContexts=C(kc);location=C(Zi);changeDetector=C(Xi);inputBinder=C(sm,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new xb(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=de({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[xn]})}return n})(),xb=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Ci?this.route:e===kc?this.childContexts:e===cO?this.outletData:this.parent.get(e,t)}},sm=new U("");var Bb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=le({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Le(0,"router-outlet")},dependencies:[Ub],encapsulation:2})}return n})();function $b(n){let e=n.children&&n.children.map($b),t=e?J(k({},n),{children:e}):k({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=Bb),t}function C8(n,e,t){let r=rd(n,e._root,t?t._root:void 0);return new td(r,e)}function rd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=S8(n,e,t);return new Cn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>rd(n,a)),s}}let r=A8(e.value),i=e.children.map(o=>rd(n,o));return new Cn(r,i)}}function S8(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return rd(n,r,i);return rd(n,r)})}function A8(n){return new Ci(new Nt(n.url),new Nt(n.params),new Nt(n.queryParams),new Nt(n.fragment),new Nt(n.data),n.outlet,n.component,n)}var Mc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},uO="ngNavigationCancelingError";function rm(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=wo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=lO(!1,an.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function lO(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[uO]=!0,t.cancellationCode=e,t}function R8(n){return dO(n)&&wo(n.url)}function dO(n){return!!n&&n[uO]}var N8=(n,e,t,r)=>$(i=>(new kb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),kb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Db(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Cc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Cc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Cc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Cc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Xg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Zg(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Db(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Db(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},im=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ac=class{component;route;constructor(e,t){this.component=e,this.route=t}};function M8(n,e,t){let r=n._root,i=e?e._root:null;return Wl(r,i,t,[r.value])}function P8(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Oc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Uy(n)?n:e.get(n):r}function Wl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Cc(e);return n.children.forEach(s=>{x8(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Yl(a,t.getContext(s),i)),i}function x8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=k8(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new im(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Wl(n,e,a?a.children:null,r,i):Wl(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ac(a.outlet.component,s))}else s&&Yl(e,a,i),i.canActivateChecks.push(new im(r)),o.component?Wl(n,null,a?a.children:null,r,i):Wl(n,null,t,r,i);return i}function k8(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ns(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ns(n.url,e.url)||!Vr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pb(n,e)||!Vr(n.queryParams,e.queryParams);case"paramsChange":default:return!Pb(n,e)}}function Yl(n,e,t){let r=Cc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Yl(s,e.children.getContext(o),t):Yl(s,null,t):Yl(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ac(e.outlet.component,i)):t.canDeactivateChecks.push(new Ac(null,i)):t.canDeactivateChecks.push(new Ac(null,i))}function cd(n){return typeof n=="function"}function O8(n){return typeof n=="boolean"}function F8(n){return n&&cd(n.canLoad)}function L8(n){return n&&cd(n.canActivate)}function V8(n){return n&&cd(n.canActivateChild)}function j8(n){return n&&cd(n.canDeactivate)}function U8(n){return n&&cd(n.canMatch)}function hO(n){return n instanceof Gr||n?.name==="EmptyError"}var Vg=Symbol("INITIAL_VALUE");function Pc(){return Kt(n=>mh(n.map(e=>e.pipe(Wt(1),_h(Vg)))).pipe($(e=>{for(let t of e)if(t!==!0){if(t===Vg)return Vg;if(t===!1||B8(t))return t}return!0}),Gt(e=>e!==Vg),Wt(1)))}function B8(n){return wo(n)||n instanceof Mc}function $8(n,e){return Ye(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?B(J(k({},t),{guardsResult:!0})):H8(s,r,i,n).pipe(Ye(a=>a&&O8(a)?q8(r,o,n,e):B(a)),$(a=>J(k({},t),{guardsResult:a})))})}function H8(n,e,t,r){return Fe(n).pipe(Ye(i=>Q8(i.component,i.route,t,e,r)),Kr(i=>i!==!0,!0))}function q8(n,e,t,r){return Fe(e).pipe(ko(i=>oa(G8(i.route.parent,r),z8(i.route,r),K8(n,i.path,t),W8(n,i.route,t))),Kr(i=>i!==!0,!0))}function z8(n,e){return n!==null&&e&&e(new Jg(n)),B(!0)}function G8(n,e){return n!==null&&e&&e(new Yg(n)),B(!0)}function W8(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return B(!0);let i=r.map(o=>fu(()=>{let s=xc(e)??t,a=Oc(o,s),u=L8(a)?a.canActivate(e,n):yt(s,()=>a(e,n));return Si(u).pipe(Kr())}));return B(i).pipe(Pc())}function K8(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>P8(s)).filter(s=>s!==null).map(s=>fu(()=>{let a=s.guards.map(u=>{let l=xc(s.node)??t,h=Oc(u,l),p=V8(h)?h.canActivateChild(r,n):yt(l,()=>h(r,n));return Si(p).pipe(Kr())});return B(a).pipe(Pc())}));return B(o).pipe(Pc())}function Q8(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return B(!0);let s=o.map(a=>{let u=xc(e)??i,l=Oc(a,u),h=j8(l)?l.canDeactivate(n,e,t,r):yt(u,()=>l(n,e,t,r));return Si(h).pipe(Kr())});return B(s).pipe(Pc())}function Y8(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return B(!0);let o=i.map(s=>{let a=Oc(s,n),u=F8(a)?a.canLoad(e,t):yt(n,()=>a(e,t));return Si(u)});return B(o).pipe(Pc(),fO(r))}function fO(n){return Zd(xe(e=>{if(typeof e!="boolean")throw rm(n,e)}),$(e=>e===!0))}function Z8(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return B(!0);let o=i.map(s=>{let a=Oc(s,n),u=U8(a)?a.canMatch(e,t):yt(n,()=>a(e,t));return Si(u)});return B(o).pipe(Pc(),fO(r))}var id=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},od=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Tc(n){return na(new id(n))}function J8(n){return na(new j(4e3,!1))}function X8(n){return na(lO(!1,an.GuardRejected))}var Ob=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return B(r);if(i.numberOfChildren>1||!i.children[fe])return J8(`${e.redirectTo}`);i=i.children[fe]}}applyRedirectCommands(e,t,r,i,o){return ez(t,i,o).pipe($(s=>{if(s instanceof Ur)throw new od(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new od(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ur(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Te(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function ez(n,e,t){if(typeof n=="string")return B(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Si(yt(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var Fb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tz(n,e,t,r,i){let o=pO(n,e,t);return o.matched?(r=D8(e,r),Z8(r,e,t,i).pipe($(s=>s===!0?o:k({},Fb)))):B(o)}function pO(n,e,t){if(e.path==="**")return nz(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?k({},Fb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Hk)(t,n,e);if(!i)return k({},Fb);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?k(k({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function nz(n){return{matched:!0,parameters:n.length>0?zk(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Uk(n,e,t,r){return t.length>0&&oz(n,t,r)?{segmentGroup:new Te(e,iz(r,new Te(t,n.children))),slicedSegments:[]}:t.length===0&&sz(n,t,r)?{segmentGroup:new Te(n.segments,rz(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Te(n.segments,n.children),slicedSegments:t}}function rz(n,e,t,r){let i={};for(let o of t)if(am(n,e,o)&&!r[or(o)]){let s=new Te([],{});i[or(o)]=s}return k(k({},r),i)}function iz(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&or(r)!==fe){let i=new Te([],{});t[or(r)]=i}return t}function oz(n,e,t){return t.some(r=>am(n,e,r)&&or(r)!==fe)}function sz(n,e,t){return t.some(r=>am(n,e,r))}function am(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function az(n,e,t){return e.length===0&&!n.children[t]}var Lb=class{};function cz(n,e,t,r,i,o,s="emptyOnly"){return new Vb(n,e,t,r,i,s,o).recognize()}var uz=31,Vb=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Ob(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=Uk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($(({children:t,rootSnapshot:r})=>{let i=new Cn(r,t),o=new nd("",i),s=eO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ms([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe($(r=>({children:r,rootSnapshot:t})),Wr(r=>{if(r instanceof od)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof id?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe($(s=>s instanceof Cn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Fe(o).pipe(ko(s=>{let a=r.children[s],u=b8(t,s);return this.processSegmentGroup(e,u,a,s,i)}),vh((s,a)=>(s.push(...a),s)),Vi(null),Cy(),Ye(s=>{if(s===null)return Tc(r);let a=gO(s);return lz(a),B(a)}))}processSegment(e,t,r,i,o,s,a){return Fe(t).pipe(ko(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Wr(l=>{if(l instanceof id)return B(null);throw l}))),Kr(u=>!!u),Wr(u=>{if(hO(u))return az(r,i,o)?B(new Lb):Tc(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return or(r)!==s&&(s===fe||!am(i,o,r))?Tc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Tc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=pO(t,i,o);if(!u)return Tc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>uz&&(this.allowRedirects=!1));let y=new Ms(o,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Bk(i),or(i),i.component??i._loadedComponent??null,i,$k(i)),_=nm(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(_.params),y.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Kt(R=>this.applyRedirects.lineralizeSegments(i,R)),Ye(R=>this.processSegment(e,r,t,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=tz(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Kt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Kt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,_=new Ms(g,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Bk(r),or(r),r.component??r._loadedComponent??null,r,$k(r)),A=nm(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(A.params),_.data=Object.freeze(A.data);let{segmentGroup:R,slicedSegments:x}=Uk(t,g,y,l);if(x.length===0&&R.hasChildren())return this.processChildren(h,l,R,_).pipe($(Z=>new Cn(_,Z)));if(l.length===0&&x.length===0)return B(new Cn(_,[]));let q=or(r)===o;return this.processSegment(h,l,R,x,q?fe:o,!0,_).pipe($(Z=>new Cn(_,Z instanceof Cn?[Z]:[])))}))):Tc(t)))}getChildConfig(e,t,r){return t.children?B({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?B({routes:t._loadedRoutes,injector:t._loadedInjector}):Y8(e,t,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,t).pipe(xe(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):X8(t))):B({routes:[],injector:e})}};function lz(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function dz(n){let e=n.value.routeConfig;return e&&e.path===""}function gO(n){let e=[],t=new Set;for(let r of n){if(!dz(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=gO(r.children);e.push(new Cn(r.value,i))}return e.filter(r=>!t.has(r))}function Bk(n){return n.data||{}}function $k(n){return n.resolve||{}}function hz(n,e,t,r,i,o){return Ye(s=>cz(n,e,t,r,s.extractedUrl,i,o).pipe($(({state:a,tree:u})=>J(k({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function fz(n,e){return Ye(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return B(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of mO(u))s.add(l);let a=0;return Fe(s).pipe(ko(u=>o.has(u)?pz(u,r,n,e):(u.data=nm(u,u.parent,n).resolve,B(void 0))),xe(()=>a++),sa(1),Ye(u=>a===s.size?B(t):cn))})}function mO(n){let e=n.children.map(t=>mO(t)).flat();return[n,...e]}function pz(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!aO(i)&&(o[sd]=i.title),fu(()=>(n.data=nm(n,n.parent,t).resolve,gz(o,n,e,r).pipe($(s=>(n._resolvedData=s,n.data=k(k({},n.data),s),null)))))}function gz(n,e,t,r){let i=Cb(n);if(i.length===0)return B({});let o={};return Fe(i).pipe(Ye(s=>mz(n[s],e,t,r).pipe(Kr(),xe(a=>{if(a instanceof Mc)throw rm(new xs,a);o[s]=a}))),sa(1),$(()=>o),Wr(s=>hO(s)?cn:na(s)))}function mz(n,e,t,r){let i=xc(e)??r,o=Oc(n,i),s=o.resolve?o.resolve(e,t):yt(i,()=>o(e,t));return Si(s)}function bb(n){return Kt(e=>{let t=n(e);return t?Fe(t).pipe($(()=>e)):B(e)})}var Hb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[sd]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>C(yO),providedIn:"root"})}return n})(),yO=(()=>{class n extends Hb{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(se(Ok))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fc=new U("",{providedIn:"root",factory:()=>({})}),ud=new U(""),vO=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=C(sE);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return B(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Si(yt(t,()=>r.loadComponent())).pipe($(EO),xe(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),pu(()=>{this.componentLoaders.delete(r)})),o=new Zs(i,()=>new nt).pipe(Ys());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return B({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=_O(r,this.compiler,t,this.onLoadEndListener).pipe(pu(()=>{this.childrenLoaders.delete(r)})),s=new Zs(o,()=>new nt).pipe(Ys());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _O(n,e,t,r){return Si(yt(t,()=>n.loadChildren())).pipe($(EO),Ye(i=>i instanceof kf||Array.isArray(i)?B(i):Fe(e.compileModuleAsync(i))),$(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ud,[],{optional:!0,self:!0}).flat()),{routes:s.map($b),injector:o}}))}function yz(n){return n&&typeof n=="object"&&"default"in n}function EO(n){return yz(n)?n.default:n}var cm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>C(vz),providedIn:"root"})}return n})(),vz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IO=new U("");var qb=new U(""),wO=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new nt;transitionAbortWithErrorSubject=new nt;configLoader=C(vO);environmentInjector=C(rt);destroyRef=C(Mt);urlSerializer=C(ad);rootContexts=C(kc);location=C(Ga);inputBindingEnabled=C(sm,{optional:!0})!==null;titleStrategy=C(Hb);options=C(Fc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=C(cm);createViewTransition=C(IO,{optional:!0});navigationErrorHandler=C(qb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>B(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Kg(i)),r=i=>this.events.next(new Qg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(J(k({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new Nt(null),this.transitions.pipe(Gt(r=>r!==null),Kt(r=>{let i=!1;return B(r).pipe(Kt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",an.SupersededByNewNavigation),cn;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?J(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let u="";return this.events.next(new Ti(o.id,this.urlSerializer.serialize(o.rawUrl),u,Jl.IgnoredSameUrlNavigation)),o.resolve(!1),cn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return B(o).pipe(Kt(u=>(this.events.next(new ks(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?cn:Promise.resolve(u))),hz(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),xe(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=J(k({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new Xl(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new ks(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let _=oO(this.rootComponentType).snapshot;return this.currentTransition=r=J(k({},o),{targetSnapshot:_,urlAfterRedirects:l,extras:J(k({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,B(r)}else{let u="";return this.events.next(new Ti(o.id,this.urlSerializer.serialize(o.extractedUrl),u,Jl.IgnoredByUrlHandlingStrategy)),o.resolve(!1),cn}}),xe(o=>{let s=new qg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),$(o=>(this.currentTransition=r=J(k({},o),{guards:M8(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),$8(this.environmentInjector,o=>this.events.next(o)),xe(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw rm(this.urlSerializer,o.guardsResult);let s=new zg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Gt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",an.GuardRejected),!1)),bb(o=>{if(o.guards.canActivateChecks.length!==0)return B(o).pipe(xe(s=>{let a=new Gg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Kt(s=>{let a=!1;return B(s).pipe(fz(this.paramsInheritanceStrategy,this.environmentInjector),xe({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",an.NoDataFromResolver)}}))}),xe(s=>{let a=new Wg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),bb(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=xc(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(xe(h=>{a.component=h}),$(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return mh(s(o.targetSnapshot.root)).pipe(Vi(null),Wt(1))}),bb(()=>this.afterPreactivation()),Kt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Fe(a).pipe($(()=>r)):B(r)}),$(o=>{let s=C8(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=J(k({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),xe(()=>{this.events.next(new ed)}),N8(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Wt(1),Eh(new te(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Gt(()=>!i&&!r.targetRouterState),xe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",an.Aborted)}))),xe({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Eh(this.transitionAbortWithErrorSubject.pipe(xe(o=>{throw o}))),pu(()=>{i||this.cancelNavigationTransition(r,"",an.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Wr(o=>{if(this.destroyed)return r.resolve(!1),cn;if(i=!0,dO(o))this.events.next(new jr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),R8(o)?this.events.next(new Nc(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Rc(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=yt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Mc){let{message:u,cancellationCode:l}=rm(this.urlSerializer,a);this.events.next(new jr(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Nc(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return cn}))}))}cancelNavigationTransition(t,r,i){let o=new jr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _z(n){return n!==Ql}var DO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>C(Ez),providedIn:"root"})}return n})(),om=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Ez=(()=>{class n extends om{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bO=(()=>{class n{urlSerializer=C(ad);options=C(Fc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=C(Ga);urlHandlingStrategy=C(cm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ur;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Ur?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=oO(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:()=>C(Iz),providedIn:"root"})}return n})(),Iz=(()=>{class n extends bO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ks?this.updateStateMemento():t instanceof Ti?this.commitTransition(r):t instanceof Xl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ed?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof jr&&t.code!==an.SupersededByNewNavigation&&t.code!==an.Redirect?this.restoreHistory(r):t instanceof Rc?this.restoreHistory(r,!0):t instanceof sr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=k(k({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=k(k({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zb(n,e){n.events.pipe(Gt(t=>t instanceof sr||t instanceof jr||t instanceof Rc||t instanceof Ti),$(t=>t instanceof sr||t instanceof Ti?0:(t instanceof jr?t.code===an.Redirect||t.code===an.SupersededByNewNavigation:!1)?2:1),Gt(t=>t!==2),Wt(1)).subscribe(()=>{e()})}var wz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Dz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},et=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=C(Y_);stateManager=C(bO);options=C(Fc,{optional:!0})||{};pendingTasks=C(gr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=C(wO);urlSerializer=C(ad);location=C(Ga);urlHandlingStrategy=C(cm);injector=C(rt);_events=new nt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=C(DO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=C(ud,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!C(sm,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Qe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof jr&&r.code!==an.Redirect&&r.code!==an.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sr)this.navigated=!0;else if(r instanceof Nc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_z(i.source)},s);this.scheduleNavigation(a,Ql,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}w8(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ql,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=k({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Lt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($b),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=tO(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return nO(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=wo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ql,null,r)}navigate(t,r={skipLocationChange:!1}){return bz(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=k({},wz):r===!1?i=k({},Dz):i=r,wo(t))return Fk(this.currentUrlTree,t,i);let o=this.parseUrl(t);return Fk(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return zb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bz(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}var Br=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ae(null);get href(){return rn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new nt;applicationErrorHandler=C(Lt);options=C(Fc,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(C(new qf("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof sr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(wo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:wo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(W(et),W(Ci),Hu("tabindex"),W(dn),W(Vt),W(za))};static \u0275dir=de({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ae("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ka("href",i.reactiveHref(),C_)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ja],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ja],replaceUrl:[2,"replaceUrl","replaceUrl",ja],routerLink:"routerLink"},features:[xn]})}return n})(),Cz=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ze;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof sr&&this.update()})}ngAfterContentInit(){B(this.links.changes,B(null)).pipe(ia()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Fe(t).pipe(ia()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Sz(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(W(et),W(Vt),W(dn),W(Xi),W(Br,8))};static \u0275dir=de({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&nE(o,Br,5),r&2){let s;is(s=os())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[xn]})}return n})();function Sz(n){return!!n.paths}var Az=new U("");function Rz(n,...e){return Zt([{provide:ud,multi:!0,useValue:n},[],{provide:Ci,useFactory:Nz,deps:[et]},{provide:jf,multi:!0,useFactory:Pz},e.map(t=>t.\u0275providers)])}function Nz(n){return n.routerState.root}function Mz(n,e){return{\u0275kind:n,\u0275providers:e}}function Pz(){let n=C(je);return e=>{let t=n.get(ii);if(e!==t.components[0])return;let r=n.get(et),i=n.get(xz);n.get(kz)===1&&r.initialNavigation(),n.get(Oz,null,{optional:!0})?.setUpPreloading(),n.get(Az,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var xz=new U("",{factory:()=>new nt}),kz=new U("",{providedIn:"root",factory:()=>1});var Oz=new U("");function Fz(n){return Mz(7,[{provide:qb,useValue:n}])}var gn=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=de({type:n,selectors:[["button","pdHeaderButton",""]],hostAttrs:[1,"rounded-md","hover:bg-button-hover","text-header-contrast"],features:[It([Er])]})};var Do=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=de({type:n,selectors:[["","pdTruncate",""]],hostAttrs:[1,"w-full","inline-block","truncate"]})};var Vz=new Intl.RelativeTimeFormat("es",{numeric:"auto"});function ld(n){let e=new Date,t=n.getTime()-e.getTime(),r=jz(t);return Vz.format(Uz(t,r),r)}var Gb=60*1e3,Wb=60*Gb,Kb=24*Wb,Qb=7*Kb,Yb=4*Qb,CO=Yb*12;function jz(n){return n=Math.abs(n),n<Gb?"second":n<Wb?"minute":n<Kb?"hour":n<Qb?"day":n<Yb?"week":n<CO?"month":"year"}function Uz(n,e){return Math.round(e==="minute"?n/Gb:e==="hour"?n/Wb:e==="day"?n/Kb:e==="week"?n/Qb:e==="month"?n/Yb:e==="year"?n/CO:n/1e3)}var um=class n{transform(e){return e?(ld(e instanceof Date?e:new Date(e)),ld(new Date(e))):"Sin informaci\xF3n"}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=Ma({name:"relDate",type:n,pure:!0})};var Bz=["pdHeaderBackButton",""],$r=class n{back=lt();onClick(e){this.back.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["button","pdHeaderBackButton",""]],hostAttrs:["title","Volver","aria-label","Volver"],hostBindings:function(t,r){t&1&&ae("click",function(o){return r.onClick(o)})},outputs:{back:"back"},features:[It([gn])],attrs:Bz,decls:1,vars:0,consts:[["pdIcon","back"]],template:function(t,r){t&1&&Le(0,"span",0)},dependencies:[St],encapsulation:2})};var ar=class n{get height(){return this.actualHeight()}double=Ae(!1);actualHeight=fn(()=>this.double()?"h-30":"h-14");static \u0275fac=function(t){return new(t||n)};static \u0275dir=de({type:n,selectors:[["","pdHeaderLayout",""]],hostAttrs:[1,"sticky","left-0","top-0","z-10","bg-header"],hostVars:2,hostBindings:function(t,r){t&2&&rE(r.height)}})},lm=class n extends ar{constructor(){super(),this.double.set(!0)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=de({type:n,selectors:[["","pdDoubleHeaderLayout",""]],features:[tn]})},jn=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=de({type:n,selectors:[["","pdHeaderContent",""]],hostAttrs:[1,"px-3","flex","flex-col","justify-center","gap-1","bg-header"]})},Un=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=de({type:n,selectors:[["","pdHeaderRow",""]],hostAttrs:[1,"flex","items-center","overflow-hidden","justify-between","gap-2","h-14"]})};var Lc=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=de({type:n,selectors:[["button","pdHeaderActionButton",""]],hostAttrs:[1,"hover:shadow-md","hover:shadow-black/20","shadow-black/40","rounded-full","bg-action","hover:bg-action-hover","text-header-contrast"],features:[It([Er])]})};var $z=["pdDialog"],Hz=["*"],Vc=class n{dialog;dialogTitle=ce("");confirm=lt();show(){this.dialog.nativeElement.showModal()}onConfirm(e){this.dialog.nativeElement.close(),this.confirm.emit(e)}ngOnDestroy(){this.dialog.nativeElement.close()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-dialog"]],viewQuery:function(t,r){if(t&1&&Yu($z,7),t&2){let i;is(i=os())&&(r.dialog=i.first)}},inputs:{dialogTitle:[1,"dialogTitle"]},outputs:{confirm:"confirm"},ngContentSelectors:Hz,decls:11,vars:1,consts:[["pdDialog",""],["closeBy","any",1,"backdrop:bg-neutral-500/20","fixed","top-1/3","left-1/2","-translate-x-1/2","w-fit","h-fit","max-w-screen-sm","shadow-lg/50","shadow-black/40","p-3","bg-white","dark:bg-neutral-700"],[1,"text-2xl","font-semibold","px-2","mb-4"],[1,"p-3"],[1,"flex","items-center","justify-end","gap-2","text-sm"],["pd-button","","type","button",1,"hover:bg-neutral-200","hover:dark:bg-neutral-600","bg-neutral-100","dark:bg-neutral-700","rounded-md",3,"click"],["pd-button","","autofocus","","type","button",1,"hover:bg-neutral-200","hover:dark:bg-neutral-600","bg-neutral-300","dark:bg-neutral-800","rounded-md",3,"click"]],template:function(t,r){if(t&1){let i=hn();Qu(),K(0,"dialog",1,0)(2,"h1",2),ve(3),G(),K(4,"div",3),Fa(5),G(),K(6,"form",4)(7,"button",5),ae("click",function(s){return ot(i),st(r.onConfirm(s))}),ve(8," S\xED "),G(),K(9,"button",6),ae("click",function(s){return ot(i),ss(1).close(),st(s.stopPropagation())}),ve(10," No "),G()()()}t&2&&(ne(3),Je(" ",r.dialogTitle()," "))},dependencies:[Er],encapsulation:2})};var qz=()=>["/prompts/create"];function zz(n,e){if(n&1){let t=hn();K(0,"button",14),ae("click",function(){ot(t),wn();let i=ss(17);return st(i.show())}),Le(1,"span",15),G(),Le(2,"button",16)}n&2&&(ne(2),Re("routerLink",Zu(1,qz)))}var SO=class n{constructor(e){this.router=e;let t=this.router.parseUrl(this.router.lastSuccessfulNavigation?.initialUrl?.toString()||"/");this.lastName=this.router.lastSuccessfulNavigation?.extras.state?.name||"",this.lastParams=t.queryParams,this.lastUrl=t.toString().split("?")[0]||"/"}adminService=C(Eo);isAdmin$=this.adminService.isCurrentUserAdmin();lastUrl;lastParams;lastName;titulo=ce("Elemento");subtitulo=ce("Informaci\xF3n detallada del elemento");copyPrompt=lt();share=lt();delete=lt();onCopyPrompt(e){this.copyPrompt.emit(e)}onBack(e){if(e.stopPropagation(),this.lastName){this.router.navigate([this.lastUrl],{queryParams:this.lastParams,state:{name:this.lastName}});return}else this.router.navigate([this.lastUrl],{queryParams:this.lastParams})}onShare(e){this.share.emit(e)}onDelete(e){e.stopPropagation(),this.delete.emit(e)}static \u0275fac=function(t){return new(t||n)(W(et))};static \u0275cmp=le({type:n,selectors:[["pd-detail-header"],["","pd-detail-header",""]],inputs:{titulo:[1,"titulo"],subtitulo:[1,"subtitulo"]},outputs:{copyPrompt:"copyPrompt",share:"share",delete:"delete"},features:[It([lm])],decls:19,vars:7,consts:[["confirmar",""],["pdHeaderContent",""],["pdHeaderRow","",1,"-mb-2"],["pdHeaderBackButton","",3,"back"],[1,"w-full"],[1,"flex","items-center"],["pdHeaderButton","","title","Copiar el prompt","aria-label","Copiar el prompt",3,"click"],["pdIcon","copy"],["pdHeaderButton","","title","Compartir el prompt","aria-label","Compartir el prompt",3,"click"],["pdIcon","share"],[1,"overflow-hidden","w-full","px-3"],["pdTruncate","",1,"text-header-contrast","text-[1.75rem]/9",3,"title"],["pdTruncate","",1,"text-header-low-contrast","text-sm",3,"title"],["dialogTitle","Eliminar",3,"confirm"],["pdHeaderButton","","title","Eliminar el prompt","aria-label","Eliminar el prompt",1,"ml-4",3,"click"],["pdIcon","delete"],["pdHeaderActionButton","","title","Agregar","aria-label","Agregar","pdIcon","add",1,"ml-4","mr-2",3,"routerLink"]],template:function(t,r){if(t&1){let i=hn();K(0,"div",1)(1,"div",2)(2,"button",3),ae("back",function(s){return ot(i),st(r.onBack(s))}),G(),Le(3,"div",4),K(4,"div",5)(5,"button",6),ae("click",function(s){return ot(i),st(r.onCopyPrompt(s))}),Le(6,"span",7),G(),K(7,"button",8),ae("click",function(s){return ot(i),st(r.onShare(s))}),Le(8,"span",9),G(),Zn(9,zz,3,2),si(10,"async"),G()(),K(11,"div",10)(12,"h1",11),ve(13),G(),K(14,"div",12),ve(15),G()()(),K(16,"pd-dialog",13,0),ae("confirm",function(s){return ot(i),st(r.onDelete(s))}),ve(18," Eliminar\xE1 definitivamente el elemento, desea continuar? "),G()}t&2&&(ne(9),Jn(ai(10,5,r.isAdmin$)?9:-1),ne(3),Re("title",r.titulo()),ne(),Je(" ",r.titulo()," "),ne(),Re("title",r.subtitulo()),ne(),Je(" ",r.subtitulo()," "))},dependencies:[St,gn,$r,jn,Un,Do,Lc,Br,Vc,ds],encapsulation:2})};var dm=class n{modeService=C(Qf);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-mode-toggle"]],decls:1,vars:1,consts:[["pdHeaderButton","",3,"click","pdIcon"]],template:function(t,r){t&1&&(K(0,"button",0),ae("click",function(){return r.modeService.toggle()}),G()),t&2&&Re("pdIcon",r.modeService.darkMode()?"dark-mode":"light-mode")},dependencies:[St,gn],encapsulation:2})};var FO=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(W(dn),W(Vt))};static \u0275dir=de({type:n})}return n})(),rT=(()=>{class n extends FO{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=de({type:n,features:[tn]})}return n})(),md=new U("");var Gz={provide:md,useExisting:Rn(()=>wm),multi:!0};function Wz(){let n=kn()?kn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Kz=new U(""),wm=(()=>{class n extends FO{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Wz())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(W(dn),W(Vt),W(Kz,8))};static \u0275dir=de({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ae("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[oi([Gz]),tn]})}return n})();function iT(n){return n==null||oT(n)===0}function oT(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Dm=new U(""),sT=new U(""),Qz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,AO=class{static min(e){return Yz(e)}static max(e){return Zz(e)}static required(e){return LO(e)}static requiredTrue(e){return Jz(e)}static email(e){return Xz(e)}static minLength(e){return eG(e)}static maxLength(e){return tG(e)}static pattern(e){return nG(e)}static nullValidator(e){return fm()}static compose(e){return HO(e)}static composeAsync(e){return zO(e)}};function Yz(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Zz(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function LO(n){return iT(n.value)?{required:!0}:null}function Jz(n){return n.value===!0?null:{required:!0}}function Xz(n){return iT(n.value)||Qz.test(n.value)?null:{email:!0}}function eG(n){return e=>{let t=e.value?.length??oT(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function tG(n){return e=>{let t=e.value?.length??oT(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function nG(n){if(!n)return fm;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(iT(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function fm(n){return null}function VO(n){return n!=null}function jO(n){return ri(n)?Fe(n):n}function UO(n){let e={};return n.forEach(t=>{e=t!=null?k(k({},e),t):e}),Object.keys(e).length===0?null:e}function BO(n,e){return e.map(t=>t(n))}function rG(n){return!n.validate}function $O(n){return n.map(e=>rG(e)?e:t=>e.validate(t))}function HO(n){if(!n)return null;let e=n.filter(VO);return e.length==0?null:function(t){return UO(BO(t,e))}}function qO(n){return n!=null?HO($O(n)):null}function zO(n){if(!n)return null;let e=n.filter(VO);return e.length==0?null:function(t){let r=BO(t,e).map(jO);return Dy(r).pipe($(UO))}}function GO(n){return n!=null?zO($O(n)):null}function RO(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function WO(n){return n._rawValidators}function KO(n){return n._rawAsyncValidators}function Zb(n){return n?Array.isArray(n)?n:[n]:[]}function pm(n,e){return Array.isArray(n)?n.includes(e):n===e}function NO(n,e){let t=Zb(e);return Zb(n).forEach(i=>{pm(t,i)||t.push(i)}),t}function MO(n,e){return Zb(e).filter(t=>!pm(n,t))}var gm=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=GO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},$c=class extends gm{name;get formDirective(){return null}get path(){return null}},Os=class extends gm{_parent=null;name=null;valueAccessor=null},mm=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},iG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Mpe=J(k({},iG),{"[class.ng-submitted]":"isSubmitted"}),QO=(()=>{class n extends mm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(W(Os,2))};static \u0275dir=de({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&nn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[tn]})}return n})(),Ppe=(()=>{class n extends mm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(W($c,10))};static \u0275dir=de({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&nn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[tn]})}return n})();var hd="VALID",hm="INVALID",jc="PENDING",fd="DISABLED",bo=class{},ym=class extends bo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},pd=class extends bo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},gd=class extends bo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Uc=class extends bo{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Jb=class extends bo{source;constructor(e){super(),this.source=e}},Xb=class extends bo{source;constructor(e){super(),this.source=e}};function aT(n){return(bm(n)?n.validators:n)||null}function oG(n){return Array.isArray(n)?qO(n):n||null}function cT(n,e){return(bm(e)?e.asyncValidators:n)||null}function sG(n){return Array.isArray(n)?GO(n):n||null}function bm(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function YO(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[t])throw new j(1001,"")}function ZO(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new j(1002,"")})}var Hc=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return rn(this.statusReactive)}set status(e){rn(()=>this.statusReactive.set(e))}_status=fn(()=>this.statusReactive());statusReactive=Ae(void 0);get valid(){return this.status===hd}get invalid(){return this.status===hm}get pending(){return this.status==jc}get disabled(){return this.status===fd}get enabled(){return this.status!==fd}errors;get pristine(){return rn(this.pristineReactive)}set pristine(e){rn(()=>this.pristineReactive.set(e))}_pristine=fn(()=>this.pristineReactive());pristineReactive=Ae(!0);get dirty(){return!this.pristine}get touched(){return rn(this.touchedReactive)}set touched(e){rn(()=>this.touchedReactive.set(e))}_touched=fn(()=>this.touchedReactive());touchedReactive=Ae(!1);get untouched(){return!this.touched}_events=new nt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(NO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(NO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MO(e,this._rawAsyncValidators))}hasValidator(e){return pm(this._rawValidators,e)}hasAsyncValidator(e){return pm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(J(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new gd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new gd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(J(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new pd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new pd(!0,r))}markAsPending(e={}){this.status=jc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Uc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(J(k({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=fd,this.errors=null,this._forEachChild(i=>{i.disable(J(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ym(this.value,r)),this._events.next(new Uc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(J(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=hd,this._forEachChild(r=>{r.enable(J(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(J(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hd||this.status===jc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ym(this.value,t)),this._events.next(new Uc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(J(k({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fd:hd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=jc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=jO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Uc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ze,this.statusChanges=new Ze}_calculateStatus(){return this._allControlsDisabled()?fd:this.errors?hm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jc)?jc:this._anyControlsHaveStatus(hm)?hm:hd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new pd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new gd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){bm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=oG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=sG(this._rawAsyncValidators)}},vm=class extends Hc{constructor(e,t,r){super(aT(t),cT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ZO(this,!0,e),Object.keys(e).forEach(r=>{YO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var eT=class extends vm{};var uT=new U("",{providedIn:"root",factory:()=>lT}),lT="always";function aG(n,e){return[...e.path,n]}function tT(n,e,t=lT){dT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),uG(n,e),dG(n,e),lG(n,e),cG(n,e)}function _m(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Im(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Em(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function cG(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function dT(n,e){let t=WO(n);e.validator!==null?n.setValidators(RO(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=KO(n);e.asyncValidator!==null?n.setAsyncValidators(RO(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Em(e._rawValidators,i),Em(e._rawAsyncValidators,i)}function Im(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=WO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=KO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Em(e._rawValidators,r),Em(e._rawAsyncValidators,r),t}function uG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&JO(n,e)})}function lG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&JO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function JO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function dG(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function hG(n,e){n==null,dT(n,e)}function fG(n,e){return Im(n,e)}function XO(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function pG(n){return Object.getPrototypeOf(n.constructor)===rT}function gG(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function e1(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===wm?t=o:pG(o)?r=o:i=o}),i||r||t||null}function mG(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function PO(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xO(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Bc=class extends Hc{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(aT(t),cT(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(xO(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){PO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){PO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yG=n=>n instanceof Bc;var kpe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=de({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var hT=new U(""),vG={provide:Os,useExisting:Rn(()=>fT)},fT=(()=>{class n extends Os{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new Ze;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=e1(this,i)}ngOnChanges(t){if(this._isControlChanged(t)){let r=t.form.previousValue;r&&_m(r,this,!1),tT(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}XO(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&_m(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(W(Dm,10),W(sT,10),W(md,10),W(hT,8),W(uT,8))};static \u0275dir=de({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[oi([vG]),tn,xn]})}return n})(),_G={provide:$c,useExisting:Rn(()=>EG)},EG=(()=>{class n extends $c{callSetDisabledState;get submitted(){return rn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=fn(()=>this._submittedReactive());_submittedReactive=Ae(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ze;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Im(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return tT(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){_m(t.control||null,t,!1),mG(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),gG(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Jb(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new Xb(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(_m(r||null,t),yG(i)&&(tT(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);hG(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&fG(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){dT(this.form,this),this._oldForm&&Im(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(W(Dm,10),W(sT,10),W(uT,8))};static \u0275dir=de({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ae("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[oi([_G]),tn,xn]})}return n})();var IG={provide:Os,useExisting:Rn(()=>wG)},wG=(()=>{class n extends Os{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ze;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=e1(this,o)}ngOnChanges(t){this._added||this._setUpControl(),XO(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return aG(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(W($c,13),W(Dm,10),W(sT,10),W(md,10),W(hT,8))};static \u0275dir=de({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[oi([IG]),tn,xn]})}return n})();var DG={provide:md,useExisting:Rn(()=>n1),multi:!0};function t1(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function bG(n){return n.split(":")[0]}var n1=(()=>{class n extends rT{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=C(ii).injector;appRefDestroyRef=this.appRefInjector.get(Mt);destroyRef=C(Mt);cdr=C(Xi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefDestroyRef.destroyed||(this._queuedWrite=!0,Ff({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=t1(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=bG(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=de({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[oi([DG]),tn]})}return n})(),Ope=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(t1(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(W(Vt),W(dn),W(n1,9))};static \u0275dir=de({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),TG={provide:md,useExisting:Rn(()=>r1),multi:!0};function kO(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function CG(n){return n.split(":")[0]}var r1=(()=>{class n extends rT{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=CG(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=de({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ae("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[oi([TG]),tn]})}return n})(),Fpe=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(kO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(kO(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(W(Vt),W(dn),W(r1,9))};static \u0275dir=de({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var SG=(()=>{class n{_validator=fm;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):fm,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=de({type:n,features:[xn]})}return n})();var AG={provide:Dm,useExisting:Rn(()=>RG),multi:!0};var RG=(()=>{class n extends SG{required;inputName="required";normalizeInput=ja;createValidator=t=>LO;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=de({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ka("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[oi([AG]),tn]})}return n})();var NG=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ni({type:n});static \u0275inj=ur({})}return n})(),nT=class extends Hc{constructor(e,t,r){super(aT(t),cT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ZO(this,!1,e),e.forEach((r,i)=>{YO(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function OO(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Lpe=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return OO(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new vm(i,o)}record(t,r=null){let i=this._reduceControls(t);return new eT(i,r)}control(t,r,i){let o={};return this.useNonNullable?(OO(r)?o=r:(o.validators=r,o.asyncValidators=i),new Bc(t,J(k({},o),{nonNullable:!0}))):new Bc(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new nT(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Bc)return t;if(t instanceof Hc)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Tm=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:hT,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:uT,useValue:t.callSetDisabledState??lT}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ni({type:n});static \u0275inj=ur({imports:[NG]})}return n})();var Cm=class n{router=C(et);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-placeholder-searcher"]],decls:2,vars:0,consts:[[1,"w-full",3,"click"],["type","text","readonly","","placeholder","Buscar prompts...","aria-label","Buscar prompts","aria-autocomplete","list","aria-haspopup","listbox","aria-controls","search-options","aria-activedescendant","search-option-active",1,"w-full","bg-search","ring-0","outline-0","text-search-contrast","placeholder:text-placeholder","placeholder:text-center","rounded-full","px-6","p-1.5"]],template:function(t,r){t&1&&(jt(0,"div",0),Oa("click",function(o){return o.stopPropagation(),r.router.navigate(["/searching"])}),Ji(1,"input",1),Ut())},dependencies:[Tm],encapsulation:2})};var Sm=class n{auth=C(pi);loginWithGoogle(){let e=new bI;return RM(this.auth,e).then(t=>t.user).catch(()=>null)}logout(){return NM(this.auth)}get currentUser$(){return new te(e=>({unsubscribe:this.auth.onAuthStateChanged(r=>e.next(r))}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var PG=()=>["/admin"];function xG(n,e){if(n&1){let t=hn();K(0,"span",8),ve(1),G(),K(2,"button",9),ae("click",function(){ot(t);let i=wn();return st(i.logout())}),G(),Le(3,"button",10)}n&2&&(ne(),Je(" ",e.email),ne(2),Re("routerLink",Zu(2,PG)))}function kG(n,e){if(n&1){let t=hn();K(0,"button",11),ae("click",function(){ot(t);let i=wn();return st(i.login())}),G()}}var i1=class n{open=lt();authService=C(Sm);currentUser$=this.authService.currentUser$;onMainButtonClick(e){e.stopPropagation(),this.open.emit()}login(){this.authService.loginWithGoogle()}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-main-header"],["","pd-main-header",""]],outputs:{open:"open"},features:[It([ar])],decls:12,vars:3,consts:[["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderButton","","title","Abrir men\xFA","aria-label","Abrir men\xFA","pdIcon","menu",1,"md:hidden",3,"click"],[1,"text-2xl/8","hidden","md:inline-flex","items-center","gap-0.5","text-contrast","font-mont-alt","font-semibold",2,"letter-spacing","0.07em"],["pdIcon","terminal",1,"scale-[115%]","text-lime-300"],[1,"w-full","max-w-[500px]"],[1,"flex","items-center","gap-2"],["pdHeaderButton","","title","Iniciar sesi\xF3n","aria-label","Iniciar sesi\xF3n","pdIcon","login"],[1,"text-contrast"],["pdHeaderButton","","title","Cerrar sesi\xF3n","aria-label","Cerrar sesi\xF3n","pdIcon","logout",3,"click"],["pdHeaderButton","","title","Admin","aria-label","Admin","pdIcon","terminal",1,"ml-4","mr-2",3,"routerLink"],["pdHeaderButton","","title","Iniciar sesi\xF3n","aria-label","Iniciar sesi\xF3n","pdIcon","login",3,"click"]],template:function(t,r){if(t&1&&(K(0,"div",0)(1,"div",1)(2,"button",2),ae("click",function(o){return r.onMainButtonClick(o)}),G(),K(3,"div",3),Le(4,"span",4),ve(5," ARTIFICIALMENTE "),G(),Le(6,"pd-placeholder-searcher",5),K(7,"div",6),Zn(8,xG,4,3),si(9,"async"),Wu(10,kG,1,0,"button",7),Le(11,"pd-mode-toggle"),G()()()),t&2){let i;ne(8),Jn((i=ai(9,1,r.currentUser$))?8:10,i)}},dependencies:[Cm,dm,St,jn,Un,gn,Br,ds],encapsulation:2})};var OG=["searchInput"],Am=class n{clear(e){e.stopPropagation(),this.searchControl.setValue(""),this.search.emit("")}searchInput;searchControl=new Bc("");search=lt();term=ce("");onSearch(){this.search.emit(this.searchControl.value?.trim()??""),this.searchInput.nativeElement.blur()}ngAfterViewInit(){setTimeout(()=>{this.searchInput.nativeElement.focus()},20),this.searchControl.valueChanges.pipe(Ty(300)).subscribe(e=>{let t=e?.trim()??"";this.search.emit(t)}),this.searchControl.setValue(this.term())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-searcher"]],viewQuery:function(t,r){if(t&1&&Yu(OG,5),t&2){let i;is(i=os())&&(r.searchInput=i.first)}},inputs:{term:[1,"term"]},outputs:{search:"search"},decls:4,vars:1,consts:[["searchInput",""],[1,"w-full","flex","flex-row","items-center","gap-2"],["tabindex","0","type","text","autofocus","","placeholder","Buscar prompts...","aria-label","Buscar prompts","aria-autocomplete","list","aria-haspopup","listbox","aria-controls","search-options","aria-activedescendant","search-option-active",1,"w-full","text-primary-contrast","p-1.5","ring-0","outline-0","border-b-[1px]","border-dotted","border-b-contrast",3,"keydown.enter","formControl"],["pdHeaderButton","","title","Abrir men\xFA","aria-label","Abrir men\xFA","pdIcon","close",3,"click"]],template:function(t,r){if(t&1){let i=hn();K(0,"div",1)(1,"input",2,0),ae("keydown.enter",function(){return ot(i),st(r.onSearch())}),G(),K(3,"button",3),ae("click",function(s){return ot(i),st(r.clear(s))}),G()()}t&2&&(ne(),Re("formControl",r.searchControl))},dependencies:[Tm,wm,QO,fT,gn,St],encapsulation:2})};var o1=class n{router=C(et);search=lt();term=ce("");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-search-header"],["","pd-search-header",""]],inputs:{term:[1,"term"]},outputs:{search:"search"},features:[It([ar])],decls:4,vars:1,consts:[["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderBackButton","",3,"back"],[1,"w-full",3,"search","term"]],template:function(t,r){t&1&&(K(0,"div",0)(1,"div",1)(2,"button",2),ae("back",function(o){return r.onBack(o)}),G(),K(3,"pd-searcher",3),ae("search",function(o){return r.search.emit(o)}),G()()()),t&2&&(ne(3),Re("term",r.term()))},dependencies:[jn,Un,Am,$r],encapsulation:2})};function FG(n,e){if(n&1){let t=hn();K(0,"button",9),ae("click",function(){ot(t),wn();let i=ss(11);return st(i.show())}),Le(1,"span",10),G()}if(n&2){let t=wn();Re("disabled",!t.enabled())}}var s1=class n{adminService=C(Eo);isAdmin$=this.adminService.isCurrentUserAdmin();enabled=ce(!1);delete=lt();router=C(et);titulo=ce("");subtitulo=ce("");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}onDelete(e){e.stopPropagation(),this.delete.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-section-header"],["","pd-section-header",""]],inputs:{enabled:[1,"enabled"],titulo:[1,"titulo"],subtitulo:[1,"subtitulo"]},outputs:{delete:"delete"},features:[It([ar])],decls:13,vars:7,consts:[["confirmar",""],["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderBackButton","",3,"back"],[1,"overflow-hidden","w-full","flex","flex-col"],["pdTruncate","",1,"text-header-contrast","text-xl",3,"title"],[1,"text-header-low-contrast","text-sm",3,"title"],["pdHeaderButton","","title","Eliminar","aria-label","Eliminar",1,"ml-4","disabled:pointer-events-none","disabled:opacity-50",3,"disabled"],["dialogTitle","Eliminar",3,"confirm"],["pdHeaderButton","","title","Eliminar","aria-label","Eliminar",1,"ml-4","disabled:pointer-events-none","disabled:opacity-50",3,"click","disabled"],["pdIcon","delete"]],template:function(t,r){if(t&1){let i=hn();K(0,"div",1)(1,"div",2)(2,"button",3),ae("back",function(s){return ot(i),st(r.onBack(s))}),G(),K(3,"div",4)(4,"h1",5),ve(5),G(),K(6,"div",6),ve(7),G()(),Zn(8,FG,2,1,"button",7),si(9,"async"),G()(),K(10,"pd-dialog",8,0),ae("confirm",function(s){return ot(i),st(r.onDelete(s))}),ve(12," Eliminar\xE1 definitivamente el elemento, desea continuar? "),G()}t&2&&(ne(4),Re("title",r.titulo()),ne(),Je(" ",r.titulo()," "),ne(),Re("title",r.subtitulo()),ne(),Je(" ",r.subtitulo()," "),ne(),Jn(ai(9,5,r.isAdmin$)?8:-1))},dependencies:[gn,$r,jn,Un,Do,St,Vc,ds],encapsulation:2})};var a1=class n{apply=lt();waiting=ce(!1);enabled=ce(!0);router=C(et);titulo=ce("Tarea");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}onTaskButtonClicked(e){e.stopPropagation(),this.apply.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-task-header"]],inputs:{waiting:[1,"waiting"],enabled:[1,"enabled"],titulo:[1,"titulo"]},outputs:{apply:"apply"},features:[It([ar])],decls:7,vars:5,consts:[["pdHeaderContent",""],["pdHeaderRow","",1,""],["pdHeaderBackButton","",3,"back"],["pdTruncate","",1,"text-header-contrast","text-2xl",3,"title"],[1,"spinner"],["pdHeaderActionButton","","title","Aceptar","aria-label","Aceptar","pdIcon","check",1,"mr-2","disabled:pointer-events-none","md:hidden","disabled:bg-neutral-500","dark:disabled:bg-neutral-600","transition-colors","duration-300",3,"click","disabled"]],template:function(t,r){t&1&&(K(0,"div",0)(1,"div",1)(2,"button",2),ae("back",function(o){return r.onBack(o)}),G(),K(3,"h1",3),ve(4),G(),Le(5,"div",4),K(6,"button",5),ae("click",function(o){return r.onTaskButtonClicked(o)}),G()()()),t&2&&(ne(3),Re("title",r.titulo()),ne(),Je(" ",r.titulo()," "),ne(),nn("spinner-show",r.waiting()),ne(),Re("disabled",!r.enabled()||r.waiting()))},dependencies:[$r,Lc,jn,Un,St,Do],encapsulation:2})};var Rm=class n{textData=ce.required({alias:"pdHighlightText"});partIndex=ce.required();isHighlighted=fn(()=>this.partIndex()===this.textData().in);static \u0275fac=function(t){return new(t||n)};static \u0275dir=de({type:n,selectors:[["","pdHighlightText",""]],hostAttrs:[1,"whitespace-pre"],hostVars:2,hostBindings:function(t,r){t&2&&nn("bg-resaltador",r.isHighlighted())},inputs:{textData:[1,"pdHighlightText","textData"],partIndex:[1,"partIndex"]}})};function LG(n,e){if(n&1&&(K(0,"span",1),ve(1),G()),n&2){let t=e.$implicit,r=e.$index,i=wn();Re("pdHighlightText",i.textData())("partIndex",r),ne(),_r(t)}}var c1=class n{textData=ce.required();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-highlighted-text"]],inputs:{textData:[1,"textData"]},decls:3,vars:0,consts:[[1,"whitespace-nowrap","flex","flex-row","justify-start","items-center"],[3,"pdHighlightText","partIndex"]],template:function(t,r){t&1&&(K(0,"div",0),eE(1,LG,2,3,"span",1,X_),G()),t&2&&(ne(),tE(r.textData().parts))},dependencies:[Rm],encapsulation:2})};var VG=["pd-value-item",""],Nm=class n{value=ce(void 0,{alias:"pd-value-item"});valueText=fn(()=>{let e=this.value();return e==null?"Sin informaci\xF3n":Array.isArray(e)?e.length>0?e.join(", "):"Sin informaci\xF3n":typeof this.value()=="boolean"?this.value()?"S\xED":"No":e instanceof ze?ld(e.toDate()):String(this.value())});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["","pd-value-item",""]],hostAttrs:[1,"text-md","text-inverse"],inputs:{value:[1,"pd-value-item","value"]},attrs:VG,decls:1,vars:1,template:function(t,r){t&1&&ve(0),t&2&&Je("",r.valueText()," ")},encapsulation:2})};var jG=["pd-label-item",""],Mm=class n{text=ce("",{alias:"pd-label-item"});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["","pd-label-item",""]],hostAttrs:[1,"text-sm","text-inverse","opacity-80"],inputs:{text:[1,"pd-label-item","text"]},attrs:jG,decls:1,vars:1,template:function(t,r){t&1&&ve(0),t&2&&Je("",r.text()," ")},encapsulation:2})};var UG=["pd-key-value-item",""],u1=class n{label=ce("");value=ce(void 0);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["","pd-key-value-item",""]],hostAttrs:[1,"flex","flex-col","pt-1","pb-3","items-start","justify-center"],inputs:{label:[1,"label"],value:[1,"value"]},attrs:UG,decls:2,vars:2,consts:[[3,"pd-label-item"],[3,"pd-value-item"]],template:function(t,r){t&1&&Le(0,"div",0)(1,"div",1),t&2&&(Re("pd-label-item",r.label()),ne(),Re("pd-value-item",r.value()))},dependencies:[Mm,Nm],encapsulation:2})};function BG(n,e){n&1&&(jt(0,"span",3),ve(1,"WARN"),Ut())}function $G(n,e){n&1&&(jt(0,"span",4),ve(1,"404"),Ut())}function HG(n,e){n&1&&(jt(0,"span",5),ve(1,"OK"),Ut())}var l1=class n{notificationService=C(Ua);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-notification"]],decls:8,vars:10,consts:[[1,"fixed","duration-200","m-auto","z-35","scale-0","left-0","right-0","w-fit","min-w-64","shadow-lg","shadow-black/30","dark:shadow-black/60","transition-all","ease-out"],[1,"rounded-lg","w-full","flex","bg-neutral-50","dark:bg-neutral-800","items-center","gap-4","p-3"],[1,"w-full","pl-1"],[1,"dark:text-amber-400","font-semibold","text-amber-600","p-0.5","px-1.5","rounded-lg"],[1,"dark:text-red-400","font-semibold","text-red-500","p-0.5","px-1.5","rounded-lg"],[1,"dark:text-green-300","font-semibold","text-green-800","p-0.5","px-1.5","rounded-lg"],[1,"fixed","top-0","left-0","z-30","bg-black/10","dark:bg-black/20","block","opacity-100","w-screen","h-screen"]],template:function(t,r){t&1&&(jt(0,"div",0)(1,"div",1)(2,"span",2),ve(3),Ut(),Zn(4,BG,2,0,"span",3)(5,$G,2,0,"span",4)(6,HG,2,0,"span",5),Ut()(),Ji(7,"div",6)),t&2&&(nn("-bottom-8",!r.notificationService.showNotification())("bottom-18",r.notificationService.showNotification())("scale-100",r.notificationService.showNotification()),ne(3),_r(r.notificationService.notificationMessage().message),ne(),Jn(r.notificationService.notificationMessage().type==="warn"?4:r.notificationService.notificationMessage().type==="404"?5:6),ne(3),nn("hidden",!r.notificationService.showNotification()))},encapsulation:2})};var d1=class n{quantity=ce(0);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-quantity-bagde"]],hostAttrs:[1,"min-w-6","w-6","h-6","inline-flex","items-center","justify-center","rounded-full","bg-primary-light","text-primary-contrast","text-xs"],inputs:{quantity:[1,"quantity"]},decls:2,vars:1,template:function(t,r){t&1&&(jt(0,"span"),ve(1),Ut()),t&2&&(ne(),_r(r.quantity()))},encapsulation:2})};var Lme=(n,e)=>{let t=C(et).getCurrentNavigation()?.extras.state?.id;return t?C(bi).byId(t):C(bi).bySlug(pT(n))},Vme=(n,e)=>{let t=C(et).getCurrentNavigation()?.extras.state?.name;return t?C(bi).byCategoryName(t):C(bi).byCategorySlug(pT(n))},jme=(n,e)=>{let t=C(et).getCurrentNavigation()?.extras.state?.name;return t?C(bi).byTagName(t):C(bi).byTagSlug(pT(n))};function pT(n){let e=n.paramMap.get("id");if(!e)throw new Error("Route parameter 'id' is required");return e}function h1(n){return n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim()}function Bme(n,e,t=40){let r=h1(n),i=h1(e),o=r.indexOf(i);if(o===-1)return{parts:[n.slice(0,t)],highlightIndex:-1};let s=Math.floor(t/2),a=e.length,u=Math.max(0,o-s),l=Math.min(n.length,o+a+s),h=o<=s?0:u,p=o+a>=n.length-s?n.length:l,g=n.slice(h,o),y=n.slice(o,o+a),_=n.slice(o+a,p),A=[],R=-1;return g?(A.push(g),R=A.length):R=0,A.push(y),_&&A.push(_),{parts:A,highlightIndex:R}}var f1=class n{constructor(e,t){this.adminService=e;this.router=t}canActivate(e,t){return this.adminService.isCurrentUserAdmin().pipe(Wt(1),$(r=>r?!0:this.router.createUrlTree(["/"])))}static \u0275fac=function(t){return new(t||n)(se(Eo),se(et))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var Pm=class n{prompt=ce({});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-promp-info"]],hostAttrs:[1,"md:flex","justify-end","items-center","text-inverse-low","hidden"],inputs:{prompt:[1,"prompt"]},decls:2,vars:4,template:function(t,r){t&1&&(ve(0),si(1,"relDate")),t&2&&Uf("",ai(1,2,r.prompt().fecha_creacion.toDate()),", ",r.prompt().autor)},dependencies:[um],encapsulation:2})};var qG=(n,e)=>["/",n,e],zG=n=>({id:n});function GG(n,e){if(n&1&&(Le(0,"pd-promp-info",1),K(1,"a",2)(2,"div",3),ve(3),G()(),K(4,"div",4)(5,"div",5),ve(6),G(),K(7,"div",6),ve(8),G()(),Le(9,"pd-copy-actions",7)),n&2){let t=e,r=wn();Re("prompt",t),ne(),Re("routerLink",oE(8,qG,r.promptUrl,t.slug))("state",iE(11,zG,t.id)),ne(2),Je(" ",t.titulo," "),ne(3),Je(" ",t.prompt," "),ne(2),_r(t.descripcion),ne(),Re("promptText",t.prompt)("promptUrl",r.baseUrl()+t.slug)}}function WG(n,e){n&1&&(K(0,"div",0),ve(1,"No prompt available"),G())}var p1=class n{promptUrl="prompt";basePath=C(ip);baseUrl=Ae(window.location.origin+this.basePath+this.promptUrl+"/");visible=Ae(!1);prompt=ce(null);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=le({type:n,selectors:[["pd-display-prompt"],["","pd-display-prompt",""]],hostAttrs:[1,"select-none","md:min-w-[16rem]","md:w-[24rem]","md:max-w-[36rem]","grow-1","relative","inline-block","group","px-2","py-4","shadow-md/30","shadow-black/40","dark:shadow-black/80","bg-card","hover:bg-card-hover","dark:hover:bg-card-hover/30","transition-colors","duration-150"],inputs:{prompt:[1,"prompt"]},decls:2,vars:1,consts:[[1,"no-prompt"],[1,"pb-4","px-2","text-xs",3,"prompt"],[3,"routerLink","state"],[1,"text-primary-dark","px-2","text-lg/6","font-titulo","opacity-85","group-hover:opacity-100",2,"text-wrap","balance"],[1,"relative","prompt","opacity-85","group-hover:opacity-100","text-prompt","transition-opacity","duration-150","px-2"],[1,"prompt-text","font-merri","font-[370]","py-3","leading-7","italic"],[1,"text-sm"],["tabindex","2",1,"absolute","bottom-3","right-5","pointer-events-none","transition-discrete","opacity-0","hidden","z-3","group-active:block","group-hover:block","group-focus:block","group-focus:opacity-100","group-hover:opacity-80","hover:opacity-100","transition-all","group-focus:pointer-events-auto","group-hover:pointer-events-auto",3,"promptText","promptUrl"]],template:function(t,r){if(t&1&&Zn(0,GG,10,13)(1,WG,2,0,"div",0),t&2){let i;Jn((i=r.prompt())?0:1,i)}},dependencies:[xg,Br,Pm],encapsulation:2})};export{k as a,J as b,B as c,$ as d,Ye as e,by as f,Gt as g,xe as h,xF as i,C as j,ot as k,st as l,oL as m,Ae as n,xn as o,Vt as p,ne as q,W as r,le as s,de as t,oR as u,sR as v,Ze as w,Ie as x,Gj as y,Wj as z,ka as A,Zn as B,Jn as C,Qj as D,eE as E,tE as F,Re as G,K as H,G as I,Le as J,hn as K,ae as L,wn as M,ss as N,nn as O,ve as P,_r as Q,Je as R,iE as S,oE as T,si as U,ai as V,OU as W,fn as X,La as Y,lt as Z,ce as _,BE as $,ip as aa,AN as ba,G$ as ca,NN as da,q6 as ea,Ok as fa,Ci as ga,Ub as ha,et as ia,Br as ja,Cz as ka,Rz as la,Fz as ma,Ua as na,Wf as oa,Kf as pa,Qf as qa,Koe as ra,fse as sa,pse as ta,uue as ua,lue as va,Ule as wa,Ble as xa,bi as ya,D6 as za,Ide as Aa,Eo as Ba,Ck as Ca,SO as Da,wm as Ea,AO as Fa,QO as Ga,Ppe as Ha,kpe as Ia,EG as Ja,wG as Ka,n1 as La,Ope as Ma,Fpe as Na,RG as Oa,Lpe as Pa,Tm as Qa,i1 as Ra,o1 as Sa,s1 as Ta,a1 as Ua,c1 as Va,u1 as Wa,l1 as Xa,d1 as Ya,Lme as Za,Vme as _a,jme as $a,Bme as ab,f1 as bb,p1 as cb};
