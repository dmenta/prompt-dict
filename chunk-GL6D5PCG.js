var R1=Object.defineProperty,N1=Object.defineProperties;var M1=Object.getOwnPropertyDescriptors;var o0=Object.getOwnPropertySymbols;var P1=Object.prototype.hasOwnProperty,x1=Object.prototype.propertyIsEnumerable;var s0=(n,e,t)=>e in n?R1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,P=(n,e)=>{for(var t in e||={})P1.call(e,t)&&s0(n,t,e[t]);if(o0)for(var t of o0(e))x1.call(e,t)&&s0(n,t,e[t]);return n},Z=(n,e)=>N1(n,M1(e));var Ym;function Nd(){return Ym}function lr(n){let e=Ym;return Ym=n,e}var a0=Symbol("NotFound");function js(n){return n===a0||n?.name==="\u0275NotFound"}function Od(n,e){return Object.is(n,e)}var pt=null,Md=!1,Zm=1,k1=null,Ht=Symbol("SIGNAL");function J(n){let e=pt;return pt=n,e}function Fd(){return pt}var Ni={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Us(n){if(Md)throw new Error("");if(pt===null)return;pt.consumerOnSignalRead(n);let e=pt.nextProducerIndex++;if(jd(pt),e<pt.producerNode.length&&pt.producerNode[e]!==n&&su(pt)){let t=pt.producerNode[e];Vd(t,pt.producerIndexOfThis[e])}pt.producerNode[e]!==n&&(pt.producerNode[e]=n,pt.producerIndexOfThis[e]=su(pt)?u0(n,pt,e):0),pt.producerLastReadVersion[e]=n.version}function c0(){Zm++}function Ld(n){if(!(su(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Zm)){if(!n.producerMustRecompute(n)&&!Bs(n)){kd(n);return}n.producerRecomputeValue(n),kd(n)}}function Jm(n){if(n.liveConsumerNode===void 0)return;let e=Md;Md=!0;try{for(let t of n.liveConsumerNode)t.dirty||O1(t)}finally{Md=e}}function Xm(){return pt?.consumerAllowSignalWrites!==!1}function O1(n){n.dirty=!0,Jm(n),n.consumerMarkedDirty?.(n)}function kd(n){n.dirty=!1,n.lastCleanEpoch=Zm}function Mi(n){return n&&(n.nextProducerIndex=0),J(n)}function So(n,e){if(J(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(su(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Vd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Bs(n){jd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ld(t),r!==t.version))return!0}return!1}function $s(n){if(jd(n),su(n))for(let e=0;e<n.producerNode.length;e++)Vd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function u0(n,e,t){if(l0(n),n.liveConsumerNode.length===0&&d0(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=u0(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Vd(n,e){if(l0(n),n.liveConsumerNode.length===1&&d0(n))for(let r=0;r<n.producerNode.length;r++)Vd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];jd(i),i.producerIndexOfThis[r]=e}}function su(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function jd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function l0(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function d0(n){return n.producerNode!==void 0}function Ud(n){k1?.(n)}function Bd(n,e){let t=Object.create(F1);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Ld(t),Us(t),t.value===ou)throw t.error;return t.value};return r[Ht]=t,Ud(t),r}var Pd=Symbol("UNSET"),xd=Symbol("COMPUTING"),ou=Symbol("ERRORED"),F1=Z(P({},Ni),{value:Pd,dirty:!0,error:null,equal:Od,kind:"computed",producerMustRecompute(n){return n.value===Pd||n.value===xd},producerRecomputeValue(n){if(n.value===xd)throw new Error("");let e=n.value;n.value=xd;let t=Mi(n),r,i=!1;try{r=n.computation(),J(null),i=e!==Pd&&e!==ou&&r!==ou&&n.equal(e,r)}catch(o){r=ou,n.error=o}finally{So(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function L1(){throw new Error}var h0=L1;function f0(n){h0(n)}function ey(n){h0=n}var V1=null;function ty(n,e){let t=Object.create($d);t.value=n,e!==void 0&&(t.equal=e);let r=()=>p0(t);return r[Ht]=t,Ud(t),[r,s=>Hs(t,s),s=>ny(t,s)]}function p0(n){return Us(n),n.value}function Hs(n,e){Xm()||f0(n),n.equal(n.value,e)||(n.value=e,j1(n))}function ny(n,e){Xm()||f0(n),Hs(n,e(n.value))}var $d=Z(P({},Ni),{equal:Od,value:void 0,kind:"signal"});function j1(n){n.version++,c0(),Jm(n),V1?.(n)}function ce(n){return typeof n=="function"}function qs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Hd=qs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ao(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(o){e=o instanceof Hd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{g0(o)}catch(s){e=e??[],s instanceof Hd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Hd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)g0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ao(t,e)}remove(e){let{_finalizers:t}=this;t&&Ao(t,e),e instanceof n&&e._removeParent(this)}};ze.EMPTY=(()=>{let n=new ze;return n.closed=!0,n})();var ry=ze.EMPTY;function qd(n){return n instanceof ze||n&&"closed"in n&&ce(n.remove)&&ce(n.add)&&ce(n.unsubscribe)}function g0(n){ce(n)?n():n.unsubscribe()}var $n={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var zs={setTimeout(n,e,...t){let{delegate:r}=zs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=zs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function zd(n){zs.setTimeout(()=>{let{onUnhandledError:e}=$n;if(e)e(n);else throw n})}function au(){}var m0=iy("C",void 0,void 0);function y0(n){return iy("E",void 0,n)}function v0(n){return iy("N",n,void 0)}function iy(n,e,t){return{kind:n,value:e,error:t}}var Ro=null;function Gs(n){if($n.useDeprecatedSynchronousErrorHandling){let e=!Ro;if(e&&(Ro={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ro;if(Ro=null,t)throw r}}else n()}function _0(n){$n.useDeprecatedSynchronousErrorHandling&&Ro&&(Ro.errorThrown=!0,Ro.error=n)}var No=class extends ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qd(e)&&e.add(this)):this.destination=$1}static create(e,t,r){return new Ws(e,t,r)}next(e){this.isStopped?sy(v0(e),this):this._next(e)}error(e){this.isStopped?sy(y0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sy(m0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},U1=Function.prototype.bind;function oy(n,e){return U1.call(n,e)}var ay=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Gd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Gd(r)}else Gd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Gd(t)}}},Ws=class extends No{constructor(e,t,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&$n.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&oy(e.next,o),error:e.error&&oy(e.error,o),complete:e.complete&&oy(e.complete,o)}):i=e}this.destination=new ay(i)}};function Gd(n){$n.useDeprecatedSynchronousErrorHandling?_0(n):zd(n)}function B1(n){throw n}function sy(n,e){let{onStoppedNotification:t}=$n;t&&zs.setTimeout(()=>t(n,e))}var $1={closed:!0,next:au,error:B1,complete:au};var Ks=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yn(n){return n}function cy(...n){return uy(n)}function uy(n){return n.length===0?yn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=q1(t)?t:new Ws(t,r,i);return Gs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=E0(r),new r((i,o)=>{let s=new Ws({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ks](){return this}pipe(...t){return uy(t)(this)}toPromise(t){return t=E0(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function E0(n){var e;return(e=n??$n.Promise)!==null&&e!==void 0?e:Promise}function H1(n){return n&&ce(n.next)&&ce(n.error)&&ce(n.complete)}function q1(n){return n&&n instanceof No||H1(n)&&qd(n)}function ly(n){return ce(n?.lift)}function _e(n){return e=>{if(ly(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(n,e,t,r,i){return new dy(n,e,t,r,i)}var dy=class extends No{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Qs(){return _e((n,e)=>{let t=null;n._refCount++;let r=me(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ys=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ly(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ze;let t=this.getSubject();e.add(this.source.subscribe(me(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ze.EMPTY)}return e}refCount(){return Qs()(this)}};var I0=qs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xe=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Wd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new I0}next(t){Gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ry:(this.currentObservers=null,o.push(t),new ze(()=>{this.currentObservers=null,Ao(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new Wd(e,t),n})(),Wd=class extends Xe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ry}};var Nt=class extends Xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var hy={now(){return(hy.delegate||Date).now()},delegate:void 0};var Kd=class extends ze{constructor(e,t){super()}schedule(e,t=0){return this}};var cu={setInterval(n,e,...t){let{delegate:r}=cu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=cu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Zs=class extends Kd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return cu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&cu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ao(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Js=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Js.now=hy.now;var Xs=class extends Js{constructor(e,t=Js.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var uu=new Xs(Zs);var Qd=class extends Zs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Yd=class extends Xs{};var fy=new Yd(Qd);var sn=new he(n=>n.complete());function w0(n){return n&&ce(n.schedule)}function D0(n){return n[n.length-1]}function Zd(n){return ce(D0(n))?n.pop():void 0}function Pi(n){return w0(D0(n))?n.pop():void 0}function Jd(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function T0(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function b0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mo(n){return this instanceof Mo?(this.v=n,this):new Mo(n)}function C0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(I){return Promise.resolve(I).then(y,p)}}function a(y,I){r[y]&&(i[y]=function(A){return new Promise(function(N,k){o.push([y,A,N,k])>1||u(y,A)})},I&&(i[y]=I(i[y])))}function u(y,I){try{l(r[y](I))}catch(A){g(o[0][3],A)}}function l(y){y.value instanceof Mo?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,I){y(I),o.shift(),o.length&&u(o[0][0],o[0][1])}}function S0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof b0=="function"?b0(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Xd=n=>n&&typeof n.length=="number"&&typeof n!="function";function eh(n){return ce(n?.then)}function th(n){return ce(n[Ks])}function nh(n){return Symbol.asyncIterator&&ce(n?.[Symbol.asyncIterator])}function rh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function z1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ih=z1();function oh(n){return ce(n?.[ih])}function sh(n){return C0(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Mo(t.read());if(i)return yield Mo(void 0);yield yield Mo(r)}}finally{t.releaseLock()}})}function ah(n){return ce(n?.getReader)}function ot(n){if(n instanceof he)return n;if(n!=null){if(th(n))return G1(n);if(Xd(n))return W1(n);if(eh(n))return K1(n);if(nh(n))return A0(n);if(oh(n))return Q1(n);if(ah(n))return Y1(n)}throw rh(n)}function G1(n){return new he(e=>{let t=n[Ks]();if(ce(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function W1(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function K1(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,zd)})}function Q1(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function A0(n){return new he(e=>{Z1(n,e).catch(t=>e.error(t))})}function Y1(n){return A0(sh(n))}function Z1(n,e){var t,r,i,o;return T0(this,void 0,void 0,function*(){try{for(t=S0(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function an(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function xi(n,e=0){return _e((t,r)=>{t.subscribe(me(r,i=>an(r,n,()=>r.next(i),e),()=>an(r,n,()=>r.complete(),e),i=>an(r,n,()=>r.error(i),e)))})}function ki(n,e=0){return _e((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function R0(n,e){return ot(n).pipe(ki(e),xi(e))}function N0(n,e){return ot(n).pipe(ki(e),xi(e))}function M0(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function P0(n,e){return new he(t=>{let r;return an(t,e,()=>{r=n[ih](),an(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function ch(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{an(t,e,()=>{let r=n[Symbol.asyncIterator]();an(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function x0(n,e){return ch(sh(n),e)}function k0(n,e){if(n!=null){if(th(n))return R0(n,e);if(Xd(n))return M0(n,e);if(eh(n))return N0(n,e);if(nh(n))return ch(n,e);if(oh(n))return P0(n,e);if(ah(n))return x0(n,e)}throw rh(n)}function Le(n,e){return e?k0(n,e):ot(n)}function z(...n){let e=Pi(n);return Le(n,e)}function ea(n,e){let t=ce(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function py(n){return!!n&&(n instanceof he||ce(n.lift)&&ce(n.subscribe))}var Wr=qs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(n,e){return _e((t,r)=>{let i=0;t.subscribe(me(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:J1}=Array;function X1(n,e){return J1(e)?n(...e):n(e)}function uh(n){return ie(e=>X1(n,e))}var{isArray:eF}=Array,{getPrototypeOf:tF,prototype:nF,keys:rF}=Object;function lh(n){if(n.length===1){let e=n[0];if(eF(e))return{args:e,keys:null};if(iF(e)){let t=rF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function iF(n){return n&&typeof n=="object"&&tF(n)===nF}function dh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function hh(...n){let e=Pi(n),t=Zd(n),{args:r,keys:i}=lh(n);if(r.length===0)return Le([],e);let o=new he(oF(r,e,i?s=>dh(i,s):yn));return t?o.pipe(uh(t)):o}function oF(n,e,t=yn){return r=>{O0(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)O0(e,()=>{let l=Le(n[u],e),h=!1;l.subscribe(me(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function O0(n,e,t){n?an(t,n,e):e()}function F0(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?I(A):u.push(A),I=A=>{o&&e.next(A),l++;let N=!1;ot(t(A,h++)).subscribe(me(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let k=u.shift();s?an(e,s,()=>I(k)):I(k)}g()}catch(k){e.error(k)}}))};return n.subscribe(me(e,y,()=>{p=!0,g()})),()=>{a?.()}}function st(n,e,t=1/0){return ce(e)?st((r,i)=>ie((o,s)=>e(r,o,i,s))(ot(n(r,i))),t):(typeof e=="number"&&(t=e),_e((r,i)=>F0(r,i,n,t)))}function ta(n=1/0){return st(yn,n)}function L0(){return ta(1)}function na(...n){return L0()(Le(n,Pi(n)))}function lu(n){return new he(e=>{ot(n()).subscribe(e)})}function gy(...n){let e=Zd(n),{args:t,keys:r}=lh(n),i=new he(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;ot(t[h]).subscribe(me(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?dh(r,a):a),o.complete())}))}});return e?i.pipe(uh(e)):i}function cn(n,e){return _e((t,r)=>{let i=0;t.subscribe(me(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Kr(n){return _e((e,t)=>{let r=null,i=!1,o;r=e.subscribe(me(t,void 0,void 0,s=>{o=ot(n(s,Kr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function V0(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(me(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Po(n,e){return ce(e)?st(n,e,1):st(n,1)}function my(n,e=uu){return _e((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}t.subscribe(me(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Oi(n){return _e((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function An(n){return n<=0?()=>sn:_e((e,t)=>{let r=0;e.subscribe(me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function fh(n=sF){return _e((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function sF(){return new Wr}function du(n){return _e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Qr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?cn((i,o)=>n(i,o,r)):yn,An(1),t?Oi(e):fh(()=>new Wr))}function ra(n){return n<=0?()=>sn:_e((e,t)=>{let r=[];e.subscribe(me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function yy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?cn((i,o)=>n(i,o,r)):yn,ra(1),t?Oi(e):fh(()=>new Wr))}function vy(n,e){return _e(V0(n,e,arguments.length>=2,!0))}function _y(...n){let e=Pi(n);return _e((t,r)=>{(e?na(n,t,e):na(n,t)).subscribe(r)})}function qt(n,e){return _e((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(me(r,u=>{i?.unsubscribe();let l=0,h=o++;ot(n(u,h)).subscribe(i=me(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ph(n){return _e((e,t)=>{ot(n).subscribe(me(t,()=>t.complete(),au)),!t.closed&&e.subscribe(t)})}function Ge(n,e,t){let r=ce(n)||e||t?{next:n,error:e,complete:t}:n;return r?_e((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(me(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):yn}function j0(n){let e=J(null);try{return n()}finally{J(e)}}var _h="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,t){super(Lo(e,t)),this.code=e}};function aF(n){return`NG0${Math.abs(n)}`}function Lo(n,e){return`${aF(n)}${e?": "+e:""}`}var yu=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("")}function $0(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Zr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Zr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Eh(n,e){return n?e?`${n} ${e}`:n:e||""}var cF=Se({__forward_ref__:Se});function Nn(n){return n.__forward_ref__=Nn,n.toString=function(){return Zr(this())},n}function gt(n){return My(n)?n():n}function My(n){return typeof n=="function"&&n.hasOwnProperty(cF)&&n.__forward_ref__===Nn}function H0(n,e){n==null&&Py(e,n,null,"!=")}function Py(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function F(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function dr(n){return{providers:n.providers||[],imports:n.imports||[]}}function vu(n){return uF(n,Ih)}function xy(n){return vu(n)!==null}function uF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function lF(n){let e=n?.[Ih]??null;return e||null}function Iy(n){return n&&n.hasOwnProperty(mh)?n[mh]:null}var Ih=Se({\u0275prov:Se}),mh=Se({\u0275inj:Se}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=F({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ky(n){return n&&!!n.\u0275providers}var Oy=Se({\u0275cmp:Se}),Fy=Se({\u0275dir:Se}),Ly=Se({\u0275pipe:Se}),Vy=Se({\u0275mod:Se}),pu=Se({\u0275fac:Se}),Vo=Se({__NG_ELEMENT_ID__:Se}),U0=Se({__NG_ENV_ID__:Se});function jo(n){return typeof n=="string"?n:n==null?"":String(n)}function yh(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():jo(n)}var jy=Se({ngErrorCode:Se}),q0=Se({ngErrorMessage:Se}),fu=Se({ngTokenPath:Se});function Uy(n,e){return z0("",-200,e)}function wh(n,e){throw new j(-201,!1)}function dF(n,e){n[fu]??=[];let t=n[fu],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(H0(e.provide,"Token with multi: true should have a provide property"),r=yh(e.provide)):r=yh(e),t[0]!==r&&n[fu].unshift(r)}function hF(n,e){let t=n[fu],r=n[jy],i=n[q0]||n.message;return n.message=pF(i,r,t,e),n}function z0(n,e,t){let r=new j(e,n);return r[jy]=e,r[q0]=n,t&&(r[fu]=t),r}function fF(n){return n[jy]}function pF(n,e,t=[],r=null){let i="";t&&t.length>1&&(i=` Path: ${t.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return Lo(e,`${n}${o}${i}`)}var wy;function G0(){return wy}function zt(n){let e=wy;return wy=n,e}function By(n,e,t){let r=vu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;wh(n,"Injector")}var gF={},xo=gF,Dy="__NG_DI_FLAG__",by=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ko(t)||0;try{return this.injector.get(e,r&8?null:xo,r)}catch(i){if(js(i))return i;throw i}}};function mF(n,e=0){let t=Nd();if(t===void 0)throw new j(-203,!1);if(t===null)return By(n,void 0,e);{let r=yF(e),i=t.retrieve(n,r);if(js(i)){if(r.optional)return null;throw i}return i}}function $(n,e=0){return(G0()||mF)(gt(n),e)}function S(n,e){return $(n,ko(e))}function ko(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function yF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Ty(n){let e=[];for(let t=0;t<n.length;t++){let r=gt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=vF(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push($(i,o))}else e.push($(r))}return e}function $y(n,e){return n[Dy]=e,n.prototype[Dy]=e,n}function vF(n){return n[Dy]}function Fi(n,e){let t=n.hasOwnProperty(pu);return t?n[pu]:null}function W0(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function K0(n){return n.flat(Number.POSITIVE_INFINITY)}function Dh(n,e){n.forEach(t=>Array.isArray(t)?Dh(t,e):e(t))}function Hy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function _u(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Q0(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function Y0(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function bh(n,e,t){let r=oa(n,e);return r>=0?n[r|1]=t:(r=~r,Y0(n,r,e,t)),r}function Th(n,e){let t=oa(n,e);if(t>=0)return n[t|1]}function oa(n,e){return _F(n,e,1)}function _F(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Hn={},Gt=[],Jr=new U(""),qy=new U("",-1),zy=new U(""),gu=class{get(e,t=xo){if(t===xo){let i=z0("",-201);throw i.name="\u0275NotFound",i}return t}};function Gy(n){return n[Vy]||null}function Xr(n){return n[Oy]||null}function Eu(n){return n[Fy]||null}function Wy(n){return n[Ly]||null}function Wt(n){return{\u0275providers:n}}function Z0(n){return Wt([{provide:Jr,multi:!0,useValue:n}])}function J0(...n){return{\u0275providers:Ch(!0,n),\u0275fromNgModule:!0}}function Ch(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Dh(e,s=>{let a=s;vh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&X0(i,o),t}function X0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Ky(i,o=>{e(o,r)})}}function vh(n,e,t,r){if(n=gt(n),!n)return!1;let i=null,o=Iy(n),s=!o&&Xr(n);if(!o&&!s){let u=n.ngModule;if(o=Iy(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)vh(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Dh(o.imports,h=>{vh(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&X0(l,e)}if(!a){let l=Fi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Gt},i),e({provide:zy,useValue:i,multi:!0},i),e({provide:Jr,useValue:()=>$(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Ky(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Ky(n,e){for(let t of n)ky(t)&&(t=t.\u0275providers),Array.isArray(t)?Ky(t,e):e(t)}var EF=Se({provide:String,useValue:Se});function eC(n){return n!==null&&typeof n=="object"&&EF in n}function IF(n){return!!(n&&n.useExisting)}function wF(n){return!!(n&&n.useFactory)}function Oo(n){return typeof n=="function"}function tC(n){return!!n.useClass}var Iu=new U(""),gh={},B0={},Ey;function wu(){return Ey===void 0&&(Ey=new gu),Ey}var et=class{},Fo=class extends et{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Sy(e,s=>this.processProvider(s)),this.records.set(qy,ia(void 0,this)),i.has("environment")&&this.records.set(et,ia(void 0,this));let o=this.records.get(Iu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(zy,Gt,{self:!0}))}retrieve(e,t){let r=ko(t)||0;try{return this.get(e,xo,r)}catch(i){if(js(i))return i;throw i}}destroy(){hu(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return hu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){hu(this);let t=lr(this),r=zt(void 0),i;try{return e()}finally{lr(t),zt(r)}}get(e,t=xo,r){if(hu(this),e.hasOwnProperty(U0))return e[U0](this);let i=ko(r),o,s=lr(this),a=zt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=SF(e)&&vu(e);h&&this.injectableDefInScope(h)?l=ia(Cy(e),gh):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?wu():this.parent;return t=i&8&&t===xo?null:t,u.get(e,t)}catch(u){let l=fF(u);throw l===-200||l===-201?new j(l,null):u}finally{zt(a),lr(s)}}resolveInjectorInitializers(){let e=J(null),t=lr(this),r=zt(void 0),i;try{let o=this.get(Jr,Gt,{self:!0});for(let s of o)s()}finally{lr(t),zt(r),J(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Zr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=gt(e);let t=Oo(e)?e:gt(e&&e.provide),r=bF(e);if(!Oo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ia(void 0,gh,!0),i.factory=()=>Ty(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=J(null);try{if(t.value===B0)throw Uy(Zr(e));return t.value===gh&&(t.value=B0,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&CF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=gt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Cy(n){let e=vu(n),t=e!==null?e.factory:Fi(n);if(t!==null)return t;if(n instanceof U)throw new j(204,!1);if(n instanceof Function)return DF(n);throw new j(204,!1)}function DF(n){if(n.length>0)throw new j(204,!1);let t=lF(n);return t!==null?()=>t.factory(n):()=>new n}function bF(n){if(eC(n))return ia(void 0,n.useValue);{let e=Qy(n);return ia(e,gh)}}function Qy(n,e,t){let r;if(Oo(n)){let i=gt(n);return Fi(i)||Cy(i)}else if(eC(n))r=()=>gt(n.useValue);else if(wF(n))r=()=>n.useFactory(...Ty(n.deps||[]));else if(IF(n))r=(i,o)=>$(gt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=gt(n&&(n.useClass||n.provide));if(TF(n))r=()=>new i(...Ty(n.deps));else return Fi(i)||Cy(i)}return r}function hu(n){if(n.destroyed)throw new j(205,!1)}function ia(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function TF(n){return!!n.deps}function CF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function SF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Sy(n,e){for(let t of n)Array.isArray(t)?Sy(t,e):t&&ky(t)?Sy(t.\u0275providers,e):e(t)}function mt(n,e){let t;n instanceof Fo?(hu(n),t=n):t=new by(n);let r,i=lr(t),o=zt(void 0);try{return e()}finally{lr(i),zt(o)}}function nC(){return G0()!==void 0||Nd()!=null}var qn=0,B=1,ne=2,at=3,Mn=4,Kt=5,Uo=6,sa=7,tt=8,_n=9,hr=10,je=11,aa=12,Yy=13,Bo=14,Qt=15,Vi=16,$o=17,fr=18,Du=19,Zy=20,Yr=21,Sh=22,ei=23,En=24,Ho=25,xe=26,rC=1,ji=6,Ui=7,bu=8,qo=9,yt=10;function pr(n){return Array.isArray(n)&&typeof n[rC]=="object"}function zn(n){return Array.isArray(n)&&n[rC]===!0}function Jy(n){return(n.flags&4)!==0}function Bi(n){return n.componentOffset>-1}function Tu(n){return(n.flags&1)===1}function Gn(n){return!!n.template}function ca(n){return(n[ne]&512)!==0}function gr(n){return(n[ne]&256)===256}var iC="svg",oC="math";function Pn(n){for(;Array.isArray(n);)n=n[qn];return n}function Ah(n,e){return Pn(e[n])}function Wn(n,e){return Pn(e[n.index])}function zo(n,e){return n.data[e]}function Xy(n,e){return n[e]}function ev(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function xn(n,e){let t=e[n];return pr(t)?t:t[qn]}function sC(n){return(n[ne]&4)===4}function Rh(n){return(n[ne]&128)===128}function aC(n){return zn(n[at])}function In(n,e){return e==null?null:n[e]}function tv(n){n[$o]=0}function nv(n){n[ne]&1024||(n[ne]|=1024,Rh(n)&&$i(n))}function rv(n,e){for(;n>0;)e=e[Bo],n--;return e}function Cu(n){return!!(n[ne]&9216||n[En]?.dirty)}function Nh(n){n[hr].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),Cu(n)&&$i(n)}function $i(n){n[hr].changeDetectionScheduler?.notify(0);let e=Li(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Rh(e)));)e=Li(e)}function Su(n,e){if(gr(n))throw new j(911,!1);n[Yr]===null&&(n[Yr]=[]),n[Yr].push(e)}function Mh(n,e){if(n[Yr]===null)return;let t=n[Yr].indexOf(e);t!==-1&&n[Yr].splice(t,1)}function Li(n){let e=n[at];return zn(e)?e[at]:e}function iv(n){return n[sa]??=[]}function ov(n){return n.cleanup??=[]}function cC(n,e,t,r){let i=iv(e);i.push(t),n.firstCreatePass&&ov(n).push(r,i.length-1)}var pe={lFrame:EC(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Au=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(Au||{}),AF=0,Ay=!1;function uC(){return pe.lFrame.elementDepthCount}function lC(){pe.lFrame.elementDepthCount++}function sv(){pe.lFrame.elementDepthCount--}function av(){return pe.bindingsEnabled}function cv(){return pe.skipHydrationRootTNode!==null}function uv(n){return pe.skipHydrationRootTNode===n}function lv(){pe.skipHydrationRootTNode=null}function X(){return pe.lFrame.lView}function He(){return pe.lFrame.tView}function nt(n){return pe.lFrame.contextLView=n,n[tt]}function rt(n){return pe.lFrame.contextLView=null,n}function vt(){let n=dv();for(;n!==null&&n.type===64;)n=n.parent;return n}function dv(){return pe.lFrame.currentTNode}function dC(){let n=pe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ua(n,e){let t=pe.lFrame;t.currentTNode=n,t.isParent=e}function hv(){return pe.lFrame.isParent}function fv(){pe.lFrame.isParent=!1}function hC(){return pe.lFrame.contextLView}function pv(n){Py("Must never be called in production mode"),AF=n}function gv(){return Ay}function la(n){let e=Ay;return Ay=n,e}function Ru(){let n=pe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function fC(){return pe.lFrame.bindingIndex}function pC(n){return pe.lFrame.bindingIndex=n}function da(){return pe.lFrame.bindingIndex++}function Ph(n){let e=pe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function gC(){return pe.lFrame.inI18n}function mC(n,e){let t=pe.lFrame;t.bindingIndex=t.bindingRootIndex=n,xh(e)}function yC(){return pe.lFrame.currentDirectiveIndex}function xh(n){pe.lFrame.currentDirectiveIndex=n}function vC(n){let e=pe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function mv(){return pe.lFrame.currentQueryIndex}function kh(n){pe.lFrame.currentQueryIndex=n}function RF(n){let e=n[B];return e.type===2?e.declTNode:e.type===1?n[Kt]:null}function yv(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=RF(o),i===null||(o=o[Bo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=pe.lFrame=_C();return r.currentTNode=e,r.lView=n,!0}function Oh(n){let e=_C(),t=n[B];pe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function _C(){let n=pe.lFrame,e=n===null?null:n.child;return e===null?EC(n):e}function EC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function IC(){let n=pe.lFrame;return pe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var vv=IC;function Fh(){let n=IC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function wC(n){return(pe.lFrame.contextLView=rv(n,pe.lFrame.contextLView))[tt]}function mr(){return pe.lFrame.selectedIndex}function Hi(n){pe.lFrame.selectedIndex=n}function _v(){let n=pe.lFrame;return zo(n.tView,n.selectedIndex)}function DC(){return pe.lFrame.currentNamespace}var bC=!0;function Lh(){return bC}function Vh(n){bC=n}function Ry(n,e=null,t=null,r){let i=Ev(n,e,t,r);return i.resolveInjectorInitializers(),i}function Ev(n,e=null,t=null,r,i=new Set){let o=[t||Gt,J0(n)];return r=r||(typeof n=="object"?void 0:Zr(n)),new Fo(o,e||wu(),r||null,i)}var Ve=class n{static THROW_IF_NOT_FOUND=xo;static NULL=new gu;static create(e,t){if(Array.isArray(e))return Ry({name:""},t,e,"");{let r=e.name??"";return Ry({name:r},e.parent,e.providers,r)}}static \u0275prov=F({token:n,providedIn:"any",factory:()=>$(qy)});static __NG_ELEMENT_ID__=-1},wt=new U(""),Mt=(()=>{class n{static __NG_ELEMENT_ID__=NF;static __NG_ENV_ID__=t=>t}return n})(),mu=class extends Mt{_lView;constructor(e){super(),this._lView=e}get destroyed(){return gr(this._lView)}onDestroy(e){let t=this._lView;return Su(t,e),()=>Mh(t,e)}};function NF(){return new mu(X())}var vn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Lt=new U("",{providedIn:"root",factory:()=>{let n=S(et),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(vn),e.handleError(t))}}}),TC={provide:Jr,useValue:()=>void S(vn),multi:!0},MF=new U("",{providedIn:"root",factory:()=>{let n=S(wt).defaultView;if(!n)return;let e=S(Lt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),S(Mt).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function PF(){return Wt([Z0(()=>void S(MF))])}function Ae(n,e){let[t,r,i]=ty(n,e?.equal),o=t,s=o[Ht];return o.set=r,o.update=i,o.asReadonly=Iv.bind(o),o}function Iv(){let n=this[Ht];if(n.readonlyFn===void 0){let e=()=>this();e[Ht]=n,n.readonlyFn=e}return n.readonlyFn}var Rn=class{},Nu=new U("",{providedIn:"root",factory:()=>!1});var wv=new U(""),jh=new U("");var ha=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=xF}return n})();function xF(){return new ha(X(),vt())}var yr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Nt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new he(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),qi=(()=>{class n{internalPendingTasks=S(yr);scheduler=S(Rn);errorHandler=S(Lt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})();function Go(...n){}var Mu=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:()=>new Ny})}return n})(),Ny=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function wa(n){return{toString:n}.toString()}var Uh="__parameters__";function $F(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function cS(n,e,t){return wa(()=>{let r=$F(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Uh)?u[Uh]:Object.defineProperty(u,Uh,{value:[]})[Uh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var _t=$y(cS("Optional"),8);var uS=$y(cS("SkipSelf"),4);function HF(n){return typeof n=="function"}var Qh=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function lS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var kn=(()=>{let n=()=>dS;return n.ngInherit=!0,n})();function dS(n){return n.type.prototype.ngOnChanges&&(n.setInput=zF),qF}function qF(){let n=fS(this),e=n?.current;if(e){let t=n.previous;if(t===Hn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function zF(n,e,t,r,i){let o=this.declaredInputs[r],s=fS(n)||GF(n,{previous:Hn,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Qh(l&&l.currentValue,t,u===Hn),lS(n,e,i,t)}var hS="__ngSimpleChanges__";function fS(n){return n[hS]||null}function GF(n,e){return n[hS]=e}var CC=[];var be=function(n,e=null,t){for(let r=0;r<CC.length;r++){let i=CC[r];i(n,e,t)}};function WF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=dS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function pS(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Hh(n,e,t){gS(n,e,3,t)}function qh(n,e,t,r){(n[ne]&3)===t&&gS(n,e,t,r)}function Dv(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function gS(n,e,t,r){let i=r!==void 0?n[$o]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[$o]+=65536),(a<o||o==-1)&&(KF(n,t,e,u),n[$o]=(n[$o]&4294901760)+u+2),u++}function SC(n,e){be(4,n,e);let t=J(null);try{e.call(n)}finally{J(t),be(5,n,e)}}function KF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[$o]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,SC(a,o)):SC(a,o)}var ma=-1,Ko=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function QF(n){return(n.flags&8)!==0}function YF(n){return(n.flags&16)!==0}function ZF(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];JF(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function mS(n){return n===3||n===4||n===6}function JF(n){return n.charCodeAt(0)===64}function va(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?AC(n,t,i,null,e[++r]):AC(n,t,i,null,null))}}return n}function AC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function yS(n){return n!==ma}function Yh(n){return n&32767}function XF(n){return n>>16}function Zh(n,e){let t=XF(n),r=e;for(;t>0;)r=r[Bo],t--;return r}var Fv=!0;function Jh(n){let e=Fv;return Fv=n,e}var eL=256,vS=eL-1,_S=5,tL=0,vr={};function nL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Vo)&&(r=t[Vo]),r==null&&(r=t[Vo]=tL++);let i=r&vS,o=1<<i;e.data[n+(i>>_S)]|=o}function Xh(n,e){let t=ES(n,e);if(t!==-1)return t;let r=e[B];r.firstCreatePass&&(n.injectorIndex=e.length,bv(r.data,n),bv(e,null),bv(r.blueprint,null));let i=f_(n,e),o=n.injectorIndex;if(yS(i)){let s=Yh(i),a=Zh(i,e),u=a[B].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function bv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ES(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function f_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=TS(i),r===null)return ma;if(t++,i=i[Bo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ma}function Lv(n,e,t){nL(n,e,t)}function rL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(mS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function IS(n,e,t){if(t&8||n!==void 0)return n;wh(e,"NodeInjector")}function wS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[_n],o=zt(void 0);try{return i?i.get(e,r,t&8):By(e,r,t&8)}finally{zt(o)}}return IS(r,e,t)}function DS(n,e,t,r=0,i){if(n!==null){if(e[ne]&2048&&!(r&2)){let s=aL(n,e,t,r,vr);if(s!==vr)return s}let o=bS(n,e,t,r,vr);if(o!==vr)return o}return wS(e,t,r,i)}function bS(n,e,t,r,i){let o=oL(t);if(typeof o=="function"){if(!yv(e,n,r))return r&1?IS(i,t,r):wS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))wh(t);else return s}finally{vv()}}else if(typeof o=="number"){let s=null,a=ES(n,e),u=ma,l=r&1?e[Qt][Kt]:null;for((a===-1||r&4)&&(u=a===-1?f_(n,e):e[a+8],u===ma||!NC(r,!1)?a=-1:(s=e[B],a=Yh(u),e=Zh(u,e)));a!==-1;){let h=e[B];if(RC(o,a,h.data)){let p=iL(a,e,t,s,r,l);if(p!==vr)return p}u=e[a+8],u!==ma&&NC(r,e[B].data[a+8]===l)&&RC(o,a,e)?(s=h,a=Yh(u),e=Zh(u,e)):a=-1}}return i}function iL(n,e,t,r,i,o){let s=e[B],a=s.data[n+8],u=r==null?Bi(a)&&Fv:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=zh(a,s,t,u,l);return h!==null?ku(e,s,h,a,i):vr}function zh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let I=s[y];if(y<u&&t===I||y>=u&&I.type===t)return y}if(i){let y=s[u];if(y&&Gn(y)&&y.type===t)return u}return null}function ku(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Ko){let a=o;if(a.resolving){let y=yh(s[t]);throw Uy(y)}let u=Jh(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?zt(a.injectImpl):null,g=yv(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&WF(t,s[t],e)}finally{p!==null&&zt(p),Jh(u),a.resolving=!1,vv()}}return o}function oL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Vo)?n[Vo]:void 0;return typeof e=="number"?e>=0?e&vS:sL:e}function RC(n,e,t){let r=1<<n;return!!(t[e+(n>>_S)]&r)}function NC(n,e){return!(n&2)&&!(n&1&&e)}var Wo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return DS(this._tNode,this._lView,e,ko(r),t)}};function sL(){return new Wo(vt(),X())}function ni(n){return wa(()=>{let e=n.prototype.constructor,t=e[pu]||Vv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[pu]||Vv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Vv(n){return My(n)?()=>{let e=Vv(gt(n));return e&&e()}:Fi(n)}function aL(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!ca(s);){let a=bS(o,s,t,r|2,vr);if(a!==vr)return a;let u=o.parent;if(!u){let l=s[Zy];if(l){let h=l.get(t,vr,r);if(h!==vr)return h}u=TS(s),s=s[Bo]}o=u}return i}function TS(n){let e=n[B],t=e.type;return t===2?e.declTNode:t===1?n[Kt]:null}function Uu(n){return rL(vt(),n)}function cL(){return Da(vt(),X())}function Da(n,e){return new Vt(Wn(n,e))}var Vt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=cL}return n})();function uL(n){return n instanceof Vt?n.nativeElement:n}function lL(){return this._results[Symbol.iterator]()}var ef=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Xe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=K0(e);(this._changesDetected=!W0(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=lL};function CS(n){return(n.flags&128)===128}var p_=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(p_||{}),SS=new Map,dL=0;function hL(){return dL++}function fL(n){SS.set(n[Du],n)}function jv(n){SS.delete(n[Du])}var MC="__ngContext__";function _a(n,e){pr(e)?(n[MC]=e[Du],fL(e)):n[MC]=e}function AS(n){return NS(n[aa])}function RS(n){return NS(n[Mn])}function NS(n){for(;n!==null&&!zn(n);)n=n[Mn];return n}var Uv;function g_(n){Uv=n}function MS(){if(Uv!==void 0)return Uv;if(typeof document<"u")return document;throw new j(210,!1)}var yf=new U("",{providedIn:"root",factory:()=>pL}),pL="ng",vf=new U(""),Wi=new U("",{providedIn:"platform",factory:()=>"unknown"});var _f=new U("",{providedIn:"root",factory:()=>MS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var gL="h",mL="b";var PS="r";var m_="di",y_="s";var xS=!1,kS=new U("",{providedIn:"root",factory:()=>xS});var OS=new U("");var pa=new WeakMap;var fa=null,Tv=0,Bv=class{callbacks=new Set;listener=()=>{for(let e of this.callbacks)e()}};function yL(){return new IntersectionObserver(n=>{for(let e of n)e.isIntersecting&&pa.has(e.target)&&pa.get(e.target).listener()})}function vL(n,e,t){let r=pa.get(n);return fa=fa||t(),r||(r=new Bv,fa.observe(n),pa.set(n,r),Tv++),r.callbacks.add(e),()=>{pa.has(n)&&(r.callbacks.delete(e),r.callbacks.size===0&&(fa?.unobserve(n),pa.delete(n),Tv--),Tv===0&&(fa?.disconnect(),fa=null))}}var _L=(n,e,t,r)=>{};function EL(n,e,t,r){_L(n,e,t,r)}var FS=new U("");function Ef(n){return(n.flags&32)===32}var IL=()=>null;function LS(n,e,t=!1){return IL(n,e,t)}function VS(n){return n.get(OS,!1,{optional:!0})}function jS(n,e){let t=n.contentQueries;if(t!==null){let r=J(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];kh(o),a.contentQueries(2,e[s],s)}}}finally{J(r)}}}function $v(n,e,t){kh(0);let r=J(null);try{e(n,t)}finally{J(r)}}function US(n,e,t){if(Jy(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{J(r)}}}var ti=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ti||{});var Bh;function wL(){if(Bh===void 0&&(Bh=null,yu.trustedTypes))try{Bh=yu.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Bh}function PC(n){return wL()?.createScriptURL(n)||n}var tf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_h})`}};function Bu(n){return n instanceof tf?n.changingThisBreaksApplicationSecurity:n}function v_(n,e){let t=BS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${_h})`)}return t===e}function BS(n){return n instanceof tf&&n.getTypeName()||null}var DL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function $S(n){return n=String(n),n.match(DL)?n:"unsafe:"+n}var If=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(If||{});function HS(n){let e=zS();return e?e.sanitize(If.URL,n)||"":v_(n,"URL")?Bu(n):$S(jo(n))}function qS(n){let e=zS();if(e)return PC(e.sanitize(If.RESOURCE_URL,n)||"");if(v_(n,"ResourceURL"))return PC(Bu(n));throw new j(904,!1)}function bL(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?qS:HS}function __(n,e,t){return bL(e,t)(n)}function zS(){let n=X();return n&&n[hr].sanitizer}function GS(n){return n instanceof Function?n():n}function TL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var WS="ng-template";function CL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&TL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(E_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function E_(n){return n.type===4&&n.value!==WS}function SL(n,e,t){let r=n.type===4&&!t?WS:n.value;return e===r}function AL(n,e,t){let r=4,i=n.attrs,o=i!==null?ML(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Kn(r)&&!Kn(u))return!1;if(s&&Kn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!SL(n,u,t)||u===""&&e.length===1){if(Kn(r))return!1;s=!0}}else if(r&8){if(i===null||!CL(n,i,u,t)){if(Kn(r))return!1;s=!0}}else{let l=e[++a],h=RL(u,i,E_(n),t);if(h===-1){if(Kn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Kn(r))return!1;s=!0}}}}return Kn(r)||s}function Kn(n){return(n&1)===0}function RL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return PL(e,n)}function KS(n,e,t=!1){for(let r=0;r<e.length;r++)if(AL(n,e[r],t))return!0;return!1}function NL(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function ML(n){for(let e=0;e<n.length;e++){let t=n[e];if(mS(t))return e}return n.length}function PL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function xL(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function xC(n,e){return n?":not("+e.trim()+")":e}function kL(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Kn(s)&&(e+=xC(o,i),i=""),r=s,o=o||!Kn(r);t++}return i!==""&&(e+=xC(o,i)),e}function OL(n){return n.map(kL).join(",")}function FL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Kn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Yt={};function LL(n,e){return n.createText(e)}function VL(n,e,t){n.setValue(e,t)}function QS(n,e,t){return n.createElement(e,t)}function nf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function YS(n,e,t){n.appendChild(e,t)}function kC(n,e,t,r,i){r!==null?nf(n,e,t,r,i):YS(n,e,t)}function ZS(n,e,t){n.removeChild(null,e,t)}function jL(n,e,t){n.setAttribute(e,"style",t)}function UL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function JS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&ZF(n,e,r),i!==null&&UL(n,e,i),o!==null&&jL(n,e,o)}function I_(n,e,t,r,i,o,s,a,u,l,h){let p=xe+r,g=p+i,y=BL(p,g),I=typeof l=="function"?l():l;return y[B]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:I,incompleteFirstPass:!1,ssrId:h}}function BL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Yt);return t}function $L(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=I_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function w_(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[qn]=i,p[ne]=r|4|128|8|64|1024,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),tv(p),p[at]=p[Bo]=n,p[tt]=t,p[hr]=s||n&&n[hr],p[je]=a||n&&n[je],p[_n]=u||n&&n[_n]||null,p[Kt]=o,p[Du]=hL(),p[Uo]=h,p[Zy]=l,p[Qt]=e.type==2?n[Qt]:p,p}function HL(n,e,t){let r=Wn(e,n),i=$L(t),o=n[hr].rendererFactory,s=D_(n,w_(n,i,null,XS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function XS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function eA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function D_(n,e){return n[aa]?n[Yy][Mn]=e:n[aa]=e,n[Yy]=e,e}function te(n=1){tA(He(),X(),mr()+n,!1)}function tA(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Hh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&qh(e,o,0,t)}Hi(t)}var wf=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(wf||{});function Hv(n,e,t,r){let i=J(null);try{let[o,s,a]=n.inputs[t],u=null;(s&wf.SignalBased)!==0&&(u=e[o][Ht]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):lS(e,u,o,r)}finally{J(i)}}var _r=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_r||{}),qL;function b_(n,e){return qL(n,e)}function ga(n,e,t,r,i){if(r!=null){let o,s=!1;zn(r)?o=r:pr(r)&&(s=!0,r=r[qn]);let a=Pn(r);n===0&&t!==null?i==null?YS(e,t,a):nf(e,t,a,i||null,!0):n===1&&t!==null?nf(e,t,a,i||null,!0):n===2?ZS(e,a,s):n===3&&e.destroyNode(a),o!=null&&eV(e,n,o,t,i)}}function zL(n,e){nA(n,e),e[qn]=null,e[Kt]=null}function GL(n,e,t,r,i,o){r[qn]=i,r[Kt]=e,bf(n,r,t,1,i,o)}function nA(n,e){e[hr].changeDetectionScheduler?.notify(9),bf(n,e,e[je],2,null,null)}function WL(n){let e=n[aa];if(!e)return Cv(n[B],n);for(;e;){let t=null;if(pr(e))t=e[aa];else{let r=e[yt];r&&(t=r)}if(!t){for(;e&&!e[Mn]&&e!==n;)pr(e)&&Cv(e[B],e),e=e[at];e===null&&(e=n),pr(e)&&Cv(e[B],e),t=e&&e[Mn]}e=t}}function T_(n,e){let t=n[qo],r=t.indexOf(e);t.splice(r,1)}function Df(n,e){if(gr(e))return;let t=e[je];t.destroyNode&&bf(n,e,t,3,null,null),WL(e)}function Cv(n,e){if(gr(e))return;let t=J(null);try{e[ne]&=-129,e[ne]|=256,e[En]&&$s(e[En]),QL(n,e),KL(n,e),e[B].type===1&&e[je].destroy();let r=e[Vi];if(r!==null&&zn(e[at])){r!==e[at]&&T_(r,e);let i=e[fr];i!==null&&i.detachView(n)}jv(e)}finally{J(t)}}function KL(n,e){let t=n.cleanup,r=e[sa];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[sa]=null);let i=e[Yr];if(i!==null){e[Yr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ei];if(o!==null){e[ei]=null;for(let s of o)s.destroy()}}function QL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ko)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];be(4,a,u);try{u.call(a)}finally{be(5,a,u)}}else{be(4,i,o);try{o.call(i)}finally{be(5,i,o)}}}}}function rA(n,e,t){return YL(n,e.parent,t)}function YL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[qn];if(Bi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===ti.None||i===ti.Emulated)return null}return Wn(r,t)}function iA(n,e,t){return JL(n,e,t)}function ZL(n,e,t){return n.type&40?Wn(n,t):null}var JL=ZL,OC;function C_(n,e,t,r){let i=rA(n,r,e),o=e[je],s=r.parent||e[Kt],a=iA(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)kC(o,i,t[u],a,!1);else kC(o,i,t,a,!1);OC!==void 0&&OC(o,r,e,t,i)}function Pu(n,e){if(e!==null){let t=e.type;if(t&3)return Wn(e,n);if(t&4)return qv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Pu(n,r);{let i=n[e.index];return zn(i)?qv(-1,i):Pn(i)}}else{if(t&128)return Pu(n,e.next);if(t&32)return b_(e,n)()||Pn(n[e.index]);{let r=oA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Li(n[Qt]);return Pu(i,r)}else return Pu(n,e.next)}}}return null}function oA(n,e){if(e!==null){let r=n[Qt][Kt],i=e.projection;return r.projection[i]}return null}function qv(n,e){let t=yt+n+1;if(t<e.length){let r=e[t],i=r[B].firstChild;if(i!==null)return Pu(r,i)}return e[Ui]}function S_(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&_a(Pn(a),r),t.flags|=2),!Ef(t))if(u&8)S_(n,e,t.child,r,i,o,!1),ga(e,n,i,a,o);else if(u&32){let l=b_(t,r),h;for(;h=l();)ga(e,n,i,h,o);ga(e,n,i,a,o)}else u&16?sA(n,e,r,t,i,o):ga(e,n,i,a,o);t=s?t.projectionNext:t.next}}function bf(n,e,t,r,i,o){S_(t,r,n.firstChild,e,i,o,!1)}function XL(n,e,t){let r=e[je],i=rA(n,t,e),o=t.parent||e[Kt],s=iA(o,t,e);sA(r,0,e,t,i,s)}function sA(n,e,t,r,i,o){let s=t[Qt],u=s[Kt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ga(e,n,i,h,o)}else{let l=u,h=s[at];CS(r)&&(l.flags|=128),S_(n,e,l,h,i,o,!0)}}function eV(n,e,t,r,i){let o=t[Ui],s=Pn(t);o!==s&&ga(e,n,r,o,i);for(let a=yt;a<t.length;a++){let u=t[a];bf(u[B],u,n,e,r,o)}}function tV(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:_r.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_r.Important),n.setStyle(t,r,i,o))}}function aA(n,e,t,r,i){let o=mr(),s=r&2;try{Hi(-1),s&&e.length>xe&&tA(n,e,xe,!1),be(s?2:0,i,t),t(r,i)}finally{Hi(o),be(s?3:1,i,t)}}function A_(n,e,t){uV(n,e,t),(t.flags&64)===64&&lV(n,e,t)}function Tf(n,e,t=Wn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function nV(n,e,t,r){let o=r.get(kS,xS)||t===ti.ShadowDom,s=n.selectRootElement(e,o);return rV(s),s}function rV(n){iV(n)}var iV=()=>null;function oV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function sV(n,e,t,r,i,o){let s=e[B];if(N_(n,s,e,t,r)){Bi(n)&&cV(e,n.index);return}n.type&3&&(t=oV(t)),aV(n,e,t,r,i,o)}function aV(n,e,t,r,i,o){if(n.type&3){let s=Wn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function cV(n,e){let t=xn(e,n);t[ne]&16||(t[ne]|=64)}function uV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Bi(t)&&HL(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Xh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=ku(e,n,s,t);if(_a(u,e),o!==null&&pV(e,s-r,u,a,t,o),Gn(a)){let l=xn(t.index,e);l[tt]=ku(e,n,s,t)}}}function lV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=yC();try{Hi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];xh(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&dV(u,l)}}finally{Hi(-1),xh(s)}}function dV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function cA(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];KS(e,o.selectors,!1)&&(r??=[],Gn(o)?r.unshift(o):r.push(o))}return r}function hV(n,e,t,r,i,o){let s=Wn(n,e);fV(e[je],s,o,n.value,t,r,i)}function fV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?jo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function pV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Hv(r,t,u,l)}}function uA(n,e,t,r,i){let o=xe+t,s=e[B],a=i(s,e,n,r,t);e[o]=a,ua(n,!0);let u=n.type===2;return u?(JS(e[je],a,n),(uC()===0||Tu(n))&&_a(a,e),lC()):_a(a,e),Lh()&&(!u||!Ef(n))&&C_(s,e,a,n),n}function lA(n){let e=n;return hv()?fv():(e=e.parent,ua(e,!1)),e}function R_(n,e){let t=n[_n];if(!t)return;t.get(Lt,null)?.(e)}function N_(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Hv(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Hv(h,l,r,i),a=!0}return a}function gV(n,e){let t=xn(e,n),r=t[B];mV(r,t);let i=t[qn];i!==null&&t[Uo]===null&&(t[Uo]=LS(i,t[_n])),be(18),M_(r,t,t[tt]),be(19,t[tt])}function mV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function M_(n,e,t){Oh(e);try{let r=n.viewQuery;r!==null&&$v(1,r,t);let i=n.template;i!==null&&aA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[fr]?.finishViewCreation(n),n.staticContentQueries&&jS(n,e),n.staticViewQueries&&$v(2,n.viewQuery,t);let o=n.components;o!==null&&yV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,Fh()}}function yV(n,e){for(let t=0;t<e.length;t++)gV(n,e[t])}function ba(n,e,t,r){let i=J(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=w_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Vi]=l;let h=n[fr];return h!==null&&(u[fr]=h.createEmbeddedView(o)),M_(o,u,t),u}finally{J(i)}}function Qo(n,e){return!e||e.firstChild===null||CS(n)}var FC=!1,vV=new U("");function Ou(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Pn(o)),zn(o)&&dA(o,r);let s=t.type;if(s&8)Ou(n,e,t.child,r);else if(s&32){let a=b_(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=oA(e,t);if(Array.isArray(a))r.push(...a);else{let u=Li(e[Qt]);Ou(u[B],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function dA(n,e){for(let t=yt;t<n.length;t++){let r=n[t],i=r[B].firstChild;i!==null&&Ou(r[B],r,i,e)}n[Ui]!==n[qn]&&e.push(n[Ui])}function hA(n){if(n[Ho]!==null){for(let e of n[Ho])e.impl.addSequence(e);n[Ho].length=0}}var fA=[];function _V(n){return n[En]??EV(n)}function EV(n){let e=fA.pop()??Object.create(wV);return e.lView=n,e}function IV(n){n.lView[En]!==n&&(n.lView=null,fA.push(n))}var wV=Z(P({},Ni),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{$i(n.lView)},consumerOnSignalRead(){this.lView[En]=this}});function DV(n){let e=n[En]??Object.create(bV);return e.lView=n,e}var bV=Z(P({},Ni),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Li(n.lView);for(;e&&!pA(e[B]);)e=Li(e);e&&nv(e)},consumerOnSignalRead(){this.lView[En]=this}});function pA(n){return n.type!==2}function gA(n){if(n[ei]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ei])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ne]&8192)}}var TV=100;function P_(n,e=0){let r=n[hr].rendererFactory,i=!1;i||r.begin?.();try{CV(n,e)}finally{i||r.end?.()}}function CV(n,e){let t=gv();try{la(!0),zv(n,e);let r=0;for(;Cu(n);){if(r===TV)throw new j(103,!1);r++,zv(n,1)}}finally{la(t)}}function mA(n,e){pv(e?Au.Exhaustive:Au.OnlyDirtyViews);try{P_(n)}finally{pv(Au.Off)}}function SV(n,e,t,r){if(gr(e))return;let i=e[ne],o=!1,s=!1;Oh(e);let a=!0,u=null,l=null;o||(pA(n)?(l=_V(e),u=Mi(l)):Fd()===null?(a=!1,l=DV(e),u=Mi(l)):e[En]&&($s(e[En]),e[En]=null));try{tv(e),pC(n.bindingStartIndex),t!==null&&aA(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Hh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&qh(e,y,0,null),Dv(e,0)}if(s||AV(e),gA(e),yA(e,0),n.contentQueries!==null&&jS(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Hh(e,y)}else{let y=n.contentHooks;y!==null&&qh(e,y,1),Dv(e,1)}NV(n,e);let p=n.components;p!==null&&_A(e,p,0);let g=n.viewQuery;if(g!==null&&$v(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Hh(e,y)}else{let y=n.viewHooks;y!==null&&qh(e,y,2),Dv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Sh]){for(let y of e[Sh])y();e[Sh]=null}o||(hA(e),e[ne]&=-73)}catch(h){throw o||$i(e),h}finally{l!==null&&(So(l,u),a&&IV(l)),Fh()}}function yA(n,e){for(let t=AS(n);t!==null;t=RS(t))for(let r=yt;r<t.length;r++){let i=t[r];vA(i,e)}}function AV(n){for(let e=AS(n);e!==null;e=RS(e)){if(!(e[ne]&2))continue;let t=e[qo];for(let r=0;r<t.length;r++){let i=t[r];nv(i)}}}function RV(n,e,t){be(18);let r=xn(e,n);vA(r,t),be(19,r[tt])}function vA(n,e){Rh(n)&&zv(n,e)}function zv(n,e){let r=n[B],i=n[ne],o=n[En],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Bs(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)SV(r,n,r.template,n[tt]);else if(i&8192){let a=J(null);try{gA(n),yA(n,1);let u=r.components;u!==null&&_A(n,u,1),hA(n)}finally{J(a)}}}function _A(n,e,t){for(let r=0;r<e.length;r++)RV(n,e[r],t)}function NV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Hi(~i);else{let o=i,s=t[++r],a=t[++r];mC(s,o);let u=e[o];be(24,u),a(2,u),be(25,u)}}}finally{Hi(-1)}}function Cf(n,e){let t=gv()?64:1088;for(n[hr].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=Li(n);if(ca(n)&&!r)return n;n=r}return null}function EA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function IA(n,e){let t=yt+e;if(t<n.length)return n[t]}function Ta(n,e,t,r=!0){let i=e[B];if(MV(i,e,n,t),r){let s=qv(t,n),a=e[je],u=a.parentNode(n[Ui]);u!==null&&GL(i,n[Kt],a,e,u,s)}let o=e[Uo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function x_(n,e){let t=Fu(n,e);return t!==void 0&&Df(t[B],t),t}function Fu(n,e){if(n.length<=yt)return;let t=yt+e,r=n[t];if(r){let i=r[Vi];i!==null&&i!==n&&T_(i,r),e>0&&(n[t-1][Mn]=r[Mn]);let o=_u(n,yt+e);zL(r[B],r);let s=o[fr];s!==null&&s.detachView(o[B]),r[at]=null,r[Mn]=null,r[ne]&=-129}return r}function MV(n,e,t,r){let i=yt+r,o=t.length;r>0&&(t[i-1][Mn]=e),r<o-yt?(e[Mn]=t[i],Hy(t,yt+r,e)):(t.push(e),e[Mn]=null),e[at]=t;let s=e[Vi];s!==null&&t!==s&&wA(s,e);let a=e[fr];a!==null&&a.insertView(n),Nh(e),e[ne]|=128}function wA(n,e){let t=n[qo],r=e[at];if(pr(r))n[ne]|=2;else{let i=r[at][Qt];e[Qt]!==i&&(n[ne]|=2)}t===null?n[qo]=[e]:t.push(e)}var Gi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[B];return Ou(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[tt]}set context(e){this._lView[tt]=e}get destroyed(){return gr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[at];if(zn(e)){let t=e[bu],r=t?t.indexOf(this):-1;r>-1&&(Fu(e,r),_u(t,r))}this._attachedToViewContainer=!1}Df(this._lView[B],this._lView)}onDestroy(e){Su(this._lView,e)}markForCheck(){Cf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Nh(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,P_(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[_n].get(vV,FC)}catch{this.exhaustive=FC}}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ca(this._lView),t=this._lView[Vi];t!==null&&!e&&T_(t,this._lView),nA(this._lView[B],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=ca(this._lView),r=this._lView[Vi];r!==null&&!t&&wA(r,this._lView),Nh(this._lView)}};var Yo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=PV;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=ba(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Gi(o)}}return n})();function PV(){return k_(vt(),X())}function k_(n,e){return n.type&4?new Yo(e,n,Da(n,e)):null}function Ca(n,e,t,r,i){let o=n.data[e];if(o===null)o=xV(n,e,t,r,i),gC()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=dC();o.injectorIndex=s===null?-1:s.injectorIndex}return ua(o,!0),o}function xV(n,e,t,r,i){let o=dv(),s=hv(),a=s?o:o&&o.parent,u=n.data[e]=OV(n,a,t,e,r,i);return kV(n,u,o,s),u}function kV(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function OV(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return cv()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var pJ=new RegExp(`^(\\d+)*(${mL}|${gL})*(.*)`);function FV(n){let e=n[ji]??[],r=n[at][je],i=[];for(let o of e)o.data[m_]!==void 0?i.push(o):LV(o,r);n[ji]=i}function LV(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[PS];for(;t<i;){let o=r.nextSibling;ZS(e,r,!1),r=o,t++}}}var VV=()=>null,jV=()=>null;function rf(n,e){return VV(n,e)}function DA(n,e,t){return jV(n,e,t)}var bA=class{},Sf=class{},Gv=class{resolveComponentFactory(e){throw new j(917,!1)}},$u=class{static NULL=new Gv},Zo=class{},ln=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>UV()}return n})();function UV(){let n=X(),e=vt(),t=xn(e.index,n);return(pr(t)?t:n)[je]}var TA=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:()=>null})}return n})();var Gh={},ya=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Gh,r);return i!==Gh||t===Gh?i:this.parentInjector.get(e,t,r)}};function of(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Eh(i,a);else if(o==2){let u=a,l=e[++s];r=Eh(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function W(n,e=0){let t=X();if(t===null)return $(n,e);let r=vt();return DS(r,t,gt(n),e)}function CA(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}HV(n,e,t,a,o,u,l)}o!==null&&r!==null&&BV(t,r,o)}function BV(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function $V(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function HV(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&Gn(y)&&(u=!0,$V(n,t,g)),Lv(Xh(t,e),n,y.type)}QV(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=eA(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=va(t.mergedAttrs,y.hostAttrs),zV(n,t,e,p,y),KV(p,y,i),s!==null&&s.has(y)){let[A,N]=s.get(y);t.directiveToIndex.set(y.type,[p,A+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let I=y.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}qV(n,t,o)}function qV(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))LC(0,e,i,r),LC(1,e,i,r),jC(e,r,!1);else{let o=t.get(i);VC(0,e,o,r),VC(1,e,o,r),jC(e,r,!0)}}}function LC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),SA(e,o)}}function VC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),SA(e,s)}}function SA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function jC(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||E_(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function zV(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Fi(i.type,!0)),s=new Ko(o,Gn(i),W,null);n.blueprint[r]=s,t[r]=s,GV(n,e,r,eA(n,t,i.hostVars,Yt),i)}function GV(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;WV(s)!=a&&s.push(a),s.push(t,r,o)}}function WV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function KV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Gn(e)&&(t[""]=n)}}function QV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function AA(n,e,t,r,i,o,s,a){let u=e[B],l=u.consts,h=In(l,s),p=Ca(u,n,t,r,h);return o&&CA(u,e,p,In(l,a),i),p.mergedAttrs=va(p.mergedAttrs,p.attrs),p.attrs!==null&&of(p,p.attrs,!1),p.mergedAttrs!==null&&of(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function RA(n,e){pS(n,e),Jy(e)&&n.queries.elementEnd(e)}function YV(n,e,t,r,i,o){let s=e.consts,a=In(s,i),u=Ca(e,n,t,r,a);if(u.mergedAttrs=va(u.mergedAttrs,u.attrs),o!=null){let l=In(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&of(u,u.attrs,!1),u.mergedAttrs!==null&&of(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function O_(n){return MA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function NA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function MA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function F_(n,e,t){return n[e]=t}function ZV(n,e){return n[e]}function Er(n,e,t){if(t===Yt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function PA(n,e,t,r){let i=Er(n,e,t);return Er(n,e+1,r)||i}function Wh(n,e,t){return function r(i){let o=Bi(n)?xn(n.index,e):e;Cf(o,5);let s=e[tt],a=UC(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=UC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function UC(n,e,t,r){let i=J(null);try{return be(6,e,t),t(r)!==!1}catch(o){return R_(n,o),!1}finally{be(7,e,t),J(i)}}function xA(n,e,t,r,i,o,s,a){let u=Tu(n),l=!1,h=null;if(!r&&u&&(h=JV(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Wn(n,t),g=r?r(p):p;EL(t,g,o,a);let y=i.listen(g,o,a),I=r?A=>r(Pn(A[n.index])):n.index;kA(I,e,t,o,a,y,!1)}return l}function JV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[sa],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function kA(n,e,t,r,i,o,s){let a=e.firstCreatePass?ov(e):null,u=iv(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function BC(n,e,t,r,i,o){let s=e[t],a=e[B],l=a.data[t].outputs[r],p=s[l].subscribe(o);kA(n.index,a,e,i,o,p,!0)}var Wv=Symbol("BINDING");var sf=class extends $u{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Xr(e);return new Ea(t,this.ngModule)}};function XV(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&wf.SignalBased)!==0};return i&&(o.transform=i),o})}function e2(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function t2(n,e,t){let r=e instanceof et?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new ya(t,r):t}function n2(n){let e=n.get(Zo,null);if(e===null)throw new j(407,!1);let t=n.get(TA,null),r=n.get(Rn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function r2(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return QS(e,t,t==="svg"?iC:t==="math"?oC:null)}var Ea=class extends Sf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=XV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=e2(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=OL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){be(22);let a=J(null);try{let u=this.componentDef,l=i2(r,u,s,o),h=t2(u,i||this.ngModule,e),p=n2(h),g=p.rendererFactory.createRenderer(null,u),y=r?nV(g,r,u.encapsulation,h):r2(u,g),I=s?.some($C)||o?.some(k=>typeof k!="function"&&k.bindings.some($C)),A=w_(null,l,null,512|XS(u),null,null,p,g,h,null,LS(y,h,!0));A[xe]=y,Oh(A);let N=null;try{let k=AA(xe,A,2,"#host",()=>l.directiveRegistry,!0,0);y&&(JS(g,y,k),_a(y,A)),A_(l,A,k),US(l,k,A),RA(l,k),t!==void 0&&s2(k,this.ngContentSelectors,t),N=xn(k.index,A),A[tt]=N[tt],M_(l,A,null)}catch(k){throw N!==null&&jv(N),jv(A),k}finally{be(23),Fh()}return new af(this.componentType,A,!!I)}finally{J(a)}}};function i2(n,e,t,r){let i=n?["ng-version","20.1.2"]:FL(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[Wv].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[Wv].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Eu(p);u.push(g)}return I_(0,null,o2(o,s),1,a,u,null,null,null,[i],null)}function o2(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function $C(n){let e=n[Wv].kind;return e==="input"||e==="twoWay"}var af=class extends bA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=zo(t[B],xe),this.location=Da(this._tNode,t),this.instance=xn(this._tNode.index,t)[tt],this.hostView=this.changeDetectorRef=new Gi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=N_(r,i[B],i,e,t);this.previousInputValues.set(e,t);let s=xn(r.index,i);Cf(s,1)}get injector(){return new Wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function s2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ki=(()=>{class n{static __NG_ELEMENT_ID__=a2}return n})();function a2(){let n=vt();return FA(n,X())}var c2=Ki,OA=class extends c2{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Da(this._hostTNode,this._hostLView)}get injector(){return new Wo(this._hostTNode,this._hostLView)}get parentInjector(){let e=f_(this._hostTNode,this._hostLView);if(yS(e)){let t=Zh(e,this._hostLView),r=Yh(e),i=t[B].data[r+8];return new Wo(i,t)}else return new Wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=HC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-yt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=rf(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Qo(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!HF(e),l;if(u)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let h=u?e:new Ea(Xr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let k=(u?p:this.parentInjector).get(et,null);k&&(o=k)}let g=Xr(h.componentType??{}),y=rf(this._lContainer,g?.id??null),I=y?.firstChild??null,A=h.create(p,i,I,o,s,a);return this.insertImpl(A.hostView,l,Qo(this._hostTNode,y)),A}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(aC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[at],l=new OA(u,u[Kt],u[at]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Ta(s,i,o,r),e.attachToViewContainerRef(),Hy(Sv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=HC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Fu(this._lContainer,t);r&&(_u(Sv(this._lContainer),t),Df(r[B],r))}detach(e){let t=this._adjustIndex(e,-1),r=Fu(this._lContainer,t);return r&&_u(Sv(this._lContainer),t)!=null?new Gi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function HC(n){return n[bu]}function Sv(n){return n[bu]||(n[bu]=[])}function FA(n,e){let t,r=e[n.index];return zn(r)?t=r:(t=EA(r,e,null,n),e[n.index]=t,D_(e,t)),l2(t,e,n,r),new OA(t,n,e)}function u2(n,e){let t=n[je],r=t.createComment(""),i=Wn(e,n),o=t.parentNode(i);return nf(t,o,r,t.nextSibling(i),!1),r}var l2=h2,d2=()=>!1;function LA(n,e,t){return d2(n,e,t)}function h2(n,e,t,r){if(n[Ui])return;let i;t.type&8?i=Pn(r):i=u2(e,t),n[Ui]=i}var Kv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Qv=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)L_(e,t).matches!==null&&this.queries[t].setDirty()}},cf=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=E2(e):this.predicate=e}},Yv=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Zv=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,f2(t,o)),this.matchTNodeWithReadOption(e,t,zh(t,e,o,!1,!1))}else r===Yo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,zh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Vt||i===Ki||i===Yo&&t.type&4)this.addMatch(t.index,-2);else{let o=zh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function f2(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function p2(n,e){return n.type&11?Da(n,e):n.type&4?k_(n,e):null}function g2(n,e,t,r){return t===-1?p2(e,n):t===-2?m2(n,e,r):ku(n,n[B],t,e)}function m2(n,e,t){if(t===Vt)return Da(e,n);if(t===Yo)return k_(e,n);if(t===Ki)return FA(e,n)}function VA(n,e,t,r){let i=e[fr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(g2(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Jv(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=VA(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=yt;p<h.length;p++){let g=h[p];g[Vi]===g[at]&&Jv(g[B],g,l,r)}if(h[qo]!==null){let p=h[qo];for(let g=0;g<p.length;g++){let y=p[g];Jv(y[B],y,l,r)}}}}}return r}function y2(n,e){return n[fr].queries[e].queryList}function jA(n,e,t){let r=new ef((t&4)===4);return cC(n,e,r,r.destroy),(e[fr]??=new Qv).queries.push(new Kv(r))-1}function v2(n,e,t){let r=He();return r.firstCreatePass&&(UA(r,new cf(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),jA(r,X(),e)}function _2(n,e,t,r){let i=He();if(i.firstCreatePass){let o=vt();UA(i,new cf(e,t,r),o.index),I2(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return jA(i,X(),t)}function E2(n){return n.split(",").map(e=>e.trim())}function UA(n,e,t){n.queries===null&&(n.queries=new Yv),n.queries.track(new Zv(e,t))}function I2(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function L_(n,e){return n.queries.getByIndex(e)}function w2(n,e){let t=n[B],r=L_(t,e);return r.crossesNgTemplate?Jv(t,n,e,[]):VA(t,n,r,e)}var qC=new Set;function Yn(n){qC.has(n)||(qC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Jo=class{},Af=class{};var uf=class extends Jo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new sf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Gy(e);this._bootstrapComponents=GS(o.bootstrap),this._r3Injector=Ev(e,t,[{provide:Jo,useValue:this},{provide:$u,useValue:this.componentFactoryResolver},...r],Zr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},lf=class extends Af{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new uf(this.moduleType,e,[])}};var Lu=class extends Jo{injector;componentFactoryResolver=new sf(this);instance=null;constructor(e){super();let t=new Fo([...e.providers,{provide:Jo,useValue:this},{provide:$u,useValue:this.componentFactoryResolver}],e.parent||wu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Sa(n,e,t=null){return new Lu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var D2=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Ch(!1,t.type),i=r.length>0?Sa([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:n,providedIn:"environment",factory:()=>new n($(et))})}return n})();function ue(n){return wa(()=>{let e=BA(n),t=Z(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===p_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(D2).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ti.Emulated,styles:n.styles||Gt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Yn("NgStandalone"),$A(t);let r=n.dependencies;return t.directiveDefs=zC(r,b2),t.pipeDefs=zC(r,Wy),t.id=S2(t),t})}function b2(n){return Xr(n)||Eu(n)}function ri(n){return wa(()=>({type:n.type,bootstrap:n.bootstrap||Gt,declarations:n.declarations||Gt,imports:n.imports||Gt,exports:n.exports||Gt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function T2(n,e){if(n==null)return Hn;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=wf.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function C2(n){if(n==null)return Hn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function le(n){return wa(()=>{let e=BA(n);return $A(e),e})}function Aa(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function BA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Hn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Gt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:T2(n.inputs,e),outputs:C2(n.outputs),debugInfo:null}}function $A(n){n.features?.forEach(e=>e(n))}function zC(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function S2(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function A2(n){return Object.getPrototypeOf(n.prototype).constructor}function Zt(n){let e=A2(n.type),t=!0,r=[n];for(;e;){let i;if(Gn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Av(n.inputs),s.declaredInputs=Av(n.declaredInputs),s.outputs=Av(n.outputs);let a=i.hostBindings;a&&x2(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&M2(n,u),l&&P2(n,l),R2(n,i),$0(n.outputs,i.outputs),Gn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Zt&&(t=!1)}}e=Object.getPrototypeOf(e)}N2(r)}function R2(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function N2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=va(i.hostAttrs,t=va(t,i.hostAttrs))}}function Av(n){return n===Hn?{}:n===Gt?[]:n}function M2(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function P2(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function x2(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Et(n){let e=t=>{let r=Array.isArray(n);t.hostDirectives===null?(t.resolveHostDirectives=k2,t.hostDirectives=r?n.map(Xv):[n]):r?t.hostDirectives.unshift(...n.map(Xv)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function k2(n){let e=[],t=!1,r=null,i=null;for(let o=0;o<n.length;o++){let s=n[o];if(s.hostDirectives!==null){let a=e.length;r??=new Map,i??=new Map,HA(s,e,r),i.set(s,[a,e.length-1])}o===0&&Gn(s)&&(t=!0,e.push(s))}for(let o=t?1:0;o<n.length;o++)e.push(n[o]);return[e,r,i]}function HA(n,e,t){if(n.hostDirectives!==null)for(let r of n.hostDirectives)if(typeof r=="function"){let i=r();for(let o of i)GC(Xv(o),e,t)}else GC(r,e,t)}function GC(n,e,t){let r=Eu(n.directive);O2(r.declaredInputs,n.inputs),HA(r,e,t),t.set(r,n),e.push(r)}function Xv(n){return typeof n=="function"?{directive:gt(n),inputs:Hn,outputs:Hn}:{directive:gt(n.directive),inputs:WC(n.inputs),outputs:WC(n.outputs)}}function WC(n){if(n===void 0||n.length===0)return Hn;let e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function O2(n,e){for(let t in e)if(e.hasOwnProperty(t)){let r=e[t],i=n[t];n[r]=i}}function qA(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=va(n.mergedAttrs,n.attrs);let h=n.tView=I_(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ua(n,!1);let u=L2(t,e,n,r);Lh()&&C_(t,e,u,n),_a(u,e);let l=EA(u,e,u,n);e[r+xe]=l,D_(e,l),LA(l,n,e)}function F2(n,e,t,r,i,o,s,a,u,l,h){let p=t+xe,g;return e.firstCreatePass?(g=Ca(e,p,4,s||null,a||null),av()&&CA(e,n,g,In(e.consts,l),cA),pS(e,g)):g=e.data[p],qA(g,n,e,t,r,i,o,u),Tu(g)&&A_(e,n,g),l!=null&&Tf(n,g,h),g}function Xo(n,e,t,r,i,o,s,a,u,l,h){let p=t+xe,g;if(e.firstCreatePass){if(g=Ca(e,p,4,s||null,a||null),l!=null){let y=In(e.consts,l);g.localNames=[];for(let I=0;I<y.length;I+=2)g.localNames.push(y[I],-1)}}else g=e.data[p];return qA(g,n,e,t,r,i,o,u),l!=null&&Tf(n,g,h),g}function zA(n,e,t,r,i,o,s,a){let u=X(),l=He(),h=In(l.consts,o);return F2(u,l,n,e,t,r,i,h,void 0,s,a),zA}function GA(n,e,t,r,i,o,s,a){let u=X(),l=He(),h=In(l.consts,o);return Xo(u,l,n,e,t,r,i,h,void 0,s,a),GA}var L2=V2;function V2(n,e,t,r){return Vh(!0),e[je].createComment("")}var un=function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n}(un||{}),KC=0,j2=1,it=function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n}(it||{}),V_=function(n){return n[n.Initial=-1]="Initial",n}(V_||{}),U2=0,Hu=1;var B2=4,$2=5,H2=6,q2=7,Rv=8,z2=9,j_=function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n}(j_||{});function WA(n,e,t){let r=QA(n);e[r]===null&&(e[r]=[]),e[r].push(t)}function Kh(n,e){let t=QA(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function KA(n){Kh(1,n),Kh(0,n),Kh(2,n)}function QA(n){let e=B2;return n===1?e=$2:n===2&&(e=z2),e}var Rf=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Rf||{}),ts=new U(""),YA=!1,e_=class extends Xe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,nC()&&(this.destroyRef=S(Mt,{optional:!0})??void 0,this.pendingTasks=S(yr,{optional:!0})??void 0)}emit(e){let t=J(null);try{super.next(e)}finally{J(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},We=e_;function ZA(n){let e,t;function r(){n=Go;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function QC(n){return queueMicrotask(()=>n()),()=>{n=Go}}var U_="isAngularZone",df=U_+"_ID",G2=0,Ie=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new We(!1);onMicrotaskEmpty=new We(!1);onStable=new We(!1);onError=new We(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=YA}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Q2(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(U_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,W2,Go,Go);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},W2={};function B_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function K2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){ZA(()=>{n.callbackScheduled=!1,t_(n),n.isCheckStableRunning=!0,B_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),t_(n)}function Q2(n){let e=()=>{K2(n)},t=G2++;n._inner=n._inner.fork({name:"angular",properties:{[U_]:!0,[df]:t,[df+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Y2(u))return r.invokeTask(o,s,a,u);try{return YC(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ZC(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return YC(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Z2(u)&&e(),ZC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,t_(n),B_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function t_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function YC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ZC(n){n._nesting--,B_(n)}var Vu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new We;onMicrotaskEmpty=new We;onStable=new We;onError=new We;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Y2(n){return JA(n,"__ignore_ng_zone__")}function Z2(n){return JA(n,"__scheduler_tick__")}function JA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var $_=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),XA=[0,1,2,3],eR=(()=>{class n{ngZone=S(Ie);scheduler=S(Rn);errorHandler=S(vn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){S(ts,{optional:!0})}execute(){let t=this.sequences.size>0;t&&be(16),this.executing=!0;for(let r of XA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&be(17)}register(t){let{view:r}=t;r!==void 0?((r[Ho]??=[]).push(t),$i(r),r[ne]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Rf.AFTER_NEXT_RENDER,t):t()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),hf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ho];e&&(this.view[Ho]=e.filter(t=>t!==this))}};function tR(n,e){let t=e?.injector??S(Ve);return Yn("NgAfterRender"),nR(n,t,e,!1)}function Nf(n,e){let t=e?.injector??S(Ve);return Yn("NgAfterNextRender"),nR(n,t,e,!0)}function J2(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function nR(n,e,t,r){let i=e.get($_);i.impl??=e.get(eR);let o=e.get(ts,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Mt):null,a=e.get(ha,null,{optional:!0}),u=new hf(i.impl,J2(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}function Mf(n){return n+1}function Ra(n,e){let t=n[B],r=Mf(e.index);return n[r]}function X2(n,e,t){let r=n[B],i=Mf(e);n[i]=t}function Na(n,e){let t=Mf(e.index);return n.data[t]}function ej(n,e,t){let r=Mf(e);n.data[r]=t}function tj(n,e,t){let r=e[B],i=Na(r,t);switch(n){case it.Complete:return i.primaryTmplIndex;case it.Loading:return i.loadingTmplIndex;case it.Error:return i.errorTmplIndex;case it.Placeholder:return i.placeholderTmplIndex;default:return null}}function JC(n,e){return e===it.Placeholder?n.placeholderBlockConfig?.[KC]??null:e===it.Loading?n.loadingBlockConfig?.[KC]??null:null}function nj(n){return n.loadingBlockConfig?.[j2]??null}function XC(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function rj(n,e){let t=e.primaryTmplIndex+xe;return zo(n,t)}function ij(n,e,t){let r=t.get(Ie);return vL(n,()=>r.run(e),()=>r.runOutsideAngular(()=>yL()))}function oj(n,e,t){return t==null?n:t>=0?rv(t,n):n[e.index][yt]??null}function sj(n,e){return Ah(xe+e,n)}function aj(n,e,t,r,i,o,s){let a=n[_n],u=a.get(Ie),l;function h(){if(gr(n)){l.destroy();return}let p=Ra(n,e),g=p[Hu];if(g!==V_.Initial&&g!==it.Placeholder){l.destroy();return}let y=oj(n,e,r);if(!y||(l.destroy(),gr(y)))return;let I=sj(y,t),A=i(I,()=>{u.run(()=>{n!==y&&Mh(y,A),o()})},a);n!==y&&Su(y,A),WA(s,p,A)}l=tR({read:h},{injector:a})}var cj=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?Sa(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:n,providedIn:"environment",factory:()=>new n})}return n})();var rR=new U("");function Nv(n,e,t){return n.get(cj).getOrCreateInjector(e,n,t,"")}function uj(n,e,t){if(n instanceof ya){let i=n.injector,o=n.parentInjector,s=Nv(o,e,t);return new ya(i,s)}let r=n.get(et);if(r!==n){let i=Nv(r,e,t);return new ya(n,i)}return Nv(n,e,t)}function zi(n,e,t,r=!1){let i=t[at],o=i[B];if(gr(i))return;let s=Ra(i,e),a=s[Hu],u=s[q2];if(!(u!==null&&n<u)&&eS(a,n)&&eS(s[U2]??-1,n)){let l=Na(o,e),p=!r&&!0&&(nj(l)!==null||JC(l,it.Loading)!==null||JC(l,it.Placeholder))?fj:dj;try{p(n,s,t,e,i)}catch(g){R_(i,g)}}}function lj(n,e){let t=n[ji]?.findIndex(i=>i.data[y_]===e[Hu])??-1;return{dehydratedView:t>-1?n[ji][t]:null,dehydratedViewIx:t}}function dj(n,e,t,r,i){be(20);let o=tj(n,i,r);if(o!==null){e[Hu]=n;let s=i[B],a=o+xe,u=zo(s,a),l=0;x_(t,l);let h;if(n===it.Complete){let I=Na(s,r),A=I.providers;A&&A.length>0&&(h=uj(i[_n],I,A))}let{dehydratedView:p,dehydratedViewIx:g}=lj(t,e),y=ba(i,u,null,{injector:h,dehydratedView:p});if(Ta(t,y,l,Qo(u,p)),Cf(y,2),g>-1&&t[ji]?.splice(g,1),(n===it.Complete||n===it.Error)&&Array.isArray(e[Rv])){for(let I of e[Rv])I();e[Rv]=null}}be(21)}function eS(n,e){return n<e}function hj(n,e){let t=n[e.index];zi(it.Placeholder,e,t)}function tS(n,e,t){n.loadingPromise.then(()=>{n.loadingState===un.COMPLETE?zi(it.Complete,e,t):n.loadingState===un.FAILED&&zi(it.Error,e,t)})}var fj=null;var H_=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var q_=new U("");function ii(n){return!!n&&typeof n.then=="function"}function Pf(n){return!!n&&typeof n.subscribe=="function"}var iR=new U("");var z_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=S(iR,{optional:!0})??[];injector=S(Ve);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=mt(this.injector,i);if(ii(o))t.push(o);else if(Pf(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xf=new U("");function oR(){ey(()=>{let n="";throw new j(600,n)})}function sR(n){return n.isBoundToModule}var pj=10;var oi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=S(Lt);afterRenderManager=S($_);zonelessEnabled=S(Nu);rootEffectScheduler=S(Mu);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Xe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=S(yr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ie(t=>!t))}constructor(){S(ts,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=S(et);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ve.NULL){return this._injector.get(Ie).run(()=>{be(10);let s=t instanceof Sf;if(!this._injector.get(z_).done){let I="";throw new j(405,I)}let u;s?u=t:u=this._injector.get($u).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=sR(u)?void 0:this._injector.get(Jo),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(q_,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),xu(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),be(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){be(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Rf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let t=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(t),this.afterTick.next(),be(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Zo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<pj;)be(14),this.synchronizeOnce(),be(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Cu(i))continue;let o=r&&!this.zonelessEnabled?0:1;P_(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Cu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;xu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(xf,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>xu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function aR(n,e,t){let r=e[_n],i=e[B];if(n.loadingState!==un.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=Ra(e,t),s=rj(i,n);n.loadingState=un.IN_PROGRESS,Kh(1,o);let a=n.dependencyResolverFn,u=r.get(qi).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(l=>{let h=!1,p=[],g=[];for(let y of l)if(y.status==="fulfilled"){let I=y.value,A=Xr(I)||Eu(I);if(A)p.push(A);else{let N=Wy(I);N&&g.push(N)}}else{h=!0;break}if(h){if(n.loadingState=un.FAILED,n.errorTmplIndex===null){let y="",I=new j(-750,!1);R_(e,I)}}else{n.loadingState=un.COMPLETE;let y=s.tView;if(p.length>0){y.directiveRegistry=XC(y.directiveRegistry,p);let I=p.map(N=>N.type),A=Ch(!1,...I);n.providers=A}g.length>0&&(y.pipeRegistry=XC(y.pipeRegistry,g))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,u()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=un.COMPLETE,u()}),n.loadingPromise)}function gj(n,e){return e[_n].get(rR,null,{optional:!0})?.behavior!==j_.Manual}function mj(n,e,t){let r=e[B],i=e[t.index];if(!gj(n,e))return;let o=Ra(e,t),s=Na(r,t);switch(KA(o),s.loadingState){case un.NOT_STARTED:zi(it.Loading,t,i),aR(s,e,t),s.loadingState===un.IN_PROGRESS&&tS(s,t,i);break;case un.IN_PROGRESS:zi(it.Loading,t,i),tS(s,t,i);break;case un.COMPLETE:zi(it.Complete,t,i);break;case un.FAILED:zi(it.Error,t,i);break;default:}}function yj(n,e,t){return n===0?nS(e,t):n===2?!nS(e,t):!0}function vj(n){return n!=null&&(n&1)===1}function nS(n,e){let t=n[_n],r=Na(n[B],e),i=VS(t),o=vj(r.flags),a=Ra(n,e)[H2]!==null;return!(o&&a&&i)}function _j(n,e,t,r,i,o,s,a,u,l){let h=X(),p=He(),g=n+xe,y=Xo(h,p,n,null,0,0),I=h[_n];if(p.firstCreatePass){Yn("NgDefer");let Je={primaryTmplIndex:e,loadingTmplIndex:r??null,placeholderTmplIndex:i??null,errorTmplIndex:o??null,placeholderBlockConfig:null,loadingBlockConfig:null,dependencyResolverFn:t??null,loadingState:un.NOT_STARTED,loadingPromise:null,providers:null,hydrateTriggers:null,debug:null,flags:l??0};u?.(p,Je,a,s),ej(p,g,Je)}let A=h[g];LA(A,y,h);let N=null,k=null;if(A[ji]?.length>0){let Je=A[ji][0].data;k=Je[m_]??null,N=Je[y_]}let H=[null,V_.Initial,null,null,null,null,k,N,null,null];X2(h,g,H);let Y=null;k!==null&&(Y=I.get(FS),Y.add(k,{lView:h,tNode:y,lContainer:A}));let Ce=()=>{KA(H),k!==null&&Y?.cleanup([k])};WA(0,H,()=>Mh(h,Ce)),Su(h,Ce)}function Ej(n,e){let t=X(),r=vt();yj(0,t,r)&&(hj(t,r),aj(t,r,n,e,ij,()=>mj(0,t,r),0))}function Ma(n,e,t,r){let i=X(),o=da();if(Er(i,o,e)){let s=He(),a=_v();hV(a,i,n,e,t,r)}return Ma}var n_=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Mv(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function Ij(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=n.at(o),h=e[o],p=Mv(o,l,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let g=n.at(s),y=e[u],I=Mv(s,g,u,y,t);if(I!==0){I<0&&n.updateValue(s,y),s--,u--;continue}let A=t(o,l),N=t(s,g),k=t(o,h);if(Object.is(k,N)){let H=t(u,y);Object.is(H,A)?(n.swap(o,s),n.updateValue(s,y),u--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new ff,i??=iS(n,o,s,t),r_(n,r,o,k))n.updateValue(o,h),o++,s++;else if(i.has(k))r.set(A,n.detach(o)),s--;else{let H=n.create(o,e[o]);n.attach(o,H),o++,s++}}for(;o<=u;)rS(n,r,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=n.at(o),p=l.value,g=Mv(o,h,o,p,t);if(g!==0)g<0&&n.updateValue(o,p),o++,l=u.next();else{r??=new ff,i??=iS(n,o,s,t);let y=t(o,p);if(r_(n,r,o,y))n.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))n.attach(o,n.create(o,p)),o++,s++,l=u.next();else{let I=t(o,h);r.set(I,n.detach(o)),s--}}}for(;!l.done;)rS(n,r,t,n.length,l.value),l=u.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(u=>{n.destroy(u)})}function r_(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function rS(n,e,t,r,i){if(r_(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function iS(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var ff=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Zn(n,e,t,r,i,o,s,a){Yn("NgControlFlow");let u=X(),l=He(),h=In(l.consts,o);return Xo(u,l,n,e,t,r,i,h,256,s,a),qu}function qu(n,e,t,r,i,o,s,a){Yn("NgControlFlow");let u=X(),l=He(),h=In(l.consts,o);return Xo(u,l,n,e,t,r,i,h,512,s,a),qu}function Jn(n,e){Yn("NgControlFlow");let t=X(),r=da(),i=t[r]!==Yt?t[r]:-1,o=i!==-1?pf(t,xe+i):void 0,s=0;if(Er(t,r,n)){let a=J(null);try{if(o!==void 0&&x_(o,s),n!==-1){let u=xe+n,l=pf(t,u),h=a_(t[B],u),p=DA(l,h,t),g=ba(t,h,e,{dehydratedView:p});Ta(l,g,s,Qo(h,p))}}finally{J(a)}}else if(o!==void 0){let a=IA(o,s);a!==void 0&&(a[tt]=e)}}var i_=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-yt}};function G_(n){return n}function wj(n,e){return e}var o_=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function W_(n,e,t,r,i,o,s,a,u,l,h,p,g){Yn("NgControlFlow");let y=X(),I=He(),A=u!==void 0,N=X(),k=a?s.bind(N[Qt][tt]):s,H=new o_(A,k);N[xe+n]=H,Xo(y,I,n+1,e,t,r,i,In(I.consts,o),256),A&&Xo(y,I,n+2,u,l,h,p,In(I.consts,g),512)}var s_=class extends n_{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-yt}at(e){return this.getLView(e)[tt].$implicit}attach(e,t){let r=t[Uo];this.needsIndexUpdate||=e!==this.length,Ta(this.lContainer,t,e,Qo(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Dj(this.lContainer,e)}create(e,t){let r=rf(this.lContainer,this.templateTNode.tView.ssrId),i=ba(this.hostLView,this.templateTNode,new i_(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Df(e[B],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[tt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[tt].$index=e}getLView(e){return bj(this.lContainer,e)}};function K_(n){let e=J(null),t=mr();try{let r=X(),i=r[B],o=r[t],s=t+1,a=pf(r,s);if(o.liveCollection===void 0){let l=a_(i,s);o.liveCollection=new s_(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(Ij(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=da(),h=u.length===0;if(Er(r,l,h)){let p=t+2,g=pf(r,p);if(h){let y=a_(i,p),I=DA(g,y,r),A=ba(r,y,void 0,{dehydratedView:I});Ta(g,A,0,Qo(y,I))}else i.firstUpdatePass&&FV(g),x_(g,0)}}}finally{J(e)}}function pf(n,e){return n[e]}function Dj(n,e){return Fu(n,e)}function bj(n,e){return IA(n,e)}function a_(n,e){return zo(n,e)}function Re(n,e,t){let r=X(),i=da();if(Er(r,i,e)){let o=He(),s=_v();sV(s,r,n,e,r[je],t)}return Re}function c_(n,e,t,r,i){N_(e,n,t,i?"class":"style",r)}function K(n,e,t,r){let i=X(),o=i[B],s=n+xe,a=o.firstCreatePass?AA(s,i,2,e,cA,av(),t,r):o.data[s];if(uA(a,i,n,e,cR),Tu(a)){let u=i[B];A_(u,i,a),US(u,a,i)}return r!=null&&Tf(i,a),K}function q(){let n=He(),e=vt(),t=lA(e);return n.firstCreatePass&&RA(n,t),uv(t)&&lv(),sv(),t.classesWithoutHost!=null&&QF(t)&&c_(n,t,X(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&YF(t)&&c_(n,t,X(),t.stylesWithoutHost,!1),q}function Oe(n,e,t,r){return K(n,e,t,r),q(),Oe}function dn(n,e,t,r){let i=X(),o=i[B],s=n+xe,a=o.firstCreatePass?YV(s,o,2,e,t,r):o.data[s];return uA(a,i,n,e,cR),r!=null&&Tf(i,a),dn}function Jt(){let n=vt(),e=lA(n);return uv(e)&&lv(),sv(),Jt}function Qi(n,e,t,r){return dn(n,e,t,r),Jt(),Qi}var cR=(n,e,t,r,i)=>(Vh(!0),QS(e[je],r,DC()));function hn(){return X()}var zu="en-US";var Tj=zu;function uR(n){typeof n=="string"&&(Tj=n.toLowerCase().replace(/_/g,"-"))}function oe(n,e,t){let r=X(),i=He(),o=vt();return Cj(i,r,r[je],o,n,e,t),oe}function Pa(n,e,t){let r=X(),i=He(),o=vt();return(o.type&3||t)&&xA(o,i,r,t,r[je],n,e,Wh(o,r,e)),Pa}function Cj(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Wh(r,e,o),xA(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Wh(r,e,o),BC(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Wh(r,e,o),BC(r,e,p,i,i,u)}}function wn(n=1){return wC(n)}function Sj(n,e){let t=null,r=NL(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?KS(n,o,!0):xL(r,o))return i}return t}function Gu(n){let e=X()[Qt][Kt];if(!e.projection){let t=n?n.length:1,r=e.projection=Q0(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?Sj(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Wu(n,e=0,t,r,i,o){let s=X(),a=He(),u=r?n+1:null;u!==null&&Xo(s,a,u,r,i,o,null,t);let l=Ca(a,xe+n,16,null,t||null);l.projection===null&&(l.projection=e),fv();let p=!s[Uo]||cv();s[Qt][Kt].projection[l.projection]===null&&u!==null?Aj(s,a,u):p&&!Ef(l)&&XL(a,s,l)}function Aj(n,e,t){let r=xe+t,i=e.data[r],o=n[r],s=rf(o,i.tView.ssrId),a=ba(n,i,void 0,{dehydratedView:s});Ta(o,a,0,Qo(i,s))}function Q_(n,e,t,r){_2(n,e,t,r)}function Ku(n,e,t){v2(n,e,t)}function ns(n){let e=X(),t=He(),r=mv();kh(r+1);let i=L_(t,r);if(n.dirty&&sC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=w2(e,r);n.reset(o,uL),n.notifyOnChanges()}return!0}return!1}function rs(){return y2(X(),mv())}function is(n){let e=hC();return Xy(e,xe+n)}function $h(n,e){return n<<17|e<<2}function es(n){return n>>17&32767}function Rj(n){return(n&2)==2}function Nj(n,e){return n&131071|e<<17}function u_(n){return n|2}function Ia(n){return(n&131068)>>2}function Pv(n,e){return n&-131069|e<<2}function Mj(n){return(n&1)===1}function l_(n){return n|1}function Pj(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=es(s),u=Ia(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||oa(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let g=es(n[a+1]);n[r+1]=$h(g,a),g!==0&&(n[g+1]=Pv(n[g+1],r)),n[a+1]=Nj(n[a+1],r)}else n[r+1]=$h(a,0),a!==0&&(n[a+1]=Pv(n[a+1],r)),a=r;else n[r+1]=$h(u,0),a===0?a=r:n[u+1]=Pv(n[u+1],r),u=r;l&&(n[r+1]=u_(n[r+1])),oS(n,h,r,!0),oS(n,h,r,!1),xj(e,h,n,r,o),s=$h(a,u),o?e.classBindings=s:e.styleBindings=s}function xj(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&oa(o,e)>=0&&(t[r+1]=l_(t[r+1]))}function oS(n,e,t,r){let i=n[t+1],o=e===null,s=r?es(i):Ia(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];kj(u,e)&&(a=!0,n[s+1]=r?l_(l):u_(l)),s=r?es(l):Ia(l)}a&&(n[t+1]=r?u_(i):l_(i))}function kj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?oa(n,e)>=0:!1}var Qn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Oj(n){return n.substring(Qn.key,Qn.keyEnd)}function Fj(n){return Lj(n),lR(n,dR(n,0,Qn.textEnd))}function lR(n,e){let t=Qn.textEnd;return t===e?-1:(e=Qn.keyEnd=Vj(n,Qn.key=e,t),dR(n,e,t))}function Lj(n){Qn.key=0,Qn.keyEnd=0,Qn.value=0,Qn.valueEnd=0,Qn.textEnd=n.length}function dR(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Vj(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Xt(n,e){return Uj(n,e,null,!0),Xt}function Y_(n){Bj(Wj,jj,n,!0)}function jj(n,e){for(let t=Fj(e);t>=0;t=lR(e,t))bh(n,Oj(e),!0)}function Uj(n,e,t,r){let i=X(),o=He(),s=Ph(2);if(o.firstUpdatePass&&fR(o,n,s,r),e!==Yt&&Er(i,s,e)){let a=o.data[mr()];pR(o,a,i,i[je],n,i[s+1]=Qj(e,t),r,s)}}function Bj(n,e,t,r){let i=He(),o=Ph(2);i.firstUpdatePass&&fR(i,null,o,r);let s=X();if(t!==Yt&&Er(s,o,t)){let a=i.data[mr()];if(gR(a,r)&&!hR(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Eh(u,t||"")),c_(i,a,s,t,r)}else Kj(i,a,s,s[je],s[o+1],s[o+1]=Gj(n,e,t),r,o)}}function hR(n,e){return e>=n.expandoStartIndex}function fR(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[mr()],s=hR(n,t);gR(o,r)&&e===null&&!s&&(e=!1),e=$j(i,o,e,r),Pj(i,o,e,t,s,r)}}function $j(n,e,t,r){let i=vC(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=xv(null,n,e,t,r),t=ju(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=xv(i,n,e,t,r),o===null){let u=Hj(n,e,r);u!==void 0&&Array.isArray(u)&&(u=xv(null,n,e,u[1],r),u=ju(u,e.attrs,r),qj(n,e,r,u))}else o=zj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Hj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ia(r)!==0)return n[es(r)]}function qj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[es(i)]=r}function zj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ju(r,s,t)}return ju(r,e.attrs,t)}function xv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ju(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ju(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),bh(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Gj(n,e,t){if(t==null||t==="")return Gt;let r=[],i=Bu(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function Wj(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&bh(n,r,t)}function Kj(n,e,t,r,i,o,s,a){i===Yt&&(i=Gt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,I=null,A;h===p?(u+=2,l+=2,g!==y&&(I=p,A=y)):p===null||h!==null&&h<p?(u+=2,I=h):(l+=2,I=p,A=y),I!==null&&pR(n,e,t,r,I,A,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function pR(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=Mj(l)?sS(u,e,t,i,Ia(l),s):void 0;if(!gf(h)){gf(o)||Rj(l)&&(o=sS(u,null,t,i,a,s));let p=Ah(mr(),t);tV(r,s,p,i,o)}}function sS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=t[i+1];g===Yt&&(g=p?Gt:void 0);let y=p?Th(g,r):h===r?g:void 0;if(l&&!gf(y)&&(y=Th(u,r)),gf(y)&&(a=y,s))return a;let I=n[i+1];i=s?es(I):Ia(I)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Th(u,r))}return a}function gf(n){return n!==void 0}function Qj(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Zr(Bu(n)))),n}function gR(n,e){return(n.flags&(e?8:16))!==0}function ye(n,e=""){let t=X(),r=He(),i=n+xe,o=r.firstCreatePass?Ca(r,i,1,e,null):r.data[i],s=Yj(r,t,o,e,n);t[i]=s,Lh()&&C_(r,t,s,o),ua(o,!1)}var Yj=(n,e,t,r,i)=>(Vh(!0),LL(e[je],r));function Zj(n,e,t,r=""){return Er(n,da(),t)?e+jo(t)+r:Yt}function Jj(n,e,t,r,i,o=""){let s=fC(),a=PA(n,s,t,i);return Ph(2),a?e+jo(t)+r+jo(i)+o:Yt}function Ir(n){return Ke("",n),Ir}function Ke(n,e,t){let r=X(),i=Zj(r,n,e,t);return i!==Yt&&mR(r,mr(),i),Ke}function kf(n,e,t,r,i){let o=X(),s=Jj(o,n,e,t,r,i);return s!==Yt&&mR(o,mr(),s),kf}function mR(n,e,t){let r=Ah(e,n);VL(n[je],r,t)}function Xj(n,e,t){let r=He();if(r.firstCreatePass){let i=Gn(n);d_(t,r.data,r.blueprint,i,!0),d_(e,r.data,r.blueprint,i,!1)}}function d_(n,e,t,r,i){if(n=gt(n),Array.isArray(n))for(let o=0;o<n.length;o++)d_(n[o],e,t,r,i);else{let o=He(),s=X(),a=vt(),u=Oo(n)?n:gt(n.provide),l=Qy(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Oo(n)||!n.multi){let y=new Ko(l,i,W,null),I=Ov(u,e,i?h:h+g,p);I===-1?(Lv(Xh(a,s),o,u),kv(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[I]=y,s[I]=y)}else{let y=Ov(u,e,h+g,p),I=Ov(u,e,h,h+g),A=y>=0&&t[y],N=I>=0&&t[I];if(i&&!N||!i&&!A){Lv(Xh(a,s),o,u);let k=nU(i?tU:eU,t.length,i,r,l,n);!i&&N&&(t[I].providerFactory=k),kv(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=yR(t[i?I:y],l,!i&&r);kv(o,n,y>-1?y:I,k)}!i&&r&&N&&t[I].componentProviders++}}}function kv(n,e,t,r){let i=Oo(e),o=tC(e);if(i||o){let u=(o?gt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function yR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ov(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function eU(n,e,t,r,i){return h_(this.multi,[])}function tU(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=ku(r,r[B],this.providerFactory.index,i);s=u.slice(0,a),h_(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],h_(o,s);return s}function h_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function nU(n,e,t,r,i,o){let s=new Ko(n,t,W,null);return s.multi=[],s.index=e,s.componentProviders=0,yR(s,i,r&&!t),s}function si(n,e=[]){return t=>{t.providersResolver=(r,i)=>Xj(r,i?i(n):n,e)}}function Qu(n,e,t){let r=Ru()+n,i=X();return i[r]===Yt?F_(i,r,t?e.call(t):e()):ZV(i,r)}function Z_(n,e,t,r){return _R(X(),Ru(),n,e,t,r)}function J_(n,e,t,r,i){return rU(X(),Ru(),n,e,t,r,i)}function vR(n,e){let t=n[e];return t===Yt?void 0:t}function _R(n,e,t,r,i,o){let s=e+t;return Er(n,s,i)?F_(n,s+1,o?r.call(o,i):r(i)):vR(n,s+1)}function rU(n,e,t,r,i,o,s){let a=e+t;return PA(n,a,i,o)?F_(n,a+2,s?r.call(s,i,o):r(i,o)):vR(n,a+2)}function ai(n,e){let t=He(),r,i=n+xe;t.firstCreatePass?(r=iU(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Fi(r.type,!0)),s,a=zt(W);try{let u=Jh(!1),l=o();return Jh(u),ev(t,X(),i,l),l}finally{zt(a)}}function iU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function ci(n,e,t){let r=n+xe,i=X(),o=Xy(i,r);return oU(i,r)?_R(i,Ru(),e,o.transform,t,o):o.transform(t)}function oU(n,e){return n[B].data[e].pure}var mf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},X_=(()=>{class n{compileModuleSync(t){return new lf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Gy(t),o=GS(i.declarations).reduce((s,a)=>{let u=Xr(a);return u&&s.push(new Ea(u)),s},[]);return new mf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sU=(()=>{class n{zone=S(Ie);changeDetectionScheduler=S(Rn);applicationRef=S(oi);applicationErrorHandler=S(Lt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ER({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ie(Z(P({},IR()),{scheduleInRootZone:t})),[{provide:Ie,useFactory:n},{provide:Jr,multi:!0,useFactory:()=>{let r=S(sU,{optional:!0});return()=>r.initialize()}},{provide:Jr,multi:!0,useFactory:()=>{let r=S(aU);return()=>{r.initialize()}}},e===!0?{provide:wv,useValue:!0}:[],{provide:jh,useValue:t??YA},{provide:Lt,useFactory:()=>{let r=S(Ie),i=S(et),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(vn),o.handleError(s))})}}}]}function IR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var aU=(()=>{class n{subscription=new ze;initialized=!1;zone=S(Ie);pendingTasks=S(yr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var eE=(()=>{class n{applicationErrorHandler=S(Lt);appRef=S(oi);taskService=S(yr);ngZone=S(Ie);zonelessEnabled=S(Nu);tracing=S(ts,{optional:!0});disableScheduling=S(wv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(df):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(S(jh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Vu||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?QC:ZA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(df+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,QC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cU(){return Yn("NgZoneless"),Wt([{provide:Rn,useExisting:eE},{provide:Ie,useClass:Vu},{provide:Nu,useValue:!0},{provide:jh,useValue:!1},[]])}function uU(){return typeof $localize<"u"&&$localize.locale||zu}var Of=new U("",{providedIn:"root",factory:()=>S(Of,{optional:!0,skipSelf:!0})||uU()});var Ff=class{destroyed=!1;listeners=null;errorHandler=S(vn,{optional:!0});destroyRef=S(Mt);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new j(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(Lo(953,!1));return}if(this.listeners===null)return;let t=J(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{J(t)}}};function en(n){return j0(n)}function fn(n,e){return Bd(n,e?.equal)}var tE=class{[Ht];constructor(e){this[Ht]=e}destroy(){this[Ht].destroy()}};function xa(n,e){let t=e?.injector??S(Ve),r=e?.manualCleanup!==!0?t.get(Mt):null,i,o=t.get(ha,null,{optional:!0}),s=t.get(Rn);return o!==null?(i=hU(o.view,s,n),r instanceof mu&&r._lView===o.view&&(r=null)):i=fU(n,t.get(Mu),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new tE(i)}var wR=Z(P({},Ni),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Go,run(){if(this.dirty=!1,this.hasRun&&!Bs(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=Mi(this),t=la(!1);try{this.maybeCleanup(),this.fn(n)}finally{la(t),So(this,e)}},maybeCleanup(){if(!this.cleanupFns?.length)return;let n=J(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],J(n)}}}),lU=Z(P({},wR),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){$s(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),dU=Z(P({},wR),{consumerMarkedDirty(){this.view[ne]|=8192,$i(this.view),this.notifier.notify(13)},destroy(){$s(this),this.onDestroyFn(),this.maybeCleanup(),this.view[ei]?.delete(this)}});function hU(n,e,t){let r=Object.create(dU);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[ei]??=new Set,n[ei].add(r),r.consumerMarkedDirty(r),r}function fU(n,e,t){let r=Object.create(lU);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}var CR=Symbol("InputSignalNode#UNSET"),MU=Z(P({},$d),{transformFn:void 0,applyValueToInputSignal(n,e){Hs(n,e)}});function SR(n,e){let t=Object.create(MU);t.value=n,t.transformFn=e?.transform;function r(){if(Us(t),t.value===CR){let i=null;throw new j(-950,i)}return t.value}return r[Ht]=t,r}var Vf=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Uu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},PU=new U("");PU.__NG_ELEMENT_ID__=n=>{let e=vt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new j(204,!1)};function ut(n){return new Ff}function DR(n,e){return SR(n,e)}function xU(n){return SR(CR,n)}var se=(DR.required=xU,DR);var ka=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},AR=new ka("20.1.2");var nE=new U(""),kU=new U("");function Yu(n){return!n.moduleRef}function OU(n){let e=Yu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ie);return t.run(()=>{Yu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Lt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Yu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(nE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(nE);s.add(o),n.moduleRef.onDestroy(()=>{xu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return LU(r,t,()=>{let o=e.get(yr),s=o.add(),a=e.get(z_);return a.runInitializers(),a.donePromise.then(()=>{try{let u=e.get(Of,zu);if(uR(u||zu),!e.get(kU,!0))return Yu(n)?e.get(oi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Yu(n)){let h=e.get(oi);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return FU?.(n.moduleRef,n.allPlatformModules),n.moduleRef}finally{o.remove(s)}})})})}var FU;function LU(n,e,t){try{let r=t();return ii(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Lf=null;function VU(n=[],e){return Ve.create({name:e,providers:[{provide:Iu,useValue:"platform"},{provide:nE,useValue:new Set([()=>Lf=null])},...n]})}function jU(n=[]){if(Lf)return Lf;let e=VU(n);return Lf=e,oR(),UU(e),e}function UU(n){let e=n.get(vf,null);mt(n,()=>{e?.forEach(t=>t())})}function aE(){return!1}var Yi=(()=>{class n{static __NG_ELEMENT_ID__=BU}return n})();function BU(n){return $U(vt(),X(),(n&16)===16)}function $U(n,e,t){if(Bi(n)&&!t){let r=xn(n.index,e);return new Gi(r,r)}else if(n.type&175){let r=e[Qt];return new Gi(r,e)}return null}var rE=class{constructor(){}supports(e){return O_(e)}create(e){return new iE(e)}},HU=(n,e)=>e,iE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||HU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<bR(r,i,o)?t:r,a=bR(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,I=y+g;h<=I&&I<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!O_(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,NA(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new oE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new jf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new jf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},oE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},sE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},jf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new sE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function bR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function TR(){return new cE([new rE])}var cE=(()=>{class n{factories;static \u0275prov=F({token:n,providedIn:"root",factory:TR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||TR()),deps:[[n,new uS,new _t]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new j(901,!1)}}return n})();function RR(n){be(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=jU(r),o=[ER({}),{provide:Rn,useExisting:eE},TC,...t||[]],s=new Lu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return OU({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{be(9)}}function Oa(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var wr=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=le({type:n,selectors:[["button","pd-button",""]],hostAttrs:[1,"h-10","min-w-10","flex","items-center","justify-center","active:scale-95","transition-all","duration-150"]})};var Uf=class n{clicked=ut();onClick(e){this.clicked.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=le({type:n,selectors:[["button","pd-action-button",""]],hostAttrs:[1,"shadow-md/80","rounded-full","shadow-black/60","text-action-contrast","bg-action"],hostBindings:function(t,r){t&1&&oe("click",function(o){return r.onClick(o)})},outputs:{clicked:"clicked"},features:[Et([wr])]})};var Fa=class n{showNotification=Ae(!1);notificationMessage=Ae({type:"success",message:""});lastTimeoutId=void 0;abort=void 0;success(e){this.notificationMessage.set({type:"success",message:e??""}),this.setNotification(!0)}warn(e){this.notificationMessage.set({type:"warn",message:e??""}),this.setNotification(!0)}notFound(e){this.notificationMessage.set({type:"404",message:e??""}),this.setNotification(!0)}setNotification(e){if(this.showNotification.set(e),this.abort?.abort(),this.showNotification()){this.abort=new AbortController;let t=this.abort.signal;window.addEventListener("keydown",this.onKeyDown.bind(this),{once:!0,signal:t,capture:!0}),window.addEventListener("click",this.onClick.bind(this),{once:!0,signal:t,capture:!0}),this.setHideTimeout()}else this.clearHideTimeout()}setHideTimeout(){this.clearHideTimeout(),this.lastTimeoutId=window.setTimeout(()=>{this.setNotification(!1)},3e3)}clearHideTimeout(){this.lastTimeoutId&&(clearTimeout(this.lastTimeoutId),this.lastTimeoutId=void 0)}onKeyDown(e){e.key==="Escape"&&this.setNotification(!1)}onClick(e){this.setNotification(!1)}ngOnDestroy(){this.abort?.abort()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Bf=class n{notificationService=S(Fa);copy(e,t){navigator.clipboard?(navigator.clipboard.writeText(e),this.notificationService.success(t??"Copiado!")):this.notificationService.warn(t??"No se puede copiar!")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var $f=class n{baseId="prompt-dict";save(e,t){localStorage.setItem(this.fullIdentifier(e),JSON.stringify(t))}get(e){let t=localStorage.getItem(this.fullIdentifier(e));if(t)try{return JSON.parse(t)}catch(r){return console.error(`Error parsing value for ${e}:`,r),null}return null}delete(e){localStorage.removeItem(this.fullIdentifier(e))}fullIdentifier(e){return`${this.baseId}-${e}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hf=class n{store=S($f);darkMode=Ae(this.store.get("darkMode")??this.darkModeSystem());setDarkMode(e){this.darkMode.set(e)}toggle(){this.darkMode.set(!this.darkMode())}constructor(){xa(()=>this.apply(this.darkMode()))}apply(e){this.store.save("darkMode",e),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");let t=document.querySelector("meta[name='color-scheme']");if(t)t.setAttribute("content",e?"dark light":"light");else{let r=document.createElement("meta");r.setAttribute("name","color-scheme"),r.setAttribute("content",e?"dark light":"light"),document.head.appendChild(r)}}darkModeSystem(){return window.matchMedia("(prefers-color-scheme: dark)").matches}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var NR=()=>{};var xR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},qU=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},qf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(xR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new dE;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let I=l<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},dE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},zU=function(n){let e=xR(n);return qf.encodeByteArray(e,!0)},Ju=function(n){return zU(n).replace(/\./g,"")},zf=function(n){try{return qf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var GU=()=>fE().__FIREBASE_DEFAULTS__,WU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&zf(n[1]);return e&&JSON.parse(e)},Gf=()=>{try{return NR()||GU()||WU()||KU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pE=n=>{var e,t;return(t=(e=Gf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Wf=n=>{let e=pE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gE=()=>{var n;return(n=Gf())===null||n===void 0?void 0:n.config},mE=n=>{var e;return(e=Gf())===null||e===void 0?void 0:e[`_${n}`]};var os=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Dr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function La(n){return(await fetch(n,{credentials:"include"})).ok}function kR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ju(JSON.stringify(t)),Ju(JSON.stringify(s)),""].join(".")}var Zu={};function QU(){let n={prod:[],emulator:[]};for(let e of Object.keys(Zu))Zu[e]?n.emulator.push(e):n.prod.push(e);return n}function YU(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var MR=!1;function Va(n,e){if(typeof window>"u"||typeof document>"u"||!Dr(window.location.host)||Zu[n]===e||Zu[n]||MR)return;Zu[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=QU().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{MR=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=YU(r),y=t("text"),I=document.getElementById(y)||document.createElement("span"),A=t("learnmore"),N=document.getElementById(A)||document.createElement("a"),k=t("preprendIcon"),H=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let Y=g.element;a(Y),h(N,A);let Ce=l();u(H,k),Y.append(H,I,N,Ce),document.body.appendChild(Y)}o?(I.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function ZU(){var n;let e=(n=Gf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function VR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jR(){let n=Dt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function UR(){return!ZU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xu(){try{return typeof indexedDB=="object"}catch{return!1}}function BR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var JU="FirebaseError",tn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=JU,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xn.prototype.create)}},Xn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?XU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new tn(i,a,r)}};function XU(n,e){return n.replace(eB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var eB=/\{\$([^}]+)}/g;function $R(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function br(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(PR(o)&&PR(s)){if(!br(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function PR(n){return n!==null&&typeof n=="object"}function ja(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function HR(n,e){let t=new hE(n,e);return t.subscribe.bind(t)}var hE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");tB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=lE),i.error===void 0&&(i.error=lE),i.complete===void 0&&(i.complete=lE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function tB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lE(){}var wie=4*60*60*1e3;function Ue(n){return n&&n._delegate?n._delegate:n}var Pt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ss="[DEFAULT]";var yE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new os;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rB(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function nB(n){return n===ss?void 0:n}function rB(n){return n.instantiationMode==="EAGER"}var Kf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new yE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var iB=[],ve=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ve||{}),oB={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},sB=ve.INFO,aB={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},cB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=aB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Tr=class{constructor(e){this.name=e,this._logLevel=sB,this._logHandler=cB,this._userLogHandler=null,iB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}};var uB=(n,e)=>e.some(t=>n instanceof t),qR,zR;function lB(){return qR||(qR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dB(){return zR||(zR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var GR=new WeakMap,_E=new WeakMap,WR=new WeakMap,vE=new WeakMap,IE=new WeakMap;function hB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Cr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&GR.set(t,n)}).catch(()=>{}),IE.set(e,n),e}function fB(n){if(_E.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});_E.set(n,e)}var EE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return _E.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Cr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function KR(n){EE=n(EE)}function pB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Qf(this),e,...t);return WR.set(r,e.sort?e.sort():[e]),Cr(r)}:dB().includes(n)?function(...e){return n.apply(Qf(this),e),Cr(GR.get(this))}:function(...e){return Cr(n.apply(Qf(this),e))}}function gB(n){return typeof n=="function"?pB(n):(n instanceof IDBTransaction&&fB(n),uB(n,lB())?new Proxy(n,EE):n)}function Cr(n){if(n instanceof IDBRequest)return hB(n);if(vE.has(n))return vE.get(n);let e=gB(n);return e!==n&&(vE.set(n,e),IE.set(e,n)),e}var Qf=n=>IE.get(n);function YR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Cr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Cr(s.result),u.oldVersion,u.newVersion,Cr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var mB=["get","getKey","getAll","getAllKeys","count"],yB=["put","add","delete","clear"],wE=new Map;function QR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(wE.get(e))return wE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=yB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mB.includes(t)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&u.done]))[0]};return wE.set(e,o),o}KR(n=>Z(P({},n),{get:(e,t,r)=>QR(e,t)||n.get(e,t,r),has:(e,t)=>!!QR(e,t)||n.has(e,t)}));var bE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function vB(n){let e=n.getComponent();return e?.type==="VERSION"}var TE="@firebase/app",ZR="0.13.2";var ui=new Tr("@firebase/app"),_B="@firebase/app-compat",EB="@firebase/analytics-compat",IB="@firebase/analytics",wB="@firebase/app-check-compat",DB="@firebase/app-check",bB="@firebase/auth",TB="@firebase/auth-compat",CB="@firebase/database",SB="@firebase/data-connect",AB="@firebase/database-compat",RB="@firebase/functions",NB="@firebase/functions-compat",MB="@firebase/installations",PB="@firebase/installations-compat",xB="@firebase/messaging",kB="@firebase/messaging-compat",OB="@firebase/performance",FB="@firebase/performance-compat",LB="@firebase/remote-config",VB="@firebase/remote-config-compat",jB="@firebase/storage",UB="@firebase/storage-compat",BB="@firebase/firestore",$B="@firebase/ai",HB="@firebase/firestore-compat",qB="firebase",zB="11.10.0";var CE="[DEFAULT]",GB={[TE]:"fire-core",[_B]:"fire-core-compat",[IB]:"fire-analytics",[EB]:"fire-analytics-compat",[DB]:"fire-app-check",[wB]:"fire-app-check-compat",[bB]:"fire-auth",[TB]:"fire-auth-compat",[CB]:"fire-rtdb",[SB]:"fire-data-connect",[AB]:"fire-rtdb-compat",[RB]:"fire-fn",[NB]:"fire-fn-compat",[MB]:"fire-iid",[PB]:"fire-iid-compat",[xB]:"fire-fcm",[kB]:"fire-fcm-compat",[OB]:"fire-perf",[FB]:"fire-perf-compat",[LB]:"fire-rc",[VB]:"fire-rc-compat",[jB]:"fire-gcs",[UB]:"fire-gcs-compat",[BB]:"fire-fst",[HB]:"fire-fst-compat",[$B]:"fire-vertex","fire-js":"fire-js",[qB]:"fire-js-all"};var el=new Map,WB=new Map,SE=new Map;function JR(n,e){try{n.container.addComponent(e)}catch(t){ui.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Dn(n){let e=n.name;if(SE.has(e))return ui.debug(`There were multiple attempts to register component ${e}.`),!1;SE.set(e,n);for(let t of el.values())JR(t,n);for(let t of WB.values())JR(t,n);return!0}function Ji(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nn(n){return n==null?!1:n.settings!==void 0}var KB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new Xn("app","Firebase",KB);var AE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}};var Xi=zB;function ME(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:CE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Zi.create("bad-app-name",{appName:String(i)});if(t||(t=gE()),!t)throw Zi.create("no-options");let o=el.get(i);if(o){if(br(t,o.options)&&br(r,o.config))return o;throw Zi.create("duplicate-app",{appName:i})}let s=new Kf(i);for(let u of SE.values())s.addComponent(u);let a=new AE(t,r,s);return el.set(i,a),a}function li(n=CE){let e=el.get(n);if(!e&&n===CE&&gE())return ME();if(!e)throw Zi.create("no-app",{appName:n});return e}function Yf(){return Array.from(el.values())}function ke(n,e,t){var r;let i=(r=GB[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ui.warn(a.join(" "));return}Dn(new Pt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var QB="firebase-heartbeat-database",YB=1,tl="firebase-heartbeat-store",DE=null;function nN(){return DE||(DE=YR(QB,YB,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(tl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Zi.create("idb-open",{originalErrorMessage:n.message})})),DE}async function ZB(n){try{let t=(await nN()).transaction(tl),r=await t.objectStore(tl).get(rN(n));return await t.done,r}catch(e){if(e instanceof tn)ui.warn(e.message);else{let t=Zi.create("idb-get",{originalErrorMessage:e?.message});ui.warn(t.message)}}}async function XR(n,e){try{let r=(await nN()).transaction(tl,"readwrite");await r.objectStore(tl).put(e,rN(n)),await r.done}catch(t){if(t instanceof tn)ui.warn(t.message);else{let r=Zi.create("idb-set",{originalErrorMessage:t?.message});ui.warn(r.message)}}}function rN(n){return`${n.name}!${n.options.appId}`}var JB=1024,XB=30,RE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new NE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=eN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>XB){let s=t$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ui.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=eN(),{heartbeatsToSend:r,unsentEntries:i}=e$(this._heartbeatsCache.heartbeats),o=Ju(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ui.warn(t),""}}};function eN(){return new Date().toISOString().substring(0,10)}function e$(n,e=JB){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),tN(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),tN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var NE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xu()?BR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await ZB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return XR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return XR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function tN(n){return Ju(JSON.stringify({version:2,heartbeats:n})).length}function t$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function n$(n){Dn(new Pt("platform-logger",e=>new bE(e),"PRIVATE")),Dn(new Pt("heartbeat",e=>new RE(e),"PRIVATE")),ke(TE,ZR,n),ke(TE,ZR,"esm2017"),ke("fire-js","")}n$("");var r$="firebase",i$="11.10.0";ke(r$,i$,"app");function Zie(n,e){let r=!e?.manualCleanup?e?.injector?.get(Mt)??S(Mt):null,i=o$(e?.equal),o;e?.requireSync?o=Ae({kind:0},{equal:i}):o=Ae({kind:1,value:e?.initialValue},{equal:i});let s,a=n.subscribe({next:u=>o.set({kind:1,value:u}),error:u=>{o.set({kind:2,error:u}),s?.()},complete:()=>{s?.()}});if(e?.requireSync&&o().kind===0)throw new j(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),fn(()=>{let u=o();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new j(601,!1)}},{equal:e?.equal})}function o$(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function iN(n){n===void 0&&(n=S(Ve));let e=n.get(qi);return t=>new he(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Sr=new ka("ANGULARFIRE2_VERSION");function cs(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var eo=(n,e)=>{let t=e?[e]:Yf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ua=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Ua||{}),oN=aE()&&typeof Zone<"u"?Ua.WARN:Ua.SILENT;var Zf=class{zone;delegate;constructor(e,t=fy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Ar=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=S(Ie);this.outsideAngular=t.runOutsideAngular(()=>new Zf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Zf(typeof Zone>"u"?void 0:Zone.current,uu))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sN=!1;function s$(n,e){!sN&&(oN>Ua.SILENT||aE())&&(sN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),oN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function a$(n){let e=S(Ie,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function as(n){let e=S(Ie,{optional:!0});return e?e.run(()=>n()):n()}var c$=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),mt(t,()=>as(()=>n.apply(void 0,r)))),It=(n,e,t)=>(t||=e?Ua.WARN:Ua.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=S(Ar),s=S(qi),a=S(et)}catch{return s$(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=as(()=>s.add())),i[l]=c$(i[l],r,a));let u=a$(()=>n.apply(this,i));return e?u instanceof he?u.pipe(ki(o.outsideAngular),xi(o.insideAngular),iN(a)):u instanceof Promise?as(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>mt(a,()=>as(()=>h(g))),g=>mt(a,()=>as(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:as(()=>u):u instanceof he?u.pipe(ki(o.outsideAngular),xi(o.insideAngular)):as(()=>u)});var er=class{constructor(e){return e}},di=class{constructor(){return Yf()}};function u$(n){return n&&n.length===1?n[0]:new er(li())}var PE=new U("angularfire2._apps"),l$={provide:er,useFactory:u$,deps:[[new _t,PE]]},d$={provide:di,deps:[[new _t,PE]]};function h$(n){return(e,t)=>{let r=t.get(Wi);ke("angularfire",Sr.full,"core"),ke("angularfire",Sr.full,"app"),ke("angular",AR.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new er(i)}}function moe(n,...e){return Wt([l$,d$,{provide:PE,useFactory:h$(n),multi:!0,deps:[Ie,Ve,Ar,...e]}])}var yoe=It(ME,!0);var uN=null;function On(){return uN}function xE(n){uN??=n}var nl=class{},kE=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>S(lN),providedIn:"platform"})}return n})();var lN=(()=>{class n extends kE{_location;_history;_doc=S(wt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return On().getBaseHref(this._doc)}onPopState(t){let r=On().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=On().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function dN(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function aN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function to(n){return n&&n[0]!=="?"?`?${n}`:n}var Ba=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>S(hN),providedIn:"root"})}return n})(),Jf=new U(""),hN=(()=>{class n extends Ba{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??S(wt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return dN(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+to(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+to(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+to(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)($(kE),$(Jf,8))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$a=(()=>{class n{_subject=new Xe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=g$(aN(cN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+to(r))}normalize(t){return n.stripTrailingSlash(p$(this._basePath,cN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+to(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+to(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=to;static joinWithSlash=dN;static stripTrailingSlash=aN;static \u0275fac=function(r){return new(r||n)($(Ba))};static \u0275prov=F({token:n,factory:()=>f$(),providedIn:"root"})}return n})();function f$(){return new $a($(Ba))}function p$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function cN(n){return n.replace(/\/index.html$/,"")}function g$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Xf=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},pN=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Xf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),fN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);fN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(W(Ki),W(Yo),W(cE))};static \u0275dir=le({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function fN(n,e){n.context.$implicit=e.item}function gN(n,e){return new j(2100,!1)}var OE=class{createSubscription(e,t,r){return en(()=>e.subscribe({next:t,error:r}))}dispose(e){en(()=>e.unsubscribe())}},FE=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},m$=new FE,y$=new OE,us=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=S(Lt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(ii(t))return m$;if(Pf(t))return y$;throw gN(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(W(Yi,16))};static \u0275pipe=Aa({name:"async",type:n,pure:!1})}return n})();var v$=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,_$=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw gN(n,t);return t.replace(v$,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Aa({name:"titlecase",type:n,pure:!0})}return n})();var mN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ri({type:n});static \u0275inj=dr({})}return n})();function LE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var rl=class{};var yN="browser";var I$=new Map,w$={activated:!1,tokenObservers:[]},D$={initialized:!1,enabled:!1};function tr(n){return I$.get(n)||Object.assign({},w$)}function IN(){return D$}var b$="https://content-firebaseappcheck.googleapis.com/v1";var T$="exchangeDebugToken",vN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},rae=24*60*60*1e3;var UE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new os,this.pending.promise.catch(t=>{}),await C$(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new os,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function C$(n){return new Promise(e=>{setTimeout(e,n)})}var S$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},no=new Xn("appCheck","AppCheck",S$);function wN(n){if(!tr(n).activated)throw no.create("use-before-activation",{appName:n.name})}async function DN({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(n,o)}catch(p){throw no.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw no.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw no.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw no.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function bN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${b$}/projects/${t}/apps/${r}:${T$}?key=${i}`,body:{debug_token:e}}}var A$="firebase-app-check-database",R$=1,BE="firebase-app-check-store";var ep=null;function N$(){return ep||(ep=new Promise((n,e)=>{try{let t=indexedDB.open(A$,R$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(no.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(BE,{keyPath:"compositeKey"})}}}catch(t){e(no.create("storage-open",{originalErrorMessage:t?.message}))}}),ep)}function M$(n,e){return P$(x$(n),e)}async function P$(n,e){let r=(await N$()).transaction(BE,"readwrite"),o=r.objectStore(BE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(no.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function x$(n){return`${n.options.appId}-${n.name}`}var il=new Tr("@firebase/app-check");function VE(n,e){return Xu()?M$(n,e).catch(t=>{il.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function TN(){return IN().enabled}async function CN(){let n=IN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var k$={error:"UNKNOWN_ERROR"};function O$(n){return qf.encodeString(JSON.stringify(n),!1)}async function $E(n,e=!1,t=!1){let r=n.app;wN(r);let i=tr(r),o=i.token,s;if(o&&!ol(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(ol(l)?o=l:await VE(r,void 0))}if(!e&&o&&ol(o))return{token:o.token};let a=!1;if(TN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=DN(bN(r,await CN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await VE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?il.warn(l.message):t&&il.error(l),jE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await tr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?il.warn(l.message):t&&il.error(l),s=l}let u;return o?s?ol(o)?u={token:o.token,internalError:s}:u=jE(s):(u={token:o.token},i.token=o,await VE(r,o)):u=jE(s),a&&j$(r,u),u}async function F$(n){let e=n.app;wN(e);let{provider:t}=tr(e);if(TN()){let r=await CN(),{token:i}=await DN(bN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function L$(n,e,t,r){let{app:i}=n,o=tr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ol(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),_N(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>_N(n))}function SN(n,e){let t=tr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function _N(n){let{app:e}=n,t=tr(e),r=t.tokenRefresher;r||(r=V$(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function V$(n){let{app:e}=n;return new UE(async()=>{let t=tr(e),r;if(t.token?r=await $E(n,!0):r=await $E(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},vN.RETRIAL_MIN_WAIT,vN.RETRIAL_MAX_WAIT)}function j$(n,e){let t=tr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ol(n){return n.expireTimeMillis-Date.now()>0}function jE(n){return{token:O$(k$),error:n}}var HE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=tr(this.app);for(let t of e)SN(this.app,t.next);return Promise.resolve()}};function U$(n,e){return new HE(n,e)}function B$(n){return{getToken:e=>$E(n,e),getLimitedUseToken:()=>F$(n),addTokenListener:e=>L$(n,"INTERNAL",e),removeTokenListener:e=>SN(n.app,e)}}var $$="@firebase/app-check",H$="0.10.1";var q$="app-check",EN="app-check-internal";function z$(){Dn(new Pt(q$,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return U$(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(EN).initialize()})),Dn(new Pt(EN,n=>{let e=n.getProvider("app-check").getImmediate();return B$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ke($$,H$)}z$();var G$="app-check";var ro=class{constructor(){return eo(G$)}};var W$=["localhost","0.0.0.0","127.0.0.1"],gae=typeof window<"u"&&W$.includes(window.location.hostname);function $N(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var HN=$N,qN=new Xn("auth","Firebase",$N());var sp=new Tr("@firebase/auth");function K$(n,...e){sp.logLevel<=ve.WARN&&sp.warn(`Auth (${Xi}): ${n}`,...e)}function np(n,...e){sp.logLevel<=ve.ERROR&&sp.error(`Auth (${Xi}): ${n}`,...e)}function Nr(n,...e){throw aI(n,...e)}function nr(n,...e){return aI(n,...e)}function sI(n,e,t){let r=Object.assign(Object.assign({},HN()),{[e]:t});return new Xn("auth","Firebase",r).create(e,{appName:n.name})}function ls(n){return sI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Q$(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Nr(n,"argument-error"),sI(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function aI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return qN.create(n,...e)}function re(n,e,...t){if(!n)throw aI(e,...t)}function hi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw np(e),new Error(e)}function pi(n,e){n||hi(e)}function GE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Y$(){return AN()==="http:"||AN()==="https:"}function AN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Z$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Y$()||LR()||"connection"in navigator)?navigator.onLine:!0}function J$(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ds=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,pi(t>e,"Short delay should be less than long delay!"),this.isMobile=OR()||VR()}get(){return Z$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function cI(n,e){pi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ap=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var X$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var eH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tH=new ds(3e4,6e4);function uI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function qa(n,e,t,r,i={}){return zN(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=ja(Object.assign({key:n.config.apiKey},s)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:u},o);return FR()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Dr(n.emulatorConfig.host)&&(l.credentials="include"),ap.fetch()(await GN(n,n.config.apiHost,t,a),l)})}async function zN(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},X$),e);try{let i=new WE(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw tp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw tp(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw tp(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw tp(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw sI(n,h,l);Nr(n,h)}}catch(i){if(i instanceof tn)throw i;Nr(n,"network-request-failed",{message:String(i)})}}async function nH(n,e,t,r,i={}){let o=await qa(n,e,t,r,i);return"mfaPendingCredential"in o&&Nr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function GN(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?cI(n.config,i):`${n.config.apiScheme}://${i}`;return eH.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var WE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),tH.get())})}};function tp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=nr(n,e,r);return i.customData._tokenResponse=t,i}async function rH(n,e){return qa(n,"POST","/v1/accounts:delete",e)}async function cp(n,e){return qa(n,"POST","/v1/accounts:lookup",e)}function sl(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lI(n,e=!1){let t=Ue(n),r=await t.getIdToken(e),i=dI(r);re(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:sl(qE(i.auth_time)),issuedAtTime:sl(qE(i.iat)),expirationTime:sl(qE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function qE(n){return Number(n)*1e3}function dI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return np("JWT malformed, contained fewer than 3 sections"),null;try{let i=zf(t);return i?JSON.parse(i):(np("Failed to decode base64 JWT payload"),null)}catch(i){return np("Caught error parsing JWT payload as JSON",i?.toString()),null}}function RN(n){let e=dI(n);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function cl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof tn&&iH(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function iH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var KE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ul=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sl(this.lastLoginAt),this.creationTime=sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function up(n){var e;let t=n.auth,r=await n.getIdToken(),i=await cl(n,cp(t,{idToken:r}));re(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?WN(o.providerUserInfo):[],a=oH(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ul(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function hI(n){let e=Ue(n);await up(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function WN(n){return n.map(e=>{var{providerId:t}=e,r=Jd(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function sH(n,e){let t=await zN(n,{},async()=>{let r=ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await GN(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&Dr(n.emulatorConfig.host)&&(u.credentials="include"),ap.fetch()(s,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function aH(n,e){return qa(n,"POST","/v2/accounts:revokeToken",uI(n,e))}var al=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){re(e.length!==0,"internal-error");let t=RN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await sH(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(re(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(re(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return hi("not implemented")}};function io(n,e){re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var oo=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Jd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ul(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let t=await cl(this,this.stsTokenManager.getToken(this.auth,e));return re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lI(this,e)}reload(){return hI(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await up(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(ls(this.auth));let e=await this.getIdToken();return await cl(this,rH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,I=(s=t.photoURL)!==null&&s!==void 0?s:void 0,A=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=t.createdAt)!==null&&l!==void 0?l:void 0,H=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Y,emailVerified:Ce,isAnonymous:Je,providerData:Me,stsTokenManager:D}=t;re(Y&&D,e,"internal-error");let v=al.fromJSON(this.name,D);re(typeof Y=="string",e,"internal-error"),io(p,e.name),io(g,e.name),re(typeof Ce=="boolean",e,"internal-error"),re(typeof Je=="boolean",e,"internal-error"),io(y,e.name),io(I,e.name),io(A,e.name),io(N,e.name),io(k,e.name),io(H,e.name);let E=new n({uid:Y,auth:e,email:g,emailVerified:Ce,displayName:p,isAnonymous:Je,photoURL:I,phoneNumber:y,tenantId:A,stsTokenManager:v,createdAt:k,lastLoginAt:H});return Me&&Array.isArray(Me)&&(E.providerData=Me.map(w=>Object.assign({},w))),N&&(E._redirectEventId=N),E}static async _fromIdTokenResponse(e,t,r=!1){let i=new al;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await up(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];re(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?WN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new al;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ul(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var NN=new Map;function fi(n){pi(n instanceof Function,"Expected a class definition");let e=NN.get(n);return e?(pi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,NN.set(n,e),e)}var cH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),QE=cH;function rp(n,e,t){return`firebase:${n}:${e}:${t}`}var lp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=rp(this.userKey,i.apiKey,o),this.fullPersistenceKey=rp("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await cp(this.auth,{idToken:e}).catch(()=>{});return t?oo._fromGetAccountInfoResponse(this.auth,t,e):null}return oo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(fi(QE),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||fi(QE),s=rp(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await cp(e,{idToken:h}).catch(()=>{});if(!g)break;p=await oo._fromGetAccountInfoResponse(e,g,h)}else p=oo._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new n(o,e,r))}};function MN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XN(e))return"Blackberry";if(eM(e))return"Webos";if(QN(e))return"Safari";if((e.includes("chrome/")||YN(e))&&!e.includes("edge/"))return"Chrome";if(JN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function KN(n=Dt()){return/firefox\//i.test(n)}function QN(n=Dt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YN(n=Dt()){return/crios\//i.test(n)}function ZN(n=Dt()){return/iemobile/i.test(n)}function JN(n=Dt()){return/android/i.test(n)}function XN(n=Dt()){return/blackberry/i.test(n)}function eM(n=Dt()){return/webos/i.test(n)}function fI(n=Dt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function uH(n=Dt()){var e;return fI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lH(){return jR()&&document.documentMode===10}function tM(n=Dt()){return fI(n)||JN(n)||eM(n)||XN(n)||/windows phone/i.test(n)||ZN(n)}function nM(n,e=[]){let t;switch(n){case"Browser":t=MN(Dt());break;case"Worker":t=`${MN(Dt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xi}/${r}`}var YE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function dH(n,e={}){return qa(n,"GET","/v2/passwordPolicy",uI(n,e))}var hH=6,ZE=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:hH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var JE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dp(this),this.idTokenSubscription=new dp(this),this.beforeStateQueue=new YE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fi(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await lp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await cp(this,{idToken:e}),r=await oo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await up(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=J$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(ls(this));let t=e?Ue(e):null;return t&&re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(ls(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(ls(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await dH(this),t=new ZE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await aH(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&fi(e)||this._popupRedirectResolver;re(t,this,"argument-error"),this.redirectPersistenceManager=await lp.create(this,[fi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&K$(`Error while retrieving App Check token: ${t.error}`),t?.token}};function _p(n){return Ue(n)}var dp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=HR(t=>this.observer=t)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var pI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fH(n){pI=n}function pH(n){return pI.loadJS(n)}function gH(){return pI.gapiScript}function rM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function gI(n,e){let t=Ji(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(br(o,e??{}))return i;Nr(i,"already-initialized")}return t.initialize({options:e})}function mH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(fi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function mI(n,e,t){let r=_p(n);re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=iM(e),{host:s,port:a}=yH(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),re(br(l,r.config.emulator)&&br(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Dr(s)?(La(`${o}//${s}${u}`),Va("Auth",!0)):i||vH()}function iM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function yH(n){let e=iM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:PN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:PN(s)}}}function PN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function vH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ll=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hi("not implemented")}_getIdTokenResponse(e){return hi("not implemented")}_linkToIdToken(e,t){return hi("not implemented")}_getReauthenticationResolver(e){return hi("not implemented")}};async function Ha(n,e){return nH(n,"POST","/v1/accounts:signInWithIdp",uI(n,e))}var _H="http://localhost",hp=class n extends ll{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Jd(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return Ha(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,Ha(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Ha(e,t)}buildRequest(){let e={requestUri:_H,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ja(t)}return e}};var dl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var fp=class extends dl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var yI=(()=>{class n extends fp{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return hp._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var hl=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await oo._fromIdTokenResponse(e,r,i),s=xN(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=xN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function xN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var XE=class n extends tn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function oM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?XE._fromErrorAndOperation(n,o,e,r):o})}async function EH(n,e,t=!1){let r=await cl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return hl._forOperation(n,"link",r)}async function IH(n,e,t=!1){let{auth:r}=n;if(nn(r.app))return Promise.reject(ls(r));let i="reauthenticate";try{let o=await cl(n,oM(r,i,e,n),t);re(o.idToken,r,"internal-error");let s=dI(o.idToken);re(s,r,"internal-error");let{sub:a}=s;return re(n.uid===a,r,"user-mismatch"),hl._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Nr(r,"user-mismatch"),o}}async function wH(n,e,t=!1){if(nn(n.app))return Promise.reject(ls(n));let r="signIn",i=await oM(n,r,e),o=await hl._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function vI(n,e,t,r){return Ue(n).onIdTokenChanged(e,t,r)}function _I(n,e,t){return Ue(n).beforeAuthStateChanged(e,t)}function EI(n){return Ue(n).signOut()}var pp="__sak";var gp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pp,"1"),this.storage.removeItem(pp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var DH=1e3,bH=10,TH=(()=>{class n extends gp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);lH()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,bH):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},DH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),sM=TH;var CH=(()=>{class n extends gp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),II=CH;function SH(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var AH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await SH(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function wI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var eI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=wI("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Rr(){return window}function RH(n){Rr().location.href=n}function aM(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function NH(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function PH(){return aM()?self:null}var cM="firebaseLocalStorageDb",xH=1,mp="firebaseLocalStorage",uM="fbase_key",hs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Ep(n,e){return n.transaction([mp],e?"readwrite":"readonly").objectStore(mp)}function kH(){let n=indexedDB.deleteDatabase(cM);return new hs(n).toPromise()}function tI(){let n=indexedDB.open(cM,xH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(mp,{keyPath:uM})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(mp)?e(r):(r.close(),await kH(),e(await tI()))})})}async function kN(n,e,t){let r=Ep(n,!0).put({[uM]:e,value:t});return new hs(r).toPromise()}async function OH(n,e){let t=Ep(n,!1).get(e),r=await new hs(t).toPromise();return r===void 0?null:r.value}function ON(n,e){let t=Ep(n,!0).delete(e);return new hs(t).toPromise()}var FH=800,LH=3,VH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tI(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>LH)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=AH._getInstance(PH()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await NH(),!this.activeServiceWorker)return;this.sender=new eI(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||MH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await tI();return await kN(t,pp,"1"),await ON(t,pp),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>kN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>OH(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ON(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=Ep(o,!1).getAll();return new hs(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),lM=VH;var Tae=rM("rcb"),Cae=new ds(3e4,6e4);function dM(n,e){return e?fi(e):(re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var fl=class extends ll{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ha(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ha(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ha(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function jH(n){return wH(n.auth,new fl(n),n.bypassAuthState)}function UH(n){let{auth:e,user:t}=n;return re(t,e,"internal-error"),IH(t,new fl(n),n.bypassAuthState)}async function BH(n){let{auth:e,user:t}=n;return re(t,e,"internal-error"),EH(t,new fl(n),n.bypassAuthState)}var yp=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jH;case"linkViaPopup":case"linkViaRedirect":return BH;case"reauthViaPopup":case"reauthViaRedirect":return UH;default:Nr(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var $H=new ds(2e3,1e4);async function DI(n,e,t){if(nn(n.app))return Promise.reject(nr(n,"operation-not-supported-in-this-environment"));let r=_p(n);Q$(n,e,dl);let i=dM(r,t);return new HH(r,"signInViaPopup",e,i).executeNotNull()}var HH=(()=>{class n extends yp{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return re(t,this.auth,"internal-error"),t}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");let t=wI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,$H.get())};t()}}n.currentPopupAction=null;return n})(),qH="pendingRedirect",ip=new Map,nI=class extends yp{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ip.get(this.auth._key());if(!e){try{let r=await zH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ip.set(this.auth._key(),e)}return this.bypassAuthState||ip.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function zH(n,e){let t=KH(e),r=WH(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function GH(n,e){ip.set(n._key(),e)}function WH(n){return fi(n._redirectPersistence)}function KH(n){return rp(qH,n.config.apiKey,n.name)}async function QH(n,e,t=!1){if(nn(n.app))return Promise.reject(ls(n));let r=_p(n),i=dM(r,e),s=await new nI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var YH=10*60*1e3,rI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!hM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(nr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YH&&this.cachedEventUids.clear(),this.cachedEventUids.has(FN(e))}saveEventToCache(e){this.cachedEventUids.add(FN(e)),this.lastProcessedEventTime=Date.now()}};function FN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ZH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hM(n);default:return!1}}async function JH(n,e={}){return qa(n,"GET","/v1/projects",e)}var XH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e4=/^https?/;async function t4(n){if(n.config.emulator)return;let{authorizedDomains:e}=await JH(n);for(let t of e)try{if(n4(t))return}catch{}Nr(n,"unauthorized-domain")}function n4(n){let e=GE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!e4.test(t))return!1;if(XH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var r4=new ds(3e4,6e4);function LN(){let n=Rr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function i4(n){return new Promise((e,t)=>{var r,i,o;function s(){LN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LN(),t(nr(n,"network-request-failed"))},timeout:r4.get()})}if(!((i=(r=Rr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Rr().gapi)===null||o===void 0)&&o.load)s();else{let a=rM("iframefcb");return Rr()[a]=()=>{gapi.load?s():t(nr(n,"network-request-failed"))},pH(`${gH()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw op=null,e})}var op=null;function o4(n){return op=op||i4(n),op}var s4=new ds(5e3,15e3),a4="__/auth/iframe",c4="emulator/auth/iframe",u4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d4(n){let e=n.config;re(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?cI(e,c4):`https://${n.config.authDomain}/${a4}`,r={apiKey:e.apiKey,appName:n.name,v:Xi},i=l4.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ja(r).slice(1)}`}async function h4(n){let e=await o4(n),t=Rr().gapi;return re(t,n,"internal-error"),e.open({where:document.body,url:d4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u4,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=nr(n,"network-request-failed"),a=Rr().setTimeout(()=>{o(s)},s4.get());function u(){Rr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var f4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p4=500,g4=600,m4="_blank",y4="http://localhost",vp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function v4(n,e,t,r=p4,i=g4){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},f4),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Dt().toLowerCase();t&&(a=YN(l)?m4:t),KN(l)&&(e=e||y4,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,I])=>`${g}${y}=${I},`,"");if(uH(l)&&a!=="_self")return _4(e||"",a),new vp(null);let p=window.open(e||"",a,h);re(p,n,"popup-blocked");try{p.focus()}catch{}return new vp(p)}function _4(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var E4="__/auth/handler",I4="emulator/auth/handler",w4=encodeURIComponent("fac");async function VN(n,e,t,r,i,o){re(n.config.authDomain,n,"auth-domain-config-required"),re(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Xi,eventId:i};if(e instanceof dl){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",$R(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof fp){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await n._getAppCheckToken(),l=u?`#${w4}=${encodeURIComponent(u)}`:"";return`${D4(n)}?${ja(a).slice(1)}${l}`}function D4({config:n}){return n.emulator?cI(n,I4):`https://${n.authDomain}/${E4}`}var zE="webStorageSupport",iI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=II,this._completeRedirectFn=QH,this._overrideRedirectResult=GH}async _openPopup(e,t,r,i){var o;pi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await VN(e,t,r,GE(),i);return v4(e,s,wI())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await VN(e,t,r,GE(),i);return RH(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(pi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await h4(e),r=new rI(e);return t.register("authEvent",i=>(re(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zE,{type:zE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[zE];s!==void 0&&t(!!s),Nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=t4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tM()||QN()||fI()}},fM=iI;var jN="@firebase/auth",UN="1.10.8";var oI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function b4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T4(n){Dn(new Pt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;re(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nM(n)},l=new JE(r,i,o,u);return mH(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Dn(new Pt("auth-internal",e=>{let t=_p(e.getProvider("auth").getImmediate());return(r=>new oI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ke(jN,UN,b4(n)),ke(jN,UN,"esm2017")}var C4=5*60,S4=mE("authIdTokenMaxAge")||C4,BN=null,A4=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>S4)return;let i=t?.token;BN!==i&&(BN=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function bI(n=li()){let e=Ji(n,"auth");if(e.isInitialized())return e.getImmediate();let t=gI(n,{popupRedirectResolver:fM,persistence:[lM,sM,II]}),r=mE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=A4(o.toString());_I(t,s,()=>s(t.currentUser)),vI(t,a=>s(a))}}let i=pE("auth");return i&&mI(t,`http://${i}`),t}function R4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}fH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=nr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",R4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T4("Browser");var pM="auth",gi=class{constructor(e){return e}},fs=class{constructor(){return eo(pM)}};var TI=new U("angularfire2.auth-instances");function E3(n,e){let t=cs(pM,n,e);return t&&new gi(t)}function I3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new gi(r)}}var w3={provide:fs,deps:[[new _t,TI]]},D3={provide:gi,useFactory:E3,deps:[[new _t,TI],er]};function hce(n,...e){return ke("angularfire",Sr.full,"auth"),Wt([D3,w3,{provide:TI,useFactory:I3(n),multi:!0,deps:[Ie,Ve,Ar,di,[new _t,ro],...e]}])}var fce=It(bI,!0);var gM=It(DI,!0,2);var mM=It(EI,!0,2);var yM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vM={};var mi,CI;(function(){var n;function e(D,v){function E(){}E.prototype=v.prototype,D.D=v.prototype,D.prototype=new E,D.prototype.constructor=D,D.C=function(w,b,C){for(var _=Array(arguments.length-2),qr=2;qr<arguments.length;qr++)_[qr-2]=arguments[qr];return v.prototype[b].apply(w,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,E){E||(E=0);var w=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)w[b]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(b=0;16>b;++b)w[b]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=D.g[0],E=D.g[1],b=D.g[2];var C=D.g[3],_=v+(C^E&(b^C))+w[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=C+(b^v&(E^b))+w[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(E^C&(v^E))+w[2]+606105819&4294967295,b=C+(_<<17&4294967295|_>>>15),_=E+(v^b&(C^v))+w[3]+3250441966&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(C^E&(b^C))+w[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(b^v&(E^b))+w[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(E^C&(v^E))+w[6]+2821735955&4294967295,b=C+(_<<17&4294967295|_>>>15),_=E+(v^b&(C^v))+w[7]+4249261313&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(C^E&(b^C))+w[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(b^v&(E^b))+w[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(E^C&(v^E))+w[10]+4294925233&4294967295,b=C+(_<<17&4294967295|_>>>15),_=E+(v^b&(C^v))+w[11]+2304563134&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(C^E&(b^C))+w[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(b^v&(E^b))+w[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(E^C&(v^E))+w[14]+2792965006&4294967295,b=C+(_<<17&4294967295|_>>>15),_=E+(v^b&(C^v))+w[15]+1236535329&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(b^C&(E^b))+w[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^b&(v^E))+w[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(C^v))+w[11]+643717713&4294967295,b=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(b^C))+w[0]+3921069994&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(E^b))+w[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^b&(v^E))+w[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(C^v))+w[15]+3634488961&4294967295,b=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(b^C))+w[4]+3889429448&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(E^b))+w[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^b&(v^E))+w[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(C^v))+w[3]+4107603335&4294967295,b=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(b^C))+w[8]+1163531501&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(E^b))+w[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^b&(v^E))+w[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(C^v))+w[7]+1735328473&4294967295,b=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(b^C))+w[12]+2368359562&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(E^b^C)+w[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^b)+w[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^E)+w[11]+1839030562&4294967295,b=C+(_<<16&4294967295|_>>>16),_=E+(b^C^v)+w[14]+4259657740&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^C)+w[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^b)+w[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^E)+w[7]+4139469664&4294967295,b=C+(_<<16&4294967295|_>>>16),_=E+(b^C^v)+w[10]+3200236656&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^C)+w[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^b)+w[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^E)+w[3]+3572445317&4294967295,b=C+(_<<16&4294967295|_>>>16),_=E+(b^C^v)+w[6]+76029189&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^C)+w[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^b)+w[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^E)+w[15]+530742520&4294967295,b=C+(_<<16&4294967295|_>>>16),_=E+(b^C^v)+w[2]+3299628645&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(b^(E|~C))+w[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~b))+w[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~E))+w[14]+2878612391&4294967295,b=C+(_<<15&4294967295|_>>>17),_=E+(C^(b|~v))+w[5]+4237533241&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~C))+w[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~b))+w[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~E))+w[10]+4293915773&4294967295,b=C+(_<<15&4294967295|_>>>17),_=E+(C^(b|~v))+w[1]+2240044497&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~C))+w[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~b))+w[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~E))+w[6]+2734768916&4294967295,b=C+(_<<15&4294967295|_>>>17),_=E+(C^(b|~v))+w[13]+1309151649&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~C))+w[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~b))+w[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~E))+w[2]+718787259&4294967295,b=C+(_<<15&4294967295|_>>>17),_=E+(C^(b|~v))+w[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+C&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var E=v-this.blockSize,w=this.B,b=this.h,C=0;C<v;){if(b==0)for(;C<=E;)i(this,D,C),C+=this.blockSize;if(typeof D=="string"){for(;C<v;)if(w[b++]=D.charCodeAt(C++),b==this.blockSize){i(this,w),b=0;break}}else for(;C<v;)if(w[b++]=D[C++],b==this.blockSize){i(this,w),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var E=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=E&255,E/=256;for(this.u(D),D=Array(16),v=E=0;4>v;++v)for(var w=0;32>w;w+=8)D[E++]=this.g[v]>>>w&255;return D};function o(D,v){var E=a;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=v(D)}function s(D,v){this.h=v;for(var E=[],w=!0,b=D.length-1;0<=b;b--){var C=D[b]|0;w&&C==v||(E[b]=C,w=!1)}this.g=E}var a={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return N(l(-D));for(var v=[],E=1,w=0;D>=E;w++)v[w]=D/E|0,E*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return N(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),w=p,b=0;b<D.length;b+=8){var C=Math.min(8,D.length-b),_=parseInt(D.substring(b,b+C),v);8>C?(C=l(Math.pow(v,C)),w=w.j(C).add(l(_))):(w=w.j(E),w=w.add(l(_)))}return w}var p=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-N(this).m();for(var D=0,v=1,E=0;E<this.g.length;E++){var w=this.i(E);D+=(0<=w?w:4294967296+w)*v,v*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(A(this))return"-"+N(this).toString(D);for(var v=l(Math.pow(D,6)),E=this,w="";;){var b=Ce(E,v).g;E=k(E,b.j(v));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(D);if(E=b,I(E))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function A(D){return D.h==-1}n.l=function(D){return D=k(this,D),A(D)?-1:I(D)?0:1};function N(D){for(var v=D.g.length,E=[],w=0;w<v;w++)E[w]=~D.g[w];return new s(E,~D.h).add(g)}n.abs=function(){return A(this)?N(this):this},n.add=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0,b=0;b<=v;b++){var C=w+(this.i(b)&65535)+(D.i(b)&65535),_=(C>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);w=_>>>16,C&=65535,_&=65535,E[b]=_<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(D,v){return D.add(N(v))}n.j=function(D){if(I(this)||I(D))return p;if(A(this))return A(D)?N(this).j(N(D)):N(N(this).j(D));if(A(D))return N(this.j(N(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,E=[],w=0;w<2*v;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<D.g.length;b++){var C=this.i(w)>>>16,_=this.i(w)&65535,qr=D.i(b)>>>16,Uc=D.i(b)&65535;E[2*w+2*b]+=_*Uc,H(E,2*w+2*b),E[2*w+2*b+1]+=C*Uc,H(E,2*w+2*b+1),E[2*w+2*b+1]+=_*qr,H(E,2*w+2*b+1),E[2*w+2*b+2]+=C*qr,H(E,2*w+2*b+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function H(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function Y(D,v){this.g=D,this.h=v}function Ce(D,v){if(I(v))throw Error("division by zero");if(I(D))return new Y(p,p);if(A(D))return v=Ce(N(D),v),new Y(N(v.g),N(v.h));if(A(v))return v=Ce(D,N(v)),new Y(N(v.g),v.h);if(30<D.g.length){if(A(D)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,w=v;0>=w.l(D);)E=Je(E),w=Je(w);var b=Me(E,1),C=Me(w,1);for(w=Me(w,2),E=Me(E,2);!I(w);){var _=C.add(w);0>=_.l(D)&&(b=b.add(E),C=_),w=Me(w,1),E=Me(E,1)}return v=k(D,b.j(v)),new Y(b,v)}for(b=p;0<=D.l(v);){for(E=Math.max(1,Math.floor(D.m()/v.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=l(E),_=C.j(v);A(_)||0<_.l(D);)E-=w,C=l(E),_=C.j(v);I(C)&&(C=g),b=b.add(C),D=k(D,_)}return new Y(b,D)}n.A=function(D){return Ce(this,D).h},n.and=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)&D.i(w);return new s(E,this.h&D.h)},n.or=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)|D.i(w);return new s(E,this.h|D.h)},n.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)^D.i(w);return new s(E,this.h^D.h)};function Je(D){for(var v=D.g.length+1,E=[],w=0;w<v;w++)E[w]=D.i(w)<<1|D.i(w-1)>>>31;return new s(E,D.h)}function Me(D,v){var E=v>>5;v%=32;for(var w=D.g.length-E,b=[],C=0;C<w;C++)b[C]=0<v?D.i(C+E)>>>v|D.i(C+E+1)<<32-v:D.i(C+E);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CI=vM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,mi=vM.Integer=s}).apply(typeof yM<"u"?yM:typeof self<"u"?self:typeof window<"u"?window:{});var Ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yi={};var SI,b3,za,AI,pl,wp,RI,NI,MI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ip=="object"&&Ip];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var T=c[m];if(!(T in f))break e;f=f[T]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,T={next:function(){if(!m&&f<c.length){var R=f++;return{value:d(R,c[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function I(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,T,R){for(var O=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)O[Pe-2]=arguments[Pe];return d.prototype[T].apply(m,O)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let T=c.length||0,R=m.length||0;c.length=T+R;for(let O=0;O<R;O++)c[T+O]=m[O]}else c.push(m)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function Y(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ce(c){return Ce[" "](c),c}Ce[" "]=function(){};var Je=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function Me(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(f in m)c[f]=m[f];for(let R=0;R<E.length;R++)f=E[R],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Tm;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class qr{constructor(){this.h=this.g=null}add(d,f){let m=Uc.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Uc=new k(()=>new QO,c=>c.reset());class QO{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Bc,$c=!1,Tm=new qr,iT=()=>{let c=a.Promise.resolve(void 0);Bc=()=>{c.then(YO)}};var YO=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){C(f)}var d=Uc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}$c=!1};function Ci(){this.s=this.s,this.C=this.C}Ci.prototype.s=!1,Ci.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ci.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var ZO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Hc(c,d){if(xt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Je){e:{try{Ce(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:JO[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Hc.aa.h.call(this)}}I(Hc,xt);var JO={2:"touch",3:"pen",4:"mouse"};Hc.prototype.h=function(){Hc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var qc="closure_listenable_"+(1e6*Math.random()|0),XO=0;function e1(c,d,f,m,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=T,this.key=++XO,this.da=this.fa=!1}function fd(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pd(c){this.src=c,this.g={},this.h=0}pd.prototype.add=function(c,d,f,m,T){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var O=Sm(c,d,m,T);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new e1(d,this.src,R,!!m,T),d.fa=f,c.push(d)),d};function Cm(c,d){var f=d.type;if(f in c.g){var m=c.g[f],T=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=T)&&Array.prototype.splice.call(m,T,1),R&&(fd(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Sm(c,d,f,m){for(var T=0;T<c.length;++T){var R=c[T];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==m)return T}return-1}var Am="closure_lm_"+(1e6*Math.random()|0),Rm={};function oT(c,d,f,m,T){if(m&&m.once)return aT(c,d,f,m,T);if(Array.isArray(d)){for(var R=0;R<d.length;R++)oT(c,d[R],f,m,T);return null}return f=xm(f),c&&c[qc]?c.K(d,f,l(m)?!!m.capture:!!m,T):sT(c,d,f,!1,m,T)}function sT(c,d,f,m,T,R){if(!d)throw Error("Invalid event type");var O=l(T)?!!T.capture:!!T,Pe=Mm(c);if(Pe||(c[Am]=Pe=new pd(c)),f=Pe.add(d,f,m,O,R),f.proxy)return f;if(m=t1(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)ZO||(T=O),T===void 0&&(T=!1),c.addEventListener(d.toString(),m,T);else if(c.attachEvent)c.attachEvent(uT(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function t1(){function c(f){return d.call(c.src,c.listener,f)}let d=n1;return c}function aT(c,d,f,m,T){if(Array.isArray(d)){for(var R=0;R<d.length;R++)aT(c,d[R],f,m,T);return null}return f=xm(f),c&&c[qc]?c.L(d,f,l(m)?!!m.capture:!!m,T):sT(c,d,f,!0,m,T)}function cT(c,d,f,m,T){if(Array.isArray(d))for(var R=0;R<d.length;R++)cT(c,d[R],f,m,T);else m=l(m)?!!m.capture:!!m,f=xm(f),c&&c[qc]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],f=Sm(R,f,m,T),-1<f&&(fd(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=Mm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Sm(d,f,m,T)),(f=-1<c?d[c]:null)&&Nm(f))}function Nm(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[qc])Cm(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(uT(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Mm(d))?(Cm(f,c),f.h==0&&(f.src=null,d[Am]=null)):fd(c)}}}function uT(c){return c in Rm?Rm[c]:Rm[c]="on"+c}function n1(c,d){if(c.da)c=!0;else{d=new Hc(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Nm(c),c=f.call(m,d)}return c}function Mm(c){return c=c[Am],c instanceof pd?c:null}var Pm="__closure_events_fn_"+(1e9*Math.random()>>>0);function xm(c){return typeof c=="function"?c:(c[Pm]||(c[Pm]=function(d){return c.handleEvent(d)}),c[Pm])}function kt(){Ci.call(this),this.i=new pd(this),this.M=this,this.F=null}I(kt,Ci),kt.prototype[qc]=!0,kt.prototype.removeEventListener=function(c,d,f,m){cT(this,c,d,f,m)};function Bt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new xt(d,c);else if(d instanceof xt)d.target=d.target||c;else{var T=d;d=new xt(m,c),w(d,T)}if(T=!0,f)for(var R=f.length-1;0<=R;R--){var O=d.g=f[R];T=gd(O,m,!0,d)&&T}if(O=d.g=c,T=gd(O,m,!0,d)&&T,T=gd(O,m,!1,d)&&T,f)for(R=0;R<f.length;R++)O=d.g=f[R],T=gd(O,m,!1,d)&&T}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)fd(f[m]);delete c.g[d],c.h--}}this.F=null},kt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},kt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function gd(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,R=0;R<d.length;++R){var O=d[R];if(O&&!O.da&&O.capture==f){var Pe=O.listener,Rt=O.ha||O.src;O.fa&&Cm(c.i,O),T=Pe.call(Rt,m)!==!1&&T}}return T&&!m.defaultPrevented}function lT(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function dT(c){c.g=lT(()=>{c.g=null,c.i&&(c.i=!1,dT(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class r1 extends Ci{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:dT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zc(c){Ci.call(this),this.h=c,this.g={}}I(zc,Ci);var hT=[];function fT(c){Me(c.g,function(d,f){this.g.hasOwnProperty(f)&&Nm(d)},c),c.g={}}zc.prototype.N=function(){zc.aa.N.call(this),fT(this)},zc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var km=a.JSON.stringify,i1=a.JSON.parse,o1=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Om(){}Om.prototype.h=null;function pT(c){return c.h||(c.h=c.i())}function gT(){}var Gc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fm(){xt.call(this,"d")}I(Fm,xt);function Lm(){xt.call(this,"c")}I(Lm,xt);var Do={},mT=null;function md(){return mT=mT||new kt}Do.La="serverreachability";function yT(c){xt.call(this,Do.La,c)}I(yT,xt);function Wc(c){let d=md();Bt(d,new yT(d))}Do.STAT_EVENT="statevent";function vT(c,d){xt.call(this,Do.STAT_EVENT,c),this.stat=d}I(vT,xt);function $t(c){let d=md();Bt(d,new vT(d,c))}Do.Ma="timingevent";function _T(c,d){xt.call(this,Do.Ma,c),this.size=d}I(_T,xt);function Kc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Qc(){this.g=!0}Qc.prototype.xa=function(){this.g=!1};function s1(c,d,f,m,T,R){c.info(function(){if(c.g)if(R)for(var O="",Pe=R.split("&"),Rt=0;Rt<Pe.length;Rt++){var De=Pe[Rt].split("=");if(1<De.length){var Ot=De[0];De=De[1];var Ft=Ot.split("_");O=2<=Ft.length&&Ft[1]=="type"?O+(Ot+"="+De+"&"):O+(Ot+"=redacted&")}}else O=null;else O=R;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+d+`
`+f+`
`+O})}function a1(c,d,f,m,T,R,O){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+d+`
`+f+`
`+R+" "+O})}function Os(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+u1(c,f)+(m?" "+m:"")})}function c1(c,d){c.info(function(){return"TIMEOUT: "+d})}Qc.prototype.info=function(){};function u1(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var R=T[0];if(R!="noop"&&R!="stop"&&R!="close")for(var O=1;O<T.length;O++)T[O]=""}}}}return km(f)}catch{return d}}var yd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ET={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vm;function vd(){}I(vd,Om),vd.prototype.g=function(){return new XMLHttpRequest},vd.prototype.i=function(){return{}},Vm=new vd;function Si(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new zc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new IT}function IT(){this.i=null,this.g="",this.h=!1}var wT={},jm={};function Um(c,d,f){c.L=1,c.v=wd(zr(d)),c.m=f,c.P=!0,DT(c,null)}function DT(c,d){c.F=Date.now(),_d(c),c.A=zr(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),LT(f.i,"t",m),c.C=0,f=c.j.J,c.h=new IT,c.g=t0(c.j,f?d:null,!c.m),0<c.O&&(c.M=new r1(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(hT[0]=T.toString()),T=hT);for(var R=0;R<T.length;R++){var O=oT(f,T[R],m||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Wc(),s1(c.i,c.u,c.A,c.l,c.R,c.m)}Si.prototype.ca=function(c){c=c.target;let d=this.M;d&&Gr(c)==3?d.j():this.Y(c)},Si.prototype.Y=function(c){try{if(c==this.g)e:{let Ft=Gr(this.g);var d=this.g.Ba();let Vs=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||qT(this.g)))){this.J||Ft!=4||d==7||(d==8||0>=Vs?Wc(3):Wc(2)),Bm(this);var f=this.g.Z();this.X=f;t:if(bT(this)){var m=qT(this.g);c="";var T=m.length,R=Gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bo(this),Yc(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(R&&d==T-1)});m.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,a1(this.i,this.u,this.A,this.l,this.R,Ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,Rt=this.g;if((Pe=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Pe)){var De=Pe;break t}}De=null}if(f=De)Os(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$m(this,f);else{this.o=!1,this.s=3,$t(12),bo(this),Yc(this);break e}}if(this.P){f=!0;let Bn;for(;!this.J&&this.C<O.length;)if(Bn=l1(this,O),Bn==jm){Ft==4&&(this.s=4,$t(14),f=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==wT){this.s=4,$t(15),Os(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Os(this.i,this.l,Bn,null),$m(this,Bn);if(bT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||O.length!=0||this.h.h||(this.s=1,$t(16),f=!1),this.o=this.o&&f,!f)Os(this.i,this.l,O,"[Invalid Chunked Response]"),bo(this),Yc(this);else if(0<O.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Km(Ot),Ot.M=!0,$t(11))}}else Os(this.i,this.l,O,null),$m(this,O);Ft==4&&bo(this),this.o&&!this.J&&(Ft==4?ZT(this.j,this):(this.o=!1,_d(this)))}else S1(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),bo(this),Yc(this)}}}catch{}finally{}};function bT(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function l1(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?jm:(f=Number(d.substring(f,m)),isNaN(f)?wT:(m+=1,m+f>d.length?jm:(d=d.slice(m,m+f),c.C=m+f,d)))}Si.prototype.cancel=function(){this.J=!0,bo(this)};function _d(c){c.S=Date.now()+c.I,TT(c,c.I)}function TT(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Kc(g(c.ba,c),d)}function Bm(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Si.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(c1(this.i,this.A),this.L!=2&&(Wc(),$t(17)),bo(this),this.s=2,Yc(this)):TT(this,this.S-c)};function Yc(c){c.j.G==0||c.J||ZT(c.j,c)}function bo(c){Bm(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,fT(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function $m(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Hm(f.h,c))){if(!c.K&&Hm(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Sd(f),Td(f);else break e;Wm(f),$t(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Kc(g(f.Za,f),6e3));if(1>=AT(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Co(f,11)}else if((c.K||f.g==c)&&Sd(f),!H(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let De=T[d];if(f.T=De[0],De=De[1],f.G==2)if(De[0]=="c"){f.K=De[1],f.ia=De[2];let Ot=De[3];Ot!=null&&(f.la=Ot,f.j.info("VER="+f.la));let Ft=De[4];Ft!=null&&(f.Aa=Ft,f.j.info("SVER="+f.Aa));let Vs=De[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&(m=1.5*Vs,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Bn=c.g;if(Bn){let Rd=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rd){var R=m.h;R.g||Rd.indexOf("spdy")==-1&&Rd.indexOf("quic")==-1&&Rd.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(qm(R,R.h),R.h=null))}if(m.D){let Qm=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qm&&(m.ya=Qm,Fe(m.I,m.D,Qm))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=c;if(m.qa=e0(m,m.J?m.ia:null,m.W),O.K){RT(m.h,O);var Pe=O,Rt=m.L;Rt&&(Pe.I=Rt),Pe.B&&(Bm(Pe),_d(Pe)),m.g=O}else QT(m);0<f.i.length&&Cd(f)}else De[0]!="stop"&&De[0]!="close"||Co(f,7);else f.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Co(f,7):Gm(f):De[0]!="noop"&&f.l&&f.l.ta(De),f.v=0)}}Wc(4)}catch{}}var d1=class{constructor(c,d){this.g=c,this.map=d}};function CT(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ST(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function AT(c){return c.h?1:c.g?c.g.size:0}function Hm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function qm(c,d){c.g?c.g.add(d):c.h=d}function RT(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}CT.prototype.cancel=function(){if(this.i=NT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function NT(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function h1(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function f1(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function MT(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=f1(c),m=h1(c),T=m.length,R=0;R<T;R++)d.call(void 0,m[R],f&&f[R],c)}var PT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function p1(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),T=null;if(0<=m){var R=c[f].substring(0,m);T=c[f].substring(m+1)}else R=c[f];d(R,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function To(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof To){this.h=c.h,Ed(this,c.j),this.o=c.o,this.g=c.g,Id(this,c.s),this.l=c.l;var d=c.i,f=new Xc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),xT(this,f),this.m=c.m}else c&&(d=String(c).match(PT))?(this.h=!1,Ed(this,d[1]||"",!0),this.o=Zc(d[2]||""),this.g=Zc(d[3]||"",!0),Id(this,d[4]),this.l=Zc(d[5]||"",!0),xT(this,d[6]||"",!0),this.m=Zc(d[7]||"")):(this.h=!1,this.i=new Xc(null,this.h))}To.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Jc(d,kT,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Jc(d,kT,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Jc(f,f.charAt(0)=="/"?y1:m1,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Jc(f,_1)),c.join("")};function zr(c){return new To(c)}function Ed(c,d,f){c.j=f?Zc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Id(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function xT(c,d,f){d instanceof Xc?(c.i=d,E1(c.i,c.h)):(f||(d=Jc(d,v1)),c.i=new Xc(d,c.h))}function Fe(c,d,f){c.i.set(d,f)}function wd(c){return Fe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Zc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Jc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,g1),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function g1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var kT=/[#\/\?@]/g,m1=/[#\?:]/g,y1=/[#\?]/g,v1=/[#\?@]/g,_1=/#/g;function Xc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ai(c){c.g||(c.g=new Map,c.h=0,c.i&&p1(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Xc.prototype,n.add=function(c,d){Ai(this),this.i=null,c=Fs(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function OT(c,d){Ai(c),d=Fs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function FT(c,d){return Ai(c),d=Fs(c,d),c.g.has(d)}n.forEach=function(c,d){Ai(this),this.g.forEach(function(f,m){f.forEach(function(T){c.call(d,T,m,this)},this)},this)},n.na=function(){Ai(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let T=c[m];for(let R=0;R<T.length;R++)f.push(d[m])}return f},n.V=function(c){Ai(this);let d=[];if(typeof c=="string")FT(this,c)&&(d=d.concat(this.g.get(Fs(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Ai(this),this.i=null,c=Fs(this,c),FT(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function LT(c,d,f){OT(c,d),0<f.length&&(c.i=null,c.g.set(Fs(c,d),A(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let R=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var T=R;O[m]!==""&&(T+="="+encodeURIComponent(String(O[m]))),c.push(T)}}return this.i=c.join("&")};function Fs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function E1(c,d){d&&!c.j&&(Ai(c),c.i=null,c.g.forEach(function(f,m){var T=m.toLowerCase();m!=T&&(OT(this,m),LT(this,T,f))},c)),c.j=d}function I1(c,d){let f=new Qc;if(a.Image){let m=new Image;m.onload=y(Ri,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Ri,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Ri,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Ri,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function w1(c,d){let f=new Qc,m=new AbortController,T=setTimeout(()=>{m.abort(),Ri(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(R=>{clearTimeout(T),R.ok?Ri(f,"TestPingServer: ok",!0,d):Ri(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Ri(f,"TestPingServer: error",!1,d)})}function Ri(c,d,f,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(f)}catch{}}function D1(){this.g=new o1}function b1(c,d,f){let m=f||"";try{MT(c,function(T,R){let O=T;l(T)&&(O=km(T)),d.push(m+R+"="+encodeURIComponent(O))})}catch(T){throw d.push(m+"type="+encodeURIComponent("_badmap")),T}}function eu(c){this.l=c.Ub||null,this.j=c.eb||!1}I(eu,Om),eu.prototype.g=function(){return new Dd(this.l,this.j)},eu.prototype.i=function(c){return function(){return c}}({});function Dd(c,d){kt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Dd,kt),n=Dd.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,nu(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tu(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,nu(this)),this.g&&(this.readyState=3,nu(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;VT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function VT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?tu(this):nu(this),this.readyState==3&&VT(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,tu(this))},n.Qa=function(c){this.g&&(this.response=c,tu(this))},n.ga=function(){this.g&&tu(this)};function tu(c){c.readyState=4,c.l=null,c.j=null,c.v=null,nu(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function nu(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Dd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function jT(c){let d="";return Me(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function zm(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=jT(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Fe(c,d,f))}function qe(c){kt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(qe,kt);var T1=/^https?$/i,C1=["POST","PUT"];n=qe.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vm.g(),this.v=this.o?pT(this.o):pT(Vm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){UT(this,R);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)f.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(C1,d,void 0))||m||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,O]of f)this.g.setRequestHeader(R,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{HT(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){UT(this,R)}};function UT(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,BT(c),bd(c)}function BT(c){c.A||(c.A=!0,Bt(c,"complete"),Bt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Bt(this,"complete"),Bt(this,"abort"),bd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bd(this,!0)),qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$T(this):this.bb())},n.bb=function(){$T(this)};function $T(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Gr(c)!=4||c.Z()!=2)){if(c.u&&Gr(c)==4)lT(c.Ea,0,c);else if(Bt(c,"readystatechange"),Gr(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=O===0){var T=String(c.D).match(PT)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),m=!T1.test(T?T.toLowerCase():"")}f=m}if(f)Bt(c,"complete"),Bt(c,"success");else{c.m=6;try{var R=2<Gr(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",BT(c)}}finally{bd(c)}}}}function bd(c,d){if(c.g){HT(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Bt(c,"ready");try{f.onreadystatechange=m}catch{}}}function HT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Gr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Gr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),i1(d)}};function qT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function S1(c){let d={};c=(c.g&&2<=Gr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(H(c[m]))continue;var f=b(c[m]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[T]||[];d[T]=R,R.push(f)}D(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ru(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function zT(c){this.Aa=0,this.i=[],this.j=new Qc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ru("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ru("baseRetryDelayMs",5e3,c),this.cb=ru("retryDelaySeedMs",1e4,c),this.Wa=ru("forwardChannelMaxRetries",2,c),this.wa=ru("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new CT(c&&c.concurrentRequestLimit),this.Da=new D1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=zT.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){$t(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=e0(this,null,this.W),Cd(this)};function Gm(c){if(GT(c),c.G==3){var d=c.U++,f=zr(c.I);if(Fe(f,"SID",c.K),Fe(f,"RID",d),Fe(f,"TYPE","terminate"),iu(c,f),d=new Si(c,c.j,d),d.L=2,d.v=wd(zr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=t0(d.j,null),d.g.ea(d.v)),d.F=Date.now(),_d(d)}XT(c)}function Td(c){c.g&&(Km(c),c.g.cancel(),c.g=null)}function GT(c){Td(c),c.u&&(a.clearTimeout(c.u),c.u=null),Sd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Cd(c){if(!ST(c.h)&&!c.s){c.s=!0;var d=c.Ga;Bc||iT(),$c||(Bc(),$c=!0),Tm.add(d,c),c.B=0}}function A1(c,d){return AT(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Kc(g(c.Ga,c,d),JT(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new Si(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),w(R,this.S)):R=this.S),this.m!==null||this.O||(T.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=KT(this,T,d),f=zr(this.I),Fe(f,"RID",c),Fe(f,"CVER",22),this.D&&Fe(f,"X-HTTP-Session-Id",this.D),iu(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(jT(R)))+"&"+d:this.m&&zm(f,this.m,R)),qm(this.h,T),this.Ua&&Fe(f,"TYPE","init"),this.P?(Fe(f,"$req",d),Fe(f,"SID","null"),T.T=!0,Um(T,f,null)):Um(T,f,d),this.G=2}}else this.G==3&&(c?WT(this,c):this.i.length==0||ST(this.h)||WT(this))};function WT(c,d){var f;d?f=d.l:f=c.U++;let m=zr(c.I);Fe(m,"SID",c.K),Fe(m,"RID",f),Fe(m,"AID",c.T),iu(c,m),c.m&&c.o&&zm(m,c.m,c.o),f=new Si(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=KT(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),qm(c.h,f),Um(f,m,d)}function iu(c,d){c.H&&Me(c.H,function(f,m){Fe(d,m,f)}),c.l&&MT({},function(f,m){Fe(d,m,f)})}function KT(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var T=c.i;let R=-1;for(;;){let O=["count="+f];R==-1?0<f?(R=T[0].g,O.push("ofs="+R)):R=0:O.push("ofs="+R);let Pe=!0;for(let Rt=0;Rt<f;Rt++){let De=T[Rt].g,Ot=T[Rt].map;if(De-=R,0>De)R=Math.max(0,T[Rt].g-100),Pe=!1;else try{b1(Ot,O,"req"+De+"_")}catch{m&&m(Ot)}}if(Pe){m=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function QT(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Bc||iT(),$c||(Bc(),$c=!0),Tm.add(d,c),c.v=0}}function Wm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Kc(g(c.Fa,c),JT(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,YT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Kc(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),Td(this),YT(this))};function Km(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function YT(c){c.g=new Si(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=zr(c.qa);Fe(d,"RID","rpc"),Fe(d,"SID",c.K),Fe(d,"AID",c.T),Fe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Fe(d,"TO",c.ja),Fe(d,"TYPE","xmlhttp"),iu(c,d),c.m&&c.o&&zm(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=wd(zr(d)),f.m=null,f.P=!0,DT(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Td(this),Wm(this),$t(19))};function Sd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function ZT(c,d){var f=null;if(c.g==d){Sd(c),Km(c),c.g=null;var m=2}else if(Hm(c.h,d))f=d.D,RT(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;m=md(),Bt(m,new _T(m,f)),Cd(c)}else QT(c);else if(T=d.s,T==3||T==0&&0<d.X||!(m==1&&A1(c,d)||m==2&&Wm(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:Co(c,5);break;case 4:Co(c,10);break;case 3:Co(c,6);break;default:Co(c,2)}}}function JT(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Co(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let T=!m;m=new To(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ed(m,"https"),wd(m),T?I1(m.toString(),f):w1(m.toString(),f)}else $t(2);c.G=0,c.l&&c.l.sa(d),XT(c),GT(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function XT(c){if(c.G=0,c.ka=[],c.l){let d=NT(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function e0(c,d,f){var m=f instanceof To?zr(f):new To(f);if(m.g!="")d&&(m.g=d+"."+m.g),Id(m,m.s);else{var T=a.location;m=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var R=new To(null);m&&Ed(R,m),d&&(R.g=d),T&&Id(R,T),f&&(R.l=f),m=R}return f=c.D,d=c.ya,f&&d&&Fe(m,f,d),Fe(m,"VER",c.la),iu(c,m),m}function t0(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new qe(new eu({eb:f})):new qe(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function n0(){}n=n0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ad(){}Ad.prototype.g=function(c,d){return new mn(c,d)};function mn(c,d){kt.call(this),this.g=new zT(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ls(this)}I(mn,kt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Gm(this.g)},mn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=km(c),c=f);d.i.push(new d1(d.Ya++,c)),d.G==3&&Cd(d)},mn.prototype.N=function(){this.g.l=null,delete this.j,Gm(this.g),delete this.g,mn.aa.N.call(this)};function r0(c){Fm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}I(r0,Fm);function i0(){Lm.call(this),this.status=1}I(i0,Lm);function Ls(c){this.g=c}I(Ls,n0),Ls.prototype.ua=function(){Bt(this.g,"a")},Ls.prototype.ta=function(c){Bt(this.g,new r0(c))},Ls.prototype.sa=function(c){Bt(this.g,new i0)},Ls.prototype.ra=function(){Bt(this.g,"b")},Ad.prototype.createWebChannel=Ad.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,MI=yi.createWebChannelTransport=function(){return new Ad},NI=yi.getStatEventTarget=function(){return md()},RI=yi.Event=Do,wp=yi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yd.NO_ERROR=0,yd.TIMEOUT=8,yd.HTTP_ERROR=6,pl=yi.ErrorCode=yd,ET.COMPLETE="complete",AI=yi.EventType=ET,gT.EventType=Gc,Gc.OPEN="a",Gc.CLOSE="b",Gc.ERROR="c",Gc.MESSAGE="d",kt.prototype.listen=kt.prototype.K,za=yi.WebChannel=gT,b3=yi.FetchXmlHttpFactory=eu,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,SI=yi.XhrIo=qe}).apply(typeof Ip<"u"?Ip:typeof self<"u"?self:typeof window<"u"?window:{});var _M="@firebase/firestore",EM="4.8.0";var bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");var hc="11.10.0";var _s=new Tr("@firebase/firestore");function Ga(){return _s.logLevel}function V(n,...e){if(_s.logLevel<=ve.DEBUG){let t=e.map(ED);_s.debug(`Firestore (${hc}): ${n}`,...t)}}function vi(n,...e){if(_s.logLevel<=ve.ERROR){let t=e.map(ED);_s.error(`Firestore (${hc}): ${n}`,...t)}}function lo(n,...e){if(_s.logLevel<=ve.WARN){let t=e.map(ED);_s.warn(`Firestore (${hc}): ${n}`,...t)}}function ED(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Q(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,hP(n,r,t)}function hP(n,e,t){let r=`FIRESTORE (${hc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw vi(r),new Error(r)}function Ne(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||hP(e,i,r)}function ae(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends tn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Mr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Rp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},FI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bt.UNAUTHENTICATED))}shutdown(){}},LI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},VI=class{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ne(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Mr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Mr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ne(typeof r.accessToken=="string",31837,{l:r}),new Rp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ne(e===null||typeof e=="string",2055,{h:e}),new bt(e)}},jI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},UI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new jI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Np=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},BI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ne(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Np(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ne(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Np(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function T3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function fP(){return new TextEncoder}var El=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=T3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ge(n,e){return n<e?-1:n>e?1:0}function $I(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ge(r,i);{let o=fP(),s=C3(o.encode(IM(n,t)),o.encode(IM(e,t)));return s!==0?s:ge(r,i)}}t+=r>65535?2:1}return ge(n.length,e.length)}function IM(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function C3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ge(n[t],e[t]);return ge(n.length,e.length)}function Xa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var wM="__name__",Mp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Q(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Q(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ge(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):$I(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mi.fromString(e.substring(4,e.length-2))}},$e=class n extends Mp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},S3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tn=class n extends Mp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return S3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wM}static keyField(){return new n([wM])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var G=class n{constructor(e){this.path=e}static fromPath(e){return new n($e.fromString(e))}static fromName(e){return new n($e.fromString(e).popFirst(5))}static empty(){return new n($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new $e(e.slice()))}};function pP(n,e,t){if(!t)throw new L(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function A3(n,e,t,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DM(n){if(!G.isDocumentKey(n))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bM(n){if(G.isDocumentKey(n))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gP(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ug(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q(12329,{type:typeof n})}function Vn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ug(n);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ft(n,e){let t={typeString:n};return e&&(t.value=e),t}function xl(n,e){if(!gP(n))throw new L(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new L(M.INVALID_ARGUMENT,t);return!0}var TM=-62135596800,CM=1e6,Qe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*CM);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<TM)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CM}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(xl(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-TM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:ft("string",Qe._jsonSchemaVersion),seconds:ft("number"),nanoseconds:ft("number")};var de=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Qe(0,0))}static max(){return new n(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Il=-1,HI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};HI.UNKNOWN_ID=-1;function R3(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new Qe(t+1,0):new Qe(t,r));return new Es(i,G.empty(),e)}function N3(n){return new Es(n.readTime,n.key,Il)}var Es=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(de.min(),G.empty(),Il)}static max(){return new n(de.max(),G.empty(),Il)}};function M3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}var P3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function fc(n){if(n.code!==M.FAILED_PRECONDITION||n.message!==P3)throw n;V("LocalStore","Unexpectedly lost primary lease")}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function x3(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function pc(n){return n.name==="IndexedDbTransactionError"}var ID=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),wD=-1;function lg(n){return n==null}function wl(n){return n===0&&1/n==-1/0}function k3(n){return typeof n=="number"&&Number.isInteger(n)&&!wl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var mP="";function O3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=SM(e)),e=F3(n.get(t),e);return SM(e)}function F3(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case mP:t+="";break;default:t+=o}}return t}function SM(n){return n+mP+""}var L3="remoteDocuments",yP="owner";var vP="mutationQueues";var _P="mutations";var EP="documentMutations",V3="remoteDocumentsV14";var IP="remoteDocumentGlobal";var wP="targets";var DP="targetDocuments";var bP="targetGlobal",TP="collectionParents";var CP="clientMetadata";var SP="bundles";var AP="namedQueries";var j3="indexConfiguration";var U3="indexState";var B3="indexEntries";var RP="documentOverlays";var $3="globals";var H3=[vP,_P,EP,L3,wP,yP,bP,DP,CP,IP,TP,SP,AP],Ace=[...H3,RP],q3=[vP,_P,EP,V3,wP,yP,bP,DP,CP,IP,TP,SP,AP,RP],z3=q3,G3=[...z3,j3,U3,B3];var Rce=[...G3,$3];function AM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function go(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ye=class n{constructor(e,t){this.comparator=e,this.root=t||Pr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ya(this.root,e,this.comparator,!0)}},Ya=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}};Pr.EMPTY=null,Pr.RED=!0,Pr.BLACK=!1;Pr.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Pr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Tt=class n{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pp(this.data.getIterator())}getIteratorFrom(e){return new Pp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Pp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ln=class n{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Tt(Tn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var xp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ut=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xp("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ut.EMPTY_BYTE_STRING=new Ut("");var W3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _i(n){if(Ne(!!n,39018),typeof n=="string"){let e=0,t=W3.exec(n);if(Ne(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(n.seconds),nanos:Be(n.nanos)}}function Be(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ei(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}var MP="server_timestamp",PP="__type__",xP="__previous_value__",kP="__local_write_time__";function DD(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[PP])===null||t===void 0?void 0:t.stringValue)===MP}function dg(n){let e=n.mapValue.fields[xP];return DD(e)?dg(e):e}function Dl(n){let e=_i(n.mapValue.fields[kP].timestampValue);return new Qe(e.seconds,e.nanos)}var zI=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},kp="(default)",Op=class n{constructor(e,t){this.projectId=e,this.database=t||kp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===kp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var bD="__type__",OP="__max__",Dp={mapValue:{fields:{__type__:{stringValue:OP}}}},TD="__vector__",ec="value";function ho(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?DD(n)?4:LP(n)?9007199254740991:FP(n)?10:11:Q(28295,{value:n})}function Fr(n,e){if(n===e)return!0;let t=ho(n);if(t!==ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dl(n).isEqual(Dl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=_i(i.timestampValue),a=_i(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ei(i.bytesValue).isEqual(Ei(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Be(i.geoPointValue.latitude)===Be(o.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Be(i.integerValue)===Be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Be(i.doubleValue),a=Be(o.doubleValue);return s===a?wl(s)===wl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Xa(n.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(AM(s)!==AM(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Fr(s[u],a[u])))return!1;return!0}(n,e);default:return Q(52216,{left:n})}}function bl(n,e){return(n.values||[]).find(t=>Fr(t,e))!==void 0}function tc(n,e){if(n===e)return 0;let t=ho(n),r=ho(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Be(o.integerValue||o.doubleValue),u=Be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return RM(n.timestampValue,e.timestampValue);case 4:return RM(Dl(n),Dl(e));case 5:return $I(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Ei(o),u=Ei(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ge(a[l],u[l]);if(h!==0)return h}return ge(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ge(Be(o.latitude),Be(s.latitude));return a!==0?a:ge(Be(o.longitude),Be(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return NM(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[ec])===null||a===void 0?void 0:a.arrayValue,I=(u=g[ec])===null||u===void 0?void 0:u.arrayValue,A=ge(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=I?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:NM(y,I)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Dp.mapValue&&s===Dp.mapValue)return 0;if(o===Dp.mapValue)return 1;if(s===Dp.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=$I(u[p],h[p]);if(g!==0)return g;let y=tc(a[u[p]],l[h[p]]);if(y!==0)return y}return ge(u.length,h.length)}(n.mapValue,e.mapValue);default:throw Q(23264,{le:t})}}function RM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);let t=_i(n),r=_i(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function NM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=tc(t[i],r[i]);if(o)return o}return ge(t.length,r.length)}function nc(n){return GI(n)}function GI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=_i(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ei(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return G.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=GI(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${GI(t.fields[s])}`;return i+"}"}(n.mapValue):Q(61005,{value:n})}function Cp(n){switch(ho(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=dg(n);return e?16+Cp(e):16;case 5:return 2*n.stringValue.length;case 6:return Ei(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Cp(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return go(r.fields,(o,s)=>{i+=o.length+Cp(s)}),i}(n.mapValue);default:throw Q(13486,{value:n})}}function MM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function WI(n){return!!n&&"integerValue"in n}function CD(n){return!!n&&"arrayValue"in n}function PM(n){return!!n&&"nullValue"in n}function xM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sp(n){return!!n&&"mapValue"in n}function FP(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[bD])===null||t===void 0?void 0:t.stringValue)===TD}function ml(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return go(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ml(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ml(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===OP}var Mce={mapValue:{fields:{[bD]:{stringValue:TD},[ec]:{arrayValue:{}}}}};var bn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ml(t)}setAll(e){let t=Tn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=ml(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Sp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){go(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ml(this.value))}};function VP(n){let e=[];return go(n.fields,(t,r)=>{let i=new Tn([t]);if(Sp(r)){let o=VP(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ln(e)}var rr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,de.min(),de.min(),de.min(),bn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,de.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,de.min(),de.min(),bn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,de.min(),de.min(),bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var rc=class{constructor(e,t){this.position=e,this.inclusive=t}};function kM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),t.key):r=tc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function OM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fr(n.position[t],e.position[t]))return!1;return!0}var ic=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function K3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Fp=class{},ht=class n extends Fp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new QI(e,t,r):t==="array-contains"?new JI(e,r):t==="in"?new XI(e,r):t==="not-in"?new ew(e,r):t==="array-contains-any"?new tw(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new YI(e,r):new ZI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(tc(t,this.value)):t!==null&&ho(this.value)===ho(t)&&this.matchesComparison(tc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ir=class n extends Fp{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return jP(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function jP(n){return n.op==="and"}function UP(n){return Q3(n)&&jP(n)}function Q3(n){for(let e of n.filters)if(e instanceof ir)return!1;return!0}function KI(n){if(n instanceof ht)return n.field.canonicalString()+n.op.toString()+nc(n.value);if(UP(n))return n.filters.map(e=>KI(e)).join(",");{let e=n.filters.map(t=>KI(t)).join(",");return`${n.op}(${e})`}}function BP(n,e){return n instanceof ht?function(r,i){return i instanceof ht&&r.op===i.op&&r.field.isEqual(i.field)&&Fr(r.value,i.value)}(n,e):n instanceof ir?function(r,i){return i instanceof ir&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&BP(s,i.filters[a]),!0):!1}(n,e):void Q(19439)}function $P(n){return n instanceof ht?function(t){return`${t.field.canonicalString()} ${t.op} ${nc(t.value)}`}(n):n instanceof ir?function(t){return t.op.toString()+" {"+t.getFilters().map($P).join(" ,")+"}"}(n):"Filter"}var QI=class extends ht{constructor(e,t,r){super(e,t,r),this.key=G.fromName(r.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},YI=class extends ht{constructor(e,t){super(e,"in",t),this.keys=HP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ZI=class extends ht{constructor(e,t){super(e,"not-in",t),this.keys=HP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function HP(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>G.fromName(r.referenceValue))}var JI=class extends ht{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return CD(t)&&bl(t.arrayValue,this.value)}},XI=class extends ht{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&bl(this.value.arrayValue,t)}},ew=class extends ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bl(this.value.arrayValue,t)}},tw=class extends ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!CD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>bl(this.value.arrayValue,r))}};var nw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function FM(n,e=null,t=[],r=[],i=null,o=null,s=null){return new nw(n,e,t,r,i,o,s)}function SD(n){let e=ae(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>KI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),lg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nc(r)).join(",")),e.Pe=t}return e.Pe}function AD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!K3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OM(n.startAt,e.startAt)&&OM(n.endAt,e.endAt)}function rw(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Is=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Y3(n,e,t,r,i,o,s,a){return new Is(n,e,t,r,i,o,s,a)}function RD(n){return new Is(n)}function LM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qP(n){return n.collectionGroup!==null}function yl(n){let e=ae(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Tt(Tn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ic(o,r))}),t.has(Tn.keyField().canonicalString())||e.Te.push(new ic(Tn.keyField(),r))}return e.Te}function xr(n){let e=ae(n);return e.Ie||(e.Ie=Z3(e,yl(n))),e.Ie}function Z3(n,e){if(n.limitType==="F")return FM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ic(i.field,o)});let t=n.endAt?new rc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new rc(n.startAt.position,n.startAt.inclusive):null;return FM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function iw(n,e){let t=n.filters.concat([e]);return new Is(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ow(n,e,t){return new Is(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function hg(n,e){return AD(xr(n),xr(e))&&n.limitType===e.limitType}function zP(n){return`${SD(xr(n))}|lt:${n.limitType}`}function Wa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>$P(i)).join(", ")}]`),lg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>nc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>nc(i)).join(",")),`Target(${r})`}(xr(n))}; limitType=${n.limitType})`}function fg(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of yl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=kM(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,yl(r),i)||r.endAt&&!function(s,a,u){let l=kM(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,yl(r),i))}(n,e)}function J3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GP(n){return(e,t)=>{let r=!1;for(let i of yl(n)){let o=X3(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function X3(n,e,t){let r=n.field.isKeyField()?G.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?tc(u,l):Q(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:n.dir})}}var Ii=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return NP(this.inner)}size(){return this.innerSize}};var e5=new Ye(G.comparator);function wi(){return e5}var WP=new Ye(G.comparator);function gl(...n){let e=WP;for(let t of n)e=e.insert(t.key,t);return e}function KP(n){let e=WP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ps(){return vl()}function QP(){return vl()}function vl(){return new Ii(n=>n.toString(),(n,e)=>n.isEqual(e))}var t5=new Ye(G.comparator),n5=new Tt(G.comparator);function Ee(...n){let e=n5;for(let t of n)e=e.add(t);return e}var r5=new Tt(ge);function i5(){return r5}function ND(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wl(e)?"-0":e}}function YP(n){return{integerValue:""+n}}function o5(n,e){return k3(e)?YP(e):ND(n,e)}var oc=class{constructor(){this._=void 0}};function s5(n,e,t){return n instanceof sc?function(i,o){let s={fields:{[PP]:{stringValue:MP},[kP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&DD(o)&&(o=dg(o)),o&&(s.fields[xP]=o),{mapValue:s}}(t,e):n instanceof ws?JP(n,e):n instanceof Ds?XP(n,e):function(i,o){let s=ZP(i,o),a=VM(s)+VM(i.Ee);return WI(s)&&WI(i.Ee)?YP(a):ND(i.serializer,a)}(n,e)}function a5(n,e,t){return n instanceof ws?JP(n,e):n instanceof Ds?XP(n,e):t}function ZP(n,e){return n instanceof ac?function(r){return WI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var sc=class extends oc{},ws=class extends oc{constructor(e){super(),this.elements=e}};function JP(n,e){let t=ex(e);for(let r of n.elements)t.some(i=>Fr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ds=class extends oc{constructor(e){super(),this.elements=e}};function XP(n,e){let t=ex(e);for(let r of n.elements)t=t.filter(i=>!Fr(i,r));return{arrayValue:{values:t}}}var ac=class extends oc{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function VM(n){return Be(n.integerValue||n.doubleValue)}function ex(n){return CD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function c5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ws&&i instanceof ws||r instanceof Ds&&i instanceof Ds?Xa(r.elements,i.elements,Fr):r instanceof ac&&i instanceof ac?Fr(r.Ee,i.Ee):r instanceof sc&&i instanceof sc}(n.transform,e.transform)}var sw=class{constructor(e,t){this.version=e,this.transformResults=t}},kr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ap(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var cc=class{};function tx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Tl(n.key,kr.none()):new bs(n.key,n.data,kr.none());{let t=n.data,r=bn.empty(),i=new Tt(Tn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Lr(n.key,r,new Ln(i.toArray()),kr.none())}}function u5(n,e,t){n instanceof bs?function(i,o,s){let a=i.value.clone(),u=UM(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Lr?function(i,o,s){if(!Ap(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=UM(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(nx(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function _l(n,e,t,r){return n instanceof bs?function(o,s,a,u){if(!Ap(o.precondition,s))return a;let l=o.value.clone(),h=BM(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Lr?function(o,s,a,u){if(!Ap(o.precondition,s))return a;let l=BM(o.fieldTransforms,u,s),h=s.data;return h.setAll(nx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Ap(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function l5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=ZP(r.transform,i||null);o!=null&&(t===null&&(t=bn.empty()),t.set(r.field,o))}return t||null}function jM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xa(r,i,(o,s)=>c5(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var bs=class extends cc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Lr=class extends cc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function nx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function UM(n,e,t){let r=new Map;Ne(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,a5(s,a,t[i]))}return r}function BM(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,s5(o,s,e))}return r}var Tl=class extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},aw=class extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var cw=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&u5(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=_l(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=_l(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=QP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=tx(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ee())}isEqual(e){return this.batchId===e.batchId&&Xa(this.mutations,e.mutations,(t,r)=>jM(t,r))&&Xa(this.baseMutations,e.baseMutations,(t,r)=>jM(t,r))}},uw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ne(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return t5}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var lw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var dw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var lt,we;function d5(n){switch(n){case M.OK:return Q(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return Q(15467,{code:n})}}function rx(n){if(n===void 0)return vi("GRPC error has no .code"),M.UNKNOWN;switch(n){case lt.OK:return M.OK;case lt.CANCELLED:return M.CANCELLED;case lt.UNKNOWN:return M.UNKNOWN;case lt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case lt.INTERNAL:return M.INTERNAL;case lt.UNAVAILABLE:return M.UNAVAILABLE;case lt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case lt.NOT_FOUND:return M.NOT_FOUND;case lt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case lt.ABORTED:return M.ABORTED;case lt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case lt.DATA_LOSS:return M.DATA_LOSS;default:return Q(39323,{code:n})}}(we=lt||(lt={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var $M=null;var h5=new mi([4294967295,4294967295],0);function HM(n){let e=fP().encode(n),t=new CI;return t.update(e),new Uint8Array(t.digest())}function qM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new mi([t,r],0),new mi([i,o],0)]}var hw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gs(`Invalid padding: ${t}`);if(r<0)throw new gs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gs(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=mi.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(mi.fromNumber(r)));return i.compare(h5)===1&&(i=new mi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=HM(e),[r,i]=qM(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=HM(e),[r,i]=qM(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},gs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Lp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Cl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(de.min(),i,new Ye(ge),wi(),Ee())}},Cl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ee(),Ee(),Ee())}};var Za=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},Vp=class{constructor(e,t){this.targetId=e,this.De=t}},jp=class{constructor(e,t,r=Ut.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Up=class{constructor(){this.ve=0,this.Ce=zM(),this.Fe=Ut.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ee(),t=Ee(),r=Ee();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:o})}}),new Cl(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=zM()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ne(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},fw=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=wi(),this.je=bp(),this.Je=bp(),this.He=new Ye(ge)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(rw(o))if(r===0){let s=new G(o.path);this.Xe(t,s,rr.newNoDocument(s,de.min()))}else Ne(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}$M?.ct(function(h,p,g,y,I){var A,N,k,H,Y,Ce;let Je={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Me=p.unchangedNames;return Me&&(Je.bloomFilter={applied:I===0,hashCount:(A=Me?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(H=(k=(N=Me?.bits)===null||N===void 0?void 0:N.bitmap)===null||k===void 0?void 0:k.length)!==null&&H!==void 0?H:0,padding:(Ce=(Y=Me?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&Ce!==void 0?Ce:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),Je}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Ei(r).toUint8Array()}catch(u){if(u instanceof xp)return lo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new hw(s,i,o)}catch(u){return lo(u instanceof gs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&rw(a.target)){let u=new G(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,rr.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=Ee();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Lp(e,t,this.He,this.ze,r);return this.ze=wi(),this.je=bp(),this.Je=bp(),this.He=new Ye(ge),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Up,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Tt(ge),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Tt(ge),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Up),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function bp(){return new Ye(G.comparator)}function zM(){return new Ye(G.comparator)}var f5={asc:"ASCENDING",desc:"DESCENDING"},p5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g5={and:"AND",or:"OR"},pw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function gw(n,e){return n.useProto3Json||lg(e)?e:{value:e}}function Bp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ix(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function m5(n,e){return Bp(n,e.toTimestamp())}function Or(n){return Ne(!!n,49232),de.fromTimestamp(function(t){let r=_i(t);return new Qe(r.seconds,r.nanos)}(n))}function MD(n,e){return mw(n,e).canonicalString()}function mw(n,e){let t=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ox(n){let e=$e.fromString(n);return Ne(lx(e),10190,{key:e.toString()}),e}function yw(n,e){return MD(n.databaseId,e.path)}function PI(n,e){let t=ox(e);if(t.get(1)!==n.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G(ax(t))}function sx(n,e){return MD(n.databaseId,e)}function y5(n){let e=ox(n);return e.length===4?$e.emptyPath():ax(e)}function vw(n){return new $e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ax(n){return Ne(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function GM(n,e,t){return{name:yw(n,e),fields:t.value.mapValue.fields}}function v5(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Ne(h===void 0||typeof h=="string",58123),Ut.fromBase64String(h||"")):(Ne(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ut.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:rx(l.code);return new L(h,l.message||"")}(s);t=new jp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=PI(n,r.document.name),o=Or(r.document.updateTime),s=r.document.createTime?Or(r.document.createTime):de.min(),a=new bn({mapValue:{fields:r.document.fields}}),u=rr.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Za(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=PI(n,r.document),o=r.readTime?Or(r.readTime):de.min(),s=rr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Za([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=PI(n,r.document),o=r.removedTargetIds||[];t=new Za([],o,i,null)}else{if(!("filter"in e))return Q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new dw(i,o),a=r.targetId;t=new Vp(a,s)}}return t}function _5(n,e){let t;if(e instanceof bs)t={update:GM(n,e.key,e.value)};else if(e instanceof Tl)t={delete:yw(n,e.key)};else if(e instanceof Lr)t={update:GM(n,e.key,e.data),updateMask:A5(e.fieldMask)};else{if(!(e instanceof aw))return Q(16599,{Rt:e.type});t={verify:yw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof sc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ws)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ds)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ac)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Q(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:m5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Q(27497)}(n,e.precondition)),t}function E5(n,e){return n&&n.length>0?(Ne(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Or(i.updateTime):Or(o);return s.isEqual(de.min())&&(s=Or(o)),new sw(s,i.transformResults||[])}(t,e))):[]}function I5(n,e){return{documents:[sx(n,e.path)]}}function w5(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sx(n,i);let o=function(l){if(l.length!==0)return ux(ir.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Ka(g.field),direction:T5(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=gw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:t,parent:i}}function D5(n){let e=y5(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ne(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let g=cx(p);return g instanceof ir&&UP(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(I){return new ic(Qa(I.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,lg(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new rc(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new rc(y,g)}(t.endAt)),Y3(e,i,s,o,a,"F",u,l)}function b5(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Qa(t.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Qa(t.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Qa(t.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Qa(t.unaryFilter.field);return ht.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(n):n.fieldFilter!==void 0?function(t){return ht.create(Qa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ir.create(t.compositeFilter.filters.map(r=>cx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(t.compositeFilter.op))}(n):Q(30097,{filter:n})}function T5(n){return f5[n]}function C5(n){return p5[n]}function S5(n){return g5[n]}function Ka(n){return{fieldPath:n.canonicalString()}}function Qa(n){return Tn.fromServerFormat(n.fieldPath)}function ux(n){return n instanceof ht?function(t){if(t.op==="=="){if(xM(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NAN"}};if(PM(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xM(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NAN"}};if(PM(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(t.field),op:C5(t.op),value:t.value}}}(n):n instanceof ir?function(t){let r=t.getFilters().map(i=>ux(i));return r.length===1?r[0]:{compositeFilter:{op:S5(t.op),filters:r}}}(n):Q(54877,{filter:n})}function A5(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Sl=class n{constructor(e,t,r,i,o=de.min(),s=de.min(),a=Ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var _w=class{constructor(e){this.gt=e}};function R5(n){let e=D5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ow(e,e.limit,"L"):e}var $p=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Be(e.integerValue));else if("doubleValue"in e){let r=Be(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),wl(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=_i(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Ei(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?LP(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):FP(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Q(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=ec,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Be(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),G.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};$p.Ut=new $p;var Ew=class{constructor(){this.Dn=new Iw}addToCollectionParentIndex(e,t){return this.Dn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Es.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},Iw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tt($e.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt($e.comparator)).toArray()}};var Pce=new Uint8Array(0);var WM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dx=41943040,Fn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Fn.DEFAULT_COLLECTION_PERCENTILE=10,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fn.DEFAULT=new Fn(dx,Fn.DEFAULT_COLLECTION_PERCENTILE,Fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fn.DISABLED=new Fn(-1,0,0);var Al=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var KM="LruGarbageCollector",N5=1048576;function QM([n,e],[t,r]){let i=ge(n,t);return i===0?ge(e,r):i}var ww=class{constructor(e){this.Tr=e,this.buffer=new Tt(QM),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();QM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Dw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(KM,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){pc(t)?V(KM,"Ignoring IndexedDB error during garbage collection: ",t):await fc(t)}await this.Rr(3e5)})}},bw=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(ID.ue);let r=new ww(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(WM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WM):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ga()<=ve.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function M5(n,e){return new bw(n,e)}var Tw=class{constructor(){this.changes=new Ii(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Cw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Sw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&_l(r.mutation,i,Ln.empty(),Qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ee()){let i=ps();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=gl();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ps();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ee()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=wi(),s=vl(),a=function(){return vl()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Lr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),_l(h.mutation,l,h.mutation.getFieldMask(),Qe.now())):s.set(l.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Cw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=vl(),i=new Ye((s,a)=>s-a),o=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Ln.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||Ee()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=QP();h.forEach(g=>{if(!o.has(g)){let y=tx(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(ps()),a=Il,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Ee())).next(h=>({batchId:a,changes:KP(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(r=>{let i=gl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=gl();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=function(p,g){return new Is(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,rr.newInvalidDocument(h)))});let a=gl();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&_l(h.mutation,l,Ln.empty(),Qe.now()),fg(t,l)&&(a=a.insert(u,l))}),a})}};var Aw=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return x.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Or(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:R5(i.bundledQuery),readTime:Or(i.readTime)}}(t)),x.resolve()}};var Rw=class{constructor(){this.overlays=new Ye(G.comparator),this.kr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ps();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=ps(),o=t.length+1,s=new G(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ye((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ps(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ps(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new lw(t,r));let o=this.kr.get(t);o===void 0&&(o=Ee(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var Nw=class{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var Rl=class{constructor(){this.qr=new Tt(dt.Qr),this.$r=new Tt(dt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new dt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new dt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new G(new $e([])),r=new dt(t,e),i=new dt(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new G(new $e([])),r=new dt(t,e),i=new dt(t,e+1),o=Ee();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new dt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},dt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return G.comparator(e.key,t.key)||ge(e.Hr,t.Hr)}static Ur(e,t){return ge(e.Hr,t.Hr)||G.comparator(e.key,t.key)}};var Mw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Tt(dt.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new cw(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new dt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?wD:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new dt(t,0),i=new dt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tt(ge);return t.forEach(i=>{let o=new dt(i,0),s=new dt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new dt(new G(o),0),a=new Tt(ge);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ne(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(t.mutations,i=>{let o=new dt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new dt(t,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Pw=class{constructor(e){this.ni=e,this.docs=function(){return new Ye(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():rr.newInvalidDocument(t))}getEntries(e,t){let r=wi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():rr.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=wi(),s=t.path,a=new G(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||M3(N3(h),r)<=0||(i.has(h.key)||fg(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Q(9500)}ri(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xw(this)}getSize(e){return x.resolve(this.size)}},xw=class extends Tw{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var kw=class{constructor(e){this.persistence=e,this.ii=new Ii(t=>SD(t),AD),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.si=0,this.oi=new Rl,this.targetCount=0,this._i=Al.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),x.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Al(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.hr(t),x.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.oi.containsKey(t))}};var Hp=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new ID(0),this.ci=!1,this.ci=!0,this.li=new Nw,this.referenceDelegate=e(this),this.hi=new kw(this),this.indexManager=new Ew,this.remoteDocumentCache=function(i){return new Pw(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new _w(t),this.Ti=new Aw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Rw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Mw(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new Ow(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},Ow=class extends qI{constructor(e){super(),this.currentSequenceNumber=e}},Fw=class n{constructor(e){this.persistence=e,this.Ai=new Rl,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw Q(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=G.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,de.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return x.or([()=>x.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},qp=class n{constructor(e,t){this.persistence=e,this.gi=new Ii(r=>O3(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=M5(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,de.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cp(e.data.value)),t}Sr(e,t,r){return x.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Lw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=Ee(),i=Ee();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Vw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var jw=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return UR()?8:x3(Dt())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Vw;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ga()<=ve.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Wa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(Ga()<=ve.DEBUG&&V("QueryEngine","Query:",Wa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ga()<=ve.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Wa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(t))):x.resolve())}ps(e,t){if(LM(t))return x.resolve(null);let r=xr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ow(t,null,"F"),r=xr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ee(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,ow(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return LM(t)||i.isEqual(de.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?x.resolve(null):(Ga()<=ve.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wa(t)),this.vs(e,s,t,R3(i,Il)).next(a=>a))})}bs(e,t){let r=new Tt(GP(e));return t.forEach((i,o)=>{fg(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Ga()<=ve.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Wa(t)),this.gs.getDocumentsMatchingQuery(e,t,Es.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var PD="LocalStore",P5=3e8,Uw=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ye(ge),this.Ms=new Ii(o=>SD(o),AD),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function x5(n,e,t,r){return new Uw(n,e,t,r)}async function hx(n,e){let t=ae(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=Ee();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function k5(n,e){let t=ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),y=x.resolve();return g.forEach(I=>{y=y.next(()=>h.getEntry(u,I)).next(A=>{let N=l.docVersions.get(I);Ne(N!==null,48541),A.version.compareTo(N)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ee();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function fx(n){let e=ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function O5(n,e){let t=ae(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ut.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,N,k){return A.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=P5?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=wi(),l=Ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(F5(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(de.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function F5(n,e,t){let r=Ee(),i=Ee();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=wi();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(de.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(PD,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function L5(n,e){let t=ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function V5(n,e){let t=ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new Sl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Bw(n,e,t){let r=ae(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!pc(s))throw s;V(PD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function YM(n,e,t){let r=ae(n),i=de.min(),o=Ee();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=ae(u),g=p.Ms.get(h);return g!==void 0?x.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)}(r,s,xr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:de.min(),t?o:Ee())).next(a=>(j5(r,J3(e),a),{documents:a,qs:o})))}function j5(n,e,t){let r=n.xs.get(e)||de.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var zp=class{constructor(){this.activeTargetIds=i5()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var $w=class{constructor(){this.Fo=new zp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new zp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Hw=class{xo(e){}shutdown(){}};var ZM="ConnectivityMonitor",Gp=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(ZM,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(ZM,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Tp=null;function qw(){return Tp===null?Tp=function(){return 268435456+Math.round(2147483648*Math.random())}():Tp++,"0x"+Tp.toString(16)}var xI="RestConnection",U5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},zw=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===kp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=qw(),a=this.Go(e,t.toUriEncodedString());V(xI,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Dr(l);return this.jo(e,a,u,r,h).then(p=>(V(xI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw lo(xI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=U5[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var Gw=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var jt="WebChannelConnection",Ww=class extends zw{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=qw();return new Promise((a,u)=>{let l=new SI;l.setWithCredentials(!0),l.listenOnce(AI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case pl.NO_ERROR:let p=l.getResponseJson();V(jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case pl.TIMEOUT:V(jt,`RPC '${e}' ${s} timed out`),u(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case pl.HTTP_ERROR:let g=l.getStatus();if(V(jt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let I=y?.error;if(I&&I.status&&I.message){let A=function(k){let H=k.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(H)>=0?H:M.UNKNOWN}(I.status);u(new L(A,I.message))}else u(new L(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(M.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(jt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(jt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=qw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=MI(),a=NI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(jt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,I=new Gw({Ho:N=>{y?V(jt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(V(jt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),V(jt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Yo:()=>p.close()}),A=(N,k,H)=>{N.listen(k,Y=>{try{H(Y)}catch(Ce){setTimeout(()=>{throw Ce},0)}})};return A(p,za.EventType.OPEN,()=>{y||(V(jt,`RPC '${e}' stream ${i} transport opened.`),I.s_())}),A(p,za.EventType.CLOSE,()=>{y||(y=!0,V(jt,`RPC '${e}' stream ${i} transport closed`),I.__(),this.I_(p))}),A(p,za.EventType.ERROR,N=>{y||(y=!0,lo(jt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),I.__(new L(M.UNAVAILABLE,"The operation could not be completed")))}),A(p,za.EventType.MESSAGE,N=>{var k;if(!y){let H=N.data[0];Ne(!!H,16349);let Y=H,Ce=Y?.error||((k=Y[0])===null||k===void 0?void 0:k.error);if(Ce){V(jt,`RPC '${e}' stream ${i} received error:`,Ce);let Je=Ce.status,Me=function(E){let w=lt[E];if(w!==void 0)return rx(w)}(Je),D=Ce.message;Me===void 0&&(Me=M.INTERNAL,D="Unknown error status: "+Je+" with message "+Ce.message),y=!0,I.__(new L(Me,D)),p.close()}else V(jt,`RPC '${e}' stream ${i} received:`,H),I.a_(H)}}),A(a,RI.STAT_EVENT,N=>{N.stat===wp.PROXY?V(jt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===wp.NOPROXY&&V(jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function kI(){return typeof document<"u"?document:null}function pg(n){return new pw(n,!0)}var Wp=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var JM="PersistentStream",Kp=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Wp(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(vi(t.toString()),vi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return V(JM,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(V(JM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Kw=class extends Kp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=v5(this.serializer,e),r=function(o){if(!("targetChange"in o))return de.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?de.min():s.readTime?Or(s.readTime):de.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=vw(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=rw(u)?{documents:I5(o,u)}:{query:w5(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=ix(o,s.resumeToken);let l=gw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(de.min())>0){a.readTime=Bp(o,s.snapshotVersion.toTimestamp());let l=gw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=b5(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=vw(this.serializer),t.removeTarget=e,this.k_(t)}},Qw=class extends Kp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=E5(e.writeResults,e.commitTime),r=Or(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=vw(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>_5(this.serializer,r))};this.k_(t)}};var Yw=class{},Zw=class extends Yw{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,mw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,mw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},Jw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(vi(t),this._a=!1):V("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ts="RemoteStore",Xw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Ss(this)&&(V(Ts,"Restarting streams for network reachability change."),await async function(u){let l=ae(u);l.Ia.add(4),await kl(l),l.Aa.set("Unknown"),l.Ia.delete(4),await gg(l)}(this))})}),this.Aa=new Jw(r,i)}};async function gg(n){if(Ss(n))for(let e of n.da)await e(!0)}async function kl(n){for(let e of n.da)await e(!1)}function px(n,e){let t=ae(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),FD(t)?OD(t):gc(t).x_()&&kD(t,e))}function xD(n,e){let t=ae(n),r=gc(t);t.Ta.delete(e),r.x_()&&gx(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ss(t)&&t.Aa.set("Unknown"))}function kD(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gc(n).H_(e)}function gx(n,e){n.Ra.$e(e),gc(n).Y_(e)}function OD(n){n.Ra=new fw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),gc(n).start(),n.Aa.aa()}function FD(n){return Ss(n)&&!gc(n).M_()&&n.Ta.size>0}function Ss(n){return ae(n).Ia.size===0}function mx(n){n.Ra=void 0}async function B5(n){n.Aa.set("Online")}async function $5(n){n.Ta.forEach((e,t)=>{kD(n,e)})}async function H5(n,e){mx(n),FD(n)?(n.Aa.la(e),OD(n)):n.Aa.set("Unknown")}async function q5(n,e,t){if(n.Aa.set("Online"),e instanceof jp&&e.state===2&&e.cause)try{await async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))}(n,e)}catch(r){V(Ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qp(n,r)}else if(e instanceof Za?n.Ra.Ye(e):e instanceof Vp?n.Ra.it(e):n.Ra.et(e),!t.isEqual(de.min()))try{let r=await fx(n.localStore);t.compareTo(r)>=0&&await function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Ut.EMPTY_BYTE_STRING,h.snapshotVersion)),gx(o,u);let p=new Sl(h.target,u,l,h.sequenceNumber);kD(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){V(Ts,"Failed to raise snapshot:",r),await Qp(n,r)}}async function Qp(n,e,t){if(!pc(e))throw e;n.Ia.add(1),await kl(n),n.Aa.set("Offline"),t||(t=()=>fx(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{V(Ts,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await gg(n)})}function yx(n,e){return e().catch(t=>Qp(n,t,e))}async function mg(n){let e=ae(n),t=fo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:wD;for(;z5(e);)try{let i=await L5(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,G5(e,i)}catch(i){await Qp(e,i)}vx(e)&&_x(e)}function z5(n){return Ss(n)&&n.Pa.length<10}function G5(n,e){n.Pa.push(e);let t=fo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function vx(n){return Ss(n)&&!fo(n).M_()&&n.Pa.length>0}function _x(n){fo(n).start()}async function W5(n){fo(n).na()}async function K5(n){let e=fo(n);for(let t of n.Pa)e.X_(t.mutations)}async function Q5(n,e,t){let r=n.Pa.shift(),i=uw.from(r,e,t);await yx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await mg(n)}async function Y5(n,e){e&&fo(n).Z_&&await async function(r,i){if(function(s){return d5(s)&&s!==M.ABORTED}(i.code)){let o=r.Pa.shift();fo(r).N_(),await yx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await mg(r)}}(n,e),vx(n)&&_x(n)}async function XM(n,e){let t=ae(n);t.asyncQueue.verifyOperationInProgress(),V(Ts,"RemoteStore received new credentials");let r=Ss(t);t.Ia.add(3),await kl(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await gg(t)}async function Z5(n,e){let t=ae(n);e?(t.Ia.delete(2),await gg(t)):e||(t.Ia.add(2),await kl(t),t.Aa.set("Unknown"))}function gc(n){return n.Va||(n.Va=function(t,r,i){let o=ae(t);return o.ia(),new Kw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:B5.bind(null,n),e_:$5.bind(null,n),n_:H5.bind(null,n),J_:q5.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),FD(n)?OD(n):n.Aa.set("Unknown")):(await n.Va.stop(),mx(n))})),n.Va}function fo(n){return n.ma||(n.ma=function(t,r,i){let o=ae(t);return o.ia(),new Qw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:W5.bind(null,n),n_:Y5.bind(null,n),ea:K5.bind(null,n),ta:Q5.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await mg(n)):(await n.ma.stop(),n.Pa.length>0&&(V(Ts,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var eD=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function LD(n,e){if(vi("AsyncQueue",`${e}: ${n}`),pc(n))return new L(M.UNAVAILABLE,`${e}: ${n}`);throw n}var Yp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||G.comparator(t.key,r.key):(t,r)=>G.comparator(t.key,r.key),this.keyedMap=gl(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Zp=class{constructor(){this.fa=new Ye(G.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Q(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},uc=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Yp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var tD=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},nD=class{constructor(){this.queries=eP(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ae(t),o=i.queries;i.queries=eP(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function eP(){return new Ii(n=>zP(n),hg)}async function Ex(n,e){let t=ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new tD,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(i,!0);break;case 1:o.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=LD(s,`Initialization of query '${Wa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&VD(t)}async function Ix(n,e){let t=ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function J5(n,e){let t=ae(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&VD(t)}function X5(n,e,t){let r=ae(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function VD(n){n.Da.forEach(e=>{e.next()})}var rD,tP;(tP=rD||(rD={})).Fa="default",tP.Cache="cache";var Jp=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new uc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==rD.Cache}};var Xp=class{constructor(e){this.key=e}},eg=class{constructor(e){this.key=e}},iD=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ee(),this.mutatedKeys=Ee(),this.Xa=GP(e),this.eu=new Yp(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Zp,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=fg(this.query,p)?p:null,I=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;g&&y?g.data.isEqual(y.data)?I!==A&&(r.track({type:3,doc:y}),N=!0):this.iu(g,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),N=!0):g&&!y&&(r.track({type:1,doc:g}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,I){let A=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{At:N})}};return A(y)-A(I)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new uc(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Zp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=Ee(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new eg(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Xp(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ee();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return uc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},jD="SyncEngine",oD=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},sD=class{constructor(e){this.key=e,this.lu=!1}},aD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ii(a=>zP(a),hg),this.Tu=new Map,this.Iu=new Set,this.du=new Ye(G.comparator),this.Eu=new Map,this.Au=new Rl,this.Ru={},this.Vu=new Map,this.mu=Al.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function eq(n,e,t=!0){let r=Sx(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await wx(r,e,t,!0),i}async function tq(n,e){let t=Sx(n);await wx(t,e,!0,!1)}async function wx(n,e,t,r){let i=await V5(n.localStore,xr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await nq(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&px(n.remoteStore,i),a}async function nq(n,e,t,r,i){n.gu=(p,g,y)=>async function(A,N,k,H){let Y=N.view.nu(k);Y.Ds&&(Y=await YM(A.localStore,N.query,!1).then(({documents:D})=>N.view.nu(D,Y)));let Ce=H&&H.targetChanges.get(N.targetId),Je=H&&H.targetMismatches.get(N.targetId)!=null,Me=N.view.applyChanges(Y,A.isPrimaryClient,Ce,Je);return rP(A,N.targetId,Me._u),Me.snapshot}(n,p,g,y);let o=await YM(n.localStore,e,!0),s=new iD(e,o.qs),a=s.nu(o.documents),u=Cl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);rP(n,t,l._u);let h=new oD(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function rq(n,e,t){let r=ae(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!hg(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Bw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&xD(r.remoteStore,i.targetId),cD(r,i.targetId)}).catch(fc)):(cD(r,i.targetId),await Bw(r.localStore,i.targetId,!0))}async function iq(n,e){let t=ae(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xD(t.remoteStore,r.targetId))}async function oq(n,e,t){let r=hq(n);try{let i=await function(s,a){let u=ae(s),l=Qe.now(),h=a.reduce((y,I)=>y.add(I.key),Ee()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=wi(),A=Ee();return u.Os.getEntries(y,h).next(N=>{I=N,I.forEach((k,H)=>{H.isValidDocument()||(A=A.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,I)).next(N=>{p=N;let k=[];for(let H of a){let Y=l5(H,p.get(H.key).overlayedDocument);Y!=null&&k.push(new Lr(H.key,Y,VP(Y.value.mapValue),kr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,a)}).next(N=>{g=N;let k=N.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,N.batchId,k)})}).then(()=>({batchId:g.batchId,changes:KP(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Ye(ge)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,t),await Ol(r,i.changes),await mg(r.remoteStore)}catch(i){let o=LD(i,"Failed to persist write");t.reject(o)}}async function Dx(n,e){let t=ae(n);try{let r=await O5(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Ne(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ne(s.lu,14607):i.removedDocuments.size>0&&(Ne(s.lu,42227),s.lu=!1))}),await Ol(t,r,e)}catch(r){await fc(r)}}function nP(n,e,t){let r=ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=ae(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&VD(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sq(n,e,t){let r=ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Ye(G.comparator);s=s.insert(o,rr.newNoDocument(o,de.min()));let a=Ee().add(o),u=new Lp(de.min(),new Map,new Ye(ge),s,a);await Dx(r,u),r.du=r.du.remove(o),r.Eu.delete(e),UD(r)}else await Bw(r.localStore,e,!1).then(()=>cD(r,e,t)).catch(fc)}async function aq(n,e){let t=ae(n),r=e.batch.batchId;try{let i=await k5(t.localStore,e);Tx(t,r,null),bx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ol(t,i)}catch(i){await fc(i)}}async function cq(n,e,t){let r=ae(n);try{let i=await function(s,a){let u=ae(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ne(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);Tx(r,e,t),bx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ol(r,i)}catch(i){await fc(i)}}function bx(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function Tx(n,e,t){let r=ae(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function cD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||Cx(n,r)})}function Cx(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(xD(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),UD(n))}function rP(n,e,t){for(let r of t)r instanceof Xp?(n.Au.addReference(r.key,e),uq(n,r)):r instanceof eg?(V(jD,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||Cx(n,r.key)):Q(19791,{yu:r})}function uq(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(V(jD,"New document in limbo: "+t),n.Iu.add(r),UD(n))}function UD(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new G($e.fromString(e)),r=n.mu.next();n.Eu.set(r,new sD(t)),n.du=n.du.insert(t,r),px(n.remoteStore,new Sl(xr(RD(t.path)),r,"TargetPurposeLimboResolution",ID.ue))}}async function Ol(n,e,t){let r=ae(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Lw.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await async function(u,l){let h=ae(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,g=>x.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>x.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!pc(p))throw p;V(PD,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),I=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(I);h.Fs=h.Fs.insert(g,A)}}}(r.localStore,o))}async function lq(n,e){let t=ae(n);if(!t.currentUser.isEqual(e)){V(jD,"User change. New user:",e.toKey());let r=await hx(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ol(t,r.Bs)}}function dq(n,e){let t=ae(n),r=t.Eu.get(e);if(r&&r.lu)return Ee().add(r.key);{let i=Ee(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function Sx(n){let e=ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sq.bind(null,e),e.hu.J_=J5.bind(null,e.eventManager),e.hu.pu=X5.bind(null,e.eventManager),e}function hq(n){let e=ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cq.bind(null,e),e}var Ax=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=pg(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return x5(this.persistence,new jw,t.initialUser,this.serializer)}Du(t){return new Hp(Fw.Vi,this.serializer)}bu(t){return new $w}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),uD=class extends Ax{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ne(this.persistence.referenceDelegate instanceof qp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Dw(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Fn.withCacheSize(this.cacheSizeBytes):Fn.DEFAULT;return new Hp(r=>qp.Vi(r,t),this.serializer)}};var fq=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=lq.bind(null,this.syncEngine),await Z5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new nD}()}createDatastore(t){let r=pg(t.databaseInfo.databaseId),i=function(s){return new Ww(s)}(t.databaseInfo);return function(s,a,u,l){return new Zw(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Xw(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>nP(this.syncEngine,r,0),function(){return Gp.C()?new Gp:new Hw}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let g=new aD(o,s,a,u,l,h);return p&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(o){let s=ae(o);V(Ts,"RemoteStore shutting down."),s.Ia.add(5),await kl(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var tg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):vi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var po="FirestoreClient",lD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bt.UNAUTHENTICATED,this.clientId=El.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{V(po,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(V(po,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=LD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function OI(n,e){n.asyncQueue.verifyOperationInProgress(),V(po,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await hx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{lo("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{lo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function iP(n,e){n.asyncQueue.verifyOperationInProgress();let t=await pq(n);V(po,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>XM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>XM(e.remoteStore,i)),n._onlineComponents=e}async function pq(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V(po,"Using user provided OfflineComponentProvider");try{await OI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;lo("Error using user provided cache. Falling back to memory cache: "+t),await OI(n,new Ax)}}else V(po,"Using default OfflineComponentProvider"),await OI(n,new uD(void 0));return n._offlineComponents}async function Rx(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(V(po,"Using user provided OnlineComponentProvider"),await iP(n,n._uninitializedComponentsProvider._online)):(V(po,"Using default OnlineComponentProvider"),await iP(n,new fq))),n._onlineComponents}function gq(n){return Rx(n).then(e=>e.syncEngine)}async function dD(n){let e=await Rx(n),t=e.eventManager;return t.onListen=eq.bind(null,e.syncEngine),t.onUnlisten=rq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iq.bind(null,e.syncEngine),t}function mq(n,e,t={}){let r=new Mr;return n.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){let h=new tg({next:g=>{h.Ou(),s.enqueueAndForget(()=>Ix(o,p)),g.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Jp(a,h,{includeMetadataChanges:!0,ka:!0});return Ex(o,p)}(await dD(n),n.asyncQueue,e,t,r)),r.promise}function Nx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var oP=new Map;var Mx="firestore.googleapis.com",sP=!0,ng=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Mx,this.ssl=sP}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:sP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<N5)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},lc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ng({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ng(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new FI;switch(r.type){case"firstParty":return new UI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=oP.get(t);r&&(V("ComponentProvider","Removing Datastore"),oP.delete(t),r.terminate())}(this),Promise.resolve()}};function Px(n,e,t,r={}){var i;n=Vn(n,lc);let o=Dr(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(La(`https://${u}`),Va("Firestore",!0)),s.host!==Mx&&s.host!==u&&lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!br(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=bt.MOCK_USER;else{h=kR(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new bt(g)}n._authCredentials=new LI(new Rp(h,p))}}var Cs=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ct=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new so(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(xl(t,n._jsonSchema))return new n(e,r||null,new G($e.fromString(t.referencePath)))}};Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:ft("string",Ct._jsonSchemaVersion),referencePath:ft("string")};var so=class n extends Cs{constructor(e,t,r){super(e,t,RD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new G(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function xx(n,e,...t){if(n=Ue(n),pP("collection","path",e),n instanceof lc){let r=$e.fromString(e,...t);return bM(r),new so(n,null,r)}{if(!(n instanceof Ct||n instanceof so))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child($e.fromString(e,...t));return bM(r),new so(n.firestore,null,r)}}function BD(n,e,...t){if(n=Ue(n),arguments.length===1&&(e=El.newId()),pP("doc","path",e),n instanceof lc){let r=$e.fromString(e,...t);return DM(r),new Ct(n,null,new G(r))}{if(!(n instanceof Ct||n instanceof so))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child($e.fromString(e,...t));return DM(r),new Ct(n.firestore,n instanceof so?n.converter:null,new G(r))}}var aP="AsyncQueue",rg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Wp(this,"async_queue_retry"),this.oc=()=>{let r=kI();r&&V(aP,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=kI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=kI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Mr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!pc(e))throw e;V(aP,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,vi("INTERNAL UNHANDLED ERROR: ",cP(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=eD.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Q(47125,{hc:cP(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function cP(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function uP(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Vr=class extends lc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new rg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new rg(e),this._firestoreClient=void 0,await e}}};function kx(n,e){let t=typeof n=="object"?n:li(),r=typeof n=="string"?n:e||kp,i=Ji(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Wf("firestore");o&&Px(i,...o)}return i}function $D(n){if(n._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yq(n),n._firestoreClient}function yq(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new zI(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Nx(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new lD(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var ao=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ut.fromBase64String(e))}catch(t){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(xl(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};ao._jsonSchemaVersion="firestore/bytes/1.0",ao._jsonSchema={type:ft("string",ao._jsonSchemaVersion),bytes:ft("string")};var dc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Nl=class{constructor(e){this._methodName=e}};var co=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(xl(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};co._jsonSchemaVersion="firestore/geoPoint/1.0",co._jsonSchema={type:ft("string",co._jsonSchemaVersion),latitude:ft("number"),longitude:ft("number")};var uo=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(xl(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new L(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};uo._jsonSchemaVersion="firestore/vectorValue/1.0",uo._jsonSchema={type:ft("string",uo._jsonSchemaVersion),vectorValues:ft("object")};var vq=/^__.*__$/,hD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new bs(e,this.data,t,this.fieldTransforms)}},ig=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Ox(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{Ec:n})}}var fD=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return sg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Ox(this.Ec)&&vq.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},pD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||pg(e)}Dc(e,t,r,i=!1){return new fD({Ec:e,methodName:t,bc:r,path:Tn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function yg(n){let e=n._freezeSettings(),t=pg(n._databaseId);return new pD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Fx(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);HD("Data must be an object, but it was:",s,r);let a=Lx(r,s),u,l;if(o.merge)u=new Ln(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=gD(e,p,t);if(!s.contains(g))throw new L(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);jx(h,g)||h.push(g)}u=new Ln(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new hD(new bn(a),u,l)}var og=class n extends Nl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function _q(n,e,t,r){let i=n.Dc(1,e,t);HD("Data must be an object, but it was:",i,r);let o=[],s=bn.empty();go(r,(u,l)=>{let h=qD(e,u,t);l=Ue(l);let p=i.gc(h);if(l instanceof og)o.push(h);else{let g=Fl(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new Ln(o);return new ig(s,a,i.fieldTransforms)}function Eq(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[gD(e,r,t)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(gD(e,o[g])),u.push(o[g+1]);let l=[],h=bn.empty();for(let g=a.length-1;g>=0;--g)if(!jx(l,a[g])){let y=a[g],I=u[g];I=Ue(I);let A=s.gc(y);if(I instanceof og)l.push(y);else{let N=Fl(I,A);N!=null&&(l.push(y),h.set(y,N))}}let p=new Ln(l);return new ig(h,p,s.fieldTransforms)}function Iq(n,e,t,r=!1){return Fl(t,n.Dc(r?4:3,e))}function Fl(n,e){if(Vx(n=Ue(n)))return HD("Unsupported field value:",e,n),Lx(n,e);if(n instanceof Nl)return function(r,i){if(!Ox(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Fl(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return o5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Qe.fromDate(r);return{timestampValue:Bp(i.serializer,o)}}if(r instanceof Qe){let o=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bp(i.serializer,o)}}if(r instanceof co)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ao)return{bytesValue:ix(i.serializer,r._byteString)};if(r instanceof Ct){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:MD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof uo)return function(s,a){return{mapValue:{fields:{[bD]:{stringValue:TD},[ec]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return ND(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${ug(r)}`)}(n,e)}function Lx(n,e){let t={};return NP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(n,(r,i)=>{let o=Fl(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Vx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qe||n instanceof co||n instanceof ao||n instanceof Ct||n instanceof Nl||n instanceof uo)}function HD(n,e,t){if(!Vx(t)||!gP(t)){let r=ug(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function gD(n,e,t){if((e=Ue(e))instanceof dc)return e._internalPath;if(typeof e=="string")return qD(n,e);throw sg("Field path arguments must be of type string or ",n,!1,void 0,t)}var wq=new RegExp("[~\\*/\\[\\]]");function qD(n,e,t){if(e.search(wq)>=0)throw sg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dc(...e.split("."))._internalPath}catch{throw sg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+n+u)}function jx(n,e){return n.some(t=>t.isEqual(e))}var ag=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new mD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(zD("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},mD=class extends ag{data(){return super.data()}};function zD(n,e){return typeof e=="string"?qD(n,e):e instanceof dc?e._internalPath:e._delegate._internalPath}function Ux(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ml=class{},yD=class extends Ml{};function mo(n,e,...t){let r=[];e instanceof Ml&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof vD).length,a=o.filter(u=>u instanceof cg).length;if(s>1||s>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var cg=class n extends yD{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Bx(e._query,t),new Cs(e.firestore,e.converter,iw(e._query,t))}_parse(e){let t=yg(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){dP(p,h);let I=[];for(let A of p)I.push(lP(u,o,A));g={arrayValue:{values:I}}}else g=lP(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||dP(p,h),g=Iq(a,s,p,h==="in"||h==="not-in");return ht.create(l,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function yo(n,e,t){let r=e,i=zD("where",n);return cg._create(i,r,t)}var vD=class n extends Ml{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ir.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)Bx(s,u),s=iw(s,u)}(e._query,t),new Cs(e.firestore,e.converter,iw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function lP(n,e,t){if(typeof(t=Ue(t))=="string"){if(t==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qP(e)&&t.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child($e.fromString(t));if(!G.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return MM(n,new G(r))}if(t instanceof Ct)return MM(n,t._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ug(t)}.`)}function dP(n,e){if(!Array.isArray(n)||n.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bx(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var _D=class{convertValue(e,t="none"){switch(ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return go(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ec].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Be(s.doubleValue));return new uo(o)}convertGeoPoint(e){return new co(Be(e.latitude),Be(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=dg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dl(e));default:return null}}convertTimestamp(e){let t=_i(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=$e.fromString(e);Ne(lx(r),9688,{name:e});let i=new Op(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(t)||vi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function $x(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ms=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ys=class n extends ag{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ja(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(zD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",ys._jsonSchema={type:ft("string",ys._jsonSchemaVersion),bundleSource:ft("string","DocumentSnapshot"),bundleName:ft("string"),bundle:ft("string")};var Ja=class extends ys{data(e={}){return super.data(e)}},vs=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ms(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ja(this._firestore,this._userDataWriter,r.key,r,new ms(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ja(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ms(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ja(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ms(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Dq(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=El.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Dq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:n})}}vs._jsonSchemaVersion="firestore/querySnapshot/1.0",vs._jsonSchema={type:ft("string",vs._jsonSchemaVersion),bundleSource:ft("string","QuerySnapshot"),bundleName:ft("string"),bundle:ft("string")};var Pl=class extends _D{constructor(e){super(),this.firestore=e}convertBytes(e){return new ao(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}};function mc(n){n=Vn(n,Cs);let e=Vn(n.firestore,Vr),t=$D(e),r=new Pl(e);return Ux(n._query),mq(t,n._query).then(i=>new vs(e,r,n,i))}function Hx(n,e,t){n=Vn(n,Ct);let r=Vn(n.firestore,Vr),i=$x(n.converter,e,t);return _g(r,[Fx(yg(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,kr.none())])}function qx(n,e,t,...r){n=Vn(n,Ct);let i=Vn(n.firestore,Vr),o=yg(i),s;return s=typeof(e=Ue(e))=="string"||e instanceof dc?Eq(o,"updateDoc",n._key,e,t,r):_q(o,"updateDoc",n._key,e),_g(i,[s.toMutation(n._key,kr.exists(!0))])}function zx(n){return _g(Vn(n.firestore,Vr),[new Tl(n._key,kr.none())])}function Gx(n,e){let t=Vn(n.firestore,Vr),r=BD(n),i=$x(n.converter,e);return _g(t,[Fx(yg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}function vg(n,...e){var t,r,i;n=Ue(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||uP(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(uP(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Ct)l=Vn(n.firestore,Vr),h=RD(n._key.path),u={next:p=>{e[s]&&e[s](bq(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Vn(n,Cs);l=Vn(p.firestore,Vr),h=p._query;let g=new Pl(l);u={next:y=>{e[s]&&e[s](new vs(l,g,p,y))},error:e[s+1],complete:e[s+2]},Ux(n._query)}return function(g,y,I,A){let N=new tg(A),k=new Jp(y,N,I);return g.asyncQueue.enqueueAndForget(async()=>Ex(await dD(g),k)),()=>{N.Ou(),g.asyncQueue.enqueueAndForget(async()=>Ix(await dD(g),k))}}($D(l),h,a,u)}function _g(n,e){return function(r,i){let o=new Mr;return r.asyncQueue.enqueueAndForget(async()=>oq(await gq(r),i,o)),o.promise}($D(n),e)}function bq(n,e,t){let r=t.docs.get(e._key),i=new Pl(n);return new ys(n,i,e._key,r,new ms(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){hc=i})(Xi),Dn(new Pt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Vr(new VI(r.getProvider("auth-internal")),new BI(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Op(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ke(_M,EM,e),ke(_M,EM,"esm2017")})();var or=class{constructor(e){return e}},Wx="firestore",GD=class{constructor(){return eo(Wx)}};var WD=new U("angularfire2.firestore-instances");function Tq(n,e){let t=cs(Wx,n,e);return t&&new or(t)}function Cq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new or(r)}}var Sq={provide:GD,deps:[[new _t,WD]]},Aq={provide:or,useFactory:Tq,deps:[[new _t,WD],er]};function Fue(n,...e){return ke("angularfire",Sr.full,"fst"),Wt([Aq,Sq,{provide:WD,useFactory:Cq(n),multi:!0,deps:[Ie,Ve,Ar,di,[new _t,fs],[new _t,ro],...e]}])}var Eg=It(Gx,!0,2);var rn=It(xx,!0,2);var yc=It(zx,!0,2);var sr=It(BD,!0,2);var Ll=It(mc,!0);var Lue=It(kx,!0);var KD=It(vg,!0);var Kx=It(Hx,!0,2);var Ig=It(qx,!0,2);var wg=class n{firestore=S(or);promptsSubs;prompts=Ae([]);constructor(){this.promptsSubs=this.trackPrompts()}trackPrompts(){let e=rn(this.firestore,"prompts");return vg(e,t=>{t.docChanges().forEach(r=>{r.type==="added"&&this.prompts.update(i=>[...i,P({id:r.doc.id},r.doc.data())]),r.type==="modified"&&this.prompts.update(i=>{let o=i.findIndex(s=>s.id===r.doc.id);return o!==-1&&(i[o]=P({id:r.doc.id},r.doc.data())),[...i]}),r.type==="removed"&&this.prompts.update(i=>i.filter(o=>o.id!==r.doc.id))})})}async getPromptBySlug(e){return this.prompts().length>0?this.prompts().find(t=>t.slug===e):await mc(mo(rn(this.firestore,"prompts"),yo("slug","==",e))).then(t=>{if(t.empty)throw new Error(`No se encontr\xF3 un pormpt ${e} `);return t.docs[0].data()})}getPromptById(e){return this.prompts().find(t=>t.id===e)}async getPromptsByCategory(e){return this.prompts().length>0?this.prompts().filter(t=>t.categoria===e):await mc(mo(rn(this.firestore,"prompts"),yo("categoria","==",e))).then(t=>{if(t.empty)throw new Error(`No se encontr\xF3 ning\xFAn prompt para la categor\xEDa ${e} `);return t.docs.map(r=>P({id:r.id},r.data()))})}async getPromptsByTag(e){return this.prompts().length>0?this.prompts().filter(t=>t.tags.includes(e)):await mc(mo(rn(this.firestore,"prompts"),yo("tags","array-contains",e))).then(t=>{if(t.empty)throw new Error(`No se encontr\xF3 ning\xFAn prompt para la etiqueta ${e} `);return t.docs.map(r=>P({id:r.id},r.data()))})}async createPrompt(e){try{let t=Z(P({},e),{old_id:900,slug:e.titulo??this.generateSlug(e.titulo),fecha_creacion:new Date});await Eg(rn(this.firestore,"prompts"),t)}catch(t){let r=`Error al crear prompt: ${t}`;console.error(r)}}async updatePrompt(e,t){try{let r=sr(this.firestore,"prompts",e);await Ig(r,Z(P({},t),{fechaModificacion:new Date}))}catch(r){let i=`Error al actualizar prompt ${e}: ${r}`;console.error(i)}}async deletePrompt(e){try{let t=sr(this.firestore,"prompts",e);await yc(t)}catch(t){let r=`Error al eliminar prompt ${e}: ${t}`;console.error(r)}}async updateCategoryPromptCount(e,t){let r=sr(this.firestore,"categories",e);await Ig(r,{prompt_count:t,fecha_edicion:new Date})}async createCategory(e){await Eg(rn(this.firestore,"categories"),Z(P({},e),{slug:this.generateSlug(e.name||""),fecha_creacion:new Date}))}async updateTagPromptCount(e,t){let r=sr(this.firestore,"tags",e);await Ig(r,{prompt_count:t,fecha_edicion:new Date})}async createTag(e){await Eg(rn(this.firestore,"tags"),Z(P({},e),{slug:this.generateSlug(e.name||""),fecha_creacion:new Date}))}async deleteCategory(e){try{let t=sr(this.firestore,"categories",e);await yc(t)}catch(t){let r=`Error al eliminar la categor\xEDa ${e}: ${t}`;console.error(r)}}async deleteTag(e){try{let t=sr(this.firestore,"tags",e);await yc(t)}catch(t){let r=`Error al eliminar la etiqueta ${e}: ${t}`;console.error(r)}}searchPrompts(e){try{let t=e.toLowerCase();return this.prompts().filter(r=>r.titulo.toLowerCase().includes(t)||r.prompt.toLowerCase().includes(t)||r.descripcion.toLowerCase().includes(t)||r.categoria.toLowerCase().includes(t)||r.tags.some(i=>i.toLowerCase().includes(t)))}catch(t){let r=`Error en b\xFAsqueda: ${t}`;return console.error(r),[]}}generateSlug(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim()}ngOnDestroy(){this.promptsSubs?.()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var vc=class n{firestoreService=S(wg);search(e){return this.searchInFirestore(e)}prompts(){return this.firestoreService.prompts()}categories(){return z([])}tags(){return z([])}async byCategoryName(e){return{name:this.titleCase(e),prompts:await this.firestoreService.getPromptsByCategory(e)}}async byTagName(e){return{name:this.titleCase(e),prompts:await this.firestoreService.getPromptsByTag(e)}}async createPrompt(e){await this.firestoreService.createPrompt(e).then(t=>{this.addOrUpdateCategory(e.categoria),this.addOrUpdateTags(e.tags)})}addOrUpdateCategory(e){this.categories().subscribe(async t=>{let r=t.find(i=>i.name.toLowerCase()===e);if(r){let i=r.prompt_count+1;await this.firestoreService.updateCategoryPromptCount(r.id,i),r.prompt_count=i}else await this.firestoreService.createCategory({name:e,prompt_count:1,slug:""})})}addOrUpdateTags(e){this.tags().subscribe(async t=>{for(let r of e){let i=t.find(o=>o.name.toLowerCase()===r);if(i){let o=(i.prompt_count??0)+1;await this.firestoreService.updateTagPromptCount(i.id,o),i.prompt_count=o}else await this.firestoreService.createTag({name:r,prompt_count:1,slug:""})}})}async updateOrDeleteCategory(e){this.categories().subscribe(t=>{let r=t.find(i=>i.name.toLowerCase()===e);if(r){let i=r.prompt_count-1;i<=0?this.firestoreService.deleteCategory(r.id):(this.firestoreService.updateCategoryPromptCount(r.id,i),r.prompt_count=i)}})}async updateOrDeleteTags(e){this.tags().subscribe(t=>{for(let r of e){let i=t.find(o=>o.name.toLowerCase()===r);if(i){let o=i.prompt_count-1;o<=0?this.firestoreService.deleteTag(i.id):(this.firestoreService.updateTagPromptCount(i.id,o),i.prompt_count=o)}}})}async deletePrompt(e){let t=this.firestoreService.getPromptById(e),r=[...t.tags],i=t.categoria;await this.firestoreService.deletePrompt(e).then(()=>{this.updateOrDeleteCategory(i),this.updateOrDeleteTags(r)})}deleteTag(e){this.tags().pipe(ie(t=>t.find(r=>r.name.toLowerCase()===e.toLowerCase())),Ge(t=>{if(!t)throw new Error(`No se encontr\xF3 el tag '${e}'.`);this.firestoreService.deleteTag(t.id)}))}deleteCategory(e){this.categories().pipe(ie(t=>t.find(r=>r.name.toLowerCase()===e.toLowerCase())),Ge(t=>{if(!t)throw new Error(`No se encontr\xF3 la categor\xEDa '${e}'.`);this.firestoreService.deleteCategory(t.id)}))}async bySlug(e){return this.firestoreService.getPromptBySlug(e)}searchInFirestore(e){try{let t=this.firestoreService.searchPrompts(e).map(r=>({item:r,foundIn:"titulo",position:0,relevanceScore:1}));return{search:e,found:t}}catch(t){return console.error("Error en b\xFAsqueda de Firestore:",t),{search:e,found:[]}}}titleCase(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Nq="type.googleapis.com/google.protobuf.Int64Value",Mq="type.googleapis.com/google.protobuf.UInt64Value";function Jx(n,e){let t={};for(let r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Dg(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Dg(e));if(typeof n=="function"||typeof n=="object")return Jx(n,e=>Dg(e));throw new Error("Data cannot be encoded in JSON: "+n)}function _c(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case Nq:case Mq:{let e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>_c(e)):typeof n=="function"||typeof n=="object"?Jx(n,e=>_c(e)):n}var JD="functions";var Qx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},pn=class n extends tn{constructor(e,t,r){super(`${JD}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,n.prototype)}};function Pq(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function bg(n,e){let t=Pq(n),r=t,i;try{let o=e&&e.error;if(o){let s=o.status;if(typeof s=="string"){if(!Qx[s])return new pn("internal","internal");t=Qx[s],r=s}let a=o.message;typeof a=="string"&&(r=a),i=o.details,i!==void 0&&(i=_c(i))}}catch{}return t==="ok"?null:new pn(t,r,i)}var QD=class{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,nn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{let e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){let t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}};var YD="us-central1",xq=/^data: (.*?)(?:\n|$)/;function kq(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new pn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}var ZD=class{constructor(e,t,r,i,o=YD,s=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new QD(e,t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=YD}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function Oq(n,e,t){let r=Dr(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(La(n.emulatorOrigin),Va("Functions",!0))}function Fq(n,e,t){let r=i=>Vq(n,e,i,t||{});return r.stream=(i,o)=>Uq(n,e,i,o),r}async function Lq(n,e,t,r){t["Content-Type"]="application/json";let i;try{i=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let o=null;try{o=await i.json()}catch{}return{status:i.status,json:o}}async function Xx(n,e){let t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function Vq(n,e,t,r){let i=n._url(e);return jq(n,i,t,r)}async function jq(n,e,t,r){t=Dg(t);let i={data:t},o=await Xx(n,r),s=r.timeout||7e4,a=kq(s),u=await Promise.race([Lq(e,i,o,n.fetchImpl),a.promise,n.cancelAllRequests]);if(a.cancel(),!u)throw new pn("cancelled","Firebase Functions instance was deleted.");let l=bg(u.status,u.json);if(l)throw l;if(!u.json)throw new pn("internal","Response is not valid JSON object.");let h=u.json.data;if(typeof h>"u"&&(h=u.json.result),typeof h>"u")throw new pn("internal","Response is missing data field.");return{data:_c(h)}}function Uq(n,e,t,r){let i=n._url(e);return Bq(n,i,t,r||{})}async function Bq(n,e,t,r){var i;t=Dg(t);let o={data:t},s=await Xx(n,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:s,signal:r?.signal})}catch(y){if(y instanceof Error&&y.name==="AbortError"){let A=new pn("cancelled","Request was cancelled.");return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}let I=bg(0,null);return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}let u,l,h=new Promise((y,I)=>{u=y,l=I});(i=r?.signal)===null||i===void 0||i.addEventListener("abort",()=>{let y=new pn("cancelled","Request was cancelled.");l(y)});let p=a.body.getReader(),g=$q(p,u,l,r?.signal);return{stream:{[Symbol.asyncIterator](){let y=g.getReader();return{async next(){let{value:I,done:A}=await y.read();return{value:I,done:A}},async return(){return await y.cancel(),{done:!0,value:void 0}}}}},data:h}}function $q(n,e,t,r){let i=(s,a)=>{let u=s.match(xq);if(!u)return;let l=u[1];try{let h=JSON.parse(l);if("result"in h){e(_c(h.result));return}if("message"in h){a.enqueue(_c(h.message));return}if("error"in h){let p=bg(0,h);a.error(p),t(p);return}}catch(h){if(h instanceof pn){a.error(h),t(h);return}}},o=new TextDecoder;return new ReadableStream({start(s){let a="";return u();async function u(){if(r?.aborted){let l=new pn("cancelled","Request was cancelled");return s.error(l),t(l),Promise.resolve()}try{let{value:l,done:h}=await n.read();if(h){a.trim()&&i(a.trim(),s),s.close();return}if(r?.aborted){let g=new pn("cancelled","Request was cancelled");s.error(g),t(g),await n.cancel();return}a+=o.decode(l,{stream:!0});let p=a.split(`
`);a=p.pop()||"";for(let g of p)g.trim()&&i(g.trim(),s);return u()}catch(l){let h=l instanceof pn?l:bg(0,null);s.error(h),t(h)}}},cancel(){return n.cancel()}})}var Yx="@firebase/functions",Zx="0.12.9";var Hq="auth-internal",qq="app-check-internal",zq="messaging-internal";function Gq(n){let e=(t,{instanceIdentifier:r})=>{let i=t.getProvider("app").getImmediate(),o=t.getProvider(Hq),s=t.getProvider(zq),a=t.getProvider(qq);return new ZD(i,o,s,a,r)};Dn(new Pt(JD,e,"PUBLIC").setMultipleInstances(!0)),ke(Yx,Zx,n),ke(Yx,Zx,"esm2017")}function Wq(n=li(),e=YD){let r=Ji(Ue(n),JD).getImmediate({identifier:e}),i=Wf("functions");return i&&ek(r,...i),r}function ek(n,e,t){Oq(Ue(n),e,t)}function tk(n,e,t){return Fq(Ue(n),e,t)}Gq();var As=class{constructor(e){return e}},nk="functions",XD=class{constructor(){return eo(nk)}};var eb=new U("angularfire2.functions-instances");function Kq(n,e){let t=cs(nk,n,e);return t&&new As(t)}function Qq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new As(r)}}var Yq={provide:XD,deps:[[new _t,eb]]},Zq={provide:As,useFactory:Kq,deps:[[new _t,eb],er]};function hle(n,...e){return ke("angularfire",Sr.full,"fn"),Wt([Zq,Yq,{provide:eb,useFactory:Qq(n),multi:!0,deps:[Ie,Ve,Ar,di,[new _t,fs],[new _t,ro],...e]}])}var rk=It(tk,!0);var vo=class n{firestore=S(or);auth=S(gi);functions=S(As);async getAdmins(){let e=rn(this.firestore,"admins");return(await Ll(e)).docs.map(r=>P({uid:r.id},r.data()))}async getUidByEmail(e){let r=await rk(this.functions,"getUidByEmail")({email:e}),i=r&&typeof r.data=="object"?r.data:{};if(!i.uid)throw new Error("No existe un usuario con ese email");return{uid:i.uid,email:i.email}}async addAdminByEmail(e){let{uid:t}=await this.getUidByEmail(e);await this.addAdminByUid(t,e)}async addAdminByUid(e,t){let r=sr(this.firestore,"admins",e);await Kx(r,{email:t})}async removeAdmin(e){let t=sr(this.firestore,"admins",e);await yc(t)}isCurrentUserAdmin(){return this.auth.currentUser?Le(this.auth.currentUser.getIdToken()).pipe(qt(()=>{let e=this.auth.currentUser?.uid;return e?z(sr(this.firestore,"admins",e)).pipe(ie(t=>t.id===e)):z(!1)})):z(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var e6={menu:"M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z",back:"m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z",search:"M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z",copy:"M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z",share:"M680-80q-50 0-85-35t-35-85q0-6 3-28L282-392q-16 15-37 23.5t-45 8.5q-50 0-85-35t-35-85q0-50 35-85t85-35q24 0 45 8.5t37 23.5l281-164q-2-7-2.5-13.5T560-760q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35q-24 0-45-8.5T598-672L317-508q2 7 2.5 13.5t.5 14.5q0 8-.5 14.5T317-452l281 164q16-15 37-23.5t45-8.5q50 0 85 35t35 85q0 50-35 85t-85 35Z","dark-mode":"M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z","light-mode":"M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z",close:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z",link:"M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z",terminal:"M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H160v400Zm140-40-56-56 103-104-104-104 57-56 160 160-160 160Zm180 0v-80h240v80H480Z",check:"M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z",add:"M440-120v-320H120v-80h320v-320h80v320h320v80H520v320h-80Z",delete:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z",logout:"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z",login:"M480-120v-80h280v-560H480v-80h280q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H480Zm-80-160-55-58 102-102H120v-80h327L345-622l55-58 200 200-200 200Z"},St=class n{elementRef=S(Vt);renderer=S(ln);icon=se.required({alias:"pdIcon"});size=se(24);fill=se("currentColor");constructor(){xa(()=>{this.createSvgIcon()})}createSvgIcon(){let e=e6[this.icon()];if(!e){console.warn(`Icon "${this.icon()}" not found`);return}this.elementRef.nativeElement.innerHTML="";let t=this.renderer.createElement("svg","http://www.w3.org/2000/svg");this.renderer.setAttribute(t,"height",`${this.size()}px`),this.renderer.setAttribute(t,"width",`${this.size()}px`),this.renderer.setAttribute(t,"viewBox","0 -960 960 960"),this.renderer.setAttribute(t,"fill",this.fill());let r=this.renderer.createElement("path","http://www.w3.org/2000/svg");this.renderer.setAttribute(r,"d",e),this.renderer.appendChild(t,r),this.renderer.appendChild(this.elementRef.nativeElement,t)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=le({type:n,selectors:[["","pdIcon",""]],inputs:{icon:[1,"pdIcon","icon"],size:[1,"size"],fill:[1,"fill"]}})};var Tg=class n{copyService=S(Bf);promptText=se("");promptUrl=se(null);copyPrompt(){this.promptText()&&this.copyService.copy(this.promptText())}copyUrl(){this.promptUrl()&&this.copyService.copy(this.promptUrl())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-copy-actions"]],inputs:{promptText:[1,"promptText"],promptUrl:[1,"promptUrl"]},decls:3,vars:0,consts:[[1,"space-x-2","flex"],["pd-action-button","","title","Copiar la direcci\xF3n","aria-label","Copiar la direcci\xF3n","pdIcon","link",3,"clicked"],["pd-action-button","","title","Copiar el prompt","aria-label","Copiar el prompt","pdIcon","copy",3,"clicked"]],template:function(t,r){t&1&&(K(0,"div",0)(1,"button",1),oe("clicked",function(){return r.copyUrl()}),q(),K(2,"button",2),oe("clicked",function(){return r.copyPrompt()}),q()())},dependencies:[Uf,St],encapsulation:2})};var t6=["*"],ik=class n{constructor(e){this.renderer=e;this.setListeners()}isOpen=Ae(!1);removeDocumentClickListenerFn=null;removeDocumentEscapeListenerFn=null;show(){this.isOpen()!==!0&&(this.isOpen.set(!0),this.setListeners())}hide(){this.isOpen()&&(this.isOpen.set(!1),this.removeDocumentClickListenerFn?.(),this.removeDocumentEscapeListenerFn?.())}onClick(){this.hide()}setListeners(){this.isOpen()===!0&&(this.removeDocumentClickListenerFn=this.renderer.listen("document","click",()=>this.hide()),this.removeDocumentEscapeListenerFn=this.renderer.listen("document","keydown.escape",()=>this.hide(),{passive:!0}))}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeDocumentEscapeListenerFn?.()}static \u0275fac=function(t){return new(t||n)(W(ln))};static \u0275cmp=ue({type:n,selectors:[["pd-drawer"],["","pd-drawer",""]],ngContentSelectors:t6,decls:3,vars:4,consts:[[1,"drawer","shadow-lg/60","dark:shadow-lg/70","md:shadow-sm/40","md:dark:shadow-md/70","fixed","md:top-14","top-0","z-14","dark:shadow-black","shadow-black/80","bg-drawer","bottom-0","overflow-hidden",3,"click"],[1,"fixed","md:hidden","top-0","left-0","z-12","bg-black/10","dark:bg-black/20","block","opacity-100","w-screen","h-screen"]],template:function(t,r){t&1&&(Gu(),dn(0,"div",0),Pa("click",function(){return r.onClick()}),Wu(1),Jt(),Qi(2,"div",1)),t&2&&(Xt("open",r.isOpen()),te(2),Xt("hidden",!r.isOpen()))},encapsulation:2})};var Sg=new U(""),ob=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)($(Sg),$(Ie))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),Vl=class{_doc;constructor(e){this._doc=e}manager},tb="ng-app-id";function ok(n){for(let e of n)e.remove()}function sk(n,e){let t=e.createElement("style");return t.textContent=n,t}function n6(n,e,t,r){let i=n.head?.querySelectorAll(`style[${tb}="${e}"],link[${tb}="${e}"]`);if(i)for(let o of i)o.removeAttribute(tb),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function rb(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var sb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,n6(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,sk);r?.forEach(i=>this.addUsage(i,this.external,rb))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(ok(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])ok(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,sk(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,rb(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)($(wt),$(yf),$(_f,8),$(Wi))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),nb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ab=/%COMP%/g;var ck="%COMP%",r6=`_nghost-${ck}`,i6=`_ngcontent-${ck}`,o6=!0,s6=new U("",{providedIn:"root",factory:()=>o6});function a6(n){return i6.replace(ab,n)}function c6(n){return r6.replace(ab,n)}function uk(n,e){return e.map(t=>t.replace(ab,n))}var cb=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new jl(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Cg?i.applyToHost(t):i instanceof Ul&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case ti.Emulated:o=new Cg(u,l,r,this.appId,h,s,a,p,g);break;case ti.ShadowDom:return new ib(u,l,t,r,s,a,this.nonce,p,g);default:o=new Ul(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)($(ob),$(sb),$(yf),$(s6),$(wt),$(Wi),$(Ie),$(_f),$(ts,8))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),jl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(nb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ak(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ak(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=nb[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=nb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_r.DashCase|_r.Important)?e.style.setProperty(t,r,i&_r.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_r.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=On().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function ak(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ib=class extends jl{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=uk(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=rb(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ul=class extends jl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?uk(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Cg=class extends Ul{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=a6(h),this.hostAttr=c6(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ag=class n extends nl{supportsDOMEvents=!0;static makeCurrent(){xE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=u6();return t==null?null:l6(t)}resetBaseElement(){Bl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return LE(document.cookie,e)}},Bl=null;function u6(){return Bl=Bl||document.head.querySelector("base"),Bl?Bl.getAttribute("href"):null}function l6(n){return new URL(n,document.baseURI).pathname}var d6=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),dk=(()=>{class n extends Vl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)($(wt))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),lk=["alt","control","meta","shift"],h6={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},f6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},hk=(()=>{class n extends Vl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>On().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),lk.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=h6[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),lk.forEach(s=>{if(s!==i){let a=f6[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)($(wt))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();function p6(n,e){return RR(P({rootComponent:n},g6(e)))}function g6(n){return{appProviders:[...E6,...n?.providers??[]],platformProviders:_6}}function m6(){Ag.makeCurrent()}function y6(){return new vn}function v6(){return g_(document),document}var _6=[{provide:Wi,useValue:yN},{provide:vf,useValue:m6,multi:!0},{provide:wt,useFactory:v6}];var E6=[{provide:Iu,useValue:"root"},{provide:vn,useFactory:y6},{provide:Sg,useClass:dk,multi:!0,deps:[wt]},{provide:Sg,useClass:hk,multi:!0,deps:[wt]},cb,sb,ob,{provide:Zo,useExisting:cb},{provide:rl,useClass:d6},[]];var fk=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)($(wt))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fe="primary",nd=Symbol("RouteTitle"),fb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ms(n){return new fb(n)}function Ik(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function w6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!jr(n[t],e[t]))return!1;return!0}function jr(n,e){let t=n?pb(n):void 0,r=e?pb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!wk(n[i],e[i]))return!1;return!0}function pb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function Dk(n){return n.length>0?n[n.length-1]:null}function Ti(n){return py(n)?n:ii(n)?Le(Promise.resolve(n)):z(n)}var D6={exact:Tk,subset:Ck},bk={exact:b6,subset:T6,ignored:()=>!0};function pk(n,e,t){return D6[t.paths](n.root,e.root,t.matrixParams)&&bk[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function b6(n,e){return jr(n,e)}function Tk(n,e,t){if(!Rs(n.segments,e.segments)||!Mg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Tk(n.children[r],e.children[r],t))return!1;return!0}function T6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wk(n[t],e[t]))}function Ck(n,e,t){return Sk(n,e,e.segments,t)}function Sk(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Rs(i,t)||e.hasChildren()||!Mg(i,t,r))}else if(n.segments.length===t.length){if(!Rs(n.segments,t)||!Mg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Ck(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Rs(n.segments,i)||!Mg(n.segments,i,r)||!n.children[fe]?!1:Sk(n.children[fe],e,o,r)}}function Mg(n,e,t){return e.every((r,i)=>bk[t](n[i].parameters,r.parameters))}var Br=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Te([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ms(this.queryParams),this._queryParamMap}toString(){return A6.serialize(this)}},Te=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pg(this)}},_o=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ms(this.parameters),this._parameterMap}toString(){return Rk(this)}};function C6(n,e){return Rs(n,e)&&n.every((t,r)=>jr(t.parameters,e[r].parameters))}function Rs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function S6(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var rd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>new Ps,providedIn:"root"})}return n})(),Ps=class{parse(e){let t=new mb(e);return new Br(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${$l(e.root,!0)}`,r=M6(e.queryParams),i=typeof e.fragment=="string"?`#${R6(e.fragment)}`:"";return`${t}${r}${i}`}},A6=new Ps;function Pg(n){return n.segments.map(e=>Rk(e)).join("/")}function $l(n,e){if(!n.hasChildren())return Pg(n);if(e){let t=n.children[fe]?$l(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==fe&&r.push(`${i}:${$l(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=S6(n,(r,i)=>i===fe?[$l(n.children[fe],!1)]:[`${i}:${$l(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${Pg(n)}/${t[0]}`:`${Pg(n)}/(${t.join("//")})`}}function Ak(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rg(n){return Ak(n).replace(/%3B/gi,";")}function R6(n){return encodeURI(n)}function gb(n){return Ak(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xg(n){return decodeURIComponent(n)}function gk(n){return xg(n.replace(/\+/g,"%20"))}function Rk(n){return`${gb(n.path)}${N6(n.parameters)}`}function N6(n){return Object.entries(n).map(([e,t])=>`;${gb(e)}=${gb(t)}`).join("")}function M6(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Rg(t)}=${Rg(i)}`).join("&"):`${Rg(t)}=${Rg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var P6=/^[^\/()?;#]+/;function ub(n){let e=n.match(P6);return e?e[0]:""}var x6=/^[^\/()?;=#]+/;function k6(n){let e=n.match(x6);return e?e[0]:""}var O6=/^[^=?&#]+/;function F6(n){let e=n.match(O6);return e?e[0]:""}var L6=/^[^&#]+/;function V6(n){let e=n.match(L6);return e?e[0]:""}var mb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new Te(e,t)),r}parseSegment(){let e=ub(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new _o(xg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=k6(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=ub(this.remaining);i&&(r=i,this.capture(r))}e[xg(t)]=xg(r)}parseQueryParam(e){let t=F6(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=V6(this.remaining);s&&(r=s,this.capture(r))}let i=gk(t),o=gk(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ub(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=fe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[fe]:new Te([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function Nk(n){return n.segments.length>0?new Te([],{[fe]:n}):n}function Mk(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=Mk(i);if(r===fe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Te(n.segments,e);return j6(t)}function j6(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new Te(n.segments.concat(e.segments),e.children)}return n}function Eo(n){return n instanceof Br}function Pk(n,e,t=null,r=null){let i=xk(n);return kk(i,e,t,r)}function xk(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Te(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=Nk(r);return e??i}function kk(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return lb(i,i,i,t,r);let o=U6(e);if(o.toRoot())return lb(i,i,new Te([],{}),t,r);let s=B6(o,i,n),a=s.processChildren?ql(s.segmentGroup,s.index,o.commands):Fk(s.segmentGroup,s.index,o.commands);return lb(i,s.segmentGroup,a,t,r)}function kg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Wl(n){return typeof n=="object"&&n!=null&&n.outlets}function lb(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=Ok(n,e,t);let a=Nk(Mk(s));return new Br(a,o,i)}function Ok(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=Ok(o,e,t)}),new Te(n.segments,r)}var Og=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&kg(r[0]))throw new j(4003,!1);let i=r.find(Wl);if(i&&i!==Dk(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function U6(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Og(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Og(t,e,r)}var wc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function B6(n,e,t){if(n.isAbsolute)return new wc(e,!0,0);if(!t)return new wc(e,!1,NaN);if(t.parent===null)return new wc(t,!0,0);let r=kg(n.commands[0])?0:1,i=t.segments.length-1+r;return $6(t,i,n.numberOfDoubleDots)}function $6(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new wc(r,!1,i-o)}function H6(n){return Wl(n[0])?n[0].outlets:{[fe]:n}}function Fk(n,e,t){if(n??=new Te([],{}),n.segments.length===0&&n.hasChildren())return ql(n,e,t);let r=q6(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Te(n.segments.slice(0,r.pathIndex),{});return o.children[fe]=new Te(n.segments.slice(r.pathIndex),n.children),ql(o,0,i)}else return r.match&&i.length===0?new Te(n.segments,{}):r.match&&!n.hasChildren()?yb(n,e,t):r.match?ql(n,0,i):yb(n,e,t)}function ql(n,e,t){if(t.length===0)return new Te(n.segments,{});{let r=H6(t),i={};if(Object.keys(r).some(o=>o!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let o=ql(n.children[fe],e,t);return new Te(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Fk(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Te(n.segments,i)}}function q6(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Wl(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!yk(u,l,s))return o;r+=2}else{if(!yk(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function yb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Wl(o)){let u=z6(o.outlets);return new Te(r,u)}if(i===0&&kg(t[0])){let u=n.segments[e];r.push(new _o(u.path,mk(t[0]))),i++;continue}let s=Wl(o)?o.outlets[fe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&kg(a)?(r.push(new _o(s,mk(a))),i+=2):(r.push(new _o(s,{})),i++)}return new Te(r,{})}function z6(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=yb(new Te([],{}),0,r))}),e}function mk(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yk(n,e,t){return n==t.path&&jr(e,t.parameters)}var zl="imperative",At=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(At||{}),Sn=class{id;url;constructor(e,t){this.id=e,this.url=t}},xs=class extends Sn{type=At.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},cr=class extends Sn{urlAfterRedirects;type=At.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},on=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(on||{}),Kl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Kl||{}),Ur=class extends Sn{reason;code;type=At.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Di=class extends Sn{reason;code;type=At.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},bc=class extends Sn{error;target;type=At.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ql=class extends Sn{urlAfterRedirects;state;type=At.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fg=class extends Sn{urlAfterRedirects;state;type=At.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lg=class extends Sn{urlAfterRedirects;state;shouldActivate;type=At.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vg=class extends Sn{urlAfterRedirects;state;type=At.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jg=class extends Sn{urlAfterRedirects;state;type=At.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ug=class{route;type=At.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Bg=class{route;type=At.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},$g=class{snapshot;type=At.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hg=class{snapshot;type=At.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qg=class{snapshot;type=At.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zg=class{snapshot;type=At.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Yl=class{},Tc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function G6(n){return!(n instanceof Yl)&&!(n instanceof Tc)}function W6(n,e){return n.providers&&!n._injector&&(n._injector=Sa(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ar(n){return n.outlet||fe}function K6(n,e){let t=n.filter(r=>ar(r)===e);return t.push(...n.filter(r=>ar(r)!==e)),t}function Ac(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Gg=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ac(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Rc(this.rootInjector)}},Rc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Gg(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)($(et))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wg=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=vb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=vb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=_b(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _b(e,this._root).map(t=>t.value)}};function vb(n,e){if(n===e.value)return e;for(let t of e.children){let r=vb(n,t);if(r)return r}return null}function _b(n,e){if(n===e.value)return[e];for(let t of e.children){let r=_b(n,t);if(r.length)return r.unshift(e),r}return[]}var Cn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ic(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Zl=class extends Wg{snapshot;constructor(e,t){super(e),this.snapshot=t,Sb(this,e)}toString(){return this.snapshot.toString()}};function Lk(n){let e=Q6(n),t=new Nt([new _o("",{})]),r=new Nt({}),i=new Nt({}),o=new Nt({}),s=new Nt(""),a=new bi(t,r,o,s,i,fe,n,e.root);return a.snapshot=e.root,new Zl(new Cn(a,[]),e)}function Q6(n){let e={},t={},r={},i="",o=new Ns([],e,r,i,t,fe,n,null,{});return new Jl("",new Cn(o,[]))}var bi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ie(l=>l[nd]))??z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>Ms(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>Ms(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Kg(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&jk(i)&&(r.resolve[nd]=i.title),r}var Ns=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[nd]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ms(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ms(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Jl=class extends Wg{url;constructor(e,t){super(t),this.url=e,Sb(this,t)}toString(){return Vk(this._root)}};function Sb(n,e){e.value._routerState=n,e.children.forEach(t=>Sb(n,t))}function Vk(n){let e=n.children.length>0?` { ${n.children.map(Vk).join(", ")} } `:"";return`${n.value}${e}`}function db(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,jr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),jr(e.params,t.params)||n.paramsSubject.next(t.params),w6(e.url,t.url)||n.urlSubject.next(t.url),jr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Eb(n,e){let t=jr(n.params,e.params)&&C6(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Eb(n.parent,e.parent))}function jk(n){return typeof n.title=="string"||n.title===null}var Uk=new U(""),Ab=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=fe;activateEvents=new We;deactivateEvents=new We;attachEvents=new We;detachEvents=new We;routerOutletData=se(void 0);parentContexts=S(Rc);location=S(Ki);changeDetector=S(Yi);inputBinder=S(Jg,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Ib(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=le({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[kn]})}return n})(),Ib=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===bi?this.route:e===Rc?this.childContexts:e===Uk?this.outletData:this.parent.get(e,t)}},Jg=new U("");var Rb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=ue({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Oe(0,"router-outlet")},dependencies:[Ab],encapsulation:2})}return n})();function Nb(n){let e=n.children&&n.children.map(Nb),t=e?Z(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=Rb),t}function Y6(n,e,t){let r=Xl(n,e._root,t?t._root:void 0);return new Zl(r,e)}function Xl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Z6(n,e,t);return new Cn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Xl(n,a)),s}}let r=J6(e.value),i=e.children.map(o=>Xl(n,o));return new Cn(r,i)}}function Z6(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xl(n,r,i);return Xl(n,r)})}function J6(n){return new bi(new Nt(n.url),new Nt(n.params),new Nt(n.queryParams),new Nt(n.fragment),new Nt(n.data),n.outlet,n.component,n)}var Cc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Bk="ngNavigationCancelingError";function Qg(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Eo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$k(!1,on.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function $k(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Bk]=!0,t.cancellationCode=e,t}function X6(n){return Hk(n)&&Eo(n.url)}function Hk(n){return!!n&&n[Bk]}var e8=(n,e,t,r)=>ie(i=>(new wb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),wb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),db(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ic(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ic(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ic(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ic(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new zg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Hg(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(db(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),db(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Yg=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Dc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function t8(n,e,t){let r=n._root,i=e?e._root:null;return Hl(r,i,t,[r.value])}function n8(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Nc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!xy(n)?n:e.get(n):r}function Hl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ic(e);return n.children.forEach(s=>{r8(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Gl(a,t.getContext(s),i)),i}function r8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=i8(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Yg(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Hl(n,e,a?a.children:null,r,i):Hl(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Dc(a.outlet.component,s))}else s&&Gl(e,a,i),i.canActivateChecks.push(new Yg(r)),o.component?Hl(n,null,a?a.children:null,r,i):Hl(n,null,t,r,i);return i}function i8(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Rs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rs(n.url,e.url)||!jr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eb(n,e)||!jr(n.queryParams,e.queryParams);case"paramsChange":default:return!Eb(n,e)}}function Gl(n,e,t){let r=Ic(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Gl(s,e.children.getContext(o),t):Gl(s,null,t):Gl(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Dc(e.outlet.component,i)):t.canDeactivateChecks.push(new Dc(null,i)):t.canDeactivateChecks.push(new Dc(null,i))}function id(n){return typeof n=="function"}function o8(n){return typeof n=="boolean"}function s8(n){return n&&id(n.canLoad)}function a8(n){return n&&id(n.canActivate)}function c8(n){return n&&id(n.canActivateChild)}function u8(n){return n&&id(n.canDeactivate)}function l8(n){return n&&id(n.canMatch)}function qk(n){return n instanceof Wr||n?.name==="EmptyError"}var Ng=Symbol("INITIAL_VALUE");function Sc(){return qt(n=>hh(n.map(e=>e.pipe(An(1),_y(Ng)))).pipe(ie(e=>{for(let t of e)if(t!==!0){if(t===Ng)return Ng;if(t===!1||d8(t))return t}return!0}),cn(e=>e!==Ng),An(1)))}function d8(n){return Eo(n)||n instanceof Cc}function h8(n,e){return st(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?z(Z(P({},t),{guardsResult:!0})):f8(s,r,i,n).pipe(st(a=>a&&o8(a)?p8(r,o,n,e):z(a)),ie(a=>Z(P({},t),{guardsResult:a})))})}function f8(n,e,t,r){return Le(n).pipe(st(i=>_8(i.component,i.route,t,e,r)),Qr(i=>i!==!0,!0))}function p8(n,e,t,r){return Le(e).pipe(Po(i=>na(m8(i.route.parent,r),g8(i.route,r),v8(n,i.path,t),y8(n,i.route,t))),Qr(i=>i!==!0,!0))}function g8(n,e){return n!==null&&e&&e(new qg(n)),z(!0)}function m8(n,e){return n!==null&&e&&e(new $g(n)),z(!0)}function y8(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let i=r.map(o=>lu(()=>{let s=Ac(e)??t,a=Nc(o,s),u=a8(a)?a.canActivate(e,n):mt(s,()=>a(e,n));return Ti(u).pipe(Qr())}));return z(i).pipe(Sc())}function v8(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>n8(s)).filter(s=>s!==null).map(s=>lu(()=>{let a=s.guards.map(u=>{let l=Ac(s.node)??t,h=Nc(u,l),p=c8(h)?h.canActivateChild(r,n):mt(l,()=>h(r,n));return Ti(p).pipe(Qr())});return z(a).pipe(Sc())}));return z(o).pipe(Sc())}function _8(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return z(!0);let s=o.map(a=>{let u=Ac(e)??i,l=Nc(a,u),h=u8(l)?l.canDeactivate(n,e,t,r):mt(u,()=>l(n,e,t,r));return Ti(h).pipe(Qr())});return z(s).pipe(Sc())}function E8(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return z(!0);let o=i.map(s=>{let a=Nc(s,n),u=s8(a)?a.canLoad(e,t):mt(n,()=>a(e,t));return Ti(u)});return z(o).pipe(Sc(),zk(r))}function zk(n){return cy(Ge(e=>{if(typeof e!="boolean")throw Qg(n,e)}),ie(e=>e===!0))}function I8(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return z(!0);let o=i.map(s=>{let a=Nc(s,n),u=l8(a)?a.canMatch(e,t):mt(n,()=>a(e,t));return Ti(u)});return z(o).pipe(Sc(),zk(r))}var ed=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},td=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ec(n){return ea(new ed(n))}function w8(n){return ea(new j(4e3,!1))}function D8(n){return ea($k(!1,on.GuardRejected))}var Db=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return z(r);if(i.numberOfChildren>1||!i.children[fe])return w8(`${e.redirectTo}`);i=i.children[fe]}}applyRedirectCommands(e,t,r,i,o){return b8(t,i,o).pipe(ie(s=>{if(s instanceof Br)throw new td(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new td(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Br(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Te(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function b8(n,e,t){if(typeof n=="string")return z(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Ti(mt(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var bb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function T8(n,e,t,r,i){let o=Gk(n,e,t);return o.matched?(r=W6(e,r),I8(r,e,t,i).pipe(ie(s=>s===!0?o:P({},bb)))):z(o)}function Gk(n,e,t){if(e.path==="**")return C8(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},bb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Ik)(t,n,e);if(!i)return P({},bb);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function C8(n){return{matched:!0,parameters:n.length>0?Dk(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function vk(n,e,t,r){return t.length>0&&R8(n,t,r)?{segmentGroup:new Te(e,A8(r,new Te(t,n.children))),slicedSegments:[]}:t.length===0&&N8(n,t,r)?{segmentGroup:new Te(n.segments,S8(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Te(n.segments,n.children),slicedSegments:t}}function S8(n,e,t,r){let i={};for(let o of t)if(Xg(n,e,o)&&!r[ar(o)]){let s=new Te([],{});i[ar(o)]=s}return P(P({},r),i)}function A8(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&ar(r)!==fe){let i=new Te([],{});t[ar(r)]=i}return t}function R8(n,e,t){return t.some(r=>Xg(n,e,r)&&ar(r)!==fe)}function N8(n,e,t){return t.some(r=>Xg(n,e,r))}function Xg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function M8(n,e,t){return e.length===0&&!n.children[t]}var Tb=class{};function P8(n,e,t,r,i,o,s="emptyOnly"){return new Cb(n,e,t,r,i,s,o).recognize()}var x8=31,Cb=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Db(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=vk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(({children:t,rootSnapshot:r})=>{let i=new Cn(r,t),o=new Jl("",i),s=Pk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ns([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe(ie(r=>({children:r,rootSnapshot:t})),Kr(r=>{if(r instanceof td)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ed?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ie(s=>s instanceof Cn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Le(o).pipe(Po(s=>{let a=r.children[s],u=K6(t,s);return this.processSegmentGroup(e,u,a,s,i)}),vy((s,a)=>(s.push(...a),s)),Oi(null),yy(),st(s=>{if(s===null)return Ec(r);let a=Wk(s);return k8(a),z(a)}))}processSegment(e,t,r,i,o,s,a){return Le(t).pipe(Po(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Kr(l=>{if(l instanceof ed)return z(null);throw l}))),Qr(u=>!!u),Kr(u=>{if(qk(u))return M8(r,i,o)?z(new Tb):Ec(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return ar(r)!==s&&(s===fe||!Xg(i,o,r))?Ec(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Ec(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=Gk(t,i,o);if(!u)return Ec(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>x8&&(this.allowRedirects=!1));let y=new Ns(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,_k(i),ar(i),i.component??i._loadedComponent??null,i,Ek(i)),I=Kg(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(I.params),y.data=Object.freeze(I.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(qt(N=>this.applyRedirects.lineralizeSegments(i,N)),st(N=>this.processSegment(e,r,t,N.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=T8(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(qt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(qt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,I=new Ns(g,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,_k(r),ar(r),r.component??r._loadedComponent??null,r,Ek(r)),A=Kg(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(A.params),I.data=Object.freeze(A.data);let{segmentGroup:N,slicedSegments:k}=vk(t,g,y,l);if(k.length===0&&N.hasChildren())return this.processChildren(h,l,N,I).pipe(ie(Y=>new Cn(I,Y)));if(l.length===0&&k.length===0)return z(new Cn(I,[]));let H=ar(r)===o;return this.processSegment(h,l,N,k,H?fe:o,!0,I).pipe(ie(Y=>new Cn(I,Y instanceof Cn?[Y]:[])))}))):Ec(t)))}getChildConfig(e,t,r){return t.children?z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?z({routes:t._loadedRoutes,injector:t._loadedInjector}):E8(e,t,r,this.urlSerializer).pipe(st(i=>i?this.configLoader.loadChildren(e,t).pipe(Ge(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):D8(t))):z({routes:[],injector:e})}};function k8(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function O8(n){let e=n.value.routeConfig;return e&&e.path===""}function Wk(n){let e=[],t=new Set;for(let r of n){if(!O8(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Wk(r.children);e.push(new Cn(r.value,i))}return e.filter(r=>!t.has(r))}function _k(n){return n.data||{}}function Ek(n){return n.resolve||{}}function F8(n,e,t,r,i,o){return st(s=>P8(n,e,t,r,s.extractedUrl,i,o).pipe(ie(({state:a,tree:u})=>Z(P({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function L8(n,e){return st(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of Kk(u))s.add(l);let a=0;return Le(s).pipe(Po(u=>o.has(u)?V8(u,r,n,e):(u.data=Kg(u,u.parent,n).resolve,z(void 0))),Ge(()=>a++),ra(1),st(u=>a===s.size?z(t):sn))})}function Kk(n){let e=n.children.map(t=>Kk(t)).flat();return[n,...e]}function V8(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!jk(i)&&(o[nd]=i.title),lu(()=>(n.data=Kg(n,n.parent,t).resolve,j8(o,n,e,r).pipe(ie(s=>(n._resolvedData=s,n.data=P(P({},n.data),s),null)))))}function j8(n,e,t,r){let i=pb(n);if(i.length===0)return z({});let o={};return Le(i).pipe(st(s=>U8(n[s],e,t,r).pipe(Qr(),Ge(a=>{if(a instanceof Cc)throw Qg(new Ps,a);o[s]=a}))),ra(1),ie(()=>o),Kr(s=>qk(s)?sn:ea(s)))}function U8(n,e,t,r){let i=Ac(e)??r,o=Nc(n,i),s=o.resolve?o.resolve(e,t):mt(i,()=>o(e,t));return Ti(s)}function hb(n){return qt(e=>{let t=n(e);return t?Le(t).pipe(ie(()=>e)):z(e)})}var Mb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[nd]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>S(Qk),providedIn:"root"})}return n})(),Qk=(()=>{class n extends Mb{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)($(fk))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mc=new U("",{providedIn:"root",factory:()=>({})}),od=new U(""),Yk=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=S(X_);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ti(mt(t,()=>r.loadComponent())).pipe(ie(Jk),Ge(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),du(()=>{this.componentLoaders.delete(r)})),o=new Ys(i,()=>new Xe).pipe(Qs());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Zk(r,this.compiler,t,this.onLoadEndListener).pipe(du(()=>{this.childrenLoaders.delete(r)})),s=new Ys(o,()=>new Xe).pipe(Qs());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zk(n,e,t,r){return Ti(mt(t,()=>n.loadChildren())).pipe(ie(Jk),st(i=>i instanceof Af||Array.isArray(i)?z(i):Le(e.compileModuleAsync(i))),ie(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(od,[],{optional:!0,self:!0}).flat()),{routes:s.map(Nb),injector:o}}))}function B8(n){return n&&typeof n=="object"&&"default"in n}function Jk(n){return B8(n)?n.default:n}var em=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>S($8),providedIn:"root"})}return n})(),$8=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Xk=new U("");var Pb=new U(""),eO=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Xe;transitionAbortWithErrorSubject=new Xe;configLoader=S(Yk);environmentInjector=S(et);destroyRef=S(Mt);urlSerializer=S(rd);rootContexts=S(Rc);location=S($a);inputBindingEnabled=S(Jg,{optional:!0})!==null;titleStrategy=S(Mb);options=S(Mc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=S(em);createViewTransition=S(Xk,{optional:!0});navigationErrorHandler=S(Pb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>z(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Ug(i)),r=i=>this.events.next(new Bg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Z(P({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new Nt(null),this.transitions.pipe(cn(r=>r!==null),qt(r=>{let i=!1;return z(r).pipe(qt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",on.SupersededByNewNavigation),sn;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Z(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let u="";return this.events.next(new Di(o.id,this.urlSerializer.serialize(o.rawUrl),u,Kl.IgnoredSameUrlNavigation)),o.resolve(!1),sn}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return z(o).pipe(qt(u=>(this.events.next(new xs(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?sn:Promise.resolve(u))),F8(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=Z(P({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new Ql(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new xs(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let I=Lk(this.rootComponentType).snapshot;return this.currentTransition=r=Z(P({},o),{targetSnapshot:I,urlAfterRedirects:l,extras:Z(P({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,z(r)}else{let u="";return this.events.next(new Di(o.id,this.urlSerializer.serialize(o.extractedUrl),u,Kl.IgnoredByUrlHandlingStrategy)),o.resolve(!1),sn}}),Ge(o=>{let s=new Fg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ie(o=>(this.currentTransition=r=Z(P({},o),{guards:t8(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),h8(this.environmentInjector,o=>this.events.next(o)),Ge(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Qg(this.urlSerializer,o.guardsResult);let s=new Lg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),cn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",on.GuardRejected),!1)),hb(o=>{if(o.guards.canActivateChecks.length!==0)return z(o).pipe(Ge(s=>{let a=new Vg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),qt(s=>{let a=!1;return z(s).pipe(L8(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",on.NoDataFromResolver)}}))}),Ge(s=>{let a=new jg(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),hb(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=Ac(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(Ge(h=>{a.component=h}),ie(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return hh(s(o.targetSnapshot.root)).pipe(Oi(null),An(1))}),hb(()=>this.afterPreactivation()),qt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Le(a).pipe(ie(()=>r)):z(r)}),ie(o=>{let s=Y6(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Z(P({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),Ge(()=>{this.events.next(new Yl)}),e8(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),An(1),ph(new he(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(cn(()=>!i&&!r.targetRouterState),Ge(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",on.Aborted)}))),Ge({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new cr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),ph(this.transitionAbortWithErrorSubject.pipe(Ge(o=>{throw o}))),du(()=>{i||this.cancelNavigationTransition(r,"",on.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Kr(o=>{if(this.destroyed)return r.resolve(!1),sn;if(i=!0,Hk(o))this.events.next(new Ur(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),X6(o)?this.events.next(new Tc(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new bc(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=mt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Cc){let{message:u,cancellationCode:l}=Qg(this.urlSerializer,a);this.events.next(new Ur(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Tc(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return sn}))}))}cancelNavigationTransition(t,r,i){let o=new Ur(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function H8(n){return n!==zl}var tO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>S(q8),providedIn:"root"})}return n})(),Zg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},q8=(()=>{class n extends Zg{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nO=(()=>{class n{urlSerializer=S(rd);options=S(Mc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=S($a);urlHandlingStrategy=S(em);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Br;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Br?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=Lk(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>S(z8),providedIn:"root"})}return n})(),z8=(()=>{class n extends nO{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof xs?this.updateStateMemento():t instanceof Di?this.commitTransition(r):t instanceof Ql?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Yl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ur&&t.code!==on.SupersededByNewNavigation&&t.code!==on.Redirect?this.restoreHistory(r):t instanceof bc?this.restoreHistory(r,!0):t instanceof cr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=P(P({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=P(P({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xb(n,e){n.events.pipe(cn(t=>t instanceof cr||t instanceof Ur||t instanceof bc||t instanceof Di),ie(t=>t instanceof cr||t instanceof Di?0:(t instanceof Ur?t.code===on.Redirect||t.code===on.SupersededByNewNavigation:!1)?2:1),cn(t=>t!==2),An(1)).subscribe(()=>{e()})}var G8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},W8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ze=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=S(H_);stateManager=S(nO);options=S(Mc,{optional:!0})||{};pendingTasks=S(yr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=S(eO);urlSerializer=S(rd);location=S($a);urlHandlingStrategy=S(em);injector=S(et);_events=new Xe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=S(tO);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=S(od,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!S(Jg,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ze;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ur&&r.code!==on.Redirect&&r.code!==on.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof cr)this.navigated=!0;else if(r instanceof Tc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||H8(i.source)},s);this.scheduleNavigation(a,zl,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}G6(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=P({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Lt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Nb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=xk(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return kk(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Eo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,zl,null,r)}navigate(t,r={skipLocationChange:!1}){return K8(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},G8):r===!1?i=P({},W8):i=r,Eo(t))return pk(this.currentUrlTree,t,i);let o=this.parseUrl(t);return pk(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return xb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function K8(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}var $r=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ae(null);get href(){return en(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Xe;applicationErrorHandler=S(Lt);options=S(Mc,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(S(new Vf("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof cr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Eo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Eo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(W(Ze),W(bi),Uu("tabindex"),W(ln),W(Vt),W(Ba))};static \u0275dir=le({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&oe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ma("href",i.reactiveHref(),__)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Oa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Oa],replaceUrl:[2,"replaceUrl","replaceUrl",Oa],routerLink:"routerLink"},features:[kn]})}return n})(),Y8=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new We;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof cr&&this.update()})}ngAfterContentInit(){z(this.links.changes,z(null)).pipe(ta()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Le(t).pipe(ta()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Z8(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(W(Ze),W(Vt),W(ln),W(Yi),W($r,8))};static \u0275dir=le({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Q_(o,$r,5),r&2){let s;ns(s=rs())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[kn]})}return n})();function Z8(n){return!!n.paths}var J8=new U("");function X8(n,...e){return Wt([{provide:od,multi:!0,useValue:n},[],{provide:bi,useFactory:ez,deps:[Ze]},{provide:xf,multi:!0,useFactory:nz},e.map(t=>t.\u0275providers)])}function ez(n){return n.routerState.root}function tz(n,e){return{\u0275kind:n,\u0275providers:e}}function nz(){let n=S(Ve);return e=>{let t=n.get(oi);if(e!==t.components[0])return;let r=n.get(Ze),i=n.get(rz);n.get(iz)===1&&r.initialNavigation(),n.get(oz,null,{optional:!0})?.setUpPreloading(),n.get(J8,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var rz=new U("",{factory:()=>new Xe}),iz=new U("",{providedIn:"root",factory:()=>1});var oz=new U("");function sz(n){return tz(7,[{provide:Pb,useValue:n}])}var gn=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=le({type:n,selectors:[["button","pdHeaderButton",""]],hostAttrs:[1,"rounded-md","hover:bg-button-hover","text-header-contrast"],features:[Et([wr])]})};var Io=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=le({type:n,selectors:[["","pdTruncate",""]],hostAttrs:[1,"w-full","inline-block","truncate"]})};var cz=new Intl.RelativeTimeFormat("es",{numeric:"auto"});function sd(n){let e=new Date,t=n.getTime()-e.getTime(),r=uz(t);return cz.format(lz(t,r),r)}var Ob=60*1e3,Fb=60*Ob,Lb=24*Fb,Vb=7*Lb,jb=4*Vb,rO=jb*12;function uz(n){return n=Math.abs(n),n<Ob?"second":n<Fb?"minute":n<Lb?"hour":n<Vb?"day":n<jb?"week":n<rO?"month":"year"}function lz(n,e){return Math.round(e==="minute"?n/Ob:e==="hour"?n/Fb:e==="day"?n/Lb:e==="week"?n/Vb:e==="month"?n/jb:e==="year"?n/rO:n/1e3)}var tm=class n{transform(e){return e?(sd(e instanceof Date?e:new Date(e)),sd(new Date(e))):"Sin informaci\xF3n"}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=Aa({name:"relDate",type:n,pure:!0})};var dz=["pdHeaderBackButton",""],Hr=class n{back=ut();onClick(e){this.back.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["button","pdHeaderBackButton",""]],hostAttrs:["title","Volver","aria-label","Volver"],hostBindings:function(t,r){t&1&&oe("click",function(o){return r.onClick(o)})},outputs:{back:"back"},features:[Et([gn])],attrs:dz,decls:1,vars:0,consts:[["pdIcon","back"]],template:function(t,r){t&1&&Oe(0,"span",0)},dependencies:[St],encapsulation:2})};var ur=class n{get height(){return this.actualHeight()}double=Ae(!1);actualHeight=fn(()=>this.double()?"h-30":"h-14");static \u0275fac=function(t){return new(t||n)};static \u0275dir=le({type:n,selectors:[["","pdHeaderLayout",""]],hostAttrs:[1,"sticky","left-0","top-0","z-10","bg-header"],hostVars:2,hostBindings:function(t,r){t&2&&Y_(r.height)}})},nm=class n extends ur{constructor(){super(),this.double.set(!0)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=le({type:n,selectors:[["","pdDoubleHeaderLayout",""]],features:[Zt]})},jn=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=le({type:n,selectors:[["","pdHeaderContent",""]],hostAttrs:[1,"px-3","flex","flex-col","justify-center","gap-1","bg-header"]})},Un=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=le({type:n,selectors:[["","pdHeaderRow",""]],hostAttrs:[1,"flex","items-center","overflow-hidden","justify-between","gap-2","h-14"]})};var Pc=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=le({type:n,selectors:[["button","pdHeaderActionButton",""]],hostAttrs:[1,"hover:shadow-md","hover:shadow-black/20","shadow-black/40","rounded-full","bg-action","hover:bg-action-hover","text-header-contrast"],features:[Et([wr])]})};var hz=["pdDialog"],fz=["*"],xc=class n{dialog;dialogTitle=se("");confirm=ut();show(){this.dialog.nativeElement.showModal()}onConfirm(e){this.dialog.nativeElement.close(),this.confirm.emit(e)}ngOnDestroy(){this.dialog.nativeElement.close()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-dialog"]],viewQuery:function(t,r){if(t&1&&Ku(hz,7),t&2){let i;ns(i=rs())&&(r.dialog=i.first)}},inputs:{dialogTitle:[1,"dialogTitle"]},outputs:{confirm:"confirm"},ngContentSelectors:fz,decls:11,vars:1,consts:[["pdDialog",""],["closeBy","any",1,"backdrop:bg-neutral-500/20","fixed","top-1/3","left-1/2","-translate-x-1/2","w-fit","h-fit","max-w-screen-sm","shadow-lg/50","shadow-black/40","p-3","bg-white","dark:bg-neutral-700"],[1,"text-2xl","font-semibold","px-2","mb-4"],[1,"p-3"],[1,"flex","items-center","justify-end","gap-2","text-sm"],["pd-button","","type","button",1,"hover:bg-neutral-200","hover:dark:bg-neutral-600","bg-neutral-100","dark:bg-neutral-700","rounded-md",3,"click"],["pd-button","","autofocus","","type","button",1,"hover:bg-neutral-200","hover:dark:bg-neutral-600","bg-neutral-300","dark:bg-neutral-800","rounded-md",3,"click"]],template:function(t,r){if(t&1){let i=hn();Gu(),K(0,"dialog",1,0)(2,"h1",2),ye(3),q(),K(4,"div",3),Wu(5),q(),K(6,"form",4)(7,"button",5),oe("click",function(s){return nt(i),rt(r.onConfirm(s))}),ye(8," S\xED "),q(),K(9,"button",6),oe("click",function(s){return nt(i),is(1).close(),rt(s.stopPropagation())}),ye(10," No "),q()()()}t&2&&(te(3),Ke(" ",r.dialogTitle()," "))},dependencies:[wr],encapsulation:2})};var pz=()=>["/prompts/create"];function gz(n,e){if(n&1){let t=hn();K(0,"button",14),oe("click",function(){nt(t),wn();let i=is(17);return rt(i.show())}),Oe(1,"span",15),q(),Oe(2,"button",16)}n&2&&(te(2),Re("routerLink",Qu(1,pz)))}var iO=class n{constructor(e){this.router=e;let t=this.router.parseUrl(this.router.lastSuccessfulNavigation?.initialUrl?.toString()||"/");this.lastName=this.router.lastSuccessfulNavigation?.extras.state?.name||"",this.lastParams=t.queryParams,this.lastUrl=t.toString().split("?")[0]||"/"}adminService=S(vo);isAdmin$=this.adminService.isCurrentUserAdmin();lastUrl;lastParams;lastName;titulo=se("Elemento");subtitulo=se("Informaci\xF3n detallada del elemento");copyPrompt=ut();share=ut();delete=ut();onCopyPrompt(e){this.copyPrompt.emit(e)}onBack(e){if(e.stopPropagation(),this.lastName){this.router.navigate([this.lastUrl],{queryParams:this.lastParams,state:{name:this.lastName}});return}else this.router.navigate([this.lastUrl],{queryParams:this.lastParams})}onShare(e){this.share.emit(e)}onDelete(e){e.stopPropagation(),this.delete.emit(e)}static \u0275fac=function(t){return new(t||n)(W(Ze))};static \u0275cmp=ue({type:n,selectors:[["pd-detail-header"],["","pd-detail-header",""]],inputs:{titulo:[1,"titulo"],subtitulo:[1,"subtitulo"]},outputs:{copyPrompt:"copyPrompt",share:"share",delete:"delete"},features:[Et([nm])],decls:19,vars:7,consts:[["confirmar",""],["pdHeaderContent",""],["pdHeaderRow","",1,"-mb-2"],["pdHeaderBackButton","",3,"back"],[1,"w-full"],[1,"flex","items-center"],["pdHeaderButton","","title","Copiar el prompt","aria-label","Copiar el prompt",3,"click"],["pdIcon","copy"],["pdHeaderButton","","title","Compartir el prompt","aria-label","Compartir el prompt",3,"click"],["pdIcon","share"],[1,"overflow-hidden","w-full","px-3"],["pdTruncate","",1,"text-header-contrast","text-[1.75rem]/9",3,"title"],["pdTruncate","",1,"text-header-low-contrast","text-sm",3,"title"],["dialogTitle","Eliminar",3,"confirm"],["pdHeaderButton","","title","Eliminar el prompt","aria-label","Eliminar el prompt",1,"ml-4",3,"click"],["pdIcon","delete"],["pdHeaderActionButton","","title","Agregar","aria-label","Agregar","pdIcon","add",1,"ml-4","mr-2",3,"routerLink"]],template:function(t,r){if(t&1){let i=hn();K(0,"div",1)(1,"div",2)(2,"button",3),oe("back",function(s){return nt(i),rt(r.onBack(s))}),q(),Oe(3,"div",4),K(4,"div",5)(5,"button",6),oe("click",function(s){return nt(i),rt(r.onCopyPrompt(s))}),Oe(6,"span",7),q(),K(7,"button",8),oe("click",function(s){return nt(i),rt(r.onShare(s))}),Oe(8,"span",9),q(),Zn(9,gz,3,2),ai(10,"async"),q()(),K(11,"div",10)(12,"h1",11),ye(13),q(),K(14,"div",12),ye(15),q()()(),K(16,"pd-dialog",13,0),oe("confirm",function(s){return nt(i),rt(r.onDelete(s))}),ye(18," Eliminar\xE1 definitivamente el elemento, desea continuar? "),q()}t&2&&(te(9),Jn(ci(10,5,r.isAdmin$)?9:-1),te(3),Re("title",r.titulo()),te(),Ke(" ",r.titulo()," "),te(),Re("title",r.subtitulo()),te(),Ke(" ",r.subtitulo()," "))},dependencies:[St,gn,Hr,jn,Un,Io,Pc,$r,xc,us],encapsulation:2})};var rm=class n{modeService=S(Hf);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-mode-toggle"]],decls:1,vars:1,consts:[["pdHeaderButton","",3,"click","pdIcon"]],template:function(t,r){t&1&&(K(0,"button",0),oe("click",function(){return r.modeService.toggle()}),q()),t&2&&Re("pdIcon",r.modeService.darkMode()?"dark-mode":"light-mode")},dependencies:[St,gn],encapsulation:2})};var fO=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(W(ln),W(Vt))};static \u0275dir=le({type:n})}return n})(),Gb=(()=>{class n extends fO{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275dir=le({type:n,features:[Zt]})}return n})(),hd=new U("");var mz={provide:hd,useExisting:Nn(()=>pm),multi:!0};function yz(){let n=On()?On().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var vz=new U(""),pm=(()=>{class n extends fO{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!yz())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(W(ln),W(Vt),W(vz,8))};static \u0275dir=le({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&oe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[si([mz]),Zt]})}return n})();function Wb(n){return n==null||Kb(n)===0}function Kb(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var gm=new U(""),Qb=new U(""),_z=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,oO=class{static min(e){return Ez(e)}static max(e){return Iz(e)}static required(e){return pO(e)}static requiredTrue(e){return wz(e)}static email(e){return Dz(e)}static minLength(e){return bz(e)}static maxLength(e){return Tz(e)}static pattern(e){return Cz(e)}static nullValidator(e){return om()}static compose(e){return EO(e)}static composeAsync(e){return wO(e)}};function Ez(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Iz(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function pO(n){return Wb(n.value)?{required:!0}:null}function wz(n){return n.value===!0?null:{required:!0}}function Dz(n){return Wb(n.value)||_z.test(n.value)?null:{email:!0}}function bz(n){return e=>{let t=e.value?.length??Kb(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function Tz(n){return e=>{let t=e.value?.length??Kb(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function Cz(n){if(!n)return om;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Wb(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function om(n){return null}function gO(n){return n!=null}function mO(n){return ii(n)?Le(n):n}function yO(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function vO(n,e){return e.map(t=>t(n))}function Sz(n){return!n.validate}function _O(n){return n.map(e=>Sz(e)?e:t=>e.validate(t))}function EO(n){if(!n)return null;let e=n.filter(gO);return e.length==0?null:function(t){return yO(vO(t,e))}}function IO(n){return n!=null?EO(_O(n)):null}function wO(n){if(!n)return null;let e=n.filter(gO);return e.length==0?null:function(t){let r=vO(t,e).map(mO);return gy(r).pipe(ie(yO))}}function DO(n){return n!=null?wO(_O(n)):null}function sO(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bO(n){return n._rawValidators}function TO(n){return n._rawAsyncValidators}function Ub(n){return n?Array.isArray(n)?n:[n]:[]}function sm(n,e){return Array.isArray(n)?n.includes(e):n===e}function aO(n,e){let t=Ub(e);return Ub(n).forEach(i=>{sm(t,i)||t.push(i)}),t}function cO(n,e){return Ub(e).filter(t=>!sm(n,t))}var am=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=IO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Lc=class extends am{name;get formDirective(){return null}get path(){return null}},ks=class extends am{_parent=null;name=null;valueAccessor=null},cm=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Az={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ife=Z(P({},Az),{"[class.ng-submitted]":"isSubmitted"}),CO=(()=>{class n extends cm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(W(ks,2))};static \u0275dir=le({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Xt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Zt]})}return n})(),wfe=(()=>{class n extends cm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(W(Lc,10))};static \u0275dir=le({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Xt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Zt]})}return n})();var cd="VALID",im="INVALID",kc="PENDING",ud="DISABLED",wo=class{},um=class extends wo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ld=class extends wo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},dd=class extends wo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Oc=class extends wo{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Bb=class extends wo{source;constructor(e){super(),this.source=e}},$b=class extends wo{source;constructor(e){super(),this.source=e}};function Yb(n){return(mm(n)?n.validators:n)||null}function Rz(n){return Array.isArray(n)?IO(n):n||null}function Zb(n,e){return(mm(e)?e.asyncValidators:n)||null}function Nz(n){return Array.isArray(n)?DO(n):n||null}function mm(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function SO(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[t])throw new j(1001,"")}function AO(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new j(1002,"")})}var Vc=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return en(this.statusReactive)}set status(e){en(()=>this.statusReactive.set(e))}_status=fn(()=>this.statusReactive());statusReactive=Ae(void 0);get valid(){return this.status===cd}get invalid(){return this.status===im}get pending(){return this.status==kc}get disabled(){return this.status===ud}get enabled(){return this.status!==ud}errors;get pristine(){return en(this.pristineReactive)}set pristine(e){en(()=>this.pristineReactive.set(e))}_pristine=fn(()=>this.pristineReactive());pristineReactive=Ae(!0);get dirty(){return!this.pristine}get touched(){return en(this.touchedReactive)}set touched(e){en(()=>this.touchedReactive.set(e))}_touched=fn(()=>this.touchedReactive());touchedReactive=Ae(!1);get untouched(){return!this.touched}_events=new Xe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(aO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(aO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cO(e,this._rawAsyncValidators))}hasValidator(e){return sm(this._rawValidators,e)}hasAsyncValidator(e){return sm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Z(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new dd(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new dd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Z(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ld(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ld(!0,r))}markAsPending(e={}){this.status=kc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Oc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Z(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ud,this.errors=null,this._forEachChild(i=>{i.disable(Z(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new um(this.value,r)),this._events.next(new Oc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=cd,this._forEachChild(r=>{r.enable(Z(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Z(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cd||this.status===kc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new um(this.value,t)),this._events.next(new Oc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Z(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ud:cd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=kc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=mO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Oc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new We,this.statusChanges=new We}_calculateStatus(){return this._allControlsDisabled()?ud:this.errors?im:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kc)?kc:this._anyControlsHaveStatus(im)?im:cd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ld(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new dd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Rz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Nz(this._rawAsyncValidators)}},lm=class extends Vc{constructor(e,t,r){super(Yb(t),Zb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){AO(this,!0,e),Object.keys(e).forEach(r=>{SO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Hb=class extends lm{};var Jb=new U("",{providedIn:"root",factory:()=>Xb}),Xb="always";function Mz(n,e){return[...e.path,n]}function qb(n,e,t=Xb){eT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),xz(n,e),Oz(n,e),kz(n,e),Pz(n,e)}function dm(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),fm(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function hm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Pz(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function eT(n,e){let t=bO(n);e.validator!==null?n.setValidators(sO(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=TO(n);e.asyncValidator!==null?n.setAsyncValidators(sO(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();hm(e._rawValidators,i),hm(e._rawAsyncValidators,i)}function fm(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=bO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=TO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return hm(e._rawValidators,r),hm(e._rawAsyncValidators,r),t}function xz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&RO(n,e)})}function kz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&RO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function RO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Oz(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Fz(n,e){n==null,eT(n,e)}function Lz(n,e){return fm(n,e)}function NO(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Vz(n){return Object.getPrototypeOf(n.constructor)===Gb}function jz(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function MO(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===pm?t=o:Vz(o)?r=o:i=o}),i||r||t||null}function Uz(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function uO(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function lO(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Fc=class extends Vc{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Yb(t),Zb(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(lO(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){uO(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){uO(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){lO(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Bz=n=>n instanceof Fc;var bfe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=le({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var tT=new U(""),$z={provide:ks,useExisting:Nn(()=>nT)},nT=(()=>{class n extends ks{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new We;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=MO(this,i)}ngOnChanges(t){if(this._isControlChanged(t)){let r=t.form.previousValue;r&&dm(r,this,!1),qb(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}NO(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&dm(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(W(gm,10),W(Qb,10),W(hd,10),W(tT,8),W(Jb,8))};static \u0275dir=le({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[si([$z]),Zt,kn]})}return n})(),Hz={provide:Lc,useExisting:Nn(()=>qz)},qz=(()=>{class n extends Lc{callSetDisabledState;get submitted(){return en(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=fn(()=>this._submittedReactive());_submittedReactive=Ae(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new We;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(fm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return qb(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){dm(t.control||null,t,!1),Uz(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),jz(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Bb(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new $b(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(dm(r||null,t),Bz(i)&&(qb(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Fz(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&Lz(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){eT(this.form,this),this._oldForm&&fm(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(W(gm,10),W(Qb,10),W(Jb,8))};static \u0275dir=le({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&oe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[si([Hz]),Zt,kn]})}return n})();var zz={provide:ks,useExisting:Nn(()=>Gz)},Gz=(()=>{class n extends ks{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new We;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=MO(this,o)}ngOnChanges(t){this._added||this._setUpControl(),NO(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Mz(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(W(Lc,13),W(gm,10),W(Qb,10),W(hd,10),W(tT,8))};static \u0275dir=le({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[si([zz]),Zt,kn]})}return n})();var Wz={provide:hd,useExisting:Nn(()=>xO),multi:!0};function PO(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Kz(n){return n.split(":")[0]}var xO=(()=>{class n extends Gb{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=S(oi).injector;appRefDestroyRef=this.appRefInjector.get(Mt);destroyRef=S(Mt);cdr=S(Yi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefDestroyRef.destroyed||(this._queuedWrite=!0,Nf({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=PO(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Kz(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275dir=le({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&oe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[si([Wz]),Zt]})}return n})(),Tfe=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(PO(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(W(Vt),W(ln),W(xO,9))};static \u0275dir=le({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Qz={provide:hd,useExisting:Nn(()=>kO),multi:!0};function dO(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Yz(n){return n.split(":")[0]}var kO=(()=>{class n extends Gb{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Yz(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275dir=le({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&oe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[si([Qz]),Zt]})}return n})(),Cfe=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(dO(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(dO(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(W(Vt),W(ln),W(kO,9))};static \u0275dir=le({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var Zz=(()=>{class n{_validator=om;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):om,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=le({type:n,features:[kn]})}return n})();var Jz={provide:gm,useExisting:Nn(()=>Xz),multi:!0};var Xz=(()=>{class n extends Zz{required;inputName="required";normalizeInput=Oa;createValidator=t=>pO;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275dir=le({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ma("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[si([Jz]),Zt]})}return n})();var eG=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ri({type:n});static \u0275inj=dr({})}return n})(),zb=class extends Vc{constructor(e,t,r){super(Yb(t),Zb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){AO(this,!1,e),e.forEach((r,i)=>{SO(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function hO(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Sfe=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return hO(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new lm(i,o)}record(t,r=null){let i=this._reduceControls(t);return new Hb(i,r)}control(t,r,i){let o={};return this.useNonNullable?(hO(r)?o=r:(o.validators=r,o.asyncValidators=i),new Fc(t,Z(P({},o),{nonNullable:!0}))):new Fc(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new zb(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Fc)return t;if(t instanceof Vc)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ym=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:tT,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Jb,useValue:t.callSetDisabledState??Xb}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ri({type:n});static \u0275inj=dr({imports:[eG]})}return n})();var vm=class n{router=S(Ze);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-placeholder-searcher"]],decls:2,vars:0,consts:[[1,"w-full",3,"click"],["type","text","readonly","","placeholder","Buscar prompts...","aria-label","Buscar prompts","aria-autocomplete","list","aria-haspopup","listbox","aria-controls","search-options","aria-activedescendant","search-option-active",1,"w-full","bg-search","ring-0","outline-0","text-search-contrast","placeholder:text-placeholder","placeholder:text-center","rounded-full","px-6","p-1.5"]],template:function(t,r){t&1&&(dn(0,"div",0),Pa("click",function(o){return o.stopPropagation(),r.router.navigate(["/searching"])}),Qi(1,"input",1),Jt())},dependencies:[ym],encapsulation:2})};var _m=class n{auth=S(gi);loginWithGoogle(){let e=new yI;return gM(this.auth,e).then(t=>t.user).catch(()=>null)}logout(){return mM(this.auth)}get currentUser$(){return new he(e=>({unsubscribe:this.auth.onAuthStateChanged(r=>e.next(r))}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var nG=()=>["/admin"];function rG(n,e){if(n&1){let t=hn();K(0,"span",8),ye(1),q(),K(2,"button",9),oe("click",function(){nt(t);let i=wn();return rt(i.logout())}),q(),Oe(3,"button",10)}n&2&&(te(),Ke(" ",e.email),te(2),Re("routerLink",Qu(2,nG)))}function iG(n,e){if(n&1){let t=hn();K(0,"button",11),oe("click",function(){nt(t);let i=wn();return rt(i.login())}),q()}}var OO=class n{open=ut();authService=S(_m);currentUser$=this.authService.currentUser$;onMainButtonClick(e){e.stopPropagation(),this.open.emit()}login(){this.authService.loginWithGoogle()}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-main-header"],["","pd-main-header",""]],outputs:{open:"open"},features:[Et([ur])],decls:12,vars:3,consts:[["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderButton","","title","Abrir men\xFA","aria-label","Abrir men\xFA","pdIcon","menu",1,"md:hidden",3,"click"],[1,"text-2xl/8","hidden","md:inline-flex","items-center","gap-0.5","text-contrast","font-mont-alt","font-semibold",2,"letter-spacing","0.07em"],["pdIcon","terminal",1,"scale-[115%]","text-lime-300"],[1,"w-full","max-w-[500px]"],[1,"flex","items-center","gap-2"],["pdHeaderButton","","title","Iniciar sesi\xF3n","aria-label","Iniciar sesi\xF3n","pdIcon","login"],[1,"text-contrast"],["pdHeaderButton","","title","Cerrar sesi\xF3n","aria-label","Cerrar sesi\xF3n","pdIcon","logout",3,"click"],["pdHeaderButton","","title","Admin","aria-label","Admin","pdIcon","terminal",1,"ml-4","mr-2",3,"routerLink"],["pdHeaderButton","","title","Iniciar sesi\xF3n","aria-label","Iniciar sesi\xF3n","pdIcon","login",3,"click"]],template:function(t,r){if(t&1&&(K(0,"div",0)(1,"div",1)(2,"button",2),oe("click",function(o){return r.onMainButtonClick(o)}),q(),K(3,"div",3),Oe(4,"span",4),ye(5," ARTIFICIALMENTE "),q(),Oe(6,"pd-placeholder-searcher",5),K(7,"div",6),Zn(8,rG,4,3),ai(9,"async"),qu(10,iG,1,0,"button",7),Oe(11,"pd-mode-toggle"),q()()()),t&2){let i;te(8),Jn((i=ci(9,1,r.currentUser$))?8:10,i)}},dependencies:[vm,rm,St,jn,Un,gn,$r,us],encapsulation:2})};var oG=["searchInput"],Em=class n{clear(e){e.stopPropagation(),this.searchControl.setValue(""),this.search.emit("")}searchInput;searchControl=new Fc("");search=ut();term=se("");onSearch(){this.search.emit(this.searchControl.value?.trim()??""),this.searchInput.nativeElement.blur()}ngAfterViewInit(){setTimeout(()=>{this.searchInput.nativeElement.focus()},20),this.searchControl.valueChanges.pipe(my(300)).subscribe(e=>{let t=e?.trim()??"";this.search.emit(t)}),this.searchControl.setValue(this.term())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-searcher"]],viewQuery:function(t,r){if(t&1&&Ku(oG,5),t&2){let i;ns(i=rs())&&(r.searchInput=i.first)}},inputs:{term:[1,"term"]},outputs:{search:"search"},decls:4,vars:1,consts:[["searchInput",""],[1,"w-full","flex","flex-row","items-center","gap-2"],["tabindex","0","type","text","autofocus","","placeholder","Buscar prompts...","aria-label","Buscar prompts","aria-autocomplete","list","aria-haspopup","listbox","aria-controls","search-options","aria-activedescendant","search-option-active",1,"w-full","text-primary-contrast","p-1.5","ring-0","outline-0","border-b-[1px]","border-dotted","border-b-contrast",3,"keydown.enter","formControl"],["pdHeaderButton","","title","Abrir men\xFA","aria-label","Abrir men\xFA","pdIcon","close",3,"click"]],template:function(t,r){if(t&1){let i=hn();K(0,"div",1)(1,"input",2,0),oe("keydown.enter",function(){return nt(i),rt(r.onSearch())}),q(),K(3,"button",3),oe("click",function(s){return nt(i),rt(r.clear(s))}),q()()}t&2&&(te(),Re("formControl",r.searchControl))},dependencies:[ym,pm,CO,nT,gn,St],encapsulation:2})};var FO=class n{router=S(Ze);search=ut();term=se("");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-search-header"],["","pd-search-header",""]],inputs:{term:[1,"term"]},outputs:{search:"search"},features:[Et([ur])],decls:4,vars:1,consts:[["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderBackButton","",3,"back"],[1,"w-full",3,"search","term"]],template:function(t,r){t&1&&(K(0,"div",0)(1,"div",1)(2,"button",2),oe("back",function(o){return r.onBack(o)}),q(),K(3,"pd-searcher",3),oe("search",function(o){return r.search.emit(o)}),q()()()),t&2&&(te(3),Re("term",r.term()))},dependencies:[jn,Un,Em,Hr],encapsulation:2})};function sG(n,e){if(n&1){let t=hn();K(0,"button",9),oe("click",function(){nt(t),wn();let i=is(11);return rt(i.show())}),Oe(1,"span",10),q()}if(n&2){let t=wn();Re("disabled",!t.enabled())}}var LO=class n{adminService=S(vo);isAdmin$=this.adminService.isCurrentUserAdmin();enabled=se(!1);delete=ut();router=S(Ze);titulo=se("");subtitulo=se("");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}onDelete(e){e.stopPropagation(),this.delete.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-section-header"],["","pd-section-header",""]],inputs:{enabled:[1,"enabled"],titulo:[1,"titulo"],subtitulo:[1,"subtitulo"]},outputs:{delete:"delete"},features:[Et([ur])],decls:13,vars:7,consts:[["confirmar",""],["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderBackButton","",3,"back"],[1,"overflow-hidden","w-full","flex","flex-col"],["pdTruncate","",1,"text-header-contrast","text-xl",3,"title"],[1,"text-header-low-contrast","text-sm",3,"title"],["pdHeaderButton","","title","Eliminar","aria-label","Eliminar",1,"ml-4","disabled:pointer-events-none","disabled:opacity-50",3,"disabled"],["dialogTitle","Eliminar",3,"confirm"],["pdHeaderButton","","title","Eliminar","aria-label","Eliminar",1,"ml-4","disabled:pointer-events-none","disabled:opacity-50",3,"click","disabled"],["pdIcon","delete"]],template:function(t,r){if(t&1){let i=hn();K(0,"div",1)(1,"div",2)(2,"button",3),oe("back",function(s){return nt(i),rt(r.onBack(s))}),q(),K(3,"div",4)(4,"h1",5),ye(5),q(),K(6,"div",6),ye(7),q()(),Zn(8,sG,2,1,"button",7),ai(9,"async"),q()(),K(10,"pd-dialog",8,0),oe("confirm",function(s){return nt(i),rt(r.onDelete(s))}),ye(12," Eliminar\xE1 definitivamente el elemento, desea continuar? "),q()}t&2&&(te(4),Re("title",r.titulo()),te(),Ke(" ",r.titulo()," "),te(),Re("title",r.subtitulo()),te(),Ke(" ",r.subtitulo()," "),te(),Jn(ci(9,5,r.isAdmin$)?8:-1))},dependencies:[gn,Hr,jn,Un,Io,St,xc,us],encapsulation:2})};var VO=class n{apply=ut();waiting=se(!1);enabled=se(!0);router=S(Ze);titulo=se("Tarea");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}onTaskButtonClicked(e){e.stopPropagation(),this.apply.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-task-header"]],inputs:{waiting:[1,"waiting"],enabled:[1,"enabled"],titulo:[1,"titulo"]},outputs:{apply:"apply"},features:[Et([ur])],decls:7,vars:5,consts:[["pdHeaderContent",""],["pdHeaderRow","",1,""],["pdHeaderBackButton","",3,"back"],["pdTruncate","",1,"text-header-contrast","text-2xl",3,"title"],[1,"spinner"],["pdHeaderActionButton","","title","Aceptar","aria-label","Aceptar","pdIcon","check",1,"mr-2","disabled:pointer-events-none","md:hidden","disabled:bg-neutral-500","dark:disabled:bg-neutral-600","transition-colors","duration-300",3,"click","disabled"]],template:function(t,r){t&1&&(K(0,"div",0)(1,"div",1)(2,"button",2),oe("back",function(o){return r.onBack(o)}),q(),K(3,"h1",3),ye(4),q(),Oe(5,"div",4),K(6,"button",5),oe("click",function(o){return r.onTaskButtonClicked(o)}),q()()()),t&2&&(te(3),Re("title",r.titulo()),te(),Ke(" ",r.titulo()," "),te(),Xt("spinner-show",r.waiting()),te(),Re("disabled",!r.enabled()||r.waiting()))},dependencies:[Hr,Pc,jn,Un,St,Io],encapsulation:2})};var Im=class n{textData=se.required({alias:"pdHighlightText"});partIndex=se.required();isHighlighted=fn(()=>this.partIndex()===this.textData().in);static \u0275fac=function(t){return new(t||n)};static \u0275dir=le({type:n,selectors:[["","pdHighlightText",""]],hostAttrs:[1,"whitespace-pre"],hostVars:2,hostBindings:function(t,r){t&2&&Xt("bg-resaltador",r.isHighlighted())},inputs:{textData:[1,"pdHighlightText","textData"],partIndex:[1,"partIndex"]}})};function aG(n,e){if(n&1&&(K(0,"span",1),ye(1),q()),n&2){let t=e.$implicit,r=e.$index,i=wn();Re("pdHighlightText",i.textData())("partIndex",r),te(),Ir(t)}}var jO=class n{textData=se.required();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-highlighted-text"]],inputs:{textData:[1,"textData"]},decls:3,vars:0,consts:[[1,"whitespace-nowrap","flex","flex-row","justify-start","items-center"],[3,"pdHighlightText","partIndex"]],template:function(t,r){t&1&&(K(0,"div",0),W_(1,aG,2,3,"span",1,G_),q()),t&2&&(te(),K_(r.textData().parts))},dependencies:[Im],encapsulation:2})};var cG=["pd-value-item",""],wm=class n{value=se(void 0,{alias:"pd-value-item"});valueText=fn(()=>{let e=this.value();return e==null?"Sin informaci\xF3n":Array.isArray(e)?e.length>0?e.join(", "):"Sin informaci\xF3n":typeof this.value()=="boolean"?this.value()?"S\xED":"No":e instanceof Qe?sd(e.toDate()):String(this.value())});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["","pd-value-item",""]],hostAttrs:[1,"text-md","text-inverse"],inputs:{value:[1,"pd-value-item","value"]},attrs:cG,decls:1,vars:1,template:function(t,r){t&1&&ye(0),t&2&&Ke("",r.valueText()," ")},encapsulation:2})};var uG=["pd-label-item",""],Dm=class n{text=se("",{alias:"pd-label-item"});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["","pd-label-item",""]],hostAttrs:[1,"text-sm","text-inverse","opacity-80"],inputs:{text:[1,"pd-label-item","text"]},attrs:uG,decls:1,vars:1,template:function(t,r){t&1&&ye(0),t&2&&Ke("",r.text()," ")},encapsulation:2})};var lG=["pd-key-value-item",""],UO=class n{label=se("");value=se(void 0);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["","pd-key-value-item",""]],hostAttrs:[1,"flex","flex-col","pt-1","pb-3","items-start","justify-center"],inputs:{label:[1,"label"],value:[1,"value"]},attrs:lG,decls:2,vars:2,consts:[[3,"pd-label-item"],[3,"pd-value-item"]],template:function(t,r){t&1&&Oe(0,"div",0)(1,"div",1),t&2&&(Re("pd-label-item",r.label()),te(),Re("pd-value-item",r.value()))},dependencies:[Dm,wm],encapsulation:2})};function dG(n,e){n&1&&(dn(0,"span",3),ye(1,"WARN"),Jt())}function hG(n,e){n&1&&(dn(0,"span",4),ye(1,"404"),Jt())}function fG(n,e){n&1&&(dn(0,"span",5),ye(1,"OK"),Jt())}var BO=class n{notificationService=S(Fa);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-notification"]],decls:8,vars:10,consts:[[1,"fixed","duration-200","m-auto","z-35","scale-0","left-0","right-0","w-fit","min-w-64","shadow-lg","shadow-black/30","dark:shadow-black/60","transition-all","ease-out"],[1,"rounded-lg","w-full","flex","bg-neutral-50","dark:bg-neutral-800","items-center","gap-4","p-3"],[1,"w-full","pl-1"],[1,"dark:text-amber-400","font-semibold","text-amber-600","p-0.5","px-1.5","rounded-lg"],[1,"dark:text-red-400","font-semibold","text-red-500","p-0.5","px-1.5","rounded-lg"],[1,"dark:text-green-300","font-semibold","text-green-800","p-0.5","px-1.5","rounded-lg"],[1,"fixed","top-0","left-0","z-30","bg-black/10","dark:bg-black/20","block","opacity-100","w-screen","h-screen"]],template:function(t,r){t&1&&(dn(0,"div",0)(1,"div",1)(2,"span",2),ye(3),Jt(),Zn(4,dG,2,0,"span",3)(5,hG,2,0,"span",4)(6,fG,2,0,"span",5),Jt()(),Qi(7,"div",6)),t&2&&(Xt("-bottom-8",!r.notificationService.showNotification())("bottom-18",r.notificationService.showNotification())("scale-100",r.notificationService.showNotification()),te(3),Ir(r.notificationService.notificationMessage().message),te(),Jn(r.notificationService.notificationMessage().type==="warn"?4:r.notificationService.notificationMessage().type==="404"?5:6),te(3),Xt("hidden",!r.notificationService.showNotification()))},encapsulation:2})};var $O=class n{quantity=se(0);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-quantity-bagde"]],hostAttrs:[1,"min-w-6","w-6","h-6","inline-flex","items-center","justify-center","rounded-full","bg-primary-light","text-primary-contrast","text-xs"],inputs:{quantity:[1,"quantity"]},decls:2,vars:1,template:function(t,r){t&1&&(dn(0,"span"),ye(1),Jt()),t&2&&(te(),Ir(r.quantity()))},encapsulation:2})};var jc=class n{store;catsSubs;tagsSubs;categories=Ae([]);tags=Ae([]);constructor(e){this.store=e,this.catsSubs=this.trackCategories(),this.tagsSubs=this.trackTags()}trackCategories(){let e=rn(this.store,"categories");return KD(e,t=>{t.docChanges().forEach(r=>{r.type==="added"&&this.categories.update(i=>[...i,P({id:r.doc.id},r.doc.data())]),r.type==="modified"&&this.categories.update(i=>{let o=i.findIndex(s=>s.id===r.doc.id);return o!==-1&&(i[o]=P({id:r.doc.id},r.doc.data())),[...i]}),r.type==="removed"&&this.categories.update(i=>i.filter(o=>o.id!==r.doc.id))})})}trackTags(){let e=rn(this.store,"tags");return KD(e,t=>{t.docChanges().forEach(r=>{r.type==="added"&&this.tags.update(i=>[...i,P({id:r.doc.id},r.doc.data())]),r.type==="modified"&&this.tags.update(i=>{let o=i.findIndex(s=>s.id===r.doc.id);return o!==-1&&(i[o]=P({id:r.doc.id},r.doc.data())),[...i]}),r.type==="removed"&&this.tags.update(i=>i.filter(o=>o.id!==r.doc.id))})})}async categoryNameBySlug(e){return this.categories().length>0?this.categories().find(t=>t.slug.toLowerCase()===e.toLowerCase()).name:await Ll(mo(rn(this.store,"categories"),yo("slug","==",e))).then(t=>{if(t.empty)throw new Error(`No se encontr\xF3 una categoria ${e} `);return t.docs[0].data().name})}async tagNameBySlug(e){return this.tags().length>0?this.tags().find(t=>t.slug.toLowerCase()===e.toLowerCase()).name:await Ll(mo(rn(this.store,"tags"),yo("slug","==",e))).then(t=>{if(t.empty)throw new Error(`No se encontr\xF3 un etiqueta ${e} `);return t.docs[0].data().name})}ngOnDestroy(){this.catsSubs?.(),this.tagsSubs?.()}static \u0275fac=function(t){return new(t||n)($(or))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function rT(n){let e=n.paramMap.get("id");if(!e)throw new Error("Route parameter 'id' is required");return e}var HO=class n{constructor(e,t,r){this.appDataService=e;this.navigationSerivce=t;this.router=r}async resolve(e,t){let r=rT(e);if(!r)throw new Error("Route parameter 'slug' is required");return this.appDataService.bySlug(r)}static \u0275fac=function(t){return new(t||n)($(vc),$(jc),$(Ze))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})},qO=class n{constructor(e,t,r){this.appDataService=e;this.navigationService=t;this.router=r}async resolve(e,t){let r=this.router.getCurrentNavigation()?.extras.state?.name??await this.navigationService.categoryNameBySlug(rT(e));if(r)return this.appDataService.byCategoryName(r);throw new Error("Route parameter 'slug' is required")}static \u0275fac=function(t){return new(t||n)($(vc),$(jc),$(Ze))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})},zO=class n{constructor(e,t,r){this.appDataService=e;this.navigationService=t;this.router=r}async resolve(e,t){let r=this.router.getCurrentNavigation()?.extras.state?.name??await this.navigationService.tagNameBySlug(rT(e));if(r)return this.appDataService.byTagName(r);throw new Error("Route parameter 'slug' is required")}static \u0275fac=function(t){return new(t||n)($(vc),$(jc),$(Ze))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function GO(n){return n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim()}function Mge(n,e,t=40){let r=GO(n),i=GO(e),o=r.indexOf(i);if(o===-1)return{parts:[n.slice(0,t)],highlightIndex:-1};let s=Math.floor(t/2),a=e.length,u=Math.max(0,o-s),l=Math.min(n.length,o+a+s),h=o<=s?0:u,p=o+a>=n.length-s?n.length:l,g=n.slice(h,o),y=n.slice(o,o+a),I=n.slice(o+a,p),A=[],N=-1;return g?(A.push(g),N=A.length):N=0,A.push(y),I&&A.push(I),{parts:A,highlightIndex:N}}var WO=class n{constructor(e,t){this.adminService=e;this.router=t}canActivate(e,t){return this.adminService.isCurrentUserAdmin().pipe(An(1),ie(r=>r?!0:this.router.createUrlTree(["/"])))}static \u0275fac=function(t){return new(t||n)($(vo),$(Ze))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var bm=class n{prompt=se({});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-promp-info"]],hostAttrs:[1,"md:flex","justify-end","items-center","text-inverse-low","hidden"],inputs:{prompt:[1,"prompt"]},decls:2,vars:4,template:function(t,r){t&1&&(ye(0),ai(1,"relDate")),t&2&&kf("",ci(1,2,r.prompt().fecha_creacion.toDate()),", ",r.prompt().autor)},dependencies:[tm],encapsulation:2})};var gG=(n,e)=>["/",n,e],mG=n=>({id:n});function yG(n,e){if(n&1&&(Oe(0,"pd-promp-info",1),K(1,"a",2)(2,"div",3),ye(3),q()(),K(4,"div",4)(5,"div",5),ye(6),q(),K(7,"div",6),ye(8),q()(),Oe(9,"pd-copy-actions",7)),n&2){let t=e,r=wn();Re("prompt",t),te(),Re("routerLink",J_(8,gG,r.promptUrl,t.slug))("state",Z_(11,mG,t.id)),te(2),Ke(" ",t.titulo," "),te(3),Ke(" ",t.prompt," "),te(2),Ir(t.descripcion),te(),Re("promptText",t.prompt)("promptUrl",r.baseUrl()+t.slug)}}function vG(n,e){n&1&&(K(0,"div",0),ye(1,"No prompt available"),q())}var KO=class n{promptUrl="prompt";basePath=S(Jf);baseUrl=Ae(window.location.origin+this.basePath+this.promptUrl+"/");visible=Ae(!1);prompt=se(null);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ue({type:n,selectors:[["pd-display-prompt"],["","pd-display-prompt",""]],hostAttrs:[1,"select-none","md:min-w-[16rem]","md:w-[24rem]","md:max-w-[36rem]","grow-1","relative","inline-block","group","px-2","py-4","shadow-md/30","shadow-black/40","dark:shadow-black/80","bg-card","hover:bg-card-hover","dark:hover:bg-card-hover/30","transition-colors","duration-150"],inputs:{prompt:[1,"prompt"]},decls:2,vars:1,consts:[[1,"no-prompt"],[1,"pb-4","px-2","text-xs",3,"prompt"],[3,"routerLink","state"],[1,"text-primary-dark","px-2","text-lg/6","font-titulo","opacity-85","group-hover:opacity-100",2,"text-wrap","balance"],[1,"relative","prompt","opacity-85","group-hover:opacity-100","text-prompt","transition-opacity","duration-150","px-2"],[1,"prompt-text","font-merri","font-[370]","py-3","leading-7","italic"],[1,"text-sm"],["tabindex","2",1,"absolute","bottom-3","right-5","pointer-events-none","transition-discrete","opacity-0","hidden","z-3","group-active:block","group-hover:block","group-focus:block","group-focus:opacity-100","group-hover:opacity-80","hover:opacity-100","transition-all","group-focus:pointer-events-auto","group-hover:pointer-events-auto",3,"promptText","promptUrl"]],template:function(t,r){if(t&1&&Zn(0,yG,10,13)(1,vG,2,0,"div",0),t&2){let i;Jn((i=r.prompt())?0:1,i)}},dependencies:[Tg,$r,bm],encapsulation:2})};export{P as a,Z as b,ie as c,cn as d,S as e,nt as f,rt as g,PF as h,Ae as i,te as j,W as k,ue as l,zA as m,GA as n,_j as o,Ej as p,Ma as q,Zn as r,Jn as s,wj as t,W_ as u,K_ as v,Re as w,K as x,q as y,Oe as z,hn as A,oe as B,wn as C,is as D,Xt as E,ye as F,Ir as G,Ke as H,Z_ as I,J_ as J,ai as K,ci as L,cU as M,fn as N,ut as O,se as P,kE as Q,Jf as R,pN as S,_$ as T,mN as U,p6 as V,fk as W,bi as X,Ab as Y,Ze as Z,$r as _,Y8 as $,X8 as aa,sz as ba,Fa as ca,Bf as da,$f as ea,Hf as fa,Zie as ga,moe as ha,yoe as ia,hce as ja,fce as ka,Fue as la,Lue as ma,vc as na,Wq as oa,hle as pa,vo as qa,ik as ra,iO as sa,pm as ta,oO as ua,CO as va,wfe as wa,bfe as xa,qz as ya,Gz as za,xO as Aa,Tfe as Ba,Cfe as Ca,Xz as Da,Sfe as Ea,ym as Fa,OO as Ga,FO as Ha,LO as Ia,VO as Ja,jO as Ka,UO as La,BO as Ma,$O as Na,jc as Oa,HO as Pa,qO as Qa,zO as Ra,Mge as Sa,WO as Ta,KO as Ua};
