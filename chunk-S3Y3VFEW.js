var bx=Object.defineProperty,Cx=Object.defineProperties;var Sx=Object.getOwnPropertyDescriptors;var JT=Object.getOwnPropertySymbols;var Dx=Object.prototype.hasOwnProperty,Ax=Object.prototype.propertyIsEnumerable;var XT=(t,e,n)=>e in t?bx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k=(t,e)=>{for(var n in e||={})Dx.call(e,n)&&XT(t,n,e[n]);if(JT)for(var n of JT(e))Ax.call(e,n)&&XT(t,n,e[n]);return t},Y=(t,e)=>Cx(t,Sx(e));function q(t){return typeof t=="function"}function Sg(t){return q(t?.lift)}function se(t){return e=>{if(Sg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ko(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Nl=Ko(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ji(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var je=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(o){e=o instanceof Nl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{eb(o)}catch(s){e=e??[],s instanceof Nl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Nl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)eb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ji(n,e)}remove(e){let{_finalizers:n}=this;n&&ji(n,e),e instanceof t&&e._removeParent(this)}};je.EMPTY=(()=>{let t=new je;return t.closed=!0,t})();var Dg=je.EMPTY;function Ml(t){return t instanceof je||t&&"closed"in t&&q(t.remove)&&q(t.add)&&q(t.unsubscribe)}function eb(t){q(t)?t():t.unsubscribe()}var En={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qo={setTimeout(t,e,...n){let{delegate:r}=Qo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Qo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Pl(t){Qo.setTimeout(()=>{let{onUnhandledError:e}=En;if(e)e(t);else throw t})}function dc(){}var tb=Ag("C",void 0,void 0);function nb(t){return Ag("E",void 0,t)}function rb(t){return Ag("N",t,void 0)}function Ag(t,e,n){return{kind:t,value:e,error:n}}var Ui=null;function Yo(t){if(En.useDeprecatedSynchronousErrorHandling){let e=!Ui;if(e&&(Ui={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ui;if(Ui=null,n)throw r}}else t()}function ib(t){En.useDeprecatedSynchronousErrorHandling&&Ui&&(Ui.errorThrown=!0,Ui.error=t)}var Bi=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ml(e)&&e.add(this)):this.destination=Mx}static create(e,n,r){return new Zo(e,n,r)}next(e){this.isStopped?Ng(rb(e),this):this._next(e)}error(e){this.isStopped?Ng(nb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ng(tb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Rx=Function.prototype.bind;function Rg(t,e){return Rx.call(t,e)}var Mg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){xl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){xl(r)}else xl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){xl(n)}}},Zo=class extends Bi{constructor(e,n,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&En.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rg(e.next,o),error:e.error&&Rg(e.error,o),complete:e.complete&&Rg(e.complete,o)}):i=e}this.destination=new Mg(i)}};function xl(t){En.useDeprecatedSynchronousErrorHandling?ib(t):Pl(t)}function Nx(t){throw t}function Ng(t,e){let{onStoppedNotification:n}=En;n&&Qo.setTimeout(()=>n(t,e))}var Mx={closed:!0,next:dc,error:Nx,complete:dc};function ne(t,e,n,r,i){return new Pg(t,e,n,r,i)}var Pg=class extends Bi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ae(t,e){return se((n,r)=>{let i=0;n.subscribe(ne(r,o=>{r.next(t.call(e,o,i++))}))})}function Ht(t,e){return se((n,r)=>{let i=0;n.subscribe(ne(r,o=>t.call(e,o,i++)&&r.next(o)))})}var Jo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yt(t){return t}function xg(...t){return kg(t)}function kg(t){return t.length===0?Yt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=xx(n)?n:new Zo(n,r,i);return Yo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ob(r),new r((i,o)=>{let s=new Zo({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Jo](){return this}pipe(...n){return kg(n)(this)}toPromise(n){return n=ob(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function ob(t){var e;return(e=t??En.Promise)!==null&&e!==void 0?e:Promise}function Px(t){return t&&q(t.next)&&q(t.error)&&q(t.complete)}function xx(t){return t&&t instanceof Bi||Px(t)&&Ml(t)}function Xo(){return se((t,e)=>{let n=null;t._refCount++;let r=ne(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var es=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Sg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je;let n=this.getSubject();e.add(this.source.subscribe(ne(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.EMPTY)}return e}refCount(){return Xo()(this)}};var sb=Ko(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new kl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new sb}next(n){Yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Dg:(this.currentObservers=null,o.push(n),new je(()=>{this.currentObservers=null,ji(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new kl(e,n),t})(),kl=class extends ze{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Dg}};var mt=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Og={now(){return(Og.delegate||Date).now()},delegate:void 0};var Ol=class extends je{constructor(e,n){super()}schedule(e,n=0){return this}};var hc={setInterval(t,e,...n){let{delegate:r}=hc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=hc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ts=class extends Ol{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return hc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&hc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ji(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ns=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ns.now=Og.now;var rs=class extends ns{constructor(e,n=ns.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Kr=new rs(ts),Lg=Kr;var Ll=class extends ts{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Vl=class extends rs{};var Vg=new Vl(Ll);var $t=new J(t=>t.complete());function Fl(t){return t&&q(t.schedule)}function ab(t){return t[t.length-1]}function jl(t){return q(ab(t))?t.pop():void 0}function Qr(t){return Fl(ab(t))?t.pop():void 0}function Fg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ub(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function cb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hi(t){return this instanceof Hi?(this.v=t,this):new Hi(t)}function lb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(E){return Promise.resolve(E).then(y,p)}}function a(y,E){r[y]&&(i[y]=function(D){return new Promise(function(R,x){o.push([y,D,R,x])>1||u(y,D)})},E&&(i[y]=E(i[y])))}function u(y,E){try{l(r[y](E))}catch(D){g(o[0][3],D)}}function l(y){y.value instanceof Hi?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,E){y(E),o.shift(),o.length&&u(o[0][0],o[0][1])}}function db(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof cb=="function"?cb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var is=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ul(t){return q(t?.then)}function Bl(t){return q(t[Jo])}function Hl(t){return Symbol.asyncIterator&&q(t?.[Symbol.asyncIterator])}function $l(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function kx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ql=kx();function zl(t){return q(t?.[ql])}function Gl(t){return lb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Hi(n.read());if(i)return yield Hi(void 0);yield yield Hi(r)}}finally{n.releaseLock()}})}function Wl(t){return q(t?.getReader)}function ke(t){if(t instanceof J)return t;if(t!=null){if(Bl(t))return Ox(t);if(is(t))return Lx(t);if(Ul(t))return Vx(t);if(Hl(t))return hb(t);if(zl(t))return Fx(t);if(Wl(t))return jx(t)}throw $l(t)}function Ox(t){return new J(e=>{let n=t[Jo]();if(q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Lx(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Vx(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Pl)})}function Fx(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function hb(t){return new J(e=>{Ux(t,e).catch(n=>e.error(n))})}function jx(t){return hb(Gl(t))}function Ux(t,e){var n,r,i,o;return ub(this,void 0,void 0,function*(){try{for(n=db(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function qt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Yr(t,e=0){return se((n,r)=>{n.subscribe(ne(r,i=>qt(r,t,()=>r.next(i),e),()=>qt(r,t,()=>r.complete(),e),i=>qt(r,t,()=>r.error(i),e)))})}function Zr(t,e=0){return se((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function fb(t,e){return ke(t).pipe(Zr(e),Yr(e))}function pb(t,e){return ke(t).pipe(Zr(e),Yr(e))}function gb(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function mb(t,e){return new J(n=>{let r;return qt(n,e,()=>{r=t[ql](),qt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function Kl(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{qt(n,e,()=>{let r=t[Symbol.asyncIterator]();qt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function yb(t,e){return Kl(Gl(t),e)}function vb(t,e){if(t!=null){if(Bl(t))return fb(t,e);if(is(t))return gb(t,e);if(Ul(t))return pb(t,e);if(Hl(t))return Kl(t,e);if(zl(t))return mb(t,e);if(Wl(t))return yb(t,e)}throw $l(t)}function Ve(t,e){return e?vb(t,e):ke(t)}function Z(...t){let e=Qr(t);return Ve(t,e)}function os(t,e){let n=q(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function jg(t){return!!t&&(t instanceof J||q(t.lift)&&q(t.subscribe))}var fr=Ko(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function _b(t){return t instanceof Date&&!isNaN(t)}var{isArray:Bx}=Array;function Hx(t,e){return Bx(e)?t(...e):t(e)}function ss(t){return ae(e=>Hx(t,e))}var{isArray:$x}=Array,{getPrototypeOf:qx,prototype:zx,keys:Gx}=Object;function Ql(t){if(t.length===1){let e=t[0];if($x(e))return{args:e,keys:null};if(Wx(e)){let n=Gx(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Wx(t){return t&&typeof t=="object"&&qx(t)===zx}function Yl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Zl(...t){let e=Qr(t),n=jl(t),{args:r,keys:i}=Ql(t);if(r.length===0)return Ve([],e);let o=new J(Kx(r,e,i?s=>Yl(i,s):Yt));return n?o.pipe(ss(n)):o}function Kx(t,e,n=Yt){return r=>{Ib(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Ib(e,()=>{let l=Ve(t[u],e),h=!1;l.subscribe(ne(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Ib(t,e,n){t?qt(n,t,e):e()}function Eb(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=D=>l<r?E(D):u.push(D),E=D=>{o&&e.next(D),l++;let R=!1;ke(n(D,h++)).subscribe(ne(e,x=>{i?.(x),o?y(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let x=u.shift();s?qt(e,s,()=>E(x)):E(x)}g()}catch(x){e.error(x)}}))};return t.subscribe(ne(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Ue(t,e,n=1/0){return q(e)?Ue((r,i)=>ae((o,s)=>e(r,o,i,s))(ke(t(r,i))),n):(typeof e=="number"&&(n=e),se((r,i)=>Eb(r,i,t,n)))}function as(t=1/0){return Ue(Yt,t)}function wb(){return as(1)}function cs(...t){return wb()(Ve(t,Qr(t)))}function fc(t){return new J(e=>{ke(t()).subscribe(e)})}function Ug(...t){let e=jl(t),{args:n,keys:r}=Ql(t),i=new J(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;ke(n[h]).subscribe(ne(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Yl(r,a):a),o.complete())}))}});return e?i.pipe(ss(e)):i}var Qx=["addListener","removeListener"],Yx=["addEventListener","removeEventListener"],Zx=["on","off"];function Bg(t,e,n,r){if(q(n)&&(r=n,n=void 0),r)return Bg(t,e,n).pipe(ss(r));let[i,o]=ek(t)?Yx.map(s=>a=>t[s](e,a,n)):Jx(t)?Qx.map(Tb(t,e)):Xx(t)?Zx.map(Tb(t,e)):[];if(!i&&is(t))return Ue(s=>Bg(s,e,n))(ke(t));if(!i)throw new TypeError("Invalid event target");return new J(s=>{let a=(...u)=>s.next(1<u.length?u:u[0]);return i(a),()=>o(a)})}function Tb(t,e){return n=>r=>t[n](e,r)}function Jx(t){return q(t.addListener)&&q(t.removeListener)}function Xx(t){return q(t.on)&&q(t.off)}function ek(t){return q(t.addEventListener)&&q(t.removeEventListener)}function bb(t=0,e,n=Lg){let r=-1;return e!=null&&(Fl(e)?n=e:r=e),new J(i=>{let o=_b(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function pr(t){return se((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ne(n,void 0,void 0,s=>{o=ke(t(s,pr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Cb(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ne(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function $i(t,e){return q(e)?Ue(t,e,1):Ue(t,1)}function Hg(t,e=Kr){return se((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}n.subscribe(ne(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Jr(t){return se((e,n)=>{let r=!1;e.subscribe(ne(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function gr(t){return t<=0?()=>$t:se((e,n)=>{let r=0;e.subscribe(ne(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Jl(t=tk){return se((e,n)=>{let r=!1;e.subscribe(ne(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function tk(){return new fr}function pc(t){return se((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function mr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ht((i,o)=>t(i,o,r)):Yt,gr(1),n?Jr(e):Jl(()=>new fr))}function us(t){return t<=0?()=>$t:se((e,n)=>{let r=[];e.subscribe(ne(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function $g(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ht((i,o)=>t(i,o,r)):Yt,us(1),n?Jr(e):Jl(()=>new fr))}function qg(t,e){return se(Cb(t,e,arguments.length>=2,!0))}function zg(...t){let e=Qr(t);return se((n,r)=>{(e?cs(t,n,e):cs(t,n)).subscribe(r)})}function un(t,e){return se((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ne(r,u=>{i?.unsubscribe();let l=0,h=o++;ke(t(u,h)).subscribe(i=ne(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Xl(t){return se((e,n)=>{ke(t).subscribe(ne(n,()=>n.complete(),dc)),!n.closed&&e.subscribe(n)})}function lt(t,e,n){let r=q(t)||e||n?{next:t,error:e,complete:n}:t;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ne(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Yt}function Sb(t,e){return se((n,r)=>{let{leading:i=!0,trailing:o=!1}=e??{},s=!1,a=null,u=null,l=!1,h=()=>{u?.unsubscribe(),u=null,o&&(y(),l&&r.complete())},p=()=>{u=null,l&&r.complete()},g=E=>u=ke(t(E)).subscribe(ne(r,h,p)),y=()=>{if(s){s=!1;let E=a;a=null,r.next(E),!l&&g(E)}};n.subscribe(ne(r,E=>{s=!0,a=E,!(u&&!u.closed)&&(i?y():g(E))},()=>{l=!0,!(o&&s&&u&&!u.closed)&&r.complete()}))})}function nk(t,e=Kr,n){let r=bb(t,e);return Sb(()=>r,n)}var Gg;function ed(){return Gg}function Bn(t){let e=Gg;return Gg=t,e}var Db=Symbol("NotFound");function ls(t){return t===Db||t?.name==="\u0275NotFound"}function od(t,e){return Object.is(t,e)}var it=null,td=!1,Wg=1,rk=null,Nt=Symbol("SIGNAL");function W(t){let e=it;return it=t,e}function sd(){return it}var Xr={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ds(t){if(td)throw new Error("");if(it===null)return;it.consumerOnSignalRead(t);let e=it.nextProducerIndex++;if(ud(it),e<it.producerNode.length&&it.producerNode[e]!==t&&mc(it)){let n=it.producerNode[e];cd(n,it.producerIndexOfThis[e])}it.producerNode[e]!==t&&(it.producerNode[e]=t,it.producerIndexOfThis[e]=mc(it)?Rb(t,it,e):0),it.producerLastReadVersion[e]=t.version}function Ab(){Wg++}function ad(t){if(!(mc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Wg)){if(!t.producerMustRecompute(t)&&!hs(t)){id(t);return}t.producerRecomputeValue(t),id(t)}}function Kg(t){if(t.liveConsumerNode===void 0)return;let e=td;td=!0;try{for(let n of t.liveConsumerNode)n.dirty||ik(n)}finally{td=e}}function Qg(){return it?.consumerAllowSignalWrites!==!1}function ik(t){t.dirty=!0,Kg(t),t.consumerMarkedDirty?.(t)}function id(t){t.dirty=!1,t.lastCleanEpoch=Wg}function ei(t){return t&&(t.nextProducerIndex=0),W(t)}function qi(t,e){if(W(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(mc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)cd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function hs(t){ud(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(ad(n),r!==n.version))return!0}return!1}function fs(t){if(ud(t),mc(t))for(let e=0;e<t.producerNode.length;e++)cd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Rb(t,e,n){if(Nb(t),t.liveConsumerNode.length===0&&Mb(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Rb(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function cd(t,e){if(Nb(t),t.liveConsumerNode.length===1&&Mb(t))for(let r=0;r<t.producerNode.length;r++)cd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ud(i),i.producerIndexOfThis[r]=e}}function mc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ud(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Nb(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Mb(t){return t.producerNode!==void 0}function ld(t){rk?.(t)}function dd(t,e){let n=Object.create(ok);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(ad(n),ds(n),n.value===gc)throw n.error;return n.value};return r[Nt]=n,ld(n),r}var nd=Symbol("UNSET"),rd=Symbol("COMPUTING"),gc=Symbol("ERRORED"),ok=Y(k({},Xr),{value:nd,dirty:!0,error:null,equal:od,kind:"computed",producerMustRecompute(t){return t.value===nd||t.value===rd},producerRecomputeValue(t){if(t.value===rd)throw new Error("");let e=t.value;t.value=rd;let n=ei(t),r,i=!1;try{r=t.computation(),W(null),i=e!==nd&&e!==gc&&r!==gc&&t.equal(e,r)}catch(o){r=gc,t.error=o}finally{qi(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function sk(){throw new Error}var Pb=sk;function xb(t){Pb(t)}function Yg(t){Pb=t}var ak=null;function Zg(t,e){let n=Object.create(hd);n.value=t,e!==void 0&&(n.equal=e);let r=()=>kb(n);return r[Nt]=n,ld(n),[r,s=>ps(n,s),s=>Jg(n,s)]}function kb(t){return ds(t),t.value}function ps(t,e){Qg()||xb(t),t.equal(t.value,e)||(t.value=e,ck(t))}function Jg(t,e){Qg()||xb(t),ps(t,e(t.value))}var hd=Y(k({},Xr),{equal:od,value:void 0,kind:"signal"});function ck(t){t.version++,Ab(),Kg(t),ak?.(t)}function Ob(t){let e=W(null);try{return t()}finally{W(e)}}var yd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(ms(e,n)),this.code=e}};function uk(t){return`NG0${Math.abs(t)}`}function ms(t,e){return`${uk(t)}${e?": "+e:""}`}var wc=globalThis;function Ee(t){for(let e in t)if(t[e]===Ee)return e;throw Error("")}function Fb(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function vr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(vr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function vd(t,e){return t?e?`${t} ${e}`:t:e||""}var lk=Ee({__forward_ref__:Ee});function Qi(t){return t.__forward_ref__=Qi,t.toString=function(){return vr(this())},t}function ot(t){return lm(t)?t():t}function lm(t){return typeof t=="function"&&t.hasOwnProperty(lk)&&t.__forward_ref__===Qi}function jb(t,e){t==null&&dm(e,t,null,"!=")}function dm(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function F(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ri(t){return{providers:t.providers||[],imports:t.imports||[]}}function Tc(t){return dk(t,_d)}function hm(t){return Tc(t)!==null}function dk(t,e){return t.hasOwnProperty(e)&&t[e]||null}function hk(t){let e=t?.[_d]??null;return e||null}function em(t){return t&&t.hasOwnProperty(pd)?t[pd]:null}var _d=Ee({\u0275prov:Ee}),pd=Ee({\u0275inj:Ee}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=F({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function fm(t){return t&&!!t.\u0275providers}var pm=Ee({\u0275cmp:Ee}),gm=Ee({\u0275dir:Ee}),mm=Ee({\u0275pipe:Ee}),ym=Ee({\u0275mod:Ee}),_c=Ee({\u0275fac:Ee}),Yi=Ee({__NG_ELEMENT_ID__:Ee}),Lb=Ee({__NG_ENV_ID__:Ee});function Zi(t){return typeof t=="string"?t:t==null?"":String(t)}function gd(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Zi(t)}var vm=Ee({ngErrorCode:Ee}),Ub=Ee({ngErrorMessage:Ee}),vc=Ee({ngTokenPath:Ee});function _m(t,e){return Bb("",-200,e)}function Id(t,e){throw new j(-201,!1)}function fk(t,e){t[vc]??=[];let n=t[vc],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(jb(e.provide,"Token with multi: true should have a provide property"),r=gd(e.provide)):r=gd(e),n[0]!==r&&t[vc].unshift(r)}function pk(t,e){let n=t[vc],r=t[vm],i=t[Ub]||t.message;return t.message=mk(i,r,n,e),t}function Bb(t,e,n){let r=new j(e,t);return r[vm]=e,r[Ub]=t,n&&(r[vc]=n),r}function gk(t){return t[vm]}function mk(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return ms(e,`${t}${o}${i}`)}var tm;function Hb(){return tm}function Mt(t){let e=tm;return tm=t,e}function Im(t,e,n){let r=Tc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Id(t,"Injector")}var yk={},zi=yk,nm="__NG_DI_FLAG__",rm=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Gi(n)||0;try{return this.injector.get(e,r&8?null:zi,r)}catch(i){if(ls(i))return i;throw i}}};function vk(t,e=0){let n=ed();if(n===void 0)throw new j(-203,!1);if(n===null)return Im(t,void 0,e);{let r=_k(e),i=n.retrieve(t,r);if(ls(i)){if(r.optional)return null;throw i}return i}}function re(t,e=0){return(Hb()||vk)(ot(t),e)}function N(t,e){return re(t,Gi(e))}function Gi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function _k(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function im(t){let e=[];for(let n=0;n<t.length;n++){let r=ot(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=Ik(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(re(i,o))}else e.push(re(r))}return e}function $b(t,e){return t[nm]=e,t.prototype[nm]=e,t}function Ik(t){return t[nm]}function ti(t,e){let n=t.hasOwnProperty(_c);return n?t[_c]:null}function qb(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function zb(t){return t.flat(Number.POSITIVE_INFINITY)}function Ed(t,e){t.forEach(n=>Array.isArray(n)?Ed(n,e):e(n))}function Em(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function bc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Gb(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function Wb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function wd(t,e,n){let r=ys(t,e);return r>=0?t[r|1]=n:(r=~r,Wb(t,r,e,n)),r}function Td(t,e){let n=ys(t,e);if(n>=0)return t[n|1]}function ys(t,e){return Ek(t,e,1)}function Ek(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var wn={},Pt=[],_r=new U(""),wm=new U("",-1),Tm=new U(""),Ic=class{get(e,n=zi){if(n===zi){let i=Bb("",-201);throw i.name="\u0275NotFound",i}return n}};function bm(t){return t[ym]||null}function Ir(t){return t[pm]||null}function Cc(t){return t[gm]||null}function Cm(t){return t[mm]||null}function Tn(t){return{\u0275providers:t}}function Kb(t){return Tn([{provide:_r,multi:!0,useValue:t}])}function Qb(...t){return{\u0275providers:bd(!0,t),\u0275fromNgModule:!0}}function bd(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ed(e,s=>{let a=s;md(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Yb(i,o),n}function Yb(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Sm(i,o=>{e(o,r)})}}function md(t,e,n,r){if(t=ot(t),!t)return!1;let i=null,o=em(t),s=!o&&Ir(t);if(!o&&!s){let u=t.ngModule;if(o=em(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)md(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Ed(o.imports,h=>{md(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Yb(l,e)}if(!a){let l=ti(i)||(()=>new i);e({provide:i,useFactory:l,deps:Pt},i),e({provide:Tm,useValue:i,multi:!0},i),e({provide:_r,useValue:()=>re(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Sm(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Sm(t,e){for(let n of t)fm(n)&&(n=n.\u0275providers),Array.isArray(n)?Sm(n,e):e(n)}var wk=Ee({provide:String,useValue:Ee});function Zb(t){return t!==null&&typeof t=="object"&&wk in t}function Tk(t){return!!(t&&t.useExisting)}function bk(t){return!!(t&&t.useFactory)}function Wi(t){return typeof t=="function"}function Jb(t){return!!t.useClass}var Sc=new U(""),fd={},Vb={},Xg;function Dc(){return Xg===void 0&&(Xg=new Ic),Xg}var Ge=class{},Ki=class extends Ge{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,sm(e,s=>this.processProvider(s)),this.records.set(wm,gs(void 0,this)),i.has("environment")&&this.records.set(Ge,gs(void 0,this));let o=this.records.get(Sc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Tm,Pt,{self:!0}))}retrieve(e,n){let r=Gi(n)||0;try{return this.get(e,zi,r)}catch(i){if(ls(i))return i;throw i}}destroy(){yc(this),this._destroyed=!0;let e=W(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),W(e)}}onDestroy(e){return yc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){yc(this);let n=Bn(this),r=Mt(void 0),i;try{return e()}finally{Bn(n),Mt(r)}}get(e,n=zi,r){if(yc(this),e.hasOwnProperty(Lb))return e[Lb](this);let i=Gi(r),o,s=Bn(this),a=Mt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=Rk(e)&&Tc(e);h&&this.injectableDefInScope(h)?l=gs(om(e),fd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Dc():this.parent;return n=i&8&&n===zi?null:n,u.get(e,n)}catch(u){let l=gk(u);throw l===-200||l===-201?new j(l,null):u}finally{Mt(a),Bn(s)}}resolveInjectorInitializers(){let e=W(null),n=Bn(this),r=Mt(void 0),i;try{let o=this.get(_r,Pt,{self:!0});for(let s of o)s()}finally{Bn(n),Mt(r),W(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(vr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ot(e);let n=Wi(e)?e:ot(e&&e.provide),r=Sk(e);if(!Wi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=gs(void 0,fd,!0),i.factory=()=>im(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=W(null);try{if(n.value===Vb)throw _m(vr(e));return n.value===fd&&(n.value=Vb,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&Ak(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{W(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ot(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function om(t){let e=Tc(t),n=e!==null?e.factory:ti(t);if(n!==null)return n;if(t instanceof U)throw new j(204,!1);if(t instanceof Function)return Ck(t);throw new j(204,!1)}function Ck(t){if(t.length>0)throw new j(204,!1);let n=hk(t);return n!==null?()=>n.factory(t):()=>new t}function Sk(t){if(Zb(t))return gs(void 0,t.useValue);{let e=Dm(t);return gs(e,fd)}}function Dm(t,e,n){let r;if(Wi(t)){let i=ot(t);return ti(i)||om(i)}else if(Zb(t))r=()=>ot(t.useValue);else if(bk(t))r=()=>t.useFactory(...im(t.deps||[]));else if(Tk(t))r=(i,o)=>re(ot(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ot(t&&(t.useClass||t.provide));if(Dk(t))r=()=>new i(...im(t.deps));else return ti(i)||om(i)}return r}function yc(t){if(t.destroyed)throw new j(205,!1)}function gs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Dk(t){return!!t.deps}function Ak(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Rk(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function sm(t,e){for(let n of t)Array.isArray(n)?sm(n,e):n&&fm(n)?sm(n.\u0275providers,e):e(n)}function st(t,e){let n;t instanceof Ki?(yc(t),n=t):n=new rm(t);let r,i=Bn(n),o=Mt(void 0);try{return e()}finally{Bn(i),Mt(o)}}function Xb(){return Hb()!==void 0||ed()!=null}var bn=0,B=1,K=2,Ye=3,dn=4,xt=5,Ji=6,vs=7,We=8,Jt=9,Hn=10,Oe=11,_s=12,Am=13,Xi=14,kt=15,ii=16,eo=17,$n=18,Ac=19,Rm=20,yr=21,Cd=22,Er=23,Xt=24,to=25,Ne=26,eC=1,oi=6,si=7,Rc=8,no=9,at=10;function qn(t){return Array.isArray(t)&&typeof t[eC]=="object"}function Cn(t){return Array.isArray(t)&&t[eC]===!0}function Nm(t){return(t.flags&4)!==0}function ai(t){return t.componentOffset>-1}function Sd(t){return(t.flags&1)===1}function Sn(t){return!!t.template}function Is(t){return(t[K]&512)!==0}function zn(t){return(t[K]&256)===256}var tC="svg",nC="math";function hn(t){for(;Array.isArray(t);)t=t[bn];return t}function Dd(t,e){return hn(e[t])}function Dn(t,e){return hn(e[t.index])}function ro(t,e){return t.data[e]}function Mm(t,e){return t[e]}function Pm(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function fn(t,e){let n=e[t];return qn(n)?n:n[bn]}function rC(t){return(t[K]&4)===4}function Ad(t){return(t[K]&128)===128}function iC(t){return Cn(t[Ye])}function An(t,e){return e==null?null:t[e]}function xm(t){t[eo]=0}function km(t){t[K]&1024||(t[K]|=1024,Ad(t)&&ci(t))}function Om(t,e){for(;t>0;)e=e[Xi],t--;return e}function Nc(t){return!!(t[K]&9216||t[Xt]?.dirty)}function Rd(t){t[Hn].changeDetectionScheduler?.notify(8),t[K]&64&&(t[K]|=1024),Nc(t)&&ci(t)}function ci(t){t[Hn].changeDetectionScheduler?.notify(0);let e=ni(t);for(;e!==null&&!(e[K]&8192||(e[K]|=8192,!Ad(e)));)e=ni(e)}function Mc(t,e){if(zn(t))throw new j(911,!1);t[yr]===null&&(t[yr]=[]),t[yr].push(e)}function Nd(t,e){if(t[yr]===null)return;let n=t[yr].indexOf(e);n!==-1&&t[yr].splice(n,1)}function ni(t){let e=t[Ye];return Cn(e)?e[Ye]:e}function Lm(t){return t[vs]??=[]}function Vm(t){return t.cleanup??=[]}function oC(t,e,n,r){let i=Lm(e);i.push(n),t.firstCreatePass&&Vm(t).push(r,i.length-1)}var ie={lFrame:vC(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Pc=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(Pc||{}),Nk=0,am=!1;function sC(){return ie.lFrame.elementDepthCount}function aC(){ie.lFrame.elementDepthCount++}function Fm(){ie.lFrame.elementDepthCount--}function cC(){return ie.bindingsEnabled}function jm(){return ie.skipHydrationRootTNode!==null}function Um(t){return ie.skipHydrationRootTNode===t}function Bm(){ie.skipHydrationRootTNode=null}function Q(){return ie.lFrame.lView}function Be(){return ie.lFrame.tView}function xc(t){return ie.lFrame.contextLView=t,t[We]}function kc(t){return ie.lFrame.contextLView=null,t}function ct(){let t=Hm();for(;t!==null&&t.type===64;)t=t.parent;return t}function Hm(){return ie.lFrame.currentTNode}function uC(){let t=ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Es(t,e){let n=ie.lFrame;n.currentTNode=t,n.isParent=e}function $m(){return ie.lFrame.isParent}function qm(){ie.lFrame.isParent=!1}function lC(){return ie.lFrame.contextLView}function zm(t){dm("Must never be called in production mode"),Nk=t}function Gm(){return am}function ws(t){let e=am;return am=t,e}function Md(){let t=ie.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function dC(){return ie.lFrame.bindingIndex}function hC(t){return ie.lFrame.bindingIndex=t}function Ts(){return ie.lFrame.bindingIndex++}function Pd(t){let e=ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function fC(){return ie.lFrame.inI18n}function pC(t,e){let n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,xd(e)}function gC(){return ie.lFrame.currentDirectiveIndex}function xd(t){ie.lFrame.currentDirectiveIndex=t}function mC(t){let e=ie.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Wm(){return ie.lFrame.currentQueryIndex}function kd(t){ie.lFrame.currentQueryIndex=t}function Mk(t){let e=t[B];return e.type===2?e.declTNode:e.type===1?t[xt]:null}function Km(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=Mk(o),i===null||(o=o[Xi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ie.lFrame=yC();return r.currentTNode=e,r.lView=t,!0}function Od(t){let e=yC(),n=t[B];ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function yC(){let t=ie.lFrame,e=t===null?null:t.child;return e===null?vC(t):e}function vC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function _C(){let t=ie.lFrame;return ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Qm=_C;function Ld(){let t=_C();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function IC(t){return(ie.lFrame.contextLView=Om(t,ie.lFrame.contextLView))[We]}function Gn(){return ie.lFrame.selectedIndex}function ui(t){ie.lFrame.selectedIndex=t}function Ym(){let t=ie.lFrame;return ro(t.tView,t.selectedIndex)}function EC(){return ie.lFrame.currentNamespace}var wC=!0;function Vd(){return wC}function Fd(t){wC=t}function cm(t,e=null,n=null,r){let i=Zm(t,e,n,r);return i.resolveInjectorInitializers(),i}function Zm(t,e=null,n=null,r,i=new Set){let o=[n||Pt,Qb(t)];return r=r||(typeof t=="object"?void 0:vr(t)),new Ki(o,e||Dc(),r||null,i)}var Ze=class t{static THROW_IF_NOT_FOUND=zi;static NULL=new Ic;static create(e,n){if(Array.isArray(e))return cm({name:""},n,e,"");{let r=e.name??"";return cm({name:r},e.parent,e.providers,r)}}static \u0275prov=F({token:t,providedIn:"any",factory:()=>re(wm)});static __NG_ELEMENT_ID__=-1},dt=new U(""),Ot=(()=>{class t{static __NG_ELEMENT_ID__=Pk;static __NG_ENV_ID__=n=>n}return t})(),Ec=class extends Ot{_lView;constructor(e){super(),this._lView=e}get destroyed(){return zn(this._lView)}onDestroy(e){let n=this._lView;return Mc(n,e),()=>Nd(n,e)}};function Pk(){return new Ec(Q())}var Zt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},zt=new U("",{providedIn:"root",factory:()=>{let t=N(Ge),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Zt),e.handleError(n))}}}),TC={provide:_r,useValue:()=>void N(Zt),multi:!0},xk=new U("",{providedIn:"root",factory:()=>{let t=N(dt).defaultView;if(!t)return;let e=N(zt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),N(Ot).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function kk(){return Tn([Kb(()=>void N(xk))])}function Me(t,e){let[n,r,i]=Zg(t,e?.equal),o=n,s=o[Nt];return o.set=r,o.update=i,o.asReadonly=Jm.bind(o),o}function Jm(){let t=this[Nt];if(t.readonlyFn===void 0){let e=()=>this();e[Nt]=t,t.readonlyFn=e}return t.readonlyFn}var ln=class{},Oc=new U("",{providedIn:"root",factory:()=>!1});var Xm=new U(""),jd=new U("");var bs=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=Ok}return t})();function Ok(){return new bs(Q(),ct())}var Wn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new mt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new J(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=F({token:t,providedIn:"root",factory:()=>new t})}return t})(),li=(()=>{class t{internalPendingTasks=N(Wn);scheduler=N(ln);errorHandler=N(zt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=F({token:t,providedIn:"root",factory:()=>new t})}return t})();function io(...t){}var Lc=(()=>{class t{static \u0275prov=F({token:t,providedIn:"root",factory:()=>new um})}return t})(),um=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Os(t){return{toString:t}.toString()}var Ud="__parameters__";function qk(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function zk(t,e,n){return Os(()=>{let r=qk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Ud)?u[Ud]:Object.defineProperty(u,Ud,{value:[]})[Ud];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var br=$b(zk("Optional"),8);function Gk(t){return typeof t=="function"}var Qd=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function sS(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var fi=(()=>{let t=()=>aS;return t.ngInherit=!0,t})();function aS(t){return t.type.prototype.ngOnChanges&&(t.setInput=Kk),Wk}function Wk(){let t=uS(this),e=t?.current;if(e){let n=t.previous;if(n===wn)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Kk(t,e,n,r,i){let o=this.declaredInputs[r],s=uS(t)||Qk(t,{previous:wn,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Qd(l&&l.currentValue,n,u===wn),sS(t,e,i,n)}var cS="__ngSimpleChanges__";function uS(t){return t[cS]||null}function Qk(t,e){return t[cS]=e}var bC=[];var me=function(t,e=null,n){for(let r=0;r<bC.length;r++){let i=bC[r];i(t,e,n)}};function Yk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=aS(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Zk(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function $d(t,e,n){lS(t,e,3,n)}function qd(t,e,n,r){(t[K]&3)===n&&lS(t,e,n,r)}function ey(t,e){let n=t[K];(n&3)===e&&(n&=16383,n+=1,t[K]=n)}function lS(t,e,n,r){let i=r!==void 0?t[eo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[eo]+=65536),(a<o||o==-1)&&(Jk(t,n,e,u),t[eo]=(t[eo]&4294901760)+u+2),u++}function CC(t,e){me(4,t,e);let n=W(null);try{e.call(t)}finally{W(n),me(5,t,e)}}function Jk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[K]>>14<t[eo]>>16&&(t[K]&3)===e&&(t[K]+=16384,CC(a,o)):CC(a,o)}var As=-1,so=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Xk(t){return(t.flags&8)!==0}function eO(t){return(t.flags&16)!==0}function tO(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];nO(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function dS(t){return t===3||t===4||t===6}function nO(t){return t.charCodeAt(0)===64}function Ns(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?SC(t,n,i,null,e[++r]):SC(t,n,i,null,null))}}return t}function SC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function hS(t){return t!==As}function Yd(t){return t&32767}function rO(t){return t>>16}function Zd(t,e){let n=rO(t),r=e;for(;n>0;)r=r[Xi],n--;return r}var fy=!0;function Jd(t){let e=fy;return fy=t,e}var iO=256,fS=iO-1,pS=5,oO=0,Kn={};function sO(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Yi)&&(r=n[Yi]),r==null&&(r=n[Yi]=oO++);let i=r&fS,o=1<<i;e.data[t+(i>>pS)]|=o}function Xd(t,e){let n=gS(t,e);if(n!==-1)return n;let r=e[B];r.firstCreatePass&&(t.injectorIndex=e.length,ty(r.data,t),ty(e,null),ty(r.blueprint,null));let i=qy(t,e),o=t.injectorIndex;if(hS(i)){let s=Yd(i),a=Zd(i,e),u=a[B].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function ty(t,e){t.push(0,0,0,0,0,0,0,0,e)}function gS(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function qy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=IS(i),r===null)return As;if(n++,i=i[Xi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return As}function py(t,e,n){sO(t,e,n)}function aO(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(dS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function mS(t,e,n){if(n&8||t!==void 0)return t;Id(e,"NodeInjector")}function yS(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Jt],o=Mt(void 0);try{return i?i.get(e,r,n&8):Im(e,r,n&8)}finally{Mt(o)}}return mS(r,e,n)}function vS(t,e,n,r=0,i){if(t!==null){if(e[K]&2048&&!(r&2)){let s=dO(t,e,n,r,Kn);if(s!==Kn)return s}let o=_S(t,e,n,r,Kn);if(o!==Kn)return o}return yS(e,n,r,i)}function _S(t,e,n,r,i){let o=uO(n);if(typeof o=="function"){if(!Km(e,t,r))return r&1?mS(i,n,r):yS(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Id(n);else return s}finally{Qm()}}else if(typeof o=="number"){let s=null,a=gS(t,e),u=As,l=r&1?e[kt][xt]:null;for((a===-1||r&4)&&(u=a===-1?qy(t,e):e[a+8],u===As||!AC(r,!1)?a=-1:(s=e[B],a=Yd(u),e=Zd(u,e)));a!==-1;){let h=e[B];if(DC(o,a,h.data)){let p=cO(a,e,n,s,r,l);if(p!==Kn)return p}u=e[a+8],u!==As&&AC(r,e[B].data[a+8]===l)&&DC(o,a,e)?(s=h,a=Yd(u),e=Zd(u,e)):a=-1}}return i}function cO(t,e,n,r,i,o){let s=e[B],a=s.data[t+8],u=r==null?ai(a)&&fy:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=zd(a,s,n,u,l);return h!==null?jc(e,s,h,a,i):Kn}function zd(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let E=s[y];if(y<u&&n===E||y>=u&&E.type===n)return y}if(i){let y=s[u];if(y&&Sn(y)&&y.type===n)return u}return null}function jc(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof so){let a=o;if(a.resolving){let y=gd(s[n]);throw _m(y)}let u=Jd(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?Mt(a.injectImpl):null,g=Km(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Yk(n,s[n],e)}finally{p!==null&&Mt(p),Jd(u),a.resolving=!1,Qm()}}return o}function uO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Yi)?t[Yi]:void 0;return typeof e=="number"?e>=0?e&fS:lO:e}function DC(t,e,n){let r=1<<t;return!!(n[e+(t>>pS)]&r)}function AC(t,e){return!(t&2)&&!(t&1&&e)}var oo=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return vS(this._tNode,this._lView,e,Gi(r),n)}};function lO(){return new oo(ct(),Q())}function Ls(t){return Os(()=>{let e=t.prototype.constructor,n=e[_c]||gy(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[_c]||gy(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function gy(t){return lm(t)?()=>{let e=gy(ot(t));return e&&e()}:ti(t)}function dO(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[K]&2048&&!Is(s);){let a=_S(o,s,n,r|2,Kn);if(a!==Kn)return a;let u=o.parent;if(!u){let l=s[Rm];if(l){let h=l.get(n,Kn,r);if(h!==Kn)return h}u=IS(s),s=s[Xi]}o=u}return i}function IS(t){let e=t[B],n=e.type;return n===2?e.declTNode:n===1?t[xt]:null}function mh(t){return aO(ct(),t)}function hO(){return Vs(ct(),Q())}function Vs(t,e){return new en(Dn(t,e))}var en=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=hO}return t})();function fO(t){return t instanceof en?t.nativeElement:t}function pO(){return this._results[Symbol.iterator]()}var eh=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ze}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=zb(e);(this._changesDetected=!qb(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=pO};function ES(t){return(t.flags&128)===128}var zy=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(zy||{}),wS=new Map,gO=0;function mO(){return gO++}function yO(t){wS.set(t[Ac],t)}function my(t){wS.delete(t[Ac])}var RC="__ngContext__";function Ms(t,e){qn(e)?(t[RC]=e[Ac],yO(e)):t[RC]=e}function TS(t){return CS(t[_s])}function bS(t){return CS(t[dn])}function CS(t){for(;t!==null&&!Cn(t);)t=t[dn];return t}var yy;function Gy(t){yy=t}function SS(){if(yy!==void 0)return yy;if(typeof document<"u")return document;throw new j(210,!1)}var yh=new U("",{providedIn:"root",factory:()=>vO}),vO="ng",vh=new U(""),pi=new U("",{providedIn:"platform",factory:()=>"unknown"});var _h=new U("",{providedIn:"root",factory:()=>SS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _O="h",IO="b";var DS="r";var Wy="di",Ky="s";var AS=!1,RS=new U("",{providedIn:"root",factory:()=>AS});var NS=new U("");var Ss=new WeakMap;var Cs=null,ny=0,vy=class{callbacks=new Set;listener=()=>{for(let e of this.callbacks)e()}};function EO(){return new IntersectionObserver(t=>{for(let e of t)e.isIntersecting&&Ss.has(e.target)&&Ss.get(e.target).listener()})}function wO(t,e,n){let r=Ss.get(t);return Cs=Cs||n(),r||(r=new vy,Cs.observe(t),Ss.set(t,r),ny++),r.callbacks.add(e),()=>{Ss.has(t)&&(r.callbacks.delete(e),r.callbacks.size===0&&(Cs?.unobserve(t),Ss.delete(t),ny--),ny===0&&(Cs?.disconnect(),Cs=null))}}var TO=(t,e,n,r)=>{};function bO(t,e,n,r){TO(t,e,n,r)}var MS=new U("");function Ih(t){return(t.flags&32)===32}var CO=()=>null;function PS(t,e,n=!1){return CO(t,e,n)}function xS(t){return t.get(NS,!1,{optional:!0})}function kS(t,e){let n=t.contentQueries;if(n!==null){let r=W(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];kd(o),a.contentQueries(2,e[s],s)}}}finally{W(r)}}}function _y(t,e,n){kd(0);let r=W(null);try{e(t,n)}finally{W(r)}}function OS(t,e,n){if(Nm(e)){let r=W(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{W(r)}}}var wr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(wr||{});var Bd;function SO(){if(Bd===void 0&&(Bd=null,wc.trustedTypes))try{Bd=wc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Bd}function NC(t){return SO()?.createScriptURL(t)||t}var th=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yd})`}};function Gc(t){return t instanceof th?t.changingThisBreaksApplicationSecurity:t}function Qy(t,e){let n=LS(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${yd})`)}return n===e}function LS(t){return t instanceof th&&t.getTypeName()||null}var DO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function VS(t){return t=String(t),t.match(DO)?t:"unsafe:"+t}var Eh=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Eh||{});function FS(t){let e=US();return e?e.sanitize(Eh.URL,t)||"":Qy(t,"URL")?Gc(t):VS(Zi(t))}function jS(t){let e=US();if(e)return NC(e.sanitize(Eh.RESOURCE_URL,t)||"");if(Qy(t,"ResourceURL"))return NC(Gc(t));throw new j(904,!1)}function AO(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?jS:FS}function Yy(t,e,n){return AO(e,n)(t)}function US(){let t=Q();return t&&t[Hn].sanitizer}function BS(t){return t instanceof Function?t():t}function RO(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var HS="ng-template";function NO(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&RO(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Zy(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Zy(t){return t.type===4&&t.value!==HS}function MO(t,e,n){let r=t.type===4&&!n?HS:t.value;return e===r}function PO(t,e,n){let r=4,i=t.attrs,o=i!==null?OO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Rn(r)&&!Rn(u))return!1;if(s&&Rn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!MO(t,u,n)||u===""&&e.length===1){if(Rn(r))return!1;s=!0}}else if(r&8){if(i===null||!NO(t,i,u,n)){if(Rn(r))return!1;s=!0}}else{let l=e[++a],h=xO(u,i,Zy(t),n);if(h===-1){if(Rn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Rn(r))return!1;s=!0}}}}return Rn(r)||s}function Rn(t){return(t&1)===0}function xO(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return LO(e,t)}function $S(t,e,n=!1){for(let r=0;r<e.length;r++)if(PO(t,e[r],n))return!0;return!1}function kO(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if((n&1)===0)return e[n+1]}return null}function OO(t){for(let e=0;e<t.length;e++){let n=t[e];if(dS(n))return e}return t.length}function LO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function VO(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function MC(t,e){return t?":not("+e.trim()+")":e}function FO(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Rn(s)&&(e+=MC(o,i),i=""),r=s,o=o||!Rn(r);n++}return i!==""&&(e+=MC(o,i)),e}function jO(t){return t.map(FO).join(",")}function UO(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Rn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Lt={};function BO(t,e){return t.createText(e)}function HO(t,e,n){t.setValue(e,n)}function qS(t,e,n){return t.createElement(e,n)}function nh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function zS(t,e,n){t.appendChild(e,n)}function PC(t,e,n,r,i){r!==null?nh(t,e,n,r,i):zS(t,e,n)}function GS(t,e,n){t.removeChild(null,e,n)}function $O(t,e,n){t.setAttribute(e,"style",n)}function qO(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function WS(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&tO(t,e,r),i!==null&&qO(t,e,i),o!==null&&$O(t,e,o)}function Jy(t,e,n,r,i,o,s,a,u,l,h){let p=Ne+r,g=p+i,y=zO(p,g),E=typeof l=="function"?l():l;return y[B]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:h}}function zO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Lt);return n}function GO(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Jy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Xy(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[bn]=i,p[K]=r|4|128|8|64|1024,(l!==null||t&&t[K]&2048)&&(p[K]|=2048),xm(p),p[Ye]=p[Xi]=t,p[We]=n,p[Hn]=s||t&&t[Hn],p[Oe]=a||t&&t[Oe],p[Jt]=u||t&&t[Jt]||null,p[xt]=o,p[Ac]=mO(),p[Ji]=h,p[Rm]=l,p[kt]=e.type==2?t[kt]:p,p}function WO(t,e,n){let r=Dn(e,t),i=GO(n),o=t[Hn].rendererFactory,s=ev(t,Xy(t,i,null,KS(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function KS(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function QS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ev(t,e){return t[_s]?t[Am][dn]=e:t[_s]=e,t[Am]=e,e}function De(t=1){YS(Be(),Q(),Gn()+t,!1)}function YS(t,e,n,r){if(!r)if((e[K]&3)===3){let o=t.preOrderCheckHooks;o!==null&&$d(e,o,n)}else{let o=t.preOrderHooks;o!==null&&qd(e,o,0,n)}ui(n)}var wh=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(wh||{});function Iy(t,e,n,r){let i=W(null);try{let[o,s,a]=t.inputs[n],u=null;(s&wh.SignalBased)!==0&&(u=e[o][Nt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):sS(e,u,o,r)}finally{W(i)}}var Tr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Tr||{}),KO;function tv(t,e){return KO(t,e)}function Ds(t,e,n,r,i){if(r!=null){let o,s=!1;Cn(r)?o=r:qn(r)&&(s=!0,r=r[bn]);let a=hn(r);t===0&&n!==null?i==null?zS(e,n,a):nh(e,n,a,i||null,!0):t===1&&n!==null?nh(e,n,a,i||null,!0):t===2?GS(e,a,s):t===3&&e.destroyNode(a),o!=null&&i1(e,t,o,n,i)}}function QO(t,e){ZS(t,e),e[bn]=null,e[xt]=null}function YO(t,e,n,r,i,o){r[bn]=i,r[xt]=e,bh(t,r,n,1,i,o)}function ZS(t,e){e[Hn].changeDetectionScheduler?.notify(9),bh(t,e,e[Oe],2,null,null)}function ZO(t){let e=t[_s];if(!e)return ry(t[B],t);for(;e;){let n=null;if(qn(e))n=e[_s];else{let r=e[at];r&&(n=r)}if(!n){for(;e&&!e[dn]&&e!==t;)qn(e)&&ry(e[B],e),e=e[Ye];e===null&&(e=t),qn(e)&&ry(e[B],e),n=e&&e[dn]}e=n}}function nv(t,e){let n=t[no],r=n.indexOf(e);n.splice(r,1)}function Th(t,e){if(zn(e))return;let n=e[Oe];n.destroyNode&&bh(t,e,n,3,null,null),ZO(e)}function ry(t,e){if(zn(e))return;let n=W(null);try{e[K]&=-129,e[K]|=256,e[Xt]&&fs(e[Xt]),XO(t,e),JO(t,e),e[B].type===1&&e[Oe].destroy();let r=e[ii];if(r!==null&&Cn(e[Ye])){r!==e[Ye]&&nv(r,e);let i=e[$n];i!==null&&i.detachView(t)}my(e)}finally{W(n)}}function JO(t,e){let n=t.cleanup,r=e[vs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[vs]=null);let i=e[yr];if(i!==null){e[yr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Er];if(o!==null){e[Er]=null;for(let s of o)s.destroy()}}function XO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof so)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];me(4,a,u);try{u.call(a)}finally{me(5,a,u)}}else{me(4,i,o);try{o.call(i)}finally{me(5,i,o)}}}}}function JS(t,e,n){return e1(t,e.parent,n)}function e1(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[bn];if(ai(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===wr.None||i===wr.Emulated)return null}return Dn(r,n)}function XS(t,e,n){return n1(t,e,n)}function t1(t,e,n){return t.type&40?Dn(t,n):null}var n1=t1,xC;function rv(t,e,n,r){let i=JS(t,r,e),o=e[Oe],s=r.parent||e[xt],a=XS(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)PC(o,i,n[u],a,!1);else PC(o,i,n,a,!1);xC!==void 0&&xC(o,r,e,n,i)}function Vc(t,e){if(e!==null){let n=e.type;if(n&3)return Dn(e,t);if(n&4)return Ey(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Vc(t,r);{let i=t[e.index];return Cn(i)?Ey(-1,i):hn(i)}}else{if(n&128)return Vc(t,e.next);if(n&32)return tv(e,t)()||hn(t[e.index]);{let r=eD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ni(t[kt]);return Vc(i,r)}else return Vc(t,e.next)}}}return null}function eD(t,e){if(e!==null){let r=t[kt][xt],i=e.projection;return r.projection[i]}return null}function Ey(t,e){let n=at+t+1;if(n<e.length){let r=e[n],i=r[B].firstChild;if(i!==null)return Vc(r,i)}return e[si]}function iv(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Ms(hn(a),r),n.flags|=2),!Ih(n))if(u&8)iv(t,e,n.child,r,i,o,!1),Ds(e,t,i,a,o);else if(u&32){let l=tv(n,r),h;for(;h=l();)Ds(e,t,i,h,o);Ds(e,t,i,a,o)}else u&16?tD(t,e,r,n,i,o):Ds(e,t,i,a,o);n=s?n.projectionNext:n.next}}function bh(t,e,n,r,i,o){iv(n,r,t.firstChild,e,i,o,!1)}function r1(t,e,n){let r=e[Oe],i=JS(t,n,e),o=n.parent||e[xt],s=XS(o,n,e);tD(r,0,e,n,i,s)}function tD(t,e,n,r,i,o){let s=n[kt],u=s[xt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ds(e,t,i,h,o)}else{let l=u,h=s[Ye];ES(r)&&(l.flags|=128),iv(t,e,l,h,i,o,!0)}}function i1(t,e,n,r,i){let o=n[si],s=hn(n);o!==s&&Ds(e,t,r,o,i);for(let a=at;a<n.length;a++){let u=n[a];bh(u[B],u,t,e,r,o)}}function o1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Tr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Tr.Important),t.setStyle(n,r,i,o))}}function nD(t,e,n,r,i){let o=Gn(),s=r&2;try{ui(-1),s&&e.length>Ne&&YS(t,e,Ne,!1),me(s?2:0,i,n),n(r,i)}finally{ui(o),me(s?3:1,i,n)}}function rD(t,e,n){f1(t,e,n),(n.flags&64)===64&&p1(t,e,n)}function ov(t,e,n=Dn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function s1(t,e,n,r){let o=r.get(RS,AS)||n===wr.ShadowDom,s=t.selectRootElement(e,o);return a1(s),s}function a1(t){c1(t)}var c1=()=>null;function u1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function l1(t,e,n,r,i,o){let s=e[B];if(av(t,s,e,n,r)){ai(t)&&h1(e,t.index);return}t.type&3&&(n=u1(n)),d1(t,e,n,r,i,o)}function d1(t,e,n,r,i,o){if(t.type&3){let s=Dn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function h1(t,e){let n=fn(e,t);n[K]&16||(n[K]|=64)}function f1(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ai(n)&&WO(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Xd(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=jc(e,t,s,n);if(Ms(u,e),o!==null&&_1(e,s-r,u,a,n,o),Sn(a)){let l=fn(n.index,e);l[We]=jc(e,t,s,n)}}}function p1(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=gC();try{ui(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];xd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&g1(u,l)}}finally{ui(-1),xd(s)}}function g1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function m1(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];$S(e,o.selectors,!1)&&(r??=[],Sn(o)?r.unshift(o):r.push(o))}return r}function y1(t,e,n,r,i,o){let s=Dn(t,e);v1(e[Oe],s,o,t.value,n,r,i)}function v1(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Zi(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function _1(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Iy(r,n,u,l)}}function iD(t,e,n,r,i){let o=Ne+n,s=e[B],a=i(s,e,t,r,n);e[o]=a,Es(t,!0);let u=t.type===2;return u?(WS(e[Oe],a,t),(sC()===0||Sd(t))&&Ms(a,e),aC()):Ms(a,e),Vd()&&(!u||!Ih(t))&&rv(s,e,a,t),t}function oD(t){let e=t;return $m()?qm():(e=e.parent,Es(e,!1)),e}function sv(t,e){let n=t[Jt];if(!n)return;n.get(zt,null)?.(e)}function av(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Iy(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Iy(h,l,r,i),a=!0}return a}function I1(t,e){let n=fn(e,t),r=n[B];E1(r,n);let i=n[bn];i!==null&&n[Ji]===null&&(n[Ji]=PS(i,n[Jt])),me(18),cv(r,n,n[We]),me(19,n[We])}function E1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function cv(t,e,n){Od(e);try{let r=t.viewQuery;r!==null&&_y(1,r,n);let i=t.template;i!==null&&nD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[$n]?.finishViewCreation(t),t.staticContentQueries&&kS(t,e),t.staticViewQueries&&_y(2,t.viewQuery,n);let o=t.components;o!==null&&w1(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[K]&=-5,Ld()}}function w1(t,e){for(let n=0;n<e.length;n++)I1(t,e[n])}function Fs(t,e,n,r){let i=W(null);try{let o=e.tView,a=t[K]&4096?4096:16,u=Xy(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ii]=l;let h=t[$n];return h!==null&&(u[$n]=h.createEmbeddedView(o)),cv(o,u,n),u}finally{W(i)}}function ao(t,e){return!e||e.firstChild===null||ES(t)}var kC=!1,T1=new U("");function Uc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(hn(o)),Cn(o)&&sD(o,r);let s=n.type;if(s&8)Uc(t,e,n.child,r);else if(s&32){let a=tv(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=eD(e,n);if(Array.isArray(a))r.push(...a);else{let u=ni(e[kt]);Uc(u[B],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function sD(t,e){for(let n=at;n<t.length;n++){let r=t[n],i=r[B].firstChild;i!==null&&Uc(r[B],r,i,e)}t[si]!==t[bn]&&e.push(t[si])}function aD(t){if(t[to]!==null){for(let e of t[to])e.impl.addSequence(e);t[to].length=0}}var cD=[];function b1(t){return t[Xt]??C1(t)}function C1(t){let e=cD.pop()??Object.create(D1);return e.lView=t,e}function S1(t){t.lView[Xt]!==t&&(t.lView=null,cD.push(t))}var D1=Y(k({},Xr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ci(t.lView)},consumerOnSignalRead(){this.lView[Xt]=this}});function A1(t){let e=t[Xt]??Object.create(R1);return e.lView=t,e}var R1=Y(k({},Xr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=ni(t.lView);for(;e&&!uD(e[B]);)e=ni(e);e&&km(e)},consumerOnSignalRead(){this.lView[Xt]=this}});function uD(t){return t.type!==2}function lD(t){if(t[Er]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Er])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[K]&8192)}}var N1=100;function uv(t,e=0){let r=t[Hn].rendererFactory,i=!1;i||r.begin?.();try{M1(t,e)}finally{i||r.end?.()}}function M1(t,e){let n=Gm();try{ws(!0),wy(t,e);let r=0;for(;Nc(t);){if(r===N1)throw new j(103,!1);r++,wy(t,1)}}finally{ws(n)}}function dD(t,e){zm(e?Pc.Exhaustive:Pc.OnlyDirtyViews);try{uv(t)}finally{zm(Pc.Off)}}function P1(t,e,n,r){if(zn(e))return;let i=e[K],o=!1,s=!1;Od(e);let a=!0,u=null,l=null;o||(uD(t)?(l=b1(e),u=ei(l)):sd()===null?(a=!1,l=A1(e),u=ei(l)):e[Xt]&&(fs(e[Xt]),e[Xt]=null));try{xm(e),hC(t.bindingStartIndex),n!==null&&nD(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&$d(e,y,null)}else{let y=t.preOrderHooks;y!==null&&qd(e,y,0,null),ey(e,0)}if(s||x1(e),lD(e),hD(e,0),t.contentQueries!==null&&kS(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&$d(e,y)}else{let y=t.contentHooks;y!==null&&qd(e,y,1),ey(e,1)}O1(t,e);let p=t.components;p!==null&&pD(e,p,0);let g=t.viewQuery;if(g!==null&&_y(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&$d(e,y)}else{let y=t.viewHooks;y!==null&&qd(e,y,2),ey(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Cd]){for(let y of e[Cd])y();e[Cd]=null}o||(aD(e),e[K]&=-73)}catch(h){throw o||ci(e),h}finally{l!==null&&(qi(l,u),a&&S1(l)),Ld()}}function hD(t,e){for(let n=TS(t);n!==null;n=bS(n))for(let r=at;r<n.length;r++){let i=n[r];fD(i,e)}}function x1(t){for(let e=TS(t);e!==null;e=bS(e)){if(!(e[K]&2))continue;let n=e[no];for(let r=0;r<n.length;r++){let i=n[r];km(i)}}}function k1(t,e,n){me(18);let r=fn(e,t);fD(r,n),me(19,r[We])}function fD(t,e){Ad(t)&&wy(t,e)}function wy(t,e){let r=t[B],i=t[K],o=t[Xt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&hs(o)),s||=!1,o&&(o.dirty=!1),t[K]&=-9217,s)P1(r,t,r.template,t[We]);else if(i&8192){let a=W(null);try{lD(t),hD(t,1);let u=r.components;u!==null&&pD(t,u,1),aD(t)}finally{W(a)}}}function pD(t,e,n){for(let r=0;r<e.length;r++)k1(t,e[r],n)}function O1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ui(~i);else{let o=i,s=n[++r],a=n[++r];pC(s,o);let u=e[o];me(24,u),a(2,u),me(25,u)}}}finally{ui(-1)}}function Ch(t,e){let n=Gm()?64:1088;for(t[Hn].changeDetectionScheduler?.notify(e);t;){t[K]|=n;let r=ni(t);if(Is(t)&&!r)return t;t=r}return null}function gD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function mD(t,e){let n=at+e;if(n<t.length)return t[n]}function js(t,e,n,r=!0){let i=e[B];if(L1(i,e,t,n),r){let s=Ey(n,t),a=e[Oe],u=a.parentNode(t[si]);u!==null&&YO(i,t[xt],a,e,u,s)}let o=e[Ji];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function lv(t,e){let n=Bc(t,e);return n!==void 0&&Th(n[B],n),n}function Bc(t,e){if(t.length<=at)return;let n=at+e,r=t[n];if(r){let i=r[ii];i!==null&&i!==t&&nv(i,r),e>0&&(t[n-1][dn]=r[dn]);let o=bc(t,at+e);QO(r[B],r);let s=o[$n];s!==null&&s.detachView(o[B]),r[Ye]=null,r[dn]=null,r[K]&=-129}return r}function L1(t,e,n,r){let i=at+r,o=n.length;r>0&&(n[i-1][dn]=e),r<o-at?(e[dn]=n[i],Em(n,at+r,e)):(n.push(e),e[dn]=null),e[Ye]=n;let s=e[ii];s!==null&&n!==s&&yD(s,e);let a=e[$n];a!==null&&a.insertView(t),Rd(e),e[K]|=128}function yD(t,e){let n=t[no],r=e[Ye];if(qn(r))t[K]|=2;else{let i=r[Ye][kt];e[kt]!==i&&(t[K]|=2)}n===null?t[no]=[e]:n.push(e)}var hi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[B];return Uc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[We]}set context(e){this._lView[We]=e}get destroyed(){return zn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ye];if(Cn(e)){let n=e[Rc],r=n?n.indexOf(this):-1;r>-1&&(Bc(e,r),bc(n,r))}this._attachedToViewContainer=!1}Th(this._lView[B],this._lView)}onDestroy(e){Mc(this._lView,e)}markForCheck(){Ch(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[K]&=-129}reattach(){Rd(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,uv(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Jt].get(T1,kC)}catch{this.exhaustive=kC}}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Is(this._lView),n=this._lView[ii];n!==null&&!e&&nv(n,this._lView),ZS(this._lView[B],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=Is(this._lView),r=this._lView[ii];r!==null&&!n&&yD(r,this._lView),Rd(this._lView)}};var Hc=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=V1;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Fs(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new hi(o)}}return t})();function V1(){return dv(ct(),Q())}function dv(t,e){return t.type&4?new Hc(e,t,Vs(t,e)):null}function Wc(t,e,n,r,i){let o=t.data[e];if(o===null)o=F1(t,e,n,r,i),fC()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=uC();o.injectorIndex=s===null?-1:s.injectorIndex}return Es(o,!0),o}function F1(t,e,n,r,i){let o=Hm(),s=$m(),a=s?o:o&&o.parent,u=t.data[e]=U1(t,a,n,e,r,i);return j1(t,u,o,s),u}function j1(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function U1(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return jm()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var zK=new RegExp(`^(\\d+)*(${IO}|${_O})*(.*)`);function B1(t){let e=t[oi]??[],r=t[Ye][Oe],i=[];for(let o of e)o.data[Wy]!==void 0?i.push(o):H1(o,r);t[oi]=i}function H1(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[DS];for(;n<i;){let o=r.nextSibling;GS(e,r,!1),r=o,n++}}}var $1=()=>null,q1=()=>null;function rh(t,e){return $1(t,e)}function vD(t,e,n){return q1(t,e,n)}var _D=class{},Sh=class{},Ty=class{resolveComponentFactory(e){throw new j(917,!1)}},Kc=class{static NULL=new Ty},co=class{},Mn=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>z1()}return t})();function z1(){let t=Q(),e=ct(),n=fn(e.index,t);return(qn(n)?n:t)[Oe]}var ID=(()=>{class t{static \u0275prov=F({token:t,providedIn:"root",factory:()=>null})}return t})();var Gd={},Rs=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Gd,r);return i!==Gd||n===Gd?i:this.parentInjector.get(e,n,r)}};function ih(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=vd(i,a);else if(o==2){let u=a,l=e[++s];r=vd(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ge(t,e=0){let n=Q();if(n===null)return re(t,e);let r=ct();return vS(r,n,ot(t),e)}function G1(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}Q1(t,e,n,a,o,u,l)}o!==null&&r!==null&&W1(n,r,o)}function W1(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function K1(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Q1(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&Sn(y)&&(u=!0,K1(t,n,g)),py(Xd(n,e),t,y.type)}tL(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=QS(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=Ns(n.mergedAttrs,y.hostAttrs),Z1(t,n,e,p,y),eL(p,y,i),s!==null&&s.has(y)){let[D,R]=s.get(y);n.directiveToIndex.set(y.type,[p,D+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let E=y.type.prototype;!l&&(E.ngOnChanges||E.ngOnInit||E.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(E.ngOnChanges||E.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}Y1(t,n,o)}function Y1(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))OC(0,e,i,r),OC(1,e,i,r),VC(e,r,!1);else{let o=n.get(i);LC(0,e,o,r),LC(1,e,o,r),VC(e,r,!0)}}}function OC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),ED(e,o)}}function LC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),ED(e,s)}}function ED(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function VC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Zy(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function Z1(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ti(i.type,!0)),s=new so(o,Sn(i),ge,null);t.blueprint[r]=s,n[r]=s,J1(t,e,r,QS(t,n,i.hostVars,Lt),i)}function J1(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;X1(s)!=a&&s.push(a),s.push(n,r,o)}}function X1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function eL(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Sn(e)&&(n[""]=t)}}function tL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function wD(t,e,n,r,i,o,s,a){let u=e[B],l=u.consts,h=An(l,s),p=Wc(u,t,n,r,h);return o&&G1(u,e,p,An(l,a),i),p.mergedAttrs=Ns(p.mergedAttrs,p.attrs),p.attrs!==null&&ih(p,p.attrs,!1),p.mergedAttrs!==null&&ih(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function TD(t,e){Zk(t,e),Nm(e)&&t.queries.elementEnd(e)}function nL(t,e,n,r,i,o){let s=e.consts,a=An(s,i),u=Wc(e,t,n,r,a);if(u.mergedAttrs=Ns(u.mergedAttrs,u.attrs),o!=null){let l=An(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&ih(u,u.attrs,!1),u.mergedAttrs!==null&&ih(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function hv(t,e,n){return t[e]=n}function rL(t,e){return t[e]}function Qn(t,e,n){if(n===Lt)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function bD(t,e,n,r){let i=Qn(t,e,n);return Qn(t,e+1,r)||i}function Wd(t,e,n){return function r(i){let o=ai(t)?fn(t.index,e):e;Ch(o,5);let s=e[We],a=FC(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=FC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function FC(t,e,n,r){let i=W(null);try{return me(6,e,n),n(r)!==!1}catch(o){return sv(t,o),!1}finally{me(7,e,n),W(i)}}function CD(t,e,n,r,i,o,s,a){let u=Sd(t),l=!1,h=null;if(!r&&u&&(h=iL(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Dn(t,n),g=r?r(p):p;bO(n,g,o,a);let y=i.listen(g,o,a),E=r?D=>r(hn(D[t.index])):t.index;SD(E,e,n,o,a,y,!1)}return l}function iL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[vs],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function SD(t,e,n,r,i,o,s){let a=e.firstCreatePass?Vm(e):null,u=Lm(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function jC(t,e,n,r,i,o){let s=e[n],a=e[B],l=a.data[n].outputs[r],p=s[l].subscribe(o);SD(t.index,a,e,i,o,p,!0)}var by=Symbol("BINDING");var oh=class extends Kc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ir(e);return new Ps(n,this.ngModule)}};function oL(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&wh.SignalBased)!==0};return i&&(o.transform=i),o})}function sL(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function aL(t,e,n){let r=e instanceof Ge?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Rs(n,r):n}function cL(t){let e=t.get(co,null);if(e===null)throw new j(407,!1);let n=t.get(ID,null),r=t.get(ln,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function uL(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return qS(e,n,n==="svg"?tC:n==="math"?nC:null)}var Ps=class extends Sh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=oL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=sL(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=jO(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){me(22);let a=W(null);try{let u=this.componentDef,l=lL(r,u,s,o),h=aL(u,i||this.ngModule,e),p=cL(h),g=p.rendererFactory.createRenderer(null,u),y=r?s1(g,r,u.encapsulation,h):uL(u,g),E=s?.some(UC)||o?.some(x=>typeof x!="function"&&x.bindings.some(UC)),D=Xy(null,l,null,512|KS(u),null,null,p,g,h,null,PS(y,h,!0));D[Ne]=y,Od(D);let R=null;try{let x=wD(Ne,D,2,"#host",()=>l.directiveRegistry,!0,0);y&&(WS(g,y,x),Ms(y,D)),rD(l,D,x),OS(l,x,D),TD(l,x),n!==void 0&&hL(x,this.ngContentSelectors,n),R=fn(x.index,D),D[We]=R[We],cv(l,D,null)}catch(x){throw R!==null&&my(R),my(D),x}finally{me(23),Ld()}return new sh(this.componentType,D,!!E)}finally{W(a)}}};function lL(t,e,n,r){let i=t?["ng-version","20.1.2"]:UO(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[by].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[by].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Cc(p);u.push(g)}return Jy(0,null,dL(o,s),1,a,u,null,null,null,[i],null)}function dL(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function UC(t){let e=t[by].kind;return e==="input"||e==="twoWay"}var sh=class extends _D{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ro(n[B],Ne),this.location=Vs(this._tNode,n),this.instance=fn(this._tNode.index,n)[We],this.hostView=this.changeDetectorRef=new hi(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=av(r,i[B],i,e,n);this.previousInputValues.set(e,n);let s=fn(r.index,i);Ch(s,1)}get injector(){return new oo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function hL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Us=(()=>{class t{static __NG_ELEMENT_ID__=fL}return t})();function fL(){let t=ct();return AD(t,Q())}var pL=Us,DD=class extends pL{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Vs(this._hostTNode,this._hostLView)}get injector(){return new oo(this._hostTNode,this._hostLView)}get parentInjector(){let e=qy(this._hostTNode,this._hostLView);if(hS(e)){let n=Zd(e,this._hostLView),r=Yd(e),i=n[B].data[r+8];return new oo(i,n)}else return new oo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=BC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-at}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=rh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,ao(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!Gk(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new Ps(Ir(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let x=(u?p:this.parentInjector).get(Ge,null);x&&(o=x)}let g=Ir(h.componentType??{}),y=rh(this._lContainer,g?.id??null),E=y?.firstChild??null,D=h.create(p,i,E,o,s,a);return this.insertImpl(D.hostView,l,ao(this._hostTNode,y)),D}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(iC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ye],l=new DD(u,u[xt],u[Ye]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return js(s,i,o,r),e.attachToViewContainerRef(),Em(iy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=BC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Bc(this._lContainer,n);r&&(bc(iy(this._lContainer),n),Th(r[B],r))}detach(e){let n=this._adjustIndex(e,-1),r=Bc(this._lContainer,n);return r&&bc(iy(this._lContainer),n)!=null?new hi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function BC(t){return t[Rc]}function iy(t){return t[Rc]||(t[Rc]=[])}function AD(t,e){let n,r=e[t.index];return Cn(r)?n=r:(n=gD(r,e,null,t),e[t.index]=n,ev(e,n)),mL(n,e,t,r),new DD(n,t,e)}function gL(t,e){let n=t[Oe],r=n.createComment(""),i=Dn(e,t),o=n.parentNode(i);return nh(n,o,r,n.nextSibling(i),!1),r}var mL=vL,yL=()=>!1;function RD(t,e,n){return yL(t,e,n)}function vL(t,e,n,r){if(t[si])return;let i;n.type&8?i=hn(r):i=gL(e,n),t[si]=i}var Cy=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Sy=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)fv(e,n).matches!==null&&this.queries[n].setDirty()}},ah=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=SL(e):this.predicate=e}},Dy=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ay=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,_L(n,o)),this.matchTNodeWithReadOption(e,n,zd(n,e,o,!1,!1))}else r===Hc?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,zd(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===en||i===Us||i===Hc&&n.type&4)this.addMatch(n.index,-2);else{let o=zd(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function _L(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function IL(t,e){return t.type&11?Vs(t,e):t.type&4?dv(t,e):null}function EL(t,e,n,r){return n===-1?IL(e,t):n===-2?wL(t,e,r):jc(t,t[B],n,e)}function wL(t,e,n){if(n===en)return Vs(e,t);if(n===Hc)return dv(e,t);if(n===Us)return AD(e,t)}function ND(t,e,n,r){let i=e[$n].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(EL(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function Ry(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=ND(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=at;p<h.length;p++){let g=h[p];g[ii]===g[Ye]&&Ry(g[B],g,l,r)}if(h[no]!==null){let p=h[no];for(let g=0;g<p.length;g++){let y=p[g];Ry(y[B],y,l,r)}}}}}return r}function TL(t,e){return t[$n].queries[e].queryList}function MD(t,e,n){let r=new eh((n&4)===4);return oC(t,e,r,r.destroy),(e[$n]??=new Sy).queries.push(new Cy(r))-1}function bL(t,e,n){let r=Be();return r.firstCreatePass&&(PD(r,new ah(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),MD(r,Q(),e)}function CL(t,e,n,r){let i=Be();if(i.firstCreatePass){let o=ct();PD(i,new ah(e,n,r),o.index),DL(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return MD(i,Q(),n)}function SL(t){return t.split(",").map(e=>e.trim())}function PD(t,e,n){t.queries===null&&(t.queries=new Dy),t.queries.track(new Ay(e,n))}function DL(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function fv(t,e){return t.queries.getByIndex(e)}function AL(t,e){let n=t[B],r=fv(n,e);return r.crossesNgTemplate?Ry(n,t,e,[]):ND(n,t,r,e)}var HC=new Set;function Yn(t){HC.has(t)||(HC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var xs=class{},Dh=class{};var ch=class extends xs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new oh(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=bm(e);this._bootstrapComponents=BS(o.bootstrap),this._r3Injector=Zm(e,n,[{provide:xs,useValue:this},{provide:Kc,useValue:this.componentFactoryResolver},...r],vr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},uh=class extends Dh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ch(this.moduleType,e,[])}};var $c=class extends xs{injector;componentFactoryResolver=new oh(this);instance=null;constructor(e){super();let n=new Ki([...e.providers,{provide:xs,useValue:this},{provide:Kc,useValue:this.componentFactoryResolver}],e.parent||Dc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Bs(t,e,n=null){return new $c({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var RL=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=bd(!1,n.type),i=r.length>0?Bs([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:t,providedIn:"environment",factory:()=>new t(re(Ge))})}return t})();function de(t){return Os(()=>{let e=xD(t),n=Y(k({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===zy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(RL).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||wr.Emulated,styles:t.styles||Pt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Yn("NgStandalone"),kD(n);let r=t.dependencies;return n.directiveDefs=$C(r,NL),n.pipeDefs=$C(r,Cm),n.id=xL(n),n})}function NL(t){return Ir(t)||Cc(t)}function ho(t){return Os(()=>({type:t.type,bootstrap:t.bootstrap||Pt,declarations:t.declarations||Pt,imports:t.imports||Pt,exports:t.exports||Pt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ML(t,e){if(t==null)return wn;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=wh.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function PL(t){if(t==null)return wn;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Re(t){return Os(()=>{let e=xD(t);return kD(e),e})}function pv(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function xD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||wn,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Pt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:ML(t.inputs,e),outputs:PL(t.outputs),debugInfo:null}}function kD(t){t.features?.forEach(e=>e(t))}function $C(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function xL(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function kL(t){return Object.getPrototypeOf(t.prototype).constructor}function Cr(t){let e=kL(t.type),n=!0,r=[t];for(;e;){let i;if(Sn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=oy(t.inputs),s.declaredInputs=oy(t.declaredInputs),s.outputs=oy(t.outputs);let a=i.hostBindings;a&&jL(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&VL(t,u),l&&FL(t,l),OL(t,i),Fb(t.outputs,i.outputs),Sn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Cr&&(n=!1)}}e=Object.getPrototypeOf(e)}LL(r)}function OL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function LL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ns(i.hostAttrs,n=Ns(n,i.hostAttrs))}}function oy(t){return t===wn?{}:t===Pt?[]:t}function VL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function FL(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function jL(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Pn(t){let e=n=>{let r=Array.isArray(t);n.hostDirectives===null?(n.resolveHostDirectives=UL,n.hostDirectives=r?t.map(Ny):[t]):r?n.hostDirectives.unshift(...t.map(Ny)):n.hostDirectives.unshift(t)};return e.ngInherit=!0,e}function UL(t){let e=[],n=!1,r=null,i=null;for(let o=0;o<t.length;o++){let s=t[o];if(s.hostDirectives!==null){let a=e.length;r??=new Map,i??=new Map,OD(s,e,r),i.set(s,[a,e.length-1])}o===0&&Sn(s)&&(n=!0,e.push(s))}for(let o=n?1:0;o<t.length;o++)e.push(t[o]);return[e,r,i]}function OD(t,e,n){if(t.hostDirectives!==null)for(let r of t.hostDirectives)if(typeof r=="function"){let i=r();for(let o of i)qC(Ny(o),e,n)}else qC(r,e,n)}function qC(t,e,n){let r=Cc(t.directive);BL(r.declaredInputs,t.inputs),OD(r,e,n),n.set(r,t),e.push(r)}function Ny(t){return typeof t=="function"?{directive:ot(t),inputs:wn,outputs:wn}:{directive:ot(t.directive),inputs:zC(t.inputs),outputs:zC(t.outputs)}}function zC(t){if(t===void 0||t.length===0)return wn;let e={};for(let n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e}function BL(t,e){for(let n in e)if(e.hasOwnProperty(n)){let r=e[n],i=t[n];t[r]=i}}function HL(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Ns(t.mergedAttrs,t.attrs);let h=t.tView=Jy(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Es(t,!1);let u=$L(n,e,t,r);Vd()&&rv(n,e,u,t),Ms(u,e);let l=gD(u,e,u,t);e[r+Ne]=l,ev(e,l),RD(l,t,e)}function uo(t,e,n,r,i,o,s,a,u,l,h){let p=n+Ne,g;if(e.firstCreatePass){if(g=Wc(e,p,4,s||null,a||null),l!=null){let y=An(e.consts,l);g.localNames=[];for(let E=0;E<y.length;E+=2)g.localNames.push(y[E],-1)}}else g=e.data[p];return HL(g,t,e,n,r,i,o,u),l!=null&&ov(t,g,h),g}function LD(t,e,n,r,i,o,s,a){let u=Q(),l=Be(),h=An(l.consts,o);return uo(u,l,t,e,n,r,i,h,void 0,s,a),LD}var $L=qL;function qL(t,e,n,r){return Fd(!0),e[Oe].createComment("")}var Gt=function(t){return t[t.NOT_STARTED=0]="NOT_STARTED",t[t.IN_PROGRESS=1]="IN_PROGRESS",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t}(Gt||{}),GC=0,zL=1,Ke=function(t){return t[t.Placeholder=0]="Placeholder",t[t.Loading=1]="Loading",t[t.Complete=2]="Complete",t[t.Error=3]="Error",t}(Ke||{}),gv=function(t){return t[t.Initial=-1]="Initial",t}(gv||{}),GL=0,Qc=1;var WL=4,KL=5,QL=6,YL=7,sy=8,ZL=9,mv=function(t){return t[t.Manual=0]="Manual",t[t.Playthrough=1]="Playthrough",t}(mv||{});function VD(t,e,n){let r=jD(t);e[r]===null&&(e[r]=[]),e[r].push(n)}function Kd(t,e){let n=jD(t),r=e[n];if(r!==null){for(let i of r)i();e[n]=null}}function FD(t){Kd(1,t),Kd(0,t),Kd(2,t)}function jD(t){let e=WL;return t===1?e=KL:t===2&&(e=ZL),e}var Ah=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Ah||{}),fo=new U(""),UD=!1,My=class extends ze{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Xb()&&(this.destroyRef=N(Ot,{optional:!0})??void 0,this.pendingTasks=N(Wn,{optional:!0})??void 0)}emit(e){let n=W(null);try{super.next(e)}finally{W(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof je&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Je=My;function BD(t){let e,n;function r(){t=io;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function WC(t){return queueMicrotask(()=>t()),()=>{t=io}}var yv="isAngularZone",lh=yv+"_ID",JL=0,we=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Je(!1);onMicrotaskEmpty=new Je(!1);onStable=new Je(!1);onError=new Je(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=UD}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,tV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(yv)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,XL,io,io);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},XL={};function vv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function eV(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){BD(()=>{t.callbackScheduled=!1,Py(t),t.isCheckStableRunning=!0,vv(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Py(t)}function tV(t){let e=()=>{eV(t)},n=JL++;t._inner=t._inner.fork({name:"angular",properties:{[yv]:!0,[lh]:n,[lh+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(nV(u))return r.invokeTask(o,s,a,u);try{return KC(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),QC(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return KC(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!rV(u)&&e(),QC(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Py(t),vv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Py(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function KC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function QC(t){t._nesting--,vv(t)}var qc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Je;onMicrotaskEmpty=new Je;onStable=new Je;onError=new Je;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function nV(t){return HD(t,"__ignore_ng_zone__")}function rV(t){return HD(t,"__scheduler_tick__")}function HD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var _v=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=F({token:t,providedIn:"root",factory:()=>new t})}return t})(),$D=[0,1,2,3],qD=(()=>{class t{ngZone=N(we);scheduler=N(ln);errorHandler=N(Zt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){N(fo,{optional:!0})}execute(){let n=this.sequences.size>0;n&&me(16),this.executing=!0;for(let r of $D)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&me(17)}register(n){let{view:r}=n;r!==void 0?((r[to]??=[]).push(n),ci(r),r[K]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Ah.AFTER_NEXT_RENDER,n):n()}static \u0275prov=F({token:t,providedIn:"root",factory:()=>new t})}return t})(),dh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[to];e&&(this.view[to]=e.filter(n=>n!==this))}};function zD(t,e){let n=e?.injector??N(Ze);return Yn("NgAfterRender"),oV(t,n,e,!1)}function iV(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function oV(t,e,n,r){let i=e.get(_v);i.impl??=e.get(qD);let o=e.get(fo,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(Ot):null,a=e.get(bs,null,{optional:!0}),u=new dh(i.impl,iV(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}function Rh(t){return t+1}function Hs(t,e){let n=t[B],r=Rh(e.index);return t[r]}function sV(t,e,n){let r=t[B],i=Rh(e);t[i]=n}function $s(t,e){let n=Rh(e.index);return t.data[n]}function aV(t,e,n){let r=Rh(e);t.data[r]=n}function cV(t,e,n){let r=e[B],i=$s(r,n);switch(t){case Ke.Complete:return i.primaryTmplIndex;case Ke.Loading:return i.loadingTmplIndex;case Ke.Error:return i.errorTmplIndex;case Ke.Placeholder:return i.placeholderTmplIndex;default:return null}}function YC(t,e){return e===Ke.Placeholder?t.placeholderBlockConfig?.[GC]??null:e===Ke.Loading?t.loadingBlockConfig?.[GC]??null:null}function uV(t){return t.loadingBlockConfig?.[zL]??null}function ZC(t,e){if(!t||t.length===0)return e;let n=new Set(t);for(let r of e)n.add(r);return t.length===n.size?t:Array.from(n)}function lV(t,e){let n=e.primaryTmplIndex+Ne;return ro(t,n)}function dV(t,e,n){let r=n.get(we);return wO(t,()=>r.run(e),()=>r.runOutsideAngular(()=>EO()))}function hV(t,e,n){return n==null?t:n>=0?Om(n,t):t[e.index][at]??null}function fV(t,e){return Dd(Ne+e,t)}function pV(t,e,n,r,i,o,s){let a=t[Jt],u=a.get(we),l;function h(){if(zn(t)){l.destroy();return}let p=Hs(t,e),g=p[Qc];if(g!==gv.Initial&&g!==Ke.Placeholder){l.destroy();return}let y=hV(t,e,r);if(!y||(l.destroy(),zn(y)))return;let E=fV(y,n),D=i(E,()=>{u.run(()=>{t!==y&&Nd(y,D),o()})},a);t!==y&&Mc(y,D),VD(s,p,D)}l=zD({read:h},{injector:a})}var gV=(()=>{class t{cachedInjectors=new Map;getOrCreateInjector(n,r,i,o){if(!this.cachedInjectors.has(n)){let s=i.length>0?Bs(i,r,o):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:t,providedIn:"environment",factory:()=>new t})}return t})();var GD=new U("");function ay(t,e,n){return t.get(gV).getOrCreateInjector(e,t,n,"")}function mV(t,e,n){if(t instanceof Rs){let i=t.injector,o=t.parentInjector,s=ay(o,e,n);return new Rs(i,s)}let r=t.get(Ge);if(r!==t){let i=ay(r,e,n);return new Rs(t,i)}return ay(t,e,n)}function di(t,e,n,r=!1){let i=n[Ye],o=i[B];if(zn(i))return;let s=Hs(i,e),a=s[Qc],u=s[YL];if(!(u!==null&&t<u)&&JC(a,t)&&JC(s[GL]??-1,t)){let l=$s(o,e),p=!r&&!0&&(uV(l)!==null||YC(l,Ke.Loading)!==null||YC(l,Ke.Placeholder))?IV:vV;try{p(t,s,n,e,i)}catch(g){sv(i,g)}}}function yV(t,e){let n=t[oi]?.findIndex(i=>i.data[Ky]===e[Qc])??-1;return{dehydratedView:n>-1?t[oi][n]:null,dehydratedViewIx:n}}function vV(t,e,n,r,i){me(20);let o=cV(t,i,r);if(o!==null){e[Qc]=t;let s=i[B],a=o+Ne,u=ro(s,a),l=0;lv(n,l);let h;if(t===Ke.Complete){let E=$s(s,r),D=E.providers;D&&D.length>0&&(h=mV(i[Jt],E,D))}let{dehydratedView:p,dehydratedViewIx:g}=yV(n,e),y=Fs(i,u,null,{injector:h,dehydratedView:p});if(js(n,y,l,ao(u,p)),Ch(y,2),g>-1&&n[oi]?.splice(g,1),(t===Ke.Complete||t===Ke.Error)&&Array.isArray(e[sy])){for(let E of e[sy])E();e[sy]=null}}me(21)}function JC(t,e){return t<e}function _V(t,e){let n=t[e.index];di(Ke.Placeholder,e,n)}function XC(t,e,n){t.loadingPromise.then(()=>{t.loadingState===Gt.COMPLETE?di(Ke.Complete,e,n):t.loadingState===Gt.FAILED&&di(Ke.Error,e,n)})}var IV=null;var Iv=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Ev=new U("");function po(t){return!!t&&typeof t.then=="function"}function WD(t){return!!t&&typeof t.subscribe=="function"}var KD=new U("");var wv=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=N(KD,{optional:!0})??[];injector=N(Ze);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=st(this.injector,i);if(po(o))n.push(o);else if(WD(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Nh=new U("");function QD(){Yg(()=>{let t="";throw new j(600,t)})}function YD(t){return t.isBoundToModule}var EV=10;var gi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=N(zt);afterRenderManager=N(_v);zonelessEnabled=N(Oc);rootEffectScheduler=N(Lc);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ze;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=N(Wn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ae(n=>!n))}constructor(){N(fo,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=N(Ge);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ze.NULL){return this._injector.get(we).run(()=>{me(10);let s=n instanceof Sh;if(!this._injector.get(wv).done){let E="";throw new j(405,E)}let u;s?u=n:u=this._injector.get(Kc).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=YD(u)?void 0:this._injector.get(xs),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Ev,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Fc(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),me(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){me(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ah.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=W(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,W(n),this.afterTick.next(),me(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(co,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<EV;)me(14),this.synchronizeOnce(),me(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Nc(i))continue;let o=r&&!this.zonelessEnabled?0:1;uv(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Nc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Fc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Nh,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Fc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Fc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ZD(t,e,n){let r=e[Jt],i=e[B];if(t.loadingState!==Gt.NOT_STARTED)return t.loadingPromise??Promise.resolve();let o=Hs(e,n),s=lV(i,t);t.loadingState=Gt.IN_PROGRESS,Kd(1,o);let a=t.dependencyResolverFn,u=r.get(li).add();return a?(t.loadingPromise=Promise.allSettled(a()).then(l=>{let h=!1,p=[],g=[];for(let y of l)if(y.status==="fulfilled"){let E=y.value,D=Ir(E)||Cc(E);if(D)p.push(D);else{let R=Cm(E);R&&g.push(R)}}else{h=!0;break}if(h){if(t.loadingState=Gt.FAILED,t.errorTmplIndex===null){let y="",E=new j(-750,!1);sv(e,E)}}else{t.loadingState=Gt.COMPLETE;let y=s.tView;if(p.length>0){y.directiveRegistry=ZC(y.directiveRegistry,p);let E=p.map(R=>R.type),D=bd(!1,...E);t.providers=D}g.length>0&&(y.pipeRegistry=ZC(y.pipeRegistry,g))}}),t.loadingPromise.finally(()=>{t.loadingPromise=null,u()})):(t.loadingPromise=Promise.resolve().then(()=>{t.loadingPromise=null,t.loadingState=Gt.COMPLETE,u()}),t.loadingPromise)}function wV(t,e){return e[Jt].get(GD,null,{optional:!0})?.behavior!==mv.Manual}function TV(t,e,n){let r=e[B],i=e[n.index];if(!wV(t,e))return;let o=Hs(e,n),s=$s(r,n);switch(FD(o),s.loadingState){case Gt.NOT_STARTED:di(Ke.Loading,n,i),ZD(s,e,n),s.loadingState===Gt.IN_PROGRESS&&XC(s,n,i);break;case Gt.IN_PROGRESS:di(Ke.Loading,n,i),XC(s,n,i);break;case Gt.COMPLETE:di(Ke.Complete,n,i);break;case Gt.FAILED:di(Ke.Error,n,i);break;default:}}function bV(t,e,n){return t===0?eS(e,n):t===2?!eS(e,n):!0}function CV(t){return t!=null&&(t&1)===1}function eS(t,e){let n=t[Jt],r=$s(t[B],e),i=xS(n),o=CV(r.flags),a=Hs(t,e)[QL]!==null;return!(o&&a&&i)}function SV(t,e,n,r,i,o,s,a,u,l){let h=Q(),p=Be(),g=t+Ne,y=uo(h,p,t,null,0,0),E=h[Jt];if(p.firstCreatePass){Yn("NgDefer");let qe={primaryTmplIndex:e,loadingTmplIndex:r??null,placeholderTmplIndex:i??null,errorTmplIndex:o??null,placeholderBlockConfig:null,loadingBlockConfig:null,dependencyResolverFn:n??null,loadingState:Gt.NOT_STARTED,loadingPromise:null,providers:null,hydrateTriggers:null,debug:null,flags:l??0};u?.(p,qe,a,s),aV(p,g,qe)}let D=h[g];RD(D,y,h);let R=null,x=null;if(D[oi]?.length>0){let qe=D[oi][0].data;x=qe[Wy]??null,R=qe[Ky]}let H=[null,gv.Initial,null,null,null,null,x,R,null,null];sV(h,g,H);let G=null;x!==null&&(G=E.get(MS),G.add(x,{lView:h,tNode:y,lContainer:D}));let Ie=()=>{FD(H),x!==null&&G?.cleanup([x])};VD(0,H,()=>Nd(h,Ie)),Mc(h,Ie)}function DV(t,e){let n=Q(),r=ct();bV(0,n,r)&&(_V(n,r),pV(n,r,t,e,dV,()=>TV(0,n,r),0))}function Yc(t,e,n,r){let i=Q(),o=Ts();if(Qn(i,o,e)){let s=Be(),a=Ym();y1(a,i,t,e,n,r)}return Yc}var xy=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function cy(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function AV(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=cy(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),y=e[u],E=cy(s,g,u,y,n);if(E!==0){E<0&&t.updateValue(s,y),s--,u--;continue}let D=n(o,l),R=n(s,g),x=n(o,h);if(Object.is(x,R)){let H=n(u,y);Object.is(H,D)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new hh,i??=nS(t,o,s,n),ky(t,r,o,x))t.updateValue(o,h),o++,s++;else if(i.has(x))r.set(D,t.detach(o)),s--;else{let H=t.create(o,e[o]);t.attach(o,H),o++,s++}}for(;o<=u;)tS(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=cy(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new hh,i??=nS(t,o,s,n);let y=n(o,p);if(ky(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let E=n(o,h);r.set(E,t.detach(o)),s--}}}for(;!l.done;)tS(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function ky(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function tS(t,e,n,r,i){if(ky(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function nS(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var hh=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Tv(t,e,n,r,i,o,s,a){Yn("NgControlFlow");let u=Q(),l=Be(),h=An(l.consts,o);return uo(u,l,t,e,n,r,i,h,256,s,a),bv}function bv(t,e,n,r,i,o,s,a){Yn("NgControlFlow");let u=Q(),l=Be(),h=An(l.consts,o);return uo(u,l,t,e,n,r,i,h,512,s,a),bv}function Cv(t,e){Yn("NgControlFlow");let n=Q(),r=Ts(),i=n[r]!==Lt?n[r]:-1,o=i!==-1?fh(n,Ne+i):void 0,s=0;if(Qn(n,r,t)){let a=W(null);try{if(o!==void 0&&lv(o,s),t!==-1){let u=Ne+t,l=fh(n,u),h=Fy(n[B],u),p=vD(l,h,n),g=Fs(n,h,e,{dehydratedView:p});js(l,g,s,ao(h,p))}}finally{W(a)}}else if(o!==void 0){let a=mD(o,s);a!==void 0&&(a[We]=e)}}var Oy=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-at}};function Sv(t){return t}var Ly=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Dv(t,e,n,r,i,o,s,a,u,l,h,p,g){Yn("NgControlFlow");let y=Q(),E=Be(),D=u!==void 0,R=Q(),x=a?s.bind(R[kt][We]):s,H=new Ly(D,x);R[Ne+t]=H,uo(y,E,t+1,e,n,r,i,An(E.consts,o),256),D&&uo(y,E,t+2,u,l,h,p,An(E.consts,g),512)}var Vy=class extends xy{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-at}at(e){return this.getLView(e)[We].$implicit}attach(e,n){let r=n[Ji];this.needsIndexUpdate||=e!==this.length,js(this.lContainer,n,e,ao(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,RV(this.lContainer,e)}create(e,n){let r=rh(this.lContainer,this.templateTNode.tView.ssrId),i=Fs(this.hostLView,this.templateTNode,new Oy(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Th(e[B],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[We].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[We].$index=e}getLView(e){return NV(this.lContainer,e)}};function Av(t){let e=W(null),n=Gn();try{let r=Q(),i=r[B],o=r[n],s=n+1,a=fh(r,s);if(o.liveCollection===void 0){let l=Fy(i,s);o.liveCollection=new Vy(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(AV(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Ts(),h=u.length===0;if(Qn(r,l,h)){let p=n+2,g=fh(r,p);if(h){let y=Fy(i,p),E=vD(g,y,r),D=Fs(r,y,void 0,{dehydratedView:E});js(g,D,0,ao(y,E))}else i.firstUpdatePass&&B1(g),lv(g,0)}}}finally{W(e)}}function fh(t,e){return t[e]}function RV(t,e){return Bc(t,e)}function NV(t,e){return mD(t,e)}function Fy(t,e){return ro(t,e)}function ut(t,e,n){let r=Q(),i=Ts();if(Qn(r,i,e)){let o=Be(),s=Ym();l1(s,r,t,e,r[Oe],n)}return ut}function jy(t,e,n,r,i){av(e,t,n,i?"class":"style",r)}function Te(t,e,n,r){let i=Q(),o=i[B],s=t+Ne,a=o.firstCreatePass?wD(s,i,2,e,m1,cC(),n,r):o.data[s];if(iD(a,i,t,e,JD),Sd(a)){let u=i[B];rD(u,i,a),OS(u,a,i)}return r!=null&&ov(i,a),Te}function ye(){let t=Be(),e=ct(),n=oD(e);return t.firstCreatePass&&TD(t,n),Um(n)&&Bm(),Fm(),n.classesWithoutHost!=null&&Xk(n)&&jy(t,n,Q(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&eO(n)&&jy(t,n,Q(),n.stylesWithoutHost,!1),ye}function Vt(t,e,n,r){return Te(t,e,n,r),ye(),Vt}function wt(t,e,n,r){let i=Q(),o=i[B],s=t+Ne,a=o.firstCreatePass?nL(s,o,2,e,n,r):o.data[s];return iD(a,i,t,e,JD),r!=null&&ov(i,a),wt}function Tt(){let t=ct(),e=oD(t);return Um(e)&&Bm(),Fm(),Tt}function mi(t,e,n,r){return wt(t,e,n,r),Tt(),mi}var JD=(t,e,n,r,i)=>(Fd(!0),qS(e[Oe],r,EC()));function Rv(){return Q()}var Zc="en-US";var MV=Zc;function XD(t){typeof t=="string"&&(MV=t.toLowerCase().replace(/_/g,"-"))}function Se(t,e,n){let r=Q(),i=Be(),o=ct();return PV(i,r,r[Oe],o,t,e,n),Se}function qs(t,e,n){let r=Q(),i=Be(),o=ct();return(o.type&3||n)&&CD(o,i,r,n,r[Oe],t,e,Wd(o,r,e)),qs}function PV(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Wd(r,e,o),CD(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Wd(r,e,o),jC(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Wd(r,e,o),jC(r,e,p,i,i,u)}}function Nv(t=1){return IC(t)}function xV(t,e){let n=null,r=kO(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?$S(t,o,!0):VO(r,o))return i}return n}function Mv(t){let e=Q()[kt][xt];if(!e.projection){let n=t?t.length:1,r=e.projection=Gb(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?xV(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Mh(t,e=0,n,r,i,o){let s=Q(),a=Be(),u=r?t+1:null;u!==null&&uo(s,a,u,r,i,o,null,n);let l=Wc(a,Ne+t,16,null,n||null);l.projection===null&&(l.projection=e),qm();let p=!s[Ji]||jm();s[kt][xt].projection[l.projection]===null&&u!==null?kV(s,a,u):p&&!Ih(l)&&r1(a,s,l)}function kV(t,e,n){let r=Ne+n,i=e.data[r],o=t[r],s=rh(o,i.tView.ssrId),a=Fs(t,i,void 0,{dehydratedView:s});js(o,a,0,ao(i,s))}function Pv(t,e,n,r){CL(t,e,n,r)}function xv(t,e,n){bL(t,e,n)}function Jc(t){let e=Q(),n=Be(),r=Wm();kd(r+1);let i=fv(n,r);if(t.dirty&&rC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=AL(e,r);t.reset(o,fO),t.notifyOnChanges()}return!0}return!1}function Xc(){return TL(Q(),Wm())}function OV(t){let e=lC();return Mm(e,Ne+t)}function Hd(t,e){return t<<17|e<<2}function lo(t){return t>>17&32767}function LV(t){return(t&2)==2}function VV(t,e){return t&131071|e<<17}function Uy(t){return t|2}function ks(t){return(t&131068)>>2}function uy(t,e){return t&-131069|e<<2}function FV(t){return(t&1)===1}function By(t){return t|1}function jV(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=lo(s),u=ks(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ys(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=lo(t[a+1]);t[r+1]=Hd(g,a),g!==0&&(t[g+1]=uy(t[g+1],r)),t[a+1]=VV(t[a+1],r)}else t[r+1]=Hd(a,0),a!==0&&(t[a+1]=uy(t[a+1],r)),a=r;else t[r+1]=Hd(u,0),a===0?a=r:t[u+1]=uy(t[u+1],r),u=r;l&&(t[r+1]=Uy(t[r+1])),rS(t,h,r,!0),rS(t,h,r,!1),UV(e,h,t,r,o),s=Hd(a,u),o?e.classBindings=s:e.styleBindings=s}function UV(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&ys(o,e)>=0&&(n[r+1]=By(n[r+1]))}function rS(t,e,n,r){let i=t[n+1],o=e===null,s=r?lo(i):ks(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];BV(u,e)&&(a=!0,t[s+1]=r?By(l):Uy(l)),s=r?lo(l):ks(l)}a&&(t[n+1]=r?Uy(i):By(i))}function BV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ys(t,e)>=0:!1}var Nn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function HV(t){return t.substring(Nn.key,Nn.keyEnd)}function $V(t){return qV(t),eA(t,tA(t,0,Nn.textEnd))}function eA(t,e){let n=Nn.textEnd;return n===e?-1:(e=Nn.keyEnd=zV(t,Nn.key=e,n),tA(t,e,n))}function qV(t){Nn.key=0,Nn.keyEnd=0,Nn.value=0,Nn.valueEnd=0,Nn.textEnd=t.length}function tA(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function zV(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function pn(t,e){return WV(t,e,null,!0),pn}function kv(t){KV(eF,GV,t,!0)}function GV(t,e){for(let n=$V(e);n>=0;n=eA(e,n))wd(t,HV(e),!0)}function WV(t,e,n,r){let i=Q(),o=Be(),s=Pd(2);if(o.firstUpdatePass&&rA(o,t,s,r),e!==Lt&&Qn(i,s,e)){let a=o.data[Gn()];iA(o,a,i,i[Oe],t,i[s+1]=nF(e,n),r,s)}}function KV(t,e,n,r){let i=Be(),o=Pd(2);i.firstUpdatePass&&rA(i,null,o,r);let s=Q();if(n!==Lt&&Qn(s,o,n)){let a=i.data[Gn()];if(oA(a,r)&&!nA(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=vd(u,n||"")),jy(i,a,s,n,r)}else tF(i,a,s,s[Oe],s[o+1],s[o+1]=XV(t,e,n),r,o)}}function nA(t,e){return e>=t.expandoStartIndex}function rA(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Gn()],s=nA(t,n);oA(o,r)&&e===null&&!s&&(e=!1),e=QV(i,o,e,r),jV(i,o,e,n,s,r)}}function QV(t,e,n,r){let i=mC(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=ly(null,t,e,n,r),n=zc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=ly(i,t,e,n,r),o===null){let u=YV(t,e,r);u!==void 0&&Array.isArray(u)&&(u=ly(null,t,e,u[1],r),u=zc(u,e.attrs,r),ZV(t,e,r,u))}else o=JV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function YV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ks(r)!==0)return t[lo(r)]}function ZV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[lo(i)]=r}function JV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=zc(r,s,n)}return zc(r,e.attrs,n)}function ly(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=zc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function zc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),wd(t,s,n?!0:e[++o]))}return t===void 0?null:t}function XV(t,e,n){if(n==null||n==="")return Pt;let r=[],i=Gc(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function eF(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&wd(t,r,n)}function tF(t,e,n,r,i,o,s,a){i===Lt&&(i=Pt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,E=null,D;h===p?(u+=2,l+=2,g!==y&&(E=p,D=y)):p===null||h!==null&&h<p?(u+=2,E=h):(l+=2,E=p,D=y),E!==null&&iA(t,e,n,r,E,D,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function iA(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=FV(l)?iS(u,e,n,i,ks(l),s):void 0;if(!ph(h)){ph(o)||LV(l)&&(o=iS(u,null,n,i,a,s));let p=Dd(Gn(),n);o1(r,s,p,i,o)}}function iS(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===Lt&&(g=p?Pt:void 0);let y=p?Td(g,r):h===r?g:void 0;if(l&&!ph(y)&&(y=Td(u,r)),ph(y)&&(a=y,s))return a;let E=t[i+1];i=s?lo(E):ks(E)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Td(u,r))}return a}function ph(t){return t!==void 0}function nF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=vr(Gc(t)))),t}function oA(t,e){return(t.flags&(e?8:16))!==0}function He(t,e=""){let n=Q(),r=Be(),i=t+Ne,o=r.firstCreatePass?Wc(r,i,1,e,null):r.data[i],s=rF(r,n,o,e,t);n[i]=s,Vd()&&rv(r,n,s,o),Es(o,!1)}var rF=(t,e,n,r,i)=>(Fd(!0),BO(e[Oe],r));function iF(t,e,n,r=""){return Qn(t,Ts(),n)?e+Zi(n)+r:Lt}function oF(t,e,n,r,i,o=""){let s=dC(),a=bD(t,s,n,i);return Pd(2),a?e+Zi(n)+r+Zi(i)+o:Lt}function yi(t){return tn("",t),yi}function tn(t,e,n){let r=Q(),i=iF(r,t,e,n);return i!==Lt&&aA(r,Gn(),i),tn}function sA(t,e,n,r,i){let o=Q(),s=oF(o,t,e,n,r,i);return s!==Lt&&aA(o,Gn(),s),sA}function aA(t,e,n){let r=Dd(e,t);HO(t[Oe],r,n)}function sF(t,e,n){let r=Be();if(r.firstCreatePass){let i=Sn(t);Hy(n,r.data,r.blueprint,i,!0),Hy(e,r.data,r.blueprint,i,!1)}}function Hy(t,e,n,r,i){if(t=ot(t),Array.isArray(t))for(let o=0;o<t.length;o++)Hy(t[o],e,n,r,i);else{let o=Be(),s=Q(),a=ct(),u=Wi(t)?t:ot(t.provide),l=Dm(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Wi(t)||!t.multi){let y=new so(l,i,ge,null),E=hy(u,e,i?h:h+g,p);E===-1?(py(Xd(a,s),o,u),dy(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[E]=y,s[E]=y)}else{let y=hy(u,e,h+g,p),E=hy(u,e,h,h+g),D=y>=0&&n[y],R=E>=0&&n[E];if(i&&!R||!i&&!D){py(Xd(a,s),o,u);let x=uF(i?cF:aF,n.length,i,r,l,t);!i&&R&&(n[E].providerFactory=x),dy(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),s.push(x)}else{let x=cA(n[i?E:y],l,!i&&r);dy(o,t,y>-1?y:E,x)}!i&&r&&R&&n[E].componentProviders++}}}function dy(t,e,n,r){let i=Wi(e),o=Jb(e);if(i||o){let u=(o?ot(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function cA(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function hy(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function aF(t,e,n,r,i){return $y(this.multi,[])}function cF(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=jc(r,r[B],this.providerFactory.index,i);s=u.slice(0,a),$y(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],$y(o,s);return s}function $y(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function uF(t,e,n,r,i,o){let s=new so(t,n,ge,null);return s.multi=[],s.index=e,s.componentProviders=0,cA(s,i,r&&!n),s}function Ph(t,e=[]){return n=>{n.providersResolver=(r,i)=>sF(r,i?i(t):t,e)}}function lF(t,e,n){let r=Md()+t,i=Q();return i[r]===Lt?hv(i,r,n?e.call(n):e()):rL(i,r)}function dF(t,e,n,r,i){return fF(Q(),Md(),t,e,n,r,i)}function uA(t,e){let n=t[e];return n===Lt?void 0:n}function hF(t,e,n,r,i,o){let s=e+n;return Qn(t,s,i)?hv(t,s+1,o?r.call(o,i):r(i)):uA(t,s+1)}function fF(t,e,n,r,i,o,s){let a=e+n;return bD(t,a,i,o)?hv(t,a+2,s?r.call(s,i,o):r(i,o)):uA(t,a+2)}function pF(t,e){let n=Be(),r,i=t+Ne;n.firstCreatePass?(r=gF(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=ti(r.type,!0)),s,a=Mt(ge);try{let u=Jd(!1),l=o();return Jd(u),Pm(n,Q(),i,l),l}finally{Mt(a)}}function gF(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function mF(t,e,n){let r=t+Ne,i=Q(),o=Mm(i,r);return yF(i,r)?hF(i,Md(),e,o.transform,n,o):o.transform(n)}function yF(t,e){return t[B].data[e].pure}var gh=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ov=(()=>{class t{compileModuleSync(n){return new uh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=bm(n),o=BS(i.declarations).reduce((s,a)=>{let u=Ir(a);return u&&s.push(new Ps(u)),s},[]);return new gh(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var vF=(()=>{class t{zone=N(we);changeDetectionScheduler=N(ln);applicationRef=N(gi);applicationErrorHandler=N(zt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lA({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new we(Y(k({},dA()),{scheduleInRootZone:n})),[{provide:we,useFactory:t},{provide:_r,multi:!0,useFactory:()=>{let r=N(vF,{optional:!0});return()=>r.initialize()}},{provide:_r,multi:!0,useFactory:()=>{let r=N(_F);return()=>{r.initialize()}}},e===!0?{provide:Xm,useValue:!0}:[],{provide:jd,useValue:n??UD},{provide:zt,useFactory:()=>{let r=N(we),i=N(Ge),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Zt),o.handleError(s))})}}}]}function dA(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var _F=(()=>{class t{subscription=new je;initialized=!1;zone=N(we);pendingTasks=N(Wn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{we.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Lv=(()=>{class t{applicationErrorHandler=N(zt);appRef=N(gi);taskService=N(Wn);ngZone=N(we);zonelessEnabled=N(Oc);tracing=N(fo,{optional:!0});disableScheduling=N(Xm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(lh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(jd,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof qc||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?WC:BD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(lh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,WC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function IF(){return Yn("NgZoneless"),Tn([{provide:ln,useExisting:Lv},{provide:we,useClass:qc},{provide:Oc,useValue:!0},{provide:jd,useValue:!1},[]])}function EF(){return typeof $localize<"u"&&$localize.locale||Zc}var Vv=new U("",{providedIn:"root",factory:()=>N(Vv,{optional:!0,skipSelf:!0})||EF()});var xh=class{destroyed=!1;listeners=null;errorHandler=N(Zt,{optional:!0});destroyRef=N(Ot);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new j(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed){console.warn(ms(953,!1));return}if(this.listeners===null)return;let n=W(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{W(n)}}};function xn(t){return Ob(t)}function Ft(t,e){return dd(t,e?.equal)}var Fv=class{[Nt];constructor(e){this[Nt]=e}destroy(){this[Nt].destroy()}};function zs(t,e){let n=e?.injector??N(Ze),r=e?.manualCleanup!==!0?n.get(Ot):null,i,o=n.get(bs,null,{optional:!0}),s=n.get(ln);return o!==null?(i=bF(o.view,s,t),r instanceof Ec&&r._lView===o.view&&(r=null)):i=CF(t,n.get(Lc),s),i.injector=n,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Fv(i)}var hA=Y(k({},Xr),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:io,run(){if(this.dirty=!1,this.hasRun&&!hs(this))return;this.hasRun=!0;let t=r=>(this.cleanupFns??=[]).push(r),e=ei(this),n=ws(!1);try{this.maybeCleanup(),this.fn(t)}finally{ws(n),qi(this,e)}},maybeCleanup(){if(!this.cleanupFns?.length)return;let t=W(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],W(t)}}}),wF=Y(k({},hA),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){fs(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),TF=Y(k({},hA),{consumerMarkedDirty(){this.view[K]|=8192,ci(this.view),this.notifier.notify(13)},destroy(){fs(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Er]?.delete(this)}});function bF(t,e,n){let r=Object.create(TF);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=n,t[Er]??=new Set,t[Er].add(r),r.consumerMarkedDirty(r),r}function CF(t,e,n){let r=Object.create(wF);return r.fn=t,r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}var gA=Symbol("InputSignalNode#UNSET"),VF=Y(k({},hd),{transformFn:void 0,applyValueToInputSignal(t,e){ps(t,e)}});function mA(t,e){let n=Object.create(VF);n.value=t,n.transformFn=e?.transform;function r(){if(ds(n),n.value===gA){let i=null;throw new j(-950,i)}return n.value}return r[Nt]=n,r}var Oh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>mh(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},FF=new U("");FF.__NG_ELEMENT_ID__=t=>{let e=ct();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new j(204,!1)};function nn(t){return new xh}function fA(t,e){return mA(t,e)}function jF(t){return mA(gA,t)}var fe=(fA.required=jF,fA);var Gs=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},yA=new Gs("20.1.2");var jv=new U(""),UF=new U("");function eu(t){return!t.moduleRef}function BF(t){let e=eu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(we);return n.run(()=>{eu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(zt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),eu(t)){let o=()=>e.destroy(),s=t.platformInjector.get(jv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(jv);s.add(o),t.moduleRef.onDestroy(()=>{Fc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return $F(r,n,()=>{let o=e.get(Wn),s=o.add(),a=e.get(wv);return a.runInitializers(),a.donePromise.then(()=>{try{let u=e.get(Vv,Zc);if(XD(u||Zc),!e.get(UF,!0))return eu(t)?e.get(gi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(eu(t)){let h=e.get(gi);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return HF?.(t.moduleRef,t.allPlatformModules),t.moduleRef}finally{o.remove(s)}})})})}var HF;function $F(t,e,n){try{let r=n();return po(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var kh=null;function qF(t=[],e){return Ze.create({name:e,providers:[{provide:Sc,useValue:"platform"},{provide:jv,useValue:new Set([()=>kh=null])},...t]})}function zF(t=[]){if(kh)return kh;let e=qF(t);return kh=e,QD(),GF(e),e}function GF(t){let e=t.get(vh,null);st(t,()=>{e?.forEach(n=>n())})}function Uv(){return!1}var tu=(()=>{class t{static __NG_ELEMENT_ID__=WF}return t})();function WF(t){return KF(ct(),Q(),(t&16)===16)}function KF(t,e,n){if(ai(t)&&!n){let r=fn(t.index,e);return new hi(r,r)}else if(t.type&175){let r=e[kt];return new hi(r,e)}return null}function vA(t){me(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=zF(r),o=[lA({}),{provide:ln,useExisting:Lv},TC,...n||[]],s=new $c({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return BF({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{me(9)}}function nu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var EA=null;function gn(){return EA}function Bv(t){EA??=t}var ru=class{},Hv=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>N(wA),providedIn:"platform"})}return t})();var wA=(()=>{class t extends Hv{_location;_history;_doc=N(dt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gn().getBaseHref(this._doc)}onPopState(n){let r=gn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=gn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function TA(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function _A(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function vi(t){return t&&t[0]!=="?"?`?${t}`:t}var Ws=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>N(CA),providedIn:"root"})}return t})(),bA=new U(""),CA=(()=>{class t extends Ws{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return TA(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+vi(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+vi(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+vi(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(re(Hv),re(bA,8))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ks=(()=>{class t{_subject=new ze;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=ZF(_A(IA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+vi(r))}normalize(n){return t.stripTrailingSlash(YF(this._basePath,IA(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vi(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+vi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=vi;static joinWithSlash=TA;static stripTrailingSlash=_A;static \u0275fac=function(r){return new(r||t)(re(Ws))};static \u0275prov=F({token:t,factory:()=>QF(),providedIn:"root"})}return t})();function QF(){return new Ks(re(Ws))}function YF(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function IA(t){return t.replace(/\/index.html$/,"")}function ZF(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function $v(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var iu=class{};var SA="browser";var Vh=new U(""),Kv=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(re(Vh),re(we))};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})(),ou=class{_doc;constructor(e){this._doc=e}manager},qv="ng-app-id";function DA(t){for(let e of t)e.remove()}function AA(t,e){let n=e.createElement("style");return n.textContent=t,n}function XF(t,e,n,r){let i=t.head?.querySelectorAll(`style[${qv}="${e}"],link[${qv}="${e}"]`);if(i)for(let o of i)o.removeAttribute(qv),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Gv(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Qv=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,XF(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,AA);r?.forEach(i=>this.addUsage(i,this.external,Gv))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(DA(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])DA(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,AA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Gv(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(re(dt),re(yh),re(_h,8),re(pi))};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})(),zv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Yv=/%COMP%/g;var NA="%COMP%",ej=`_nghost-${NA}`,tj=`_ngcontent-${NA}`,nj=!0,rj=new U("",{providedIn:"root",factory:()=>nj});function ij(t){return tj.replace(Yv,t)}function oj(t){return ej.replace(Yv,t)}function MA(t,e){return e.map(n=>n.replace(Yv,t))}var Zv=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new su(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Lh?i.applyToHost(n):i instanceof au&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case wr.Emulated:o=new Lh(u,l,r,this.appId,h,s,a,p,g);break;case wr.ShadowDom:return new Wv(u,l,n,r,s,a,this.nonce,p,g);default:o=new au(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(re(Kv),re(Qv),re(yh),re(rj),re(dt),re(pi),re(we),re(_h),re(fo,8))};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})(),su=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(zv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(RA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(RA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=zv[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=zv[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Tr.DashCase|Tr.Important)?e.style.setProperty(n,r,i&Tr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Tr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=gn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function RA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Wv=class extends su{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=MA(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=Gv(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},au=class extends su{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?MA(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Lh=class extends au{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=ij(h),this.hostAttr=oj(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Fh=class t extends ru{supportsDOMEvents=!0;static makeCurrent(){Bv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=sj();return n==null?null:aj(n)}resetBaseElement(){cu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $v(document.cookie,e)}},cu=null;function sj(){return cu=cu||document.head.querySelector("base"),cu?cu.getAttribute("href"):null}function aj(t){return new URL(t,document.baseURI).pathname}var cj=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})(),xA=(()=>{class t extends ou{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(re(dt))};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})(),PA=["alt","control","meta","shift"],uj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lj={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},kA=(()=>{class t extends ou{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),PA.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=uj[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),PA.forEach(s=>{if(s!==i){let a=lj[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(re(dt))};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})();function dj(t,e){return vA(k({rootComponent:t},hj(e)))}function hj(t){return{appProviders:[...yj,...t?.providers??[]],platformProviders:mj}}function fj(){Fh.makeCurrent()}function pj(){return new Zt}function gj(){return Gy(document),document}var mj=[{provide:pi,useValue:SA},{provide:vh,useValue:fj,multi:!0},{provide:dt,useFactory:gj}];var yj=[{provide:Sc,useValue:"root"},{provide:Zt,useFactory:pj},{provide:Vh,useClass:xA,multi:!0,deps:[dt]},{provide:Vh,useClass:kA,multi:!0,deps:[dt]},Zv,Qv,Kv,{provide:co,useExisting:Zv},{provide:iu,useClass:cj},[]];var OA=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(re(dt))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var te="primary",Tu=Symbol("RouteTitle"),n_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function yo(t){return new n_(t)}function $A(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function _j(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Zn(t[n],e[n]))return!1;return!0}function Zn(t,e){let n=t?r_(t):void 0,r=e?r_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!qA(t[i],e[i]))return!1;return!0}function r_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function qA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function zA(t){return t.length>0?t[t.length-1]:null}function Ar(t){return jg(t)?t:po(t)?Ve(Promise.resolve(t)):Z(t)}var Ij={exact:WA,subset:KA},GA={exact:Ej,subset:wj,ignored:()=>!0};function LA(t,e,n){return Ij[n.paths](t.root,e.root,n.matrixParams)&&GA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Ej(t,e){return Zn(t,e)}function WA(t,e,n){if(!go(t.segments,e.segments)||!Bh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!WA(t.children[r],e.children[r],n))return!1;return!0}function wj(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qA(t[n],e[n]))}function KA(t,e,n){return QA(t,e,e.segments,n)}function QA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!go(i,n)||e.hasChildren()||!Bh(i,n,r))}else if(t.segments.length===n.length){if(!go(t.segments,n)||!Bh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!KA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!go(t.segments,i)||!Bh(t.segments,i,r)||!t.children[te]?!1:QA(t.children[te],e,o,r)}}function Bh(t,e,n){return e.every((r,i)=>GA[n](t[i].parameters,r.parameters))}var Xn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ve([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yo(this.queryParams),this._queryParamMap}toString(){return Cj.serialize(this)}},ve=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hh(this)}},_i=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=yo(this.parameters),this._parameterMap}toString(){return ZA(this)}};function Tj(t,e){return go(t,e)&&t.every((n,r)=>Zn(n.parameters,e[r].parameters))}function go(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function bj(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===te&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==te&&(n=n.concat(e(i,r)))}),n}var bu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>new vo,providedIn:"root"})}return t})(),vo=class{parse(e){let n=new o_(e);return new Xn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${uu(e.root,!0)}`,r=Aj(e.queryParams),i=typeof e.fragment=="string"?`#${Sj(e.fragment)}`:"";return`${n}${r}${i}`}},Cj=new vo;function Hh(t){return t.segments.map(e=>ZA(e)).join("/")}function uu(t,e){if(!t.hasChildren())return Hh(t);if(e){let n=t.children[te]?uu(t.children[te],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==te&&r.push(`${i}:${uu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=bj(t,(r,i)=>i===te?[uu(t.children[te],!1)]:[`${i}:${uu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[te]!=null?`${Hh(t)}/${n[0]}`:`${Hh(t)}/(${n.join("//")})`}}function YA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jh(t){return YA(t).replace(/%3B/gi,";")}function Sj(t){return encodeURI(t)}function i_(t){return YA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $h(t){return decodeURIComponent(t)}function VA(t){return $h(t.replace(/\+/g,"%20"))}function ZA(t){return`${i_(t.path)}${Dj(t.parameters)}`}function Dj(t){return Object.entries(t).map(([e,n])=>`;${i_(e)}=${i_(n)}`).join("")}function Aj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${jh(n)}=${jh(i)}`).join("&"):`${jh(n)}=${jh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Rj=/^[^\/()?;#]+/;function Jv(t){let e=t.match(Rj);return e?e[0]:""}var Nj=/^[^\/()?;=#]+/;function Mj(t){let e=t.match(Nj);return e?e[0]:""}var Pj=/^[^=?&#]+/;function xj(t){let e=t.match(Pj);return e?e[0]:""}var kj=/^[^&#]+/;function Oj(t){let e=t.match(kj);return e?e[0]:""}var o_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[te]=new ve(e,n)),r}parseSegment(){let e=Jv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new _i($h(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Mj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Jv(this.remaining);i&&(r=i,this.capture(r))}e[$h(n)]=$h(r)}parseQueryParam(e){let n=xj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Oj(this.remaining);s&&(r=s,this.capture(r))}let i=VA(n),o=VA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Jv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=te);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[te]:new ve([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function JA(t){return t.segments.length>0?new ve([],{[te]:t}):t}function XA(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=XA(i);if(r===te&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ve(t.segments,e);return Lj(n)}function Lj(t){if(t.numberOfChildren===1&&t.children[te]){let e=t.children[te];return new ve(t.segments.concat(e.segments),e.children)}return t}function Ii(t){return t instanceof Xn}function e0(t,e,n=null,r=null){let i=t0(t);return n0(i,e,n,r)}function t0(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new ve(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=JA(r);return e??i}function n0(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Xv(i,i,i,n,r);let o=Vj(e);if(o.toRoot())return Xv(i,i,new ve([],{}),n,r);let s=Fj(o,i,t),a=s.processChildren?du(s.segmentGroup,s.index,o.commands):i0(s.segmentGroup,s.index,o.commands);return Xv(i,s.segmentGroup,a,n,r)}function qh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function pu(t){return typeof t=="object"&&t!=null&&t.outlets}function Xv(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=r0(t,e,n);let a=JA(XA(s));return new Xn(a,o,i)}function r0(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=r0(o,e,n)}),new ve(t.segments,r)}var zh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&qh(r[0]))throw new j(4003,!1);let i=r.find(pu);if(i&&i!==zA(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Vj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new zh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new zh(n,e,r)}var Zs=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function Fj(t,e,n){if(t.isAbsolute)return new Zs(e,!0,0);if(!n)return new Zs(e,!1,NaN);if(n.parent===null)return new Zs(n,!0,0);let r=qh(t.commands[0])?0:1,i=n.segments.length-1+r;return jj(n,i,t.numberOfDoubleDots)}function jj(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Zs(r,!1,i-o)}function Uj(t){return pu(t[0])?t[0].outlets:{[te]:t}}function i0(t,e,n){if(t??=new ve([],{}),t.segments.length===0&&t.hasChildren())return du(t,e,n);let r=Bj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ve(t.segments.slice(0,r.pathIndex),{});return o.children[te]=new ve(t.segments.slice(r.pathIndex),t.children),du(o,0,i)}else return r.match&&i.length===0?new ve(t.segments,{}):r.match&&!t.hasChildren()?s_(t,e,n):r.match?du(t,0,i):s_(t,e,n)}function du(t,e,n){if(n.length===0)return new ve(t.segments,{});{let r=Uj(n),i={};if(Object.keys(r).some(o=>o!==te)&&t.children[te]&&t.numberOfChildren===1&&t.children[te].segments.length===0){let o=du(t.children[te],e,n);return new ve(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=i0(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ve(t.segments,i)}}function Bj(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(pu(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!jA(u,l,s))return o;r+=2}else{if(!jA(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function s_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(pu(o)){let u=Hj(o.outlets);return new ve(r,u)}if(i===0&&qh(n[0])){let u=t.segments[e];r.push(new _i(u.path,FA(n[0]))),i++;continue}let s=pu(o)?o.outlets[te]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&qh(a)?(r.push(new _i(s,FA(a))),i+=2):(r.push(new _i(s,{})),i++)}return new ve(r,{})}function Hj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=s_(new ve([],{}),0,r))}),e}function FA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function jA(t,e,n){return t==n.path&&Zn(e,n.parameters)}var hu="imperative",ht=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ht||{}),on=class{id;url;constructor(e,n){this.id=e,this.url=n}},_o=class extends on{type=ht.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},On=class extends on{urlAfterRedirects;type=ht.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},jt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(jt||{}),gu=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(gu||{}),Jn=class extends on{reason;code;type=ht.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Sr=class extends on{reason;code;type=ht.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Xs=class extends on{error;target;type=ht.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},mu=class extends on{urlAfterRedirects;state;type=ht.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gh=class extends on{urlAfterRedirects;state;type=ht.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wh=class extends on{urlAfterRedirects;state;shouldActivate;type=ht.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Kh=class extends on{urlAfterRedirects;state;type=ht.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qh=class extends on{urlAfterRedirects;state;type=ht.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yh=class{route;type=ht.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zh=class{route;type=ht.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jh=class{snapshot;type=ht.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xh=class{snapshot;type=ht.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ef=class{snapshot;type=ht.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tf=class{snapshot;type=ht.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var yu=class{},ea=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function $j(t){return!(t instanceof yu)&&!(t instanceof ea)}function qj(t,e){return t.providers&&!t._injector&&(t._injector=Bs(t.providers,e,`Route: ${t.path}`)),t._injector??e}function kn(t){return t.outlet||te}function zj(t,e){let n=t.filter(r=>kn(r)===e);return n.push(...t.filter(r=>kn(r)!==e)),n}function ra(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var nf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ra(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ia(this.rootInjector)}},ia=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new nf(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(re(Ge))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=a_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=a_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=c_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return c_(e,this._root).map(n=>n.value)}};function a_(t,e){if(t===e.value)return e;for(let n of e.children){let r=a_(t,n);if(r)return r}return null}function c_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=c_(t,n);if(r.length)return r.unshift(e),r}return[]}var rn=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ys(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var vu=class extends rf{snapshot;constructor(e,n){super(e),this.snapshot=n,m_(this,e)}toString(){return this.snapshot.toString()}};function o0(t){let e=Gj(t),n=new mt([new _i("",{})]),r=new mt({}),i=new mt({}),o=new mt({}),s=new mt(""),a=new Dr(n,r,o,s,i,te,t,e.root);return a.snapshot=e.root,new vu(new rn(a,[]),e)}function Gj(t){let e={},n={},r={},i="",o=new mo([],e,r,i,n,te,t,null,{});return new _u("",new rn(o,[]))}var Dr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ae(l=>l[Tu]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>yo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>yo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function of(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),t.params),data:k(k({},e.data),t.data),resolve:k(k(k(k({},t.data),e.data),i?.data),t._resolvedData)}:r={params:k({},t.params),data:k({},t.data),resolve:k(k({},t.data),t._resolvedData??{})},i&&a0(i)&&(r.resolve[Tu]=i.title),r}var mo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Tu]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},_u=class extends rf{url;constructor(e,n){super(n),this.url=e,m_(this,n)}toString(){return s0(this._root)}};function m_(t,e){e.value._routerState=t,e.children.forEach(n=>m_(t,n))}function s0(t){let e=t.children.length>0?` { ${t.children.map(s0).join(", ")} } `:"";return`${t.value}${e}`}function e_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Zn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Zn(e.params,n.params)||t.paramsSubject.next(n.params),_j(e.url,n.url)||t.urlSubject.next(n.url),Zn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function u_(t,e){let n=Zn(t.params,e.params)&&Tj(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||u_(t.parent,e.parent))}function a0(t){return typeof t.title=="string"||t.title===null}var c0=new U(""),y_=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=te;activateEvents=new Je;deactivateEvents=new Je;attachEvents=new Je;detachEvents=new Je;routerOutletData=fe(void 0);parentContexts=N(ia);location=N(Us);changeDetector=N(tu);inputBinder=N(uf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new l_(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Re({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[fi]})}return t})(),l_=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Dr?this.route:e===ia?this.childContexts:e===c0?this.outletData:this.parent.get(e,n)}},uf=new U("");var v_=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=de({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Vt(0,"router-outlet")},dependencies:[y_],encapsulation:2})}return t})();function __(t){let e=t.children&&t.children.map(__),n=e?Y(k({},t),{children:e}):k({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=v_),n}function Wj(t,e,n){let r=Iu(t,e._root,n?n._root:void 0);return new vu(r,e)}function Iu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Kj(t,e,n);return new rn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Iu(t,a)),s}}let r=Qj(e.value),i=e.children.map(o=>Iu(t,o));return new rn(r,i)}}function Kj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Iu(t,r,i);return Iu(t,r)})}function Qj(t){return new Dr(new mt(t.url),new mt(t.params),new mt(t.queryParams),new mt(t.fragment),new mt(t.data),t.outlet,t.component,t)}var ta=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},u0="ngNavigationCancelingError";function sf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ii(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=l0(!1,jt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function l0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[u0]=!0,n.cancellationCode=e,n}function Yj(t){return d0(t)&&Ii(t.url)}function d0(t){return!!t&&t[u0]}var Zj=(t,e,n,r)=>ae(i=>(new d_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),d_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),e_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ys(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ys(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ys(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ys(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new tf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Xh(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(e_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),e_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},af=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Js=class{component;route;constructor(e,n){this.component=e,this.route=n}};function Jj(t,e,n){let r=t._root,i=e?e._root:null;return lu(r,i,n,[r.value])}function Xj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function oa(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!hm(t)?t:e.get(t):r}function lu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ys(e);return t.children.forEach(s=>{e2(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>fu(a,n.getContext(s),i)),i}function e2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=t2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new af(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?lu(t,e,a?a.children:null,r,i):lu(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Js(a.outlet.component,s))}else s&&fu(e,a,i),i.canActivateChecks.push(new af(r)),o.component?lu(t,null,a?a.children:null,r,i):lu(t,null,n,r,i);return i}function t2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!go(t.url,e.url);case"pathParamsOrQueryParamsChange":return!go(t.url,e.url)||!Zn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!u_(t,e)||!Zn(t.queryParams,e.queryParams);case"paramsChange":default:return!u_(t,e)}}function fu(t,e,n){let r=Ys(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?fu(s,e.children.getContext(o),n):fu(s,null,n):fu(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Js(e.outlet.component,i)):n.canDeactivateChecks.push(new Js(null,i)):n.canDeactivateChecks.push(new Js(null,i))}function Cu(t){return typeof t=="function"}function n2(t){return typeof t=="boolean"}function r2(t){return t&&Cu(t.canLoad)}function i2(t){return t&&Cu(t.canActivate)}function o2(t){return t&&Cu(t.canActivateChild)}function s2(t){return t&&Cu(t.canDeactivate)}function a2(t){return t&&Cu(t.canMatch)}function h0(t){return t instanceof fr||t?.name==="EmptyError"}var Uh=Symbol("INITIAL_VALUE");function na(){return un(t=>Zl(t.map(e=>e.pipe(gr(1),zg(Uh)))).pipe(ae(e=>{for(let n of e)if(n!==!0){if(n===Uh)return Uh;if(n===!1||c2(n))return n}return!0}),Ht(e=>e!==Uh),gr(1)))}function c2(t){return Ii(t)||t instanceof ta}function u2(t,e){return Ue(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Z(Y(k({},n),{guardsResult:!0})):l2(s,r,i,t).pipe(Ue(a=>a&&n2(a)?d2(r,o,t,e):Z(a)),ae(a=>Y(k({},n),{guardsResult:a})))})}function l2(t,e,n,r){return Ve(t).pipe(Ue(i=>m2(i.component,i.route,n,e,r)),mr(i=>i!==!0,!0))}function d2(t,e,n,r){return Ve(e).pipe($i(i=>cs(f2(i.route.parent,r),h2(i.route,r),g2(t,i.path,n),p2(t,i.route,n))),mr(i=>i!==!0,!0))}function h2(t,e){return t!==null&&e&&e(new ef(t)),Z(!0)}function f2(t,e){return t!==null&&e&&e(new Jh(t)),Z(!0)}function p2(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>fc(()=>{let s=ra(e)??n,a=oa(o,s),u=i2(a)?a.canActivate(e,t):st(s,()=>a(e,t));return Ar(u).pipe(mr())}));return Z(i).pipe(na())}function g2(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Xj(s)).filter(s=>s!==null).map(s=>fc(()=>{let a=s.guards.map(u=>{let l=ra(s.node)??n,h=oa(u,l),p=o2(h)?h.canActivateChild(r,t):st(l,()=>h(r,t));return Ar(p).pipe(mr())});return Z(a).pipe(na())}));return Z(o).pipe(na())}function m2(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=ra(e)??i,l=oa(a,u),h=s2(l)?l.canDeactivate(t,e,n,r):st(u,()=>l(t,e,n,r));return Ar(h).pipe(mr())});return Z(s).pipe(na())}function y2(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=oa(s,t),u=r2(a)?a.canLoad(e,n):st(t,()=>a(e,n));return Ar(u)});return Z(o).pipe(na(),f0(r))}function f0(t){return xg(lt(e=>{if(typeof e!="boolean")throw sf(t,e)}),ae(e=>e===!0))}function v2(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=oa(s,t),u=a2(a)?a.canMatch(e,n):st(t,()=>a(e,n));return Ar(u)});return Z(o).pipe(na(),f0(r))}var Eu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},wu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Qs(t){return os(new Eu(t))}function _2(t){return os(new j(4e3,!1))}function I2(t){return os(l0(!1,jt.GuardRejected))}var h_=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[te])return _2(`${e.redirectTo}`);i=i.children[te]}}applyRedirectCommands(e,n,r,i,o){return E2(n,i,o).pipe(ae(s=>{if(s instanceof Xn)throw new wu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new wu(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Xn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ve(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function E2(t,e,n){if(typeof t=="string")return Z(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Ar(st(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var f_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function w2(t,e,n,r,i){let o=p0(t,e,n);return o.matched?(r=qj(e,r),v2(r,e,n,i).pipe(ae(s=>s===!0?o:k({},f_)))):Z(o)}function p0(t,e,n){if(e.path==="**")return T2(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?k({},f_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||$A)(n,t,e);if(!i)return k({},f_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?k(k({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function T2(t){return{matched:!0,parameters:t.length>0?zA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function UA(t,e,n,r){return n.length>0&&S2(t,n,r)?{segmentGroup:new ve(e,C2(r,new ve(n,t.children))),slicedSegments:[]}:n.length===0&&D2(t,n,r)?{segmentGroup:new ve(t.segments,b2(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ve(t.segments,t.children),slicedSegments:n}}function b2(t,e,n,r){let i={};for(let o of n)if(lf(t,e,o)&&!r[kn(o)]){let s=new ve([],{});i[kn(o)]=s}return k(k({},r),i)}function C2(t,e){let n={};n[te]=e;for(let r of t)if(r.path===""&&kn(r)!==te){let i=new ve([],{});n[kn(r)]=i}return n}function S2(t,e,n){return n.some(r=>lf(t,e,r)&&kn(r)!==te)}function D2(t,e,n){return n.some(r=>lf(t,e,r))}function lf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function A2(t,e,n){return e.length===0&&!t.children[n]}var p_=class{};function R2(t,e,n,r,i,o,s="emptyOnly"){return new g_(t,e,n,r,i,s,o).recognize()}var N2=31,g_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new h_(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=UA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:n,rootSnapshot:r})=>{let i=new rn(r,n),o=new _u("",i),s=e0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new mo([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,te,n).pipe(ae(r=>({children:r,rootSnapshot:n})),pr(r=>{if(r instanceof wu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Eu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ae(s=>s instanceof rn?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ve(o).pipe($i(s=>{let a=r.children[s],u=zj(n,s);return this.processSegmentGroup(e,u,a,s,i)}),qg((s,a)=>(s.push(...a),s)),Jr(null),$g(),Ue(s=>{if(s===null)return Qs(r);let a=g0(s);return M2(a),Z(a)}))}processSegment(e,n,r,i,o,s,a){return Ve(n).pipe($i(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(pr(l=>{if(l instanceof Eu)return Z(null);throw l}))),mr(u=>!!u),pr(u=>{if(h0(u))return A2(r,i,o)?Z(new p_):Qs(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return kn(r)!==s&&(s===te||!lf(i,o,r))?Qs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Qs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=p0(n,i,o);if(!u)return Qs(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>N2&&(this.allowRedirects=!1));let y=new mo(o,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,BA(i),kn(i),i.component??i._loadedComponent??null,i,HA(i)),E=of(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(E.params),y.data=Object.freeze(E.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(un(R=>this.applyRedirects.lineralizeSegments(i,R)),Ue(R=>this.processSegment(e,r,n,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=w2(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(un(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(un(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,E=new mo(g,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,BA(r),kn(r),r.component??r._loadedComponent??null,r,HA(r)),D=of(E,s,this.paramsInheritanceStrategy);E.params=Object.freeze(D.params),E.data=Object.freeze(D.data);let{segmentGroup:R,slicedSegments:x}=UA(n,g,y,l);if(x.length===0&&R.hasChildren())return this.processChildren(h,l,R,E).pipe(ae(G=>new rn(E,G)));if(l.length===0&&x.length===0)return Z(new rn(E,[]));let H=kn(r)===o;return this.processSegment(h,l,R,x,H?te:o,!0,E).pipe(ae(G=>new rn(E,G instanceof rn?[G]:[])))}))):Qs(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):y2(e,n,r,this.urlSerializer).pipe(Ue(i=>i?this.configLoader.loadChildren(e,n).pipe(lt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):I2(n))):Z({routes:[],injector:e})}};function M2(t){t.sort((e,n)=>e.value.outlet===te?-1:n.value.outlet===te?1:e.value.outlet.localeCompare(n.value.outlet))}function P2(t){let e=t.value.routeConfig;return e&&e.path===""}function g0(t){let e=[],n=new Set;for(let r of t){if(!P2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=g0(r.children);e.push(new rn(r.value,i))}return e.filter(r=>!n.has(r))}function BA(t){return t.data||{}}function HA(t){return t.resolve||{}}function x2(t,e,n,r,i,o){return Ue(s=>R2(t,e,n,r,s.extractedUrl,i,o).pipe(ae(({state:a,tree:u})=>Y(k({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function k2(t,e){return Ue(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Z(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of m0(u))s.add(l);let a=0;return Ve(s).pipe($i(u=>o.has(u)?O2(u,r,t,e):(u.data=of(u,u.parent,t).resolve,Z(void 0))),lt(()=>a++),us(1),Ue(u=>a===s.size?Z(n):$t))})}function m0(t){let e=t.children.map(n=>m0(n)).flat();return[t,...e]}function O2(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!a0(i)&&(o[Tu]=i.title),fc(()=>(t.data=of(t,t.parent,n).resolve,L2(o,t,e,r).pipe(ae(s=>(t._resolvedData=s,t.data=k(k({},t.data),s),null)))))}function L2(t,e,n,r){let i=r_(t);if(i.length===0)return Z({});let o={};return Ve(i).pipe(Ue(s=>V2(t[s],e,n,r).pipe(mr(),lt(a=>{if(a instanceof ta)throw sf(new vo,a);o[s]=a}))),us(1),ae(()=>o),pr(s=>h0(s)?$t:os(s)))}function V2(t,e,n,r){let i=ra(e)??r,o=oa(t,i),s=o.resolve?o.resolve(e,n):st(i,()=>o(e,n));return Ar(s)}function t_(t){return un(e=>{let n=t(e);return n?Ve(n).pipe(ae(()=>e)):Z(e)})}var I_=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===te);return r}getResolvedTitleForRoute(n){return n.data[Tu]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>N(y0),providedIn:"root"})}return t})(),y0=(()=>{class t extends I_{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(re(OA))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),sa=new U("",{providedIn:"root",factory:()=>({})}),Su=new U(""),v0=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=N(Ov);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ar(st(n,()=>r.loadComponent())).pipe(ae(I0),lt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),pc(()=>{this.componentLoaders.delete(r)})),o=new es(i,()=>new ze).pipe(Xo());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=_0(r,this.compiler,n,this.onLoadEndListener).pipe(pc(()=>{this.childrenLoaders.delete(r)})),s=new es(o,()=>new ze).pipe(Xo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _0(t,e,n,r){return Ar(st(n,()=>t.loadChildren())).pipe(ae(I0),Ue(i=>i instanceof Dh||Array.isArray(i)?Z(i):Ve(e.compileModuleAsync(i))),ae(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Su,[],{optional:!0,self:!0}).flat()),{routes:s.map(__),injector:o}}))}function F2(t){return t&&typeof t=="object"&&"default"in t}function I0(t){return F2(t)?t.default:t}var df=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>N(j2),providedIn:"root"})}return t})(),j2=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),E0=new U("");var E_=new U(""),w0=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ze;transitionAbortWithErrorSubject=new ze;configLoader=N(v0);environmentInjector=N(Ge);destroyRef=N(Ot);urlSerializer=N(bu);rootContexts=N(ia);location=N(Ks);inputBindingEnabled=N(uf,{optional:!0})!==null;titleStrategy=N(I_);options=N(sa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=N(df);createViewTransition=N(E0,{optional:!0});navigationErrorHandler=N(E_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Z(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Yh(i)),r=i=>this.events.next(new Zh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(Y(k({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new mt(null),this.transitions.pipe(Ht(r=>r!==null),un(r=>{let i=!1;return Z(r).pipe(un(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",jt.SupersededByNewNavigation),$t;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Y(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload"){let u="";return this.events.next(new Sr(o.id,this.urlSerializer.serialize(o.rawUrl),u,gu.IgnoredSameUrlNavigation)),o.resolve(!1),$t}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Z(o).pipe(un(u=>(this.events.next(new _o(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?$t:Promise.resolve(u))),x2(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),lt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=Y(k({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new mu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new _o(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let E=o0(this.rootComponentType).snapshot;return this.currentTransition=r=Y(k({},o),{targetSnapshot:E,urlAfterRedirects:l,extras:Y(k({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,Z(r)}else{let u="";return this.events.next(new Sr(o.id,this.urlSerializer.serialize(o.extractedUrl),u,gu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),$t}}),lt(o=>{let s=new Gh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ae(o=>(this.currentTransition=r=Y(k({},o),{guards:Jj(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),u2(this.environmentInjector,o=>this.events.next(o)),lt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw sf(this.urlSerializer,o.guardsResult);let s=new Wh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Ht(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",jt.GuardRejected),!1)),t_(o=>{if(o.guards.canActivateChecks.length!==0)return Z(o).pipe(lt(s=>{let a=new Kh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),un(s=>{let a=!1;return Z(s).pipe(k2(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",jt.NoDataFromResolver)}}))}),lt(s=>{let a=new Qh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),t_(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=ra(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(lt(h=>{a.component=h}),ae(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Zl(s(o.targetSnapshot.root)).pipe(Jr(null),gr(1))}),t_(()=>this.afterPreactivation()),un(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ve(a).pipe(ae(()=>r)):Z(r)}),ae(o=>{let s=Wj(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Y(k({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),lt(()=>{this.events.next(new yu)}),Zj(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),gr(1),Xl(new J(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Ht(()=>!i&&!r.targetRouterState),lt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",jt.Aborted)}))),lt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new On(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Xl(this.transitionAbortWithErrorSubject.pipe(lt(o=>{throw o}))),pc(()=>{i||this.cancelNavigationTransition(r,"",jt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),pr(o=>{if(this.destroyed)return r.resolve(!1),$t;if(i=!0,d0(o))this.events.next(new Jn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Yj(o)?this.events.next(new ea(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Xs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=st(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof ta){let{message:u,cancellationCode:l}=sf(this.urlSerializer,a);this.events.next(new Jn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new ea(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return $t}))}))}cancelNavigationTransition(n,r,i){let o=new Jn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function U2(t){return t!==hu}var T0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>N(B2),providedIn:"root"})}return t})(),cf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},B2=(()=>{class t extends cf{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ls(t)))(i||t)}})();static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),b0=(()=>{class t{urlSerializer=N(bu);options=N(sa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=N(Ks);urlHandlingStrategy=N(df);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Xn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Xn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=o0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>N(H2),providedIn:"root"})}return t})(),H2=(()=>{class t extends b0{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof _o?this.updateStateMemento():n instanceof Sr?this.commitTransition(r):n instanceof mu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof yu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Jn&&n.code!==jt.SupersededByNewNavigation&&n.code!==jt.Redirect?this.restoreHistory(r):n instanceof Xs?this.restoreHistory(r,!0):n instanceof On&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=k(k({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=k(k({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ls(t)))(i||t)}})();static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function w_(t,e){t.events.pipe(Ht(n=>n instanceof On||n instanceof Jn||n instanceof Xs||n instanceof Sr),ae(n=>n instanceof On||n instanceof Sr?0:(n instanceof Jn?n.code===jt.Redirect||n.code===jt.SupersededByNewNavigation:!1)?2:1),Ht(n=>n!==2),gr(1)).subscribe(()=>{e()})}var $2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},q2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Wt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=N(Iv);stateManager=N(b0);options=N(sa,{optional:!0})||{};pendingTasks=N(Wn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=N(w0);urlSerializer=N(bu);location=N(Ks);urlHandlingStrategy=N(df);injector=N(Ge);_events=new ze;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=N(T0);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=N(Su,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!N(uf,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new je;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Jn&&r.code!==jt.Redirect&&r.code!==jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof On)this.navigated=!0;else if(r instanceof ea){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||U2(i.source)},s);this.scheduleNavigation(a,hu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}$j(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),hu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=k({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(zt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(__),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=t0(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return n0(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Ii(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,hu,null,r)}navigate(n,r={skipLocationChange:!1}){return z2(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=k({},$2):r===!1?i=k({},q2):i=r,Ii(n))return LA(this.currentUrlTree,n,i);let o=this.parseUrl(n);return LA(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return w_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function z2(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}var hf=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Me(null);get href(){return xn(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ze;applicationErrorHandler=N(zt);options=N(sa,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(N(new Oh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof On&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ii(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Ii(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(ge(Wt),ge(Dr),mh("tabindex"),ge(Mn),ge(en),ge(Ws))};static \u0275dir=Re({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Se("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Yc("href",i.reactiveHref(),Yy)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",nu],skipLocationChange:[2,"skipLocationChange","skipLocationChange",nu],replaceUrl:[2,"replaceUrl","replaceUrl",nu],routerLink:"routerLink"},features:[fi]})}return t})(),W2=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Je;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof On&&this.update()})}ngAfterContentInit(){Z(this.links.changes,Z(null)).pipe(as()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ve(n).pipe(as()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=K2(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(ge(Wt),ge(en),ge(Mn),ge(tu),ge(hf,8))};static \u0275dir=Re({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Pv(o,hf,5),r&2){let s;Jc(s=Xc())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[fi]})}return t})();function K2(t){return!!t.paths}var Q2=new U("");function Y2(t,...e){return Tn([{provide:Su,multi:!0,useValue:t},[],{provide:Dr,useFactory:Z2,deps:[Wt]},{provide:Nh,multi:!0,useFactory:X2},e.map(n=>n.\u0275providers)])}function Z2(t){return t.routerState.root}function J2(t,e){return{\u0275kind:t,\u0275providers:e}}function X2(){let t=N(Ze);return e=>{let n=t.get(gi);if(e!==n.components[0])return;let r=t.get(Wt),i=t.get(eU);t.get(tU)===1&&r.initialNavigation(),t.get(nU,null,{optional:!0})?.setUpPreloading(),t.get(Q2,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var eU=new U("",{factory:()=>new ze}),tU=new U("",{providedIn:"root",factory:()=>1});var nU=new U("");function rU(t){return J2(7,[{provide:E_,useValue:t}])}var aa=class t{showNotification=Me(!1);notificationMessage=Me({type:"success",message:""});lastTimeoutId=void 0;abort=void 0;success(e){this.notificationMessage.set({type:"success",message:e??""}),this.setNotification(!0)}warn(e){this.notificationMessage.set({type:"warn",message:e??""}),this.setNotification(!0)}notFound(e){this.notificationMessage.set({type:"404",message:e??""}),this.setNotification(!0)}setNotification(e){if(this.showNotification.set(e),this.abort?.abort(),this.showNotification()){this.abort=new AbortController;let n=this.abort.signal;window.addEventListener("keydown",this.onKeyDown.bind(this),{once:!0,signal:n,capture:!0}),window.addEventListener("click",this.onClick.bind(this),{once:!0,signal:n,capture:!0}),this.setHideTimeout()}else this.clearHideTimeout()}setHideTimeout(){this.clearHideTimeout(),this.lastTimeoutId=window.setTimeout(()=>{this.setNotification(!1)},3e3)}clearHideTimeout(){this.lastTimeoutId&&(clearTimeout(this.lastTimeoutId),this.lastTimeoutId=void 0)}onKeyDown(e){e.key==="Escape"&&this.setNotification(!1)}onClick(e){this.setNotification(!1)}ngOnDestroy(){this.abort?.abort()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var ff=class t{notificationService=N(aa);copy(e,n){navigator.clipboard?(navigator.clipboard.writeText(e),this.notificationService.success(n??"Copiado!")):this.notificationService.warn(n??"No se puede copiar!")}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var pf=class t{baseId="prompt-dict";save(e,n){localStorage.setItem(this.fullIdentifier(e),JSON.stringify(n))}get(e){let n=localStorage.getItem(this.fullIdentifier(e));if(n)try{return JSON.parse(n)}catch(r){return console.error(`Error parsing value for ${e}:`,r),null}return null}delete(e){localStorage.removeItem(this.fullIdentifier(e))}fullIdentifier(e){return`${this.baseId}-${e}`}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};function Gte(t,e){let r=!e?.manualCleanup?e?.injector?.get(Ot)??N(Ot):null,i=oU(e?.equal),o;e?.requireSync?o=Me({kind:0},{equal:i}):o=Me({kind:1,value:e?.initialValue},{equal:i});let s,a=t.subscribe({next:u=>o.set({kind:1,value:u}),error:u=>{o.set({kind:2,error:u}),s?.()},complete:()=>{s?.()}});if(e?.requireSync&&o().kind===0)throw new j(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),Ft(()=>{let u=o();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new j(601,!1)}},{equal:e?.equal})}function oU(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}function C0(t){t===void 0&&(t=N(Ze));let e=t.get(li);return n=>new J(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var S0=()=>{};var R0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},sU=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},gf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(R0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new b_;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let E=l<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},b_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},aU=function(t){let e=R0(t);return gf.encodeByteArray(e,!0)},Au=function(t){return aU(t).replace(/\./g,"")},mf=function(t){try{return gf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function S_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var cU=()=>S_().__FIREBASE_DEFAULTS__,uU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&mf(t[1]);return e&&JSON.parse(e)},yf=()=>{try{return S0()||cU()||uU()||lU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},N0=t=>{var e,n;return(n=(e=yf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},M0=t=>{let e=N0(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},D_=()=>{var t;return(t=yf())===null||t===void 0?void 0:t.config},P0=t=>{var e;return(e=yf())===null||e===void 0?void 0:e[`_${t}`]};var Io=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Eo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function A_(t){return(await fetch(t,{credentials:"include"})).ok}function x0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Au(JSON.stringify(n)),Au(JSON.stringify(s)),""].join(".")}var Du={};function dU(){let t={prod:[],emulator:[]};for(let e of Object.keys(Du))Du[e]?t.emulator.push(e):t.prod.push(e);return t}function hU(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var D0=!1;function R_(t,e){if(typeof window>"u"||typeof document>"u"||!Eo(window.location.host)||Du[t]===e||Du[t]||D0)return;Du[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=dU().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{D0=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=hU(r),y=n("text"),E=document.getElementById(y)||document.createElement("span"),D=n("learnmore"),R=document.getElementById(D)||document.createElement("a"),x=n("preprendIcon"),H=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let G=g.element;a(G),h(R,D);let Ie=l();u(H,x),G.append(H,E,R,Ie),document.body.appendChild(G)}o?(E.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function fU(){var t;let e=(t=yf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function O0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function L0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function V0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F0(){return!fU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ru(){try{return typeof indexedDB=="object"}catch{return!1}}function j0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var pU="FirebaseError",mn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pU,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ln.prototype.create)}},Ln=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?gU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new mn(i,a,r)}};function gU(t,e){return t.replace(mU,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var mU=/\{\$([^}]+)}/g;function wo(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(A0(o)&&A0(s)){if(!wo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function A0(t){return t!==null&&typeof t=="object"}function N_(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function U0(t,e){let n=new C_(t,e);return n.subscribe.bind(n)}var C_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=T_),i.error===void 0&&(i.error=T_),i.complete===void 0&&(i.complete=T_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function yU(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function T_(){}var Zte=4*60*60*1e3;function yt(t){return t&&t._delegate?t._delegate:t}var Ut=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var To="[DEFAULT]";var M_=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Io;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_U(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vU(t){return t===To?void 0:t}function _U(t){return t.instantiationMode==="EAGER"}var vf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new M_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var IU=[],ue=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ue||{}),EU={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},wU=ue.INFO,TU={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},bU=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=TU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},er=class{constructor(e){this.name=e,this._logLevel=wU,this._logHandler=bU,this._userLogHandler=null,IU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var CU=(t,e)=>e.some(n=>t instanceof n),B0,H0;function SU(){return B0||(B0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DU(){return H0||(H0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var $0=new WeakMap,x_=new WeakMap,q0=new WeakMap,P_=new WeakMap,O_=new WeakMap;function AU(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(tr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&$0.set(n,t)}).catch(()=>{}),O_.set(e,t),e}function RU(t){if(x_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});x_.set(t,e)}var k_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return x_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||q0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function z0(t){k_=t(k_)}function NU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(_f(this),e,...n);return q0.set(r,e.sort?e.sort():[e]),tr(r)}:DU().includes(t)?function(...e){return t.apply(_f(this),e),tr($0.get(this))}:function(...e){return tr(t.apply(_f(this),e))}}function MU(t){return typeof t=="function"?NU(t):(t instanceof IDBTransaction&&RU(t),CU(t,SU())?new Proxy(t,k_):t)}function tr(t){if(t instanceof IDBRequest)return AU(t);if(P_.has(t))return P_.get(t);let e=MU(t);return e!==t&&(P_.set(t,e),O_.set(e,t)),e}var _f=t=>O_.get(t);function W0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=tr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(tr(s.result),u.oldVersion,u.newVersion,tr(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var PU=["get","getKey","getAll","getAllKeys","count"],xU=["put","add","delete","clear"],L_=new Map;function G0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(L_.get(e))return L_.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=xU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PU.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return L_.set(e,o),o}z0(t=>Y(k({},t),{get:(e,n,r)=>G0(e,n)||t.get(e,n,r),has:(e,n)=>!!G0(e,n)||t.has(e,n)}));var F_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kU(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function kU(t){let e=t.getComponent();return e?.type==="VERSION"}var j_="@firebase/app",K0="0.13.2";var Rr=new er("@firebase/app"),OU="@firebase/app-compat",LU="@firebase/analytics-compat",VU="@firebase/analytics",FU="@firebase/app-check-compat",jU="@firebase/app-check",UU="@firebase/auth",BU="@firebase/auth-compat",HU="@firebase/database",$U="@firebase/data-connect",qU="@firebase/database-compat",zU="@firebase/functions",GU="@firebase/functions-compat",WU="@firebase/installations",KU="@firebase/installations-compat",QU="@firebase/messaging",YU="@firebase/messaging-compat",ZU="@firebase/performance",JU="@firebase/performance-compat",XU="@firebase/remote-config",eB="@firebase/remote-config-compat",tB="@firebase/storage",nB="@firebase/storage-compat",rB="@firebase/firestore",iB="@firebase/ai",oB="@firebase/firestore-compat",sB="firebase",aB="11.10.0";var U_="[DEFAULT]",cB={[j_]:"fire-core",[OU]:"fire-core-compat",[VU]:"fire-analytics",[LU]:"fire-analytics-compat",[jU]:"fire-app-check",[FU]:"fire-app-check-compat",[UU]:"fire-auth",[BU]:"fire-auth-compat",[HU]:"fire-rtdb",[$U]:"fire-data-connect",[qU]:"fire-rtdb-compat",[zU]:"fire-fn",[GU]:"fire-fn-compat",[WU]:"fire-iid",[KU]:"fire-iid-compat",[QU]:"fire-fcm",[YU]:"fire-fcm-compat",[ZU]:"fire-perf",[JU]:"fire-perf-compat",[XU]:"fire-rc",[eB]:"fire-rc-compat",[tB]:"fire-gcs",[nB]:"fire-gcs-compat",[rB]:"fire-fst",[oB]:"fire-fst-compat",[iB]:"fire-vertex","fire-js":"fire-js",[sB]:"fire-js-all"};var Nu=new Map,uB=new Map,B_=new Map;function Q0(t,e){try{t.container.addComponent(e)}catch(n){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vn(t){let e=t.name;if(B_.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;B_.set(e,t);for(let n of Nu.values())Q0(n,t);for(let n of uB.values())Q0(n,t);return!0}function If(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nr(t){return t==null?!1:t.settings!==void 0}var lB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new Ln("app","Firebase",lB);var H_=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}};var ca=aB;function z_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:U_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ei.create("bad-app-name",{appName:String(i)});if(n||(n=D_()),!n)throw Ei.create("no-options");let o=Nu.get(i);if(o){if(wo(n,o.options)&&wo(r,o.config))return o;throw Ei.create("duplicate-app",{appName:i})}let s=new vf(i);for(let u of B_.values())s.addComponent(u);let a=new H_(n,r,s);return Nu.set(i,a),a}function ua(t=U_){let e=Nu.get(t);if(!e&&t===U_&&D_())return z_();if(!e)throw Ei.create("no-app",{appName:t});return e}function Ef(){return Array.from(Nu.values())}function Qe(t,e,n){var r;let i=(r=cB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(a.join(" "));return}Vn(new Ut(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var dB="firebase-heartbeat-database",hB=1,Mu="firebase-heartbeat-store",V_=null;function X0(){return V_||(V_=W0(dB,hB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ei.create("idb-open",{originalErrorMessage:t.message})})),V_}async function fB(t){try{let n=(await X0()).transaction(Mu),r=await n.objectStore(Mu).get(eR(t));return await n.done,r}catch(e){if(e instanceof mn)Rr.warn(e.message);else{let n=Ei.create("idb-get",{originalErrorMessage:e?.message});Rr.warn(n.message)}}}async function Y0(t,e){try{let r=(await X0()).transaction(Mu,"readwrite");await r.objectStore(Mu).put(e,eR(t)),await r.done}catch(n){if(n instanceof mn)Rr.warn(n.message);else{let r=Ei.create("idb-set",{originalErrorMessage:n?.message});Rr.warn(r.message)}}}function eR(t){return`${t.name}!${t.options.appId}`}var pB=1024,gB=30,$_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new q_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Z0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>gB){let s=yB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Z0(),{heartbeatsToSend:r,unsentEntries:i}=mB(this._heartbeatsCache.heartbeats),o=Au(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Rr.warn(n),""}}};function Z0(){return new Date().toISOString().substring(0,10)}function mB(t,e=pB){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),J0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),J0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var q_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ru()?j0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await fB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return Y0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return Y0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function J0(t){return Au(JSON.stringify({version:2,heartbeats:t})).length}function yB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function vB(t){Vn(new Ut("platform-logger",e=>new F_(e),"PRIVATE")),Vn(new Ut("heartbeat",e=>new $_(e),"PRIVATE")),Qe(j_,K0,t),Qe(j_,K0,"esm2017"),Qe("fire-js","")}vB("");var _B="firebase",IB="11.10.0";Qe(_B,IB,"app");var Co=new Gs("ANGULARFIRE2_VERSION");function Tf(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var da=(t,e)=>{let n=e?[e]:Ef(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},la=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(la||{}),tR=Uv()&&typeof Zone<"u"?la.WARN:la.SILENT;var wf=class{zone;delegate;constructor(e,n=Vg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},So=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=N(we);this.outsideAngular=n.runOutsideAngular(()=>new wf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new wf(typeof Zone>"u"?void 0:Zone.current,Kr))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nR=!1;function EB(t,e){!nR&&(tR>la.SILENT||Uv())&&(nR=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),tR>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function wB(t){let e=N(we,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function bo(t){let e=N(we,{optional:!0});return e?e.run(()=>t()):t()}var TB=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),st(n,()=>bo(()=>t.apply(void 0,r)))),Bt=(t,e,n)=>(n||=e?la.WARN:la.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=N(So),s=N(li),a=N(Ge)}catch{return EB(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=bo(()=>s.add())),i[l]=TB(i[l],r,a));let u=wB(()=>t.apply(this,i));return e?u instanceof J?u.pipe(Zr(o.outsideAngular),Yr(o.insideAngular),C0(a)):u instanceof Promise?bo(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>st(a,()=>bo(()=>h(g))),g=>st(a,()=>bo(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:bo(()=>u):u instanceof J?u.pipe(Zr(o.outsideAngular),Yr(o.insideAngular)):bo(()=>u)});var Do=class{constructor(e){return e}},Pu=class{constructor(){return Ef()}};function bB(t){return t&&t.length===1?t[0]:new Do(ua())}var G_=new U("angularfire2._apps"),CB={provide:Do,useFactory:bB,deps:[[new br,G_]]},SB={provide:Pu,deps:[[new br,G_]]};function DB(t){return(e,n)=>{let r=n.get(pi);Qe("angularfire",Co.full,"core"),Qe("angularfire",Co.full,"app"),Qe("angular",yA.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Do(i)}}function Lne(t,...e){return Tn([CB,SB,{provide:G_,useFactory:DB(t),multi:!0,deps:[we,Ze,So,...e]}])}var Vne=Bt(z_,!0);var AB=new Map,RB={activated:!1,tokenObservers:[]},NB={initialized:!1,enabled:!1};function Fn(t){return AB.get(t)||Object.assign({},RB)}function sR(){return NB}var MB="https://content-firebaseappcheck.googleapis.com/v1";var PB="exchangeDebugToken",rR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Gne=24*60*60*1e3;var Q_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Io,this.pending.promise.catch(n=>{}),await xB(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Io,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function xB(t){return new Promise(e=>{setTimeout(e,t)})}var kB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},wi=new Ln("appCheck","AppCheck",kB);function aR(t){if(!Fn(t).activated)throw wi.create("use-before-activation",{appName:t.name})}async function cR({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw wi.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw wi.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw wi.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw wi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function uR(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${MB}/projects/${n}/apps/${r}:${PB}?key=${i}`,body:{debug_token:e}}}var OB="firebase-app-check-database",LB=1,Y_="firebase-app-check-store";var bf=null;function VB(){return bf||(bf=new Promise((t,e)=>{try{let n=indexedDB.open(OB,LB);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(wi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Y_,{keyPath:"compositeKey"})}}}catch(n){e(wi.create("storage-open",{originalErrorMessage:n?.message}))}}),bf)}function FB(t,e){return jB(UB(t),e)}async function jB(t,e){let r=(await VB()).transaction(Y_,"readwrite"),o=r.objectStore(Y_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(wi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function UB(t){return`${t.options.appId}-${t.name}`}var xu=new er("@firebase/app-check");function W_(t,e){return Ru()?FB(t,e).catch(n=>{xu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function lR(){return sR().enabled}async function dR(){let t=sR();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var BB={error:"UNKNOWN_ERROR"};function HB(t){return gf.encodeString(JSON.stringify(t),!1)}async function Z_(t,e=!1,n=!1){let r=t.app;aR(r);let i=Fn(r),o=i.token,s;if(o&&!ku(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(ku(l)?o=l:await W_(r,void 0))}if(!e&&o&&ku(o))return{token:o.token};let a=!1;if(lR())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=cR(uR(r,await dR()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await W_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?xu.warn(l.message):n&&xu.error(l),K_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await Fn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?xu.warn(l.message):n&&xu.error(l),s=l}let u;return o?s?ku(o)?u={token:o.token,internalError:s}:u=K_(s):(u={token:o.token},i.token=o,await W_(r,o)):u=K_(s),a&&GB(r,u),u}async function $B(t){let e=t.app;aR(e);let{provider:n}=Fn(e);if(lR()){let r=await dR(),{token:i}=await cR(uR(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function qB(t,e,n,r){let{app:i}=t,o=Fn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ku(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),iR(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>iR(t))}function hR(t,e){let n=Fn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function iR(t){let{app:e}=t,n=Fn(e),r=n.tokenRefresher;r||(r=zB(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function zB(t){let{app:e}=t;return new Q_(async()=>{let n=Fn(e),r;if(n.token?r=await Z_(t,!0):r=await Z_(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=Fn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},rR.RETRIAL_MIN_WAIT,rR.RETRIAL_MAX_WAIT)}function GB(t,e){let n=Fn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ku(t){return t.expireTimeMillis-Date.now()>0}function K_(t){return{token:HB(BB),error:t}}var J_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Fn(this.app);for(let n of e)hR(this.app,n.next);return Promise.resolve()}};function WB(t,e){return new J_(t,e)}function KB(t){return{getToken:e=>Z_(t,e),getLimitedUseToken:()=>$B(t),addTokenListener:e=>qB(t,"INTERNAL",e),removeTokenListener:e=>hR(t.app,e)}}var QB="@firebase/app-check",YB="0.10.1";var ZB="app-check",oR="app-check-internal";function JB(){Vn(new Ut(ZB,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return WB(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(oR).initialize()})),Vn(new Ut(oR,t=>{let e=t.getProvider("app-check").getImmediate();return KB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Qe(QB,YB)}JB();var XB="app-check";var Cf=class{constructor(){return da(XB)}};var eH=["localhost","0.0.0.0","127.0.0.1"],ire=typeof window<"u"&&eH.includes(window.location.hostname);function IR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ER=IR,wR=new Ln("auth","Firebase",IR());var Rf=new er("@firebase/auth");function tH(t,...e){Rf.logLevel<=ue.WARN&&Rf.warn(`Auth (${ca}): ${t}`,...e)}function Df(t,...e){Rf.logLevel<=ue.ERROR&&Rf.error(`Auth (${ca}): ${t}`,...e)}function fR(t,...e){throw lI(t,...e)}function uI(t,...e){return lI(t,...e)}function TR(t,e,n){let r=Object.assign(Object.assign({},ER()),{[e]:n});return new Ln("auth","Firebase",r).create(e,{appName:t.name})}function Af(t){return TR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lI(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return wR.create(t,...e)}function _e(t,e,...n){if(!t)throw lI(e,...n)}function Ou(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Df(e),new Error(e)}function Nf(t,e){t||Ou(e)}function nH(){return pR()==="http:"||pR()==="https:"}function pR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function rH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nH()||L0()||"connection"in navigator)?navigator.onLine:!0}function iH(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var No=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Nf(n>e,"Short delay should be less than long delay!"),this.isMobile=k0()||V0()}get(){return rH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function oH(t,e){Nf(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Mf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ou("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ou("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ou("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cH=new No(3e4,6e4);function bR(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Lf(t,e,n,r,i={}){return CR(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=N_(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:u},o);return O0()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Eo(t.emulatorConfig.host)&&(l.credentials="include"),Mf.fetch()(await SR(t,t.config.apiHost,n,a),l)})}async function CR(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},sH),e);try{let i=new tI(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Sf(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sf(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Sf(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Sf(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw TR(t,h,l);fR(t,h)}}catch(i){if(i instanceof mn)throw i;fR(t,"network-request-failed",{message:String(i)})}}async function SR(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?oH(t.config,i):`${t.config.apiScheme}://${i}`;return aH.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var tI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(uI(this.auth,"network-request-failed")),cH.get())})}};function Sf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=uI(t,e,r);return i.customData._tokenResponse=n,i}async function uH(t,e){return Lf(t,"POST","/v1/accounts:delete",e)}async function Pf(t,e){return Lf(t,"POST","/v1/accounts:lookup",e)}function Lu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dI(t,e=!1){let n=yt(t),r=await n.getIdToken(e),i=DR(r);_e(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Lu(X_(i.auth_time)),issuedAtTime:Lu(X_(i.iat)),expirationTime:Lu(X_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function X_(t){return Number(t)*1e3}function DR(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Df("JWT malformed, contained fewer than 3 sections"),null;try{let i=mf(n);return i?JSON.parse(i):(Df("Failed to decode base64 JWT payload"),null)}catch(i){return Df("Caught error parsing JWT payload as JSON",i?.toString()),null}}function gR(t){let e=DR(t);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nI(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof mn&&lH(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function lH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var rI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Fu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lu(this.lastLoginAt),this.creationTime=Lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function xf(t){var e;let n=t.auth,r=await t.getIdToken(),i=await nI(t,Pf(n,{idToken:r}));_e(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?AR(o.providerUserInfo):[],a=dH(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Fu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function hI(t){let e=yt(t);await xf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dH(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function AR(t){return t.map(e=>{var{providerId:n}=e,r=Fg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function hH(t,e){let n=await CR(t,{},async()=>{let r=N_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await SR(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Eo(t.emulatorConfig.host)&&(u.credentials="include"),Mf.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fH(t,e){return Lf(t,"POST","/v2/accounts:revokeToken",bR(t,e))}var Vu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_e(e.length!==0,"internal-error");let n=gR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await hH(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(_e(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(_e(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Ou("not implemented")}};function Ti(t,e){_e(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ao=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Fg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await nI(this,this.stsTokenManager.getToken(this.auth,e));return _e(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dI(this,e)}reload(){return hI(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nr(this.auth.app))return Promise.reject(Af(this.auth));let e=await this.getIdToken();return await nI(this,uH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,E=(s=n.photoURL)!==null&&s!==void 0?s:void 0,D=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,H=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:G,emailVerified:Ie,isAnonymous:qe,providerData:Ce,stsTokenManager:T}=n;_e(G&&T,e,"internal-error");let v=Vu.fromJSON(this.name,T);_e(typeof G=="string",e,"internal-error"),Ti(p,e.name),Ti(g,e.name),_e(typeof Ie=="boolean",e,"internal-error"),_e(typeof qe=="boolean",e,"internal-error"),Ti(y,e.name),Ti(E,e.name),Ti(D,e.name),Ti(R,e.name),Ti(x,e.name),Ti(H,e.name);let I=new t({uid:G,auth:e,email:g,emailVerified:Ie,displayName:p,isAnonymous:qe,photoURL:E,phoneNumber:y,tenantId:D,stsTokenManager:v,createdAt:x,lastLoginAt:H});return Ce&&Array.isArray(Ce)&&(I.providerData=Ce.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static async _fromIdTokenResponse(e,n,r=!1){let i=new Vu;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await xf(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];_e(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?AR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Vu;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Fu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var mR=new Map;function Ro(t){Nf(t instanceof Function,"Expected a class definition");let e=mR.get(t);return e?(Nf(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mR.set(t,e),e)}var pH=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),iI=pH;function eI(t,e,n){return`firebase:${t}:${e}:${n}`}var kf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=eI(this.userKey,i.apiKey,o),this.fullPersistenceKey=eI("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Pf(this.auth,{idToken:e}).catch(()=>{});return n?Ao._fromGetAccountInfoResponse(this.auth,n,e):null}return Ao._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(Ro(iI),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Ro(iI),s=eI(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await Pf(e,{idToken:h}).catch(()=>{});if(!g)break;p=await Ao._fromGetAccountInfoResponse(e,g,h)}else p=Ao._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function yR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IH(e))return"Blackberry";if(EH(e))return"Webos";if(mH(e))return"Safari";if((e.includes("chrome/")||yH(e))&&!e.includes("edge/"))return"Chrome";if(_H(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function gH(t=sn()){return/firefox\//i.test(t)}function mH(t=sn()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yH(t=sn()){return/crios\//i.test(t)}function vH(t=sn()){return/iemobile/i.test(t)}function _H(t=sn()){return/android/i.test(t)}function IH(t=sn()){return/blackberry/i.test(t)}function EH(t=sn()){return/webos/i.test(t)}function RR(t,e=[]){let n;switch(t){case"Browser":n=yR(sn());break;case"Worker":n=`${yR(sn())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ca}/${r}`}var oI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function wH(t,e={}){return Lf(t,"GET","/v2/passwordPolicy",bR(t,e))}var TH=6,sI=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:TH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var aI=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Of(this),this.idTokenSubscription=new Of(this),this.beforeStateQueue=new oI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ro(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await kf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Pf(this,{idToken:e}),r=await Ao._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Nr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nr(this.app))return Promise.reject(Af(this));let n=e?yt(e):null;return n&&_e(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nr(this.app)?Promise.reject(Af(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nr(this.app)?Promise.reject(Af(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ro(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await wH(this),n=new sI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ln("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fH(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Ro(e)||this._popupRedirectResolver;_e(n,this,"argument-error"),this.redirectPersistenceManager=await kf.create(this,[Ro(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=RR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&tH(`Error while retrieving App Check token: ${n.error}`),n?.token}};function bH(t){return yt(t)}var Of=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=U0(n=>this.observer=n)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var CH={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SH(t){CH=t}function DH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function AH(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ro);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var mre=DH("rcb"),yre=new No(3e4,6e4);var vre=new No(2e3,1e4);var _re=10*60*1e3;var Ire=new No(3e4,6e4);var Ere=new No(5e3,15e3);var wre=encodeURIComponent("fac");var vR="@firebase/auth",_R="1.10.8";var cI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function RH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NH(t){Vn(new Ut("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;_e(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:RR(t)},l=new aI(r,i,o,u);return AH(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vn(new Ut("auth-internal",e=>{let n=bH(e.getProvider("auth").getImmediate());return(r=>new cI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qe(vR,_R,RH(t)),Qe(vR,_R,"esm2017")}var MH=5*60,Tre=P0("authIdTokenMaxAge")||MH;function PH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}SH({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=uI("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",PH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NH("Browser");var N$="auth";var Vf=class{constructor(){return da(N$)}};var NR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},MR={};var Mr,fI;(function(){var t;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,b,S){for(var _=Array(arguments.length-2),lr=2;lr<arguments.length;lr++)_[lr-2]=arguments[lr];return v.prototype[b].apply(w,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)w[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)w[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],b=T.g[2];var S=T.g[3],_=v+(S^I&(b^S))+w[0]+3614090360&4294967295;v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+w[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+w[2]+606105819&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+w[3]+3250441966&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+w[4]+4118548399&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+w[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+w[6]+2821735955&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+w[7]+4249261313&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+w[8]+1770035416&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+w[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+w[10]+4294925233&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+w[11]+2304563134&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+w[12]+1804603682&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+w[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+w[14]+2792965006&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+w[15]+1236535329&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(b^S&(I^b))+w[1]+4129170786&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+w[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+w[11]+643717713&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+w[0]+3921069994&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+w[5]+3593408605&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+w[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+w[15]+3634488961&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+w[4]+3889429448&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+w[9]+568446438&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+w[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+w[3]+4107603335&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+w[8]+1163531501&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+w[13]+2850285829&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+w[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+w[7]+1735328473&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+w[12]+2368359562&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(I^b^S)+w[5]+4294588738&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+w[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+w[11]+1839030562&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+w[14]+4259657740&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+w[1]+2763975236&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+w[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+w[7]+4139469664&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+w[10]+3200236656&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+w[13]+681279174&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+w[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+w[3]+3572445317&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+w[6]+76029189&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+w[9]+3654602809&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+w[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+w[15]+530742520&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+w[2]+3299628645&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(b^(I|~S))+w[0]+4096336452&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+w[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+w[14]+2878612391&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+w[5]+4237533241&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+w[12]+1700485571&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+w[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+w[10]+4293915773&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+w[1]+2240044497&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+w[8]+1873313359&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+w[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+w[6]+2734768916&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+w[13]+1309151649&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+w[4]+4149444226&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+w[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+w[2]+718787259&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,w=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<v;)if(w[b++]=T.charCodeAt(S++),b==this.blockSize){i(this,w),b=0;break}}else for(;S<v;)if(w[b++]=T[S++],b==this.blockSize){i(this,w),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)T[I++]=this.g[v]>>>w&255;return T};function o(T,v){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function s(T,v){this.h=v;for(var I=[],w=!0,b=T.length-1;0<=b;b--){var S=T[b]|0;w&&S==v||(I[b]=S,w=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var v=[],I=1,w=0;T>=I;w++)v[w]=T/I|0,I*=4294967296;return new s(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return R(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),w=p,b=0;b<T.length;b+=8){var S=Math.min(8,T.length-b),_=parseInt(T.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),w=w.j(S).add(l(_))):(w=w.j(I),w=w.add(l(_)))}return w}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(D(this))return-R(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(D(this))return"-"+R(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,w="";;){var b=Ie(I,v).g;I=x(I,b.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,E(I))return S+w;for(;6>S.length;)S="0"+S;w=S+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function D(T){return T.h==-1}t.l=function(T){return T=x(this,T),D(T)?-1:E(T)?0:1};function R(T){for(var v=T.g.length,I=[],w=0;w<v;w++)I[w]=~T.g[w];return new s(I,~T.h).add(g)}t.abs=function(){return D(this)?R(this):this},t.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0,b=0;b<=v;b++){var S=w+(this.i(b)&65535)+(T.i(b)&65535),_=(S>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);w=_>>>16,S&=65535,_&=65535,I[b]=_<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function x(T,v){return T.add(R(v))}t.j=function(T){if(E(this)||E(T))return p;if(D(this))return D(T)?R(this).j(R(T)):R(R(this).j(T));if(D(T))return R(this.j(R(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<T.g.length;b++){var S=this.i(w)>>>16,_=this.i(w)&65535,lr=T.i(b)>>>16,Ga=T.i(b)&65535;I[2*w+2*b]+=_*Ga,H(I,2*w+2*b),I[2*w+2*b+1]+=S*Ga,H(I,2*w+2*b+1),I[2*w+2*b+1]+=_*lr,H(I,2*w+2*b+1),I[2*w+2*b+2]+=S*lr,H(I,2*w+2*b+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new s(I,0)};function H(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function G(T,v){this.g=T,this.h=v}function Ie(T,v){if(E(v))throw Error("division by zero");if(E(T))return new G(p,p);if(D(T))return v=Ie(R(T),v),new G(R(v.g),R(v.h));if(D(v))return v=Ie(T,R(v)),new G(R(v.g),v.h);if(30<T.g.length){if(D(T)||D(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,w=v;0>=w.l(T);)I=qe(I),w=qe(w);var b=Ce(I,1),S=Ce(w,1);for(w=Ce(w,2),I=Ce(I,2);!E(w);){var _=S.add(w);0>=_.l(T)&&(b=b.add(I),S=_),w=Ce(w,1),I=Ce(I,1)}return v=x(T,b.j(v)),new G(b,v)}for(b=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),S=l(I),_=S.j(v);D(_)||0<_.l(T);)I-=w,S=l(I),_=S.j(v);E(S)&&(S=g),b=b.add(S),T=x(T,_)}return new G(b,T)}t.A=function(T){return Ie(this,T).h},t.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},t.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},t.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function qe(T){for(var v=T.g.length+1,I=[],w=0;w<v;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function Ce(T,v){var I=v>>5;v%=32;for(var w=T.g.length-I,b=[],S=0;S<w;S++)b[S]=0<v?T.i(S+I)>>>v|T.i(S+I+1)<<32-v:T.i(S+I);return new s(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fI=MR.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Mr=MR.Integer=s}).apply(typeof NR<"u"?NR:typeof self<"u"?self:typeof window<"u"?window:{});var Ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pr={};var pI,M$,ha,gI,ju,jf,mI,yI,vI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ff=="object"&&Ff];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in f))break e;f=f[C]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,C={next:function(){if(!m&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function E(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,C,A){for(var O=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)O[Ae-2]=arguments[Ae];return d.prototype[C].apply(m,O)}}function D(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let C=c.length||0,A=m.length||0;c.length=C+A;for(let O=0;O<A;O++)c[C+O]=m[O]}else c.push(m)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function H(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ie(c){return Ie[" "](c),c}Ie[" "]=function(){};var qe=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function Ce(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)c[f]=m[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function _(){var c=tg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class lr{constructor(){this.h=this.g=null}add(d,f){let m=Ga.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Ga=new x(()=>new qP,c=>c.reset());class qP{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Wa,Ka=!1,tg=new lr,Zw=()=>{let c=a.Promise.resolve(void 0);Wa=()=>{c.then(zP)}};var zP=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){S(f)}var d=Ga;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ka=!1};function qr(){this.s=this.s,this.C=this.C}qr.prototype.s=!1,qr.prototype.ma=function(){this.s||(this.s=!0,this.N())},qr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function vt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}vt.prototype.h=function(){this.defaultPrevented=!0};var GP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Qa(c,d){if(vt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(qe){e:{try{Ie(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:WP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Qa.aa.h.call(this)}}E(Qa,vt);var WP={2:"touch",3:"pen",4:"mouse"};Qa.prototype.h=function(){Qa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ya="closure_listenable_"+(1e6*Math.random()|0),KP=0;function QP(c,d,f,m,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++KP,this.da=this.fa=!1}function fl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pl(c){this.src=c,this.g={},this.h=0}pl.prototype.add=function(c,d,f,m,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var O=rg(c,d,m,C);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new QP(d,this.src,A,!!m,C),d.fa=f,c.push(d)),d};function ng(c,d){var f=d.type;if(f in c.g){var m=c.g[f],C=Array.prototype.indexOf.call(m,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(m,C,1),A&&(fl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function rg(c,d,f,m){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==m)return C}return-1}var ig="closure_lm_"+(1e6*Math.random()|0),og={};function Jw(c,d,f,m,C){if(m&&m.once)return eT(c,d,f,m,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Jw(c,d[A],f,m,C);return null}return f=ug(f),c&&c[Ya]?c.K(d,f,l(m)?!!m.capture:!!m,C):Xw(c,d,f,!1,m,C)}function Xw(c,d,f,m,C,A){if(!d)throw Error("Invalid event type");var O=l(C)?!!C.capture:!!C,Ae=ag(c);if(Ae||(c[ig]=Ae=new pl(c)),f=Ae.add(d,f,m,O,A),f.proxy)return f;if(m=YP(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)GP||(C=O),C===void 0&&(C=!1),c.addEventListener(d.toString(),m,C);else if(c.attachEvent)c.attachEvent(nT(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function YP(){function c(f){return d.call(c.src,c.listener,f)}let d=ZP;return c}function eT(c,d,f,m,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)eT(c,d[A],f,m,C);return null}return f=ug(f),c&&c[Ya]?c.L(d,f,l(m)?!!m.capture:!!m,C):Xw(c,d,f,!0,m,C)}function tT(c,d,f,m,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)tT(c,d[A],f,m,C);else m=l(m)?!!m.capture:!!m,f=ug(f),c&&c[Ya]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=rg(A,f,m,C),-1<f&&(fl(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=ag(c))&&(d=c.g[d.toString()],c=-1,d&&(c=rg(d,f,m,C)),(f=-1<c?d[c]:null)&&sg(f))}function sg(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ya])ng(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(nT(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=ag(d))?(ng(f,c),f.h==0&&(f.src=null,d[ig]=null)):fl(c)}}}function nT(c){return c in og?og[c]:og[c]="on"+c}function ZP(c,d){if(c.da)c=!0;else{d=new Qa(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&sg(c),c=f.call(m,d)}return c}function ag(c){return c=c[ig],c instanceof pl?c:null}var cg="__closure_events_fn_"+(1e9*Math.random()>>>0);function ug(c){return typeof c=="function"?c:(c[cg]||(c[cg]=function(d){return c.handleEvent(d)}),c[cg])}function _t(){qr.call(this),this.i=new pl(this),this.M=this,this.F=null}E(_t,qr),_t.prototype[Ya]=!0,_t.prototype.removeEventListener=function(c,d,f,m){tT(this,c,d,f,m)};function At(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new vt(d,c);else if(d instanceof vt)d.target=d.target||c;else{var C=d;d=new vt(m,c),w(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var O=d.g=f[A];C=gl(O,m,!0,d)&&C}if(O=d.g=c,C=gl(O,m,!0,d)&&C,C=gl(O,m,!1,d)&&C,f)for(A=0;A<f.length;A++)O=d.g=f[A],C=gl(O,m,!1,d)&&C}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)fl(f[m]);delete c.g[d],c.h--}}this.F=null},_t.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},_t.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function gl(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var O=d[A];if(O&&!O.da&&O.capture==f){var Ae=O.listener,gt=O.ha||O.src;O.fa&&ng(c.i,O),C=Ae.call(gt,m)!==!1&&C}}return C&&!m.defaultPrevented}function rT(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function iT(c){c.g=rT(()=>{c.g=null,c.i&&(c.i=!1,iT(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class JP extends qr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:iT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Za(c){qr.call(this),this.h=c,this.g={}}E(Za,qr);var oT=[];function sT(c){Ce(c.g,function(d,f){this.g.hasOwnProperty(f)&&sg(d)},c),c.g={}}Za.prototype.N=function(){Za.aa.N.call(this),sT(this)},Za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lg=a.JSON.stringify,XP=a.JSON.parse,ex=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function dg(){}dg.prototype.h=null;function aT(c){return c.h||(c.h=c.i())}function cT(){}var Ja={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hg(){vt.call(this,"d")}E(hg,vt);function fg(){vt.call(this,"c")}E(fg,vt);var Oi={},uT=null;function ml(){return uT=uT||new _t}Oi.La="serverreachability";function lT(c){vt.call(this,Oi.La,c)}E(lT,vt);function Xa(c){let d=ml();At(d,new lT(d))}Oi.STAT_EVENT="statevent";function dT(c,d){vt.call(this,Oi.STAT_EVENT,c),this.stat=d}E(dT,vt);function Rt(c){let d=ml();At(d,new dT(d,c))}Oi.Ma="timingevent";function hT(c,d){vt.call(this,Oi.Ma,c),this.size=d}E(hT,vt);function ec(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function tc(){this.g=!0}tc.prototype.xa=function(){this.g=!1};function tx(c,d,f,m,C,A){c.info(function(){if(c.g)if(A)for(var O="",Ae=A.split("&"),gt=0;gt<Ae.length;gt++){var pe=Ae[gt].split("=");if(1<pe.length){var It=pe[0];pe=pe[1];var Et=It.split("_");O=2<=Et.length&&Et[1]=="type"?O+(It+"="+pe+"&"):O+(It+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+O})}function nx(c,d,f,m,C,A,O){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+O})}function qo(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+ix(c,f)+(m?" "+m:"")})}function rx(c,d){c.info(function(){return"TIMEOUT: "+d})}tc.prototype.info=function(){};function ix(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<C.length;O++)C[O]=""}}}}return lg(f)}catch{return d}}var yl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pg;function vl(){}E(vl,dg),vl.prototype.g=function(){return new XMLHttpRequest},vl.prototype.i=function(){return{}},pg=new vl;function zr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Za(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pT}function pT(){this.i=null,this.g="",this.h=!1}var gT={},gg={};function mg(c,d,f){c.L=1,c.v=wl(dr(d)),c.m=f,c.P=!0,mT(c,null)}function mT(c,d){c.F=Date.now(),_l(c),c.A=dr(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),NT(f.i,"t",m),c.C=0,f=c.j.J,c.h=new pT,c.g=KT(c.j,f?d:null,!c.m),0<c.O&&(c.M=new JP(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(oT[0]=C.toString()),C=oT);for(var A=0;A<C.length;A++){var O=Jw(f,C[A],m||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Xa(),tx(c.i,c.u,c.A,c.l,c.R,c.m)}zr.prototype.ca=function(c){c=c.target;let d=this.M;d&&hr(c)==3?d.j():this.Y(c)},zr.prototype.Y=function(c){try{if(c==this.g)e:{let Et=hr(this.g);var d=this.g.Ba();let Wo=this.g.Z();if(!(3>Et)&&(Et!=3||this.g&&(this.h.h||this.g.oa()||VT(this.g)))){this.J||Et!=4||d==7||(d==8||0>=Wo?Xa(3):Xa(2)),yg(this);var f=this.g.Z();this.X=f;t:if(yT(this)){var m=VT(this.g);c="";var C=m.length,A=hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),nc(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(A&&d==C-1)});m.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,nx(this.i,this.u,this.A,this.l,this.R,Et,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,gt=this.g;if((Ae=gt.g?gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ae)){var pe=Ae;break t}}pe=null}if(f=pe)qo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vg(this,f);else{this.o=!1,this.s=3,Rt(12),Li(this),nc(this);break e}}if(this.P){f=!0;let In;for(;!this.J&&this.C<O.length;)if(In=ox(this,O),In==gg){Et==4&&(this.s=4,Rt(14),f=!1),qo(this.i,this.l,null,"[Incomplete Response]");break}else if(In==gT){this.s=4,Rt(15),qo(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else qo(this.i,this.l,In,null),vg(this,In);if(yT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||O.length!=0||this.h.h||(this.s=1,Rt(16),f=!1),this.o=this.o&&f,!f)qo(this.i,this.l,O,"[Invalid Chunked Response]"),Li(this),nc(this);else if(0<O.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),bg(It),It.M=!0,Rt(11))}}else qo(this.i,this.l,O,null),vg(this,O);Et==4&&Li(this),this.o&&!this.J&&(Et==4?qT(this.j,this):(this.o=!1,_l(this)))}else wx(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Li(this),nc(this)}}}catch{}finally{}};function yT(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ox(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?gg:(f=Number(d.substring(f,m)),isNaN(f)?gT:(m+=1,m+f>d.length?gg:(d=d.slice(m,m+f),c.C=m+f,d)))}zr.prototype.cancel=function(){this.J=!0,Li(this)};function _l(c){c.S=Date.now()+c.I,vT(c,c.I)}function vT(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ec(g(c.ba,c),d)}function yg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}zr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(rx(this.i,this.A),this.L!=2&&(Xa(),Rt(17)),Li(this),this.s=2,nc(this)):vT(this,this.S-c)};function nc(c){c.j.G==0||c.J||qT(c.j,c)}function Li(c){yg(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,sT(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function vg(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||_g(f.h,c))){if(!c.K&&_g(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Dl(f),Cl(f);else break e;Tg(f),Rt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=ec(g(f.Za,f),6e3));if(1>=ET(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Fi(f,11)}else if((c.K||f.g==c)&&Dl(f),!H(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let pe=C[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];let It=pe[3];It!=null&&(f.la=It,f.j.info("VER="+f.la));let Et=pe[4];Et!=null&&(f.Aa=Et,f.j.info("SVER="+f.Aa));let Wo=pe[5];Wo!=null&&typeof Wo=="number"&&0<Wo&&(m=1.5*Wo,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let In=c.g;if(In){let Rl=In.g?In.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rl){var A=m.h;A.g||Rl.indexOf("spdy")==-1&&Rl.indexOf("quic")==-1&&Rl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Ig(A,A.h),A.h=null))}if(m.D){let Cg=In.g?In.g.getResponseHeader("X-HTTP-Session-Id"):null;Cg&&(m.ya=Cg,Pe(m.I,m.D,Cg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=c;if(m.qa=WT(m,m.J?m.ia:null,m.W),O.K){wT(m.h,O);var Ae=O,gt=m.L;gt&&(Ae.I=gt),Ae.B&&(yg(Ae),_l(Ae)),m.g=O}else HT(m);0<f.i.length&&Sl(f)}else pe[0]!="stop"&&pe[0]!="close"||Fi(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Fi(f,7):wg(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}Xa(4)}catch{}}var sx=class{constructor(c,d){this.g=c,this.map=d}};function _T(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function IT(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ET(c){return c.h?1:c.g?c.g.size:0}function _g(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Ig(c,d){c.g?c.g.add(d):c.h=d}function wT(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}_T.prototype.cancel=function(){if(this.i=TT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function TT(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return D(c.i)}function ax(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function cx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function bT(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=cx(c),m=ax(c),C=m.length,A=0;A<C;A++)d.call(void 0,m[A],f&&f[A],c)}var CT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ux(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),C=null;if(0<=m){var A=c[f].substring(0,m);C=c[f].substring(m+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Vi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Vi){this.h=c.h,Il(this,c.j),this.o=c.o,this.g=c.g,El(this,c.s),this.l=c.l;var d=c.i,f=new oc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),ST(this,f),this.m=c.m}else c&&(d=String(c).match(CT))?(this.h=!1,Il(this,d[1]||"",!0),this.o=rc(d[2]||""),this.g=rc(d[3]||"",!0),El(this,d[4]),this.l=rc(d[5]||"",!0),ST(this,d[6]||"",!0),this.m=rc(d[7]||"")):(this.h=!1,this.i=new oc(null,this.h))}Vi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(ic(d,DT,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ic(d,DT,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(ic(f,f.charAt(0)=="/"?hx:dx,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",ic(f,px)),c.join("")};function dr(c){return new Vi(c)}function Il(c,d,f){c.j=f?rc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function El(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function ST(c,d,f){d instanceof oc?(c.i=d,gx(c.i,c.h)):(f||(d=ic(d,fx)),c.i=new oc(d,c.h))}function Pe(c,d,f){c.i.set(d,f)}function wl(c){return Pe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function rc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ic(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,lx),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function lx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var DT=/[#\/\?@]/g,dx=/[#\?:]/g,hx=/[#\?]/g,fx=/[#\?@]/g,px=/#/g;function oc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Gr(c){c.g||(c.g=new Map,c.h=0,c.i&&ux(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=oc.prototype,t.add=function(c,d){Gr(this),this.i=null,c=zo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function AT(c,d){Gr(c),d=zo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function RT(c,d){return Gr(c),d=zo(c,d),c.g.has(d)}t.forEach=function(c,d){Gr(this),this.g.forEach(function(f,m){f.forEach(function(C){c.call(d,C,m,this)},this)},this)},t.na=function(){Gr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=c[m];for(let A=0;A<C.length;A++)f.push(d[m])}return f},t.V=function(c){Gr(this);let d=[];if(typeof c=="string")RT(this,c)&&(d=d.concat(this.g.get(zo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Gr(this),this.i=null,c=zo(this,c),RT(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function NT(c,d,f){AT(c,d),0<f.length&&(c.i=null,c.g.set(zo(c,d),D(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let A=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var C=A;O[m]!==""&&(C+="="+encodeURIComponent(String(O[m]))),c.push(C)}}return this.i=c.join("&")};function zo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function gx(c,d){d&&!c.j&&(Gr(c),c.i=null,c.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(AT(this,m),NT(this,C,f))},c)),c.j=d}function mx(c,d){let f=new tc;if(a.Image){let m=new Image;m.onload=y(Wr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Wr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Wr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Wr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function yx(c,d){let f=new tc,m=new AbortController,C=setTimeout(()=>{m.abort(),Wr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(C),A.ok?Wr(f,"TestPingServer: ok",!0,d):Wr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Wr(f,"TestPingServer: error",!1,d)})}function Wr(c,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function vx(){this.g=new ex}function _x(c,d,f){let m=f||"";try{bT(c,function(C,A){let O=C;l(C)&&(O=lg(C)),d.push(m+A+"="+encodeURIComponent(O))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function sc(c){this.l=c.Ub||null,this.j=c.eb||!1}E(sc,dg),sc.prototype.g=function(){return new Tl(this.l,this.j)},sc.prototype.i=function(c){return function(){return c}}({});function Tl(c,d){_t.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Tl,_t),t=Tl.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,cc(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ac(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,cc(this)),this.g&&(this.readyState=3,cc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;MT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function MT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ac(this):cc(this),this.readyState==3&&MT(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ac(this))},t.Qa=function(c){this.g&&(this.response=c,ac(this))},t.ga=function(){this.g&&ac(this)};function ac(c){c.readyState=4,c.l=null,c.j=null,c.v=null,cc(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function cc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function PT(c){let d="";return Ce(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Eg(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=PT(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Pe(c,d,f))}function Fe(c){_t.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Fe,_t);var Ix=/^https?$/i,Ex=["POST","PUT"];t=Fe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pg.g(),this.v=this.o?aT(this.o):aT(pg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){xT(this,A);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())f.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ex,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of f)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{LT(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){xT(this,A)}};function xT(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,kT(c),bl(c)}function kT(c){c.A||(c.A=!0,At(c,"complete"),At(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,At(this,"complete"),At(this,"abort"),bl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bl(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?OT(this):this.bb())},t.bb=function(){OT(this)};function OT(c){if(c.h&&typeof s<"u"&&(!c.v[1]||hr(c)!=4||c.Z()!=2)){if(c.u&&hr(c)==4)rT(c.Ea,0,c);else if(At(c,"readystatechange"),hr(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=O===0){var C=String(c.D).match(CT)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!Ix.test(C?C.toLowerCase():"")}f=m}if(f)At(c,"complete"),At(c,"success");else{c.m=6;try{var A=2<hr(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",kT(c)}}finally{bl(c)}}}}function bl(c,d){if(c.g){LT(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||At(c,"ready");try{f.onreadystatechange=m}catch{}}}function LT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function hr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<hr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),XP(d)}};function VT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function wx(c){let d={};c=(c.g&&2<=hr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(H(c[m]))continue;var f=b(c[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}T(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function uc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function FT(c){this.Aa=0,this.i=[],this.j=new tc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=uc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=uc("baseRetryDelayMs",5e3,c),this.cb=uc("retryDelaySeedMs",1e4,c),this.Wa=uc("forwardChannelMaxRetries",2,c),this.wa=uc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new _T(c&&c.concurrentRequestLimit),this.Da=new vx,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=FT.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){Rt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=WT(this,null,this.W),Sl(this)};function wg(c){if(jT(c),c.G==3){var d=c.U++,f=dr(c.I);if(Pe(f,"SID",c.K),Pe(f,"RID",d),Pe(f,"TYPE","terminate"),lc(c,f),d=new zr(c,c.j,d),d.L=2,d.v=wl(dr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=KT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),_l(d)}GT(c)}function Cl(c){c.g&&(bg(c),c.g.cancel(),c.g=null)}function jT(c){Cl(c),c.u&&(a.clearTimeout(c.u),c.u=null),Dl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Sl(c){if(!IT(c.h)&&!c.s){c.s=!0;var d=c.Ga;Wa||Zw(),Ka||(Wa(),Ka=!0),tg.add(d,c),c.B=0}}function Tx(c,d){return ET(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ec(g(c.Ga,c,d),zT(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new zr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=BT(this,C,d),f=dr(this.I),Pe(f,"RID",c),Pe(f,"CVER",22),this.D&&Pe(f,"X-HTTP-Session-Id",this.D),lc(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(PT(A)))+"&"+d:this.m&&Eg(f,this.m,A)),Ig(this.h,C),this.Ua&&Pe(f,"TYPE","init"),this.P?(Pe(f,"$req",d),Pe(f,"SID","null"),C.T=!0,mg(C,f,null)):mg(C,f,d),this.G=2}}else this.G==3&&(c?UT(this,c):this.i.length==0||IT(this.h)||UT(this))};function UT(c,d){var f;d?f=d.l:f=c.U++;let m=dr(c.I);Pe(m,"SID",c.K),Pe(m,"RID",f),Pe(m,"AID",c.T),lc(c,m),c.m&&c.o&&Eg(m,c.m,c.o),f=new zr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=BT(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ig(c.h,f),mg(f,m,d)}function lc(c,d){c.H&&Ce(c.H,function(f,m){Pe(d,m,f)}),c.l&&bT({},function(f,m){Pe(d,m,f)})}function BT(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let O=["count="+f];A==-1?0<f?(A=C[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let Ae=!0;for(let gt=0;gt<f;gt++){let pe=C[gt].g,It=C[gt].map;if(pe-=A,0>pe)A=Math.max(0,C[gt].g-100),Ae=!1;else try{_x(It,O,"req"+pe+"_")}catch{m&&m(It)}}if(Ae){m=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function HT(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Wa||Zw(),Ka||(Wa(),Ka=!0),tg.add(d,c),c.v=0}}function Tg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ec(g(c.Fa,c),zT(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,$T(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ec(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),Cl(this),$T(this))};function bg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function $T(c){c.g=new zr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=dr(c.qa);Pe(d,"RID","rpc"),Pe(d,"SID",c.K),Pe(d,"AID",c.T),Pe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Pe(d,"TO",c.ja),Pe(d,"TYPE","xmlhttp"),lc(c,d),c.m&&c.o&&Eg(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=wl(dr(d)),f.m=null,f.P=!0,mT(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Cl(this),Tg(this),Rt(19))};function Dl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function qT(c,d){var f=null;if(c.g==d){Dl(c),bg(c),c.g=null;var m=2}else if(_g(c.h,d))f=d.D,wT(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;m=ml(),At(m,new hT(m,f)),Sl(c)}else HT(c);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&Tx(c,d)||m==2&&Tg(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Fi(c,5);break;case 4:Fi(c,10);break;case 3:Fi(c,6);break;default:Fi(c,2)}}}function zT(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Fi(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let C=!m;m=new Vi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Il(m,"https"),wl(m),C?mx(m.toString(),f):yx(m.toString(),f)}else Rt(2);c.G=0,c.l&&c.l.sa(d),GT(c),jT(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function GT(c){if(c.G=0,c.ka=[],c.l){let d=TT(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.ra()}}function WT(c,d,f){var m=f instanceof Vi?dr(f):new Vi(f);if(m.g!="")d&&(m.g=d+"."+m.g),El(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Vi(null);m&&Il(A,m),d&&(A.g=d),C&&El(A,C),f&&(A.l=f),m=A}return f=c.D,d=c.ya,f&&d&&Pe(m,f,d),Pe(m,"VER",c.la),lc(c,m),m}function KT(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Fe(new sc({eb:f})):new Fe(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function QT(){}t=QT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Al(){}Al.prototype.g=function(c,d){return new Qt(c,d)};function Qt(c,d){_t.call(this),this.g=new FT(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!H(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!H(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Go(this)}E(Qt,_t),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){wg(this.g)},Qt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=lg(c),c=f);d.i.push(new sx(d.Ya++,c)),d.G==3&&Sl(d)},Qt.prototype.N=function(){this.g.l=null,delete this.j,wg(this.g),delete this.g,Qt.aa.N.call(this)};function YT(c){hg.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}E(YT,hg);function ZT(){fg.call(this),this.status=1}E(ZT,fg);function Go(c){this.g=c}E(Go,QT),Go.prototype.ua=function(){At(this.g,"a")},Go.prototype.ta=function(c){At(this.g,new YT(c))},Go.prototype.sa=function(c){At(this.g,new ZT)},Go.prototype.ra=function(){At(this.g,"b")},Al.prototype.createWebChannel=Al.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,vI=Pr.createWebChannelTransport=function(){return new Al},yI=Pr.getStatEventTarget=function(){return ml()},mI=Pr.Event=Oi,jf=Pr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yl.NO_ERROR=0,yl.TIMEOUT=8,yl.HTTP_ERROR=6,ju=Pr.ErrorCode=yl,fT.COMPLETE="complete",gI=Pr.EventType=fT,cT.EventType=Ja,Ja.OPEN="a",Ja.CLOSE="b",Ja.ERROR="c",Ja.MESSAGE="d",_t.prototype.listen=_t.prototype.K,ha=Pr.WebChannel=cT,M$=Pr.FetchXmlHttpFactory=sc,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,pI=Pr.XhrIo=Fe}).apply(typeof Ff<"u"?Ff:typeof self<"u"?self:typeof window<"u"?window:{});var PR="@firebase/firestore",xR="4.8.0";var ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");var La="11.10.0";var xo=new er("@firebase/firestore");function fa(){return xo.logLevel}function V(t,...e){if(xo.logLevel<=ue.DEBUG){let n=e.map(lw);xo.debug(`Firestore (${La}): ${t}`,...n)}}function kr(t,...e){if(xo.logLevel<=ue.ERROR){let n=e.map(lw);xo.error(`Firestore (${La}): ${t}`,...n)}}function Ai(t,...e){if(xo.logLevel<=ue.WARN){let n=e.map(lw);xo.warn(`Firestore (${La}): ${t}`,...n)}}function lw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,TN(t,r,n)}function TN(t,e,n){let r=`FIRESTORE (${La}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw kr(r),new Error(r)}function be(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||TN(e,i,r)}function X(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends mn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Gf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},TI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}},bI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},CI=class{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new nr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new nr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new nr)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string",31837,{l:r}),new Gf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string",2055,{h:e}),new ft(e)}},SI=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},DI=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new SI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Wf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},AI=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){be(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Wf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function P$(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function bN(){return new TextEncoder}var qu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=P$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function oe(t,e){return t<e?-1:t>e?1:0}function RI(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return oe(r,i);{let o=bN(),s=x$(o.encode(kR(t,n)),o.encode(kR(e,n)));return s!==0?s:oe(r,i)}}n+=r>65535?2:1}return oe(t.length,e.length)}function kR(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function x$(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return oe(t[n],e[n]);return oe(t.length,e.length)}function ba(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var OR="__name__",Kf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return oe(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):RI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mr.fromString(e.substring(4,e.length-2))}},xe=class t extends Kf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},k$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,cn=class t extends Kf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return k$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===OR}static keyField(){return new t([OR])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var $=class t{constructor(e){this.path=e}static fromPath(e){return new t(xe.fromString(e))}static fromName(e){return new t(xe.fromString(e).popFirst(5))}static empty(){return new t(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new xe(e.slice()))}};function CN(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function O$(t,e,n,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LR(t){if(!$.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function VR(t){if($.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function SN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z(12329,{type:typeof t})}function ko(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Cp(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function L$(t,e){if(e<=0)throw new L(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function nt(t,e){let n={typeString:t};return e&&(n.value=e),n}function rl(t,e){if(!SN(t))throw new L(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(M.INVALID_ARGUMENT,n);return!0}var FR=-62135596800,jR=1e6,rt=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*jR);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<FR)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jR}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rl(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-FR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:nt("string",rt._jsonSchemaVersion),seconds:nt("number"),nanoseconds:nt("number")};var ee=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new rt(0,0))}static max(){return new t(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var zu=-1,NI=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};NI.UNKNOWN_ID=-1;function V$(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new Oo(i,$.empty(),e)}function F$(t){return new Oo(t.readTime,t.key,zu)}var Oo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ee.min(),$.empty(),zu)}static max(){return new t(ee.max(),$.empty(),zu)}};function j$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}var U$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",MI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Va(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==U$)throw t;V("LocalStore","Unexpectedly lost primary lease")}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function B$(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fa(t){return t.name==="IndexedDbTransactionError"}var dw=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),hw=-1;function Sp(t){return t==null}function Gu(t){return t===0&&1/t==-1/0}function H$(t){return typeof t=="number"&&Number.isInteger(t)&&!Gu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var DN="";function $$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=UR(e)),e=q$(t.get(n),e);return UR(e)}function q$(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case DN:n+="";break;default:n+=o}}return n}function UR(t){return t+DN+""}var z$="remoteDocuments",AN="owner";var RN="mutationQueues";var NN="mutations";var MN="documentMutations",G$="remoteDocumentsV14";var PN="remoteDocumentGlobal";var xN="targets";var kN="targetDocuments";var ON="targetGlobal",LN="collectionParents";var VN="clientMetadata";var FN="bundles";var jN="namedQueries";var W$="indexConfiguration";var K$="indexState";var Q$="indexEntries";var UN="documentOverlays";var Y$="globals";var Z$=[RN,NN,MN,z$,xN,AN,ON,kN,VN,PN,LN,FN,jN],Sie=[...Z$,UN],J$=[RN,NN,MN,G$,xN,AN,ON,kN,VN,PN,LN,FN,jN,UN],X$=J$,eq=[...X$,W$,K$,Q$];var Die=[...eq,Y$];function BR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function BN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var $e=class t{constructor(e,n){this.comparator=e,this.root=n||rr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ya(this.root,e,this.comparator,!0)}},ya=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},rr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw z(27949);return e+(this.isRed()?0:1)}};rr.EMPTY=null,rr.RED=!0,rr.BLACK=!1;rr.EMPTY=new class{constructor(){this.size=0}get key(){throw z(57766)}get value(){throw z(16141)}get color(){throw z(16727)}get left(){throw z(29726)}get right(){throw z(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new rr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pt=class t{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qf(this.data.getIterator())}getIteratorFrom(e){return new Qf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Qf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var vn=class t{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new t([])}unionWith(e){let n=new pt(cn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Yf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Dt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Yf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Dt.EMPTY_BYTE_STRING=new Dt("");var tq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(be(!!t,39018),typeof t=="string"){let e=0,n=tq.exec(t);if(be(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?Dt.fromBase64String(t):Dt.fromUint8Array(t)}var HN="server_timestamp",$N="__type__",qN="__previous_value__",zN="__local_write_time__";function Dp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[$N])===null||n===void 0?void 0:n.stringValue)===HN}function Ap(t){let e=t.mapValue.fields[qN];return Dp(e)?Ap(e):e}function Wu(t){let e=Or(t.mapValue.fields[zN].timestampValue);return new rt(e.seconds,e.nanos)}var PI=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Zf="(default)",Jf=class t{constructor(e,n){this.projectId=e,this.database=n||Zf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Zf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var fw="__type__",GN="__max__",Uf={mapValue:{fields:{__type__:{stringValue:GN}}}},pw="__vector__",Ca="value";function Ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Dp(t)?4:KN(t)?9007199254740991:WN(t)?10:11:z(28295,{value:t})}function sr(t,e){if(t===e)return!0;let n=Ri(t);if(n!==Ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Or(i.timestampValue),a=Or(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Lr(i.bytesValue).isEqual(Lr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Le(i.geoPointValue.latitude)===Le(o.geoPointValue.latitude)&&Le(i.geoPointValue.longitude)===Le(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Le(i.integerValue)===Le(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Le(i.doubleValue),a=Le(o.doubleValue);return s===a?Gu(s)===Gu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ba(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(BR(s)!==BR(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!sr(s[u],a[u])))return!1;return!0}(t,e);default:return z(52216,{left:t})}}function Ku(t,e){return(t.values||[]).find(n=>sr(n,e))!==void 0}function Sa(t,e){if(t===e)return 0;let n=Ri(t),r=Ri(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Le(o.integerValue||o.doubleValue),u=Le(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return HR(t.timestampValue,e.timestampValue);case 4:return HR(Wu(t),Wu(e));case 5:return RI(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Lr(o),u=Lr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=oe(a[l],u[l]);if(h!==0)return h}return oe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=oe(Le(o.latitude),Le(s.latitude));return a!==0?a:oe(Le(o.longitude),Le(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $R(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[Ca])===null||a===void 0?void 0:a.arrayValue,E=(u=g[Ca])===null||u===void 0?void 0:u.arrayValue,D=oe(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=E?.values)===null||h===void 0?void 0:h.length)||0);return D!==0?D:$R(y,E)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Uf.mapValue&&s===Uf.mapValue)return 0;if(o===Uf.mapValue)return 1;if(s===Uf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=RI(u[p],h[p]);if(g!==0)return g;let y=Sa(a[u[p]],l[h[p]]);if(y!==0)return y}return oe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw z(23264,{le:n})}}function HR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);let n=Or(t),r=Or(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function $R(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Sa(n[i],r[i]);if(o)return o}return oe(n.length,r.length)}function Da(t){return xI(t)}function xI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return $.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=xI(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${xI(n.fields[s])}`;return i+"}"}(t.mapValue):z(61005,{value:t})}function $f(t){switch(Ri(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Ap(t);return e?16+$f(e):16;case 5:return 2*t.stringValue.length;case 6:return Lr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+$f(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return xi(r.fields,(o,s)=>{i+=o.length+$f(s)}),i}(t.mapValue);default:throw z(13486,{value:t})}}function Xf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kI(t){return!!t&&"integerValue"in t}function gw(t){return!!t&&"arrayValue"in t}function qR(t){return!!t&&"nullValue"in t}function zR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qf(t){return!!t&&"mapValue"in t}function WN(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[fw])===null||n===void 0?void 0:n.stringValue)===pw}function Bu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return xi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function KN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===GN}var Rie={mapValue:{fields:{[fw]:{stringValue:pw},[Ca]:{arrayValue:{}}}}};var an=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bu(n)}setAll(e){let n=cn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Bu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());qf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];qf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){xi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Bu(this.value))}};function QN(t){let e=[];return xi(t.fields,(n,r)=>{let i=new cn([n]);if(qf(r)){let o=QN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new vn(e)}var jn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ee.min(),ee.min(),ee.min(),an.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ee.min(),ee.min(),an.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ee.min(),ee.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ni=class{constructor(e,n){this.position=e,this.inclusive=n}};function GR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),n.key):r=Sa(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function WR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sr(t.position[n],e.position[n]))return!1;return!0}var Lo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function nq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ep=class{},tt=class t extends ep{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new LI(e,n,r):n==="array-contains"?new jI(e,r):n==="in"?new UI(e,r):n==="not-in"?new BI(e,r):n==="array-contains-any"?new HI(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new VI(e,r):new FI(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Sa(n,this.value)):n!==null&&Ri(this.value)===Ri(n)&&this.matchesComparison(Sa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Un=class t extends ep{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return YN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function YN(t){return t.op==="and"}function ZN(t){return rq(t)&&YN(t)}function rq(t){for(let e of t.filters)if(e instanceof Un)return!1;return!0}function OI(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+Da(t.value);if(ZN(t))return t.filters.map(e=>OI(e)).join(",");{let e=t.filters.map(n=>OI(n)).join(",");return`${t.op}(${e})`}}function JN(t,e){return t instanceof tt?function(r,i){return i instanceof tt&&r.op===i.op&&r.field.isEqual(i.field)&&sr(r.value,i.value)}(t,e):t instanceof Un?function(r,i){return i instanceof Un&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&JN(s,i.filters[a]),!0):!1}(t,e):void z(19439)}function XN(t){return t instanceof tt?function(n){return`${n.field.canonicalString()} ${n.op} ${Da(n.value)}`}(t):t instanceof Un?function(n){return n.op.toString()+" {"+n.getFilters().map(XN).join(" ,")+"}"}(t):"Filter"}var LI=class extends tt{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){let n=$.comparator(e.key,this.key);return this.matchesComparison(n)}},VI=class extends tt{constructor(e,n){super(e,"in",n),this.keys=eM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},FI=class extends tt{constructor(e,n){super(e,"not-in",n),this.keys=eM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function eM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}var jI=class extends tt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return gw(n)&&Ku(n.arrayValue,this.value)}},UI=class extends tt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ku(this.value.arrayValue,n)}},BI=class extends tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ku(this.value.arrayValue,n)}},HI=class extends tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!gw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ku(this.value.arrayValue,r))}};var $I=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function KR(t,e=null,n=[],r=[],i=null,o=null,s=null){return new $I(t,e,n,r,i,o,s)}function mw(t){let e=X(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>OI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Sp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Da(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Da(r)).join(",")),e.Pe=n}return e.Pe}function yw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!WR(t.startAt,e.startAt)&&WR(t.endAt,e.endAt)}function qI(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Vr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function iq(t,e,n,r,i,o,s,a){return new Vr(t,e,n,r,i,o,s,a)}function tM(t){return new Vr(t)}function QR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vw(t){return t.collectionGroup!==null}function _a(t){let e=X(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new pt(cn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Lo(o,r))}),n.has(cn.keyField().canonicalString())||e.Te.push(new Lo(cn.keyField(),r))}return e.Te}function ir(t){let e=X(t);return e.Ie||(e.Ie=oq(e,_a(t))),e.Ie}function oq(t,e){if(t.limitType==="F")return KR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Lo(i.field,o)});let n=t.endAt?new Ni(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ni(t.startAt.position,t.startAt.inclusive):null;return KR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zI(t,e){let n=t.filters.concat([e]);return new Vr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tp(t,e,n){return new Vr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rp(t,e){return yw(ir(t),ir(e))&&t.limitType===e.limitType}function nM(t){return`${mw(ir(t))}|lt:${t.limitType}`}function pa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>XN(i)).join(", ")}]`),Sp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Da(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Da(i)).join(",")),`Target(${r})`}(ir(t))}; limitType=${t.limitType})`}function Np(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of _a(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=GR(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,_a(r),i)||r.endAt&&!function(s,a,u){let l=GR(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,_a(r),i))}(t,e)}function sq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rM(t){return(e,n)=>{let r=!1;for(let i of _a(t)){let o=aq(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function aq(t,e,n){let r=t.field.isKeyField()?$.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Sa(u,l):z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z(19790,{direction:t.dir})}}var Fr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return BN(this.inner)}size(){return this.innerSize}};var cq=new $e($.comparator);function jr(){return cq}var iM=new $e($.comparator);function Uu(...t){let e=iM;for(let n of t)e=e.insert(n.key,n);return e}function oM(t){let e=iM;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Mo(){return Hu()}function sM(){return Hu()}function Hu(){return new Fr(t=>t.toString(),(t,e)=>t.isEqual(e))}var uq=new $e($.comparator),lq=new pt($.comparator);function le(...t){let e=lq;for(let n of t)e=e.add(n);return e}var dq=new pt(oe);function hq(){return dq}function _w(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gu(e)?"-0":e}}function aM(t){return{integerValue:""+t}}function fq(t,e){return H$(e)?aM(e):_w(t,e)}var Aa=class{constructor(){this._=void 0}};function pq(t,e,n){return t instanceof Ra?function(i,o){let s={fields:{[$N]:{stringValue:HN},[zN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Dp(o)&&(o=Ap(o)),o&&(s.fields[qN]=o),{mapValue:s}}(n,e):t instanceof Vo?uM(t,e):t instanceof Fo?lM(t,e):function(i,o){let s=cM(i,o),a=YR(s)+YR(i.Ee);return kI(s)&&kI(i.Ee)?aM(a):_w(i.serializer,a)}(t,e)}function gq(t,e,n){return t instanceof Vo?uM(t,e):t instanceof Fo?lM(t,e):n}function cM(t,e){return t instanceof Na?function(r){return kI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ra=class extends Aa{},Vo=class extends Aa{constructor(e){super(),this.elements=e}};function uM(t,e){let n=dM(e);for(let r of t.elements)n.some(i=>sr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Fo=class extends Aa{constructor(e){super(),this.elements=e}};function lM(t,e){let n=dM(e);for(let r of t.elements)n=n.filter(i=>!sr(i,r));return{arrayValue:{values:n}}}var Na=class extends Aa{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function YR(t){return Le(t.integerValue||t.doubleValue)}function dM(t){return gw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function mq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Vo&&i instanceof Vo||r instanceof Fo&&i instanceof Fo?ba(r.elements,i.elements,sr):r instanceof Na&&i instanceof Na?sr(r.Ee,i.Ee):r instanceof Ra&&i instanceof Ra}(t.transform,e.transform)}var GI=class{constructor(e,n){this.version=e,this.transformResults=n}},xr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function zf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ma=class{};function hM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qu(t.key,xr.none()):new jo(t.key,t.data,xr.none());{let n=t.data,r=an.empty(),i=new pt(cn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ar(t.key,r,new vn(i.toArray()),xr.none())}}function yq(t,e,n){t instanceof jo?function(i,o,s){let a=i.value.clone(),u=JR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ar?function(i,o,s){if(!zf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=JR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(fM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function $u(t,e,n,r){return t instanceof jo?function(o,s,a,u){if(!zf(o.precondition,s))return a;let l=o.value.clone(),h=XR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof ar?function(o,s,a,u){if(!zf(o.precondition,s))return a;let l=XR(o.fieldTransforms,u,s),h=s.data;return h.setAll(fM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return zf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function vq(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=cM(r.transform,i||null);o!=null&&(n===null&&(n=an.empty()),n.set(r.field,o))}return n||null}function ZR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ba(r,i,(o,s)=>mq(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var jo=class extends Ma{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ar=class extends Ma{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function fM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function JR(t,e,n){let r=new Map;be(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,gq(s,a,n[i]))}return r}function XR(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,pq(o,s,e))}return r}var Qu=class extends Ma{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},WI=class extends Ma{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var KI=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&yq(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=$u(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=$u(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=sM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=hM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,(n,r)=>ZR(n,r))&&ba(this.baseMutations,e.baseMutations,(n,r)=>ZR(n,r))}},QI=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){be(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return uq}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var YI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ZI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Xe,he;function _q(t){switch(t){case M.OK:return z(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return z(15467,{code:t})}}function pM(t){if(t===void 0)return kr("GRPC error has no .code"),M.UNKNOWN;switch(t){case Xe.OK:return M.OK;case Xe.CANCELLED:return M.CANCELLED;case Xe.UNKNOWN:return M.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return M.INTERNAL;case Xe.UNAVAILABLE:return M.UNAVAILABLE;case Xe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Xe.NOT_FOUND:return M.NOT_FOUND;case Xe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Xe.ABORTED:return M.ABORTED;case Xe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Xe.DATA_LOSS:return M.DATA_LOSS;default:return z(39323,{code:t})}}(he=Xe||(Xe={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var eN=null;var Iq=new Mr([4294967295,4294967295],0);function tN(t){let e=bN().encode(t),n=new fI;return n.update(e),new Uint8Array(n.digest())}function nN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Mr([n,r],0),new Mr([i,o],0)]}var JI=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Po(`Invalid padding: ${n}`);if(r<0)throw new Po(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Po(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Po(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Mr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Mr.fromNumber(r)));return i.compare(Iq)===1&&(i=new Mr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=tN(e),[r,i]=nN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=tN(e),[r,i]=nN(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Po=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var np=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ee.min(),i,new $e(oe),jr(),le())}},Yu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var Ia=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},rp=class{constructor(e,n){this.targetId=e,this.De=n}},ip=class{constructor(e,n,r=Dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},op=class{constructor(){this.ve=0,this.Ce=rN(),this.Fe=Dt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=le(),n=le(),r=le();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z(38017,{changeType:o})}}),new Yu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=rN()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,be(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},XI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=jr(),this.je=Bf(),this.Je=Bf(),this.He=new $e(oe)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(qI(o))if(r===0){let s=new $(o.path);this.Xe(n,s,jn.newNoDocument(s,ee.min()))}else be(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}eN?.ct(function(h,p,g,y,E){var D,R,x,H,G,Ie;let qe={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Ce=p.unchangedNames;return Ce&&(qe.bloomFilter={applied:E===0,hashCount:(D=Ce?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(H=(x=(R=Ce?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&H!==void 0?H:0,padding:(Ie=(G=Ce?.bits)===null||G===void 0?void 0:G.padding)!==null&&Ie!==void 0?Ie:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),qe}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Lr(r).toUint8Array()}catch(u){if(u instanceof Yf)return Ai("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new JI(s,i,o)}catch(u){return Ai(u instanceof Po?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&qI(a.target)){let u=new $(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,jn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=le();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new np(e,n,this.He,this.ze,r);return this.ze=jr(),this.je=Bf(),this.Je=Bf(),this.He=new $e(oe),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new op,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new pt(oe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new pt(oe),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new op),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function Bf(){return new $e($.comparator)}function rN(){return new $e($.comparator)}var Eq={asc:"ASCENDING",desc:"DESCENDING"},wq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tq={and:"AND",or:"OR"},eE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function tE(t,e){return t.useProto3Json||Sp(e)?e:{value:e}}function sp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bq(t,e){return sp(t,e.toTimestamp())}function or(t){return be(!!t,49232),ee.fromTimestamp(function(n){let r=Or(n);return new rt(r.seconds,r.nanos)}(t))}function Iw(t,e){return nE(t,e).canonicalString()}function nE(t,e){let n=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mM(t){let e=xe.fromString(t);return be(EM(e),10190,{key:e.toString()}),e}function rE(t,e){return Iw(t.databaseId,e.path)}function _I(t,e){let n=mM(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(vM(n))}function yM(t,e){return Iw(t.databaseId,e)}function Cq(t){let e=mM(t);return e.length===4?xe.emptyPath():vM(e)}function iE(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vM(t){return be(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function iN(t,e,n){return{name:rE(t,e),fields:n.value.mapValue.fields}}function Sq(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(be(h===void 0||typeof h=="string",58123),Dt.fromBase64String(h||"")):(be(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Dt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:pM(l.code);return new L(h,l.message||"")}(s);n=new ip(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=_I(t,r.document.name),o=or(r.document.updateTime),s=r.document.createTime?or(r.document.createTime):ee.min(),a=new an({mapValue:{fields:r.document.fields}}),u=jn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Ia(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=_I(t,r.document),o=r.readTime?or(r.readTime):ee.min(),s=jn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Ia([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=_I(t,r.document),o=r.removedTargetIds||[];n=new Ia([],o,i,null)}else{if(!("filter"in e))return z(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new ZI(i,o),a=r.targetId;n=new rp(a,s)}}return n}function Dq(t,e){let n;if(e instanceof jo)n={update:iN(t,e.key,e.value)};else if(e instanceof Qu)n={delete:rE(t,e.key)};else if(e instanceof ar)n={update:iN(t,e.key,e.data),updateMask:Lq(e.fieldMask)};else{if(!(e instanceof WI))return z(16599,{Rt:e.type});n={verify:rE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ra)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Na)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw z(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:bq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z(27497)}(t,e.precondition)),n}function Aq(t,e){return t&&t.length>0?(be(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?or(i.updateTime):or(o);return s.isEqual(ee.min())&&(s=or(o)),new GI(s,i.transformResults||[])}(n,e))):[]}function Rq(t,e){return{documents:[yM(t,e.path)]}}function Nq(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yM(t,i);let o=function(l){if(l.length!==0)return IM(Un.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:ga(g.field),direction:xq(g.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=tE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:n,parent:i}}function Mq(t){let e=Cq(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){be(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let g=_M(p);return g instanceof Un&&ZN(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(E){return new Lo(ma(E.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Sp(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new Ni(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new Ni(y,g)}(n.endAt)),iq(e,i,s,o,a,"F",u,l)}function Pq(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _M(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ma(n.unaryFilter.field);return tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ma(n.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ma(n.unaryFilter.field);return tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ma(n.unaryFilter.field);return tt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return z(61313);default:return z(60726)}}(t):t.fieldFilter!==void 0?function(n){return tt.create(ma(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return z(58110);default:return z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Un.create(n.compositeFilter.filters.map(r=>_M(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z(1026)}}(n.compositeFilter.op))}(t):z(30097,{filter:t})}function xq(t){return Eq[t]}function kq(t){return wq[t]}function Oq(t){return Tq[t]}function ga(t){return{fieldPath:t.canonicalString()}}function ma(t){return cn.fromServerFormat(t.fieldPath)}function IM(t){return t instanceof tt?function(n){if(n.op==="=="){if(zR(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NAN"}};if(qR(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zR(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NAN"}};if(qR(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ga(n.field),op:kq(n.op),value:n.value}}}(t):t instanceof Un?function(n){let r=n.getFilters().map(i=>IM(i));return r.length===1?r[0]:{compositeFilter:{op:Oq(n.op),filters:r}}}(t):z(54877,{filter:t})}function Lq(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function EM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Zu=class t{constructor(e,n,r,i,o=ee.min(),s=ee.min(),a=Dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var oE=class{constructor(e){this.gt=e}};function Vq(t){let e=Mq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tp(e,e.limit,"L"):e}var ap=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Le(e.integerValue));else if("doubleValue"in e){let r=Le(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Gu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Or(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Lr(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?KN(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):WN(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):z(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Ca,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Le(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),$.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};ap.Ut=new ap;var sE=class{constructor(){this.Dn=new aE}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Oo.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Oo.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},aE=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pt(xe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt(xe.comparator)).toArray()}};var Nie=new Uint8Array(0);var oN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wM=41943040,yn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(wM,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);var Ju=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var sN="LruGarbageCollector",Fq=1048576;function aN([t,e],[n,r]){let i=oe(t,n);return i===0?oe(e,r):i}var cE=class{constructor(e){this.Tr=e,this.buffer=new pt(aN),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();aN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},uE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(sN,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fa(n)?V(sN,"Ignoring IndexedDB error during garbage collection: ",n):await Va(n)}await this.Rr(3e5)})}},lE=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(dw.ue);let r=new cE(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(oN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oN):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),fa()<=ue.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function jq(t,e){return new lE(t,e)}var dE=class{constructor(){this.changes=new Fr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var hE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var fE=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$u(r.mutation,i,vn.empty(),rt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=Mo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Uu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Mo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=jr(),s=Hu(),a=function(){return Hu()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof ar)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),$u(h.mutation,l,h.mutation.getFieldMask(),rt.now())):s.set(l.key,vn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new hE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Hu(),i=new $e((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||vn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||le()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=sM();h.forEach(g=>{if(!o.has(g)){let y=hM(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Mo()),a=zu,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:a,changes:oM(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=Uu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Uu();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=function(p,g){return new Vr(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,jn.newInvalidDocument(h)))});let a=Uu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&$u(h.mutation,l,vn.empty(),rt.now()),Np(n,l)&&(a=a.insert(u,l))}),a})}};var pE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:or(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:Vq(i.bundledQuery),readTime:or(i.readTime)}}(n)),P.resolve()}};var gE=class{constructor(){this.overlays=new $e($.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Mo();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Mo(),o=n.length+1,s=new $(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new $e((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Mo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Mo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new YI(n,r));let o=this.kr.get(n);o===void 0&&(o=le(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var mE=class{constructor(){this.sessionToken=Dt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var Xu=class{constructor(){this.qr=new pt(et.Qr),this.$r=new pt(et.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new et(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new et(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new $(new xe([])),r=new et(n,e),i=new et(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new $(new xe([])),r=new et(n,e),i=new et(n,e+1),o=le();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new et(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},et=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return $.comparator(e.key,n.key)||oe(e.Hr,n.Hr)}static Ur(e,n){return oe(e.Hr,n.Hr)||$.comparator(e.key,n.key)}};var yE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new pt(et.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new KI(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new et(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?hw:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new et(n,0),i=new et(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(oe);return n.forEach(i=>{let o=new et(i,0),s=new et(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new et(new $(o),0),a=new pt(oe);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){be(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new et(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new et(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var vE=class{constructor(e){this.ni=e,this.docs=function(){return new $e($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(n))}getEntries(e,n){let r=jr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():jn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=jr(),s=n.path,a=new $(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||j$(F$(h),r)<=0||(i.has(h.key)||Np(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){z(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _E(this)}getSize(e){return P.resolve(this.size)}},_E=class extends dE{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var IE=class{constructor(e){this.persistence=e,this.ii=new Fr(n=>mw(n),yw),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.si=0,this.oi=new Xu,this.targetCount=0,this._i=Ju.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Ju(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var cp=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new dw(0),this.ci=!1,this.ci=!0,this.li=new mE,this.referenceDelegate=e(this),this.hi=new IE(this),this.indexManager=new sE,this.remoteDocumentCache=function(i){return new vE(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new oE(n),this.Ti=new pE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new yE(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new EE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},EE=class extends MI{constructor(e){super(),this.currentSequenceNumber=e}},wE=class t{constructor(e){this.persistence=e,this.Ai=new Xu,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw z(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=$.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ee.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},up=class t{constructor(e,n){this.persistence=e,this.gi=new Fr(r=>$$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=jq(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ee.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$f(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var TE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=le(),i=le();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var bE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var CE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return F0()?8:B$(sn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new bE;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(fa()<=ue.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",pa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(fa()<=ue.DEBUG&&V("QueryEngine","Query:",pa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(fa()<=ue.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",pa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ir(n))):P.resolve())}ps(e,n){if(QR(n))return P.resolve(null);let r=ir(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=tp(n,null,"F"),r=ir(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,tp(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return QR(n)||i.isEqual(ee.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(fa()<=ue.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pa(n)),this.vs(e,s,n,V$(i,zu)).next(a=>a))})}bs(e,n){let r=new pt(rM(e));return n.forEach((i,o)=>{Np(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return fa()<=ue.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",pa(n)),this.gs.getDocumentsMatchingQuery(e,n,Oo.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Ew="LocalStore",Uq=3e8,SE=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new $e(oe),this.Ms=new Fr(o=>mw(o),yw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function Bq(t,e,n,r){return new SE(t,e,n,r)}async function TM(t,e){let n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=le();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function Hq(t,e){let n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),y=P.resolve();return g.forEach(E=>{y=y.next(()=>h.getEntry(u,E)).next(D=>{let R=l.docVersions.get(E);be(R!==null,48541),D.version.compareTo(R)<0&&(p.applyToRemoteDocument(D,l),D.isValidDocument()&&(D.setReadTime(l.commitVersion),h.addEntry(D)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function bM(t){let e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function $q(t,e){let n=X(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Dt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(D,R,x){return D.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=Uq?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=jr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(qq(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ee.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function qq(t,e,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=jr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(Ew,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function zq(t,e){let n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gq(t,e){let n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Zu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function DE(t,e,n){let r=X(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Fa(s))throw s;V(Ew,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function cN(t,e,n){let r=X(t),i=ee.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=X(u),g=p.Ms.get(h);return g!==void 0?P.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)}(r,s,ir(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ee.min(),n?o:le())).next(a=>(Wq(r,sq(e),a),{documents:a,qs:o})))}function Wq(t,e,n){let r=t.xs.get(e)||ee.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var lp=class{constructor(){this.activeTargetIds=hq()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var AE=class{constructor(){this.Fo=new lp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new lp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var RE=class{xo(e){}shutdown(){}};var uN="ConnectivityMonitor",dp=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(uN,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(uN,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Hf=null;function NE(){return Hf===null?Hf=function(){return 268435456+Math.round(2147483648*Math.random())}():Hf++,"0x"+Hf.toString(16)}var II="RestConnection",Kq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ME=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Zf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=NE(),a=this.Go(e,n.toUriEncodedString());V(II,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Eo(l);return this.jo(e,a,u,r,h).then(p=>(V(II,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Ai(II,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+La}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=Kq[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var PE=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Ct="WebChannelConnection",xE=class extends ME{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=NE();return new Promise((a,u)=>{let l=new pI;l.setWithCredentials(!0),l.listenOnce(gI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ju.NO_ERROR:let p=l.getResponseJson();V(Ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case ju.TIMEOUT:V(Ct,`RPC '${e}' ${s} timed out`),u(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case ju.HTTP_ERROR:let g=l.getStatus();if(V(Ct,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let E=y?.error;if(E&&E.status&&E.message){let D=function(x){let H=x.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(H)>=0?H:M.UNKNOWN}(E.status);u(new L(D,E.message))}else u(new L(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(M.UNAVAILABLE,"Connection failed."));break;default:z(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(Ct,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(Ct,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=NE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vI(),a=yI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(Ct,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,E=new PE({Ho:R=>{y?V(Ct,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(V(Ct,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),V(Ct,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),D=(R,x,H)=>{R.listen(x,G=>{try{H(G)}catch(Ie){setTimeout(()=>{throw Ie},0)}})};return D(p,ha.EventType.OPEN,()=>{y||(V(Ct,`RPC '${e}' stream ${i} transport opened.`),E.s_())}),D(p,ha.EventType.CLOSE,()=>{y||(y=!0,V(Ct,`RPC '${e}' stream ${i} transport closed`),E.__(),this.I_(p))}),D(p,ha.EventType.ERROR,R=>{y||(y=!0,Ai(Ct,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),E.__(new L(M.UNAVAILABLE,"The operation could not be completed")))}),D(p,ha.EventType.MESSAGE,R=>{var x;if(!y){let H=R.data[0];be(!!H,16349);let G=H,Ie=G?.error||((x=G[0])===null||x===void 0?void 0:x.error);if(Ie){V(Ct,`RPC '${e}' stream ${i} received error:`,Ie);let qe=Ie.status,Ce=function(I){let w=Xe[I];if(w!==void 0)return pM(w)}(qe),T=Ie.message;Ce===void 0&&(Ce=M.INTERNAL,T="Unknown error status: "+qe+" with message "+Ie.message),y=!0,E.__(new L(Ce,T)),p.close()}else V(Ct,`RPC '${e}' stream ${i} received:`,H),E.a_(H)}}),D(a,mI.STAT_EVENT,R=>{R.stat===jf.PROXY?V(Ct,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===jf.NOPROXY&&V(Ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.o_()},0),E}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function EI(){return typeof document<"u"?document:null}function Mp(t){return new eE(t,!0)}var hp=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var lN="PersistentStream",fp=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new hp(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return V(lN,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(V(lN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},kE=class extends fp{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=Sq(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?or(s.readTime):ee.min()}(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=iE(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=qI(u)?{documents:Rq(o,u)}:{query:Nq(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=gM(o,s.resumeToken);let l=tE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=sp(o,s.snapshotVersion.toTimestamp());let l=tE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Pq(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=iE(this.serializer),n.removeTarget=e,this.k_(n)}},OE=class extends fp{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=Aq(e.writeResults,e.commitTime),r=or(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=iE(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Dq(this.serializer,r))};this.k_(n)}};var LE=class{},VE=class extends LE{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,nE(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,nE(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},FE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(kr(n),this._a=!1):V("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Uo="RemoteStore",jE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Ho(this)&&(V(Uo,"Restarting streams for network reachability change."),await async function(u){let l=X(u);l.Ia.add(4),await il(l),l.Aa.set("Unknown"),l.Ia.delete(4),await Pp(l)}(this))})}),this.Aa=new FE(r,i)}};async function Pp(t){if(Ho(t))for(let e of t.da)await e(!0)}async function il(t){for(let e of t.da)await e(!1)}function CM(t,e){let n=X(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Cw(n)?bw(n):ja(n).x_()&&Tw(n,e))}function ww(t,e){let n=X(t),r=ja(n);n.Ta.delete(e),r.x_()&&SM(n,e),n.Ta.size===0&&(r.x_()?r.B_():Ho(n)&&n.Aa.set("Unknown"))}function Tw(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ja(t).H_(e)}function SM(t,e){t.Ra.$e(e),ja(t).Y_(e)}function bw(t){t.Ra=new XI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ja(t).start(),t.Aa.aa()}function Cw(t){return Ho(t)&&!ja(t).M_()&&t.Ta.size>0}function Ho(t){return X(t).Ia.size===0}function DM(t){t.Ra=void 0}async function Qq(t){t.Aa.set("Online")}async function Yq(t){t.Ta.forEach((e,n)=>{Tw(t,e)})}async function Zq(t,e){DM(t),Cw(t)?(t.Aa.la(e),bw(t)):t.Aa.set("Unknown")}async function Jq(t,e,n){if(t.Aa.set("Online"),e instanceof ip&&e.state===2&&e.cause)try{await async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){V(Uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await pp(t,r)}else if(e instanceof Ia?t.Ra.Ye(e):e instanceof rp?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ee.min()))try{let r=await bM(t.localStore);n.compareTo(r)>=0&&await function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Dt.EMPTY_BYTE_STRING,h.snapshotVersion)),SM(o,u);let p=new Zu(h.target,u,l,h.sequenceNumber);Tw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){V(Uo,"Failed to raise snapshot:",r),await pp(t,r)}}async function pp(t,e,n){if(!Fa(e))throw e;t.Ia.add(1),await il(t),t.Aa.set("Offline"),n||(n=()=>bM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{V(Uo,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Pp(t)})}function AM(t,e){return e().catch(n=>pp(t,n,e))}async function xp(t){let e=X(t),n=Mi(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:hw;for(;Xq(e);)try{let i=await zq(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,e4(e,i)}catch(i){await pp(e,i)}RM(e)&&NM(e)}function Xq(t){return Ho(t)&&t.Pa.length<10}function e4(t,e){t.Pa.push(e);let n=Mi(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function RM(t){return Ho(t)&&!Mi(t).M_()&&t.Pa.length>0}function NM(t){Mi(t).start()}async function t4(t){Mi(t).na()}async function n4(t){let e=Mi(t);for(let n of t.Pa)e.X_(n.mutations)}async function r4(t,e,n){let r=t.Pa.shift(),i=QI.from(r,e,n);await AM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xp(t)}async function i4(t,e){e&&Mi(t).Z_&&await async function(r,i){if(function(s){return _q(s)&&s!==M.ABORTED}(i.code)){let o=r.Pa.shift();Mi(r).N_(),await AM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await xp(r)}}(t,e),RM(t)&&NM(t)}async function dN(t,e){let n=X(t);n.asyncQueue.verifyOperationInProgress(),V(Uo,"RemoteStore received new credentials");let r=Ho(n);n.Ia.add(3),await il(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Pp(n)}async function o4(t,e){let n=X(t);e?(n.Ia.delete(2),await Pp(n)):e||(n.Ia.add(2),await il(n),n.Aa.set("Unknown"))}function ja(t){return t.Va||(t.Va=function(n,r,i){let o=X(n);return o.ia(),new kE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:Qq.bind(null,t),e_:Yq.bind(null,t),n_:Zq.bind(null,t),J_:Jq.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Cw(t)?bw(t):t.Aa.set("Unknown")):(await t.Va.stop(),DM(t))})),t.Va}function Mi(t){return t.ma||(t.ma=function(n,r,i){let o=X(n);return o.ia(),new OE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:t4.bind(null,t),n_:i4.bind(null,t),ea:n4.bind(null,t),ta:r4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await xp(t)):(await t.ma.stop(),t.Pa.length>0&&(V(Uo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}var UE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Sw(t,e){if(kr("AsyncQueue",`${e}: ${t}`),Fa(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}var gp=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=Uu(),this.sortedSet=new $e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var mp=class{constructor(){this.fa=new $e($.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):z(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Pa=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,gp.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var BE=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},HE=class{constructor(){this.queries=hN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=X(n),o=i.queries;i.queries=hN(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function hN(){return new Fr(t=>nM(t),Rp)}async function s4(t,e){let n=X(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new BE,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=Sw(s,`Initialization of query '${pa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Dw(n)}async function a4(t,e){let n=X(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function c4(t,e){let n=X(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&Dw(n)}function u4(t,e,n){let r=X(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function Dw(t){t.Da.forEach(e=>{e.next()})}var $E,fN;(fN=$E||($E={})).Fa="default",fN.Cache="cache";var qE=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==$E.Cache}};var yp=class{constructor(e){this.key=e}},vp=class{constructor(e){this.key=e}},zE=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=le(),this.mutatedKeys=le(),this.Xa=rM(e),this.eu=new gp(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new mp,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Np(this.query,p)?p:null,E=!!g&&this.mutatedKeys.has(g.key),D=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?E!==D&&(r.track({type:3,doc:y}),R=!0):this.iu(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=D?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,E){let D=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z(20277,{At:R})}};return D(y)-D(E)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Pa(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new mp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=le(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new vp(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new yp(r))}),n}uu(e){this.Ha=e.qs,this.Za=le();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Pa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Aw="SyncEngine",GE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},WE=class{constructor(e){this.key=e,this.lu=!1}},KE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Fr(a=>nM(a),Rp),this.Tu=new Map,this.Iu=new Set,this.du=new $e($.comparator),this.Eu=new Map,this.Au=new Xu,this.Ru={},this.Vu=new Map,this.mu=Ju.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function l4(t,e,n=!0){let r=LM(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await MM(r,e,n,!0),i}async function d4(t,e){let n=LM(t);await MM(n,e,!0,!1)}async function MM(t,e,n,r){let i=await Gq(t.localStore,ir(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await h4(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&CM(t.remoteStore,i),a}async function h4(t,e,n,r,i){t.gu=(p,g,y)=>async function(D,R,x,H){let G=R.view.nu(x);G.Ds&&(G=await cN(D.localStore,R.query,!1).then(({documents:T})=>R.view.nu(T,G)));let Ie=H&&H.targetChanges.get(R.targetId),qe=H&&H.targetMismatches.get(R.targetId)!=null,Ce=R.view.applyChanges(G,D.isPrimaryClient,Ie,qe);return gN(D,R.targetId,Ce._u),Ce.snapshot}(t,p,g,y);let o=await cN(t.localStore,e,!0),s=new zE(e,o.qs),a=s.nu(o.documents),u=Yu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);gN(t,n,l._u);let h=new GE(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot}async function f4(t,e,n){let r=X(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Rp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await DE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ww(r.remoteStore,i.targetId),QE(r,i.targetId)}).catch(Va)):(QE(r,i.targetId),await DE(r.localStore,i.targetId,!0))}async function p4(t,e){let n=X(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ww(n.remoteStore,r.targetId))}async function g4(t,e,n){let r=w4(t);try{let i=await function(s,a){let u=X(s),l=rt.now(),h=a.reduce((y,E)=>y.add(E.key),le()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=jr(),D=le();return u.Os.getEntries(y,h).next(R=>{E=R,E.forEach((x,H)=>{H.isValidDocument()||(D=D.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(R=>{p=R;let x=[];for(let H of a){let G=vq(H,p.get(H.key).overlayedDocument);G!=null&&x.push(new ar(H.key,G,QN(G.value.mapValue),xr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,x,a)}).next(R=>{g=R;let x=R.applyToLocalDocumentSet(p,D);return u.documentOverlayCache.saveOverlays(y,R.batchId,x)})}).then(()=>({batchId:g.batchId,changes:oM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new $e(oe)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,n),await ol(r,i.changes),await xp(r.remoteStore)}catch(i){let o=Sw(i,"Failed to persist write");n.reject(o)}}async function PM(t,e){let n=X(t);try{let r=await $q(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?be(s.lu,14607):i.removedDocuments.size>0&&(be(s.lu,42227),s.lu=!1))}),await ol(n,r,e)}catch(r){await Va(r)}}function pN(t,e,n){let r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=X(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&Dw(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function m4(t,e,n){let r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new $e($.comparator);s=s.insert(o,jn.newNoDocument(o,ee.min()));let a=le().add(o),u=new np(ee.min(),new Map,new $e(oe),s,a);await PM(r,u),r.du=r.du.remove(o),r.Eu.delete(e),Rw(r)}else await DE(r.localStore,e,!1).then(()=>QE(r,e,n)).catch(Va)}async function y4(t,e){let n=X(t),r=e.batch.batchId;try{let i=await Hq(n.localStore,e);kM(n,r,null),xM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ol(n,i)}catch(i){await Va(i)}}async function v4(t,e,n){let r=X(t);try{let i=await function(s,a){let u=X(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(be(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);kM(r,e,n),xM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ol(r,i)}catch(i){await Va(i)}}function xM(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function kM(t,e,n){let r=X(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function QE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||OM(t,r)})}function OM(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(ww(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Rw(t))}function gN(t,e,n){for(let r of n)r instanceof yp?(t.Au.addReference(r.key,e),_4(t,r)):r instanceof vp?(V(Aw,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||OM(t,r.key)):z(19791,{yu:r})}function _4(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(V(Aw,"New document in limbo: "+n),t.Iu.add(r),Rw(t))}function Rw(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new $(xe.fromString(e)),r=t.mu.next();t.Eu.set(r,new WE(n)),t.du=t.du.insert(n,r),CM(t.remoteStore,new Zu(ir(tM(n.path)),r,"TargetPurposeLimboResolution",dw.ue))}}async function ol(t,e,n){let r=X(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=TE.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await async function(u,l){let h=X(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,g=>P.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>P.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Fa(p))throw p;V(Ew,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),E=y.snapshotVersion,D=y.withLastLimboFreeSnapshotVersion(E);h.Fs=h.Fs.insert(g,D)}}}(r.localStore,o))}async function I4(t,e){let n=X(t);if(!n.currentUser.isEqual(e)){V(Aw,"User change. New user:",e.toKey());let r=await TM(n.localStore,e);n.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ol(n,r.Bs)}}function E4(t,e){let n=X(t),r=n.Eu.get(e);if(r&&r.lu)return le().add(r.key);{let i=le(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function LM(t){let e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m4.bind(null,e),e.hu.J_=c4.bind(null,e.eventManager),e.hu.pu=u4.bind(null,e.eventManager),e}function w4(t){let e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v4.bind(null,e),e}var VM=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=Mp(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)}Cu(n,r){return null}Fu(n,r){return null}vu(n){return Bq(this.persistence,new CE,n.initialUser,this.serializer)}Du(n){return new cp(wE.Vi,this.serializer)}bu(n){return new AE}async terminate(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),YE=class extends VM{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){be(this.persistence.referenceDelegate instanceof up,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new uE(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new cp(r=>up.Vi(r,n),this.serializer)}};var T4=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>pN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=I4.bind(null,this.syncEngine),await o4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return function(){return new HE}()}createDatastore(n){let r=Mp(n.databaseInfo.databaseId),i=function(s){return new xE(s)}(n.databaseInfo);return function(s,a,u,l){return new VE(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new jE(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>pN(this.syncEngine,r,0),function(){return dp.C()?new dp:new RE}())}createSyncEngine(n,r){return function(o,s,a,u,l,h,p){let g=new KE(o,s,a,u,l,h);return p&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){var n,r;await async function(o){let s=X(o);V(Uo,"RemoteStore shutting down."),s.Ia.add(5),await il(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return t.provider={build:()=>new t},t})();var ZE=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Pi="FirestoreClient",JE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ft.UNAUTHENTICATED,this.clientId=qu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{V(Pi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(V(Pi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Sw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function wI(t,e){t.asyncQueue.verifyOperationInProgress(),V(Pi,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await TM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{Ai("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Ai("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function mN(t,e){t.asyncQueue.verifyOperationInProgress();let n=await b4(t);V(Pi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>dN(e.remoteStore,i)),t._onlineComponents=e}async function b4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V(Pi,"Using user provided OfflineComponentProvider");try{await wI(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ai("Error using user provided cache. Falling back to memory cache: "+n),await wI(t,new VM)}}else V(Pi,"Using default OfflineComponentProvider"),await wI(t,new YE(void 0));return t._offlineComponents}async function FM(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(V(Pi,"Using user provided OnlineComponentProvider"),await mN(t,t._uninitializedComponentsProvider._online)):(V(Pi,"Using default OnlineComponentProvider"),await mN(t,new T4))),t._onlineComponents}function C4(t){return FM(t).then(e=>e.syncEngine)}async function S4(t){let e=await FM(t),n=e.eventManager;return n.onListen=l4.bind(null,e.syncEngine),n.onUnlisten=f4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=d4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=p4.bind(null,e.syncEngine),n}function D4(t,e,n={}){let r=new nr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){let h=new ZE({next:g=>{h.Ou(),s.enqueueAndForget(()=>a4(o,p)),g.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new qE(a,h,{includeMetadataChanges:!0,ka:!0});return s4(o,p)}(await S4(t),t.asyncQueue,e,n,r)),r.promise}function jM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var yN=new Map;var UM="firestore.googleapis.com",vN=!0,_p=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UM,this.ssl=vN}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:vN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Fq)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},xa=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _p({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _p(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TI;switch(r.type){case"firstParty":return new DI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=yN.get(n);r&&(V("ComponentProvider","Removing Datastore"),yN.delete(n),r.terminate())}(this),Promise.resolve()}};function BM(t,e,n,r={}){var i;t=ko(t,xa);let o=Eo(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(A_(`https://${u}`),R_("Firestore",!0)),s.host!==UM&&s.host!==u&&Ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!wo(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ft.MOCK_USER;else{h=x0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ft(g)}t._authCredentials=new bI(new Gf(h,p))}}var Ur=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},St=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(rl(n,t._jsonSchema))return new t(e,r||null,new $(xe.fromString(n.referencePath)))}};St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:nt("string",St._jsonSchemaVersion),referencePath:nt("string")};var bi=class t extends Ur{constructor(e,n,r){super(e,n,tM(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new $(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function HM(t,e,...n){if(t=yt(t),CN("collection","path",e),t instanceof xa){let r=xe.fromString(e,...n);return VR(r),new bi(t,null,r)}{if(!(t instanceof St||t instanceof bi))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(xe.fromString(e,...n));return VR(r),new bi(t.firestore,null,r)}}function Nw(t,e,...n){if(t=yt(t),arguments.length===1&&(e=qu.newId()),CN("doc","path",e),t instanceof xa){let r=xe.fromString(e,...n);return LR(r),new St(t,null,new $(r))}{if(!(t instanceof St||t instanceof bi))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(xe.fromString(e,...n));return LR(r),new St(t.firestore,t instanceof bi?t.converter:null,new $(r))}}var _N="AsyncQueue",Ip=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new hp(this,"async_queue_retry"),this.oc=()=>{let r=EI();r&&V(_N,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=EI();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=EI();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new nr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Fa(e))throw e;V(_N,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,kr("INTERNAL UNHANDLED ERROR: ",IN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=UE.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&z(47125,{hc:IN(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function IN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Bo=class extends xa{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ip,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ip(e),this._firestoreClient=void 0,await e}}};function $M(t,e){let n=typeof t=="object"?t:ua(),r=typeof t=="string"?t:e||Zf,i=If(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=M0("firestore");o&&BM(i,...o)}return i}function qM(t){if(t._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||A4(t),t._firestoreClient}function A4(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new PI(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,jM(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new JE(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var Ci=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Dt.fromBase64String(e))}catch(n){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rl(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Ci._jsonSchemaVersion="firestore/bytes/1.0",Ci._jsonSchema={type:nt("string",Ci._jsonSchemaVersion),bytes:nt("string")};var ka=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var el=class{constructor(e){this._methodName=e}};var Si=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(rl(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Si._jsonSchemaVersion="firestore/geoPoint/1.0",Si._jsonSchema={type:nt("string",Si._jsonSchemaVersion),latitude:nt("number"),longitude:nt("number")};var Di=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rl(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new L(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Di._jsonSchemaVersion="firestore/vectorValue/1.0",Di._jsonSchema={type:nt("string",Di._jsonSchemaVersion),vectorValues:nt("object")};var R4=/^__.*__$/,XE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new jo(e,this.data,n,this.fieldTransforms)}},Ep=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function zM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z(40011,{Ec:t})}}var ew=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Tp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(zM(this.Ec)&&R4.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},tw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mp(e)}Dc(e,n,r,i=!1){return new ew({Ec:e,methodName:n,bc:r,path:cn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function kp(t){let e=t._freezeSettings(),n=Mp(t._databaseId);return new tw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function N4(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);Mw("Data must be an object, but it was:",s,r);let a=WM(r,s),u,l;if(o.merge)u=new vn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=nw(e,p,n);if(!s.contains(g))throw new L(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);QM(h,g)||h.push(g)}u=new vn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new XE(new an(a),u,l)}var wp=class t extends el{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function M4(t,e,n,r){let i=t.Dc(1,e,n);Mw("Data must be an object, but it was:",i,r);let o=[],s=an.empty();xi(r,(u,l)=>{let h=Pw(e,u,n);l=yt(l);let p=i.gc(h);if(l instanceof wp)o.push(h);else{let g=sl(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new vn(o);return new Ep(s,a,i.fieldTransforms)}function P4(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[nw(e,r,n)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(nw(e,o[g])),u.push(o[g+1]);let l=[],h=an.empty();for(let g=a.length-1;g>=0;--g)if(!QM(l,a[g])){let y=a[g],E=u[g];E=yt(E);let D=s.gc(y);if(E instanceof wp)l.push(y);else{let R=sl(E,D);R!=null&&(l.push(y),h.set(y,R))}}let p=new vn(l);return new Ep(h,p,s.fieldTransforms)}function GM(t,e,n,r=!1){return sl(n,t.Dc(r?4:3,e))}function sl(t,e){if(KM(t=yt(t)))return Mw("Unsupported field value:",e,t),WM(t,e);if(t instanceof el)return function(r,i){if(!zM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=sl(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=rt.fromDate(r);return{timestampValue:sp(i.serializer,o)}}if(r instanceof rt){let o=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sp(i.serializer,o)}}if(r instanceof Si)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ci)return{bytesValue:gM(i.serializer,r._byteString)};if(r instanceof St){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Iw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Di)return function(s,a){return{mapValue:{fields:{[fw]:{stringValue:pw},[Ca]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return _w(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Cp(r)}`)}(t,e)}function WM(t,e){let n={};return BN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xi(t,(r,i)=>{let o=sl(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function KM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof Si||t instanceof Ci||t instanceof St||t instanceof el||t instanceof Di)}function Mw(t,e,n){if(!KM(n)||!SN(n)){let r=Cp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function nw(t,e,n){if((e=yt(e))instanceof ka)return e._internalPath;if(typeof e=="string")return Pw(t,e);throw Tp("Field path arguments must be of type string or ",t,!1,void 0,n)}var x4=new RegExp("[~\\*/\\[\\]]");function Pw(t,e,n){if(e.search(x4)>=0)throw Tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ka(...e.split("."))._internalPath}catch{throw Tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tp(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+t+u)}function QM(t,e){return t.some(n=>n.isEqual(e))}var tl=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new rw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Op("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},rw=class extends tl{data(){return super.data()}};function Op(t,e){return typeof e=="string"?Pw(t,e):e instanceof ka?e._internalPath:e._delegate._internalPath}function k4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nl=class{},Oa=class extends nl{};function YM(t,e,...n){let r=[];e instanceof nl&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof iw).length,a=o.filter(u=>u instanceof bp).length;if(s>1||s>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var bp=class t extends Oa{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return XM(e._query,n),new Ur(e.firestore,e.converter,zI(e._query,n))}_parse(e){let n=kp(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){wN(p,h);let E=[];for(let D of p)E.push(EN(u,o,D));g={arrayValue:{values:E}}}else g=EN(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||wN(p,h),g=GM(a,s,p,h==="in"||h==="not-in");return tt.create(l,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function ZM(t,e,n){let r=e,i=Op("where",t);return bp._create(i,r,n)}var iw=class t extends nl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Un.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)XM(s,u),s=zI(s,u)}(e._query,n),new Ur(e.firestore,e.converter,zI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ow=class t extends Oa{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lo(o,s)}(e._query,this._field,this._direction);return new Ur(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Vr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function JM(t,e="asc"){let n=e,r=Op("orderBy",t);return ow._create(r,n)}var sw=class t extends Oa{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Ur(e.firestore,e.converter,tp(e._query,this._limit,this._limitType))}};function xw(t){return L$("limit",t),sw._create("limit",t,"F")}var aw=class t extends Oa{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=O4(e,this.type,this._docOrFields,this._inclusive);return new Ur(e.firestore,e.converter,function(i,o){return new Vr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function kw(...t){return aw._create("startAt",t,!0)}function O4(t,e,n,r){if(n[0]=yt(n[0]),n[0]instanceof tl)return function(o,s,a,u,l){if(!u)throw new L(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of _a(o))if(p.field.isKeyField())h.push(Xf(s,u.key));else{let g=u.data.field(p.field);if(Dp(g))throw new L(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=p.field.canonicalString();throw new L(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(g)}return new Ni(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=kp(t.firestore);return function(s,a,u,l,h,p){let g=s.explicitOrderBy;if(h.length>g.length)throw new L(M.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let E=0;E<h.length;E++){let D=h[E];if(g[E].field.isKeyField()){if(typeof D!="string")throw new L(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof D}`);if(!vw(s)&&D.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${D}' contains a slash.`);let R=s.path.child(xe.fromString(D));if(!$.isDocumentKey(R))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);let x=new $(R);y.push(Xf(a,x))}else{let R=GM(u,l,D);y.push(R)}}return new Ni(y,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function EN(t,e,n){if(typeof(n=yt(n))=="string"){if(n==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vw(e)&&n.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(xe.fromString(n));if(!$.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xf(t,new $(r))}if(n instanceof St)return Xf(t,n._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cp(n)}.`)}function wN(t,e){if(!Array.isArray(t)||t.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XM(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var cw=class{convertValue(e,n="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return xi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ca].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Le(s.doubleValue));return new Di(o)}convertGeoPoint(e){return new Si(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Ap(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){let n=Or(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=xe.fromString(e);be(EM(r),9688,{name:e});let i=new Jf(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(n)||kr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function L4(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var va=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ea=class t extends tl{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new wa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Op("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Ea._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ea._jsonSchema={type:nt("string",Ea._jsonSchemaVersion),bundleSource:nt("string","DocumentSnapshot"),bundleName:nt("string"),bundle:nt("string")};var wa=class extends Ea{data(e={}){return super.data(e)}},Ta=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new va(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wa(this._firestore,this._userDataWriter,r.key,r,new va(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new wa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new va(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new wa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new va(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:V4(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function V4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z(61501,{type:t})}}Ta._jsonSchemaVersion="firestore/querySnapshot/1.0",Ta._jsonSchema={type:nt("string",Ta._jsonSchemaVersion),bundleSource:nt("string","QuerySnapshot"),bundleName:nt("string"),bundle:nt("string")};var uw=class extends cw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ci(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,n)}};function eP(t){t=ko(t,Ur);let e=ko(t.firestore,Bo),n=qM(e),r=new uw(e);return k4(t._query),D4(n,t._query).then(i=>new Ta(e,r,t,i))}function tP(t,e,n,...r){t=ko(t,St);let i=ko(t.firestore,Bo),o=kp(i),s;return s=typeof(e=yt(e))=="string"||e instanceof ka?P4(o,"updateDoc",t._key,e,n,r):M4(o,"updateDoc",t._key,e),Ow(i,[s.toMutation(t._key,xr.exists(!0))])}function nP(t){return Ow(ko(t.firestore,Bo),[new Qu(t._key,xr.none())])}function rP(t,e){let n=ko(t.firestore,Bo),r=Nw(t),i=L4(t.converter,e);return Ow(n,[N4(kp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,xr.exists(!1))]).then(()=>r)}function Ow(t,e){return function(r,i){let o=new nr;return r.asyncQueue.enqueueAndForget(async()=>g4(await C4(r),i,o)),o.promise}(qM(t),e)}(function(e,n=!0){(function(i){La=i})(ca),Vn(new Ut("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Bo(new CI(r.getProvider("auth-internal")),new AI(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jf(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Qe(PR,xR,e),Qe(PR,xR,"esm2017")})();var $o=class{constructor(e){return e}},iP="firestore",Lw=class{constructor(){return da(iP)}};var Vw=new U("angularfire2.firestore-instances");function F4(t,e){let n=Tf(iP,t,e);return n&&new $o(n)}function j4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new $o(r)}}var U4={provide:Lw,deps:[[new br,Vw]]},B4={provide:$o,useFactory:F4,deps:[[new br,Vw],Do]};function xoe(t,...e){return Qe("angularfire",Co.full,"fst"),Tn([B4,U4,{provide:Vw,useFactory:j4(t),multi:!0,deps:[we,Ze,So,Pu,[new br,Vf],[new br,Cf],...e]}])}var oP=Bt(rP,!0,2);var Lp=Bt(HM,!0,2);var sP=Bt(nP,!0,2);var Fw=Bt(Nw,!0,2);var Br=Bt(eP,!0);var koe=Bt($M,!0);var aP=Bt(JM,!0,2),Hr=Bt(YM,!0,2);var cP=Bt(tP,!0,2);var Ua=Bt(ZM,!0,2);var Vp=class t{firestore=N($o);promptsCollection=Lp(this.firestore,"prompts");categoriesCollection=Lp(this.firestore,"categories");tagsCollection=Lp(this.firestore,"tags");currCategories=Me([]);currTags=Me([]);currPrompts=Me([]);error=Me(null);async getPrompts(){try{this.error.set(null);let e=this.currPrompts(),n=e.length===0?0:e[e.length-1].old_id,r=await Br(Hr(this.promptsCollection,aP("old_id","asc"),kw(n),xw(10))),i=this.mapQuerySnapshotToPrompts(r);return console.log("Prompts obtenidos:",i,e),this.currPrompts.set([...e,...i.slice(1)]),this.currPrompts()}catch(e){let n=`Error al obtener prompts: ${e}`;return this.error.set(n),console.error(n),[]}}async getPromptById(e){try{this.error.set(null);let n=Hr(this.promptsCollection,Ua("slug","==",e)),r=await Br(n);if(r.empty)return null;let i=r.docs[0];return i.exists()?this.mapDocumentToPrompt(i.id,i.data()):null}catch(n){let r=`Error al obtener prompt ${e}: ${n}`;return this.error.set(r),console.error(r),null}}async createPrompt(e){try{this.error.set(null);let n=Y(k({},e),{fecha_creacion:new Date});return(await oP(this.promptsCollection,n)).id}catch(n){let r=`Error al crear prompt: ${n}`;return this.error.set(r),console.error(r),null}}async updatePrompt(e,n){try{this.error.set(null);let r=Fw(this.firestore,"prompts",e);return await cP(r,Y(k({},n),{fechaModificacion:new Date})),!0}catch(r){let i=`Error al actualizar prompt ${e}: ${r}`;return this.error.set(i),console.error(i),!1}}async deletePrompt(e){try{this.error.set(null);let n=Fw(this.firestore,"prompts",e);return await sP(n),!0}catch(n){let r=`Error al eliminar prompt ${e}: ${n}`;return this.error.set(r),console.error(r),!1}}async searchPrompts(e){try{this.error.set(null);let n=e.toLowerCase();return(await this.getPrompts()).filter(i=>i.titulo.toLowerCase().includes(n)||i.prompt.toLowerCase().includes(n)||i.descripcion.toLowerCase().includes(n)||i.categoria.toLowerCase().includes(n)||i.tags.some(o=>o.toLowerCase().includes(n)))}catch(n){let r=`Error en b\xFAsqueda: ${n}`;return this.error.set(r),console.error(r),[]}}async getPromptsByCategory(e){try{this.error.set(null);let n=Hr(this.promptsCollection,Ua("categoria","==",e)),r=await Br(n);return this.mapQuerySnapshotToPrompts(r)}catch(n){let r=`Error al obtener prompts por categor\xEDa: ${n}`;return this.error.set(r),console.error(r),[]}}async getPromptsByTag(e){try{this.error.set(null);let n=Hr(this.promptsCollection,Ua("tags","array-contains",e)),r=await Br(n);return this.mapQuerySnapshotToPrompts(r)}catch(n){let r=`Error al obtener prompts por tag: ${n}`;return this.error.set(r),console.error(r),[]}}async getCategories(){if(this.currCategories().length>0)return this.currCategories();try{this.error.set(null);let e=Hr(this.categoriesCollection),n=await Br(e),r=this.mapQuerySnapshotToCategories(n);return this.currCategories.set(r),r}catch(e){let n=`Error al obtener categor\xEDs: ${e}`;return this.error.set(n),console.error(n),[]}}async getTags(){if(this.currTags().length>0)return this.currTags();try{this.error.set(null);let e=Hr(this.tagsCollection),n=await Br(e),r=this.mapQuerySnapshotToTags(n);return this.currTags.set(r),r}catch(e){let n=`Error al obtener etiquetas: ${e}`;return this.error.set(n),console.error(n),[]}}async getCategoryBySlug(e){try{this.error.set(null);let n=Hr(this.categoriesCollection,Ua("slug","==",e)),r=await Br(n);if(r.empty)return null;let i=r.docs[0];return i.exists()?this.mapDocumentToCategory(i.id,i.data()):null}catch(n){let r=`Error al obtener category ${e}: ${n}`;return this.error.set(r),console.error(r),null}}async getTagBySlug(e){try{this.error.set(null);let n=Hr(this.tagsCollection,Ua("slug","==",e)),r=await Br(n);if(r.empty)return null;let i=r.docs[0];return i.exists()?this.mapDocumentToTag(i.id,i.data()):null}catch(n){let r=`Error al obtener tag ${e}: ${n}`;return this.error.set(r),console.error(r),null}}mapQuerySnapshotToPrompts(e){return e.docs.map(n=>this.mapDocumentToPrompt(n.id,n.data()))}mapQuerySnapshotToCategories(e){return e.docs.map(n=>this.mapDocumentToCategory(n.id,n.data()))}mapQuerySnapshotToTags(e){return e.docs.map(n=>this.mapDocumentToTag(n.id,n.data()))}mapDocumentToPrompt(e,n){return{id:e,old_id:n.old_id?parseInt(n.old_id):void 0,titulo:n.titulo||"",prompt:n.prompt||"",descripcion:n.descripcion||"",autor:n.autor||"",categoria:n.categoria||"",tags:n.tags||[],uso:n.uso||"texto",idioma:n.idioma||"es-AR",fecha_creacion:n.fecha_creacion?.toDate()||new Date,slug:n.slug||this.generateSlug(n.titulo||""),fecha_edicion:n.fecha_edicion?.toDate()||new Date,modelo:n.modelo,ejemplo:n.ejemplo,fuente:n.fuente,referencias:n.referencias,notas:n.notas,estado:n.estado,version:n.version,comentarios:n.comentarios,feedback:n.feedback,rating:n.rating,visibilidad:n.visibilidad,licencia:n.licencia}}mapDocumentToCategory(e,n){return{id:e,name:n.name||"",slug:n.slug||this.generateSlug(n.name||""),prompt_count:Number(n.prompt_count)||0,fecha_creacion:n.fecha_creacion?.toDate()||new Date}}mapDocumentToTag(e,n){return{id:e,name:n.name||"",slug:n.slug||this.generateSlug(n.name||""),prompt_count:Number(n.prompt_count)||0,fecha_creacion:n.fecha_creacion?.toDate()||new Date}}generateSlug(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ba=class t{firestoreService=N(Vp);error=Ft(()=>this.firestoreService.error());search(e,n=!0){return this.searchInFirestore(e,n)}async prompts(){return await this.firestoreService.getPrompts()}async categories(){return await this.firestoreService.getCategories()}async tags(){return await this.firestoreService.getTags()}async byCategory(e){return this.firestoreService.getCategoryBySlug(e).then(async r=>{if(!r)throw new Error(`No se encontr\xF3 la categor\xEDa '${e}'.`);let i=await this.firestoreService.getPromptsByCategory(r.name);return{name:this.titleCase(r.name),prompts:i}})}async byTag(e){return this.firestoreService.getTagBySlug(e).then(async r=>{if(!r)throw new Error(`No se encontr\xF3 la categor\xEDa '${e}'.`);let i=await this.firestoreService.getPromptsByTag(r.name);return{name:this.titleCase(r.name),prompts:i}})}async byId(e){let n=await this.firestoreService.getPromptById(e);if(!n)throw new Error(`No se encontr\xF3 un prompt '${e}'.`);return n}async searchInFirestore(e,n){try{let i=(await this.firestoreService.searchPrompts(e)).map(o=>({item:o,foundIn:"titulo",position:0,relevanceScore:1}));return{search:e,found:i}}catch(r){return console.error("Error en b\xFAsqueda de Firestore:",r),{search:e,found:[]}}}titleCase(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var Fp=class t{clicked=nn();onClick(e){this.clicked.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Re({type:t,selectors:[["button","pd-action-button",""]],hostAttrs:[1,"shadow-md/80","rounded-full","shadow-black/60","text-action-contrast","bg-action","active:scale-95","transition-transform","duration-100","w-10","h-10","flex","items-center","justify-center"],hostBindings:function(n,r){n&1&&Se("click",function(o){return r.onClick(o)})},outputs:{clicked:"clicked"}})};var jp=class t{store=N(pf);darkMode=Me(this.store.get("darkMode")??this.darkModeSystem());setDarkMode(e){this.darkMode.set(e)}toggle(){this.darkMode.set(!this.darkMode())}constructor(){zs(()=>this.apply(this.darkMode()))}apply(e){this.store.save("darkMode",e),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");let n=document.querySelector("meta[name='color-scheme']");if(n)n.setAttribute("content",e?"dark light":"light");else{let r=document.createElement("meta");r.setAttribute("name","color-scheme"),r.setAttribute("content",e?"dark light":"light"),document.head.appendChild(r)}}darkModeSystem(){return window.matchMedia("(prefers-color-scheme: dark)").matches}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var H4={menu:"M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z",back:"m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z",search:"M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z",copy:"M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z",share:"M680-80q-50 0-85-35t-35-85q0-6 3-28L282-392q-16 15-37 23.5t-45 8.5q-50 0-85-35t-35-85q0-50 35-85t85-35q24 0 45 8.5t37 23.5l281-164q-2-7-2.5-13.5T560-760q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35q-24 0-45-8.5T598-672L317-508q2 7 2.5 13.5t.5 14.5q0 8-.5 14.5T317-452l281 164q16-15 37-23.5t45-8.5q50 0 85 35t35 85q0 50-35 85t-85 35Z","dark-mode":"M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z","light-mode":"M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z",close:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z",link:"M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z",terminal:"M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H160v400Zm140-40-56-56 103-104-104-104 57-56 160 160-160 160Zm180 0v-80h240v80H480Z"},Kt=class t{elementRef=N(en);renderer=N(Mn);icon=fe.required({alias:"pdIcon"});size=fe(24);fill=fe("currentColor");constructor(){zs(()=>{this.createSvgIcon()})}createSvgIcon(){let e=H4[this.icon()];if(!e){console.warn(`Icon "${this.icon()}" not found`);return}this.elementRef.nativeElement.innerHTML="";let n=this.renderer.createElement("svg","http://www.w3.org/2000/svg");this.renderer.setAttribute(n,"height",`${this.size()}px`),this.renderer.setAttribute(n,"width",`${this.size()}px`),this.renderer.setAttribute(n,"viewBox","0 -960 960 960"),this.renderer.setAttribute(n,"fill",this.fill());let r=this.renderer.createElement("path","http://www.w3.org/2000/svg");this.renderer.setAttribute(r,"d",e),this.renderer.appendChild(n,r),this.renderer.appendChild(this.elementRef.nativeElement,n)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Re({type:t,selectors:[["","pdIcon",""]],inputs:{icon:[1,"pdIcon","icon"],size:[1,"size"],fill:[1,"fill"]}})};var uP=class t{copyService=N(ff);promptText=fe("");promptUrl=fe(null);copyPrompt(){this.promptText()&&this.copyService.copy(this.promptText())}copyUrl(){this.promptUrl()&&this.copyService.copy(this.promptUrl())}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-copy-actions"]],inputs:{promptText:[1,"promptText"],promptUrl:[1,"promptUrl"]},decls:3,vars:0,consts:[[1,"space-x-2","flex"],["pd-action-button","","title","Copiar la direcci\xF3n","aria-label","Copiar la direcci\xF3n","pdIcon","link",3,"clicked"],["pd-action-button","","title","Copiar el prompt","aria-label","Copiar el prompt","pdIcon","copy",3,"clicked"]],template:function(n,r){n&1&&(Te(0,"div",0)(1,"button",1),Se("clicked",function(){return r.copyUrl()}),ye(),Te(2,"button",2),Se("clicked",function(){return r.copyPrompt()}),ye()())},dependencies:[Fp,Kt],encapsulation:2})};var $4=[[["","drawer-title",""]],"*"],q4=["[drawer-title]","*"],lP=class t{constructor(e){this.renderer=e;this.setListeners()}isOpen=Me(!1);removeDocumentClickListenerFn=null;removeDocumentEscapeListenerFn=null;show(){this.isOpen()!==!0&&(this.isOpen.set(!0),this.setListeners())}hide(){this.isOpen()&&(this.isOpen.set(!1),this.removeDocumentClickListenerFn?.(),this.removeDocumentEscapeListenerFn?.())}onClick(){this.hide()}setListeners(){this.isOpen()===!0&&(this.removeDocumentClickListenerFn=this.renderer.listen("document","click",()=>this.hide()),this.removeDocumentEscapeListenerFn=this.renderer.listen("document","keydown.escape",()=>this.hide(),{passive:!0}))}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeDocumentEscapeListenerFn?.()}static \u0275fac=function(n){return new(n||t)(ge(Mn))};static \u0275cmp=de({type:t,selectors:[["pd-drawer"],["","pd-drawer",""]],ngContentSelectors:q4,decls:7,vars:4,consts:[[1,"drawer","shadow-lg/60","dark:shadow-lg/70","md:shadow-sm/40","md:dark:shadow-md/70","fixed","md:top-14","top-0","z-14","dark:shadow-black","shadow-black/80","bg-drawer","bottom-0","overflow-hidden",3,"click"],[1,"bg-drawer-header","absolute","top-0","left-0","right-0","h-14","z-20","flex","items-center","pl-4","pr-5"],[1,"w-full","absolute","top-14","bottom-0","right-0","overflow-x-hidden","overflow-y-auto"],[1,"pt-4","h-full"],[1,"fixed","md:hidden","top-0","left-0","z-12","bg-black/10","dark:bg-black/20","block","opacity-100","w-screen","h-screen"]],template:function(n,r){n&1&&(Mv($4),wt(0,"div",0),qs("click",function(o){return o.stopPropagation()}),wt(1,"h5",1),Mh(2),Tt(),wt(3,"div",2)(4,"div",3),Mh(5,1),Tt()()(),mi(6,"div",4)),n&2&&(pn("open",r.isOpen()),De(6),pn("hidden",!r.isOpen()))},encapsulation:2})};var _n=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Re({type:t,selectors:[["button","pdHeaderButton",""]],hostAttrs:[1,"h-10","min-w-10","flex","items-center","justify-center","rounded-md","hover:bg-button-hover","transition-colors","text-header-contrast"]})};var Ha=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Re({type:t,selectors:[["","pdTruncate",""]],hostAttrs:[1,"w-full","inline-block","truncate"]})};var G4=new Intl.RelativeTimeFormat("es",{numeric:"auto"});function al(t){let e=new Date,n=t.getTime()-e.getTime(),r=W4(n);return G4.format(K4(n,r),r)}var jw=60*1e3,Uw=60*jw,Bw=24*Uw,Hw=7*Bw,$w=4*Hw,dP=$w*12;function W4(t){return t=Math.abs(t),t<jw?"second":t<Uw?"minute":t<Bw?"hour":t<Hw?"day":t<$w?"week":t<dP?"month":"year"}function K4(t,e){return Math.round(e==="minute"?t/jw:e==="hour"?t/Uw:e==="day"?t/Bw:e==="week"?t/Hw:e==="month"?t/$w:e==="year"?t/dP:t/1e3)}var hP=class t{transform(e){return e?(al(e instanceof Date?e:new Date(e)),al(new Date(e))):"Sin informaci\xF3n"}static \u0275fac=function(n){return new(n||t)};static \u0275pipe=pv({name:"relDate",type:t,pure:!0})};var Q4=["pdHeaderBackButton",""],ki=class t{back=nn();onClick(e){this.back.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["button","pdHeaderBackButton",""]],hostAttrs:["title","Volver","aria-label","Volver"],hostBindings:function(n,r){n&1&&Se("click",function(o){return r.onClick(o)})},outputs:{back:"back"},features:[Pn([_n])],attrs:Q4,decls:1,vars:0,consts:[["pdIcon","back"]],template:function(n,r){n&1&&Vt(0,"span",0)},dependencies:[Kt],encapsulation:2})};var $r=class t{get height(){return this.actualHeight()}double=Me(!1);actualHeight=Ft(()=>this.double()?"h-30":"h-14");static \u0275fac=function(n){return new(n||t)};static \u0275dir=Re({type:t,selectors:[["","pdHeaderLayout",""]],hostAttrs:[1,"sticky","left-0","top-0","z-10","bg-header"],hostVars:2,hostBindings:function(n,r){n&2&&kv(r.height)}})},Up=class t extends $r{constructor(){super(),this.double.set(!0)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Re({type:t,selectors:[["","pdDoubleHeaderLayout",""]],features:[Cr]})},cr=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Re({type:t,selectors:[["","pdHeaderContent",""]],hostAttrs:[1,"px-3","flex","flex-col","justify-center","gap-1","bg-header"]})},ur=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Re({type:t,selectors:[["","pdHeaderRow",""]],hostAttrs:[1,"flex","items-center","overflow-hidden","justify-between","gap-2","h-14"]})};var fP=class t{constructor(e){this.router=e;let n=this.router.parseUrl(this.router.lastSuccessfulNavigation?.initialUrl?.toString()||"/");this.lastParams=n.queryParams,this.lastUrl=n.toString().split("?")[0]||"/"}lastUrl;lastParams;titulo=fe("Elemento");subtitulo=fe("Informaci\xF3n detallada del elemento");copyPrompt=nn();share=nn();onCopyPrompt(e){this.copyPrompt.emit(e)}onBack(e){e.stopPropagation(),this.router.navigate([this.lastUrl],{queryParams:this.lastParams})}onShare(e){this.share.emit(e)}static \u0275fac=function(n){return new(n||t)(ge(Wt))};static \u0275cmp=de({type:t,selectors:[["pd-detail-header"],["","pd-detail-header",""]],inputs:{titulo:[1,"titulo"],subtitulo:[1,"subtitulo"]},outputs:{copyPrompt:"copyPrompt",share:"share"},features:[Pn([Up])],decls:14,vars:4,consts:[["pdHeaderContent",""],["pdHeaderRow","",1,"-mb-2"],["pdHeaderBackButton","",3,"back"],[1,"w-full"],[1,"flex","items-center"],["pdHeaderButton","","title","Copiar el prompt","aria-label","Copiar el prompt",3,"click"],["pdIcon","copy"],["pdHeaderButton","","title","Compartir el prompt","aria-label","Compartir el prompt",3,"click"],["pdIcon","share"],[1,"overflow-hidden","w-full","px-3"],["pdTruncate","",1,"text-header-contrast","text-[1.75rem]/9",3,"title"],["pdTruncate","",1,"text-header-low-contrast","text-sm",3,"title"]],template:function(n,r){n&1&&(Te(0,"div",0)(1,"div",1)(2,"button",2),Se("back",function(o){return r.onBack(o)}),ye(),Vt(3,"div",3),Te(4,"div",4)(5,"button",5),Se("click",function(o){return r.onCopyPrompt(o)}),Vt(6,"span",6),ye(),Te(7,"button",7),Se("click",function(o){return r.onShare(o)}),Vt(8,"span",8),ye()()(),Te(9,"div",9)(10,"h1",10),He(11),ye(),Te(12,"div",11),He(13),ye()()()),n&2&&(De(10),ut("title",r.titulo()),De(),tn(" ",r.titulo()," "),De(),ut("title",r.subtitulo()),De(),tn(" ",r.subtitulo()," "))},dependencies:[Kt,_n,ki,cr,ur,Ha],encapsulation:2})};var Hp=class t{modeService=N(jp);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-mode-toggle"]],decls:1,vars:1,consts:[["pdHeaderButton","",3,"click","pdIcon"]],template:function(n,r){n&1&&(Te(0,"button",0),Se("click",function(){return r.modeService.toggle()}),ye()),n&2&&ut("pdIcon",r.modeService.darkMode()?"dark-mode":"light-mode")},dependencies:[Kt,_n],encapsulation:2})};var IP=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(ge(Mn),ge(en))};static \u0275dir=Re({type:t})}return t})(),Y4=(()=>{class t extends IP{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ls(t)))(i||t)}})();static \u0275dir=Re({type:t,features:[Cr]})}return t})(),EP=new U("");var Z4={provide:EP,useExisting:Qi(()=>Wp),multi:!0};function J4(){let t=gn()?gn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var X4=new U(""),Wp=(()=>{class t extends IP{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!J4())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(ge(Mn),ge(en),ge(X4,8))};static \u0275dir=Re({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Se("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Ph([Z4]),Cr]})}return t})();var ez=new U(""),tz=new U("");function wP(t){return t!=null}function TP(t){return po(t)?Ve(t):t}function bP(t){let e={};return t.forEach(n=>{e=n!=null?k(k({},e),n):e}),Object.keys(e).length===0?null:e}function CP(t,e){return e.map(n=>n(t))}function nz(t){return!t.validate}function SP(t){return t.map(e=>nz(e)?e:n=>e.validate(n))}function rz(t){if(!t)return null;let e=t.filter(wP);return e.length==0?null:function(n){return bP(CP(n,e))}}function DP(t){return t!=null?rz(SP(t)):null}function iz(t){if(!t)return null;let e=t.filter(wP);return e.length==0?null:function(n){let r=CP(n,e).map(TP);return Ug(r).pipe(ae(bP))}}function AP(t){return t!=null?iz(SP(t)):null}function pP(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function RP(t){return t._rawValidators}function NP(t){return t._rawAsyncValidators}function qw(t){return t?Array.isArray(t)?t:[t]:[]}function qp(t,e){return Array.isArray(t)?t.includes(e):t===e}function gP(t,e){let n=qw(e);return qw(t).forEach(i=>{qp(n,i)||n.push(i)}),n}function mP(t,e){return qw(e).filter(n=>!qp(t,n))}var zw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}};var hl=class extends zw{_parent=null;name=null;valueAccessor=null},Gw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},oz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},pae=Y(k({},oz),{"[class.ng-submitted]":"isSubmitted"}),MP=(()=>{class t extends Gw{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ge(hl,2))};static \u0275dir=Re({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&pn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Cr]})}return t})();var cl="VALID",$p="INVALID",$a="PENDING",ul="DISABLED",za=class{},zp=class extends za{value;source;constructor(e,n){super(),this.value=e,this.source=n}},ll=class extends za{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},dl=class extends za{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},qa=class extends za{status;source;constructor(e,n){super(),this.status=e,this.source=n}};function sz(t){return(Kp(t)?t.validators:t)||null}function az(t){return Array.isArray(t)?DP(t):t||null}function cz(t,e){return(Kp(e)?e.asyncValidators:t)||null}function uz(t){return Array.isArray(t)?AP(t):t||null}function Kp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Ww=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return xn(this.statusReactive)}set status(e){xn(()=>this.statusReactive.set(e))}_status=Ft(()=>this.statusReactive());statusReactive=Me(void 0);get valid(){return this.status===cl}get invalid(){return this.status===$p}get pending(){return this.status==$a}get disabled(){return this.status===ul}get enabled(){return this.status!==ul}errors;get pristine(){return xn(this.pristineReactive)}set pristine(e){xn(()=>this.pristineReactive.set(e))}_pristine=Ft(()=>this.pristineReactive());pristineReactive=Me(!0);get dirty(){return!this.pristine}get touched(){return xn(this.touchedReactive)}set touched(e){xn(()=>this.touchedReactive.set(e))}_touched=Ft(()=>this.touchedReactive());touchedReactive=Me(!1);get untouched(){return!this.touched}_events=new ze;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mP(e,this._rawAsyncValidators))}hasValidator(e){return qp(this._rawValidators,e)}hasAsyncValidator(e){return qp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Y(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new dl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new dl(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Y(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ll(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new ll(!0,r))}markAsPending(e={}){this.status=$a;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qa(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Y(k({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ul,this.errors=null,this._forEachChild(i=>{i.disable(Y(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zp(this.value,r)),this._events.next(new qa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Y(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=cl,this._forEachChild(r=>{r.enable(Y(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Y(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cl||this.status===$a)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zp(this.value,n)),this._events.next(new qa(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Y(k({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ul:cl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=$a,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=TP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new qa(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Je,this.statusChanges=new Je}_calculateStatus(){return this._allControlsDisabled()?ul:this.errors?$p:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($a)?$a:this._anyControlsHaveStatus($p)?$p:cl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new ll(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new dl(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=az(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=uz(this._rawAsyncValidators)}};var PP=new U("",{providedIn:"root",factory:()=>Kw}),Kw="always";function lz(t,e,n=Kw){hz(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),pz(t,e),mz(t,e),gz(t,e),dz(t,e)}function yP(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),fz(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Gp(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function dz(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function hz(t,e){let n=RP(t);e.validator!==null?t.setValidators(pP(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=NP(t);e.asyncValidator!==null?t.setAsyncValidators(pP(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Gp(e._rawValidators,i),Gp(e._rawAsyncValidators,i)}function fz(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=RP(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=NP(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Gp(e._rawValidators,r),Gp(e._rawAsyncValidators,r),n}function pz(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&xP(t,e)})}function gz(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&xP(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function xP(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function mz(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function yz(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function vz(t){return Object.getPrototypeOf(t.constructor)===Y4}function _z(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Wp?n=o:vz(o)?r=o:i=o}),i||r||n||null}function vP(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function _P(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var kP=class extends Ww{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(sz(n),cz(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kp(n)&&(n.nonNullable||n.initialValueIsDefault)&&(_P(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){_P(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var OP=new U(""),Iz={provide:hl,useExisting:Qi(()=>Qw)},Qw=(()=>{class t extends hl{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(n){}model;update=new Je;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=_z(this,i)}ngOnChanges(n){if(this._isControlChanged(n)){let r=n.form.previousValue;r&&yP(r,this,!1),lz(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}yz(n,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&yP(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_isControlChanged(n){return n.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||t)(ge(ez,10),ge(tz,10),ge(EP,10),ge(OP,8),ge(PP,8))};static \u0275dir=Re({type:t,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[Ph([Iz]),Cr,fi]})}return t})();var Ez=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=ho({type:t});static \u0275inj=ri({})}return t})();var Qp=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:OP,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:PP,useValue:n.callSetDisabledState??Kw}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ho({type:t});static \u0275inj=ri({imports:[Ez]})}return t})();var Yp=class t{router=N(Wt);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-placeholder-searcher"]],decls:2,vars:0,consts:[[1,"w-full",3,"click"],["type","text","readonly","","placeholder","Buscar prompts...","aria-label","Buscar prompts","aria-autocomplete","list","aria-haspopup","listbox","aria-controls","search-options","aria-activedescendant","search-option-active",1,"w-full","bg-search","ring-0","outline-0","text-search-contrast","placeholder:text-placeholder","placeholder:text-center","rounded-full","px-6","p-1.5"]],template:function(n,r){n&1&&(wt(0,"div",0),qs("click",function(o){return o.stopPropagation(),r.router.navigate(["/searching"])}),mi(1,"input",1),Tt())},dependencies:[Qp],encapsulation:2})};var LP=class t{open=nn();onMainButtonClick(e){e.stopPropagation(),this.open.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-main-header"],["","pd-main-header",""]],outputs:{open:"open"},features:[Pn([$r])],decls:8,vars:0,consts:[["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderButton","","title","Abrir men\xFA","aria-label","Abrir men\xFA","pdIcon","menu",1,"md:hidden",3,"click"],[1,"text-2xl/8","hidden","md:inline-flex","items-center","gap-0.5","text-contrast","font-mont-alt","font-semibold",2,"letter-spacing","0.07em"],["pdIcon","terminal",1,"scale-[115%]","text-lime-300"],[1,"w-full","max-w-[500px]"]],template:function(n,r){n&1&&(Te(0,"div",0)(1,"div",1)(2,"button",2),Se("click",function(o){return r.onMainButtonClick(o)}),ye(),Te(3,"div",3),Vt(4,"span",4),He(5," ARTIFICIALMENTE "),ye(),Vt(6,"pd-placeholder-searcher",5)(7,"pd-mode-toggle"),ye()())},dependencies:[Yp,Hp,Kt,cr,ur,_n],encapsulation:2})};var Tz=["searchInput"],Zp=class t{clear(e){e.stopPropagation(),this.searchControl.setValue(""),this.search.emit("")}searchInput;searchControl=new kP("");search=nn();term=fe("");onSearch(){this.search.emit(this.searchControl.value?.trim()??""),this.searchInput.nativeElement.blur()}ngAfterViewInit(){setTimeout(()=>{this.searchInput.nativeElement.focus()},20),this.searchControl.valueChanges.pipe(Hg(300)).subscribe(e=>{let n=e?.trim()??"";this.search.emit(n)}),this.searchControl.setValue(this.term())}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-searcher"]],viewQuery:function(n,r){if(n&1&&xv(Tz,5),n&2){let i;Jc(i=Xc())&&(r.searchInput=i.first)}},inputs:{term:[1,"term"]},outputs:{search:"search"},decls:4,vars:1,consts:[["searchInput",""],[1,"w-full","flex","flex-row","items-center","gap-2"],["tabindex","0","type","text","autofocus","","placeholder","Buscar prompts...","aria-label","Buscar prompts","aria-autocomplete","list","aria-haspopup","listbox","aria-controls","search-options","aria-activedescendant","search-option-active",1,"w-full","text-primary-contrast","p-1.5","ring-0","outline-0","border-b-[1px]","border-dotted","border-b-contrast",3,"keydown.enter","formControl"],["pdHeaderButton","","title","Abrir men\xFA","aria-label","Abrir men\xFA","pdIcon","close",3,"click"]],template:function(n,r){if(n&1){let i=Rv();Te(0,"div",1)(1,"input",2,0),Se("keydown.enter",function(){return xc(i),kc(r.onSearch())}),ye(),Te(3,"button",3),Se("click",function(s){return xc(i),kc(r.clear(s))}),ye()()}n&2&&(De(),ut("formControl",r.searchControl))},dependencies:[Qp,Wp,MP,Qw,_n,Kt],encapsulation:2})};var VP=class t{router=N(Wt);search=nn();term=fe("");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-search-header"],["","pd-search-header",""]],inputs:{term:[1,"term"]},outputs:{search:"search"},features:[Pn([$r])],decls:4,vars:1,consts:[["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderBackButton","",3,"back"],[1,"w-full",3,"search","term"]],template:function(n,r){n&1&&(Te(0,"div",0)(1,"div",1)(2,"button",2),Se("back",function(o){return r.onBack(o)}),ye(),Te(3,"pd-searcher",3),Se("search",function(o){return r.search.emit(o)}),ye()()()),n&2&&(De(3),ut("term",r.term()))},dependencies:[cr,ur,Zp,ki],encapsulation:2})};var FP=class t{router=N(Wt);titulo=fe("");subtitulo=fe("");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-section-header"],["","pd-section-header",""]],inputs:{titulo:[1,"titulo"],subtitulo:[1,"subtitulo"]},features:[Pn([$r])],decls:8,vars:4,consts:[["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderBackButton","",3,"back"],[1,"overflow-hidden","w-full","flex","flex-col"],["pdTruncate","",1,"text-header-contrast","text-xl",3,"title"],[1,"text-header-low-contrast","text-sm",3,"title"]],template:function(n,r){n&1&&(Te(0,"div",0)(1,"div",1)(2,"button",2),Se("back",function(o){return r.onBack(o)}),ye(),Te(3,"div",3)(4,"h1",4),He(5),ye(),Te(6,"div",5),He(7),ye()()()()),n&2&&(De(4),ut("title",r.titulo()),De(),tn(" ",r.titulo()," "),De(),ut("title",r.subtitulo()),De(),tn(" ",r.subtitulo()," "))},dependencies:[ki,cr,ur,Ha],encapsulation:2})};var Jp=class t{textData=fe.required({alias:"pdHighlightText"});partIndex=fe.required();isHighlighted=Ft(()=>this.partIndex()===this.textData().in);static \u0275fac=function(n){return new(n||t)};static \u0275dir=Re({type:t,selectors:[["","pdHighlightText",""]],hostAttrs:[1,"whitespace-pre"],hostVars:2,hostBindings:function(n,r){n&2&&pn("bg-resaltador",r.isHighlighted())},inputs:{textData:[1,"pdHighlightText","textData"],partIndex:[1,"partIndex"]}})};function bz(t,e){if(t&1&&(Te(0,"span",1),He(1),ye()),t&2){let n=e.$implicit,r=e.$index,i=Nv();ut("pdHighlightText",i.textData())("partIndex",r),De(),yi(n)}}var jP=class t{textData=fe.required();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-highlighted-text"]],inputs:{textData:[1,"textData"]},decls:3,vars:0,consts:[[1,"whitespace-nowrap","flex","flex-row","justify-start","items-center"],[3,"pdHighlightText","partIndex"]],template:function(n,r){n&1&&(Te(0,"div",0),Dv(1,bz,2,3,"span",1,Sv),ye()),n&2&&(De(),Av(r.textData().parts))},dependencies:[Jp],encapsulation:2})};var Cz=["pd-value-item",""],Xp=class t{value=fe(void 0,{alias:"pd-value-item"});valueText=Ft(()=>{let e=this.value();return e==null?"Sin informaci\xF3n":Array.isArray(e)?e.length>0?e.join(", "):"Sin informaci\xF3n":typeof this.value()=="boolean"?this.value()?"S\xED":"No":e instanceof Date?al(e):String(this.value())});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["","pd-value-item",""]],hostAttrs:[1,"text-md","text-inverse"],inputs:{value:[1,"pd-value-item","value"]},attrs:Cz,decls:1,vars:1,template:function(n,r){n&1&&He(0),n&2&&tn("",r.valueText()," ")},encapsulation:2})};var Sz=["pd-label-item",""],eg=class t{text=fe("",{alias:"pd-label-item"});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["","pd-label-item",""]],hostAttrs:[1,"text-sm","text-inverse","opacity-80"],inputs:{text:[1,"pd-label-item","text"]},attrs:Sz,decls:1,vars:1,template:function(n,r){n&1&&He(0),n&2&&tn("",r.text()," ")},encapsulation:2})};var Dz=["pd-key-value-item",""],UP=class t{label=fe("");value=fe(void 0);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["","pd-key-value-item",""]],hostAttrs:[1,"flex","flex-col","pt-1","pb-3","items-start","justify-center"],inputs:{label:[1,"label"],value:[1,"value"]},attrs:Dz,decls:2,vars:2,consts:[[3,"pd-label-item"],[3,"pd-value-item"]],template:function(n,r){n&1&&Vt(0,"div",0)(1,"div",1),n&2&&(ut("pd-label-item",r.label()),De(),ut("pd-value-item",r.value()))},dependencies:[eg,Xp],encapsulation:2})};function BP(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim()}function wce(t,e,n=40){let r=BP(t),i=BP(e),o=r.indexOf(i);if(o===-1)return{parts:[t.slice(0,n)],highlightIndex:-1};let s=Math.floor(n/2),a=e.length,u=Math.max(0,o-s),l=Math.min(t.length,o+a+s),h=o<=s?0:u,p=o+a>=t.length-s?t.length:l,g=t.slice(h,o),y=t.slice(o,o+a),E=t.slice(o+a,p),D=[],R=-1;return g?(D.push(g),R=D.length):R=0,D.push(y),E&&D.push(E),{parts:D,highlightIndex:R}}function Az(t,e){t&1&&(wt(0,"span",3),He(1,"WARN"),Tt())}function Rz(t,e){t&1&&(wt(0,"span",4),He(1,"404"),Tt())}function Nz(t,e){t&1&&(wt(0,"span",5),He(1,"OK"),Tt())}var HP=class t{notificationService=N(aa);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-notification"]],decls:8,vars:10,consts:[[1,"fixed","duration-200","m-auto","z-35","scale-0","left-0","right-0","w-fit","min-w-64","shadow-lg","shadow-black/30","dark:shadow-black/60","transition-all","ease-out"],[1,"rounded-lg","w-full","flex","bg-neutral-50","dark:bg-neutral-800","items-center","gap-4","p-3"],[1,"w-full","pl-1"],[1,"dark:text-amber-400","font-semibold","text-amber-600","p-0.5","px-1.5","rounded-lg"],[1,"dark:text-red-400","font-semibold","text-red-500","p-0.5","px-1.5","rounded-lg"],[1,"dark:text-green-300","font-semibold","text-green-800","p-0.5","px-1.5","rounded-lg"],[1,"fixed","top-0","left-0","z-30","bg-black/10","dark:bg-black/20","block","opacity-100","w-screen","h-screen"]],template:function(n,r){n&1&&(wt(0,"div",0)(1,"div",1)(2,"span",2),He(3),Tt(),Tv(4,Az,2,0,"span",3)(5,Rz,2,0,"span",4)(6,Nz,2,0,"span",5),Tt()(),mi(7,"div",6)),n&2&&(pn("-bottom-8",!r.notificationService.showNotification())("bottom-18",r.notificationService.showNotification())("scale-100",r.notificationService.showNotification()),De(3),yi(r.notificationService.notificationMessage().message),De(),Cv(r.notificationService.notificationMessage().type==="warn"?4:r.notificationService.notificationMessage().type==="404"?5:6),De(3),pn("hidden",!r.notificationService.showNotification()))},encapsulation:2})};var $P=class t{quantity=fe(0);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-quantity-bagde"]],hostAttrs:[1,"min-w-6","w-6","h-6","inline-flex","items-center","justify-center","rounded-full","bg-primary-light","text-primary-contrast","text-xs"],inputs:{quantity:[1,"quantity"]},decls:2,vars:1,template:function(n,r){n&1&&(wt(0,"span"),He(1),Tt()),n&2&&(De(),yi(r.quantity()))},encapsulation:2})};var zce=(t,e)=>N(Ba).byId(Yw(t)),Gce=(t,e)=>N(Ba).byCategory(Yw(t)),Wce=(t,e)=>N(Ba).byTag(Yw(t));function Yw(t){let e=t.paramMap.get("id");if(!e)throw new Error("Route parameter 'id' is required");return e}export{k as a,Y as b,Z as c,ae as d,Ue as e,Bg as f,Ht as g,lt as h,nk as i,N as j,xc as k,kc as l,kk as m,Me as n,fi as o,en as p,De as q,ge as r,de as s,Re as t,LD as u,Je as v,we as w,SV as x,DV as y,Yc as z,Tv as A,Cv as B,Dv as C,Av as D,ut as E,Te as F,ye as G,Vt as H,Rv as I,Se as J,Nv as K,OV as L,pn as M,He as N,yi as O,tn as P,sA as Q,lF as R,dF as S,pF as T,mF as U,IF as V,Ft as W,zs as X,fe as Y,Hv as Z,bA as _,dj as $,OA as aa,Dr as ba,y_ as ca,Wt as da,hf as ea,W2 as fa,Y2 as ga,rU as ha,aa as ia,ff as ja,pf as ka,jp as la,Gte as ma,Lne as na,Vne as oa,xoe as pa,koe as qa,Ba as ra,uP as sa,lP as ta,hP as ua,fP as va,LP as wa,VP as xa,FP as ya,jP as za,UP as Aa,HP as Ba,$P as Ca,zce as Da,Gce as Ea,Wce as Fa,wce as Ga};
