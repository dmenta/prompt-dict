var kP=Object.defineProperty,OP=Object.defineProperties;var LP=Object.getOwnPropertyDescriptors;var ET=Object.getOwnPropertySymbols;var VP=Object.prototype.hasOwnProperty,FP=Object.prototype.propertyIsEnumerable;var wT=(t,e,n)=>e in t?kP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x=(t,e)=>{for(var n in e||={})VP.call(e,n)&&wT(t,n,e[n]);if(ET)for(var n of ET(e))FP.call(e,n)&&wT(t,n,e[n]);return t},G=(t,e)=>OP(t,LP(e));function Z(t){return typeof t=="function"}function ug(t){return Z(t?.lift)}function ce(t){return e=>{if(ug(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Bo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ml=Bo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Mi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ve=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(o){e=o instanceof ml?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{TT(o)}catch(s){e=e??[],s instanceof ml?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ml(e)}}add(e){var n;if(e&&e!==this)if(this.closed)TT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Mi(n,e)}remove(e){let{_finalizers:n}=this;n&&Mi(n,e),e instanceof t&&e._removeParent(this)}};Ve.EMPTY=(()=>{let t=new Ve;return t.closed=!0,t})();var lg=Ve.EMPTY;function yl(t){return t instanceof Ve||t&&"closed"in t&&Z(t.remove)&&Z(t.add)&&Z(t.unsubscribe)}function TT(t){Z(t)?t():t.unsubscribe()}var yn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $o={setTimeout(t,e,...n){let{delegate:r}=$o;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=$o;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function vl(t){$o.setTimeout(()=>{let{onUnhandledError:e}=yn;if(e)e(t);else throw t})}function Ha(){}var bT=dg("C",void 0,void 0);function CT(t){return dg("E",void 0,t)}function ST(t){return dg("N",t,void 0)}function dg(t,e,n){return{kind:t,value:e,error:n}}var Pi=null;function Ho(t){if(yn.useDeprecatedSynchronousErrorHandling){let e=!Pi;if(e&&(Pi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Pi;if(Pi=null,n)throw r}}else t()}function DT(t){yn.useDeprecatedSynchronousErrorHandling&&Pi&&(Pi.errorThrown=!0,Pi.error=t)}var xi=class extends Ve{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yl(e)&&e.add(this)):this.destination=BP}static create(e,n,r){return new qo(e,n,r)}next(e){this.isStopped?fg(ST(e),this):this._next(e)}error(e){this.isStopped?fg(CT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fg(bT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jP=Function.prototype.bind;function hg(t,e){return jP.call(t,e)}var pg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){_l(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){_l(r)}else _l(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){_l(n)}}},qo=class extends xi{constructor(e,n,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&yn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hg(e.next,o),error:e.error&&hg(e.error,o),complete:e.complete&&hg(e.complete,o)}):i=e}this.destination=new pg(i)}};function _l(t){yn.useDeprecatedSynchronousErrorHandling?DT(t):vl(t)}function UP(t){throw t}function fg(t,e){let{onStoppedNotification:n}=yn;n&&$o.setTimeout(()=>n(t,e))}var BP={closed:!0,next:Ha,error:UP,complete:Ha};function oe(t,e,n,r,i){return new gg(t,e,n,r,i)}var gg=class extends xi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function se(t,e){return ce((n,r)=>{let i=0;n.subscribe(oe(r,o=>{r.next(t.call(e,o,i++))}))})}function jt(t,e){return ce((n,r)=>{let i=0;n.subscribe(oe(r,o=>t.call(e,o,i++)&&r.next(o)))})}var zo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Kt(t){return t}function mg(...t){return yg(t)}function yg(t){return t.length===0?Kt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ne=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=HP(n)?n:new qo(n,r,i);return Ho(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=AT(r),new r((i,o)=>{let s=new qo({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[zo](){return this}pipe(...n){return yg(n)(this)}toPromise(n){return n=AT(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function AT(t){var e;return(e=t??yn.Promise)!==null&&e!==void 0?e:Promise}function $P(t){return t&&Z(t.next)&&Z(t.error)&&Z(t.complete)}function HP(t){return t&&t instanceof xi||$P(t)&&yl(t)}function Go(){return ce((t,e)=>{let n=null;t._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Wo=class extends ne{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,ug(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ve;let n=this.getSubject();e.add(this.source.subscribe(oe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ve.EMPTY)}return e}refCount(){return Go()(this)}};var RT=Bo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class t extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Il(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new RT}next(n){Ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?lg:(this.currentObservers=null,o.push(n),new Ve(()=>{this.currentObservers=null,Mi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ne;return n.source=this,n}}return t.create=(e,n)=>new Il(e,n),t})(),Il=class extends Ue{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:lg}};var pt=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var vg={now(){return(vg.delegate||Date).now()},delegate:void 0};var El=class extends Ve{constructor(e,n){super()}schedule(e,n=0){return this}};var qa={setInterval(t,e,...n){let{delegate:r}=qa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=qa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ko=class extends El{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return qa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&qa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Mi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Qo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Qo.now=vg.now;var Yo=class extends Qo{constructor(e,n=Qo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var za=new Yo(Ko);var wl=class extends Ko{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Tl=class extends Yo{};var _g=new Tl(wl);var Ut=new ne(t=>t.complete());function NT(t){return t&&Z(t.schedule)}function MT(t){return t[t.length-1]}function bl(t){return Z(MT(t))?t.pop():void 0}function $r(t){return NT(MT(t))?t.pop():void 0}function Ig(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function xT(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function PT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ki(t){return this instanceof ki?(this.v=t,this):new ki(t)}function kT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(N){return new Promise(function(R,k){o.push([y,N,R,k])>1||u(y,N)})},T&&(i[y]=T(i[y])))}function u(y,T){try{l(r[y](T))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof ki?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,T){y(T),o.shift(),o.length&&u(o[0][0],o[0][1])}}function OT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof PT=="function"?PT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Cl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Sl(t){return Z(t?.then)}function Dl(t){return Z(t[zo])}function Al(t){return Symbol.asyncIterator&&Z(t?.[Symbol.asyncIterator])}function Rl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Nl=qP();function Ml(t){return Z(t?.[Nl])}function Pl(t){return kT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ki(n.read());if(i)return yield ki(void 0);yield yield ki(r)}}finally{n.releaseLock()}})}function xl(t){return Z(t?.getReader)}function He(t){if(t instanceof ne)return t;if(t!=null){if(Dl(t))return zP(t);if(Cl(t))return GP(t);if(Sl(t))return WP(t);if(Al(t))return LT(t);if(Ml(t))return KP(t);if(xl(t))return QP(t)}throw Rl(t)}function zP(t){return new ne(e=>{let n=t[zo]();if(Z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function GP(t){return new ne(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function WP(t){return new ne(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,vl)})}function KP(t){return new ne(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function LT(t){return new ne(e=>{YP(t,e).catch(n=>e.error(n))})}function QP(t){return LT(Pl(t))}function YP(t,e){var n,r,i,o;return xT(this,void 0,void 0,function*(){try{for(n=OT(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Bt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Hr(t,e=0){return ce((n,r)=>{n.subscribe(oe(r,i=>Bt(r,t,()=>r.next(i),e),()=>Bt(r,t,()=>r.complete(),e),i=>Bt(r,t,()=>r.error(i),e)))})}function qr(t,e=0){return ce((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function VT(t,e){return He(t).pipe(qr(e),Hr(e))}function FT(t,e){return He(t).pipe(qr(e),Hr(e))}function jT(t,e){return new ne(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function UT(t,e){return new ne(n=>{let r;return Bt(n,e,()=>{r=t[Nl](),Bt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function kl(t,e){if(!t)throw new Error("Iterable cannot be null");return new ne(n=>{Bt(n,e,()=>{let r=t[Symbol.asyncIterator]();Bt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function BT(t,e){return kl(Pl(t),e)}function $T(t,e){if(t!=null){if(Dl(t))return VT(t,e);if(Cl(t))return jT(t,e);if(Sl(t))return FT(t,e);if(Al(t))return kl(t,e);if(Ml(t))return UT(t,e);if(xl(t))return BT(t,e)}throw Rl(t)}function Oe(t,e){return e?$T(t,e):He(t)}function W(...t){let e=$r(t);return Oe(t,e)}function Zo(t,e){let n=Z(t)?t:()=>t,r=i=>i.error(n());return new ne(e?i=>e.schedule(r,0,i):r)}function Eg(t){return!!t&&(t instanceof ne||Z(t.lift)&&Z(t.subscribe))}var lr=Bo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});var{isArray:ZP}=Array;function JP(t,e){return ZP(e)?t(...e):t(e)}function Ol(t){return se(e=>JP(t,e))}var{isArray:XP}=Array,{getPrototypeOf:ex,prototype:tx,keys:nx}=Object;function Ll(t){if(t.length===1){let e=t[0];if(XP(e))return{args:e,keys:null};if(rx(e)){let n=nx(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function rx(t){return t&&typeof t=="object"&&ex(t)===tx}function Vl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Fl(...t){let e=$r(t),n=bl(t),{args:r,keys:i}=Ll(t);if(r.length===0)return Oe([],e);let o=new ne(ix(r,e,i?s=>Vl(i,s):Kt));return n?o.pipe(Ol(n)):o}function ix(t,e,n=Kt){return r=>{HT(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)HT(e,()=>{let l=Oe(t[u],e),h=!1;l.subscribe(oe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function HT(t,e,n){t?Bt(n,t,e):e()}function qT(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?T(N):u.push(N),T=N=>{o&&e.next(N),l++;let R=!1;He(n(N,h++)).subscribe(oe(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();s?Bt(e,s,()=>T(k)):T(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(oe(e,y,()=>{p=!0,m()})),()=>{a?.()}}function qe(t,e,n=1/0){return Z(e)?qe((r,i)=>se((o,s)=>e(r,o,i,s))(He(t(r,i))),n):(typeof e=="number"&&(n=e),ce((r,i)=>qT(r,i,t,n)))}function Jo(t=1/0){return qe(Kt,t)}function zT(){return Jo(1)}function Xo(...t){return zT()(Oe(t,$r(t)))}function Ga(t){return new ne(e=>{He(t()).subscribe(e)})}function wg(...t){let e=bl(t),{args:n,keys:r}=Ll(t),i=new ne(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;He(n[h]).subscribe(oe(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Vl(r,a):a),o.complete())}))}});return e?i.pipe(Ol(e)):i}function dr(t){return ce((e,n)=>{let r=null,i=!1,o;r=e.subscribe(oe(n,void 0,void 0,s=>{o=He(t(s,dr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function GT(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(oe(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Oi(t,e){return Z(e)?qe(t,e,1):qe(t,1)}function Tg(t,e=za){return ce((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}n.subscribe(oe(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function zr(t){return ce((e,n)=>{let r=!1;e.subscribe(oe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function hr(t){return t<=0?()=>Ut:ce((e,n)=>{let r=0;e.subscribe(oe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function jl(t=ox){return ce((e,n)=>{let r=!1;e.subscribe(oe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function ox(){return new lr}function Wa(t){return ce((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function fr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?jt((i,o)=>t(i,o,r)):Kt,hr(1),n?zr(e):jl(()=>new lr))}function es(t){return t<=0?()=>Ut:ce((e,n)=>{let r=[];e.subscribe(oe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function bg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?jt((i,o)=>t(i,o,r)):Kt,es(1),n?zr(e):jl(()=>new lr))}function Cg(t,e){return ce(GT(t,e,arguments.length>=2,!0))}function Sg(...t){let e=$r(t);return ce((n,r)=>{(e?Xo(t,n,e):Xo(t,n)).subscribe(r)})}function on(t,e){return ce((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(oe(r,u=>{i?.unsubscribe();let l=0,h=o++;He(t(u,h)).subscribe(i=oe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ul(t){return ce((e,n)=>{He(t).subscribe(oe(n,()=>n.complete(),Ha)),!n.closed&&e.subscribe(n)})}function st(t,e,n){let r=Z(t)||e||n?{next:t,error:e,complete:n}:t;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(oe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Kt}var Dg;function Bl(){return Dg}function Vn(t){let e=Dg;return Dg=t,e}var WT=Symbol("NotFound");function ts(t){return t===WT||t?.name==="\u0275NotFound"}function Gl(t,e){return Object.is(t,e)}var et=null,$l=!1,Ag=1,sx=null,Pt=Symbol("SIGNAL");function z(t){let e=et;return et=t,e}function Wl(){return et}var Gr={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ns(t){if($l)throw new Error("");if(et===null)return;et.consumerOnSignalRead(t);let e=et.nextProducerIndex++;if(Yl(et),e<et.producerNode.length&&et.producerNode[e]!==t&&Qa(et)){let n=et.producerNode[e];Ql(n,et.producerIndexOfThis[e])}et.producerNode[e]!==t&&(et.producerNode[e]=t,et.producerIndexOfThis[e]=Qa(et)?QT(t,et,e):0),et.producerLastReadVersion[e]=t.version}function KT(){Ag++}function Kl(t){if(!(Qa(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Ag)){if(!t.producerMustRecompute(t)&&!rs(t)){zl(t);return}t.producerRecomputeValue(t),zl(t)}}function Rg(t){if(t.liveConsumerNode===void 0)return;let e=$l;$l=!0;try{for(let n of t.liveConsumerNode)n.dirty||ax(n)}finally{$l=e}}function Ng(){return et?.consumerAllowSignalWrites!==!1}function ax(t){t.dirty=!0,Rg(t),t.consumerMarkedDirty?.(t)}function zl(t){t.dirty=!1,t.lastCleanEpoch=Ag}function Wr(t){return t&&(t.nextProducerIndex=0),z(t)}function Li(t,e){if(z(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Qa(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ql(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function rs(t){Yl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Kl(n),r!==n.version))return!0}return!1}function is(t){if(Yl(t),Qa(t))for(let e=0;e<t.producerNode.length;e++)Ql(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function QT(t,e,n){if(YT(t),t.liveConsumerNode.length===0&&ZT(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=QT(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Ql(t,e){if(YT(t),t.liveConsumerNode.length===1&&ZT(t))for(let r=0;r<t.producerNode.length;r++)Ql(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Yl(i),i.producerIndexOfThis[r]=e}}function Qa(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Yl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function YT(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ZT(t){return t.producerNode!==void 0}function Zl(t){sx?.(t)}function Jl(t,e){let n=Object.create(cx);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Kl(n),ns(n),n.value===Ka)throw n.error;return n.value};return r[Pt]=n,Zl(n),r}var Hl=Symbol("UNSET"),ql=Symbol("COMPUTING"),Ka=Symbol("ERRORED"),cx=G(x({},Gr),{value:Hl,dirty:!0,error:null,equal:Gl,kind:"computed",producerMustRecompute(t){return t.value===Hl||t.value===ql},producerRecomputeValue(t){if(t.value===ql)throw new Error("");let e=t.value;t.value=ql;let n=Wr(t),r,i=!1;try{r=t.computation(),z(null),i=e!==Hl&&e!==Ka&&r!==Ka&&t.equal(e,r)}catch(o){r=Ka,t.error=o}finally{Li(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function ux(){throw new Error}var JT=ux;function XT(t){JT(t)}function Mg(t){JT=t}var lx=null;function Pg(t,e){let n=Object.create(Xl);n.value=t,e!==void 0&&(n.equal=e);let r=()=>eb(n);return r[Pt]=n,Zl(n),[r,s=>os(n,s),s=>xg(n,s)]}function eb(t){return ns(t),t.value}function os(t,e){Ng()||XT(t),t.equal(t.value,e)||(t.value=e,dx(t))}function xg(t,e){Ng()||XT(t),os(t,e(t.value))}var Xl=G(x({},Gr),{equal:Gl,value:void 0,kind:"signal"});function dx(t){t.version++,KT(),Rg(t),lx?.(t)}function tb(t){let e=z(null);try{return t()}finally{z(e)}}var id="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(as(e,n)),this.code=e}};function hx(t){return`NG0${Math.abs(t)}`}function as(t,e){return`${hx(t)}${e?": "+e:""}`}var tc=globalThis;function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("")}function ib(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function gr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(gr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function od(t,e){return t?e?`${t} ${e}`:t:e||""}var fx=ve({__forward_ref__:ve});function Bi(t){return t.__forward_ref__=Bi,t.toString=function(){return gr(this())},t}function tt(t){return zg(t)?t():t}function zg(t){return typeof t=="function"&&t.hasOwnProperty(fx)&&t.__forward_ref__===Bi}function ob(t,e){t==null&&Gg(e,t,null,"!=")}function Gg(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function F(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Yr(t){return{providers:t.providers||[],imports:t.imports||[]}}function nc(t){return px(t,sd)}function Wg(t){return nc(t)!==null}function px(t,e){return t.hasOwnProperty(e)&&t[e]||null}function gx(t){let e=t?.[sd]??null;return e||null}function Og(t){return t&&t.hasOwnProperty(td)?t[td]:null}var sd=ve({\u0275prov:ve}),td=ve({\u0275inj:ve}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=F({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Kg(t){return t&&!!t.\u0275providers}var Qg=ve({\u0275cmp:ve}),Yg=ve({\u0275dir:ve}),Zg=ve({\u0275pipe:ve}),Jg=ve({\u0275mod:ve}),Ja=ve({\u0275fac:ve}),$i=ve({__NG_ELEMENT_ID__:ve}),nb=ve({__NG_ENV_ID__:ve});function Hi(t){return typeof t=="string"?t:t==null?"":String(t)}function nd(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Hi(t)}var Xg=ve({ngErrorCode:ve}),sb=ve({ngErrorMessage:ve}),Za=ve({ngTokenPath:ve});function em(t,e){return ab("",-200,e)}function ad(t,e){throw new j(-201,!1)}function mx(t,e){t[Za]??=[];let n=t[Za],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(ob(e.provide,"Token with multi: true should have a provide property"),r=nd(e.provide)):r=nd(e),n[0]!==r&&t[Za].unshift(r)}function yx(t,e){let n=t[Za],r=t[Xg],i=t[sb]||t.message;return t.message=_x(i,r,n,e),t}function ab(t,e,n){let r=new j(e,t);return r[Xg]=e,r[sb]=t,n&&(r[Za]=n),r}function vx(t){return t[Xg]}function _x(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return as(e,`${t}${o}${i}`)}var Lg;function cb(){return Lg}function xt(t){let e=Lg;return Lg=t,e}function tm(t,e,n){let r=nc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;ad(t,"Injector")}var Ix={},Vi=Ix,Vg="__NG_DI_FLAG__",Fg=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Fi(n)||0;try{return this.injector.get(e,r&8?null:Vi,r)}catch(i){if(ts(i))return i;throw i}}};function Ex(t,e=0){let n=Bl();if(n===void 0)throw new j(-203,!1);if(n===null)return tm(t,void 0,e);{let r=wx(e),i=n.retrieve(t,r);if(ts(i)){if(r.optional)return null;throw i}return i}}function te(t,e=0){return(cb()||Ex)(tt(t),e)}function A(t,e){return te(t,Fi(e))}function Fi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function wx(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function jg(t){let e=[];for(let n=0;n<t.length;n++){let r=tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=Tx(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(te(i,o))}else e.push(te(r))}return e}function ub(t,e){return t[Vg]=e,t.prototype[Vg]=e,t}function Tx(t){return t[Vg]}function Kr(t,e){let n=t.hasOwnProperty(Ja);return n?t[Ja]:null}function lb(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function db(t){return t.flat(Number.POSITIVE_INFINITY)}function cd(t,e){t.forEach(n=>Array.isArray(n)?cd(n,e):e(n))}function nm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function hb(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function fb(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function ud(t,e,n){let r=cs(t,e);return r>=0?t[r|1]=n:(r=~r,fb(t,r,e,n)),r}function ld(t,e){let n=cs(t,e);if(n>=0)return t[n|1]}function cs(t,e){return bx(t,e,1)}function bx(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var _n={},kt=[],mr=new U(""),rm=new U("",-1),im=new U(""),Xa=class{get(e,n=Vi){if(n===Vi){let i=ab("",-201);throw i.name="\u0275NotFound",i}return n}};function om(t){return t[Jg]||null}function Zr(t){return t[Qg]||null}function dd(t){return t[Yg]||null}function pb(t){return t[Zg]||null}function In(t){return{\u0275providers:t}}function gb(t){return In([{provide:mr,multi:!0,useValue:t}])}function mb(...t){return{\u0275providers:sm(!0,t),\u0275fromNgModule:!0}}function sm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return cd(e,s=>{let a=s;rd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&yb(i,o),n}function yb(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];am(i,o=>{e(o,r)})}}function rd(t,e,n,r){if(t=tt(t),!t)return!1;let i=null,o=Og(t),s=!o&&Zr(t);if(!o&&!s){let u=t.ngModule;if(o=Og(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)rd(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{cd(o.imports,h=>{rd(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&yb(l,e)}if(!a){let l=Kr(i)||(()=>new i);e({provide:i,useFactory:l,deps:kt},i),e({provide:im,useValue:i,multi:!0},i),e({provide:mr,useValue:()=>te(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;am(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function am(t,e){for(let n of t)Kg(n)&&(n=n.\u0275providers),Array.isArray(n)?am(n,e):e(n)}var Cx=ve({provide:String,useValue:ve});function vb(t){return t!==null&&typeof t=="object"&&Cx in t}function Sx(t){return!!(t&&t.useExisting)}function Dx(t){return!!(t&&t.useFactory)}function ji(t){return typeof t=="function"}function _b(t){return!!t.useClass}var ic=new U(""),ed={},rb={},kg;function oc(){return kg===void 0&&(kg=new Xa),kg}var ze=class{},Ui=class extends ze{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Bg(e,s=>this.processProvider(s)),this.records.set(rm,ss(void 0,this)),i.has("environment")&&this.records.set(ze,ss(void 0,this));let o=this.records.get(ic);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(im,kt,{self:!0}))}retrieve(e,n){let r=Fi(n)||0;try{return this.get(e,Vi,r)}catch(i){if(ts(i))return i;throw i}}destroy(){Ya(this),this._destroyed=!0;let e=z(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),z(e)}}onDestroy(e){return Ya(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ya(this);let n=Vn(this),r=xt(void 0),i;try{return e()}finally{Vn(n),xt(r)}}get(e,n=Vi,r){if(Ya(this),e.hasOwnProperty(nb))return e[nb](this);let i=Fi(r),o,s=Vn(this),a=xt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=Px(e)&&nc(e);h&&this.injectableDefInScope(h)?l=ss(Ug(e),ed):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?oc():this.parent;return n=i&8&&n===Vi?null:n,u.get(e,n)}catch(u){let l=vx(u);throw l===-200||l===-201?new j(l,null):u}finally{xt(a),Vn(s)}}resolveInjectorInitializers(){let e=z(null),n=Vn(this),r=xt(void 0),i;try{let o=this.get(mr,kt,{self:!0});for(let s of o)s()}finally{Vn(n),xt(r),z(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(gr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=tt(e);let n=ji(e)?e:tt(e&&e.provide),r=Rx(e);if(!ji(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ss(void 0,ed,!0),i.factory=()=>jg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=z(null);try{if(n.value===rb)throw em(gr(e));return n.value===ed&&(n.value=rb,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&Mx(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{z(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ug(t){let e=nc(t),n=e!==null?e.factory:Kr(t);if(n!==null)return n;if(t instanceof U)throw new j(204,!1);if(t instanceof Function)return Ax(t);throw new j(204,!1)}function Ax(t){if(t.length>0)throw new j(204,!1);let n=gx(t);return n!==null?()=>n.factory(t):()=>new t}function Rx(t){if(vb(t))return ss(void 0,t.useValue);{let e=cm(t);return ss(e,ed)}}function cm(t,e,n){let r;if(ji(t)){let i=tt(t);return Kr(i)||Ug(i)}else if(vb(t))r=()=>tt(t.useValue);else if(Dx(t))r=()=>t.useFactory(...jg(t.deps||[]));else if(Sx(t))r=(i,o)=>te(tt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=tt(t&&(t.useClass||t.provide));if(Nx(t))r=()=>new i(...jg(t.deps));else return Kr(i)||Ug(i)}return r}function Ya(t){if(t.destroyed)throw new j(205,!1)}function ss(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Nx(t){return!!t.deps}function Mx(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Px(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Bg(t,e){for(let n of t)Array.isArray(n)?Bg(n,e):n&&Kg(n)?Bg(n.\u0275providers,e):e(n)}function it(t,e){let n;t instanceof Ui?(Ya(t),n=t):n=new Fg(t);let r,i=Vn(n),o=xt(void 0);try{return e()}finally{Vn(i),xt(o)}}function Ib(){return cb()!==void 0||Bl()!=null}var En=0,H=1,K=2,nt=3,an=4,Ot=5,qi=6,us=7,Be=8,zi=9,Fn=10,Pe=11,ls=12,um=13,Gi=14,Lt=15,Jr=16,Wi=17,jn=18,sc=19,lm=20,pr=21,hd=22,yr=23,Qt=24,fd=25,Fe=26,Eb=1,dm=6,Xr=7,ac=8,Ki=9,at=10;function Un(t){return Array.isArray(t)&&typeof t[Eb]=="object"}function wn(t){return Array.isArray(t)&&t[Eb]===!0}function hm(t){return(t.flags&4)!==0}function ei(t){return t.componentOffset>-1}function pd(t){return(t.flags&1)===1}function Tn(t){return!!t.template}function ds(t){return(t[K]&512)!==0}function Qi(t){return(t[K]&256)===256}var wb="svg",Tb="math";function cn(t){for(;Array.isArray(t);)t=t[En];return t}function fm(t,e){return cn(e[t])}function bn(t,e){return cn(e[t.index])}function cc(t,e){return t.data[e]}function pm(t,e){return t[e]}function gm(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function un(t,e){let n=e[t];return Un(n)?n:n[En]}function bb(t){return(t[K]&4)===4}function gd(t){return(t[K]&128)===128}function Cb(t){return wn(t[nt])}function Bn(t,e){return e==null?null:t[e]}function mm(t){t[Wi]=0}function ym(t){t[K]&1024||(t[K]|=1024,gd(t)&&Yi(t))}function Sb(t,e){for(;t>0;)e=e[Gi],t--;return e}function uc(t){return!!(t[K]&9216||t[Qt]?.dirty)}function md(t){t[Fn].changeDetectionScheduler?.notify(8),t[K]&64&&(t[K]|=1024),uc(t)&&Yi(t)}function Yi(t){t[Fn].changeDetectionScheduler?.notify(0);let e=Qr(t);for(;e!==null&&!(e[K]&8192||(e[K]|=8192,!gd(e)));)e=Qr(e)}function vm(t,e){if(Qi(t))throw new j(911,!1);t[pr]===null&&(t[pr]=[]),t[pr].push(e)}function Db(t,e){if(t[pr]===null)return;let n=t[pr].indexOf(e);n!==-1&&t[pr].splice(n,1)}function Qr(t){let e=t[nt];return wn(e)?e[nt]:e}function _m(t){return t[us]??=[]}function Im(t){return t.cleanup??=[]}function Ab(t,e,n,r){let i=_m(e);i.push(n),t.firstCreatePass&&Im(t).push(r,i.length-1)}var re={lFrame:Bb(null),bindingsEnabled:!0,skipHydrationRootTNode:null},lc=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(lc||{}),xx=0,$g=!1;function Rb(){return re.lFrame.elementDepthCount}function Nb(){re.lFrame.elementDepthCount++}function Em(){re.lFrame.elementDepthCount--}function Mb(){return re.bindingsEnabled}function wm(){return re.skipHydrationRootTNode!==null}function Tm(t){return re.skipHydrationRootTNode===t}function bm(){re.skipHydrationRootTNode=null}function J(){return re.lFrame.lView}function Ge(){return re.lFrame.tView}function dc(t){return re.lFrame.contextLView=t,t[Be]}function hc(t){return re.lFrame.contextLView=null,t}function ct(){let t=Cm();for(;t!==null&&t.type===64;)t=t.parent;return t}function Cm(){return re.lFrame.currentTNode}function Pb(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function hs(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function Sm(){return re.lFrame.isParent}function Dm(){re.lFrame.isParent=!1}function xb(){return re.lFrame.contextLView}function Am(t){Gg("Must never be called in production mode"),xx=t}function Rm(){return $g}function fs(t){let e=$g;return $g=t,e}function Nm(){let t=re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function kb(){return re.lFrame.bindingIndex}function Ob(t){return re.lFrame.bindingIndex=t}function ps(){return re.lFrame.bindingIndex++}function yd(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Lb(){return re.lFrame.inI18n}function Vb(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,vd(e)}function Fb(){return re.lFrame.currentDirectiveIndex}function vd(t){re.lFrame.currentDirectiveIndex=t}function jb(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Mm(){return re.lFrame.currentQueryIndex}function _d(t){re.lFrame.currentQueryIndex=t}function kx(t){let e=t[H];return e.type===2?e.declTNode:e.type===1?t[Ot]:null}function Pm(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=kx(o),i===null||(o=o[Gi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=re.lFrame=Ub();return r.currentTNode=e,r.lView=t,!0}function Id(t){let e=Ub(),n=t[H];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Ub(){let t=re.lFrame,e=t===null?null:t.child;return e===null?Bb(t):e}function Bb(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function $b(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var xm=$b;function Ed(){let t=$b();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Hb(t){return(re.lFrame.contextLView=Sb(t,re.lFrame.contextLView))[Be]}function $n(){return re.lFrame.selectedIndex}function ti(t){re.lFrame.selectedIndex=t}function km(){let t=re.lFrame;return cc(t.tView,t.selectedIndex)}function qb(){return re.lFrame.currentNamespace}var zb=!0;function wd(){return zb}function Td(t){zb=t}function Hg(t,e=null,n=null,r){let i=Om(t,e,n,r);return i.resolveInjectorInitializers(),i}function Om(t,e=null,n=null,r,i=new Set){let o=[n||kt,mb(t)];return r=r||(typeof t=="object"?void 0:gr(t)),new Ui(o,e||oc(),r||null,i)}var rt=class t{static THROW_IF_NOT_FOUND=Vi;static NULL=new Xa;static create(e,n){if(Array.isArray(e))return Hg({name:""},n,e,"");{let r=e.name??"";return Hg({name:r},e.parent,e.providers,r)}}static \u0275prov=F({token:t,providedIn:"any",factory:()=>te(rm)});static __NG_ELEMENT_ID__=-1},ut=new U(""),$t=(()=>{class t{static __NG_ELEMENT_ID__=Ox;static __NG_ENV_ID__=n=>n}return t})(),ec=class extends $t{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Qi(this._lView)}onDestroy(e){let n=this._lView;return vm(n,e),()=>Db(n,e)}};function Ox(){return new ec(J())}var sn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ht=new U("",{providedIn:"root",factory:()=>{let t=A(ze),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(sn),e.handleError(n))}}}),Gb={provide:mr,useValue:()=>void A(sn),multi:!0},Lx=new U("",{providedIn:"root",factory:()=>{let t=A(ut).defaultView;if(!t)return;let e=A(Ht),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),A($t).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Vx(){return In([gb(()=>void A(Lx))])}function De(t,e){let[n,r,i]=Pg(t,e?.equal),o=n,s=o[Pt];return o.set=r,o.update=i,o.asReadonly=Lm.bind(o),o}function Lm(){let t=this[Pt];if(t.readonlyFn===void 0){let e=()=>this();e[Pt]=t,t.readonlyFn=e}return t.readonlyFn}var vn=class{},fc=new U("",{providedIn:"root",factory:()=>!1});var Vm=new U(""),bd=new U("");var pc=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=Fx}return t})();function Fx(){return new pc(J(),ct())}var Hn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new pt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ne(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=F({token:t,providedIn:"root",factory:()=>new t})}return t})(),Zi=(()=>{class t{internalPendingTasks=A(Hn);scheduler=A(vn);errorHandler=A(Ht);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=F({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ji(...t){}var gc=(()=>{class t{static \u0275prov=F({token:t,providedIn:"root",factory:()=>new qg})}return t})(),qg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function Ts(t){return{toString:t}.toString()}var Cd="__parameters__";function Wx(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Kx(t,e,n){return Ts(()=>{let r=Wx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Cd)?u[Cd]:Object.defineProperty(u,Cd,{value:[]})[Cd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ir=ub(Kx("Optional"),8);function Qx(t){return typeof t=="function"}var xd=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function TC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var ri=(()=>{let t=()=>bC;return t.ngInherit=!0,t})();function bC(t){return t.type.prototype.ngOnChanges&&(t.setInput=Zx),Yx}function Yx(){let t=SC(this),e=t?.current;if(e){let n=t.previous;if(n===_n)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Zx(t,e,n,r,i){let o=this.declaredInputs[r],s=SC(t)||Jx(t,{previous:_n,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new xd(l&&l.currentValue,n,u===_n),TC(t,e,i,n)}var CC="__ngSimpleChanges__";function SC(t){return t[CC]||null}function Jx(t,e){return t[CC]=e}var Wb=[];var Ae=function(t,e=null,n){for(let r=0;r<Wb.length;r++){let i=Wb[r];i(t,e,n)}};function Xx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=bC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function ek(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Ad(t,e,n){DC(t,e,3,n)}function Rd(t,e,n,r){(t[K]&3)===n&&DC(t,e,n,r)}function Fm(t,e){let n=t[K];(n&3)===e&&(n&=16383,n+=1,t[K]=n)}function DC(t,e,n,r){let i=r!==void 0?t[Wi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Wi]+=65536),(a<o||o==-1)&&(tk(t,n,e,u),t[Wi]=(t[Wi]&4294901760)+u+2),u++}function Kb(t,e){Ae(4,t,e);let n=z(null);try{e.call(t)}finally{z(n),Ae(5,t,e)}}function tk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[K]>>14<t[Wi]>>16&&(t[K]&3)===e&&(t[K]+=16384,Kb(a,o)):Kb(a,o)}var ms=-1,eo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function nk(t){return(t.flags&8)!==0}function rk(t){return(t.flags&16)!==0}function ik(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];ok(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function AC(t){return t===3||t===4||t===6}function ok(t){return t.charCodeAt(0)===64}function ys(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Qb(t,n,i,null,e[++r]):Qb(t,n,i,null,null))}}return t}function Qb(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function RC(t){return t!==ms}function kd(t){return t&32767}function sk(t){return t>>16}function Od(t,e){let n=sk(t),r=e;for(;n>0;)r=r[Gi],n--;return r}var Km=!0;function Ld(t){let e=Km;return Km=t,e}var ak=256,NC=ak-1,MC=5,ck=0,qn={};function uk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty($i)&&(r=n[$i]),r==null&&(r=n[$i]=ck++);let i=r&NC,o=1<<i;e.data[t+(i>>MC)]|=o}function Vd(t,e){let n=PC(t,e);if(n!==-1)return n;let r=e[H];r.firstCreatePass&&(t.injectorIndex=e.length,jm(r.data,t),jm(e,null),jm(r.blueprint,null));let i=Cy(t,e),o=t.injectorIndex;if(RC(i)){let s=kd(i),a=Od(i,e),u=a[H].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function jm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function PC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Cy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=VC(i),r===null)return ms;if(n++,i=i[Gi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ms}function Qm(t,e,n){uk(t,e,n)}function lk(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(AC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function xC(t,e,n){if(n&8||t!==void 0)return t;ad(e,"NodeInjector")}function kC(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[zi],o=xt(void 0);try{return i?i.get(e,r,n&8):tm(e,r,n&8)}finally{xt(o)}}return xC(r,e,n)}function OC(t,e,n,r=0,i){if(t!==null){if(e[K]&2048&&!(r&2)){let s=pk(t,e,n,r,qn);if(s!==qn)return s}let o=LC(t,e,n,r,qn);if(o!==qn)return o}return kC(e,n,r,i)}function LC(t,e,n,r,i){let o=hk(n);if(typeof o=="function"){if(!Pm(e,t,r))return r&1?xC(i,n,r):kC(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ad(n);else return s}finally{xm()}}else if(typeof o=="number"){let s=null,a=PC(t,e),u=ms,l=r&1?e[Lt][Ot]:null;for((a===-1||r&4)&&(u=a===-1?Cy(t,e):e[a+8],u===ms||!Zb(r,!1)?a=-1:(s=e[H],a=kd(u),e=Od(u,e)));a!==-1;){let h=e[H];if(Yb(o,a,h.data)){let p=dk(a,e,n,s,r,l);if(p!==qn)return p}u=e[a+8],u!==ms&&Zb(r,e[H].data[a+8]===l)&&Yb(o,a,e)?(s=h,a=kd(u),e=Od(u,e)):a=-1}}return i}function dk(t,e,n,r,i,o){let s=e[H],a=s.data[t+8],u=r==null?ei(a)&&Km:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Nd(a,s,n,u,l);return h!==null?vc(e,s,h,a,i):qn}function Nd(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let T=s[y];if(y<u&&n===T||y>=u&&T.type===n)return y}if(i){let y=s[u];if(y&&Tn(y)&&y.type===n)return u}return null}function vc(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof eo){let a=o;if(a.resolving){let y=nd(s[n]);throw em(y)}let u=Ld(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?xt(a.injectImpl):null,m=Pm(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Xx(n,s[n],e)}finally{p!==null&&xt(p),Ld(u),a.resolving=!1,xm()}}return o}function hk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty($i)?t[$i]:void 0;return typeof e=="number"?e>=0?e&NC:fk:e}function Yb(t,e,n){let r=1<<t;return!!(n[e+(t>>MC)]&r)}function Zb(t,e){return!(t&2)&&!(t&1&&e)}var Xi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return OC(this._tNode,this._lView,e,Fi(r),n)}};function fk(){return new Xi(ct(),J())}function bs(t){return Ts(()=>{let e=t.prototype.constructor,n=e[Ja]||Ym(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ja]||Ym(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ym(t){return zg(t)?()=>{let e=Ym(tt(t));return e&&e()}:Kr(t)}function pk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[K]&2048&&!ds(s);){let a=LC(o,s,n,r|2,qn);if(a!==qn)return a;let u=o.parent;if(!u){let l=s[lm];if(l){let h=l.get(n,qn,r);if(h!==qn)return h}u=VC(s),s=s[Gi]}o=u}return i}function VC(t){let e=t[H],n=e.type;return n===2?e.declTNode:n===1?t[Ot]:null}function Xd(t){return lk(ct(),t)}function gk(){return Cs(ct(),J())}function Cs(t,e){return new Yt(bn(t,e))}var Yt=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=gk}return t})();function mk(t){return t instanceof Yt?t.nativeElement:t}function yk(){return this._results[Symbol.iterator]()}var Fd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ue}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=db(e);(this._changesDetected=!lb(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=yk};function FC(t){return(t.flags&128)===128}var Sy=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Sy||{}),jC=new Map,vk=0;function _k(){return vk++}function Ik(t){jC.set(t[sc],t)}function Zm(t){jC.delete(t[sc])}var Jb="__ngContext__";function vs(t,e){Un(e)?(t[Jb]=e[sc],Ik(e)):t[Jb]=e}function UC(t){return $C(t[ls])}function BC(t){return $C(t[an])}function $C(t){for(;t!==null&&!wn(t);)t=t[an];return t}var Jm;function Dy(t){Jm=t}function HC(){if(Jm!==void 0)return Jm;if(typeof document<"u")return document;throw new j(210,!1)}var eh=new U("",{providedIn:"root",factory:()=>Ek}),Ek="ng",th=new U(""),ii=new U("",{providedIn:"platform",factory:()=>"unknown"});var nh=new U("",{providedIn:"root",factory:()=>HC().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var wk="h",Tk="b";var qC="r";var zC="di";var GC=!1,WC=new U("",{providedIn:"root",factory:()=>GC});var bk=(t,e,n,r)=>{};function Ck(t,e,n,r){bk(t,e,n,r)}function rh(t){return(t.flags&32)===32}var Sk=()=>null;function KC(t,e,n=!1){return Sk(t,e,n)}function QC(t,e){let n=t.contentQueries;if(n!==null){let r=z(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];_d(o),a.contentQueries(2,e[s],s)}}}finally{z(r)}}}function Xm(t,e,n){_d(0);let r=z(null);try{e(t,n)}finally{z(r)}}function YC(t,e,n){if(hm(e)){let r=z(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{z(r)}}}var vr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(vr||{});var Sd;function Dk(){if(Sd===void 0&&(Sd=null,tc.trustedTypes))try{Sd=tc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Sd}function Xb(t){return Dk()?.createScriptURL(t)||t}var jd=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${id})`}};function Sc(t){return t instanceof jd?t.changingThisBreaksApplicationSecurity:t}function Ay(t,e){let n=ZC(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${id})`)}return n===e}function ZC(t){return t instanceof jd&&t.getTypeName()||null}var Ak=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function JC(t){return t=String(t),t.match(Ak)?t:"unsafe:"+t}var ih=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ih||{});function XC(t){let e=tS();return e?e.sanitize(ih.URL,t)||"":Ay(t,"URL")?Sc(t):JC(Hi(t))}function eS(t){let e=tS();if(e)return Xb(e.sanitize(ih.RESOURCE_URL,t)||"");if(Ay(t,"ResourceURL"))return Xb(Sc(t));throw new j(904,!1)}function Rk(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?eS:XC}function Ry(t,e,n){return Rk(e,n)(t)}function tS(){let t=J();return t&&t[Fn].sanitizer}function nS(t){return t instanceof Function?t():t}function Nk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var rS="ng-template";function Mk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Nk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ny(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ny(t){return t.type===4&&t.value!==rS}function Pk(t,e,n){let r=t.type===4&&!n?rS:t.value;return e===r}function xk(t,e,n){let r=4,i=t.attrs,o=i!==null?Lk(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Cn(r)&&!Cn(u))return!1;if(s&&Cn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Pk(t,u,n)||u===""&&e.length===1){if(Cn(r))return!1;s=!0}}else if(r&8){if(i===null||!Mk(t,i,u,n)){if(Cn(r))return!1;s=!0}}else{let l=e[++a],h=kk(u,i,Ny(t),n);if(h===-1){if(Cn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Cn(r))return!1;s=!0}}}}return Cn(r)||s}function Cn(t){return(t&1)===0}function kk(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Vk(e,t)}function iS(t,e,n=!1){for(let r=0;r<e.length;r++)if(xk(t,e[r],n))return!0;return!1}function Ok(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if((n&1)===0)return e[n+1]}return null}function Lk(t){for(let e=0;e<t.length;e++){let n=t[e];if(AC(n))return e}return t.length}function Vk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Fk(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function eC(t,e){return t?":not("+e.trim()+")":e}function jk(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Cn(s)&&(e+=eC(o,i),i=""),r=s,o=o||!Cn(r);n++}return i!==""&&(e+=eC(o,i)),e}function Uk(t){return t.map(jk).join(",")}function Bk(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Cn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var qt={};function $k(t,e){return t.createText(e)}function Hk(t,e,n){t.setValue(e,n)}function oS(t,e,n){return t.createElement(e,n)}function Ud(t,e,n,r,i){t.insertBefore(e,n,r,i)}function sS(t,e,n){t.appendChild(e,n)}function tC(t,e,n,r,i){r!==null?Ud(t,e,n,r,i):sS(t,e,n)}function aS(t,e,n){t.removeChild(null,e,n)}function qk(t,e,n){t.setAttribute(e,"style",n)}function zk(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function cS(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&ik(t,e,r),i!==null&&zk(t,e,i),o!==null&&qk(t,e,o)}function My(t,e,n,r,i,o,s,a,u,l,h){let p=Fe+r,m=p+i,y=Gk(p,m),T=typeof l=="function"?l():l;return y[H]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:h}}function Gk(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:qt);return n}function Wk(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=My(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Py(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[En]=i,p[K]=r|4|128|8|64|1024,(l!==null||t&&t[K]&2048)&&(p[K]|=2048),mm(p),p[nt]=p[Gi]=t,p[Be]=n,p[Fn]=s||t&&t[Fn],p[Pe]=a||t&&t[Pe],p[zi]=u||t&&t[zi]||null,p[Ot]=o,p[sc]=_k(),p[qi]=h,p[lm]=l,p[Lt]=e.type==2?t[Lt]:p,p}function Kk(t,e,n){let r=bn(e,t),i=Wk(n),o=t[Fn].rendererFactory,s=xy(t,Py(t,i,null,uS(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function uS(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function lS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function xy(t,e){return t[ls]?t[um][an]=e:t[ls]=e,t[um]=e,e}function _e(t=1){dS(Ge(),J(),$n()+t,!1)}function dS(t,e,n,r){if(!r)if((e[K]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Ad(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Rd(e,o,0,n)}ti(n)}var oh=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(oh||{});function ey(t,e,n,r){let i=z(null);try{let[o,s,a]=t.inputs[n],u=null;(s&oh.SignalBased)!==0&&(u=e[o][Pt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):TC(e,u,o,r)}finally{z(i)}}var _r=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(_r||{}),Qk;function ky(t,e){return Qk(t,e)}function gs(t,e,n,r,i){if(r!=null){let o,s=!1;wn(r)?o=r:Un(r)&&(s=!0,r=r[En]);let a=cn(r);t===0&&n!==null?i==null?sS(e,n,a):Ud(e,n,a,i||null,!0):t===1&&n!==null?Ud(e,n,a,i||null,!0):t===2?aS(e,a,s):t===3&&e.destroyNode(a),o!=null&&oO(e,t,o,n,i)}}function Yk(t,e){hS(t,e),e[En]=null,e[Ot]=null}function Zk(t,e,n,r,i,o){r[En]=i,r[Ot]=e,ah(t,r,n,1,i,o)}function hS(t,e){e[Fn].changeDetectionScheduler?.notify(9),ah(t,e,e[Pe],2,null,null)}function Jk(t){let e=t[ls];if(!e)return Um(t[H],t);for(;e;){let n=null;if(Un(e))n=e[ls];else{let r=e[at];r&&(n=r)}if(!n){for(;e&&!e[an]&&e!==t;)Un(e)&&Um(e[H],e),e=e[nt];e===null&&(e=t),Un(e)&&Um(e[H],e),n=e&&e[an]}e=n}}function Oy(t,e){let n=t[Ki],r=n.indexOf(e);n.splice(r,1)}function sh(t,e){if(Qi(e))return;let n=e[Pe];n.destroyNode&&ah(t,e,n,3,null,null),Jk(e)}function Um(t,e){if(Qi(e))return;let n=z(null);try{e[K]&=-129,e[K]|=256,e[Qt]&&is(e[Qt]),eO(t,e),Xk(t,e),e[H].type===1&&e[Pe].destroy();let r=e[Jr];if(r!==null&&wn(e[nt])){r!==e[nt]&&Oy(r,e);let i=e[jn];i!==null&&i.detachView(t)}Zm(e)}finally{z(n)}}function Xk(t,e){let n=t.cleanup,r=e[us];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[us]=null);let i=e[pr];if(i!==null){e[pr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[yr];if(o!==null){e[yr]=null;for(let s of o)s.destroy()}}function eO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof eo)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ae(4,a,u);try{u.call(a)}finally{Ae(5,a,u)}}else{Ae(4,i,o);try{o.call(i)}finally{Ae(5,i,o)}}}}}function fS(t,e,n){return tO(t,e.parent,n)}function tO(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[En];if(ei(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===vr.None||i===vr.Emulated)return null}return bn(r,n)}function pS(t,e,n){return rO(t,e,n)}function nO(t,e,n){return t.type&40?bn(t,n):null}var rO=nO,nC;function Ly(t,e,n,r){let i=fS(t,r,e),o=e[Pe],s=r.parent||e[Ot],a=pS(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)tC(o,i,n[u],a,!1);else tC(o,i,n,a,!1);nC!==void 0&&nC(o,r,e,n,i)}function mc(t,e){if(e!==null){let n=e.type;if(n&3)return bn(e,t);if(n&4)return ty(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return mc(t,r);{let i=t[e.index];return wn(i)?ty(-1,i):cn(i)}}else{if(n&128)return mc(t,e.next);if(n&32)return ky(e,t)()||cn(t[e.index]);{let r=gS(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Qr(t[Lt]);return mc(i,r)}else return mc(t,e.next)}}}return null}function gS(t,e){if(e!==null){let r=t[Lt][Ot],i=e.projection;return r.projection[i]}return null}function ty(t,e){let n=at+t+1;if(n<e.length){let r=e[n],i=r[H].firstChild;if(i!==null)return mc(r,i)}return e[Xr]}function Vy(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&vs(cn(a),r),n.flags|=2),!rh(n))if(u&8)Vy(t,e,n.child,r,i,o,!1),gs(e,t,i,a,o);else if(u&32){let l=ky(n,r),h;for(;h=l();)gs(e,t,i,h,o);gs(e,t,i,a,o)}else u&16?mS(t,e,r,n,i,o):gs(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ah(t,e,n,r,i,o){Vy(n,r,t.firstChild,e,i,o,!1)}function iO(t,e,n){let r=e[Pe],i=fS(t,n,e),o=n.parent||e[Ot],s=pS(o,n,e);mS(r,0,e,n,i,s)}function mS(t,e,n,r,i,o){let s=n[Lt],u=s[Ot].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];gs(e,t,i,h,o)}else{let l=u,h=s[nt];FC(r)&&(l.flags|=128),Vy(t,e,l,h,i,o,!0)}}function oO(t,e,n,r,i){let o=n[Xr],s=cn(n);o!==s&&gs(e,t,r,o,i);for(let a=at;a<n.length;a++){let u=n[a];ah(u[H],u,t,e,r,o)}}function sO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:_r.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_r.Important),t.setStyle(n,r,i,o))}}function yS(t,e,n,r,i){let o=$n(),s=r&2;try{ti(-1),s&&e.length>Fe&&dS(t,e,Fe,!1),Ae(s?2:0,i,n),n(r,i)}finally{ti(o),Ae(s?3:1,i,n)}}function vS(t,e,n){pO(t,e,n),(n.flags&64)===64&&gO(t,e,n)}function Fy(t,e,n=bn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function aO(t,e,n,r){let o=r.get(WC,GC)||n===vr.ShadowDom,s=t.selectRootElement(e,o);return cO(s),s}function cO(t){uO(t)}var uO=()=>null;function lO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function dO(t,e,n,r,i,o){let s=e[H];if(jy(t,s,e,n,r)){ei(t)&&fO(e,t.index);return}t.type&3&&(n=lO(n)),hO(t,e,n,r,i,o)}function hO(t,e,n,r,i,o){if(t.type&3){let s=bn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function fO(t,e){let n=un(e,t);n[K]&16||(n[K]|=64)}function pO(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ei(n)&&Kk(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Vd(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=vc(e,t,s,n);if(vs(u,e),o!==null&&IO(e,s-r,u,a,n,o),Tn(a)){let l=un(n.index,e);l[Be]=vc(e,t,s,n)}}}function gO(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Fb();try{ti(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];vd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&mO(u,l)}}finally{ti(-1),vd(s)}}function mO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function yO(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];iS(e,o.selectors,!1)&&(r??=[],Tn(o)?r.unshift(o):r.push(o))}return r}function vO(t,e,n,r,i,o){let s=bn(t,e);_O(e[Pe],s,o,t.value,n,r,i)}function _O(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Hi(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function IO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];ey(r,n,u,l)}}function _S(t,e,n,r,i){let o=Fe+n,s=e[H],a=i(s,e,t,r,n);e[o]=a,hs(t,!0);let u=t.type===2;return u?(cS(e[Pe],a,t),(Rb()===0||pd(t))&&vs(a,e),Nb()):vs(a,e),wd()&&(!u||!rh(t))&&Ly(s,e,a,t),t}function IS(t){let e=t;return Sm()?Dm():(e=e.parent,hs(e,!1)),e}function EO(t,e){let n=t[zi];if(!n)return;n.get(Ht,null)?.(e)}function jy(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];ey(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];ey(h,l,r,i),a=!0}return a}function wO(t,e){let n=un(e,t),r=n[H];TO(r,n);let i=n[En];i!==null&&n[qi]===null&&(n[qi]=KC(i,n[zi])),Ae(18),Uy(r,n,n[Be]),Ae(19,n[Be])}function TO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Uy(t,e,n){Id(e);try{let r=t.viewQuery;r!==null&&Xm(1,r,n);let i=t.template;i!==null&&yS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[jn]?.finishViewCreation(t),t.staticContentQueries&&QC(t,e),t.staticViewQueries&&Xm(2,t.viewQuery,n);let o=t.components;o!==null&&bO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[K]&=-5,Ed()}}function bO(t,e){for(let n=0;n<e.length;n++)wO(t,e[n])}function Dc(t,e,n,r){let i=z(null);try{let o=e.tView,a=t[K]&4096?4096:16,u=Py(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Jr]=l;let h=t[jn];return h!==null&&(u[jn]=h.createEmbeddedView(o)),Uy(o,u,n),u}finally{z(i)}}function _s(t,e){return!e||e.firstChild===null||FC(t)}var rC=!1,CO=new U("");function _c(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(cn(o)),wn(o)&&ES(o,r);let s=n.type;if(s&8)_c(t,e,n.child,r);else if(s&32){let a=ky(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=gS(e,n);if(Array.isArray(a))r.push(...a);else{let u=Qr(e[Lt]);_c(u[H],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ES(t,e){for(let n=at;n<t.length;n++){let r=t[n],i=r[H].firstChild;i!==null&&_c(r[H],r,i,e)}t[Xr]!==t[En]&&e.push(t[Xr])}function wS(t){if(t[fd]!==null){for(let e of t[fd])e.impl.addSequence(e);t[fd].length=0}}var TS=[];function SO(t){return t[Qt]??DO(t)}function DO(t){let e=TS.pop()??Object.create(RO);return e.lView=t,e}function AO(t){t.lView[Qt]!==t&&(t.lView=null,TS.push(t))}var RO=G(x({},Gr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Yi(t.lView)},consumerOnSignalRead(){this.lView[Qt]=this}});function NO(t){let e=t[Qt]??Object.create(MO);return e.lView=t,e}var MO=G(x({},Gr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Qr(t.lView);for(;e&&!bS(e[H]);)e=Qr(e);e&&ym(e)},consumerOnSignalRead(){this.lView[Qt]=this}});function bS(t){return t.type!==2}function CS(t){if(t[yr]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[yr])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[K]&8192)}}var PO=100;function By(t,e=0){let r=t[Fn].rendererFactory,i=!1;i||r.begin?.();try{xO(t,e)}finally{i||r.end?.()}}function xO(t,e){let n=Rm();try{fs(!0),ny(t,e);let r=0;for(;uc(t);){if(r===PO)throw new j(103,!1);r++,ny(t,1)}}finally{fs(n)}}function SS(t,e){Am(e?lc.Exhaustive:lc.OnlyDirtyViews);try{By(t)}finally{Am(lc.Off)}}function kO(t,e,n,r){if(Qi(e))return;let i=e[K],o=!1,s=!1;Id(e);let a=!0,u=null,l=null;o||(bS(t)?(l=SO(e),u=Wr(l)):Wl()===null?(a=!1,l=NO(e),u=Wr(l)):e[Qt]&&(is(e[Qt]),e[Qt]=null));try{mm(e),Ob(t.bindingStartIndex),n!==null&&yS(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Ad(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Rd(e,y,0,null),Fm(e,0)}if(s||OO(e),CS(e),DS(e,0),t.contentQueries!==null&&QC(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Ad(e,y)}else{let y=t.contentHooks;y!==null&&Rd(e,y,1),Fm(e,1)}VO(t,e);let p=t.components;p!==null&&RS(e,p,0);let m=t.viewQuery;if(m!==null&&Xm(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Ad(e,y)}else{let y=t.viewHooks;y!==null&&Rd(e,y,2),Fm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[hd]){for(let y of e[hd])y();e[hd]=null}o||(wS(e),e[K]&=-73)}catch(h){throw o||Yi(e),h}finally{l!==null&&(Li(l,u),a&&AO(l)),Ed()}}function DS(t,e){for(let n=UC(t);n!==null;n=BC(n))for(let r=at;r<n.length;r++){let i=n[r];AS(i,e)}}function OO(t){for(let e=UC(t);e!==null;e=BC(e)){if(!(e[K]&2))continue;let n=e[Ki];for(let r=0;r<n.length;r++){let i=n[r];ym(i)}}}function LO(t,e,n){Ae(18);let r=un(e,t);AS(r,n),Ae(19,r[Be])}function AS(t,e){gd(t)&&ny(t,e)}function ny(t,e){let r=t[H],i=t[K],o=t[Qt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&rs(o)),s||=!1,o&&(o.dirty=!1),t[K]&=-9217,s)kO(r,t,r.template,t[Be]);else if(i&8192){let a=z(null);try{CS(t),DS(t,1);let u=r.components;u!==null&&RS(t,u,1),wS(t)}finally{z(a)}}}function RS(t,e,n){for(let r=0;r<e.length;r++)LO(t,e[r],n)}function VO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ti(~i);else{let o=i,s=n[++r],a=n[++r];Vb(s,o);let u=e[o];Ae(24,u),a(2,u),Ae(25,u)}}}finally{ti(-1)}}function $y(t,e){let n=Rm()?64:1088;for(t[Fn].changeDetectionScheduler?.notify(e);t;){t[K]|=n;let r=Qr(t);if(ds(t)&&!r)return t;t=r}return null}function NS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function MS(t,e){let n=at+e;if(n<t.length)return t[n]}function Ac(t,e,n,r=!0){let i=e[H];if(FO(i,e,t,n),r){let s=ty(n,t),a=e[Pe],u=a.parentNode(t[Xr]);u!==null&&Zk(i,t[Ot],a,e,u,s)}let o=e[qi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function PS(t,e){let n=Ic(t,e);return n!==void 0&&sh(n[H],n),n}function Ic(t,e){if(t.length<=at)return;let n=at+e,r=t[n];if(r){let i=r[Jr];i!==null&&i!==t&&Oy(i,r),e>0&&(t[n-1][an]=r[an]);let o=rc(t,at+e);Yk(r[H],r);let s=o[jn];s!==null&&s.detachView(o[H]),r[nt]=null,r[an]=null,r[K]&=-129}return r}function FO(t,e,n,r){let i=at+r,o=n.length;r>0&&(n[i-1][an]=e),r<o-at?(e[an]=n[i],nm(n,at+r,e)):(n.push(e),e[an]=null),e[nt]=n;let s=e[Jr];s!==null&&n!==s&&xS(s,e);let a=e[jn];a!==null&&a.insertView(t),md(e),e[K]|=128}function xS(t,e){let n=t[Ki],r=e[nt];if(Un(r))t[K]|=2;else{let i=r[nt][Lt];e[Lt]!==i&&(t[K]|=2)}n===null?t[Ki]=[e]:n.push(e)}var ni=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[H];return _c(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Be]}set context(e){this._lView[Be]=e}get destroyed(){return Qi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[nt];if(wn(e)){let n=e[ac],r=n?n.indexOf(this):-1;r>-1&&(Ic(e,r),rc(n,r))}this._attachedToViewContainer=!1}sh(this._lView[H],this._lView)}onDestroy(e){vm(this._lView,e)}markForCheck(){$y(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[K]&=-129}reattach(){md(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,By(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[zi].get(CO,rC)}catch{this.exhaustive=rC}}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ds(this._lView),n=this._lView[Jr];n!==null&&!e&&Oy(n,this._lView),hS(this._lView[H],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=ds(this._lView),r=this._lView[Jr];r!==null&&!n&&xS(r,this._lView),md(this._lView)}};var Ec=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=jO;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Dc(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new ni(o)}}return t})();function jO(){return Hy(ct(),J())}function Hy(t,e){return t.type&4?new Ec(e,t,Cs(t,e)):null}function Rc(t,e,n,r,i){let o=t.data[e];if(o===null)o=UO(t,e,n,r,i),Lb()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Pb();o.injectorIndex=s===null?-1:s.injectorIndex}return hs(o,!0),o}function UO(t,e,n,r,i){let o=Cm(),s=Sm(),a=s?o:o&&o.parent,u=t.data[e]=$O(t,a,n,e,r,i);return BO(t,u,o,s),u}function BO(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function $O(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return wm()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var W8=new RegExp(`^(\\d+)*(${Tk}|${wk})*(.*)`);function HO(t){let e=t[dm]??[],r=t[nt][Pe],i=[];for(let o of e)o.data[zC]!==void 0?i.push(o):qO(o,r);t[dm]=i}function qO(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[qC];for(;n<i;){let o=r.nextSibling;aS(e,r,!1),r=o,n++}}}var zO=()=>null,GO=()=>null;function Bd(t,e){return zO(t,e)}function kS(t,e,n){return GO(t,e,n)}var OS=class{},ch=class{},ry=class{resolveComponentFactory(e){throw new j(917,!1)}},Nc=class{static NULL=new ry},to=class{},Dn=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>WO()}return t})();function WO(){let t=J(),e=ct(),n=un(e.index,t);return(Un(n)?n:t)[Pe]}var LS=(()=>{class t{static \u0275prov=F({token:t,providedIn:"root",factory:()=>null})}return t})();var Md={},iy=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Md,r);return i!==Md||n===Md?i:this.parentInjector.get(e,n,r)}};function $d(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=od(i,a);else if(o==2){let u=a,l=e[++s];r=od(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ge(t,e=0){let n=J();if(n===null)return te(t,e);let r=ct();return OC(r,n,tt(t),e)}function KO(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}ZO(t,e,n,a,o,u,l)}o!==null&&r!==null&&QO(n,r,o)}function QO(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function YO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ZO(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&Tn(y)&&(u=!0,YO(t,n,m)),Qm(Vd(n,e),t,y.type)}r1(n,t.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=lS(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(n.mergedAttrs=ys(n.mergedAttrs,y.hostAttrs),XO(t,n,e,p,y),n1(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let T=y.type.prototype;!l&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}JO(t,n,o)}function JO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))iC(0,e,i,r),iC(1,e,i,r),sC(e,r,!1);else{let o=n.get(i);oC(0,e,o,r),oC(1,e,o,r),sC(e,r,!0)}}}function iC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),VS(e,o)}}function oC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),VS(e,s)}}function VS(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function sC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Ny(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function XO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Kr(i.type,!0)),s=new eo(o,Tn(i),ge,null);t.blueprint[r]=s,n[r]=s,e1(t,e,r,lS(t,n,i.hostVars,qt),i)}function e1(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;t1(s)!=a&&s.push(a),s.push(n,r,o)}}function t1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function n1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Tn(e)&&(n[""]=t)}}function r1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function FS(t,e,n,r,i,o,s,a){let u=e[H],l=u.consts,h=Bn(l,s),p=Rc(u,t,n,r,h);return o&&KO(u,e,p,Bn(l,a),i),p.mergedAttrs=ys(p.mergedAttrs,p.attrs),p.attrs!==null&&$d(p,p.attrs,!1),p.mergedAttrs!==null&&$d(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function jS(t,e){ek(t,e),hm(e)&&t.queries.elementEnd(e)}function i1(t,e,n,r,i,o){let s=e.consts,a=Bn(s,i),u=Rc(e,t,n,r,a);if(u.mergedAttrs=ys(u.mergedAttrs,u.attrs),o!=null){let l=Bn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&$d(u,u.attrs,!1),u.mergedAttrs!==null&&$d(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function US(t,e,n){return t[e]=n}function zn(t,e,n){if(n===qt)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function BS(t,e,n,r){let i=zn(t,e,n);return zn(t,e+1,r)||i}function Pd(t,e,n){return function r(i){let o=ei(t)?un(t.index,e):e;$y(o,5);let s=e[Be],a=aC(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=aC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function aC(t,e,n,r){let i=z(null);try{return Ae(6,e,n),n(r)!==!1}catch(o){return EO(t,o),!1}finally{Ae(7,e,n),z(i)}}function $S(t,e,n,r,i,o,s,a){let u=pd(t),l=!1,h=null;if(!r&&u&&(h=o1(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=bn(t,n),m=r?r(p):p;Ck(n,m,o,a);let y=i.listen(m,o,a),T=r?N=>r(cn(N[t.index])):t.index;HS(T,e,n,o,a,y,!1)}return l}function o1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[us],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function HS(t,e,n,r,i,o,s){let a=e.firstCreatePass?Im(e):null,u=_m(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function cC(t,e,n,r,i,o){let s=e[n],a=e[H],l=a.data[n].outputs[r],p=s[l].subscribe(o);HS(t.index,a,e,i,o,p,!0)}var oy=Symbol("BINDING");var Hd=class extends Nc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Zr(e);return new Is(n,this.ngModule)}};function s1(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&oh.SignalBased)!==0};return i&&(o.transform=i),o})}function a1(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function c1(t,e,n){let r=e instanceof ze?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new iy(n,r):n}function u1(t){let e=t.get(to,null);if(e===null)throw new j(407,!1);let n=t.get(LS,null),r=t.get(vn,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function l1(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return oS(e,n,n==="svg"?wb:n==="math"?Tb:null)}var Is=class extends ch{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=s1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=a1(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Uk(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Ae(22);let a=z(null);try{let u=this.componentDef,l=d1(r,u,s,o),h=c1(u,i||this.ngModule,e),p=u1(h),m=p.rendererFactory.createRenderer(null,u),y=r?aO(m,r,u.encapsulation,h):l1(u,m),T=s?.some(uC)||o?.some(k=>typeof k!="function"&&k.bindings.some(uC)),N=Py(null,l,null,512|uS(u),null,null,p,m,h,null,KC(y,h,!0));N[Fe]=y,Id(N);let R=null;try{let k=FS(Fe,N,2,"#host",()=>l.directiveRegistry,!0,0);y&&(cS(m,y,k),vs(y,N)),vS(l,N,k),YC(l,k,N),jS(l,k),n!==void 0&&f1(k,this.ngContentSelectors,n),R=un(k.index,N),N[Be]=R[Be],Uy(l,N,null)}catch(k){throw R!==null&&Zm(R),Zm(N),k}finally{Ae(23),Ed()}return new qd(this.componentType,N,!!T)}finally{z(a)}}};function d1(t,e,n,r){let i=t?["ng-version","20.1.2"]:Bk(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[oy].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[oy].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=dd(p);u.push(m)}return My(0,null,h1(o,s),1,a,u,null,null,null,[i],null)}function h1(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function uC(t){let e=t[oy].kind;return e==="input"||e==="twoWay"}var qd=class extends OS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=cc(n[H],Fe),this.location=Cs(this._tNode,n),this.instance=un(this._tNode.index,n)[Be],this.hostView=this.changeDetectorRef=new ni(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=jy(r,i[H],i,e,n);this.previousInputValues.set(e,n);let s=un(r.index,i);$y(s,1)}get injector(){return new Xi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function f1(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ss=(()=>{class t{static __NG_ELEMENT_ID__=p1}return t})();function p1(){let t=ct();return zS(t,J())}var g1=Ss,qS=class extends g1{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Cs(this._hostTNode,this._hostLView)}get injector(){return new Xi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Cy(this._hostTNode,this._hostLView);if(RC(e)){let n=Od(e,this._hostLView),r=kd(e),i=n[H].data[r+8];return new Xi(i,n)}else return new Xi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=lC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-at}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Bd(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,_s(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!Qx(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new Is(Zr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let k=(u?p:this.parentInjector).get(ze,null);k&&(o=k)}let m=Zr(h.componentType??{}),y=Bd(this._lContainer,m?.id??null),T=y?.firstChild??null,N=h.create(p,i,T,o,s,a);return this.insertImpl(N.hostView,l,_s(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Cb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[nt],l=new qS(u,u[Ot],u[nt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ac(s,i,o,r),e.attachToViewContainerRef(),nm(Bm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=lC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ic(this._lContainer,n);r&&(rc(Bm(this._lContainer),n),sh(r[H],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ic(this._lContainer,n);return r&&rc(Bm(this._lContainer),n)!=null?new ni(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function lC(t){return t[ac]}function Bm(t){return t[ac]||(t[ac]=[])}function zS(t,e){let n,r=e[t.index];return wn(r)?n=r:(n=NS(r,e,null,t),e[t.index]=n,xy(e,n)),y1(n,e,t,r),new qS(n,t,e)}function m1(t,e){let n=t[Pe],r=n.createComment(""),i=bn(e,t),o=n.parentNode(i);return Ud(n,o,r,n.nextSibling(i),!1),r}var y1=I1,v1=()=>!1;function _1(t,e,n){return v1(t,e,n)}function I1(t,e,n,r){if(t[Xr])return;let i;n.type&8?i=cn(r):i=m1(e,n),t[Xr]=i}var sy=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},ay=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)qy(e,n).matches!==null&&this.queries[n].setDirty()}},zd=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=A1(e):this.predicate=e}},cy=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},uy=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,E1(n,o)),this.matchTNodeWithReadOption(e,n,Nd(n,e,o,!1,!1))}else r===Ec?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Nd(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Yt||i===Ss||i===Ec&&n.type&4)this.addMatch(n.index,-2);else{let o=Nd(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function E1(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function w1(t,e){return t.type&11?Cs(t,e):t.type&4?Hy(t,e):null}function T1(t,e,n,r){return n===-1?w1(e,t):n===-2?b1(t,e,r):vc(t,t[H],n,e)}function b1(t,e,n){if(n===Yt)return Cs(e,t);if(n===Ec)return Hy(e,t);if(n===Ss)return zS(e,t)}function GS(t,e,n,r){let i=e[jn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(T1(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function ly(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=GS(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=at;p<h.length;p++){let m=h[p];m[Jr]===m[nt]&&ly(m[H],m,l,r)}if(h[Ki]!==null){let p=h[Ki];for(let m=0;m<p.length;m++){let y=p[m];ly(y[H],y,l,r)}}}}}return r}function C1(t,e){return t[jn].queries[e].queryList}function WS(t,e,n){let r=new Fd((n&4)===4);return Ab(t,e,r,r.destroy),(e[jn]??=new ay).queries.push(new sy(r))-1}function S1(t,e,n){let r=Ge();return r.firstCreatePass&&(KS(r,new zd(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),WS(r,J(),e)}function D1(t,e,n,r){let i=Ge();if(i.firstCreatePass){let o=ct();KS(i,new zd(e,n,r),o.index),R1(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return WS(i,J(),n)}function A1(t){return t.split(",").map(e=>e.trim())}function KS(t,e,n){t.queries===null&&(t.queries=new cy),t.queries.track(new uy(e,n))}function R1(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function qy(t,e){return t.queries.getByIndex(e)}function N1(t,e){let n=t[H],r=qy(n,e);return r.crossesNgTemplate?ly(n,t,e,[]):GS(n,t,r,e)}var dC=new Set;function oi(t){dC.has(t)||(dC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Es=class{},uh=class{};var Gd=class extends Es{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Hd(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=om(e);this._bootstrapComponents=nS(o.bootstrap),this._r3Injector=Om(e,n,[{provide:Es,useValue:this},{provide:Nc,useValue:this.componentFactoryResolver},...r],gr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wd=class extends uh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Gd(this.moduleType,e,[])}};var wc=class extends Es{injector;componentFactoryResolver=new Hd(this);instance=null;constructor(e){super();let n=new Ui([...e.providers,{provide:Es,useValue:this},{provide:Nc,useValue:this.componentFactoryResolver}],e.parent||oc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Mc(t,e,n=null){return new wc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var M1=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=sm(!1,n.type),i=r.length>0?Mc([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:t,providedIn:"environment",factory:()=>new t(te(ze))})}return t})();function de(t){return Ts(()=>{let e=QS(t),n=G(x({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Sy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(M1).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vr.Emulated,styles:t.styles||kt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&oi("NgStandalone"),YS(n);let r=t.dependencies;return n.directiveDefs=hC(r,P1),n.pipeDefs=hC(r,pb),n.id=L1(n),n})}function P1(t){return Zr(t)||dd(t)}function ro(t){return Ts(()=>({type:t.type,bootstrap:t.bootstrap||kt,declarations:t.declarations||kt,imports:t.imports||kt,exports:t.exports||kt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function x1(t,e){if(t==null)return _n;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=oh.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function k1(t){if(t==null)return _n;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Ne(t){return Ts(()=>{let e=QS(t);return YS(e),e})}function O1(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function QS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||_n,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||kt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:x1(t.inputs,e),outputs:k1(t.outputs),debugInfo:null}}function YS(t){t.features?.forEach(e=>e(t))}function hC(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function L1(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function V1(t){return Object.getPrototypeOf(t.prototype).constructor}function Er(t){let e=V1(t.type),n=!0,r=[t];for(;e;){let i;if(Tn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=$m(t.inputs),s.declaredInputs=$m(t.declaredInputs),s.outputs=$m(t.outputs);let a=i.hostBindings;a&&$1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&U1(t,u),l&&B1(t,l),F1(t,i),ib(t.outputs,i.outputs),Tn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Er&&(n=!1)}}e=Object.getPrototypeOf(e)}j1(r)}function F1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function j1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ys(i.hostAttrs,n=ys(n,i.hostAttrs))}}function $m(t){return t===_n?{}:t===kt?[]:t}function U1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function B1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function $1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function An(t){let e=n=>{let r=Array.isArray(t);n.hostDirectives===null?(n.resolveHostDirectives=H1,n.hostDirectives=r?t.map(dy):[t]):r?n.hostDirectives.unshift(...t.map(dy)):n.hostDirectives.unshift(t)};return e.ngInherit=!0,e}function H1(t){let e=[],n=!1,r=null,i=null;for(let o=0;o<t.length;o++){let s=t[o];if(s.hostDirectives!==null){let a=e.length;r??=new Map,i??=new Map,ZS(s,e,r),i.set(s,[a,e.length-1])}o===0&&Tn(s)&&(n=!0,e.push(s))}for(let o=n?1:0;o<t.length;o++)e.push(t[o]);return[e,r,i]}function ZS(t,e,n){if(t.hostDirectives!==null)for(let r of t.hostDirectives)if(typeof r=="function"){let i=r();for(let o of i)fC(dy(o),e,n)}else fC(r,e,n)}function fC(t,e,n){let r=dd(t.directive);q1(r.declaredInputs,t.inputs),ZS(r,e,n),n.set(r,t),e.push(r)}function dy(t){return typeof t=="function"?{directive:tt(t),inputs:_n,outputs:_n}:{directive:tt(t.directive),inputs:pC(t.inputs),outputs:pC(t.outputs)}}function pC(t){if(t===void 0||t.length===0)return _n;let e={};for(let n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e}function q1(t,e){for(let n in e)if(e.hasOwnProperty(n)){let r=e[n],i=t[n];t[r]=i}}function z1(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=ys(t.mergedAttrs,t.attrs);let h=t.tView=My(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),hs(t,!1);let u=G1(n,e,t,r);wd()&&Ly(n,e,u,t),vs(u,e);let l=NS(u,e,u,t);e[r+Fe]=l,xy(e,l),_1(l,t,e)}function Tc(t,e,n,r,i,o,s,a,u,l,h){let p=n+Fe,m;if(e.firstCreatePass){if(m=Rc(e,p,4,s||null,a||null),l!=null){let y=Bn(e.consts,l);m.localNames=[];for(let T=0;T<y.length;T+=2)m.localNames.push(y[T],-1)}}else m=e.data[p];return z1(m,t,e,n,r,i,o,u),l!=null&&Fy(t,m,h),m}var G1=W1;function W1(t,e,n,r){return Td(!0),e[Pe].createComment("")}var zy=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(zy||{}),Pc=new U(""),JS=!1,hy=class extends Ue{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Ib()&&(this.destroyRef=A($t,{optional:!0})??void 0,this.pendingTasks=A(Hn,{optional:!0})??void 0)}emit(e){let n=z(null);try{super.next(e)}finally{z(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ve&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},We=hy;function XS(t){let e,n;function r(){t=Ji;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function gC(t){return queueMicrotask(()=>t()),()=>{t=Ji}}var Gy="isAngularZone",Kd=Gy+"_ID",K1=0,Re=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new We(!1);onMicrotaskEmpty=new We(!1);onStable=new We(!1);onError=new We(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=JS}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Z1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Gy)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Q1,Ji,Ji);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Q1={};function Wy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Y1(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){XS(()=>{t.callbackScheduled=!1,fy(t),t.isCheckStableRunning=!0,Wy(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),fy(t)}function Z1(t){let e=()=>{Y1(t)},n=K1++;t._inner=t._inner.fork({name:"angular",properties:{[Gy]:!0,[Kd]:n,[Kd+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(J1(u))return r.invokeTask(o,s,a,u);try{return mC(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),yC(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return mC(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!X1(u)&&e(),yC(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,fy(t),Wy(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function fy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function mC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function yC(t){t._nesting--,Wy(t)}var bc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new We;onMicrotaskEmpty=new We;onStable=new We;onError=new We;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function J1(t){return eD(t,"__ignore_ng_zone__")}function X1(t){return eD(t,"__scheduler_tick__")}function eD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var tD=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=F({token:t,providedIn:"root",factory:()=>new t})}return t})();var Ky=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Qy=new U("");function io(t){return!!t&&typeof t.then=="function"}function nD(t){return!!t&&typeof t.subscribe=="function"}var rD=new U("");var Yy=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=A(rD,{optional:!0})??[];injector=A(rt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=it(this.injector,i);if(io(o))n.push(o);else if(nD(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lh=new U("");function iD(){Mg(()=>{let t="";throw new j(600,t)})}function oD(t){return t.isBoundToModule}var eL=10;var si=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=A(Ht);afterRenderManager=A(tD);zonelessEnabled=A(fc);rootEffectScheduler=A(gc);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ue;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=A(Hn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(se(n=>!n))}constructor(){A(Pc,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=A(ze);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=rt.NULL){return this._injector.get(Re).run(()=>{Ae(10);let s=n instanceof ch;if(!this._injector.get(Yy).done){let T="";throw new j(405,T)}let u;s?u=n:u=this._injector.get(Nc).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=oD(u)?void 0:this._injector.get(Es),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Qy,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),yc(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Ae(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ae(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(zy.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=z(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,z(n),this.afterTick.next(),Ae(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(to,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<eL;)Ae(14),this.synchronizeOnce(),Ae(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!uc(i))continue;let o=r&&!this.zonelessEnabled?0:1;By(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>uc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;yc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(lh,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>yc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function xc(t,e,n,r){let i=J(),o=ps();if(zn(i,o,e)){let s=Ge(),a=km();vO(a,i,t,e,n,r)}return xc}var py=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Hm(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function tL(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Hm(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let m=t.at(s),y=e[u],T=Hm(s,m,u,y,n);if(T!==0){T<0&&t.updateValue(s,y),s--,u--;continue}let N=n(o,l),R=n(s,m),k=n(o,h);if(Object.is(k,R)){let $=n(u,y);Object.is($,N)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new Qd,i??=_C(t,o,s,n),gy(t,r,o,k))t.updateValue(o,h),o++,s++;else if(i.has(k))r.set(N,t.detach(o)),s--;else{let $=t.create(o,e[o]);t.attach(o,$),o++,s++}}for(;o<=u;)vC(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,m=Hm(o,h,o,p,n);if(m!==0)m<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new Qd,i??=_C(t,o,s,n);let y=n(o,p);if(gy(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let T=n(o,h);r.set(T,t.detach(o)),s--}}}for(;!l.done;)vC(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function gy(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function vC(t,e,n,r,i){if(gy(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function _C(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Qd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function kc(t,e,n,r,i,o,s,a){oi("NgControlFlow");let u=J(),l=Ge(),h=Bn(l.consts,o);return Tc(u,l,t,e,n,r,i,h,256,s,a),Zy}function Zy(t,e,n,r,i,o,s,a){oi("NgControlFlow");let u=J(),l=Ge(),h=Bn(l.consts,o);return Tc(u,l,t,e,n,r,i,h,512,s,a),Zy}function Oc(t,e){oi("NgControlFlow");let n=J(),r=ps(),i=n[r]!==qt?n[r]:-1,o=i!==-1?Yd(n,Fe+i):void 0,s=0;if(zn(n,r,t)){let a=z(null);try{if(o!==void 0&&PS(o,s),t!==-1){let u=Fe+t,l=Yd(n,u),h=_y(n[H],u),p=kS(l,h,n),m=Dc(n,h,e,{dehydratedView:p});Ac(l,m,s,_s(h,p))}}finally{z(a)}}else if(o!==void 0){let a=MS(o,s);a!==void 0&&(a[Be]=e)}}var my=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-at}};function Jy(t){return t}var yy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Xy(t,e,n,r,i,o,s,a,u,l,h,p,m){oi("NgControlFlow");let y=J(),T=Ge(),N=u!==void 0,R=J(),k=a?s.bind(R[Lt][Be]):s,$=new yy(N,k);R[Fe+t]=$,Tc(y,T,t+1,e,n,r,i,Bn(T.consts,o),256),N&&Tc(y,T,t+2,u,l,h,p,Bn(T.consts,m),512)}var vy=class extends py{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-at}at(e){return this.getLView(e)[Be].$implicit}attach(e,n){let r=n[qi];this.needsIndexUpdate||=e!==this.length,Ac(this.lContainer,n,e,_s(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,nL(this.lContainer,e)}create(e,n){let r=Bd(this.lContainer,this.templateTNode.tView.ssrId),i=Dc(this.hostLView,this.templateTNode,new my(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){sh(e[H],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Be].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Be].$index=e}getLView(e){return rL(this.lContainer,e)}};function ev(t){let e=z(null),n=$n();try{let r=J(),i=r[H],o=r[n],s=n+1,a=Yd(r,s);if(o.liveCollection===void 0){let l=_y(i,s);o.liveCollection=new vy(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(tL(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=ps(),h=u.length===0;if(zn(r,l,h)){let p=n+2,m=Yd(r,p);if(h){let y=_y(i,p),T=kS(m,y,r),N=Dc(r,y,void 0,{dehydratedView:T});Ac(m,N,0,_s(y,T))}else i.firstUpdatePass&&HO(m),PS(m,0)}}}finally{z(e)}}function Yd(t,e){return t[e]}function nL(t,e){return Ic(t,e)}function rL(t,e){return MS(t,e)}function _y(t,e){return cc(t,e)}function gt(t,e,n){let r=J(),i=ps();if(zn(r,i,e)){let o=Ge(),s=km();dO(s,r,t,e,r[Pe],n)}return gt}function Iy(t,e,n,r,i){jy(e,t,n,i?"class":"style",r)}function Te(t,e,n,r){let i=J(),o=i[H],s=t+Fe,a=o.firstCreatePass?FS(s,i,2,e,yO,Mb(),n,r):o.data[s];if(_S(a,i,t,e,sD),pd(a)){let u=i[H];vS(u,i,a),YC(u,a,i)}return r!=null&&Fy(i,a),Te}function Ie(){let t=Ge(),e=ct(),n=IS(e);return t.firstCreatePass&&jS(t,n),Tm(n)&&bm(),Em(),n.classesWithoutHost!=null&&nk(n)&&Iy(t,n,J(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&rk(n)&&Iy(t,n,J(),n.stylesWithoutHost,!1),Ie}function mt(t,e,n,r){return Te(t,e,n,r),Ie(),mt}function Tt(t,e,n,r){let i=J(),o=i[H],s=t+Fe,a=o.firstCreatePass?i1(s,o,2,e,n,r):o.data[s];return _S(a,i,t,e,sD),r!=null&&Fy(i,a),Tt}function bt(){let t=ct(),e=IS(t);return Tm(e)&&bm(),Em(),bt}function ai(t,e,n,r){return Tt(t,e,n,r),bt(),ai}var sD=(t,e,n,r,i)=>(Td(!0),oS(e[Pe],r,qb()));function tv(){return J()}var Lc="en-US";var iL=Lc;function aD(t){typeof t=="string"&&(iL=t.toLowerCase().replace(/_/g,"-"))}function be(t,e,n){let r=J(),i=Ge(),o=ct();return oL(i,r,r[Pe],o,t,e,n),be}function Ds(t,e,n){let r=J(),i=Ge(),o=ct();return(o.type&3||n)&&$S(o,i,r,n,r[Pe],t,e,Pd(o,r,e)),Ds}function oL(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Pd(r,e,o),$S(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Pd(r,e,o),cC(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Pd(r,e,o),cC(r,e,p,i,i,u)}}function nv(t=1){return Hb(t)}function sL(t,e){let n=null,r=Ok(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?iS(t,o,!0):Fk(r,o))return i}return n}function rv(t){let e=J()[Lt][Ot];if(!e.projection){let n=t?t.length:1,r=e.projection=hb(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?sL(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function dh(t,e=0,n,r,i,o){let s=J(),a=Ge(),u=r?t+1:null;u!==null&&Tc(s,a,u,r,i,o,null,n);let l=Rc(a,Fe+t,16,null,n||null);l.projection===null&&(l.projection=e),Dm();let p=!s[qi]||wm();s[Lt][Ot].projection[l.projection]===null&&u!==null?aL(s,a,u):p&&!rh(l)&&iO(a,s,l)}function aL(t,e,n){let r=Fe+n,i=e.data[r],o=t[r],s=Bd(o,i.tView.ssrId),a=Dc(t,i,void 0,{dehydratedView:s});Ac(o,a,0,_s(i,s))}function iv(t,e,n,r){D1(t,e,n,r)}function ov(t,e,n){S1(t,e,n)}function Vc(t){let e=J(),n=Ge(),r=Mm();_d(r+1);let i=qy(n,r);if(t.dirty&&bb(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=N1(e,r);t.reset(o,mk),t.notifyOnChanges()}return!0}return!1}function Fc(){return C1(J(),Mm())}function cL(t){let e=xb();return pm(e,Fe+t)}function Dd(t,e){return t<<17|e<<2}function no(t){return t>>17&32767}function uL(t){return(t&2)==2}function lL(t,e){return t&131071|e<<17}function Ey(t){return t|2}function ws(t){return(t&131068)>>2}function qm(t,e){return t&-131069|e<<2}function dL(t){return(t&1)===1}function wy(t){return t|1}function hL(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=no(s),u=ws(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||cs(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=no(t[a+1]);t[r+1]=Dd(m,a),m!==0&&(t[m+1]=qm(t[m+1],r)),t[a+1]=lL(t[a+1],r)}else t[r+1]=Dd(a,0),a!==0&&(t[a+1]=qm(t[a+1],r)),a=r;else t[r+1]=Dd(u,0),a===0?a=r:t[u+1]=qm(t[u+1],r),u=r;l&&(t[r+1]=Ey(t[r+1])),IC(t,h,r,!0),IC(t,h,r,!1),fL(e,h,t,r,o),s=Dd(a,u),o?e.classBindings=s:e.styleBindings=s}function fL(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&cs(o,e)>=0&&(n[r+1]=wy(n[r+1]))}function IC(t,e,n,r){let i=t[n+1],o=e===null,s=r?no(i):ws(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];pL(u,e)&&(a=!0,t[s+1]=r?wy(l):Ey(l)),s=r?no(l):ws(l)}a&&(t[n+1]=r?Ey(i):wy(i))}function pL(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?cs(t,e)>=0:!1}var Sn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function gL(t){return t.substring(Sn.key,Sn.keyEnd)}function mL(t){return yL(t),cD(t,uD(t,0,Sn.textEnd))}function cD(t,e){let n=Sn.textEnd;return n===e?-1:(e=Sn.keyEnd=vL(t,Sn.key=e,n),uD(t,e,n))}function yL(t){Sn.key=0,Sn.keyEnd=0,Sn.value=0,Sn.valueEnd=0,Sn.textEnd=t.length}function uD(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function vL(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function ln(t,e){return IL(t,e,null,!0),ln}function sv(t){EL(DL,_L,t,!0)}function _L(t,e){for(let n=mL(e);n>=0;n=cD(e,n))ud(t,gL(e),!0)}function IL(t,e,n,r){let i=J(),o=Ge(),s=yd(2);if(o.firstUpdatePass&&dD(o,t,s,r),e!==qt&&zn(i,s,e)){let a=o.data[$n()];hD(o,a,i,i[Pe],t,i[s+1]=RL(e,n),r,s)}}function EL(t,e,n,r){let i=Ge(),o=yd(2);i.firstUpdatePass&&dD(i,null,o,r);let s=J();if(n!==qt&&zn(s,o,n)){let a=i.data[$n()];if(fD(a,r)&&!lD(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=od(u,n||"")),Iy(i,a,s,n,r)}else AL(i,a,s,s[Pe],s[o+1],s[o+1]=SL(t,e,n),r,o)}}function lD(t,e){return e>=t.expandoStartIndex}function dD(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[$n()],s=lD(t,n);fD(o,r)&&e===null&&!s&&(e=!1),e=wL(i,o,e,r),hL(i,o,e,n,s,r)}}function wL(t,e,n,r){let i=jb(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=zm(null,t,e,n,r),n=Cc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=zm(i,t,e,n,r),o===null){let u=TL(t,e,r);u!==void 0&&Array.isArray(u)&&(u=zm(null,t,e,u[1],r),u=Cc(u,e.attrs,r),bL(t,e,r,u))}else o=CL(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function TL(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ws(r)!==0)return t[no(r)]}function bL(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[no(i)]=r}function CL(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Cc(r,s,n)}return Cc(r,e.attrs,n)}function zm(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Cc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Cc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ud(t,s,n?!0:e[++o]))}return t===void 0?null:t}function SL(t,e,n){if(n==null||n==="")return kt;let r=[],i=Sc(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function DL(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&ud(t,r,n)}function AL(t,e,n,r,i,o,s,a){i===qt&&(i=kt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,T=null,N;h===p?(u+=2,l+=2,m!==y&&(T=p,N=y)):p===null||h!==null&&h<p?(u+=2,T=h):(l+=2,T=p,N=y),T!==null&&hD(t,e,n,r,T,N,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function hD(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=dL(l)?EC(u,e,n,i,ws(l),s):void 0;if(!Zd(h)){Zd(o)||uL(l)&&(o=EC(u,null,n,i,a,s));let p=fm($n(),n);sO(r,s,p,i,o)}}function EC(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===qt&&(m=p?kt:void 0);let y=p?ld(m,r):h===r?m:void 0;if(l&&!Zd(y)&&(y=ld(u,r)),Zd(y)&&(a=y,s))return a;let T=t[i+1];i=s?no(T):ws(T)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=ld(u,r))}return a}function Zd(t){return t!==void 0}function RL(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=gr(Sc(t)))),t}function fD(t,e){return(t.flags&(e?8:16))!==0}function Ke(t,e=""){let n=J(),r=Ge(),i=t+Fe,o=r.firstCreatePass?Rc(r,i,1,e,null):r.data[i],s=NL(r,n,o,e,t);n[i]=s,wd()&&Ly(r,n,s,o),hs(o,!1)}var NL=(t,e,n,r,i)=>(Td(!0),$k(e[Pe],r));function ML(t,e,n,r=""){return zn(t,ps(),n)?e+Hi(n)+r:qt}function PL(t,e,n,r,i,o=""){let s=kb(),a=BS(t,s,n,i);return yd(2),a?e+Hi(n)+r+Hi(i)+o:qt}function ci(t){return Zt("",t),ci}function Zt(t,e,n){let r=J(),i=ML(r,t,e,n);return i!==qt&&gD(r,$n(),i),Zt}function pD(t,e,n,r,i){let o=J(),s=PL(o,t,e,n,r,i);return s!==qt&&gD(o,$n(),s),pD}function gD(t,e,n){let r=fm(e,t);Hk(t[Pe],r,n)}function xL(t,e,n){let r=Ge();if(r.firstCreatePass){let i=Tn(t);Ty(n,r.data,r.blueprint,i,!0),Ty(e,r.data,r.blueprint,i,!1)}}function Ty(t,e,n,r,i){if(t=tt(t),Array.isArray(t))for(let o=0;o<t.length;o++)Ty(t[o],e,n,r,i);else{let o=Ge(),s=J(),a=ct(),u=ji(t)?t:tt(t.provide),l=cm(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(ji(t)||!t.multi){let y=new eo(l,i,ge,null),T=Wm(u,e,i?h:h+m,p);T===-1?(Qm(Vd(a,s),o,u),Gm(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[T]=y,s[T]=y)}else{let y=Wm(u,e,h+m,p),T=Wm(u,e,h,h+m),N=y>=0&&n[y],R=T>=0&&n[T];if(i&&!R||!i&&!N){Qm(Vd(a,s),o,u);let k=LL(i?OL:kL,n.length,i,r,l,t);!i&&R&&(n[T].providerFactory=k),Gm(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=mD(n[i?T:y],l,!i&&r);Gm(o,t,y>-1?y:T,k)}!i&&r&&R&&n[T].componentProviders++}}}function Gm(t,e,n,r){let i=ji(e),o=_b(e);if(i||o){let u=(o?tt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function mD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Wm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function kL(t,e,n,r,i){return by(this.multi,[])}function OL(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=vc(r,r[H],this.providerFactory.index,i);s=u.slice(0,a),by(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],by(o,s);return s}function by(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function LL(t,e,n,r,i,o){let s=new eo(t,n,ge,null);return s.multi=[],s.index=e,s.componentProviders=0,mD(s,i,r&&!n),s}function hh(t,e=[]){return n=>{n.providersResolver=(r,i)=>xL(r,i?i(t):t,e)}}function VL(t,e,n,r,i){return jL(J(),Nm(),t,e,n,r,i)}function yD(t,e){let n=t[e];return n===qt?void 0:n}function FL(t,e,n,r,i,o){let s=e+n;return zn(t,s,i)?US(t,s+1,o?r.call(o,i):r(i)):yD(t,s+1)}function jL(t,e,n,r,i,o,s){let a=e+n;return BS(t,a,i,o)?US(t,a+2,s?r.call(s,i,o):r(i,o)):yD(t,a+2)}function UL(t,e){let n=Ge(),r,i=t+Fe;n.firstCreatePass?(r=BL(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Kr(r.type,!0)),s,a=xt(ge);try{let u=Ld(!1),l=o();return Ld(u),gm(n,J(),i,l),l}finally{xt(a)}}function BL(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function $L(t,e,n){let r=t+Fe,i=J(),o=pm(i,r);return HL(i,r)?FL(i,Nm(),e,o.transform,n,o):o.transform(n)}function HL(t,e){return t[H].data[e].pure}var Jd=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},av=(()=>{class t{compileModuleSync(n){return new Wd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=om(n),o=nS(i.declarations).reduce((s,a)=>{let u=Zr(a);return u&&s.push(new Is(u)),s},[]);return new Jd(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var qL=(()=>{class t{zone=A(Re);changeDetectionScheduler=A(vn);applicationRef=A(si);applicationErrorHandler=A(Ht);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vD({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Re(G(x({},_D()),{scheduleInRootZone:n})),[{provide:Re,useFactory:t},{provide:mr,multi:!0,useFactory:()=>{let r=A(qL,{optional:!0});return()=>r.initialize()}},{provide:mr,multi:!0,useFactory:()=>{let r=A(zL);return()=>{r.initialize()}}},e===!0?{provide:Vm,useValue:!0}:[],{provide:bd,useValue:n??JS},{provide:Ht,useFactory:()=>{let r=A(Re),i=A(ze),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(sn),o.handleError(s))})}}}]}function _D(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var zL=(()=>{class t{subscription=new Ve;initialized=!1;zone=A(Re);pendingTasks=A(Hn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Re.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Re.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var cv=(()=>{class t{applicationErrorHandler=A(Ht);appRef=A(si);taskService=A(Hn);ngZone=A(Re);zonelessEnabled=A(fc);tracing=A(Pc,{optional:!0});disableScheduling=A(Vm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ve;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Kd):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(A(bd,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof bc||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?gC:XS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Kd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function GL(){return oi("NgZoneless"),In([{provide:vn,useExisting:cv},{provide:Re,useClass:bc},{provide:fc,useValue:!0},{provide:bd,useValue:!1},[]])}function WL(){return typeof $localize<"u"&&$localize.locale||Lc}var uv=new U("",{providedIn:"root",factory:()=>A(uv,{optional:!0,skipSelf:!0})||WL()});var fh=class{destroyed=!1;listeners=null;errorHandler=A(sn,{optional:!0});destroyRef=A($t);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new j(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed){console.warn(as(953,!1));return}if(this.listeners===null)return;let n=z(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{z(n)}}};function Rn(t){return tb(t)}function ot(t,e){return Jl(t,e?.equal)}var lv=class{[Pt];constructor(e){this[Pt]=e}destroy(){this[Pt].destroy()}};function ph(t,e){let n=e?.injector??A(rt),r=e?.manualCleanup!==!0?n.get($t):null,i,o=n.get(pc,null,{optional:!0}),s=n.get(vn);return o!==null?(i=YL(o.view,s,t),r instanceof ec&&r._lView===o.view&&(r=null)):i=ZL(t,n.get(gc),s),i.injector=n,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new lv(i)}var ID=G(x({},Gr),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Ji,run(){if(this.dirty=!1,this.hasRun&&!rs(this))return;this.hasRun=!0;let t=r=>(this.cleanupFns??=[]).push(r),e=Wr(this),n=fs(!1);try{this.maybeCleanup(),this.fn(t)}finally{fs(n),Li(this,e)}},maybeCleanup(){if(!this.cleanupFns?.length)return;let t=z(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],z(t)}}}),KL=G(x({},ID),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){is(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),QL=G(x({},ID),{consumerMarkedDirty(){this.view[K]|=8192,Yi(this.view),this.notifier.notify(13)},destroy(){is(this),this.onDestroyFn(),this.maybeCleanup(),this.view[yr]?.delete(this)}});function YL(t,e,n){let r=Object.create(QL);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=n,t[yr]??=new Set,t[yr].add(r),r.consumerMarkedDirty(r),r}function ZL(t,e,n){let r=Object.create(KL);return r.fn=t,r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}var TD=Symbol("InputSignalNode#UNSET"),uV=G(x({},Xl),{transformFn:void 0,applyValueToInputSignal(t,e){os(t,e)}});function bD(t,e){let n=Object.create(uV);n.value=t,n.transformFn=e?.transform;function r(){if(ns(n),n.value===TD){let i=null;throw new j(-950,i)}return n.value}return r[Pt]=n,r}var mh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Xd(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},lV=new U("");lV.__NG_ELEMENT_ID__=t=>{let e=ct();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new j(204,!1)};function Jt(t){return new fh}function ED(t,e){return bD(t,e)}function dV(t){return bD(TD,t)}var fe=(ED.required=dV,ED);var As=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},CD=new As("20.1.2");var dv=new U(""),hV=new U("");function jc(t){return!t.moduleRef}function fV(t){let e=jc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Re);return n.run(()=>{jc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Ht),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),jc(t)){let o=()=>e.destroy(),s=t.platformInjector.get(dv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(dv);s.add(o),t.moduleRef.onDestroy(()=>{yc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return gV(r,n,()=>{let o=e.get(Hn),s=o.add(),a=e.get(Yy);return a.runInitializers(),a.donePromise.then(()=>{try{let u=e.get(uv,Lc);if(aD(u||Lc),!e.get(hV,!0))return jc(t)?e.get(si):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(jc(t)){let h=e.get(si);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return pV?.(t.moduleRef,t.allPlatformModules),t.moduleRef}finally{o.remove(s)}})})})}var pV;function gV(t,e,n){try{let r=n();return io(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var gh=null;function mV(t=[],e){return rt.create({name:e,providers:[{provide:ic,useValue:"platform"},{provide:dv,useValue:new Set([()=>gh=null])},...t]})}function yV(t=[]){if(gh)return gh;let e=mV(t);return gh=e,iD(),vV(e),e}function vV(t){let e=t.get(th,null);it(t,()=>{e?.forEach(n=>n())})}function hv(){return!1}var Uc=(()=>{class t{static __NG_ELEMENT_ID__=_V}return t})();function _V(t){return IV(ct(),J(),(t&16)===16)}function IV(t,e,n){if(ei(t)&&!n){let r=un(t.index,e);return new ni(r,r)}else if(t.type&175){let r=e[Lt];return new ni(r,e)}return null}function SD(t){Ae(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=yV(r),o=[vD({}),{provide:vn,useExisting:cv},Gb,...n||[]],s=new wc({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return fV({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Ae(9)}}function Bc(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var RD=null;function dn(){return RD}function fv(t){RD??=t}var $c=class{},pv=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>A(ND),providedIn:"platform"})}return t})();var ND=(()=>{class t extends pv{_location;_history;_doc=A(ut);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return dn().getBaseHref(this._doc)}onPopState(n){let r=dn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=dn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function MD(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function DD(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function ui(t){return t&&t[0]!=="?"?`?${t}`:t}var Rs=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>A(xD),providedIn:"root"})}return t})(),PD=new U(""),xD=(()=>{class t extends Rs{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??A(ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return MD(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ui(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ui(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ui(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(te(pv),te(PD,8))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ns=(()=>{class t{_subject=new Ue;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=TV(DD(AD(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ui(r))}normalize(n){return t.stripTrailingSlash(wV(this._basePath,AD(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ui(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ui(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ui;static joinWithSlash=MD;static stripTrailingSlash=DD;static \u0275fac=function(r){return new(r||t)(te(Rs))};static \u0275prov=F({token:t,factory:()=>EV(),providedIn:"root"})}return t})();function EV(){return new Ns(te(Rs))}function wV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function AD(t){return t.replace(/\/index.html$/,"")}function TV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function gv(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Hc=class{};var kD="browser";var vh=new U(""),Iv=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(te(vh),te(Re))};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})(),qc=class{_doc;constructor(e){this._doc=e}manager},mv="ng-app-id";function OD(t){for(let e of t)e.remove()}function LD(t,e){let n=e.createElement("style");return n.textContent=t,n}function CV(t,e,n,r){let i=t.head?.querySelectorAll(`style[${mv}="${e}"],link[${mv}="${e}"]`);if(i)for(let o of i)o.removeAttribute(mv),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function vv(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Ev=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,CV(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,LD);r?.forEach(i=>this.addUsage(i,this.external,vv))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(OD(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])OD(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,LD(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,vv(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(te(ut),te(eh),te(nh,8),te(ii))};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})(),yv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},wv=/%COMP%/g;var FD="%COMP%",SV=`_nghost-${FD}`,DV=`_ngcontent-${FD}`,AV=!0,RV=new U("",{providedIn:"root",factory:()=>AV});function NV(t){return DV.replace(wv,t)}function MV(t){return SV.replace(wv,t)}function jD(t,e){return e.map(n=>n.replace(wv,t))}var Tv=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new zc(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof yh?i.applyToHost(n):i instanceof Gc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case vr.Emulated:o=new yh(u,l,r,this.appId,h,s,a,p,m);break;case vr.ShadowDom:return new _v(u,l,n,r,s,a,this.nonce,p,m);default:o=new Gc(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(te(Iv),te(Ev),te(eh),te(RV),te(ut),te(ii),te(Re),te(nh),te(Pc,8))};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})(),zc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(yv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(VD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(VD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=yv[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=yv[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(_r.DashCase|_r.Important)?e.style.setProperty(n,r,i&_r.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&_r.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=dn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function VD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var _v=class extends zc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=jD(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=vv(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Gc=class extends zc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?jD(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},yh=class extends Gc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=NV(h),this.hostAttr=MV(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var _h=class t extends $c{supportsDOMEvents=!0;static makeCurrent(){fv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=PV();return n==null?null:xV(n)}resetBaseElement(){Wc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return gv(document.cookie,e)}},Wc=null;function PV(){return Wc=Wc||document.head.querySelector("base"),Wc?Wc.getAttribute("href"):null}function xV(t){return new URL(t,document.baseURI).pathname}var kV=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})(),BD=(()=>{class t extends qc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(te(ut))};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})(),UD=["alt","control","meta","shift"],OV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},$D=(()=>{class t extends qc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>dn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),UD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=OV[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),UD.forEach(s=>{if(s!==i){let a=LV[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(te(ut))};static \u0275prov=F({token:t,factory:t.\u0275fac})}return t})();function VV(t,e){return SD(x({rootComponent:t},FV(e)))}function FV(t){return{appProviders:[...HV,...t?.providers??[]],platformProviders:$V}}function jV(){_h.makeCurrent()}function UV(){return new sn}function BV(){return Dy(document),document}var $V=[{provide:ii,useValue:kD},{provide:th,useValue:jV,multi:!0},{provide:ut,useFactory:BV}];var HV=[{provide:ic,useValue:"root"},{provide:sn,useFactory:UV},{provide:vh,useClass:BD,multi:!0,deps:[ut]},{provide:vh,useClass:$D,multi:!0,deps:[ut]},Tv,Ev,Iv,{provide:to,useExisting:Tv},{provide:Hc,useClass:kV},[]];var HD=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(te(ut))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ee="primary",cu=Symbol("RouteTitle"),Av=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ao(t){return new Av(t)}function ZD(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function zV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Gn(t[n],e[n]))return!1;return!0}function Gn(t,e){let n=t?Rv(t):void 0,r=e?Rv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!JD(t[i],e[i]))return!1;return!0}function Rv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function JD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function XD(t){return t.length>0?t[t.length-1]:null}function br(t){return Eg(t)?t:io(t)?Oe(Promise.resolve(t)):W(t)}var GV={exact:tA,subset:nA},eA={exact:WV,subset:KV,ignored:()=>!0};function qD(t,e,n){return GV[n.paths](t.root,e.root,n.matrixParams)&&eA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function WV(t,e){return Gn(t,e)}function tA(t,e,n){if(!oo(t.segments,e.segments)||!wh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!tA(t.children[r],e.children[r],n))return!1;return!0}function KV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>JD(t[n],e[n]))}function nA(t,e,n){return rA(t,e,e.segments,n)}function rA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!oo(i,n)||e.hasChildren()||!wh(i,n,r))}else if(t.segments.length===n.length){if(!oo(t.segments,n)||!wh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!nA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!oo(t.segments,i)||!wh(t.segments,i,r)||!t.children[ee]?!1:rA(t.children[ee],e,o,r)}}function wh(t,e,n){return e.every((r,i)=>eA[n](t[i].parameters,r.parameters))}var Kn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ao(this.queryParams),this._queryParamMap}toString(){return ZV.serialize(this)}},me=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Th(this)}},li=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ao(this.parameters),this._parameterMap}toString(){return oA(this)}};function QV(t,e){return oo(t,e)&&t.every((n,r)=>Gn(n.parameters,e[r].parameters))}function oo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function YV(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ee&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ee&&(n=n.concat(e(i,r)))}),n}var uu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>new co,providedIn:"root"})}return t})(),co=class{parse(e){let n=new Mv(e);return new Kn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Kc(e.root,!0)}`,r=eF(e.queryParams),i=typeof e.fragment=="string"?`#${JV(e.fragment)}`:"";return`${n}${r}${i}`}},ZV=new co;function Th(t){return t.segments.map(e=>oA(e)).join("/")}function Kc(t,e){if(!t.hasChildren())return Th(t);if(e){let n=t.children[ee]?Kc(t.children[ee],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==ee&&r.push(`${i}:${Kc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=YV(t,(r,i)=>i===ee?[Kc(t.children[ee],!1)]:[`${i}:${Kc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ee]!=null?`${Th(t)}/${n[0]}`:`${Th(t)}/(${n.join("//")})`}}function iA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ih(t){return iA(t).replace(/%3B/gi,";")}function JV(t){return encodeURI(t)}function Nv(t){return iA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bh(t){return decodeURIComponent(t)}function zD(t){return bh(t.replace(/\+/g,"%20"))}function oA(t){return`${Nv(t.path)}${XV(t.parameters)}`}function XV(t){return Object.entries(t).map(([e,n])=>`;${Nv(e)}=${Nv(n)}`).join("")}function eF(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ih(n)}=${Ih(i)}`).join("&"):`${Ih(n)}=${Ih(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var tF=/^[^\/()?;#]+/;function bv(t){let e=t.match(tF);return e?e[0]:""}var nF=/^[^\/()?;=#]+/;function rF(t){let e=t.match(nF);return e?e[0]:""}var iF=/^[^=?&#]+/;function oF(t){let e=t.match(iF);return e?e[0]:""}var sF=/^[^&#]+/;function aF(t){let e=t.match(sF);return e?e[0]:""}var Mv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ee]=new me(e,n)),r}parseSegment(){let e=bv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new li(bh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=rF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=bv(this.remaining);i&&(r=i,this.capture(r))}e[bh(n)]=bh(r)}parseQueryParam(e){let n=oF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=aF(this.remaining);s&&(r=s,this.capture(r))}let i=zD(n),o=zD(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=bv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ee);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[ee]:new me([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function sA(t){return t.segments.length>0?new me([],{[ee]:t}):t}function aA(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=aA(i);if(r===ee&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new me(t.segments,e);return cF(n)}function cF(t){if(t.numberOfChildren===1&&t.children[ee]){let e=t.children[ee];return new me(t.segments.concat(e.segments),e.children)}return t}function di(t){return t instanceof Kn}function cA(t,e,n=null,r=null){let i=uA(t);return lA(i,e,n,r)}function uA(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new me(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=sA(r);return e??i}function lA(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Cv(i,i,i,n,r);let o=uF(e);if(o.toRoot())return Cv(i,i,new me([],{}),n,r);let s=lF(o,i,t),a=s.processChildren?Yc(s.segmentGroup,s.index,o.commands):hA(s.segmentGroup,s.index,o.commands);return Cv(i,s.segmentGroup,a,n,r)}function Ch(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Xc(t){return typeof t=="object"&&t!=null&&t.outlets}function Cv(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=dA(t,e,n);let a=sA(aA(s));return new Kn(a,o,i)}function dA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=dA(o,e,n)}),new me(t.segments,r)}var Sh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ch(r[0]))throw new j(4003,!1);let i=r.find(Xc);if(i&&i!==XD(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function uF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Sh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Sh(n,e,r)}var xs=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function lF(t,e,n){if(t.isAbsolute)return new xs(e,!0,0);if(!n)return new xs(e,!1,NaN);if(n.parent===null)return new xs(n,!0,0);let r=Ch(t.commands[0])?0:1,i=n.segments.length-1+r;return dF(n,i,t.numberOfDoubleDots)}function dF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new xs(r,!1,i-o)}function hF(t){return Xc(t[0])?t[0].outlets:{[ee]:t}}function hA(t,e,n){if(t??=new me([],{}),t.segments.length===0&&t.hasChildren())return Yc(t,e,n);let r=fF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new me(t.segments.slice(0,r.pathIndex),{});return o.children[ee]=new me(t.segments.slice(r.pathIndex),t.children),Yc(o,0,i)}else return r.match&&i.length===0?new me(t.segments,{}):r.match&&!t.hasChildren()?Pv(t,e,n):r.match?Yc(t,0,i):Pv(t,e,n)}function Yc(t,e,n){if(n.length===0)return new me(t.segments,{});{let r=hF(n),i={};if(Object.keys(r).some(o=>o!==ee)&&t.children[ee]&&t.numberOfChildren===1&&t.children[ee].segments.length===0){let o=Yc(t.children[ee],e,n);return new me(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=hA(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new me(t.segments,i)}}function fF(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Xc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!WD(u,l,s))return o;r+=2}else{if(!WD(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Pv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Xc(o)){let u=pF(o.outlets);return new me(r,u)}if(i===0&&Ch(n[0])){let u=t.segments[e];r.push(new li(u.path,GD(n[0]))),i++;continue}let s=Xc(o)?o.outlets[ee]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ch(a)?(r.push(new li(s,GD(a))),i+=2):(r.push(new li(s,{})),i++)}return new me(r,{})}function pF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Pv(new me([],{}),0,r))}),e}function GD(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function WD(t,e,n){return t==n.path&&Gn(e,n.parameters)}var Zc="imperative",lt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(lt||{}),en=class{id;url;constructor(e,n){this.id=e,this.url=n}},uo=class extends en{type=lt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Mn=class extends en{urlAfterRedirects;type=lt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Vt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(Vt||{}),eu=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(eu||{}),Wn=class extends en{reason;code;type=lt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},wr=class extends en{reason;code;type=lt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Os=class extends en{error;target;type=lt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tu=class extends en{urlAfterRedirects;state;type=lt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dh=class extends en{urlAfterRedirects;state;type=lt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ah=class extends en{urlAfterRedirects;state;shouldActivate;type=lt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Rh=class extends en{urlAfterRedirects;state;type=lt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nh=class extends en{urlAfterRedirects;state;type=lt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mh=class{route;type=lt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ph=class{route;type=lt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},xh=class{snapshot;type=lt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kh=class{snapshot;type=lt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Oh=class{snapshot;type=lt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lh=class{snapshot;type=lt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var nu=class{},Ls=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function gF(t){return!(t instanceof nu)&&!(t instanceof Ls)}function mF(t,e){return t.providers&&!t._injector&&(t._injector=Mc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Nn(t){return t.outlet||ee}function yF(t,e){let n=t.filter(r=>Nn(r)===e);return n.push(...t.filter(r=>Nn(r)!==e)),n}function js(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Vh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return js(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Us(this.rootInjector)}},Us=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Vh(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(te(ze))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Fh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=xv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=xv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=kv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return kv(e,this._root).map(n=>n.value)}};function xv(t,e){if(t===e.value)return e;for(let n of e.children){let r=xv(t,n);if(r)return r}return null}function kv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=kv(t,n);if(r.length)return r.unshift(e),r}return[]}var Xt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ps(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ru=class extends Fh{snapshot;constructor(e,n){super(e),this.snapshot=n,$v(this,e)}toString(){return this.snapshot.toString()}};function fA(t){let e=vF(t),n=new pt([new li("",{})]),r=new pt({}),i=new pt({}),o=new pt({}),s=new pt(""),a=new Tr(n,r,o,s,i,ee,t,e.root);return a.snapshot=e.root,new ru(new Xt(a,[]),e)}function vF(t){let e={},n={},r={},i="",o=new so([],e,r,i,n,ee,t,null,{});return new iu("",new Xt(o,[]))}var Tr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(se(l=>l[cu]))??W(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>ao(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>ao(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function jh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:x(x({},e.params),t.params),data:x(x({},e.data),t.data),resolve:x(x(x(x({},t.data),e.data),i?.data),t._resolvedData)}:r={params:x({},t.params),data:x({},t.data),resolve:x(x({},t.data),t._resolvedData??{})},i&&gA(i)&&(r.resolve[cu]=i.title),r}var so=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[cu]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ao(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ao(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},iu=class extends Fh{url;constructor(e,n){super(n),this.url=e,$v(this,n)}toString(){return pA(this._root)}};function $v(t,e){e.value._routerState=t,e.children.forEach(n=>$v(t,n))}function pA(t){let e=t.children.length>0?` { ${t.children.map(pA).join(", ")} } `:"";return`${t.value}${e}`}function Sv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Gn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Gn(e.params,n.params)||t.paramsSubject.next(n.params),zV(e.url,n.url)||t.urlSubject.next(n.url),Gn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ov(t,e){let n=Gn(t.params,e.params)&&QV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Ov(t.parent,e.parent))}function gA(t){return typeof t.title=="string"||t.title===null}var mA=new U(""),Hv=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ee;activateEvents=new We;deactivateEvents=new We;attachEvents=new We;detachEvents=new We;routerOutletData=fe(void 0);parentContexts=A(Us);location=A(Ss);changeDetector=A(Uc);inputBinder=A(Hh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Lv(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ne({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ri]})}return t})(),Lv=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Tr?this.route:e===Us?this.childContexts:e===mA?this.outletData:this.parent.get(e,n)}},Hh=new U("");var qv=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=de({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&mt(0,"router-outlet")},dependencies:[Hv],encapsulation:2})}return t})();function zv(t){let e=t.children&&t.children.map(zv),n=e?G(x({},t),{children:e}):x({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ee&&(n.component=qv),n}function _F(t,e,n){let r=ou(t,e._root,n?n._root:void 0);return new ru(r,e)}function ou(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=IF(t,e,n);return new Xt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ou(t,a)),s}}let r=EF(e.value),i=e.children.map(o=>ou(t,o));return new Xt(r,i)}}function IF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ou(t,r,i);return ou(t,r)})}function EF(t){return new Tr(new pt(t.url),new pt(t.params),new pt(t.queryParams),new pt(t.fragment),new pt(t.data),t.outlet,t.component,t)}var Vs=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},yA="ngNavigationCancelingError";function Uh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=di(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=vA(!1,Vt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function vA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[yA]=!0,n.cancellationCode=e,n}function wF(t){return _A(t)&&di(t.url)}function _A(t){return!!t&&t[yA]}var TF=(t,e,n,r)=>se(i=>(new Vv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Vv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Sv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ps(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ps(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ps(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ps(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Lh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new kh(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Sv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Sv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Bh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ks=class{component;route;constructor(e,n){this.component=e,this.route=n}};function bF(t,e,n){let r=t._root,i=e?e._root:null;return Qc(r,i,n,[r.value])}function CF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Bs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Wg(t)?t:e.get(t):r}function Qc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ps(e);return t.children.forEach(s=>{SF(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Jc(a,n.getContext(s),i)),i}function SF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=DF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Bh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Qc(t,e,a?a.children:null,r,i):Qc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ks(a.outlet.component,s))}else s&&Jc(e,a,i),i.canActivateChecks.push(new Bh(r)),o.component?Qc(t,null,a?a.children:null,r,i):Qc(t,null,n,r,i);return i}function DF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!oo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!oo(t.url,e.url)||!Gn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ov(t,e)||!Gn(t.queryParams,e.queryParams);case"paramsChange":default:return!Ov(t,e)}}function Jc(t,e,n){let r=Ps(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Jc(s,e.children.getContext(o),n):Jc(s,null,n):Jc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ks(e.outlet.component,i)):n.canDeactivateChecks.push(new ks(null,i)):n.canDeactivateChecks.push(new ks(null,i))}function lu(t){return typeof t=="function"}function AF(t){return typeof t=="boolean"}function RF(t){return t&&lu(t.canLoad)}function NF(t){return t&&lu(t.canActivate)}function MF(t){return t&&lu(t.canActivateChild)}function PF(t){return t&&lu(t.canDeactivate)}function xF(t){return t&&lu(t.canMatch)}function IA(t){return t instanceof lr||t?.name==="EmptyError"}var Eh=Symbol("INITIAL_VALUE");function Fs(){return on(t=>Fl(t.map(e=>e.pipe(hr(1),Sg(Eh)))).pipe(se(e=>{for(let n of e)if(n!==!0){if(n===Eh)return Eh;if(n===!1||kF(n))return n}return!0}),jt(e=>e!==Eh),hr(1)))}function kF(t){return di(t)||t instanceof Vs}function OF(t,e){return qe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?W(G(x({},n),{guardsResult:!0})):LF(s,r,i,t).pipe(qe(a=>a&&AF(a)?VF(r,o,t,e):W(a)),se(a=>G(x({},n),{guardsResult:a})))})}function LF(t,e,n,r){return Oe(t).pipe(qe(i=>$F(i.component,i.route,n,e,r)),fr(i=>i!==!0,!0))}function VF(t,e,n,r){return Oe(e).pipe(Oi(i=>Xo(jF(i.route.parent,r),FF(i.route,r),BF(t,i.path,n),UF(t,i.route,n))),fr(i=>i!==!0,!0))}function FF(t,e){return t!==null&&e&&e(new Oh(t)),W(!0)}function jF(t,e){return t!==null&&e&&e(new xh(t)),W(!0)}function UF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(o=>Ga(()=>{let s=js(e)??n,a=Bs(o,s),u=NF(a)?a.canActivate(e,t):it(s,()=>a(e,t));return br(u).pipe(fr())}));return W(i).pipe(Fs())}function BF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>CF(s)).filter(s=>s!==null).map(s=>Ga(()=>{let a=s.guards.map(u=>{let l=js(s.node)??n,h=Bs(u,l),p=MF(h)?h.canActivateChild(r,t):it(l,()=>h(r,t));return br(p).pipe(fr())});return W(a).pipe(Fs())}));return W(o).pipe(Fs())}function $F(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return W(!0);let s=o.map(a=>{let u=js(e)??i,l=Bs(a,u),h=PF(l)?l.canDeactivate(t,e,n,r):it(u,()=>l(t,e,n,r));return br(h).pipe(fr())});return W(s).pipe(Fs())}function HF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let o=i.map(s=>{let a=Bs(s,t),u=RF(a)?a.canLoad(e,n):it(t,()=>a(e,n));return br(u)});return W(o).pipe(Fs(),EA(r))}function EA(t){return mg(st(e=>{if(typeof e!="boolean")throw Uh(t,e)}),se(e=>e===!0))}function qF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let o=i.map(s=>{let a=Bs(s,t),u=xF(a)?a.canMatch(e,n):it(t,()=>a(e,n));return br(u)});return W(o).pipe(Fs(),EA(r))}var su=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},au=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ms(t){return Zo(new su(t))}function zF(t){return Zo(new j(4e3,!1))}function GF(t){return Zo(vA(!1,Vt.GuardRejected))}var Fv=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[ee])return zF(`${e.redirectTo}`);i=i.children[ee]}}applyRedirectCommands(e,n,r,i,o){return WF(n,i,o).pipe(se(s=>{if(s instanceof Kn)throw new au(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new au(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Kn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new me(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function WF(t,e,n){if(typeof t=="string")return W(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return br(it(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var jv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KF(t,e,n,r,i){let o=wA(t,e,n);return o.matched?(r=mF(e,r),qF(r,e,n,i).pipe(se(s=>s===!0?o:x({},jv)))):W(o)}function wA(t,e,n){if(e.path==="**")return QF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?x({},jv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ZD)(n,t,e);if(!i)return x({},jv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?x(x({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function QF(t){return{matched:!0,parameters:t.length>0?XD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function KD(t,e,n,r){return n.length>0&&JF(t,n,r)?{segmentGroup:new me(e,ZF(r,new me(n,t.children))),slicedSegments:[]}:n.length===0&&XF(t,n,r)?{segmentGroup:new me(t.segments,YF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new me(t.segments,t.children),slicedSegments:n}}function YF(t,e,n,r){let i={};for(let o of n)if(qh(t,e,o)&&!r[Nn(o)]){let s=new me([],{});i[Nn(o)]=s}return x(x({},r),i)}function ZF(t,e){let n={};n[ee]=e;for(let r of t)if(r.path===""&&Nn(r)!==ee){let i=new me([],{});n[Nn(r)]=i}return n}function JF(t,e,n){return n.some(r=>qh(t,e,r)&&Nn(r)!==ee)}function XF(t,e,n){return n.some(r=>qh(t,e,r))}function qh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function ej(t,e,n){return e.length===0&&!t.children[n]}var Uv=class{};function tj(t,e,n,r,i,o,s="emptyOnly"){return new Bv(t,e,n,r,i,s,o).recognize()}var nj=31,Bv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Fv(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=KD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(({children:n,rootSnapshot:r})=>{let i=new Xt(r,n),o=new iu("",i),s=cA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new so([],Object.freeze({}),Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ee,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ee,n).pipe(se(r=>({children:r,rootSnapshot:n})),dr(r=>{if(r instanceof au)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof su?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(se(s=>s instanceof Xt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Oe(o).pipe(Oi(s=>{let a=r.children[s],u=yF(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Cg((s,a)=>(s.push(...a),s)),zr(null),bg(),qe(s=>{if(s===null)return Ms(r);let a=TA(s);return rj(a),W(a)}))}processSegment(e,n,r,i,o,s,a){return Oe(n).pipe(Oi(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(dr(l=>{if(l instanceof su)return W(null);throw l}))),fr(u=>!!u),dr(u=>{if(IA(u))return ej(r,i,o)?W(new Uv):Ms(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Nn(r)!==s&&(s===ee||!qh(i,o,r))?Ms(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Ms(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=wA(n,i,o);if(!u)return Ms(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>nj&&(this.allowRedirects=!1));let y=new so(o,l,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,QD(i),Nn(i),i.component??i._loadedComponent??null,i,YD(i)),T=jh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(T.params),y.data=Object.freeze(T.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(on(R=>this.applyRedirects.lineralizeSegments(i,R)),qe(R=>this.processSegment(e,r,n,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=KF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(on(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(on(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,T=new so(m,p,Object.freeze(x({},this.urlTree.queryParams)),this.urlTree.fragment,QD(r),Nn(r),r.component??r._loadedComponent??null,r,YD(r)),N=jh(T,s,this.paramsInheritanceStrategy);T.params=Object.freeze(N.params),T.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:k}=KD(n,m,y,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,T).pipe(se(Q=>new Xt(T,Q)));if(l.length===0&&k.length===0)return W(new Xt(T,[]));let $=Nn(r)===o;return this.processSegment(h,l,R,k,$?ee:o,!0,T).pipe(se(Q=>new Xt(T,Q instanceof Xt?[Q]:[])))}))):Ms(n)))}getChildConfig(e,n,r){return n.children?W({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?W({routes:n._loadedRoutes,injector:n._loadedInjector}):HF(e,n,r,this.urlSerializer).pipe(qe(i=>i?this.configLoader.loadChildren(e,n).pipe(st(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):GF(n))):W({routes:[],injector:e})}};function rj(t){t.sort((e,n)=>e.value.outlet===ee?-1:n.value.outlet===ee?1:e.value.outlet.localeCompare(n.value.outlet))}function ij(t){let e=t.value.routeConfig;return e&&e.path===""}function TA(t){let e=[],n=new Set;for(let r of t){if(!ij(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=TA(r.children);e.push(new Xt(r.value,i))}return e.filter(r=>!n.has(r))}function QD(t){return t.data||{}}function YD(t){return t.resolve||{}}function oj(t,e,n,r,i,o){return qe(s=>tj(t,e,n,r,s.extractedUrl,i,o).pipe(se(({state:a,tree:u})=>G(x({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function sj(t,e){return qe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return W(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of bA(u))s.add(l);let a=0;return Oe(s).pipe(Oi(u=>o.has(u)?aj(u,r,t,e):(u.data=jh(u,u.parent,t).resolve,W(void 0))),st(()=>a++),es(1),qe(u=>a===s.size?W(n):Ut))})}function bA(t){let e=t.children.map(n=>bA(n)).flat();return[t,...e]}function aj(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!gA(i)&&(o[cu]=i.title),Ga(()=>(t.data=jh(t,t.parent,n).resolve,cj(o,t,e,r).pipe(se(s=>(t._resolvedData=s,t.data=x(x({},t.data),s),null)))))}function cj(t,e,n,r){let i=Rv(t);if(i.length===0)return W({});let o={};return Oe(i).pipe(qe(s=>uj(t[s],e,n,r).pipe(fr(),st(a=>{if(a instanceof Vs)throw Uh(new co,a);o[s]=a}))),es(1),se(()=>o),dr(s=>IA(s)?Ut:Zo(s)))}function uj(t,e,n,r){let i=js(e)??r,o=Bs(t,i),s=o.resolve?o.resolve(e,n):it(i,()=>o(e,n));return br(s)}function Dv(t){return on(e=>{let n=t(e);return n?Oe(n).pipe(se(()=>e)):W(e)})}var Gv=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ee);return r}getResolvedTitleForRoute(n){return n.data[cu]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>A(CA),providedIn:"root"})}return t})(),CA=(()=>{class t extends Gv{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(te(HD))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$s=new U("",{providedIn:"root",factory:()=>({})}),du=new U(""),SA=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=A(av);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return W(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=br(it(n,()=>r.loadComponent())).pipe(se(AA),st(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Wa(()=>{this.componentLoaders.delete(r)})),o=new Wo(i,()=>new Ue).pipe(Go());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=DA(r,this.compiler,n,this.onLoadEndListener).pipe(Wa(()=>{this.childrenLoaders.delete(r)})),s=new Wo(o,()=>new Ue).pipe(Go());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function DA(t,e,n,r){return br(it(n,()=>t.loadChildren())).pipe(se(AA),qe(i=>i instanceof uh||Array.isArray(i)?W(i):Oe(e.compileModuleAsync(i))),se(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(du,[],{optional:!0,self:!0}).flat()),{routes:s.map(zv),injector:o}}))}function lj(t){return t&&typeof t=="object"&&"default"in t}function AA(t){return lj(t)?t.default:t}var zh=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>A(dj),providedIn:"root"})}return t})(),dj=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),RA=new U("");var Wv=new U(""),NA=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ue;transitionAbortWithErrorSubject=new Ue;configLoader=A(SA);environmentInjector=A(ze);destroyRef=A($t);urlSerializer=A(uu);rootContexts=A(Us);location=A(Ns);inputBindingEnabled=A(Hh,{optional:!0})!==null;titleStrategy=A(Gv);options=A($s,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=A(zh);createViewTransition=A(RA,{optional:!0});navigationErrorHandler=A(Wv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>W(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Mh(i)),r=i=>this.events.next(new Ph(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(G(x({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new pt(null),this.transitions.pipe(jt(r=>r!==null),on(r=>{let i=!1;return W(r).pipe(on(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Vt.SupersededByNewNavigation),Ut;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?G(x({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload"){let u="";return this.events.next(new wr(o.id,this.urlSerializer.serialize(o.rawUrl),u,eu.IgnoredSameUrlNavigation)),o.resolve(!1),Ut}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return W(o).pipe(on(u=>(this.events.next(new uo(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Ut:Promise.resolve(u))),oj(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),st(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=G(x({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new tu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new uo(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let T=fA(this.rootComponentType).snapshot;return this.currentTransition=r=G(x({},o),{targetSnapshot:T,urlAfterRedirects:l,extras:G(x({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,W(r)}else{let u="";return this.events.next(new wr(o.id,this.urlSerializer.serialize(o.extractedUrl),u,eu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Ut}}),st(o=>{let s=new Dh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),se(o=>(this.currentTransition=r=G(x({},o),{guards:bF(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),OF(this.environmentInjector,o=>this.events.next(o)),st(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Uh(this.urlSerializer,o.guardsResult);let s=new Ah(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),jt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Vt.GuardRejected),!1)),Dv(o=>{if(o.guards.canActivateChecks.length!==0)return W(o).pipe(st(s=>{let a=new Rh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),on(s=>{let a=!1;return W(s).pipe(sj(this.paramsInheritanceStrategy,this.environmentInjector),st({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Vt.NoDataFromResolver)}}))}),st(s=>{let a=new Nh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Dv(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=js(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(st(h=>{a.component=h}),se(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Fl(s(o.targetSnapshot.root)).pipe(zr(null),hr(1))}),Dv(()=>this.afterPreactivation()),on(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Oe(a).pipe(se(()=>r)):W(r)}),se(o=>{let s=_F(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=G(x({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),st(()=>{this.events.next(new nu)}),TF(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),hr(1),Ul(new ne(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(jt(()=>!i&&!r.targetRouterState),st(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Vt.Aborted)}))),st({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Mn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ul(this.transitionAbortWithErrorSubject.pipe(st(o=>{throw o}))),Wa(()=>{i||this.cancelNavigationTransition(r,"",Vt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),dr(o=>{if(this.destroyed)return r.resolve(!1),Ut;if(i=!0,_A(o))this.events.next(new Wn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),wF(o)?this.events.next(new Ls(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Os(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=it(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Vs){let{message:u,cancellationCode:l}=Uh(this.urlSerializer,a);this.events.next(new Wn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Ls(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Ut}))}))}cancelNavigationTransition(n,r,i){let o=new Wn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hj(t){return t!==Zc}var MA=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>A(fj),providedIn:"root"})}return t})(),$h=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},fj=(()=>{class t extends $h{static \u0275fac=(()=>{let n;return function(i){return(n||(n=bs(t)))(i||t)}})();static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),PA=(()=>{class t{urlSerializer=A(uu);options=A($s,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=A(Ns);urlHandlingStrategy=A(zh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Kn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Kn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=fA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:()=>A(pj),providedIn:"root"})}return t})(),pj=(()=>{class t extends PA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof uo?this.updateStateMemento():n instanceof wr?this.commitTransition(r):n instanceof tu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof nu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Wn&&n.code!==Vt.SupersededByNewNavigation&&n.code!==Vt.Redirect?this.restoreHistory(r):n instanceof Os?this.restoreHistory(r,!0):n instanceof Mn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=x(x({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=x(x({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=bs(t)))(i||t)}})();static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Kv(t,e){t.events.pipe(jt(n=>n instanceof Mn||n instanceof Wn||n instanceof Os||n instanceof wr),se(n=>n instanceof Mn||n instanceof wr?0:(n instanceof Wn?n.code===Vt.Redirect||n.code===Vt.SupersededByNewNavigation:!1)?2:1),jt(n=>n!==2),hr(1)).subscribe(()=>{e()})}var gj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},zt=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=A(Ky);stateManager=A(PA);options=A($s,{optional:!0})||{};pendingTasks=A(Hn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=A(NA);urlSerializer=A(uu);location=A(Ns);urlHandlingStrategy=A(zh);injector=A(ze);_events=new Ue;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=A(MA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=A(du,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!A(Hh,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ve;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Wn&&r.code!==Vt.Redirect&&r.code!==Vt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Mn)this.navigated=!0;else if(r instanceof Ls){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=x({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||hj(i.source)},s);this.scheduleNavigation(a,Zc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}gF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Zc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=x({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Ht)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(zv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=x(x({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=uA(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return lA(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=di(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Zc,null,r)}navigate(n,r={skipLocationChange:!1}){return yj(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=x({},gj):r===!1?i=x({},mj):i=r,di(n))return qD(this.currentUrlTree,n,i);let o=this.parseUrl(n);return qD(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Kv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}var Gh=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=De(null);get href(){return Rn(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ue;applicationErrorHandler=A(Ht);options=A($s,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(A(new mh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Mn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(di(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:di(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(ge(zt),ge(Tr),Xd("tabindex"),ge(Dn),ge(Yt),ge(Rs))};static \u0275dir=Ne({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&be("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&xc("href",i.reactiveHref(),Ry)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Bc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Bc],replaceUrl:[2,"replaceUrl","replaceUrl",Bc],routerLink:"routerLink"},features:[ri]})}return t})(),_j=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new We;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof Mn&&this.update()})}ngAfterContentInit(){W(this.links.changes,W(null)).pipe(Jo()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Oe(n).pipe(Jo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=Ij(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(ge(zt),ge(Yt),ge(Dn),ge(Uc),ge(Gh,8))};static \u0275dir=Ne({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&iv(o,Gh,5),r&2){let s;Vc(s=Fc())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ri]})}return t})();function Ij(t){return!!t.paths}var Ej=new U("");function wj(t,...e){return In([{provide:du,multi:!0,useValue:t},[],{provide:Tr,useFactory:Tj,deps:[zt]},{provide:lh,multi:!0,useFactory:Cj},e.map(n=>n.\u0275providers)])}function Tj(t){return t.routerState.root}function bj(t,e){return{\u0275kind:t,\u0275providers:e}}function Cj(){let t=A(rt);return e=>{let n=t.get(si);if(e!==n.components[0])return;let r=t.get(zt),i=t.get(Sj);t.get(Dj)===1&&r.initialNavigation(),t.get(Aj,null,{optional:!0})?.setUpPreloading(),t.get(Ej,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Sj=new U("",{factory:()=>new Ue}),Dj=new U("",{providedIn:"root",factory:()=>1});var Aj=new U("");function Rj(t){return bj(7,[{provide:Wv,useValue:t}])}var Hs=class t{showNotification=De(!1);notificationMessage=De({type:"success",message:""});lastTimeoutId=void 0;abort=void 0;success(e){this.notificationMessage.set({type:"success",message:e??""}),this.setNotification(!0)}warn(e){this.notificationMessage.set({type:"warn",message:e??""}),this.setNotification(!0)}notFound(e){this.notificationMessage.set({type:"404",message:e??""}),this.setNotification(!0)}setNotification(e){if(this.showNotification.set(e),this.abort?.abort(),this.showNotification()){this.abort=new AbortController;let n=this.abort.signal;window.addEventListener("keydown",this.onKeyDown.bind(this),{once:!0,signal:n,capture:!0}),window.addEventListener("click",this.onClick.bind(this),{once:!0,signal:n,capture:!0}),this.setHideTimeout()}else this.clearHideTimeout()}setHideTimeout(){this.clearHideTimeout(),this.lastTimeoutId=window.setTimeout(()=>{this.setNotification(!1)},3e3)}clearHideTimeout(){this.lastTimeoutId&&(clearTimeout(this.lastTimeoutId),this.lastTimeoutId=void 0)}onKeyDown(e){e.key==="Escape"&&this.setNotification(!1)}onClick(e){this.setNotification(!1)}ngOnDestroy(){this.abort?.abort()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var Wh=class t{notificationService=A(Hs);copy(e,n){navigator.clipboard?(navigator.clipboard.writeText(e),this.notificationService.success(n??"Copiado!")):this.notificationService.warn(n??"No se puede copiar!")}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var Kh=class t{baseId="prompt-dict";save(e,n){localStorage.setItem(this.fullIdentifier(e),JSON.stringify(n))}get(e){let n=localStorage.getItem(this.fullIdentifier(e));if(n)try{return JSON.parse(n)}catch(r){return console.error(`Error parsing value for ${e}:`,r),null}return null}delete(e){localStorage.removeItem(this.fullIdentifier(e))}fullIdentifier(e){return`${this.baseId}-${e}`}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};function pee(t,e){let r=!e?.manualCleanup?e?.injector?.get($t)??A($t):null,i=Mj(e?.equal),o;e?.requireSync?o=De({kind:0},{equal:i}):o=De({kind:1,value:e?.initialValue},{equal:i});let s,a=t.subscribe({next:u=>o.set({kind:1,value:u}),error:u=>{o.set({kind:2,error:u}),s?.()},complete:()=>{s?.()}});if(e?.requireSync&&o().kind===0)throw new j(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),ot(()=>{let u=o();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new j(601,!1)}},{equal:e?.equal})}function Mj(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}function xA(t){t===void 0&&(t=A(rt));let e=t.get(Zi);return n=>new ne(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var kA=()=>{};var VA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Pj=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Qh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Pj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Yv;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Yv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xj=function(t){let e=VA(t);return Qh.encodeByteArray(e,!0)},fu=function(t){return xj(t).replace(/\./g,"")},Yh=function(t){try{return Qh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Jv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var kj=()=>Jv().__FIREBASE_DEFAULTS__,Oj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Lj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Yh(t[1]);return e&&JSON.parse(e)},Zh=()=>{try{return kA()||kj()||Oj()||Lj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},FA=t=>{var e,n;return(n=(e=Zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jA=t=>{let e=FA(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Xv=()=>{var t;return(t=Zh())===null||t===void 0?void 0:t.config},UA=t=>{var e;return(e=Zh())===null||e===void 0?void 0:e[`_${t}`]};var lo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ho(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e_(t){return(await fetch(t,{credentials:"include"})).ok}function BA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fu(JSON.stringify(n)),fu(JSON.stringify(s)),""].join(".")}var hu={};function Vj(){let t={prod:[],emulator:[]};for(let e of Object.keys(hu))hu[e]?t.emulator.push(e):t.prod.push(e);return t}function Fj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var OA=!1;function t_(t,e){if(typeof window>"u"||typeof document>"u"||!ho(window.location.host)||hu[t]===e||hu[t]||OA)return;hu[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=Vj().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{OA=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=Fj(r),y=n("text"),T=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),k=n("preprendIcon"),$=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let Q=m.element;a(Q),h(R,N);let Ce=l();u($,k),Q.append($,T,R,Ce),document.body.appendChild(Q)}o?(T.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $A(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function jj(){var t;let e=(t=Zh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GA(){return!jj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pu(){try{return typeof indexedDB=="object"}catch{return!1}}function WA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var Uj="FirebaseError",hn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Uj,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pn.prototype.create)}},Pn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Bj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new hn(i,a,r)}};function Bj(t,e){return t.replace($j,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var $j=/\{\$([^}]+)}/g;function fo(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(LA(o)&&LA(s)){if(!fo(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function LA(t){return t!==null&&typeof t=="object"}function n_(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function KA(t,e){let n=new Zv(t,e);return n.subscribe.bind(n)}var Zv=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Hj(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Qv),i.error===void 0&&(i.error=Qv),i.complete===void 0&&(i.complete=Qv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Hj(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qv(){}var _ee=4*60*60*1e3;function yt(t){return t&&t._delegate?t._delegate:t}var Ft=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var po="[DEFAULT]";var r_=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new lo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zj(e))try{this.getOrInitializeService({instanceIdentifier:po})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=po){return this.instances.has(e)}getOptions(e=po){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=po){return this.component?this.component.multipleInstances?e:po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function qj(t){return t===po?void 0:t}function zj(t){return t.instantiationMode==="EAGER"}var Jh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new r_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Gj=[],ae=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ae||{}),Wj={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},Kj=ae.INFO,Qj={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},Yj=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Qj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Qn=class{constructor(e){this.name=e,this._logLevel=Kj,this._logHandler=Yj,this._userLogHandler=null,Gj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}};var Zj=(t,e)=>e.some(n=>t instanceof n),QA,YA;function Jj(){return QA||(QA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xj(){return YA||(YA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ZA=new WeakMap,o_=new WeakMap,JA=new WeakMap,i_=new WeakMap,a_=new WeakMap;function e2(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Yn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&ZA.set(n,t)}).catch(()=>{}),a_.set(e,t),e}function t2(t){if(o_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});o_.set(t,e)}var s_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return o_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XA(t){s_=t(s_)}function n2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xh(this),e,...n);return JA.set(r,e.sort?e.sort():[e]),Yn(r)}:Xj().includes(t)?function(...e){return t.apply(Xh(this),e),Yn(ZA.get(this))}:function(...e){return Yn(t.apply(Xh(this),e))}}function r2(t){return typeof t=="function"?n2(t):(t instanceof IDBTransaction&&t2(t),Zj(t,Jj())?new Proxy(t,s_):t)}function Yn(t){if(t instanceof IDBRequest)return e2(t);if(i_.has(t))return i_.get(t);let e=r2(t);return e!==t&&(i_.set(t,e),a_.set(e,t)),e}var Xh=t=>a_.get(t);function t0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Yn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Yn(s.result),u.oldVersion,u.newVersion,Yn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var i2=["get","getKey","getAll","getAllKeys","count"],o2=["put","add","delete","clear"],c_=new Map;function e0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(c_.get(e))return c_.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=o2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||i2.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return c_.set(e,o),o}XA(t=>G(x({},t),{get:(e,n,r)=>e0(e,n)||t.get(e,n,r),has:(e,n)=>!!e0(e,n)||t.has(e,n)}));var l_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(s2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function s2(t){let e=t.getComponent();return e?.type==="VERSION"}var d_="@firebase/app",n0="0.13.2";var Cr=new Qn("@firebase/app"),a2="@firebase/app-compat",c2="@firebase/analytics-compat",u2="@firebase/analytics",l2="@firebase/app-check-compat",d2="@firebase/app-check",h2="@firebase/auth",f2="@firebase/auth-compat",p2="@firebase/database",g2="@firebase/data-connect",m2="@firebase/database-compat",y2="@firebase/functions",v2="@firebase/functions-compat",_2="@firebase/installations",I2="@firebase/installations-compat",E2="@firebase/messaging",w2="@firebase/messaging-compat",T2="@firebase/performance",b2="@firebase/performance-compat",C2="@firebase/remote-config",S2="@firebase/remote-config-compat",D2="@firebase/storage",A2="@firebase/storage-compat",R2="@firebase/firestore",N2="@firebase/ai",M2="@firebase/firestore-compat",P2="firebase",x2="11.10.0";var h_="[DEFAULT]",k2={[d_]:"fire-core",[a2]:"fire-core-compat",[u2]:"fire-analytics",[c2]:"fire-analytics-compat",[d2]:"fire-app-check",[l2]:"fire-app-check-compat",[h2]:"fire-auth",[f2]:"fire-auth-compat",[p2]:"fire-rtdb",[g2]:"fire-data-connect",[m2]:"fire-rtdb-compat",[y2]:"fire-fn",[v2]:"fire-fn-compat",[_2]:"fire-iid",[I2]:"fire-iid-compat",[E2]:"fire-fcm",[w2]:"fire-fcm-compat",[T2]:"fire-perf",[b2]:"fire-perf-compat",[C2]:"fire-rc",[S2]:"fire-rc-compat",[D2]:"fire-gcs",[A2]:"fire-gcs-compat",[R2]:"fire-fst",[M2]:"fire-fst-compat",[N2]:"fire-vertex","fire-js":"fire-js",[P2]:"fire-js-all"};var gu=new Map,O2=new Map,f_=new Map;function r0(t,e){try{t.container.addComponent(e)}catch(n){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xn(t){let e=t.name;if(f_.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;f_.set(e,t);for(let n of gu.values())r0(n,t);for(let n of O2.values())r0(n,t);return!0}function ef(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Sr(t){return t==null?!1:t.settings!==void 0}var L2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hi=new Pn("app","Firebase",L2);var p_=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ft("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hi.create("app-deleted",{appName:this._name})}};var qs=x2;function y_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:h_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw hi.create("bad-app-name",{appName:String(i)});if(n||(n=Xv()),!n)throw hi.create("no-options");let o=gu.get(i);if(o){if(fo(n,o.options)&&fo(r,o.config))return o;throw hi.create("duplicate-app",{appName:i})}let s=new Jh(i);for(let u of f_.values())s.addComponent(u);let a=new p_(n,r,s);return gu.set(i,a),a}function zs(t=h_){let e=gu.get(t);if(!e&&t===h_&&Xv())return y_();if(!e)throw hi.create("no-app",{appName:t});return e}function tf(){return Array.from(gu.values())}function $e(t,e,n){var r;let i=(r=k2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(a.join(" "));return}xn(new Ft(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var V2="firebase-heartbeat-database",F2=1,mu="firebase-heartbeat-store",u_=null;function a0(){return u_||(u_=t0(V2,F2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(mu)}catch(n){console.warn(n)}}}}).catch(t=>{throw hi.create("idb-open",{originalErrorMessage:t.message})})),u_}async function j2(t){try{let n=(await a0()).transaction(mu),r=await n.objectStore(mu).get(c0(t));return await n.done,r}catch(e){if(e instanceof hn)Cr.warn(e.message);else{let n=hi.create("idb-get",{originalErrorMessage:e?.message});Cr.warn(n.message)}}}async function i0(t,e){try{let r=(await a0()).transaction(mu,"readwrite");await r.objectStore(mu).put(e,c0(t)),await r.done}catch(n){if(n instanceof hn)Cr.warn(n.message);else{let r=hi.create("idb-set",{originalErrorMessage:n?.message});Cr.warn(r.message)}}}function c0(t){return`${t.name}!${t.options.appId}`}var U2=1024,B2=30,g_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new m_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=o0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>B2){let s=H2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=o0(),{heartbeatsToSend:r,unsentEntries:i}=$2(this._heartbeatsCache.heartbeats),o=fu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Cr.warn(n),""}}};function o0(){return new Date().toISOString().substring(0,10)}function $2(t,e=U2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),s0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),s0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var m_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pu()?WA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await j2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return i0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return i0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function s0(t){return fu(JSON.stringify({version:2,heartbeats:t})).length}function H2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function q2(t){xn(new Ft("platform-logger",e=>new l_(e),"PRIVATE")),xn(new Ft("heartbeat",e=>new g_(e),"PRIVATE")),$e(d_,n0,t),$e(d_,n0,"esm2017"),$e("fire-js","")}q2("");var z2="firebase",G2="11.10.0";$e(z2,G2,"app");var mo=new As("ANGULARFIRE2_VERSION");function rf(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ws=(t,e)=>{let n=e?[e]:tf(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Gs=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(Gs||{}),u0=hv()&&typeof Zone<"u"?Gs.WARN:Gs.SILENT;var nf=class{zone;delegate;constructor(e,n=_g){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},yo=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=A(Re);this.outsideAngular=n.runOutsideAngular(()=>new nf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new nf(typeof Zone>"u"?void 0:Zone.current,za))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),l0=!1;function W2(t,e){!l0&&(u0>Gs.SILENT||hv())&&(l0=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),u0>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function K2(t){let e=A(Re,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function go(t){let e=A(Re,{optional:!0});return e?e.run(()=>t()):t()}var Q2=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),it(n,()=>go(()=>t.apply(void 0,r)))),St=(t,e,n)=>(n||=e?Gs.WARN:Gs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=A(yo),s=A(Zi),a=A(ze)}catch{return W2(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=go(()=>s.add())),i[l]=Q2(i[l],r,a));let u=K2(()=>t.apply(this,i));return e?u instanceof ne?u.pipe(qr(o.outsideAngular),Hr(o.insideAngular),xA(a)):u instanceof Promise?go(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>it(a,()=>go(()=>h(m))),m=>it(a,()=>go(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:go(()=>u):u instanceof ne?u.pipe(qr(o.outsideAngular),Hr(o.insideAngular)):go(()=>u)});var vo=class{constructor(e){return e}},yu=class{constructor(){return tf()}};function Y2(t){return t&&t.length===1?t[0]:new vo(zs())}var v_=new U("angularfire2._apps"),Z2={provide:vo,useFactory:Y2,deps:[[new Ir,v_]]},J2={provide:yu,deps:[[new Ir,v_]]};function X2(t){return(e,n)=>{let r=n.get(ii);$e("angularfire",mo.full,"core"),$e("angularfire",mo.full,"app"),$e("angular",CD.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new vo(i)}}function ite(t,...e){return In([Z2,J2,{provide:v_,useFactory:X2(t),multi:!0,deps:[Re,rt,yo,...e]}])}var ote=St(y_,!0);var eU=new Map,tU={activated:!1,tokenObservers:[]},nU={initialized:!1,enabled:!1};function kn(t){return eU.get(t)||Object.assign({},tU)}function p0(){return nU}var rU="https://content-firebaseappcheck.googleapis.com/v1";var iU="exchangeDebugToken",d0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},pte=24*60*60*1e3;var E_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new lo,this.pending.promise.catch(n=>{}),await oU(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new lo,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function oU(t){return new Promise(e=>{setTimeout(e,t)})}var sU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},fi=new Pn("appCheck","AppCheck",sU);function g0(t){if(!kn(t).activated)throw fi.create("use-before-activation",{appName:t.name})}async function m0({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw fi.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw fi.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw fi.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw fi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function y0(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${rU}/projects/${n}/apps/${r}:${iU}?key=${i}`,body:{debug_token:e}}}var aU="firebase-app-check-database",cU=1,w_="firebase-app-check-store";var of=null;function uU(){return of||(of=new Promise((t,e)=>{try{let n=indexedDB.open(aU,cU);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(fi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(w_,{keyPath:"compositeKey"})}}}catch(n){e(fi.create("storage-open",{originalErrorMessage:n?.message}))}}),of)}function lU(t,e){return dU(hU(t),e)}async function dU(t,e){let r=(await uU()).transaction(w_,"readwrite"),o=r.objectStore(w_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(fi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function hU(t){return`${t.options.appId}-${t.name}`}var vu=new Qn("@firebase/app-check");function __(t,e){return pu()?lU(t,e).catch(n=>{vu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function v0(){return p0().enabled}async function _0(){let t=p0();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var fU={error:"UNKNOWN_ERROR"};function pU(t){return Qh.encodeString(JSON.stringify(t),!1)}async function T_(t,e=!1,n=!1){let r=t.app;g0(r);let i=kn(r),o=i.token,s;if(o&&!_u(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(_u(l)?o=l:await __(r,void 0))}if(!e&&o&&_u(o))return{token:o.token};let a=!1;if(v0())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=m0(y0(r,await _0()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await __(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?vu.warn(l.message):n&&vu.error(l),I_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await kn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?vu.warn(l.message):n&&vu.error(l),s=l}let u;return o?s?_u(o)?u={token:o.token,internalError:s}:u=I_(s):(u={token:o.token},i.token=o,await __(r,o)):u=I_(s),a&&vU(r,u),u}async function gU(t){let e=t.app;g0(e);let{provider:n}=kn(e);if(v0()){let r=await _0(),{token:i}=await m0(y0(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function mU(t,e,n,r){let{app:i}=t,o=kn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&_u(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),h0(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>h0(t))}function I0(t,e){let n=kn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function h0(t){let{app:e}=t,n=kn(e),r=n.tokenRefresher;r||(r=yU(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function yU(t){let{app:e}=t;return new E_(async()=>{let n=kn(e),r;if(n.token?r=await T_(t,!0):r=await T_(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=kn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},d0.RETRIAL_MIN_WAIT,d0.RETRIAL_MAX_WAIT)}function vU(t,e){let n=kn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function _u(t){return t.expireTimeMillis-Date.now()>0}function I_(t){return{token:pU(fU),error:t}}var b_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=kn(this.app);for(let n of e)I0(this.app,n.next);return Promise.resolve()}};function _U(t,e){return new b_(t,e)}function IU(t){return{getToken:e=>T_(t,e),getLimitedUseToken:()=>gU(t),addTokenListener:e=>mU(t,"INTERNAL",e),removeTokenListener:e=>I0(t.app,e)}}var EU="@firebase/app-check",wU="0.10.1";var TU="app-check",f0="app-check-internal";function bU(){xn(new Ft(TU,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return _U(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(f0).initialize()})),xn(new Ft(f0,t=>{let e=t.getProvider("app-check").getImmediate();return IU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),$e(EU,wU)}bU();var CU="app-check";var sf=class{constructor(){return Ws(CU)}};var SU=["localhost","0.0.0.0","127.0.0.1"],Ste=typeof window<"u"&&SU.includes(window.location.hostname);function A0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var R0=A0,N0=new Pn("auth","Firebase",A0());var lf=new Qn("@firebase/auth");function DU(t,...e){lf.logLevel<=ae.WARN&&lf.warn(`Auth (${qs}): ${t}`,...e)}function cf(t,...e){lf.logLevel<=ae.ERROR&&lf.error(`Auth (${qs}): ${t}`,...e)}function E0(t,...e){throw L_(t,...e)}function O_(t,...e){return L_(t,...e)}function M0(t,e,n){let r=Object.assign(Object.assign({},R0()),{[e]:n});return new Pn("auth","Firebase",r).create(e,{appName:t.name})}function uf(t){return M0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function L_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return N0.create(t,...e)}function ye(t,e,...n){if(!t)throw L_(e,...n)}function Iu(t){let e="INTERNAL ASSERTION FAILED: "+t;throw cf(e),new Error(e)}function df(t,e){t||Iu(e)}function AU(){return w0()==="http:"||w0()==="https:"}function w0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function RU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AU()||qA()||"connection"in navigator)?navigator.onLine:!0}function NU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Eo=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,df(n>e,"Short delay should be less than long delay!"),this.isMobile=$A()||zA()}get(){return RU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function MU(t,e){df(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var hf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Iu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Iu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Iu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var PU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var xU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kU=new Eo(3e4,6e4);function P0(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function yf(t,e,n,r,i={}){return x0(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=n_(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:u},o);return HA()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&ho(t.emulatorConfig.host)&&(l.credentials="include"),hf.fetch()(await k0(t,t.config.apiHost,n,a),l)})}async function x0(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},PU),e);try{let i=new D_(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw af(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw af(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw af(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw af(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw M0(t,h,l);E0(t,h)}}catch(i){if(i instanceof hn)throw i;E0(t,"network-request-failed",{message:String(i)})}}async function k0(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?MU(t.config,i):`${t.config.apiScheme}://${i}`;return xU.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var D_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(O_(this.auth,"network-request-failed")),kU.get())})}};function af(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=O_(t,e,r);return i.customData._tokenResponse=n,i}async function OU(t,e){return yf(t,"POST","/v1/accounts:delete",e)}async function ff(t,e){return yf(t,"POST","/v1/accounts:lookup",e)}function Eu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function V_(t,e=!1){let n=yt(t),r=await n.getIdToken(e),i=O0(r);ye(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Eu(C_(i.auth_time)),issuedAtTime:Eu(C_(i.iat)),expirationTime:Eu(C_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function C_(t){return Number(t)*1e3}function O0(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Yh(n);return i?JSON.parse(i):(cf("Failed to decode base64 JWT payload"),null)}catch(i){return cf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function T0(t){let e=O0(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function A_(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof hn&&LU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function LU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var R_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Tu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eu(this.lastLoginAt),this.creationTime=Eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function pf(t){var e;let n=t.auth,r=await t.getIdToken(),i=await A_(t,ff(n,{idToken:r}));ye(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?L0(o.providerUserInfo):[],a=VU(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Tu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function F_(t){let e=yt(t);await pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function L0(t){return t.map(e=>{var{providerId:n}=e,r=Ig(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function FU(t,e){let n=await x0(t,{},async()=>{let r=n_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await k0(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&ho(t.emulatorConfig.host)&&(u.credentials="include"),hf.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jU(t,e){return yf(t,"POST","/v2/accounts:revokeToken",P0(t,e))}var wu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");let n=T0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await FU(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(ye(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ye(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ye(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Iu("not implemented")}};function pi(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var _o=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Ig(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new R_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await A_(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return V_(this,e)}reload(){return F_(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await pf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sr(this.auth.app))return Promise.reject(uf(this.auth));let e=await this.getIdToken();return await A_(this,OU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,T=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,$=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Q,emailVerified:Ce,isAnonymous:Rt,providerData:we,stsTokenManager:w}=n;ye(Q&&w,e,"internal-error");let v=wu.fromJSON(this.name,w);ye(typeof Q=="string",e,"internal-error"),pi(p,e.name),pi(m,e.name),ye(typeof Ce=="boolean",e,"internal-error"),ye(typeof Rt=="boolean",e,"internal-error"),pi(y,e.name),pi(T,e.name),pi(N,e.name),pi(R,e.name),pi(k,e.name),pi($,e.name);let I=new t({uid:Q,auth:e,email:m,emailVerified:Ce,displayName:p,isAnonymous:Rt,photoURL:T,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:k,lastLoginAt:$});return we&&Array.isArray(we)&&(I.providerData=we.map(E=>Object.assign({},E))),R&&(I._redirectEventId=R),I}static async _fromIdTokenResponse(e,n,r=!1){let i=new wu;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await pf(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];ye(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?L0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new wu;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Tu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var b0=new Map;function Io(t){df(t instanceof Function,"Expected a class definition");let e=b0.get(t);return e?(df(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,b0.set(t,e),e)}var UU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),N_=UU;function S_(t,e,n){return`firebase:${t}:${e}:${n}`}var gf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=S_(this.userKey,i.apiKey,o),this.fullPersistenceKey=S_("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await ff(this.auth,{idToken:e}).catch(()=>{});return n?_o._fromGetAccountInfoResponse(this.auth,n,e):null}return _o._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(Io(N_),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Io(N_),s=S_(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let m=await ff(e,{idToken:h}).catch(()=>{});if(!m)break;p=await _o._fromGetAccountInfoResponse(e,m,h)}else p=_o._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function C0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GU(e))return"Blackberry";if(WU(e))return"Webos";if($U(e))return"Safari";if((e.includes("chrome/")||HU(e))&&!e.includes("edge/"))return"Chrome";if(zU(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function BU(t=tn()){return/firefox\//i.test(t)}function $U(t=tn()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HU(t=tn()){return/crios\//i.test(t)}function qU(t=tn()){return/iemobile/i.test(t)}function zU(t=tn()){return/android/i.test(t)}function GU(t=tn()){return/blackberry/i.test(t)}function WU(t=tn()){return/webos/i.test(t)}function V0(t,e=[]){let n;switch(t){case"Browser":n=C0(tn());break;case"Worker":n=`${C0(tn())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qs}/${r}`}var M_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function KU(t,e={}){return yf(t,"GET","/v2/passwordPolicy",P0(t,e))}var QU=6,P_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:QU,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var x_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mf(this),this.idTokenSubscription=new mf(this),this.beforeStateQueue=new M_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=N0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Io(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await gf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await ff(this,{idToken:e}),r=await _o._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Sr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sr(this.app))return Promise.reject(uf(this));let n=e?yt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sr(this.app)?Promise.reject(uf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sr(this.app)?Promise.reject(uf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Io(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await KU(this),n=new P_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Io(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await gf.create(this,[Io(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&DU(`Error while retrieving App Check token: ${n.error}`),n?.token}};function YU(t){return yt(t)}var mf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=KA(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ZU={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JU(t){ZU=t}function XU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function eB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Io);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var Fte=XU("rcb"),jte=new Eo(3e4,6e4);var Ute=new Eo(2e3,1e4);var Bte=10*60*1e3;var $te=new Eo(3e4,6e4);var Hte=new Eo(5e3,15e3);var qte=encodeURIComponent("fac");var S0="@firebase/auth",D0="1.10.8";var k_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function tB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nB(t){xn(new Ft("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ye(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V0(t)},l=new x_(r,i,o,u);return eB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xn(new Ft("auth-internal",e=>{let n=YU(e.getProvider("auth").getImmediate());return(r=>new k_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(S0,D0,tB(t)),$e(S0,D0,"esm2017")}var rB=5*60,zte=UA("authIdTokenMaxAge")||rB;function iB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}JU({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=O_("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",iB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nB("Browser");var n$="auth";var vf=class{constructor(){return Ws(n$)}};var F0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},j0={};var Dr,j_;(function(){var t;function e(w,v){function I(){}I.prototype=v.prototype,w.D=v.prototype,w.prototype=new I,w.prototype.constructor=w,w.C=function(E,b,S){for(var _=Array(arguments.length-2),ar=2;ar<arguments.length;ar++)_[ar-2]=arguments[ar];return v.prototype[b].apply(E,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,I){I||(I=0);var E=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)E[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)E[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=w.g[0],I=w.g[1],b=w.g[2];var S=w.g[3],_=v+(S^I&(b^S))+E[0]+3614090360&4294967295;v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+E[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+E[2]+606105819&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+E[3]+3250441966&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+E[4]+4118548399&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+E[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+E[6]+2821735955&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+E[7]+4249261313&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+E[8]+1770035416&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+E[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+E[10]+4294925233&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+E[11]+2304563134&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+E[12]+1804603682&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+E[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+E[14]+2792965006&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+E[15]+1236535329&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(b^S&(I^b))+E[1]+4129170786&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+E[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+E[11]+643717713&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+E[0]+3921069994&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+E[5]+3593408605&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+E[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+E[15]+3634488961&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+E[4]+3889429448&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+E[9]+568446438&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+E[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+E[3]+4107603335&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+E[8]+1163531501&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+E[13]+2850285829&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+E[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+E[7]+1735328473&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+E[12]+2368359562&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(I^b^S)+E[5]+4294588738&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+E[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+E[11]+1839030562&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+E[14]+4259657740&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+E[1]+2763975236&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+E[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+E[7]+4139469664&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+E[10]+3200236656&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+E[13]+681279174&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+E[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+E[3]+3572445317&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+E[6]+76029189&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+E[9]+3654602809&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+E[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+E[15]+530742520&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+E[2]+3299628645&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(b^(I|~S))+E[0]+4096336452&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+E[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+E[14]+2878612391&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+E[5]+4237533241&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+E[12]+1700485571&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+E[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+E[10]+4293915773&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+E[1]+2240044497&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+E[8]+1873313359&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+E[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+E[6]+2734768916&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+E[13]+1309151649&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+E[4]+4149444226&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+E[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+E[2]+718787259&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+b&4294967295,w.g[3]=w.g[3]+S&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var I=v-this.blockSize,E=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=I;)i(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<v;)if(E[b++]=w.charCodeAt(S++),b==this.blockSize){i(this,E),b=0;break}}else for(;S<v;)if(E[b++]=w[S++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var I=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=I&255,I/=256;for(this.u(w),w=Array(16),v=I=0;4>v;++v)for(var E=0;32>E;E+=8)w[I++]=this.g[v]>>>E&255;return w};function o(w,v){var I=a;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=v(w)}function s(w,v){this.h=v;for(var I=[],E=!0,b=w.length-1;0<=b;b--){var S=w[b]|0;E&&S==v||(I[b]=S,E=!1)}this.g=I}var a={};function u(w){return-128<=w&&128>w?o(w,function(v){return new s([v|0],0>v?-1:0)}):new s([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return R(l(-w));for(var v=[],I=1,E=0;w>=I;E++)v[E]=w/I|0,I*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return R(h(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),E=p,b=0;b<w.length;b+=8){var S=Math.min(8,w.length-b),_=parseInt(w.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),E=E.j(S).add(l(_))):(E=E.j(I),E=E.add(l(_)))}return E}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-R(this).m();for(var w=0,v=1,I=0;I<this.g.length;I++){var E=this.i(I);w+=(0<=E?E:4294967296+E)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T(this))return"0";if(N(this))return"-"+R(this).toString(w);for(var v=l(Math.pow(w,6)),I=this,E="";;){var b=Ce(I,v).g;I=k(I,b.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(w);if(I=b,T(I))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function T(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function N(w){return w.h==-1}t.l=function(w){return w=k(this,w),N(w)?-1:T(w)?0:1};function R(w){for(var v=w.g.length,I=[],E=0;E<v;E++)I[E]=~w.g[E];return new s(I,~w.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),I=[],E=0,b=0;b<=v;b++){var S=E+(this.i(b)&65535)+(w.i(b)&65535),_=(S>>>16)+(this.i(b)>>>16)+(w.i(b)>>>16);E=_>>>16,S&=65535,_&=65535,I[b]=_<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function k(w,v){return w.add(R(v))}t.j=function(w){if(T(this)||T(w))return p;if(N(this))return N(w)?R(this).j(R(w)):R(R(this).j(w));if(N(w))return R(this.j(R(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,I=[],E=0;E<2*v;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<w.g.length;b++){var S=this.i(E)>>>16,_=this.i(E)&65535,ar=w.i(b)>>>16,ba=w.i(b)&65535;I[2*E+2*b]+=_*ba,$(I,2*E+2*b),I[2*E+2*b+1]+=S*ba,$(I,2*E+2*b+1),I[2*E+2*b+1]+=_*ar,$(I,2*E+2*b+1),I[2*E+2*b+2]+=S*ar,$(I,2*E+2*b+2)}for(E=0;E<v;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=v;E<2*v;E++)I[E]=0;return new s(I,0)};function $(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function Q(w,v){this.g=w,this.h=v}function Ce(w,v){if(T(v))throw Error("division by zero");if(T(w))return new Q(p,p);if(N(w))return v=Ce(R(w),v),new Q(R(v.g),R(v.h));if(N(v))return v=Ce(w,R(v)),new Q(R(v.g),v.h);if(30<w.g.length){if(N(w)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,E=v;0>=E.l(w);)I=Rt(I),E=Rt(E);var b=we(I,1),S=we(E,1);for(E=we(E,2),I=we(I,2);!T(E);){var _=S.add(E);0>=_.l(w)&&(b=b.add(I),S=_),E=we(E,1),I=we(I,1)}return v=k(w,b.j(v)),new Q(b,v)}for(b=p;0<=w.l(v);){for(I=Math.max(1,Math.floor(w.m()/v.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(I),_=S.j(v);N(_)||0<_.l(w);)I-=E,S=l(I),_=S.j(v);T(S)&&(S=m),b=b.add(S),w=k(w,_)}return new Q(b,w)}t.A=function(w){return Ce(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)&w.i(E);return new s(I,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)|w.i(E);return new s(I,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)^w.i(E);return new s(I,this.h^w.h)};function Rt(w){for(var v=w.g.length+1,I=[],E=0;E<v;E++)I[E]=w.i(E)<<1|w.i(E-1)>>>31;return new s(I,w.h)}function we(w,v){var I=v>>5;v%=32;for(var E=w.g.length-I,b=[],S=0;S<E;S++)b[S]=0<v?w.i(S+I)>>>v|w.i(S+I+1)<<32-v:w.i(S+I);return new s(b,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,j_=j0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Dr=j0.Integer=s}).apply(typeof F0<"u"?F0:typeof self<"u"?self:typeof window<"u"?window:{});var _f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ar={};var U_,r$,Ks,B_,bu,If,$_,H_,q_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof _f=="object"&&_f];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var D=f++;return{value:d(D,c[D]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function T(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,D){for(var O=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)O[Se-2]=arguments[Se];return d.prototype[C].apply(g,O)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,D=g.length||0;c.length=C+D;for(let O=0;O<D;O++)c[C+O]=g[O]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ce(c){return Ce[" "](c),c}Ce[" "]=function(){};var Rt=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function we(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function w(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let D=0;D<I.length;D++)f=I[D],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Fp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class ar{constructor(){this.h=this.g=null}add(d,f){let g=ba.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ba=new k(()=>new eP,c=>c.reset());class eP{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ca,Sa=!1,Fp=new ar,Iw=()=>{let c=a.Promise.resolve(void 0);Ca=()=>{c.then(tP)}};var tP=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){S(f)}var d=ba;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Sa=!1};function Fr(){this.s=this.s,this.C=this.C}Fr.prototype.s=!1,Fr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Fr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _t(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var nP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Da(c,d){if(_t.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Rt){e:{try{Ce(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:rP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Da.aa.h.call(this)}}T(Da,_t);var rP={2:"touch",3:"pen",4:"mouse"};Da.prototype.h=function(){Da.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Aa="closure_listenable_"+(1e6*Math.random()|0),iP=0;function oP(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++iP,this.da=this.fa=!1}function Xu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function el(c){this.src=c,this.g={},this.h=0}el.prototype.add=function(c,d,f,g,C){var D=c.toString();c=this.g[D],c||(c=this.g[D]=[],this.h++);var O=Up(c,d,g,C);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new oP(d,this.src,D,!!g,C),d.fa=f,c.push(d)),d};function jp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),D;(D=0<=C)&&Array.prototype.splice.call(g,C,1),D&&(Xu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Up(c,d,f,g){for(var C=0;C<c.length;++C){var D=c[C];if(!D.da&&D.listener==d&&D.capture==!!f&&D.ha==g)return C}return-1}var Bp="closure_lm_"+(1e6*Math.random()|0),$p={};function Ew(c,d,f,g,C){if(g&&g.once)return Tw(c,d,f,g,C);if(Array.isArray(d)){for(var D=0;D<d.length;D++)Ew(c,d[D],f,g,C);return null}return f=Gp(f),c&&c[Aa]?c.K(d,f,l(g)?!!g.capture:!!g,C):ww(c,d,f,!1,g,C)}function ww(c,d,f,g,C,D){if(!d)throw Error("Invalid event type");var O=l(C)?!!C.capture:!!C,Se=qp(c);if(Se||(c[Bp]=Se=new el(c)),f=Se.add(d,f,g,O,D),f.proxy)return f;if(g=sP(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)nP||(C=O),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(Cw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function sP(){function c(f){return d.call(c.src,c.listener,f)}let d=aP;return c}function Tw(c,d,f,g,C){if(Array.isArray(d)){for(var D=0;D<d.length;D++)Tw(c,d[D],f,g,C);return null}return f=Gp(f),c&&c[Aa]?c.L(d,f,l(g)?!!g.capture:!!g,C):ww(c,d,f,!0,g,C)}function bw(c,d,f,g,C){if(Array.isArray(d))for(var D=0;D<d.length;D++)bw(c,d[D],f,g,C);else g=l(g)?!!g.capture:!!g,f=Gp(f),c&&c[Aa]?(c=c.i,d=String(d).toString(),d in c.g&&(D=c.g[d],f=Up(D,f,g,C),-1<f&&(Xu(D[f]),Array.prototype.splice.call(D,f,1),D.length==0&&(delete c.g[d],c.h--)))):c&&(c=qp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Up(d,f,g,C)),(f=-1<c?d[c]:null)&&Hp(f))}function Hp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Aa])jp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(Cw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=qp(d))?(jp(f,c),f.h==0&&(f.src=null,d[Bp]=null)):Xu(c)}}}function Cw(c){return c in $p?$p[c]:$p[c]="on"+c}function aP(c,d){if(c.da)c=!0;else{d=new Da(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Hp(c),c=f.call(g,d)}return c}function qp(c){return c=c[Bp],c instanceof el?c:null}var zp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gp(c){return typeof c=="function"?c:(c[zp]||(c[zp]=function(d){return c.handleEvent(d)}),c[zp])}function It(){Fr.call(this),this.i=new el(this),this.M=this,this.F=null}T(It,Fr),It.prototype[Aa]=!0,It.prototype.removeEventListener=function(c,d,f,g){bw(this,c,d,f,g)};function Nt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new _t(d,c);else if(d instanceof _t)d.target=d.target||c;else{var C=d;d=new _t(g,c),E(d,C)}if(C=!0,f)for(var D=f.length-1;0<=D;D--){var O=d.g=f[D];C=tl(O,g,!0,d)&&C}if(O=d.g=c,C=tl(O,g,!0,d)&&C,C=tl(O,g,!1,d)&&C,f)for(D=0;D<f.length;D++)O=d.g=f[D],C=tl(O,g,!1,d)&&C}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Xu(f[g]);delete c.g[d],c.h--}}this.F=null},It.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},It.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function tl(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,D=0;D<d.length;++D){var O=d[D];if(O&&!O.da&&O.capture==f){var Se=O.listener,ft=O.ha||O.src;O.fa&&jp(c.i,O),C=Se.call(ft,g)!==!1&&C}}return C&&!g.defaultPrevented}function Sw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Dw(c){c.g=Sw(()=>{c.g=null,c.i&&(c.i=!1,Dw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class cP extends Fr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Dw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ra(c){Fr.call(this),this.h=c,this.g={}}T(Ra,Fr);var Aw=[];function Rw(c){we(c.g,function(d,f){this.g.hasOwnProperty(f)&&Hp(d)},c),c.g={}}Ra.prototype.N=function(){Ra.aa.N.call(this),Rw(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wp=a.JSON.stringify,uP=a.JSON.parse,lP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Kp(){}Kp.prototype.h=null;function Nw(c){return c.h||(c.h=c.i())}function Mw(){}var Na={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qp(){_t.call(this,"d")}T(Qp,_t);function Yp(){_t.call(this,"c")}T(Yp,_t);var Di={},Pw=null;function nl(){return Pw=Pw||new It}Di.La="serverreachability";function xw(c){_t.call(this,Di.La,c)}T(xw,_t);function Ma(c){let d=nl();Nt(d,new xw(d))}Di.STAT_EVENT="statevent";function kw(c,d){_t.call(this,Di.STAT_EVENT,c),this.stat=d}T(kw,_t);function Mt(c){let d=nl();Nt(d,new kw(d,c))}Di.Ma="timingevent";function Ow(c,d){_t.call(this,Di.Ma,c),this.size=d}T(Ow,_t);function Pa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function xa(){this.g=!0}xa.prototype.xa=function(){this.g=!1};function dP(c,d,f,g,C,D){c.info(function(){if(c.g)if(D)for(var O="",Se=D.split("&"),ft=0;ft<Se.length;ft++){var pe=Se[ft].split("=");if(1<pe.length){var Et=pe[0];pe=pe[1];var wt=Et.split("_");O=2<=wt.length&&wt[1]=="type"?O+(Et+"="+pe+"&"):O+(Et+"=redacted&")}}else O=null;else O=D;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+O})}function hP(c,d,f,g,C,D,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+D+" "+O})}function Vo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+pP(c,f)+(g?" "+g:"")})}function fP(c,d){c.info(function(){return"TIMEOUT: "+d})}xa.prototype.info=function(){};function pP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var D=C[0];if(D!="noop"&&D!="stop"&&D!="close")for(var O=1;O<C.length;O++)C[O]=""}}}}return Wp(f)}catch{return d}}var rl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zp;function il(){}T(il,Kp),il.prototype.g=function(){return new XMLHttpRequest},il.prototype.i=function(){return{}},Zp=new il;function jr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vw}function Vw(){this.i=null,this.g="",this.h=!1}var Fw={},Jp={};function Xp(c,d,f){c.L=1,c.v=cl(cr(d)),c.m=f,c.P=!0,jw(c,null)}function jw(c,d){c.F=Date.now(),ol(c),c.A=cr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Xw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new Vw,c.g=yT(c.j,f?d:null,!c.m),0<c.O&&(c.M=new cP(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(Aw[0]=C.toString()),C=Aw);for(var D=0;D<C.length;D++){var O=Ew(f,C[D],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ma(),dP(c.i,c.u,c.A,c.l,c.R,c.m)}jr.prototype.ca=function(c){c=c.target;let d=this.M;d&&ur(c)==3?d.j():this.Y(c)},jr.prototype.Y=function(c){try{if(c==this.g)e:{let wt=ur(this.g);var d=this.g.Ba();let Uo=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||sT(this.g)))){this.J||wt!=4||d==7||(d==8||0>=Uo?Ma(3):Ma(2)),eg(this);var f=this.g.Z();this.X=f;t:if(Uw(this)){var g=sT(this.g);c="";var C=g.length,D=ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ai(this),ka(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(D&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,hP(this.i,this.u,this.A,this.l,this.R,wt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,ft=this.g;if((Se=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Se)){var pe=Se;break t}}pe=null}if(f=pe)Vo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tg(this,f);else{this.o=!1,this.s=3,Mt(12),Ai(this),ka(this);break e}}if(this.P){f=!0;let mn;for(;!this.J&&this.C<O.length;)if(mn=gP(this,O),mn==Jp){wt==4&&(this.s=4,Mt(14),f=!1),Vo(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Fw){this.s=4,Mt(15),Vo(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Vo(this.i,this.l,mn,null),tg(this,mn);if(Uw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||O.length!=0||this.h.h||(this.s=1,Mt(16),f=!1),this.o=this.o&&f,!f)Vo(this.i,this.l,O,"[Invalid Chunked Response]"),Ai(this),ka(this);else if(0<O.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),ag(Et),Et.M=!0,Mt(11))}}else Vo(this.i,this.l,O,null),tg(this,O);wt==4&&Ai(this),this.o&&!this.J&&(wt==4?fT(this.j,this):(this.o=!1,ol(this)))}else PP(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Ai(this),ka(this)}}}catch{}finally{}};function Uw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function gP(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Jp:(f=Number(d.substring(f,g)),isNaN(f)?Fw:(g+=1,g+f>d.length?Jp:(d=d.slice(g,g+f),c.C=g+f,d)))}jr.prototype.cancel=function(){this.J=!0,Ai(this)};function ol(c){c.S=Date.now()+c.I,Bw(c,c.I)}function Bw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Pa(m(c.ba,c),d)}function eg(c){c.B&&(a.clearTimeout(c.B),c.B=null)}jr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(fP(this.i,this.A),this.L!=2&&(Ma(),Mt(17)),Ai(this),this.s=2,ka(this)):Bw(this,this.S-c)};function ka(c){c.j.G==0||c.J||fT(c.j,c)}function Ai(c){eg(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Rw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function tg(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||ng(f.h,c))){if(!c.K&&ng(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)fl(f),dl(f);else break e;sg(f),Mt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Pa(m(f.Za,f),6e3));if(1>=qw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ni(f,11)}else if((c.K||f.g==c)&&fl(f),!$(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let pe=C[d];if(f.T=pe[0],pe=pe[1],f.G==2)if(pe[0]=="c"){f.K=pe[1],f.ia=pe[2];let Et=pe[3];Et!=null&&(f.la=Et,f.j.info("VER="+f.la));let wt=pe[4];wt!=null&&(f.Aa=wt,f.j.info("SVER="+f.Aa));let Uo=pe[5];Uo!=null&&typeof Uo=="number"&&0<Uo&&(g=1.5*Uo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let mn=c.g;if(mn){let gl=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gl){var D=g.h;D.g||gl.indexOf("spdy")==-1&&gl.indexOf("quic")==-1&&gl.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(rg(D,D.h),D.h=null))}if(g.D){let cg=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;cg&&(g.ya=cg,Me(g.I,g.D,cg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=c;if(g.qa=mT(g,g.J?g.ia:null,g.W),O.K){zw(g.h,O);var Se=O,ft=g.L;ft&&(Se.I=ft),Se.B&&(eg(Se),ol(Se)),g.g=O}else dT(g);0<f.i.length&&hl(f)}else pe[0]!="stop"&&pe[0]!="close"||Ni(f,7);else f.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Ni(f,7):og(f):pe[0]!="noop"&&f.l&&f.l.ta(pe),f.v=0)}}Ma(4)}catch{}}var mP=class{constructor(c,d){this.g=c,this.map=d}};function $w(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function qw(c){return c.h?1:c.g?c.g.size:0}function ng(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function rg(c,d){c.g?c.g.add(d):c.h=d}function zw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}$w.prototype.cancel=function(){if(this.i=Gw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Gw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function yP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function vP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Ww(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=vP(c),g=yP(c),C=g.length,D=0;D<C;D++)d.call(void 0,g[D],f&&f[D],c)}var Kw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _P(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var D=c[f].substring(0,g);C=c[f].substring(g+1)}else D=c[f];d(D,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Ri(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ri){this.h=c.h,sl(this,c.j),this.o=c.o,this.g=c.g,al(this,c.s),this.l=c.l;var d=c.i,f=new Va;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Qw(this,f),this.m=c.m}else c&&(d=String(c).match(Kw))?(this.h=!1,sl(this,d[1]||"",!0),this.o=Oa(d[2]||""),this.g=Oa(d[3]||"",!0),al(this,d[4]),this.l=Oa(d[5]||"",!0),Qw(this,d[6]||"",!0),this.m=Oa(d[7]||"")):(this.h=!1,this.i=new Va(null,this.h))}Ri.prototype.toString=function(){var c=[],d=this.j;d&&c.push(La(d,Yw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(La(d,Yw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(La(f,f.charAt(0)=="/"?wP:EP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",La(f,bP)),c.join("")};function cr(c){return new Ri(c)}function sl(c,d,f){c.j=f?Oa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function al(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Qw(c,d,f){d instanceof Va?(c.i=d,CP(c.i,c.h)):(f||(d=La(d,TP)),c.i=new Va(d,c.h))}function Me(c,d,f){c.i.set(d,f)}function cl(c){return Me(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Oa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function La(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,IP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function IP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Yw=/[#\/\?@]/g,EP=/[#\?:]/g,wP=/[#\?]/g,TP=/[#\?@]/g,bP=/#/g;function Va(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ur(c){c.g||(c.g=new Map,c.h=0,c.i&&_P(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Va.prototype,t.add=function(c,d){Ur(this),this.i=null,c=Fo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Zw(c,d){Ur(c),d=Fo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Jw(c,d){return Ur(c),d=Fo(c,d),c.g.has(d)}t.forEach=function(c,d){Ur(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){Ur(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let D=0;D<C.length;D++)f.push(d[g])}return f},t.V=function(c){Ur(this);let d=[];if(typeof c=="string")Jw(this,c)&&(d=d.concat(this.g.get(Fo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Ur(this),this.i=null,c=Fo(this,c),Jw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Xw(c,d,f){Zw(c,d),0<f.length&&(c.i=null,c.g.set(Fo(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let D=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var C=D;O[g]!==""&&(C+="="+encodeURIComponent(String(O[g]))),c.push(C)}}return this.i=c.join("&")};function Fo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function CP(c,d){d&&!c.j&&(Ur(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Zw(this,g),Xw(this,C,f))},c)),c.j=d}function SP(c,d){let f=new xa;if(a.Image){let g=new Image;g.onload=y(Br,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Br,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Br,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Br,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function DP(c,d){let f=new xa,g=new AbortController,C=setTimeout(()=>{g.abort(),Br(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(D=>{clearTimeout(C),D.ok?Br(f,"TestPingServer: ok",!0,d):Br(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Br(f,"TestPingServer: error",!1,d)})}function Br(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function AP(){this.g=new lP}function RP(c,d,f){let g=f||"";try{Ww(c,function(C,D){let O=C;l(C)&&(O=Wp(C)),d.push(g+D+"="+encodeURIComponent(O))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Fa(c){this.l=c.Ub||null,this.j=c.eb||!1}T(Fa,Kp),Fa.prototype.g=function(){return new ul(this.l,this.j)},Fa.prototype.i=function(c){return function(){return c}}({});function ul(c,d){It.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(ul,It),t=ul.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ua(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ja(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;eT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function eT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ja(this):Ua(this),this.readyState==3&&eT(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ja(this))},t.Qa=function(c){this.g&&(this.response=c,ja(this))},t.ga=function(){this.g&&ja(this)};function ja(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ua(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ua(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function tT(c){let d="";return we(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ig(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=tT(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Me(c,d,f))}function Le(c){It.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Le,It);var NP=/^https?$/i,MP=["POST","PUT"];t=Le.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zp.g(),this.v=this.o?Nw(this.o):Nw(Zp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(D){nT(this,D);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let D of g.keys())f.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(MP,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,O]of f)this.g.setRequestHeader(D,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oT(this),this.u=!0,this.g.send(c),this.u=!1}catch(D){nT(this,D)}};function nT(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,rT(c),ll(c)}function rT(c){c.A||(c.A=!0,Nt(c,"complete"),Nt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Nt(this,"complete"),Nt(this,"abort"),ll(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ll(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?iT(this):this.bb())},t.bb=function(){iT(this)};function iT(c){if(c.h&&typeof s<"u"&&(!c.v[1]||ur(c)!=4||c.Z()!=2)){if(c.u&&ur(c)==4)Sw(c.Ea,0,c);else if(Nt(c,"readystatechange"),ur(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var C=String(c.D).match(Kw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!NP.test(C?C.toLowerCase():"")}f=g}if(f)Nt(c,"complete"),Nt(c,"success");else{c.m=6;try{var D=2<ur(c)?c.g.statusText:""}catch{D=""}c.l=D+" ["+c.Z()+"]",rT(c)}}finally{ll(c)}}}}function ll(c,d){if(c.g){oT(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Nt(c,"ready");try{f.onreadystatechange=g}catch{}}}function oT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function ur(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<ur(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),uP(d)}};function sT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function PP(c){let d={};c=(c.g&&2<=ur(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if($(c[g]))continue;var f=b(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let D=d[C]||[];d[C]=D,D.push(f)}w(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ba(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function aT(c){this.Aa=0,this.i=[],this.j=new xa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ba("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ba("baseRetryDelayMs",5e3,c),this.cb=Ba("retryDelaySeedMs",1e4,c),this.Wa=Ba("forwardChannelMaxRetries",2,c),this.wa=Ba("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new $w(c&&c.concurrentRequestLimit),this.Da=new AP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=aT.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){Mt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=mT(this,null,this.W),hl(this)};function og(c){if(cT(c),c.G==3){var d=c.U++,f=cr(c.I);if(Me(f,"SID",c.K),Me(f,"RID",d),Me(f,"TYPE","terminate"),$a(c,f),d=new jr(c,c.j,d),d.L=2,d.v=cl(cr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=yT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ol(d)}gT(c)}function dl(c){c.g&&(ag(c),c.g.cancel(),c.g=null)}function cT(c){dl(c),c.u&&(a.clearTimeout(c.u),c.u=null),fl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function hl(c){if(!Hw(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ca||Iw(),Sa||(Ca(),Sa=!0),Fp.add(d,c),c.B=0}}function xP(c,d){return qw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Pa(m(c.Ga,c,d),pT(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new jr(this,this.j,c),D=this.o;if(this.S&&(D?(D=v(D),E(D,this.S)):D=this.S),this.m!==null||this.O||(C.H=D,D=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=lT(this,C,d),f=cr(this.I),Me(f,"RID",c),Me(f,"CVER",22),this.D&&Me(f,"X-HTTP-Session-Id",this.D),$a(this,f),D&&(this.O?d="headers="+encodeURIComponent(String(tT(D)))+"&"+d:this.m&&ig(f,this.m,D)),rg(this.h,C),this.Ua&&Me(f,"TYPE","init"),this.P?(Me(f,"$req",d),Me(f,"SID","null"),C.T=!0,Xp(C,f,null)):Xp(C,f,d),this.G=2}}else this.G==3&&(c?uT(this,c):this.i.length==0||Hw(this.h)||uT(this))};function uT(c,d){var f;d?f=d.l:f=c.U++;let g=cr(c.I);Me(g,"SID",c.K),Me(g,"RID",f),Me(g,"AID",c.T),$a(c,g),c.m&&c.o&&ig(g,c.m,c.o),f=new jr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=lT(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),rg(c.h,f),Xp(f,g,d)}function $a(c,d){c.H&&we(c.H,function(f,g){Me(d,g,f)}),c.l&&Ww({},function(f,g){Me(d,g,f)})}function lT(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let D=-1;for(;;){let O=["count="+f];D==-1?0<f?(D=C[0].g,O.push("ofs="+D)):D=0:O.push("ofs="+D);let Se=!0;for(let ft=0;ft<f;ft++){let pe=C[ft].g,Et=C[ft].map;if(pe-=D,0>pe)D=Math.max(0,C[ft].g-100),Se=!1;else try{RP(Et,O,"req"+pe+"_")}catch{g&&g(Et)}}if(Se){g=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function dT(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ca||Iw(),Sa||(Ca(),Sa=!0),Fp.add(d,c),c.v=0}}function sg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Pa(m(c.Fa,c),pT(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,hT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Pa(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),dl(this),hT(this))};function ag(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function hT(c){c.g=new jr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=cr(c.qa);Me(d,"RID","rpc"),Me(d,"SID",c.K),Me(d,"AID",c.T),Me(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Me(d,"TO",c.ja),Me(d,"TYPE","xmlhttp"),$a(c,d),c.m&&c.o&&ig(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=cl(cr(d)),f.m=null,f.P=!0,jw(f,c)}t.Za=function(){this.C!=null&&(this.C=null,dl(this),sg(this),Mt(19))};function fl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function fT(c,d){var f=null;if(c.g==d){fl(c),ag(c),c.g=null;var g=2}else if(ng(c.h,d))f=d.D,zw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=nl(),Nt(g,new Ow(g,f)),hl(c)}else dT(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&xP(c,d)||g==2&&sg(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Ni(c,5);break;case 4:Ni(c,10);break;case 3:Ni(c,6);break;default:Ni(c,2)}}}function pT(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Ni(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new Ri(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||sl(g,"https"),cl(g),C?SP(g.toString(),f):DP(g.toString(),f)}else Mt(2);c.G=0,c.l&&c.l.sa(d),gT(c),cT(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function gT(c){if(c.G=0,c.ka=[],c.l){let d=Gw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function mT(c,d,f){var g=f instanceof Ri?cr(f):new Ri(f);if(g.g!="")d&&(g.g=d+"."+g.g),al(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var D=new Ri(null);g&&sl(D,g),d&&(D.g=d),C&&al(D,C),f&&(D.l=f),g=D}return f=c.D,d=c.ya,f&&d&&Me(g,f,d),Me(g,"VER",c.la),$a(c,g),g}function yT(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Le(new Fa({eb:f})):new Le(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vT(){}t=vT.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pl(){}pl.prototype.g=function(c,d){return new Wt(c,d)};function Wt(c,d){It.call(this),this.g=new aT(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!$(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new jo(this)}T(Wt,It),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){og(this.g)},Wt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Wp(c),c=f);d.i.push(new mP(d.Ya++,c)),d.G==3&&hl(d)},Wt.prototype.N=function(){this.g.l=null,delete this.j,og(this.g),delete this.g,Wt.aa.N.call(this)};function _T(c){Qp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}T(_T,Qp);function IT(){Yp.call(this),this.status=1}T(IT,Yp);function jo(c){this.g=c}T(jo,vT),jo.prototype.ua=function(){Nt(this.g,"a")},jo.prototype.ta=function(c){Nt(this.g,new _T(c))},jo.prototype.sa=function(c){Nt(this.g,new IT)},jo.prototype.ra=function(){Nt(this.g,"b")},pl.prototype.createWebChannel=pl.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,q_=Ar.createWebChannelTransport=function(){return new pl},H_=Ar.getStatEventTarget=function(){return nl()},$_=Ar.Event=Di,If=Ar.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rl.NO_ERROR=0,rl.TIMEOUT=8,rl.HTTP_ERROR=6,bu=Ar.ErrorCode=rl,Lw.COMPLETE="complete",B_=Ar.EventType=Lw,Mw.EventType=Na,Na.OPEN="a",Na.CLOSE="b",Na.ERROR="c",Na.MESSAGE="d",It.prototype.listen=It.prototype.K,Ks=Ar.WebChannel=Mw,r$=Ar.FetchXmlHttpFactory=Fa,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,U_=Ar.XhrIo=Le}).apply(typeof _f<"u"?_f:typeof self<"u"?self:typeof window<"u"?window:{});var U0="@firebase/firestore",B0="4.8.0";var dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");var pa="11.10.0";var Do=new Qn("@firebase/firestore");function Qs(){return Do.logLevel}function V(t,...e){if(Do.logLevel<=ae.DEBUG){let n=e.map(xE);Do.debug(`Firestore (${pa}): ${t}`,...n)}}function Nr(t,...e){if(Do.logLevel<=ae.ERROR){let n=e.map(xE);Do.error(`Firestore (${pa}): ${t}`,...n)}}function _i(t,...e){if(Do.logLevel<=ae.WARN){let n=e.map(xE);Do.warn(`Firestore (${pa}): ${t}`,...n)}}function xE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,xR(t,r,n)}function xR(t,e,n){let r=`FIRESTORE (${pa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Nr(r),new Error(r)}function Ee(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||xR(e,i,r)}function Y(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends hn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Zn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Df=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Q_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}},Y_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Z_=class{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new Df(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new dt(e)}},J_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},X_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new J_(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Af=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},eI=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ee(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Af(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Af(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function i$(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function kR(){return new TextEncoder}var Nu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=i$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ie(t,e){return t<e?-1:t>e?1:0}function tI(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ie(r,i);{let o=kR(),s=o$(o.encode($0(t,n)),o.encode($0(e,n)));return s!==0?s:ie(r,i)}}n+=r>65535?2:1}return ie(t.length,e.length)}function $0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function o$(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ie(t[n],e[n]);return ie(t.length,e.length)}function na(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var H0="__name__",Rf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ie(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):tI(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Dr.fromString(e.substring(4,e.length-2))}},ke=class t extends Rf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},s$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rn=class t extends Rf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return s$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H0}static keyField(){return new t([H0])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var B=class t{constructor(e){this.path=e}static fromPath(e){return new t(ke.fromString(e))}static fromName(e){return new t(ke.fromString(e).popFirst(5))}static empty(){return new t(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ke(e.slice()))}};function OR(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function a$(t,e,n,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function q0(t){if(!B.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z0(t){if(B.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function LR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function cp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q(12329,{type:typeof t})}function Jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=cp(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Je(t,e){let n={typeString:t};return e&&(n.value=e),n}function Hu(t,e){if(!LR(t))throw new L(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(M.INVALID_ARGUMENT,n);return!0}var G0=-62135596800,W0=1e6,Xe=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*W0);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<G0)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W0}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hu(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-G0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Je("string",Xe._jsonSchemaVersion),seconds:Je("number"),nanoseconds:Je("number")};var X=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Xe(0,0))}static max(){return new t(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Mu=-1,nI=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};nI.UNKNOWN_ID=-1;function c$(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Ao(i,B.empty(),e)}function u$(t){return new Ao(t.readTime,t.key,Mu)}var Ao=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(X.min(),B.empty(),Mu)}static max(){return new t(X.max(),B.empty(),Mu)}};function l$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}var d$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function ga(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==d$)throw t;V("LocalStore","Unexpectedly lost primary lease")}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function h$(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ma(t){return t.name==="IndexedDbTransactionError"}var kE=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),OE=-1;function up(t){return t==null}function Pu(t){return t===0&&1/t==-1/0}function f$(t){return typeof t=="number"&&Number.isInteger(t)&&!Pu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var VR="";function p$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=K0(e)),e=g$(t.get(n),e);return K0(e)}function g$(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case VR:n+="";break;default:n+=o}}return n}function K0(t){return t+VR+""}var m$="remoteDocuments",FR="owner";var jR="mutationQueues";var UR="mutations";var BR="documentMutations",y$="remoteDocumentsV14";var $R="remoteDocumentGlobal";var HR="targets";var qR="targetDocuments";var zR="targetGlobal",GR="collectionParents";var WR="clientMetadata";var KR="bundles";var QR="namedQueries";var v$="indexConfiguration";var _$="indexState";var I$="indexEntries";var YR="documentOverlays";var E$="globals";var w$=[jR,UR,BR,m$,HR,FR,zR,qR,WR,$R,GR,KR,QR],Kne=[...w$,YR],T$=[jR,UR,BR,y$,HR,FR,zR,qR,WR,$R,GR,KR,QR,YR],b$=T$,C$=[...b$,v$,_$,I$];var Qne=[...C$,E$];function Q0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ci(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ZR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var je=class t{constructor(e,n){this.comparator=e,this.root=n||Xn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xs(this.root,e,this.comparator,!0)}},Xs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};Xn.EMPTY=null,Xn.RED=!0,Xn.BLACK=!1;Xn.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ht=class t{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nf(this.data.getIterator())}getIteratorFrom(e){return new Nf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Nf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var pn=class t{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new t([])}unionWith(e){let n=new ht(rn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return na(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Mf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var At=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Mf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};At.EMPTY_BYTE_STRING=new At("");var S$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mr(t){if(Ee(!!t,39018),typeof t=="string"){let e=0,n=S$.exec(t);if(Ee(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xe(t.seconds),nanos:xe(t.nanos)}}function xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Pr(t){return typeof t=="string"?At.fromBase64String(t):At.fromUint8Array(t)}var JR="server_timestamp",XR="__type__",eN="__previous_value__",tN="__local_write_time__";function LE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[XR])===null||n===void 0?void 0:n.stringValue)===JR}function lp(t){let e=t.mapValue.fields[eN];return LE(e)?lp(e):e}function xu(t){let e=Mr(t.mapValue.fields[tN].timestampValue);return new Xe(e.seconds,e.nanos)}var iI=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Pf="(default)",xf=class t{constructor(e,n){this.projectId=e,this.database=n||Pf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Pf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var VE="__type__",nN="__max__",Ef={mapValue:{fields:{__type__:{stringValue:nN}}}},FE="__vector__",ra="value";function Ii(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?LE(t)?4:iN(t)?9007199254740991:rN(t)?10:11:q(28295,{value:t})}function nr(t,e){if(t===e)return!0;let n=Ii(t);if(n!==Ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xu(t).isEqual(xu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Mr(i.timestampValue),a=Mr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Pr(i.bytesValue).isEqual(Pr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return xe(i.geoPointValue.latitude)===xe(o.geoPointValue.latitude)&&xe(i.geoPointValue.longitude)===xe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return xe(i.integerValue)===xe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=xe(i.doubleValue),a=xe(o.doubleValue);return s===a?Pu(s)===Pu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return na(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Q0(s)!==Q0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!nr(s[u],a[u])))return!1;return!0}(t,e);default:return q(52216,{left:t})}}function ku(t,e){return(t.values||[]).find(n=>nr(n,e))!==void 0}function ia(t,e){if(t===e)return 0;let n=Ii(t),r=Ii(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=xe(o.integerValue||o.doubleValue),u=xe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Y0(t.timestampValue,e.timestampValue);case 4:return Y0(xu(t),xu(e));case 5:return tI(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Pr(o),u=Pr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ie(a[l],u[l]);if(h!==0)return h}return ie(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ie(xe(o.latitude),xe(s.latitude));return a!==0?a:ie(xe(o.longitude),xe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Z0(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[ra])===null||a===void 0?void 0:a.arrayValue,T=(u=m[ra])===null||u===void 0?void 0:u.arrayValue,N=ie(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:Z0(y,T)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Ef.mapValue&&s===Ef.mapValue)return 0;if(o===Ef.mapValue)return 1;if(s===Ef.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=tI(u[p],h[p]);if(m!==0)return m;let y=ia(a[u[p]],l[h[p]]);if(y!==0)return y}return ie(u.length,h.length)}(t.mapValue,e.mapValue);default:throw q(23264,{le:n})}}function Y0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);let n=Mr(t),r=Mr(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function Z0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=ia(n[i],r[i]);if(o)return o}return ie(n.length,r.length)}function oa(t){return oI(t)}function oI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Mr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Pr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return B.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=oI(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${oI(n.fields[s])}`;return i+"}"}(t.mapValue):q(61005,{value:t})}function bf(t){switch(Ii(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=lp(t);return e?16+bf(e):16;case 5:return 2*t.stringValue.length;case 6:return Pr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+bf(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ci(r.fields,(o,s)=>{i+=o.length+bf(s)}),i}(t.mapValue);default:throw q(13486,{value:t})}}function J0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sI(t){return!!t&&"integerValue"in t}function jE(t){return!!t&&"arrayValue"in t}function X0(t){return!!t&&"nullValue"in t}function eR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cf(t){return!!t&&"mapValue"in t}function rN(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[VE])===null||n===void 0?void 0:n.stringValue)===FE}function Su(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ci(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Su(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Su(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nN}var Zne={mapValue:{fields:{[VE]:{stringValue:FE},[ra]:{arrayValue:{}}}}};var nn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Su(n)}setAll(e){let n=rn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Su(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Cf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Cf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ci(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Su(this.value))}};function oN(t){let e=[];return Ci(t.fields,(n,r)=>{let i=new rn([n]);if(Cf(r)){let o=oN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new pn(e)}var On=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,X.min(),X.min(),X.min(),nn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,X.min(),X.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,X.min(),X.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var sa=class{constructor(e,n){this.position=e,this.inclusive=n}};function tR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(s.referenceValue),n.key):r=ia(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function nR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}var Ro=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function D$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var kf=class{},Ze=class t extends kf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cI(e,n,r):n==="array-contains"?new dI(e,r):n==="in"?new hI(e,r):n==="not-in"?new fI(e,r):n==="array-contains-any"?new pI(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uI(e,r):new lI(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ia(n,this.value)):n!==null&&Ii(this.value)===Ii(n)&&this.matchesComparison(ia(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ln=class t extends kf{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return sN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function sN(t){return t.op==="and"}function aN(t){return A$(t)&&sN(t)}function A$(t){for(let e of t.filters)if(e instanceof Ln)return!1;return!0}function aI(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+oa(t.value);if(aN(t))return t.filters.map(e=>aI(e)).join(",");{let e=t.filters.map(n=>aI(n)).join(",");return`${t.op}(${e})`}}function cN(t,e){return t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&nr(r.value,i.value)}(t,e):t instanceof Ln?function(r,i){return i instanceof Ln&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&cN(s,i.filters[a]),!0):!1}(t,e):void q(19439)}function uN(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${oa(n.value)}`}(t):t instanceof Ln?function(n){return n.op.toString()+" {"+n.getFilters().map(uN).join(" ,")+"}"}(t):"Filter"}var cI=class extends Ze{constructor(e,n,r){super(e,n,r),this.key=B.fromName(r.referenceValue)}matches(e){let n=B.comparator(e.key,this.key);return this.matchesComparison(n)}},uI=class extends Ze{constructor(e,n){super(e,"in",n),this.keys=lN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},lI=class extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=lN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function lN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>B.fromName(r.referenceValue))}var dI=class extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return jE(n)&&ku(n.arrayValue,this.value)}},hI=class extends Ze{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ku(this.value.arrayValue,n)}},fI=class extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ku(this.value.arrayValue,n)}},pI=class extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!jE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ku(this.value.arrayValue,r))}};var gI=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function rR(t,e=null,n=[],r=[],i=null,o=null,s=null){return new gI(t,e,n,r,i,o,s)}function UE(t){let e=Y(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>aI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),up(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>oa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>oa(r)).join(",")),e.Pe=n}return e.Pe}function BE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!D$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nR(t.startAt,e.startAt)&&nR(t.endAt,e.endAt)}function mI(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ei=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function R$(t,e,n,r,i,o,s,a){return new Ei(t,e,n,r,i,o,s,a)}function $E(t){return new Ei(t)}function iR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dN(t){return t.collectionGroup!==null}function Du(t){let e=Y(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ht(rn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ro(o,r))}),n.has(rn.keyField().canonicalString())||e.Te.push(new Ro(rn.keyField(),r))}return e.Te}function er(t){let e=Y(t);return e.Ie||(e.Ie=N$(e,Du(t))),e.Ie}function N$(t,e){if(t.limitType==="F")return rR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ro(i.field,o)});let n=t.endAt?new sa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new sa(t.startAt.position,t.startAt.inclusive):null;return rR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yI(t,e){let n=t.filters.concat([e]);return new Ei(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vI(t,e,n){return new Ei(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dp(t,e){return BE(er(t),er(e))&&t.limitType===e.limitType}function hN(t){return`${UE(er(t))}|lt:${t.limitType}`}function Ys(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>uN(i)).join(", ")}]`),up(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>oa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>oa(i)).join(",")),`Target(${r})`}(er(t))}; limitType=${t.limitType})`}function hp(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Du(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=tR(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Du(r),i)||r.endAt&&!function(s,a,u){let l=tR(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Du(r),i))}(t,e)}function M$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fN(t){return(e,n)=>{let r=!1;for(let i of Du(t)){let o=P$(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function P$(t,e,n){let r=t.field.isKeyField()?B.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?ia(u,l):q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:t.dir})}}var xr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ci(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return ZR(this.inner)}size(){return this.innerSize}};var x$=new je(B.comparator);function kr(){return x$}var pN=new je(B.comparator);function Cu(...t){let e=pN;for(let n of t)e=e.insert(n.key,n);return e}function gN(t){let e=pN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function wo(){return Au()}function mN(){return Au()}function Au(){return new xr(t=>t.toString(),(t,e)=>t.isEqual(e))}var k$=new je(B.comparator),O$=new ht(B.comparator);function le(...t){let e=O$;for(let n of t)e=e.add(n);return e}var L$=new ht(ie);function V$(){return L$}function HE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(e)?"-0":e}}function yN(t){return{integerValue:""+t}}function F$(t,e){return f$(e)?yN(e):HE(t,e)}var aa=class{constructor(){this._=void 0}};function j$(t,e,n){return t instanceof ca?function(i,o){let s={fields:{[XR]:{stringValue:JR},[tN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&LE(o)&&(o=lp(o)),o&&(s.fields[eN]=o),{mapValue:s}}(n,e):t instanceof No?_N(t,e):t instanceof Mo?IN(t,e):function(i,o){let s=vN(i,o),a=oR(s)+oR(i.Ee);return sI(s)&&sI(i.Ee)?yN(a):HE(i.serializer,a)}(t,e)}function U$(t,e,n){return t instanceof No?_N(t,e):t instanceof Mo?IN(t,e):n}function vN(t,e){return t instanceof ua?function(r){return sI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var ca=class extends aa{},No=class extends aa{constructor(e){super(),this.elements=e}};function _N(t,e){let n=EN(e);for(let r of t.elements)n.some(i=>nr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Mo=class extends aa{constructor(e){super(),this.elements=e}};function IN(t,e){let n=EN(e);for(let r of t.elements)n=n.filter(i=>!nr(i,r));return{arrayValue:{values:n}}}var ua=class extends aa{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function oR(t){return xe(t.integerValue||t.doubleValue)}function EN(t){return jE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function B$(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof No&&i instanceof No||r instanceof Mo&&i instanceof Mo?na(r.elements,i.elements,nr):r instanceof ua&&i instanceof ua?nr(r.Ee,i.Ee):r instanceof ca&&i instanceof ca}(t.transform,e.transform)}var _I=class{constructor(e,n){this.version=e,this.transformResults=n}},Rr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Sf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var la=class{};function wN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ou(t.key,Rr.none()):new Po(t.key,t.data,Rr.none());{let n=t.data,r=nn.empty(),i=new ht(rn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new rr(t.key,r,new pn(i.toArray()),Rr.none())}}function $$(t,e,n){t instanceof Po?function(i,o,s){let a=i.value.clone(),u=aR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof rr?function(i,o,s){if(!Sf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=aR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(TN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ru(t,e,n,r){return t instanceof Po?function(o,s,a,u){if(!Sf(o.precondition,s))return a;let l=o.value.clone(),h=cR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof rr?function(o,s,a,u){if(!Sf(o.precondition,s))return a;let l=cR(o.fieldTransforms,u,s),h=s.data;return h.setAll(TN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return Sf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function H$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=vN(r.transform,i||null);o!=null&&(n===null&&(n=nn.empty()),n.set(r.field,o))}return n||null}function sR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&na(r,i,(o,s)=>B$(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Po=class extends la{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},rr=class extends la{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function TN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function aR(t,e,n){let r=new Map;Ee(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,U$(s,a,n[i]))}return r}function cR(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,j$(o,s,e))}return r}var Ou=class extends la{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},II=class extends la{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var EI=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&$$(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ru(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ru(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=mN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=wN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&na(this.mutations,e.mutations,(n,r)=>sR(n,r))&&na(this.baseMutations,e.baseMutations,(n,r)=>sR(n,r))}},wI=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ee(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return k$}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var TI=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var bI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Qe,he;function q$(t){switch(t){case M.OK:return q(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return q(15467,{code:t})}}function bN(t){if(t===void 0)return Nr("GRPC error has no .code"),M.UNKNOWN;switch(t){case Qe.OK:return M.OK;case Qe.CANCELLED:return M.CANCELLED;case Qe.UNKNOWN:return M.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return M.INTERNAL;case Qe.UNAVAILABLE:return M.UNAVAILABLE;case Qe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Qe.NOT_FOUND:return M.NOT_FOUND;case Qe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Qe.ABORTED:return M.ABORTED;case Qe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Qe.DATA_LOSS:return M.DATA_LOSS;default:return q(39323,{code:t})}}(he=Qe||(Qe={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var uR=null;var z$=new Dr([4294967295,4294967295],0);function lR(t){let e=kR().encode(t),n=new j_;return n.update(e),new Uint8Array(n.digest())}function dR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Dr([n,r],0),new Dr([i,o],0)]}var CI=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new To(`Invalid padding: ${n}`);if(r<0)throw new To(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new To(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new To(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Dr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Dr.fromNumber(r)));return i.compare(z$)===1&&(i=new Dr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=lR(e),[r,i]=dR(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=lR(e),[r,i]=dR(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},To=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Of=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(X.min(),i,new je(ie),kr(),le())}},Lu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var ea=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},Lf=class{constructor(e,n){this.targetId=e,this.De=n}},Vf=class{constructor(e,n,r=At.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ff=class{constructor(){this.ve=0,this.Ce=hR(),this.Fe=At.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=le(),n=le(),r=le();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new Lu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=hR()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},SI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=kr(),this.je=wf(),this.Je=wf(),this.He=new je(ie)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(mI(o))if(r===0){let s=new B(o.path);this.Xe(n,s,On.newNoDocument(s,X.min()))}else Ee(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}uR?.ct(function(h,p,m,y,T){var N,R,k,$,Q,Ce;let Rt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},we=p.unchangedNames;return we&&(Rt.bloomFilter={applied:T===0,hashCount:(N=we?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:($=(k=(R=we?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&$!==void 0?$:0,padding:(Ce=(Q=we?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&Ce!==void 0?Ce:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),Rt}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Pr(r).toUint8Array()}catch(u){if(u instanceof Mf)return _i("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new CI(s,i,o)}catch(u){return _i(u instanceof To?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&mI(a.target)){let u=new B(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,On.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=le();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Of(e,n,this.He,this.ze,r);return this.ze=kr(),this.je=wf(),this.Je=wf(),this.He=new je(ie),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Ff,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new ht(ie),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new ht(ie),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ff),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function wf(){return new je(B.comparator)}function hR(){return new je(B.comparator)}var G$={asc:"ASCENDING",desc:"DESCENDING"},W$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K$={and:"AND",or:"OR"},DI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function AI(t,e){return t.useProto3Json||up(e)?e:{value:e}}function jf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Q$(t,e){return jf(t,e.toTimestamp())}function tr(t){return Ee(!!t,49232),X.fromTimestamp(function(n){let r=Mr(n);return new Xe(r.seconds,r.nanos)}(t))}function qE(t,e){return RI(t,e).canonicalString()}function RI(t,e){let n=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function SN(t){let e=ke.fromString(t);return Ee(MN(e),10190,{key:e.toString()}),e}function NI(t,e){return qE(t.databaseId,e.path)}function z_(t,e){let n=SN(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(AN(n))}function DN(t,e){return qE(t.databaseId,e)}function Y$(t){let e=SN(t);return e.length===4?ke.emptyPath():AN(e)}function MI(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AN(t){return Ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function fR(t,e,n){return{name:NI(t,e),fields:n.value.mapValue.fields}}function Z$(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Ee(h===void 0||typeof h=="string",58123),At.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),At.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:bN(l.code);return new L(h,l.message||"")}(s);n=new Vf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=z_(t,r.document.name),o=tr(r.document.updateTime),s=r.document.createTime?tr(r.document.createTime):X.min(),a=new nn({mapValue:{fields:r.document.fields}}),u=On.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ea(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=z_(t,r.document),o=r.readTime?tr(r.readTime):X.min(),s=On.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ea([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=z_(t,r.document),o=r.removedTargetIds||[];n=new ea([],o,i,null)}else{if(!("filter"in e))return q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new bI(i,o),a=r.targetId;n=new Lf(a,s)}}return n}function J$(t,e){let n;if(e instanceof Po)n={update:fR(t,e.key,e.value)};else if(e instanceof Ou)n={delete:NI(t,e.key)};else if(e instanceof rr)n={update:fR(t,e.key,e.data),updateMask:aH(e.fieldMask)};else{if(!(e instanceof II))return q(16599,{Rt:e.type});n={verify:NI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof ca)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof No)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ua)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw q(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Q$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)}(t,e.precondition)),n}function X$(t,e){return t&&t.length>0?(Ee(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?tr(i.updateTime):tr(o);return s.isEqual(X.min())&&(s=tr(o)),new _I(s,i.transformResults||[])}(n,e))):[]}function eH(t,e){return{documents:[DN(t,e.path)]}}function tH(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DN(t,i);let o=function(l){if(l.length!==0)return NN(Ln.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Zs(m.field),direction:iH(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=AI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:n,parent:i}}function nH(t){let e=Y$(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ee(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let m=RN(p);return m instanceof Ln&&aN(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(T){return new Ro(Js(T.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,up(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new sa(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new sa(y,m)}(n.endAt)),R$(e,i,s,o,a,"F",u,l)}function rH(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function RN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Js(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Js(n.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Js(n.unaryFilter.field);return Ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Js(n.unaryFilter.field);return Ze.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Js(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ln.create(n.compositeFilter.filters.map(r=>RN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}}(n.compositeFilter.op))}(t):q(30097,{filter:t})}function iH(t){return G$[t]}function oH(t){return W$[t]}function sH(t){return K$[t]}function Zs(t){return{fieldPath:t.canonicalString()}}function Js(t){return rn.fromServerFormat(t.fieldPath)}function NN(t){return t instanceof Ze?function(n){if(n.op==="=="){if(eR(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NAN"}};if(X0(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eR(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NOT_NAN"}};if(X0(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zs(n.field),op:oH(n.op),value:n.value}}}(t):t instanceof Ln?function(n){let r=n.getFilters().map(i=>NN(i));return r.length===1?r[0]:{compositeFilter:{op:sH(n.op),filters:r}}}(t):q(54877,{filter:t})}function aH(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function MN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Vu=class t{constructor(e,n,r,i,o=X.min(),s=X.min(),a=At.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var PI=class{constructor(e){this.gt=e}};function cH(t){let e=nH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vI(e,e.limit,"L"):e}var Uf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(xe(e.integerValue));else if("doubleValue"in e){let r=xe(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Pu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Mr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Pr(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?iN(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):rN(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):q(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=ra,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(xe(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),B.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Uf.Ut=new Uf;var xI=class{constructor(){this.Dn=new kI}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Ao.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Ao.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},kI=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ht(ke.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ht(ke.comparator)).toArray()}};var Jne=new Uint8Array(0);var pR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PN=41943040,fn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(PN,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);var Fu=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var gR="LruGarbageCollector",uH=1048576;function mR([t,e],[n,r]){let i=ie(t,n);return i===0?ie(e,r):i}var OI=class{constructor(e){this.Tr=e,this.buffer=new ht(mR),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();mR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},LI=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(gR,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ma(n)?V(gR,"Ignoring IndexedDB error during garbage collection: ",n):await ga(n)}await this.Rr(3e5)})}},VI=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(kE.ue);let r=new OI(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(pR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pR):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Qs()<=ae.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function lH(t,e){return new VI(t,e)}var FI=class{constructor(){this.changes=new xr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var jI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var UI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ru(r.mutation,i,pn.empty(),Xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=wo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Cu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=wo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=kr(),s=Au(),a=function(){return Au()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof rr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ru(h.mutation,l,h.mutation.getFieldMask(),Xe.now())):s.set(l.key,pn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new jI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Au(),i=new je((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||pn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||le()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=mN();h.forEach(m=>{if(!o.has(m)){let y=wN(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return B.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(wo()),a=Mu,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:a,changes:gN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(r=>{let i=Cu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Cu();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=function(p,m){return new Ei(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,On.newInvalidDocument(h)))});let a=Cu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Ru(h.mutation,l,pn.empty(),Xe.now()),hp(n,l)&&(a=a.insert(u,l))}),a})}};var BI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:tr(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:cH(i.bundledQuery),readTime:tr(i.readTime)}}(n)),P.resolve()}};var $I=class{constructor(){this.overlays=new je(B.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=wo();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=wo(),o=n.length+1,s=new B(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new je((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=wo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=wo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new TI(n,r));let o=this.kr.get(n);o===void 0&&(o=le(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var HI=class{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var ju=class{constructor(){this.qr=new ht(Ye.Qr),this.$r=new ht(Ye.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Ye(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ye(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new B(new ke([])),r=new Ye(n,e),i=new Ye(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new B(new ke([])),r=new Ye(n,e),i=new Ye(n,e+1),o=le();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ye(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ye=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return B.comparator(e.key,n.key)||ie(e.Hr,n.Hr)}static Ur(e,n){return ie(e.Hr,n.Hr)||B.comparator(e.key,n.key)}};var qI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new ht(Ye.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new EI(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ye(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?OE:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ye(n,0),i=new Ye(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ht(ie);return n.forEach(i=>{let o=new Ye(i,0),s=new Ye(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let s=new Ye(new B(o),0),a=new ht(ie);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ee(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new Ye(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Ye(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var zI=class{constructor(e){this.ni=e,this.docs=function(){return new je(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():On.newInvalidDocument(n))}getEntries(e,n){let r=kr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():On.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=kr(),s=n.path,a=new B(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||l$(u$(h),r)<=0||(i.has(h.key)||hp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){q(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new GI(this)}getSize(e){return P.resolve(this.size)}},GI=class extends FI{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var WI=class{constructor(e){this.persistence=e,this.ii=new xr(n=>UE(n),BE),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.si=0,this.oi=new ju,this.targetCount=0,this._i=Fu.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Fu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var Bf=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new kE(0),this.ci=!1,this.ci=!0,this.li=new HI,this.referenceDelegate=e(this),this.hi=new WI(this),this.indexManager=new xI,this.remoteDocumentCache=function(i){return new zI(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new PI(n),this.Ti=new BI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $I,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new qI(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new KI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},KI=class extends rI{constructor(e){super(),this.currentSequenceNumber=e}},QI=class t{constructor(e){this.persistence=e,this.Ai=new ju,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw q(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=B.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,X.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},$f=class t{constructor(e,n){this.persistence=e,this.gi=new xr(r=>p$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=lH(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,X.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=bf(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var YI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=le(),i=le();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var ZI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var JI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return GA()?8:h$(tn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ZI;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Qs()<=ae.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Ys(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Qs()<=ae.DEBUG&&V("QueryEngine","Query:",Ys(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Qs()<=ae.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Ys(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(n))):P.resolve())}ps(e,n){if(iR(n))return P.resolve(null);let r=er(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vI(n,null,"F"),r=er(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,vI(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return iR(n)||i.isEqual(X.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(Qs()<=ae.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ys(n)),this.vs(e,s,n,c$(i,Mu)).next(a=>a))})}bs(e,n){let r=new ht(fN(e));return n.forEach((i,o)=>{hp(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Qs()<=ae.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Ys(n)),this.gs.getDocumentsMatchingQuery(e,n,Ao.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var zE="LocalStore",dH=3e8,XI=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new je(ie),this.Ms=new xr(o=>UE(o),BE),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function hH(t,e,n,r){return new XI(t,e,n,r)}async function xN(t,e){let n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=le();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function fH(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(T=>{y=y.next(()=>h.getEntry(u,T)).next(N=>{let R=l.docVersions.get(T);Ee(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function kN(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function pH(t,e){let n=Y(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(At.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=dH?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=kr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(gH(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(X.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function gH(t,e,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=kr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(zE,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function mH(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=OE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yH(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Vu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function eE(t,e,n){let r=Y(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ma(s))throw s;V(zE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function yR(t,e,n){let r=Y(t),i=X.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=Y(u),m=p.Ms.get(h);return m!==void 0?P.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)}(r,s,er(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:X.min(),n?o:le())).next(a=>(vH(r,M$(e),a),{documents:a,qs:o})))}function vH(t,e,n){let r=t.xs.get(e)||X.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var Hf=class{constructor(){this.activeTargetIds=V$()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var tE=class{constructor(){this.Fo=new Hf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Hf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var nE=class{xo(e){}shutdown(){}};var vR="ConnectivityMonitor",qf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(vR,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(vR,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Tf=null;function rE(){return Tf===null?Tf=function(){return 268435456+Math.round(2147483648*Math.random())}():Tf++,"0x"+Tf.toString(16)}var G_="RestConnection",_H={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},iE=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Pf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=rE(),a=this.Go(e,n.toUriEncodedString());V(G_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=ho(l);return this.jo(e,a,u,r,h).then(p=>(V(G_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw _i(G_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=_H[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var oE=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Dt="WebChannelConnection",sE=class extends iE{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=rE();return new Promise((a,u)=>{let l=new U_;l.setWithCredentials(!0),l.listenOnce(B_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case bu.NO_ERROR:let p=l.getResponseJson();V(Dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case bu.TIMEOUT:V(Dt,`RPC '${e}' ${s} timed out`),u(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case bu.HTTP_ERROR:let m=l.getStatus();if(V(Dt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let N=function(k){let $=k.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf($)>=0?$:M.UNKNOWN}(T.status);u(new L(N,T.message))}else u(new L(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(M.UNAVAILABLE,"Connection failed."));break;default:q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V(Dt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(Dt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=rE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=q_(),a=H_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(Dt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,T=new oE({Ho:R=>{y?V(Dt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(V(Dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(Dt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,k,$)=>{R.listen(k,Q=>{try{$(Q)}catch(Ce){setTimeout(()=>{throw Ce},0)}})};return N(p,Ks.EventType.OPEN,()=>{y||(V(Dt,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),N(p,Ks.EventType.CLOSE,()=>{y||(y=!0,V(Dt,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(p))}),N(p,Ks.EventType.ERROR,R=>{y||(y=!0,_i(Dt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),T.__(new L(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ks.EventType.MESSAGE,R=>{var k;if(!y){let $=R.data[0];Ee(!!$,16349);let Q=$,Ce=Q?.error||((k=Q[0])===null||k===void 0?void 0:k.error);if(Ce){V(Dt,`RPC '${e}' stream ${i} received error:`,Ce);let Rt=Ce.status,we=function(I){let E=Qe[I];if(E!==void 0)return bN(E)}(Rt),w=Ce.message;we===void 0&&(we=M.INTERNAL,w="Unknown error status: "+Rt+" with message "+Ce.message),y=!0,T.__(new L(we,w)),p.close()}else V(Dt,`RPC '${e}' stream ${i} received:`,$),T.a_($)}}),N(a,$_.STAT_EVENT,R=>{R.stat===If.PROXY?V(Dt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===If.NOPROXY&&V(Dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function W_(){return typeof document<"u"?document:null}function fp(t){return new DI(t,!0)}var zf=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var _R="PersistentStream",Gf=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new zf(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Nr(n.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return V(_R,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(V(_R,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},aE=class extends Gf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=Z$(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?tr(s.readTime):X.min()}(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=MI(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=mI(u)?{documents:eH(o,u)}:{query:tH(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=CN(o,s.resumeToken);let l=AI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=jf(o,s.snapshotVersion.toTimestamp());let l=AI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=rH(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=MI(this.serializer),n.removeTarget=e,this.k_(n)}},cE=class extends Gf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=X$(e.writeResults,e.commitTime),r=tr(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=MI(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>J$(this.serializer,r))};this.k_(n)}};var uE=class{},lE=class extends uE{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,RI(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,RI(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},dE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Nr(n),this._a=!1):V("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var xo="RemoteStore",hE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{ko(this)&&(V(xo,"Restarting streams for network reachability change."),await async function(u){let l=Y(u);l.Ia.add(4),await qu(l),l.Aa.set("Unknown"),l.Ia.delete(4),await pp(l)}(this))})}),this.Aa=new dE(r,i)}};async function pp(t){if(ko(t))for(let e of t.da)await e(!0)}async function qu(t){for(let e of t.da)await e(!1)}function ON(t,e){let n=Y(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),QE(n)?KE(n):ya(n).x_()&&WE(n,e))}function GE(t,e){let n=Y(t),r=ya(n);n.Ta.delete(e),r.x_()&&LN(n,e),n.Ta.size===0&&(r.x_()?r.B_():ko(n)&&n.Aa.set("Unknown"))}function WE(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ya(t).H_(e)}function LN(t,e){t.Ra.$e(e),ya(t).Y_(e)}function KE(t){t.Ra=new SI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),ya(t).start(),t.Aa.aa()}function QE(t){return ko(t)&&!ya(t).M_()&&t.Ta.size>0}function ko(t){return Y(t).Ia.size===0}function VN(t){t.Ra=void 0}async function IH(t){t.Aa.set("Online")}async function EH(t){t.Ta.forEach((e,n)=>{WE(t,e)})}async function wH(t,e){VN(t),QE(t)?(t.Aa.la(e),KE(t)):t.Aa.set("Unknown")}async function TH(t,e,n){if(t.Aa.set("Online"),e instanceof Vf&&e.state===2&&e.cause)try{await async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){V(xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wf(t,r)}else if(e instanceof ea?t.Ra.Ye(e):e instanceof Lf?t.Ra.it(e):t.Ra.et(e),!n.isEqual(X.min()))try{let r=await kN(t.localStore);n.compareTo(r)>=0&&await function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(At.EMPTY_BYTE_STRING,h.snapshotVersion)),LN(o,u);let p=new Vu(h.target,u,l,h.sequenceNumber);WE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){V(xo,"Failed to raise snapshot:",r),await Wf(t,r)}}async function Wf(t,e,n){if(!ma(e))throw e;t.Ia.add(1),await qu(t),t.Aa.set("Offline"),n||(n=()=>kN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{V(xo,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await pp(t)})}function FN(t,e){return e().catch(n=>Wf(t,n,e))}async function gp(t){let e=Y(t),n=wi(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:OE;for(;bH(e);)try{let i=await mH(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,CH(e,i)}catch(i){await Wf(e,i)}jN(e)&&UN(e)}function bH(t){return ko(t)&&t.Pa.length<10}function CH(t,e){t.Pa.push(e);let n=wi(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function jN(t){return ko(t)&&!wi(t).M_()&&t.Pa.length>0}function UN(t){wi(t).start()}async function SH(t){wi(t).na()}async function DH(t){let e=wi(t);for(let n of t.Pa)e.X_(n.mutations)}async function AH(t,e,n){let r=t.Pa.shift(),i=wI.from(r,e,n);await FN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await gp(t)}async function RH(t,e){e&&wi(t).Z_&&await async function(r,i){if(function(s){return q$(s)&&s!==M.ABORTED}(i.code)){let o=r.Pa.shift();wi(r).N_(),await FN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await gp(r)}}(t,e),jN(t)&&UN(t)}async function IR(t,e){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),V(xo,"RemoteStore received new credentials");let r=ko(n);n.Ia.add(3),await qu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await pp(n)}async function NH(t,e){let n=Y(t);e?(n.Ia.delete(2),await pp(n)):e||(n.Ia.add(2),await qu(n),n.Aa.set("Unknown"))}function ya(t){return t.Va||(t.Va=function(n,r,i){let o=Y(n);return o.ia(),new aE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:IH.bind(null,t),e_:EH.bind(null,t),n_:wH.bind(null,t),J_:TH.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),QE(t)?KE(t):t.Aa.set("Unknown")):(await t.Va.stop(),VN(t))})),t.Va}function wi(t){return t.ma||(t.ma=function(n,r,i){let o=Y(n);return o.ia(),new cE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:SH.bind(null,t),n_:RH.bind(null,t),ea:DH.bind(null,t),ta:AH.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await gp(t)):(await t.ma.stop(),t.Pa.length>0&&(V(xo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}var fE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function YE(t,e){if(Nr("AsyncQueue",`${e}: ${t}`),ma(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Kf=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||B.comparator(n.key,r.key):(n,r)=>B.comparator(n.key,r.key),this.keyedMap=Cu(),this.sortedSet=new je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Qf=class{constructor(){this.fa=new je(B.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):q(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},da=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Kf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var pE=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},gE=class{constructor(){this.queries=ER(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=Y(n),o=i.queries;i.queries=ER(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function ER(){return new xr(t=>hN(t),dp)}async function BN(t,e){let n=Y(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new pE,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=YE(s,`Initialization of query '${Ys(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&ZE(n)}async function $N(t,e){let n=Y(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function MH(t,e){let n=Y(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&ZE(n)}function PH(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function ZE(t){t.Da.forEach(e=>{e.next()})}var mE,wR;(wR=mE||(mE={})).Fa="default",wR.Cache="cache";var Yf=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new da(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==mE.Cache}};var Zf=class{constructor(e){this.key=e}},Jf=class{constructor(e){this.key=e}},yE=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=le(),this.mutatedKeys=le(),this.Xa=fN(e),this.eu=new Kf(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Qf,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=hp(this.query,p)?p:null,T=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?T!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,T){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{At:R})}};return N(y)-N(T)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new da(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Qf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=le(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Jf(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Zf(r))}),n}uu(e){this.Ha=e.qs,this.Za=le();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return da.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},JE="SyncEngine",vE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},_E=class{constructor(e){this.key=e,this.lu=!1}},IE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new xr(a=>hN(a),dp),this.Tu=new Map,this.Iu=new Set,this.du=new je(B.comparator),this.Eu=new Map,this.Au=new ju,this.Ru={},this.Vu=new Map,this.mu=Fu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function xH(t,e,n=!0){let r=KN(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await HN(r,e,n,!0),i}async function kH(t,e){let n=KN(t);await HN(n,e,!0,!1)}async function HN(t,e,n,r){let i=await yH(t.localStore,er(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await OH(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&ON(t.remoteStore,i),a}async function OH(t,e,n,r,i){t.gu=(p,m,y)=>async function(N,R,k,$){let Q=R.view.nu(k);Q.Ds&&(Q=await yR(N.localStore,R.query,!1).then(({documents:w})=>R.view.nu(w,Q)));let Ce=$&&$.targetChanges.get(R.targetId),Rt=$&&$.targetMismatches.get(R.targetId)!=null,we=R.view.applyChanges(Q,N.isPrimaryClient,Ce,Rt);return bR(N,R.targetId,we._u),we.snapshot}(t,p,m,y);let o=await yR(t.localStore,e,!0),s=new yE(e,o.qs),a=s.nu(o.documents),u=Lu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);bR(t,n,l._u);let h=new vE(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot}async function LH(t,e,n){let r=Y(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!dp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await eE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&GE(r.remoteStore,i.targetId),EE(r,i.targetId)}).catch(ga)):(EE(r,i.targetId),await eE(r.localStore,i.targetId,!0))}async function VH(t,e){let n=Y(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),GE(n.remoteStore,r.targetId))}async function FH(t,e,n){let r=zH(t);try{let i=await function(s,a){let u=Y(s),l=Xe.now(),h=a.reduce((y,T)=>y.add(T.key),le()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=kr(),N=le();return u.Os.getEntries(y,h).next(R=>{T=R,T.forEach((k,$)=>{$.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(R=>{p=R;let k=[];for(let $ of a){let Q=H$($,p.get($.key).overlayedDocument);Q!=null&&k.push(new rr($.key,Q,oN(Q.value.mapValue),Rr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:gN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new je(ie)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,n),await zu(r,i.changes),await gp(r.remoteStore)}catch(i){let o=YE(i,"Failed to persist write");n.reject(o)}}async function qN(t,e){let n=Y(t);try{let r=await pH(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ee(s.lu,14607):i.removedDocuments.size>0&&(Ee(s.lu,42227),s.lu=!1))}),await zu(n,r,e)}catch(r){await ga(r)}}function TR(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=Y(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&ZE(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jH(t,e,n){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new je(B.comparator);s=s.insert(o,On.newNoDocument(o,X.min()));let a=le().add(o),u=new Of(X.min(),new Map,new je(ie),s,a);await qN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),XE(r)}else await eE(r.localStore,e,!1).then(()=>EE(r,e,n)).catch(ga)}async function UH(t,e){let n=Y(t),r=e.batch.batchId;try{let i=await fH(n.localStore,e);GN(n,r,null),zN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zu(n,i)}catch(i){await ga(i)}}async function BH(t,e,n){let r=Y(t);try{let i=await function(s,a){let u=Y(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ee(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);GN(r,e,n),zN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zu(r,i)}catch(i){await ga(i)}}function zN(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function GN(t,e,n){let r=Y(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function EE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||WN(t,r)})}function WN(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(GE(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),XE(t))}function bR(t,e,n){for(let r of n)r instanceof Zf?(t.Au.addReference(r.key,e),$H(t,r)):r instanceof Jf?(V(JE,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||WN(t,r.key)):q(19791,{yu:r})}function $H(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(V(JE,"New document in limbo: "+n),t.Iu.add(r),XE(t))}function XE(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new B(ke.fromString(e)),r=t.mu.next();t.Eu.set(r,new _E(n)),t.du=t.du.insert(n,r),ON(t.remoteStore,new Vu(er($E(n.path)),r,"TargetPurposeLimboResolution",kE.ue))}}async function zu(t,e,n){let r=Y(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=YI.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await async function(u,l){let h=Y(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!ma(p))throw p;V(zE,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),T=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(T);h.Fs=h.Fs.insert(m,N)}}}(r.localStore,o))}async function HH(t,e){let n=Y(t);if(!n.currentUser.isEqual(e)){V(JE,"User change. New user:",e.toKey());let r=await xN(n.localStore,e);n.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zu(n,r.Bs)}}function qH(t,e){let n=Y(t),r=n.Eu.get(e);if(r&&r.lu)return le().add(r.key);{let i=le(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function KN(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jH.bind(null,e),e.hu.J_=MH.bind(null,e.eventManager),e.hu.pu=PH.bind(null,e.eventManager),e}function zH(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BH.bind(null,e),e}var QN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=fp(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)}Cu(n,r){return null}Fu(n,r){return null}vu(n){return hH(this.persistence,new JI,n.initialUser,this.serializer)}Du(n){return new Bf(QI.Vi,this.serializer)}bu(n){return new tE}async terminate(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),wE=class extends QN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ee(this.persistence.referenceDelegate instanceof $f,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new LI(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new Bf(r=>$f.Vi(r,n),this.serializer)}};var GH=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>TR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=HH.bind(null,this.syncEngine),await NH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return function(){return new gE}()}createDatastore(n){let r=fp(n.databaseInfo.databaseId),i=function(s){return new sE(s)}(n.databaseInfo);return function(s,a,u,l){return new lE(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new hE(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>TR(this.syncEngine,r,0),function(){return qf.C()?new qf:new nE}())}createSyncEngine(n,r){return function(o,s,a,u,l,h,p){let m=new IE(o,s,a,u,l,h);return p&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){var n,r;await async function(o){let s=Y(o);V(xo,"RemoteStore shutting down."),s.Ia.add(5),await qu(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return t.provider={build:()=>new t},t})();var Xf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Ti="FirestoreClient",TE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=Nu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{V(Ti,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(V(Ti,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=YE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function K_(t,e){t.asyncQueue.verifyOperationInProgress(),V(Ti,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await xN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{_i("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{_i("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function CR(t,e){t.asyncQueue.verifyOperationInProgress();let n=await WH(t);V(Ti,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>IR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>IR(e.remoteStore,i)),t._onlineComponents=e}async function WH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V(Ti,"Using user provided OfflineComponentProvider");try{await K_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;_i("Error using user provided cache. Falling back to memory cache: "+n),await K_(t,new QN)}}else V(Ti,"Using default OfflineComponentProvider"),await K_(t,new wE(void 0));return t._offlineComponents}async function YN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(V(Ti,"Using user provided OnlineComponentProvider"),await CR(t,t._uninitializedComponentsProvider._online)):(V(Ti,"Using default OnlineComponentProvider"),await CR(t,new GH))),t._onlineComponents}function KH(t){return YN(t).then(e=>e.syncEngine)}async function bE(t){let e=await YN(t),n=e.eventManager;return n.onListen=xH.bind(null,e.syncEngine),n.onUnlisten=LH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=VH.bind(null,e.syncEngine),n}function QH(t,e,n={}){let r=new Zn;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){let h=new Xf({next:m=>{h.Ou(),s.enqueueAndForget(()=>$N(o,p)),m.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Yf(a,h,{includeMetadataChanges:!0,ka:!0});return BN(o,p)}(await bE(t),t.asyncQueue,e,n,r)),r.promise}function ZN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var SR=new Map;var JN="firestore.googleapis.com",DR=!0,ep=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=JN,this.ssl=DR}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:DR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uH)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ha=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ep({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ep(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Q_;switch(r.type){case"firstParty":return new X_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=SR.get(n);r&&(V("ComponentProvider","Removing Datastore"),SR.delete(n),r.terminate())}(this),Promise.resolve()}};function XN(t,e,n,r={}){var i;t=Jn(t,ha);let o=ho(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(e_(`https://${u}`),t_("Firestore",!0)),s.host!==JN&&s.host!==u&&_i("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!fo(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=dt.MOCK_USER;else{h=BA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new dt(m)}t._authCredentials=new Y_(new Df(h,p))}}var bi=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},vt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Hu(n,t._jsonSchema))return new t(e,r||null,new B(ke.fromString(n.referencePath)))}};vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:Je("string",vt._jsonSchemaVersion),referencePath:Je("string")};var gi=class t extends bi{constructor(e,n,r){super(e,n,$E(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new B(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function eM(t,e,...n){if(t=yt(t),OR("collection","path",e),t instanceof ha){let r=ke.fromString(e,...n);return z0(r),new gi(t,null,r)}{if(!(t instanceof vt||t instanceof gi))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ke.fromString(e,...n));return z0(r),new gi(t.firestore,null,r)}}function ew(t,e,...n){if(t=yt(t),arguments.length===1&&(e=Nu.newId()),OR("doc","path",e),t instanceof ha){let r=ke.fromString(e,...n);return q0(r),new vt(t,null,new B(r))}{if(!(t instanceof vt||t instanceof gi))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ke.fromString(e,...n));return q0(r),new vt(t.firestore,t instanceof gi?t.converter:null,new B(r))}}var AR="AsyncQueue",tp=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new zf(this,"async_queue_retry"),this.oc=()=>{let r=W_();r&&V(AR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=W_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=W_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Zn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ma(e))throw e;V(AR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Nr("INTERNAL UNHANDLED ERROR: ",RR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=fE.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&q(47125,{hc:RR(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function RR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function NR(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Or=class extends ha{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new tp,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new tp(e),this._firestoreClient=void 0,await e}}};function tM(t,e){let n=typeof t=="object"?t:zs(),r=typeof t=="string"?t:e||Pf,i=ef(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=jA("firestore");o&&XN(i,...o)}return i}function tw(t){if(t._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||YH(t),t._firestoreClient}function YH(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new iI(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ZN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new TE(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var mi=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(At.fromBase64String(e))}catch(n){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hu(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};mi._jsonSchemaVersion="firestore/bytes/1.0",mi._jsonSchema={type:Je("string",mi._jsonSchemaVersion),bytes:Je("string")};var fa=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Uu=class{constructor(e){this._methodName=e}};var yi=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Hu(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};yi._jsonSchemaVersion="firestore/geoPoint/1.0",yi._jsonSchema={type:Je("string",yi._jsonSchemaVersion),latitude:Je("number"),longitude:Je("number")};var vi=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hu(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new L(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};vi._jsonSchemaVersion="firestore/vectorValue/1.0",vi._jsonSchema={type:Je("string",vi._jsonSchemaVersion),vectorValues:Je("object")};var ZH=/^__.*__$/,CE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Po(e,this.data,n,this.fieldTransforms)}},np=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function nM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ec:t})}}var SE=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ip(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(nM(this.Ec)&&ZH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},DE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fp(e)}Dc(e,n,r,i=!1){return new SE({Ec:e,methodName:n,bc:r,path:rn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function nw(t){let e=t._freezeSettings(),n=fp(t._databaseId);return new DE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function JH(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);rw("Data must be an object, but it was:",s,r);let a=rM(r,s),u,l;if(o.merge)u=new pn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=AE(e,p,n);if(!s.contains(m))throw new L(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);oM(h,m)||h.push(m)}u=new pn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new CE(new nn(a),u,l)}var rp=class t extends Uu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function XH(t,e,n,r){let i=t.Dc(1,e,n);rw("Data must be an object, but it was:",i,r);let o=[],s=nn.empty();Ci(r,(u,l)=>{let h=iw(e,u,n);l=yt(l);let p=i.gc(h);if(l instanceof rp)o.push(h);else{let m=Gu(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new pn(o);return new np(s,a,i.fieldTransforms)}function eq(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[AE(e,r,n)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(AE(e,o[m])),u.push(o[m+1]);let l=[],h=nn.empty();for(let m=a.length-1;m>=0;--m)if(!oM(l,a[m])){let y=a[m],T=u[m];T=yt(T);let N=s.gc(y);if(T instanceof rp)l.push(y);else{let R=Gu(T,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new pn(l);return new np(h,p,s.fieldTransforms)}function tq(t,e,n,r=!1){return Gu(n,t.Dc(r?4:3,e))}function Gu(t,e){if(iM(t=yt(t)))return rw("Unsupported field value:",e,t),rM(t,e);if(t instanceof Uu)return function(r,i){if(!nM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Gu(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return F$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Xe.fromDate(r);return{timestampValue:jf(i.serializer,o)}}if(r instanceof Xe){let o=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jf(i.serializer,o)}}if(r instanceof yi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof mi)return{bytesValue:CN(i.serializer,r._byteString)};if(r instanceof vt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vi)return function(s,a){return{mapValue:{fields:{[VE]:{stringValue:FE},[ra]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return HE(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${cp(r)}`)}(t,e)}function rM(t,e){let n={};return ZR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ci(t,(r,i)=>{let o=Gu(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function iM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof yi||t instanceof mi||t instanceof vt||t instanceof Uu||t instanceof vi)}function rw(t,e,n){if(!iM(n)||!LR(n)){let r=cp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function AE(t,e,n){if((e=yt(e))instanceof fa)return e._internalPath;if(typeof e=="string")return iw(t,e);throw ip("Field path arguments must be of type string or ",t,!1,void 0,n)}var nq=new RegExp("[~\\*/\\[\\]]");function iw(t,e,n){if(e.search(nq)>=0)throw ip(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fa(...e.split("."))._internalPath}catch{throw ip(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ip(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+t+u)}function oM(t,e){return t.some(n=>n.isEqual(e))}var op=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new RE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(mp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},RE=class extends op{data(){return super.data()}};function mp(t,e){return typeof e=="string"?iw(t,e):e instanceof fa?e._internalPath:e._delegate._internalPath}function sM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bu=class{},sp=class extends Bu{};function aM(t,e,...n){let r=[];e instanceof Bu&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof NE).length,a=o.filter(u=>u instanceof ap).length;if(s>1||s>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var ap=class t extends sp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return lM(e._query,n),new bi(e.firestore,e.converter,yI(e._query,n))}_parse(e){let n=nw(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){PR(p,h);let T=[];for(let N of p)T.push(MR(u,o,N));m={arrayValue:{values:T}}}else m=MR(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||PR(p,h),m=tq(a,s,p,h==="in"||h==="not-in");return Ze.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function cM(t,e,n){let r=e,i=mp("where",t);return ap._create(i,r,n)}var NE=class t extends Bu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)lM(s,u),s=yI(s,u)}(e._query,n),new bi(e.firestore,e.converter,yI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ME=class t extends sp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ro(o,s)}(e._query,this._field,this._direction);return new bi(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ei(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function uM(t,e="asc"){let n=e,r=mp("orderBy",t);return ME._create(r,n)}function MR(t,e,n){if(typeof(n=yt(n))=="string"){if(n==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dN(e)&&n.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ke.fromString(n));if(!B.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return J0(t,new B(r))}if(n instanceof vt)return J0(t,n._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cp(n)}.`)}function PR(t,e){if(!Array.isArray(t)||t.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lM(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var PE=class{convertValue(e,n="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ci(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[ra].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>xe(s.doubleValue));return new vi(o)}convertGeoPoint(e){return new yi(xe(e.latitude),xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=lp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){let n=Mr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ke.fromString(e);Ee(MN(r),9688,{name:e});let i=new xf(r.get(1),r.get(3)),o=new B(r.popFirst(5));return i.isEqual(n)||Nr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function rq(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var bo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Co=class t extends op{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ta(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(mp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Co._jsonSchemaVersion="firestore/documentSnapshot/1.0",Co._jsonSchema={type:Je("string",Co._jsonSchemaVersion),bundleSource:Je("string","DocumentSnapshot"),bundleName:Je("string"),bundle:Je("string")};var ta=class extends Co{data(e={}){return super.data(e)}},So=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ta(this._firestore,this._userDataWriter,r.key,r,new bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ta(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ta(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:iq(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function iq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:t})}}So._jsonSchemaVersion="firestore/querySnapshot/1.0",So._jsonSchema={type:Je("string",So._jsonSchemaVersion),bundleSource:Je("string","QuerySnapshot"),bundleName:Je("string"),bundle:Je("string")};var $u=class extends PE{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}};function dM(t){t=Jn(t,bi);let e=Jn(t.firestore,Or),n=tw(e),r=new $u(e);return sM(t._query),QH(n,t._query).then(i=>new So(e,r,t,i))}function hM(t,e,n,...r){t=Jn(t,vt);let i=Jn(t.firestore,Or),o=nw(i),s;return s=typeof(e=yt(e))=="string"||e instanceof fa?eq(o,"updateDoc",t._key,e,n,r):XH(o,"updateDoc",t._key,e),ow(i,[s.toMutation(t._key,Rr.exists(!0))])}function fM(t){return ow(Jn(t.firestore,Or),[new Ou(t._key,Rr.none())])}function pM(t,e){let n=Jn(t.firestore,Or),r=ew(t),i=rq(t.converter,e);return ow(n,[JH(nw(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Rr.exists(!1))]).then(()=>r)}function gM(t,...e){var n,r,i;t=yt(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||NR(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(NR(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof vt)l=Jn(t.firestore,Or),h=$E(t._key.path),u={next:p=>{e[s]&&e[s](oq(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Jn(t,bi);l=Jn(p.firestore,Or),h=p._query;let m=new $u(l);u={next:y=>{e[s]&&e[s](new So(l,m,p,y))},error:e[s+1],complete:e[s+2]},sM(t._query)}return function(m,y,T,N){let R=new Xf(N),k=new Yf(y,R,T);return m.asyncQueue.enqueueAndForget(async()=>BN(await bE(m),k)),()=>{R.Ou(),m.asyncQueue.enqueueAndForget(async()=>$N(await bE(m),k))}}(tw(l),h,a,u)}function ow(t,e){return function(r,i){let o=new Zn;return r.asyncQueue.enqueueAndForget(async()=>FH(await KH(r),i,o)),o.promise}(tw(t),e)}function oq(t,e,n){let r=n.docs.get(e._key),i=new $u(t);return new Co(t,i,e._key,r,new bo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){pa=i})(qs),xn(new Ft("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Or(new Z_(r.getProvider("auth-internal")),new eI(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xf(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),$e(U0,B0,e),$e(U0,B0,"esm2017")})();var Oo=class{constructor(e){return e}},mM="firestore",sw=class{constructor(){return Ws(mM)}};var aw=new U("angularfire2.firestore-instances");function sq(t,e){let n=rf(mM,t,e);return n&&new Oo(n)}function aq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Oo(r)}}var cq={provide:sw,deps:[[new Ir,aw]]},uq={provide:Oo,useFactory:sq,deps:[[new Ir,aw],vo]};function nie(t,...e){return $e("angularfire",mo.full,"fst"),In([uq,cq,{provide:aw,useFactory:aq(t),multi:!0,deps:[Re,rt,yo,yu,[new Ir,vf],[new Ir,sf],...e]}])}var yp=St(pM,!0,2);var vp=St(eM,!0,2);var yM=St(fM,!0,2);var cw=St(ew,!0,2);var Lo=St(dM,!0);var rie=St(tM,!0);var _p=St(gM,!0);var Wu=St(uM,!0,2),ir=St(aM,!0,2);var vM=St(hM,!0,2);var va=St(cM,!0,2);var Ip=class t{firestore=A(Oo);promptsCollection=vp(this.firestore,"prompts");categoriesCollection=vp(this.firestore,"categories");tagsCollection=vp(this.firestore,"tags");prompts=De([]);categories=De([]);tags=De([]);isLoading=De(!1);error=De(null);constructor(){this.initializeRealtimeListeners()}async getPrompts(){try{this.isLoading.set(!0),this.error.set(null);let e=await Lo(ir(this.promptsCollection,Wu("fecha_creacion","desc"))),n=this.mapQuerySnapshotToPrompts(e);return this.prompts.set(n),n}catch(e){let n=`Error al obtener prompts: ${e}`;return this.error.set(n),console.error(n),[]}finally{this.isLoading.set(!1)}}async getPromptById(e){try{this.error.set(null);let n=ir(this.promptsCollection,va("slug","==",e)),r=await Lo(n);if(r.empty)return null;let i=r.docs[0];return i.exists()?this.mapDocumentToPrompt(i.id,i.data()):null}catch(n){let r=`Error al obtener prompt ${e}: ${n}`;return this.error.set(r),console.error(r),null}}async createPrompt(e){try{this.error.set(null);let n=G(x({},e),{fecha_creacion:new Date});return(await yp(this.promptsCollection,n)).id}catch(n){let r=`Error al crear prompt: ${n}`;return this.error.set(r),console.error(r),null}}async updatePrompt(e,n){try{this.error.set(null);let r=cw(this.firestore,"prompts",e);return await vM(r,G(x({},n),{fechaModificacion:new Date})),!0}catch(r){let i=`Error al actualizar prompt ${e}: ${r}`;return this.error.set(i),console.error(i),!1}}async deletePrompt(e){try{this.error.set(null);let n=cw(this.firestore,"prompts",e);return await yM(n),!0}catch(n){let r=`Error al eliminar prompt ${e}: ${n}`;return this.error.set(r),console.error(r),!1}}async searchPrompts(e){try{this.error.set(null);let n=e.toLowerCase();return(await this.getPrompts()).filter(i=>i.titulo.toLowerCase().includes(n)||i.prompt.toLowerCase().includes(n)||i.descripcion.toLowerCase().includes(n)||i.categoria.toLowerCase().includes(n)||i.tags.some(o=>o.toLowerCase().includes(n)))}catch(n){let r=`Error en b\xFAsqueda: ${n}`;return this.error.set(r),console.error(r),[]}}async getPromptsByCategory(e){try{this.error.set(null);let n=ir(this.promptsCollection,va("categoria","==",e)),r=await Lo(n);return this.mapQuerySnapshotToPrompts(r)}catch(n){let r=`Error al obtener prompts por categor\xEDa: ${n}`;return this.error.set(r),console.error(r),[]}}async getPromptsByTag(e){try{this.error.set(null);let n=ir(this.promptsCollection,va("tags","array-contains",e)),r=await Lo(n);return this.mapQuerySnapshotToPrompts(r)}catch(n){let r=`Error al obtener prompts por tag: ${n}`;return this.error.set(r),console.error(r),[]}}async getCategoryBySlug(e){try{this.error.set(null);let n=ir(this.categoriesCollection,va("slug","==",e)),r=await Lo(n);if(r.empty)return null;let i=r.docs[0];return i.exists()?this.mapDocumentToCategory(i.id,i.data()):null}catch(n){let r=`Error al obtener category ${e}: ${n}`;return this.error.set(r),console.error(r),null}}async getTagBySlug(e){try{this.error.set(null);let n=ir(this.tagsCollection,va("slug","==",e)),r=await Lo(n);if(r.empty)return null;let i=r.docs[0];return i.exists()?this.mapDocumentToTag(i.id,i.data()):null}catch(n){let r=`Error al obtener tag ${e}: ${n}`;return this.error.set(r),console.error(r),null}}async migrateLocalData(e){try{this.isLoading.set(!0),this.error.set(null);let n=[];e.forEach(s=>{let a=s.categoria.toLowerCase(),u=n.find(h=>h.name===a);if(u){u.prompt_count++;return}let l={name:a,slug:this.generateSlug(a),fecha_creacion:new Date,prompt_count:1};n.push(l)});let r=n.map(s=>{let a={name:s.name,slug:s.slug,fecha_creacion:s.fecha_creacion,prompt_count:s.prompt_count};return yp(this.categoriesCollection,a)});await Promise.all(r);let i=[];e.forEach(s=>{s.tags.forEach(a=>{let u=a.toLowerCase(),l=i.find(p=>p.name===u);if(l){l.prompt_count++;return}let h={name:u,slug:this.generateSlug(u),fecha_creacion:new Date,prompt_count:1};i.push(h)})});let o=i.map(s=>{let a={name:s.name,slug:s.slug,fecha_creacion:s.fecha_creacion,prompt_count:s.prompt_count};return yp(this.tagsCollection,a)});return await Promise.all(o),console.log("Migraci\xF3n completada exitosamente"),!0}catch(n){let r=`Error en migraci\xF3n: ${n}`;return this.error.set(r),console.error(r),!1}finally{this.isLoading.set(!1)}}initializeRealtimeListeners(){_p(ir(this.promptsCollection,Wu("fecha_creacion","desc")),e=>{let n=this.mapQuerySnapshotToPrompts(e);this.prompts.set(n)},e=>{console.error("Error en listener de prompts:",e),this.error.set(`Error en sincronizaci\xF3n: ${e}`)}),_p(ir(this.categoriesCollection,Wu("name","asc")),e=>{let n=this.mapQuerySnapshotToCategories(e);this.categories.set(n)},e=>{console.error("Error en listener de categories:",e),this.error.set(`Error en sincronizaci\xF3n: ${e}`)}),_p(ir(this.tagsCollection,Wu("prompt_count","desc")),e=>{let n=this.mapQuerySnapshotToTags(e);this.tags.set(n)},e=>{console.error("Error en listener de tags:",e),this.error.set(`Error en sincronizaci\xF3n: ${e}`)})}mapQuerySnapshotToPrompts(e){return e.docs.map(n=>this.mapDocumentToPrompt(n.id,n.data()))}mapQuerySnapshotToCategories(e){return e.docs.map(n=>this.mapDocumentToCategory(n.id,n.data()))}mapQuerySnapshotToTags(e){return e.docs.map(n=>this.mapDocumentToTag(n.id,n.data()))}mapDocumentToPrompt(e,n){return{id:e,old_id:n.old_id?parseInt(n.old_id):void 0,titulo:n.titulo||"",prompt:n.prompt||"",descripcion:n.descripcion||"",autor:n.autor||"",categoria:n.categoria||"",tags:n.tags||[],uso:n.uso||"texto",idioma:n.idioma||"es-AR",fecha_creacion:n.fecha_creacion?.toDate()||new Date,slug:n.slug||this.generateSlug(n.titulo||""),fecha_edicion:n.fecha_edicion?.toDate()||new Date,modelo:n.modelo,ejemplo:n.ejemplo,fuente:n.fuente,referencias:n.referencias,notas:n.notas,estado:n.estado,version:n.version,comentarios:n.comentarios,feedback:n.feedback,rating:n.rating,visibilidad:n.visibilidad,licencia:n.licencia}}mapDocumentToCategory(e,n){return{id:e,name:n.name||"",slug:n.slug||this.generateSlug(n.name||""),prompt_count:Number(n.prompt_count)||0,fecha_creacion:n.fecha_creacion?.toDate()||new Date}}mapDocumentToTag(e,n){return{id:e,name:n.name||"",slug:n.slug||this.generateSlug(n.name||""),prompt_count:Number(n.prompt_count)||0,fecha_creacion:n.fecha_creacion?.toDate()||new Date}}generateSlug(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var Lr=class t{firestoreService=A(Ip);prompts=ot(()=>this.firestoreService.prompts());categories=ot(()=>this.mapFirestoreCategoriesToNavigationItems());tags=ot(()=>this.mapFirestoreTagsToNavigationItems());isLoading=ot(()=>this.firestoreService.isLoading());error=ot(()=>this.firestoreService.error());search(e,n=!0){return this.searchInFirestore(e,n)}async byCategory(e){return this.firestoreService.getCategoryBySlug(e).then(async r=>{if(!r)throw new Error(`No se encontr\xF3 la categor\xEDa '${e}'.`);let i=await this.firestoreService.getPromptsByCategory(r.name);return{name:this.titleCase(r.name),prompts:i}})}async byTag(e){return this.firestoreService.getTagBySlug(e).then(async r=>{if(!r)throw new Error(`No se encontr\xF3 la categor\xEDa '${e}'.`);let i=await this.firestoreService.getPromptsByTag(r.name);return{name:this.titleCase(r.name),prompts:i}})}async byId(e){let n=await this.firestoreService.getPromptById(e);if(!n)throw new Error(`No se encontr\xF3 un prompt '${e}'.`);return n}async searchInFirestore(e,n){try{let i=(await this.firestoreService.searchPrompts(e)).map(o=>({item:o,foundIn:"titulo",position:0,relevanceScore:1}));return{search:e,found:i}}catch(r){return console.error("Error en b\xFAsqueda de Firestore:",r),{search:e,found:[]}}}mapFirestoreCategoriesToNavigationItems(){return this.firestoreService.categories().map(e=>({text:e.name,slug:e.slug,cantidad:e.prompt_count,prompts:[]}))}mapFirestoreTagsToNavigationItems(){return this.firestoreService.tags().map(e=>({text:e.name,slug:e.slug,cantidad:e.prompt_count,prompts:[]}))}titleCase(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};var lq=[[["","drawer-title",""]],"*"],dq=["[drawer-title]","*"],_M=class t{constructor(e){this.renderer=e;this.setListeners()}isOpen=De(!1);removeDocumentClickListenerFn=null;removeDocumentEscapeListenerFn=null;show(){this.isOpen()!==!0&&(this.isOpen.set(!0),this.setListeners())}hide(){this.isOpen()&&(this.isOpen.set(!1),this.removeDocumentClickListenerFn?.(),this.removeDocumentEscapeListenerFn?.())}onClick(){this.hide()}setListeners(){this.isOpen()===!0&&(this.removeDocumentClickListenerFn=this.renderer.listen("document","click",()=>this.hide()),this.removeDocumentEscapeListenerFn=this.renderer.listen("document","keydown.escape",()=>this.hide(),{passive:!0}))}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeDocumentEscapeListenerFn?.()}static \u0275fac=function(n){return new(n||t)(ge(Dn))};static \u0275cmp=de({type:t,selectors:[["pd-drawer"],["","pd-drawer",""]],ngContentSelectors:dq,decls:7,vars:4,consts:[[1,"drawer","shadow-lg/60","dark:shadow-lg/70","md:shadow-sm/40","md:dark:shadow-md/70","fixed","md:top-14","top-0","z-14","dark:shadow-black","shadow-black/80","bg-drawer","bottom-0","overflow-hidden",3,"click"],[1,"bg-drawer-header","absolute","top-0","left-0","right-0","h-14","z-20","flex","items-center","pl-4","pr-5"],[1,"w-full","absolute","top-14","bottom-0","right-0","overflow-x-hidden","overflow-y-auto"],[1,"pt-4","h-full"],[1,"fixed","md:hidden","top-0","left-0","z-12","bg-black/10","dark:bg-black/20","block","opacity-100","w-screen","h-screen"]],template:function(n,r){n&1&&(rv(lq),Tt(0,"div",0),Ds("click",function(o){return o.stopPropagation()}),Tt(1,"h5",1),dh(2),bt(),Tt(3,"div",2)(4,"div",3),dh(5,1),bt()()(),ai(6,"div",4)),n&2&&(ln("open",r.isOpen()),_e(6),ln("hidden",!r.isOpen()))},encapsulation:2})};var gn=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ne({type:t,selectors:[["button","pdHeaderButton",""]],hostAttrs:[1,"h-10","min-w-10","flex","items-center","justify-center","rounded-md","hover:bg-button-hover","transition-colors","text-header-contrast"]})};var _a=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ne({type:t,selectors:[["","pdTruncate",""]],hostAttrs:[1,"w-full","inline-block","truncate"]})};var fq={menu:"M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z",back:"m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z",search:"M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z",copy:"M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z",share:"M680-80q-50 0-85-35t-35-85q0-6 3-28L282-392q-16 15-37 23.5t-45 8.5q-50 0-85-35t-35-85q0-50 35-85t85-35q24 0 45 8.5t37 23.5l281-164q-2-7-2.5-13.5T560-760q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35q-24 0-45-8.5T598-672L317-508q2 7 2.5 13.5t.5 14.5q0 8-.5 14.5T317-452l281 164q16-15 37-23.5t45-8.5q50 0 85 35t35 85q0 50-35 85t-85 35Z","dark-mode":"M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z","light-mode":"M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z",close:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z",link:"M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z"},Gt=class t{elementRef=A(Yt);renderer=A(Dn);icon=fe.required({alias:"pdIcon"});size=fe(24);fill=fe("currentColor");ngOnInit(){this.createSvgIcon()}createSvgIcon(){let e=fq[this.icon()];if(!e){this.elementRef.nativeElement.innerHTML="",console.warn(`Icon "${this.icon()}" not found`);return}let n=this.renderer.createElement("svg","http://www.w3.org/2000/svg");this.renderer.setAttribute(n,"height",`${this.size()}px`),this.renderer.setAttribute(n,"width",`${this.size()}px`),this.renderer.setAttribute(n,"viewBox","0 -960 960 960"),this.renderer.setAttribute(n,"fill",this.fill());let r=this.renderer.createElement("path","http://www.w3.org/2000/svg");this.renderer.setAttribute(r,"d",e),this.renderer.appendChild(n,r),this.renderer.appendChild(this.elementRef.nativeElement,n)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ne({type:t,selectors:[["","pdIcon",""]],inputs:{icon:[1,"pdIcon","icon"],size:[1,"size"],fill:[1,"fill"]}})};var pq=["pdHeaderBackButton",""],Si=class t{back=Jt();onClick(e){this.back.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["button","pdHeaderBackButton",""]],hostAttrs:["title","Volver","aria-label","Volver"],hostBindings:function(n,r){n&1&&be("click",function(o){return r.onClick(o)})},outputs:{back:"back"},features:[An([gn])],attrs:pq,decls:1,vars:0,consts:[["pdIcon","back"]],template:function(n,r){n&1&&mt(0,"span",0)},dependencies:[Gt],encapsulation:2})};var Vr=class t{get height(){return this.actualHeight()}double=De(!1);actualHeight=ot(()=>this.double()?"h-30":"h-14");static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ne({type:t,selectors:[["","pdHeaderLayout",""]],hostAttrs:[1,"sticky","left-0","top-0","z-10","bg-header"],hostVars:2,hostBindings:function(n,r){n&2&&sv(r.height)}})},Ep=class t extends Vr{constructor(){super(),this.double.set(!0)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ne({type:t,selectors:[["","pdDoubleHeaderLayout",""]],features:[Er]})},or=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ne({type:t,selectors:[["","pdHeaderContent",""]],hostAttrs:[1,"px-3","flex","flex-col","justify-center","gap-1","bg-header"]})},sr=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ne({type:t,selectors:[["","pdHeaderRow",""]],hostAttrs:[1,"flex","items-center","overflow-hidden","justify-between","gap-2","h-14"]})};var IM=class t{constructor(e){this.router=e;let n=this.router.parseUrl(this.router.lastSuccessfulNavigation?.initialUrl?.toString()||"/");this.lastParams=n.queryParams,this.lastUrl=n.toString().split("?")[0]||"/"}lastUrl;lastParams;titulo=fe("Elemento");subtitulo=fe("Informaci\xF3n detallada del elemento");copyPrompt=Jt();share=Jt();onCopyPrompt(e){this.copyPrompt.emit(e)}onBack(e){e.stopPropagation(),this.router.navigate([this.lastUrl],{queryParams:this.lastParams})}onShare(e){this.share.emit(e)}static \u0275fac=function(n){return new(n||t)(ge(zt))};static \u0275cmp=de({type:t,selectors:[["pd-detail-header"],["","pd-detail-header",""]],inputs:{titulo:[1,"titulo"],subtitulo:[1,"subtitulo"]},outputs:{copyPrompt:"copyPrompt",share:"share"},features:[An([Ep])],decls:14,vars:4,consts:[["pdHeaderContent",""],["pdHeaderRow","",1,"-mb-2"],["pdHeaderBackButton","",3,"back"],[1,"w-full"],[1,"flex","items-center"],["pdHeaderButton","","title","Copiar el prompt","aria-label","Copiar el prompt",3,"click"],["pdIcon","copy"],["pdHeaderButton","","title","Compartir el prompt","aria-label","Compartir el prompt",3,"click"],["pdIcon","share"],[1,"overflow-hidden","w-full","px-3"],["pdTruncate","",1,"text-header-contrast","text-[1.75rem]/9",3,"title"],["pdTruncate","",1,"text-header-low-contrast","text-sm",3,"title"]],template:function(n,r){n&1&&(Te(0,"div",0)(1,"div",1)(2,"button",2),be("back",function(o){return r.onBack(o)}),Ie(),mt(3,"div",3),Te(4,"div",4)(5,"button",5),be("click",function(o){return r.onCopyPrompt(o)}),mt(6,"span",6),Ie(),Te(7,"button",7),be("click",function(o){return r.onShare(o)}),mt(8,"span",8),Ie()()(),Te(9,"div",9)(10,"h1",10),Ke(11),Ie(),Te(12,"div",11),Ke(13),Ie()()()),n&2&&(_e(10),gt("title",r.titulo()),_e(),Zt(" ",r.titulo()," "),_e(),gt("title",r.subtitulo()),_e(),Zt(" ",r.subtitulo()," "))},dependencies:[Gt,gn,Si,or,sr,_a],encapsulation:2})};var Tp=class t{store=A(Kh);darkMode=De(this.store.get("darkMode")??this.darkModeSystem());setDarkMode(e){this.darkMode.set(e)}toggle(){this.darkMode.set(!this.darkMode())}constructor(){ph(()=>this.apply(this.darkMode()))}apply(e){this.store.save("darkMode",e),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");let n=document.querySelector("meta[name='color-scheme']");if(n)n.setAttribute("content",e?"dark light":"light");else{let r=document.createElement("meta");r.setAttribute("name","color-scheme"),r.setAttribute("content",e?"dark light":"light"),document.head.appendChild(r)}}darkModeSystem(){return window.matchMedia("(prefers-color-scheme: dark)").matches}static \u0275fac=function(n){return new(n||t)};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};function gq(t,e){t&1&&mt(0,"span",1)}function mq(t,e){t&1&&mt(0,"span",2)}var bp=class t{modeService=A(Tp);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-mode-toggle"]],decls:3,vars:1,consts:[["pdHeaderButton","",3,"click"],["pdIcon","light-mode"],["pdIcon","dark-mode"]],template:function(n,r){n&1&&(Te(0,"button",0),be("click",function(){return r.modeService.toggle()}),kc(1,gq,1,0,"span",1)(2,mq,1,0,"span",2),Ie()),n&2&&(_e(),Oc(r.modeService.darkMode()===!0?1:2))},dependencies:[Gt,gn],encapsulation:2})};var DM=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(ge(Dn),ge(Yt))};static \u0275dir=Ne({type:t})}return t})(),yq=(()=>{class t extends DM{static \u0275fac=(()=>{let n;return function(i){return(n||(n=bs(t)))(i||t)}})();static \u0275dir=Ne({type:t,features:[Er]})}return t})(),AM=new U("");var vq={provide:AM,useExisting:Bi(()=>Rp),multi:!0};function _q(){let t=dn()?dn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Iq=new U(""),Rp=(()=>{class t extends DM{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!_q())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(ge(Dn),ge(Yt),ge(Iq,8))};static \u0275dir=Ne({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&be("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[hh([vq]),Er]})}return t})();var Eq=new U(""),wq=new U("");function RM(t){return t!=null}function NM(t){return io(t)?Oe(t):t}function MM(t){let e={};return t.forEach(n=>{e=n!=null?x(x({},e),n):e}),Object.keys(e).length===0?null:e}function PM(t,e){return e.map(n=>n(t))}function Tq(t){return!t.validate}function xM(t){return t.map(e=>Tq(e)?e:n=>e.validate(n))}function bq(t){if(!t)return null;let e=t.filter(RM);return e.length==0?null:function(n){return MM(PM(n,e))}}function kM(t){return t!=null?bq(xM(t)):null}function Cq(t){if(!t)return null;let e=t.filter(RM);return e.length==0?null:function(n){let r=PM(n,e).map(NM);return wg(r).pipe(se(MM))}}function OM(t){return t!=null?Cq(xM(t)):null}function EM(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function LM(t){return t._rawValidators}function VM(t){return t._rawAsyncValidators}function uw(t){return t?Array.isArray(t)?t:[t]:[]}function Sp(t,e){return Array.isArray(t)?t.includes(e):t===e}function wM(t,e){let n=uw(e);return uw(t).forEach(i=>{Sp(n,i)||n.push(i)}),n}function TM(t,e){return uw(e).filter(n=>!Sp(t,n))}var lw=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=OM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}};var Ju=class extends lw{_parent=null;name=null;valueAccessor=null},dw=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Sq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Coe=G(x({},Sq),{"[class.ng-submitted]":"isSubmitted"}),FM=(()=>{class t extends dw{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(ge(Ju,2))};static \u0275dir=Ne({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ln("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Er]})}return t})();var Ku="VALID",Cp="INVALID",Ia="PENDING",Qu="DISABLED",wa=class{},Dp=class extends wa{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Yu=class extends wa{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Zu=class extends wa{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Ea=class extends wa{status;source;constructor(e,n){super(),this.status=e,this.source=n}};function Dq(t){return(Np(t)?t.validators:t)||null}function Aq(t){return Array.isArray(t)?kM(t):t||null}function Rq(t,e){return(Np(e)?e.asyncValidators:t)||null}function Nq(t){return Array.isArray(t)?OM(t):t||null}function Np(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var hw=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Rn(this.statusReactive)}set status(e){Rn(()=>this.statusReactive.set(e))}_status=ot(()=>this.statusReactive());statusReactive=De(void 0);get valid(){return this.status===Ku}get invalid(){return this.status===Cp}get pending(){return this.status==Ia}get disabled(){return this.status===Qu}get enabled(){return this.status!==Qu}errors;get pristine(){return Rn(this.pristineReactive)}set pristine(e){Rn(()=>this.pristineReactive.set(e))}_pristine=ot(()=>this.pristineReactive());pristineReactive=De(!0);get dirty(){return!this.pristine}get touched(){return Rn(this.touchedReactive)}set touched(e){Rn(()=>this.touchedReactive.set(e))}_touched=ot(()=>this.touchedReactive());touchedReactive=De(!1);get untouched(){return!this.touched}_events=new Ue;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(TM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(TM(e,this._rawAsyncValidators))}hasValidator(e){return Sp(this._rawValidators,e)}hasAsyncValidator(e){return Sp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(G(x({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Zu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Zu(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(G(x({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Yu(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Yu(!0,r))}markAsPending(e={}){this.status=Ia;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ea(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(G(x({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Qu,this.errors=null,this._forEachChild(i=>{i.disable(G(x({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dp(this.value,r)),this._events.next(new Ea(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(G(x({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ku,this._forEachChild(r=>{r.enable(G(x({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(G(x({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ku||this.status===Ia)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dp(this.value,n)),this._events.next(new Ea(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(G(x({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qu:Ku}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Ia,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=NM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ea(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new We,this.statusChanges=new We}_calculateStatus(){return this._allControlsDisabled()?Qu:this.errors?Cp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ia)?Ia:this._anyControlsHaveStatus(Cp)?Cp:Ku}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Yu(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Zu(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Np(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Aq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Nq(this._rawAsyncValidators)}};var jM=new U("",{providedIn:"root",factory:()=>fw}),fw="always";function Mq(t,e,n=fw){xq(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Oq(t,e),Vq(t,e),Lq(t,e),Pq(t,e)}function bM(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),kq(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ap(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Pq(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function xq(t,e){let n=LM(t);e.validator!==null?t.setValidators(EM(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=VM(t);e.asyncValidator!==null?t.setAsyncValidators(EM(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Ap(e._rawValidators,i),Ap(e._rawAsyncValidators,i)}function kq(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=LM(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=VM(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Ap(e._rawValidators,r),Ap(e._rawAsyncValidators,r),n}function Oq(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&UM(t,e)})}function Lq(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&UM(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function UM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Vq(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Fq(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function jq(t){return Object.getPrototypeOf(t.constructor)===yq}function Uq(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Rp?n=o:jq(o)?r=o:i=o}),i||r||n||null}function CM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function SM(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var BM=class extends hw{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(Dq(n),Rq(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Np(n)&&(n.nonNullable||n.initialValueIsDefault)&&(SM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){CM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){CM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){SM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $M=new U(""),Bq={provide:Ju,useExisting:Bi(()=>pw)},pw=(()=>{class t extends Ju{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(n){}model;update=new We;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=Uq(this,i)}ngOnChanges(n){if(this._isControlChanged(n)){let r=n.form.previousValue;r&&bM(r,this,!1),Mq(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Fq(n,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&bM(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_isControlChanged(n){return n.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||t)(ge(Eq,10),ge(wq,10),ge(AM,10),ge($M,8),ge(jM,8))};static \u0275dir=Ne({type:t,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[hh([Bq]),Er,ri]})}return t})();var $q=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=ro({type:t});static \u0275inj=Yr({})}return t})();var Mp=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:$M,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:jM,useValue:n.callSetDisabledState??fw}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=ro({type:t});static \u0275inj=Yr({imports:[$q]})}return t})();var Pp=class t{router=A(zt);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-placeholder-searcher"]],decls:2,vars:0,consts:[[1,"w-full",3,"click"],["type","text","readonly","","placeholder","Buscar prompts...","aria-label","Buscar prompts","aria-autocomplete","list","aria-haspopup","listbox","aria-controls","search-options","aria-activedescendant","search-option-active",1,"w-full","bg-search","ring-0","outline-0","text-search-contrast","placeholder:text-placeholder","placeholder:text-center","rounded-full","px-6","p-1.5"]],template:function(n,r){n&1&&(Tt(0,"div",0),Ds("click",function(o){return o.stopPropagation(),r.router.navigate(["/searching"])}),ai(1,"input",1),bt())},dependencies:[Mp],encapsulation:2})};var HM=class t{open=Jt();onMainButtonClick(e){e.stopPropagation(),this.open.emit()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-main-header"],["","pd-main-header",""]],outputs:{open:"open"},features:[An([Vr])],decls:5,vars:0,consts:[["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderButton","","title","Abrir men\xFA","aria-label","Abrir men\xFA","pdIcon","menu",1,"md:invisible",3,"click"],[1,"w-full","max-w-[500px]"]],template:function(n,r){n&1&&(Te(0,"div",0)(1,"div",1)(2,"button",2),be("click",function(o){return r.onMainButtonClick(o)}),Ie(),mt(3,"pd-placeholder-searcher",3)(4,"pd-mode-toggle"),Ie()())},dependencies:[Pp,bp,Gt,or,sr,gn],encapsulation:2})};var qq=["searchInput"],xp=class t{clear(e){e.stopPropagation(),this.searchControl.setValue(""),this.search.emit("")}searchInput;searchControl=new BM("");search=Jt();term=fe("");onSearch(){this.search.emit(this.searchControl.value?.trim()??""),this.searchInput.nativeElement.blur()}ngAfterViewInit(){setTimeout(()=>{this.searchInput.nativeElement.focus()},20),this.searchControl.valueChanges.pipe(Tg(300)).subscribe(e=>{let n=e?.trim()??"";this.search.emit(n)}),this.searchControl.setValue(this.term())}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-searcher"]],viewQuery:function(n,r){if(n&1&&ov(qq,5),n&2){let i;Vc(i=Fc())&&(r.searchInput=i.first)}},inputs:{term:[1,"term"]},outputs:{search:"search"},decls:4,vars:1,consts:[["searchInput",""],[1,"w-full","flex","flex-row","items-center","gap-2"],["tabindex","0","type","text","autofocus","","placeholder","Buscar prompts...","aria-label","Buscar prompts","aria-autocomplete","list","aria-haspopup","listbox","aria-controls","search-options","aria-activedescendant","search-option-active",1,"w-full","text-primary-contrast","p-1.5","ring-0","outline-0","border-b-[1px]","border-dotted","border-b-contrast",3,"keydown.enter","formControl"],["pdHeaderButton","","title","Abrir men\xFA","aria-label","Abrir men\xFA","pdIcon","close",3,"click"]],template:function(n,r){if(n&1){let i=tv();Te(0,"div",1)(1,"input",2,0),be("keydown.enter",function(){return dc(i),hc(r.onSearch())}),Ie(),Te(3,"button",3),be("click",function(s){return dc(i),hc(r.clear(s))}),Ie()()}n&2&&(_e(),gt("formControl",r.searchControl))},dependencies:[Mp,Rp,FM,pw,gn,Gt],encapsulation:2})};var qM=class t{router=A(zt);search=Jt();term=fe("");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-search-header"],["","pd-search-header",""]],inputs:{term:[1,"term"]},outputs:{search:"search"},features:[An([Vr])],decls:4,vars:1,consts:[["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderBackButton","",3,"back"],[1,"w-full",3,"search","term"]],template:function(n,r){n&1&&(Te(0,"div",0)(1,"div",1)(2,"button",2),be("back",function(o){return r.onBack(o)}),Ie(),Te(3,"pd-searcher",3),be("search",function(o){return r.search.emit(o)}),Ie()()()),n&2&&(_e(3),gt("term",r.term()))},dependencies:[or,sr,xp,Si],encapsulation:2})};var zM=class t{router=A(zt);titulo=fe("");subtitulo=fe("");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-section-header"],["","pd-section-header",""]],inputs:{titulo:[1,"titulo"],subtitulo:[1,"subtitulo"]},features:[An([Vr])],decls:8,vars:4,consts:[["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderBackButton","",3,"back"],[1,"overflow-hidden","w-full","flex","flex-col"],["pdTruncate","",1,"text-header-contrast","text-xl",3,"title"],[1,"text-header-low-contrast","text-sm",3,"title"]],template:function(n,r){n&1&&(Te(0,"div",0)(1,"div",1)(2,"button",2),be("back",function(o){return r.onBack(o)}),Ie(),Te(3,"div",3)(4,"h1",4),Ke(5),Ie(),Te(6,"div",5),Ke(7),Ie()()()()),n&2&&(_e(4),gt("title",r.titulo()),_e(),Zt(" ",r.titulo()," "),_e(),gt("title",r.subtitulo()),_e(),Zt(" ",r.subtitulo()," "))},dependencies:[Si,or,sr,_a],encapsulation:2})};var kp=class t{textData=fe.required({alias:"pdHighlightText"});partIndex=fe.required();isHighlighted=ot(()=>this.partIndex()===this.textData().in);static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ne({type:t,selectors:[["","pdHighlightText",""]],hostAttrs:[1,"whitespace-pre"],hostVars:2,hostBindings:function(n,r){n&2&&ln("bg-resaltador",r.isHighlighted())},inputs:{textData:[1,"pdHighlightText","textData"],partIndex:[1,"partIndex"]}})};function zq(t,e){if(t&1&&(Te(0,"span",1),Ke(1),Ie()),t&2){let n=e.$implicit,r=e.$index,i=nv();gt("pdHighlightText",i.textData())("partIndex",r),_e(),ci(n)}}var GM=class t{textData=fe.required();static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-highlighted-text"]],inputs:{textData:[1,"textData"]},decls:3,vars:0,consts:[[1,"whitespace-nowrap","flex","flex-row","justify-start","items-center"],[3,"pdHighlightText","partIndex"]],template:function(n,r){n&1&&(Te(0,"div",0),Xy(1,zq,2,3,"span",1,Jy),Ie()),n&2&&(_e(),ev(r.textData().parts))},dependencies:[kp],encapsulation:2})};var Gq=new Intl.RelativeTimeFormat("es",{numeric:"auto"});function WM(t){let e=new Date,n=t.getTime()-e.getTime(),r=Wq(n);return Gq.format(Kq(n,r),r)}var gw=60*1e3,mw=60*gw,yw=24*mw,vw=7*yw,_w=4*vw,KM=_w*12;function Wq(t){return t=Math.abs(t),t<gw?"second":t<mw?"minute":t<yw?"hour":t<vw?"day":t<_w?"week":t<KM?"month":"year"}function Kq(t,e){return Math.round(e==="minute"?t/gw:e==="hour"?t/mw:e==="day"?t/yw:e==="week"?t/vw:e==="month"?t/_w:e==="year"?t/KM:t/1e3)}var Qq=["pd-value-item",""],Op=class t{value=fe(void 0,{alias:"pd-value-item"});valueText=ot(()=>{let e=this.value();return e==null?"Sin informaci\xF3n":Array.isArray(e)?e.length>0?e.join(", "):"Sin informaci\xF3n":typeof this.value()=="boolean"?this.value()?"S\xED":"No":e instanceof Date?WM(e):String(this.value())});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["","pd-value-item",""]],hostAttrs:[1,"text-md","text-inverse"],inputs:{value:[1,"pd-value-item","value"]},attrs:Qq,decls:1,vars:1,template:function(n,r){n&1&&Ke(0),n&2&&Zt("",r.valueText()," ")},encapsulation:2})};var Yq=["pd-label-item",""],Lp=class t{text=fe("",{alias:"pd-label-item"});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["","pd-label-item",""]],hostAttrs:[1,"text-sm","text-inverse","opacity-80"],inputs:{text:[1,"pd-label-item","text"]},attrs:Yq,decls:1,vars:1,template:function(n,r){n&1&&Ke(0),n&2&&Zt("",r.text()," ")},encapsulation:2})};var Zq=["pd-key-value-item",""],QM=class t{label=fe("");value=fe(void 0);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["","pd-key-value-item",""]],hostAttrs:[1,"flex","flex-col","pt-1","pb-3","items-start","justify-center"],inputs:{label:[1,"label"],value:[1,"value"]},attrs:Zq,decls:2,vars:2,consts:[[3,"pd-label-item"],[3,"pd-value-item"]],template:function(n,r){n&1&&mt(0,"div",0)(1,"div",1),n&2&&(gt("pd-label-item",r.label()),_e(),gt("pd-value-item",r.value()))},dependencies:[Lp,Op],encapsulation:2})};function YM(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim()}function kse(t,e,n=40){let r=YM(t),i=YM(e),o=r.indexOf(i);if(o===-1)return{parts:[t.slice(0,n)],highlightIndex:-1};let s=Math.floor(n/2),a=e.length,u=Math.max(0,o-s),l=Math.min(t.length,o+a+s),h=o<=s?0:u,p=o+a>=t.length-s?t.length:l,m=t.slice(h,o),y=t.slice(o,o+a),T=t.slice(o+a,p),N=[],R=-1;return m?(N.push(m),R=N.length):R=0,N.push(y),T&&N.push(T),{parts:N,highlightIndex:R}}var Vp=class t{clicked=Jt();onClick(e){this.clicked.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=Ne({type:t,selectors:[["button","pd-action-button",""]],hostAttrs:[1,"shadow-md/80","rounded-full","shadow-black/60","text-action-contrast","bg-action","active:scale-95","transition-transform","duration-100","w-10","h-10","flex","items-center","justify-center"],hostBindings:function(n,r){n&1&&be("click",function(o){return r.onClick(o)})},outputs:{clicked:"clicked"}})};var ZM=class t{copyService=A(Wh);promptText=fe("");promptUrl=fe(null);copyPrompt(){this.promptText()&&this.copyService.copy(this.promptText())}copyUrl(){this.promptUrl()&&this.copyService.copy(this.promptUrl())}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-copy-actions"]],inputs:{promptText:[1,"promptText"],promptUrl:[1,"promptUrl"]},decls:3,vars:0,consts:[[1,"space-x-2","flex"],["pd-action-button","","title","Copiar la direcci\xF3n","aria-label","Copiar la direcci\xF3n","pdIcon","link",3,"clicked"],["pd-action-button","","title","Copiar el prompt","aria-label","Copiar el prompt","pdIcon","copy",3,"clicked"]],template:function(n,r){n&1&&(Te(0,"div",0)(1,"button",1),be("clicked",function(){return r.copyUrl()}),Ie(),Te(2,"button",2),be("clicked",function(){return r.copyPrompt()}),Ie()())},dependencies:[Vp,Gt],encapsulation:2})};function Jq(t,e){t&1&&(Tt(0,"span",3),Ke(1,"WARN"),bt())}function Xq(t,e){t&1&&(Tt(0,"span",4),Ke(1,"404"),bt())}function e4(t,e){t&1&&(Tt(0,"span",5),Ke(1,"OK"),bt())}var JM=class t{notificationService=A(Hs);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-notification"]],decls:8,vars:10,consts:[[1,"fixed","duration-200","m-auto","z-35","scale-0","left-0","right-0","w-fit","min-w-64","shadow-lg","shadow-black/30","dark:shadow-black/60","transition-all","ease-out"],[1,"rounded-lg","w-full","flex","bg-neutral-50","dark:bg-neutral-800","items-center","gap-4","p-3"],[1,"w-full","pl-1"],[1,"dark:text-amber-400","font-semibold","text-amber-600","p-0.5","px-1.5","rounded-lg"],[1,"dark:text-red-400","font-semibold","text-red-500","p-0.5","px-1.5","rounded-lg"],[1,"dark:text-green-300","font-semibold","text-green-800","p-0.5","px-1.5","rounded-lg"],[1,"fixed","top-0","left-0","z-30","bg-black/10","dark:bg-black/20","block","opacity-100","w-screen","h-screen"]],template:function(n,r){n&1&&(Tt(0,"div",0)(1,"div",1)(2,"span",2),Ke(3),bt(),kc(4,Jq,2,0,"span",3)(5,Xq,2,0,"span",4)(6,e4,2,0,"span",5),bt()(),ai(7,"div",6)),n&2&&(ln("-bottom-8",!r.notificationService.showNotification())("bottom-18",r.notificationService.showNotification())("scale-100",r.notificationService.showNotification()),_e(3),ci(r.notificationService.notificationMessage().message),_e(),Oc(r.notificationService.notificationMessage().type==="warn"?4:r.notificationService.notificationMessage().type==="404"?5:6),_e(3),ln("hidden",!r.notificationService.showNotification()))},encapsulation:2})};var XM=class t{quantity=fe(0);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=de({type:t,selectors:[["pd-quantity-bagde"]],hostAttrs:[1,"min-w-6","w-6","h-6","inline-flex","items-center","justify-center","rounded-full","bg-primary-light","text-primary-contrast","text-xs"],inputs:{quantity:[1,"quantity"]},decls:2,vars:1,template:function(n,r){n&1&&(Tt(0,"span"),Ke(1),bt()),n&2&&(_e(),ci(r.quantity()))},encapsulation:2})};var hae=(t,e)=>A(Lr).byId(Ta(t)),fae=(t,e)=>A(Lr).byCategory(Ta(t)),pae=(t,e)=>A(Lr).byTag(Ta(t)),gae=(t,e)=>A(Lr).byId(Ta(t)).then(n=>`Prompt | ${n.titulo}`),mae=(t,e)=>A(Lr).byCategory(Ta(t)).then(n=>`Categor\xEDa | ${n.name}`),yae=(t,e)=>A(Lr).byTag(Ta(t)).then(n=>`Etiqueta | ${n.name}`);function Ta(t){let e=t.paramMap.get("id");if(!e)throw new Error("Route parameter 'id' is required");return e}export{x as a,G as b,se as c,jt as d,A as e,dc as f,hc as g,Vx as h,De as i,_e as j,de as k,O1 as l,xc as m,kc as n,Oc as o,Xy as p,ev as q,gt as r,Te as s,Ie as t,mt as u,tv as v,be as w,nv as x,cL as y,ln as z,Ke as A,ci as B,Zt as C,pD as D,VL as E,UL as F,$L as G,GL as H,ot as I,fe as J,pv as K,PD as L,VV as M,Tr as N,Hv as O,zt as P,Gh as Q,_j as R,wj as S,Rj as T,Hs as U,Wh as V,Kh as W,Tp as X,pee as Y,ite as Z,ote as _,nie as $,rie as aa,Lr as ba,ZM as ca,_M as da,IM as ea,HM as fa,qM as ga,zM as ha,GM as ia,WM as ja,QM as ka,JM as la,XM as ma,hae as na,fae as oa,pae as pa,gae as qa,mae as ra,yae as sa,kse as ta};
