import{c as E}from"./chunk-KAYDDCMO.js";import{Da as _,Pa as f,Pb as M,Qc as N,R as g,Ra as b,Rc as x,Sb as w,Sc as D,Tc as k,Vc as F,W as C,Wa as s,X as A,Xa as n,Xc as L,Ya as a,Yc as I,Za as p,ad as T,bb as S,bd as V,ca as d,cb as h,cd as P,eb as v,ob as r,pb as c,qa as m,ya as l}from"./chunk-XLGPZSE3.js";function B(t,i){if(t&1&&(n(0,"div",6),r(1),a()),t&2){let e=v();m(),c(e.error())}}function R(t,i){t&1&&(n(0,"div"),r(1,"Cargando..."),a())}function $(t,i){if(t&1){let e=S();n(0,"tr")(1,"td"),r(2),a(),n(3,"td",10),r(4),a(),n(5,"td")(6,"button",11),h("click",function(){let y=C(e).$implicit,q=v();return A(q.removeAdmin(y.uid))}),r(7," Eliminar "),a()()()}if(t&2){let e=i.$implicit;m(2),c(e.email||"(sin email)"),m(2),c(e.uid)}}var u=class t{adminService=g(E);fb=g(V);admins=d([]);isLoading=d(!1);error=d(null);form=this.fb.group({uid:["",[x.required]],email:["",[x.email]]});constructor(){this.loadAdmins()}async loadAdmins(){this.isLoading.set(!0),this.error.set(null);try{this.admins.set(await this.adminService.getAdmins())}catch(i){this.error.set(i.message||"Error al cargar admins")}finally{this.isLoading.set(!1)}}async addAdmin(){if(!this.form.invalid){this.isLoading.set(!0);try{await this.adminService.addAdminByUid(this.form.value.uid,this.form.value.email||void 0),this.form.reset(),await this.loadAdmins()}catch(i){this.error.set(i.message||"Error al agregar admin")}finally{this.isLoading.set(!1)}}}async removeAdmin(i){this.isLoading.set(!0);try{await this.adminService.removeAdmin(i),await this.loadAdmins()}catch(e){this.error.set(e.message||"Error al eliminar admin")}finally{this.isLoading.set(!1)}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["pd-admin-management"]],decls:21,vars:5,consts:[[1,"max-w-xl","mx-auto","p-6","bg-white","dark:bg-neutral-900","rounded-xl","shadow","border","border-neutral-200","dark:border-neutral-800","mt-8"],[1,"text-lg","font-semibold","mb-4"],[1,"flex","gap-2","mb-6",3,"ngSubmit","formGroup"],["formControlName","uid","type","text","placeholder","UID del nuevo admin","required","",1,"flex-1","px-3","py-2","rounded","border","border-neutral-300","dark:border-neutral-700","bg-white","dark:bg-neutral-800"],["formControlName","email","type","email","placeholder","Email (opcional, solo referencia)",1,"flex-1","px-3","py-2","rounded","border","border-neutral-300","dark:border-neutral-700","bg-white","dark:bg-neutral-800"],["type","submit",1,"bg-primary","text-white","px-4","py-2","rounded","disabled:opacity-60",3,"disabled"],[1,"text-red-600","mb-2"],[1,"w-full","text-sm"],[1,"text-left","border-b","border-neutral-200","dark:border-neutral-700"],[4,"ngFor","ngForOf"],[1,"font-mono","text-xs"],[1,"text-red-600","hover:underline",3,"click"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"h2",1),r(2,"Administradores"),a(),n(3,"form",2),h("ngSubmit",function(){return o.addAdmin()}),p(4,"input",3)(5,"input",4),n(6,"button",5),r(7," Agregar "),a()(),f(8,B,2,1,"div",6),f(9,R,2,0,"div"),n(10,"table",7)(11,"thead")(12,"tr",8)(13,"th"),r(14,"Email"),a(),n(15,"th"),r(16,"UID"),a(),n(17,"th"),r(18,"Acciones"),a()()(),n(19,"tbody"),_(20,$,8,2,"tr",9),a()()()),e&2&&(m(3),s("formGroup",o.form),m(3),s("disabled",o.form.invalid||o.isLoading()),m(2),b(o.error()?8:-1),m(),b(o.isLoading()?9:-1),m(11),s("ngForOf",o.admins()))},dependencies:[w,M,P,F,N,D,k,T,L,I],encapsulation:2})};var G=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["pd-admin-page"]],decls:1,vars:0,template:function(e,o){e&1&&p(0,"pd-admin-management")},dependencies:[u],encapsulation:2})};export{G as AdminPage};
