var gk=Object.defineProperty,mk=Object.defineProperties;var yk=Object.getOwnPropertyDescriptors;var xD=Object.getOwnPropertySymbols;var vk=Object.prototype.hasOwnProperty,_k=Object.prototype.propertyIsEnumerable;var OD=(t,e,n)=>e in t?gk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k=(t,e)=>{for(var n in e||={})vk.call(e,n)&&OD(t,n,e[n]);if(xD)for(var n of xD(e))_k.call(e,n)&&OD(t,n,e[n]);return t},W=(t,e)=>mk(t,yk(e));function q(t){return typeof t=="function"}function eg(t){return q(t?.lift)}function ae(t){return e=>{if(eg(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Po(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var cl=Po(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ii(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Pe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(o){e=o instanceof cl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{FD(o)}catch(s){e=e??[],s instanceof cl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new cl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)FD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ii(n,e)}remove(e){let{_finalizers:n}=this;n&&Ii(n,e),e instanceof t&&e._removeParent(this)}};Pe.EMPTY=(()=>{let t=new Pe;return t.closed=!0,t})();var tg=Pe.EMPTY;function ul(t){return t instanceof Pe||t&&"closed"in t&&q(t.remove)&&q(t.add)&&q(t.unsubscribe)}function FD(t){q(t)?t():t.unsubscribe()}var sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ko={setTimeout(t,e,...n){let{delegate:r}=ko;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ko;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ll(t){ko.setTimeout(()=>{let{onUnhandledError:e}=sn;if(e)e(t);else throw t})}function za(){}var LD=ng("C",void 0,void 0);function VD(t){return ng("E",void 0,t)}function jD(t){return ng("N",t,void 0)}function ng(t,e,n){return{kind:t,value:e,error:n}}var wi=null;function xo(t){if(sn.useDeprecatedSynchronousErrorHandling){let e=!wi;if(e&&(wi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=wi;if(wi=null,n)throw r}}else t()}function UD(t){sn.useDeprecatedSynchronousErrorHandling&&wi&&(wi.errorThrown=!0,wi.error=t)}var Di=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ul(e)&&e.add(this)):this.destination=wk}static create(e,n,r){return new Oo(e,n,r)}next(e){this.isStopped?ig(jD(e),this):this._next(e)}error(e){this.isStopped?ig(VD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ig(LD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Ek=Function.prototype.bind;function rg(t,e){return Ek.call(t,e)}var og=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){dl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){dl(r)}else dl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){dl(n)}}},Oo=class extends Di{constructor(e,n,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&rg(e.next,o),error:e.error&&rg(e.error,o),complete:e.complete&&rg(e.complete,o)}):i=e}this.destination=new og(i)}};function dl(t){sn.useDeprecatedSynchronousErrorHandling?UD(t):ll(t)}function Ik(t){throw t}function ig(t,e){let{onStoppedNotification:n}=sn;n&&ko.setTimeout(()=>n(t,e))}var wk={closed:!0,next:za,error:Ik,complete:za};function ie(t,e,n,r,i){return new sg(t,e,n,r,i)}var sg=class extends Di{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ce(t,e){return ae((n,r)=>{let i=0;n.subscribe(ie(r,o=>{r.next(t.call(e,o,i++))}))})}function Mt(t,e){return ae((n,r)=>{let i=0;n.subscribe(ie(r,o=>t.call(e,o,i++)&&r.next(o)))})}var Fo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Lt(t){return t}function ag(...t){return cg(t)}function cg(t){return t.length===0?Lt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Tk(n)?n:new Oo(n,r,i);return xo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=BD(r),new r((i,o)=>{let s=new Oo({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Fo](){return this}pipe(...n){return cg(n)(this)}toPromise(n){return n=BD(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function BD(t){var e;return(e=t??sn.Promise)!==null&&e!==void 0?e:Promise}function Dk(t){return t&&q(t.next)&&q(t.error)&&q(t.complete)}function Tk(t){return t&&t instanceof Di||Dk(t)&&ul(t)}function Lo(){return ae((t,e)=>{let n=null;t._refCount++;let r=ie(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Vo=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,eg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;let n=this.getSubject();e.add(this.source.subscribe(ie(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return Lo()(this)}};var $D=Po(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ve=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new hl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new $D}next(n){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?tg:(this.currentObservers=null,o.push(n),new Pe(()=>{this.currentObservers=null,Ii(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new hl(e,n),t})(),hl=class extends Ve{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:tg}};var ct=class extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ug={now(){return(ug.delegate||Date).now()},delegate:void 0};var fl=class extends Pe{constructor(e,n){super()}schedule(e,n=0){return this}};var Ga={setInterval(t,e,...n){let{delegate:r}=Ga;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ga;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var jo=class extends fl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ga.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ga.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ii(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Uo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Uo.now=ug.now;var Bo=class extends Uo{constructor(e,n=Uo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Mr=new Bo(jo),lg=Mr;var pl=class extends jo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var gl=class extends Bo{};var dg=new gl(pl);var Pt=new J(t=>t.complete());function ml(t){return t&&q(t.schedule)}function HD(t){return t[t.length-1]}function yl(t){return q(HD(t))?t.pop():void 0}function Pr(t){return ml(HD(t))?t.pop():void 0}function hg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function zD(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function qD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ti(t){return this instanceof Ti?(this.v=t,this):new Ti(t)}function GD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(I){return Promise.resolve(I).then(y,p)}}function a(y,I){r[y]&&(i[y]=function(S){return new Promise(function(R,x){o.push([y,S,R,x])>1||u(y,S)})},I&&(i[y]=I(i[y])))}function u(y,I){try{l(r[y](I))}catch(S){g(o[0][3],S)}}function l(y){y.value instanceof Ti?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,I){y(I),o.shift(),o.length&&u(o[0][0],o[0][1])}}function WD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof qD=="function"?qD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var $o=t=>t&&typeof t.length=="number"&&typeof t!="function";function vl(t){return q(t?.then)}function _l(t){return q(t[Fo])}function El(t){return Symbol.asyncIterator&&q(t?.[Symbol.asyncIterator])}function Il(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Ck(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wl=Ck();function Dl(t){return q(t?.[wl])}function Tl(t){return GD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ti(n.read());if(i)return yield Ti(void 0);yield yield Ti(r)}}finally{n.releaseLock()}})}function Cl(t){return q(t?.getReader)}function be(t){if(t instanceof J)return t;if(t!=null){if(_l(t))return bk(t);if($o(t))return Sk(t);if(vl(t))return Ak(t);if(El(t))return KD(t);if(Dl(t))return Rk(t);if(Cl(t))return Nk(t)}throw Il(t)}function bk(t){return new J(e=>{let n=t[Fo]();if(q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Sk(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Ak(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ll)})}function Rk(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function KD(t){return new J(e=>{Mk(t,e).catch(n=>e.error(n))})}function Nk(t){return KD(Tl(t))}function Mk(t,e){var n,r,i,o;return zD(this,void 0,void 0,function*(){try{for(n=WD(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function kt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function kr(t,e=0){return ae((n,r)=>{n.subscribe(ie(r,i=>kt(r,t,()=>r.next(i),e),()=>kt(r,t,()=>r.complete(),e),i=>kt(r,t,()=>r.error(i),e)))})}function xr(t,e=0){return ae((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function QD(t,e){return be(t).pipe(xr(e),kr(e))}function YD(t,e){return be(t).pipe(xr(e),kr(e))}function ZD(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function JD(t,e){return new J(n=>{let r;return kt(n,e,()=>{r=t[wl](),kt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function bl(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{kt(n,e,()=>{let r=t[Symbol.asyncIterator]();kt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function XD(t,e){return bl(Tl(t),e)}function eT(t,e){if(t!=null){if(_l(t))return QD(t,e);if($o(t))return ZD(t,e);if(vl(t))return YD(t,e);if(El(t))return bl(t,e);if(Dl(t))return JD(t,e);if(Cl(t))return XD(t,e)}throw Il(t)}function Re(t,e){return e?eT(t,e):be(t)}function Z(...t){let e=Pr(t);return Re(t,e)}function Ho(t,e){let n=q(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function fg(t){return!!t&&(t instanceof J||q(t.lift)&&q(t.subscribe))}var Zn=Po(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function tT(t){return t instanceof Date&&!isNaN(t)}var{isArray:Pk}=Array;function kk(t,e){return Pk(e)?t(...e):t(e)}function qo(t){return ce(e=>kk(t,e))}var{isArray:xk}=Array,{getPrototypeOf:Ok,prototype:Fk,keys:Lk}=Object;function Sl(t){if(t.length===1){let e=t[0];if(xk(e))return{args:e,keys:null};if(Vk(e)){let n=Lk(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Vk(t){return t&&typeof t=="object"&&Ok(t)===Fk}function Al(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Rl(...t){let e=Pr(t),n=yl(t),{args:r,keys:i}=Sl(t);if(r.length===0)return Re([],e);let o=new J(jk(r,e,i?s=>Al(i,s):Lt));return n?o.pipe(qo(n)):o}function jk(t,e,n=Lt){return r=>{nT(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)nT(e,()=>{let l=Re(t[u],e),h=!1;l.subscribe(ie(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function nT(t,e,n){t?kt(n,t,e):e()}function rT(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=S=>l<r?I(S):u.push(S),I=S=>{o&&e.next(S),l++;let R=!1;be(n(S,h++)).subscribe(ie(e,x=>{i?.(x),o?y(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let x=u.shift();s?kt(e,s,()=>I(x)):I(x)}g()}catch(x){e.error(x)}}))};return t.subscribe(ie(e,y,()=>{p=!0,g()})),()=>{a?.()}}function ke(t,e,n=1/0){return q(e)?ke((r,i)=>ce((o,s)=>e(r,o,i,s))(be(t(r,i))),n):(typeof e=="number"&&(n=e),ae((r,i)=>rT(r,i,t,n)))}function zo(t=1/0){return ke(Lt,t)}function iT(){return zo(1)}function Go(...t){return iT()(Re(t,Pr(t)))}function Wa(t){return new J(e=>{be(t()).subscribe(e)})}function pg(...t){let e=yl(t),{args:n,keys:r}=Sl(t),i=new J(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;be(n[h]).subscribe(ie(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Al(r,a):a),o.complete())}))}});return e?i.pipe(qo(e)):i}var Uk=["addListener","removeListener"],Bk=["addEventListener","removeEventListener"],$k=["on","off"];function gg(t,e,n,r){if(q(n)&&(r=n,n=void 0),r)return gg(t,e,n).pipe(qo(r));let[i,o]=zk(t)?Bk.map(s=>a=>t[s](e,a,n)):Hk(t)?Uk.map(oT(t,e)):qk(t)?$k.map(oT(t,e)):[];if(!i&&$o(t))return ke(s=>gg(s,e,n))(be(t));if(!i)throw new TypeError("Invalid event target");return new J(s=>{let a=(...u)=>s.next(1<u.length?u:u[0]);return i(a),()=>o(a)})}function oT(t,e){return n=>r=>t[n](e,r)}function Hk(t){return q(t.addListener)&&q(t.removeListener)}function qk(t){return q(t.on)&&q(t.off)}function zk(t){return q(t.addEventListener)&&q(t.removeEventListener)}function sT(t=0,e,n=lg){let r=-1;return e!=null&&(ml(e)?n=e:r=e),new J(i=>{let o=tT(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Jn(t){return ae((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ie(n,void 0,void 0,s=>{o=be(t(s,Jn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function aT(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ie(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Ci(t,e){return q(e)?ke(t,e,1):ke(t,1)}function Gk(t,e=Mr){return ae((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}n.subscribe(ie(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Or(t){return ae((e,n)=>{let r=!1;e.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Xn(t){return t<=0?()=>Pt:ae((e,n)=>{let r=0;e.subscribe(ie(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Nl(t=Wk){return ae((e,n)=>{let r=!1;e.subscribe(ie(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function Wk(){return new Zn}function Ka(t){return ae((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function er(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Mt((i,o)=>t(i,o,r)):Lt,Xn(1),n?Or(e):Nl(()=>new Zn))}function Wo(t){return t<=0?()=>Pt:ae((e,n)=>{let r=[];e.subscribe(ie(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function mg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Mt((i,o)=>t(i,o,r)):Lt,Wo(1),n?Or(e):Nl(()=>new Zn))}function yg(t,e){return ae(aT(t,e,arguments.length>=2,!0))}function vg(...t){let e=Pr(t);return ae((n,r)=>{(e?Go(t,n,e):Go(t,n)).subscribe(r)})}function Wt(t,e){return ae((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ie(r,u=>{i?.unsubscribe();let l=0,h=o++;be(t(u,h)).subscribe(i=ie(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ml(t){return ae((e,n)=>{be(t).subscribe(ie(n,()=>n.complete(),za)),!n.closed&&e.subscribe(n)})}function nt(t,e,n){let r=q(t)||e||n?{next:t,error:e,complete:n}:t;return r?ae((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ie(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Lt}function cT(t,e){return ae((n,r)=>{let{leading:i=!0,trailing:o=!1}=e??{},s=!1,a=null,u=null,l=!1,h=()=>{u?.unsubscribe(),u=null,o&&(y(),l&&r.complete())},p=()=>{u=null,l&&r.complete()},g=I=>u=be(t(I)).subscribe(ie(r,h,p)),y=()=>{if(s){s=!1;let I=a;a=null,r.next(I),!l&&g(I)}};n.subscribe(ie(r,I=>{s=!0,a=I,!(u&&!u.closed)&&(i?y():g(I))},()=>{l=!0,!(o&&s&&u&&!u.closed)&&r.complete()}))})}function Kk(t,e=Mr,n){let r=sT(t,e);return cT(()=>r,n)}var _g;function Pl(){return _g}function Sn(t){let e=_g;return _g=t,e}var uT=Symbol("NotFound");function Ko(t){return t===uT||t?.name==="\u0275NotFound"}function Ll(t,e){return Object.is(t,e)}var Ye=null,kl=!1,Eg=1,Qk=null,It=Symbol("SIGNAL");function K(t){let e=Ye;return Ye=t,e}function Vl(){return Ye}var Fr={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Qo(t){if(kl)throw new Error("");if(Ye===null)return;Ye.consumerOnSignalRead(t);let e=Ye.nextProducerIndex++;if(Bl(Ye),e<Ye.producerNode.length&&Ye.producerNode[e]!==t&&Ya(Ye)){let n=Ye.producerNode[e];Ul(n,Ye.producerIndexOfThis[e])}Ye.producerNode[e]!==t&&(Ye.producerNode[e]=t,Ye.producerIndexOfThis[e]=Ya(Ye)?dT(t,Ye,e):0),Ye.producerLastReadVersion[e]=t.version}function lT(){Eg++}function jl(t){if(!(Ya(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Eg)){if(!t.producerMustRecompute(t)&&!Yo(t)){Fl(t);return}t.producerRecomputeValue(t),Fl(t)}}function Ig(t){if(t.liveConsumerNode===void 0)return;let e=kl;kl=!0;try{for(let n of t.liveConsumerNode)n.dirty||Yk(n)}finally{kl=e}}function wg(){return Ye?.consumerAllowSignalWrites!==!1}function Yk(t){t.dirty=!0,Ig(t),t.consumerMarkedDirty?.(t)}function Fl(t){t.dirty=!1,t.lastCleanEpoch=Eg}function Lr(t){return t&&(t.nextProducerIndex=0),K(t)}function bi(t,e){if(K(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ya(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ul(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Yo(t){Bl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(jl(n),r!==n.version))return!0}return!1}function Zo(t){if(Bl(t),Ya(t))for(let e=0;e<t.producerNode.length;e++)Ul(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function dT(t,e,n){if(hT(t),t.liveConsumerNode.length===0&&fT(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=dT(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Ul(t,e){if(hT(t),t.liveConsumerNode.length===1&&fT(t))for(let r=0;r<t.producerNode.length;r++)Ul(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Bl(i),i.producerIndexOfThis[r]=e}}function Ya(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Bl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function hT(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function fT(t){return t.producerNode!==void 0}function $l(t){Qk?.(t)}function Hl(t,e){let n=Object.create(Zk);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(jl(n),Qo(n),n.value===Qa)throw n.error;return n.value};return r[It]=n,$l(n),r}var xl=Symbol("UNSET"),Ol=Symbol("COMPUTING"),Qa=Symbol("ERRORED"),Zk=W(k({},Fr),{value:xl,dirty:!0,error:null,equal:Ll,kind:"computed",producerMustRecompute(t){return t.value===xl||t.value===Ol},producerRecomputeValue(t){if(t.value===Ol)throw new Error("");let e=t.value;t.value=Ol;let n=Lr(t),r,i=!1;try{r=t.computation(),K(null),i=e!==xl&&e!==Qa&&r!==Qa&&t.equal(e,r)}catch(o){r=Qa,t.error=o}finally{bi(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function Jk(){throw new Error}var pT=Jk;function gT(t){pT(t)}function Dg(t){pT=t}var Xk=null;function Tg(t,e){let n=Object.create(ql);n.value=t,e!==void 0&&(n.equal=e);let r=()=>mT(n);return r[It]=n,$l(n),[r,s=>Jo(n,s),s=>Cg(n,s)]}function mT(t){return Qo(t),t.value}function Jo(t,e){wg()||gT(t),t.equal(t.value,e)||(t.value=e,ex(t))}function Cg(t,e){wg()||gT(t),Jo(t,e(t.value))}var ql=W(k({},Fr),{equal:Ll,value:void 0,kind:"signal"});function ex(t){t.version++,lT(),Ig(t),Xk?.(t)}function yT(t){let e=K(null);try{return t()}finally{K(e)}}var Ql="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",V=class extends Error{code;constructor(e,n){super(Mi(e,n)),this.code=e}};function tx(t){return`NG0${Math.abs(t)}`}function Mi(t,e){return`${tx(t)}${e?": "+e:""}`}var nc=globalThis;function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("")}function ET(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function nr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(nr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Yl(t,e){return t?e?`${t} ${e}`:t:e||""}var nx=ve({__forward_ref__:ve});function an(t){return t.__forward_ref__=an,t.toString=function(){return nr(this())},t}function Ze(t){return Lg(t)?t():t}function Lg(t){return typeof t=="function"&&t.hasOwnProperty(nx)&&t.__forward_ref__===an}function IT(t,e){t==null&&Vg(e,t,null,"!=")}function Vg(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function U(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function rr(t){return{providers:t.providers||[],imports:t.imports||[]}}function rc(t){return rx(t,Zl)}function jg(t){return rc(t)!==null}function rx(t,e){return t.hasOwnProperty(e)&&t[e]||null}function ix(t){let e=t?.[Zl]??null;return e||null}function Sg(t){return t&&t.hasOwnProperty(Gl)?t[Gl]:null}var Zl=ve({\u0275prov:ve}),Gl=ve({\u0275inj:ve}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=U({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ug(t){return t&&!!t.\u0275providers}var Bg=ve({\u0275cmp:ve}),$g=ve({\u0275dir:ve}),Hg=ve({\u0275pipe:ve}),qg=ve({\u0275mod:ve}),Xa=ve({\u0275fac:ve}),Pi=ve({__NG_ELEMENT_ID__:ve}),vT=ve({__NG_ENV_ID__:ve});function ki(t){return typeof t=="string"?t:t==null?"":String(t)}function Wl(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ki(t)}var zg=ve({ngErrorCode:ve}),wT=ve({ngErrorMessage:ve}),Ja=ve({ngTokenPath:ve});function Gg(t,e){return DT("",-200,e)}function Jl(t,e){throw new V(-201,!1)}function ox(t,e){t[Ja]??=[];let n=t[Ja],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(IT(e.provide,"Token with multi: true should have a provide property"),r=Wl(e.provide)):r=Wl(e),n[0]!==r&&t[Ja].unshift(r)}function sx(t,e){let n=t[Ja],r=t[zg],i=t[wT]||t.message;return t.message=cx(i,r,n,e),t}function DT(t,e,n){let r=new V(e,t);return r[zg]=e,r[wT]=t,n&&(r[Ja]=n),r}function ax(t){return t[zg]}function cx(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return Mi(e,`${t}${o}${i}`)}var Ag;function TT(){return Ag}function wt(t){let e=Ag;return Ag=t,e}function Wg(t,e,n){let r=rc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Jl(t,"Injector")}var ux={},Si=ux,Rg="__NG_DI_FLAG__",Ng=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Ai(n)||0;try{return this.injector.get(e,r&8?null:Si,r)}catch(i){if(Ko(i))return i;throw i}}};function lx(t,e=0){let n=Pl();if(n===void 0)throw new V(-203,!1);if(n===null)return Wg(t,void 0,e);{let r=dx(e),i=n.retrieve(t,r);if(Ko(i)){if(r.optional)return null;throw i}return i}}function ne(t,e=0){return(TT()||lx)(Ze(t),e)}function M(t,e){return ne(t,Ai(e))}function Ai(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function dx(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Mg(t){let e=[];for(let n=0;n<t.length;n++){let r=Ze(t[n]);if(Array.isArray(r)){if(r.length===0)throw new V(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=hx(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ne(i,o))}else e.push(ne(r))}return e}function CT(t,e){return t[Rg]=e,t.prototype[Rg]=e,t}function hx(t){return t[Rg]}function Vr(t,e){let n=t.hasOwnProperty(Xa);return n?t[Xa]:null}function bT(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function ST(t){return t.flat(Number.POSITIVE_INFINITY)}function Xl(t,e){t.forEach(n=>Array.isArray(n)?Xl(n,e):e(n))}function Kg(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ic(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function AT(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function RT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function ed(t,e,n){let r=es(t,e);return r>=0?t[r|1]=n:(r=~r,RT(t,r,e,n)),r}function td(t,e){let n=es(t,e);if(n>=0)return t[n|1]}function es(t,e){return fx(t,e,1)}function fx(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var cn={},Dt=[],ir=new j(""),Qg=new j("",-1),Yg=new j(""),ec=class{get(e,n=Si){if(n===Si){let i=DT("",-201);throw i.name="\u0275NotFound",i}return n}};function Zg(t){return t[qg]||null}function or(t){return t[Bg]||null}function oc(t){return t[$g]||null}function Jg(t){return t[Hg]||null}function un(t){return{\u0275providers:t}}function NT(t){return un([{provide:ir,multi:!0,useValue:t}])}function MT(...t){return{\u0275providers:nd(!0,t),\u0275fromNgModule:!0}}function nd(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Xl(e,s=>{let a=s;Kl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&PT(i,o),n}function PT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Xg(i,o=>{e(o,r)})}}function Kl(t,e,n,r){if(t=Ze(t),!t)return!1;let i=null,o=Sg(t),s=!o&&or(t);if(!o&&!s){let u=t.ngModule;if(o=Sg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Kl(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Xl(o.imports,h=>{Kl(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&PT(l,e)}if(!a){let l=Vr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Dt},i),e({provide:Yg,useValue:i,multi:!0},i),e({provide:ir,useValue:()=>ne(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Xg(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Xg(t,e){for(let n of t)Ug(n)&&(n=n.\u0275providers),Array.isArray(n)?Xg(n,e):e(n)}var px=ve({provide:String,useValue:ve});function kT(t){return t!==null&&typeof t=="object"&&px in t}function gx(t){return!!(t&&t.useExisting)}function mx(t){return!!(t&&t.useFactory)}function Ri(t){return typeof t=="function"}function xT(t){return!!t.useClass}var sc=new j(""),zl={},_T={},bg;function ac(){return bg===void 0&&(bg=new ec),bg}var je=class{},Ni=class extends je{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,kg(e,s=>this.processProvider(s)),this.records.set(Qg,Xo(void 0,this)),i.has("environment")&&this.records.set(je,Xo(void 0,this));let o=this.records.get(sc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Yg,Dt,{self:!0}))}retrieve(e,n){let r=Ai(n)||0;try{return this.get(e,Si,r)}catch(i){if(Ko(i))return i;throw i}}destroy(){Za(this),this._destroyed=!0;let e=K(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),K(e)}}onDestroy(e){return Za(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Za(this);let n=Sn(this),r=wt(void 0),i;try{return e()}finally{Sn(n),wt(r)}}get(e,n=Si,r){if(Za(this),e.hasOwnProperty(vT))return e[vT](this);let i=Ai(r),o,s=Sn(this),a=wt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=Ix(e)&&rc(e);h&&this.injectableDefInScope(h)?l=Xo(Pg(e),zl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?ac():this.parent;return n=i&8&&n===Si?null:n,u.get(e,n)}catch(u){let l=ax(u);throw l===-200||l===-201?new V(l,null):u}finally{wt(a),Sn(s)}}resolveInjectorInitializers(){let e=K(null),n=Sn(this),r=wt(void 0),i;try{let o=this.get(ir,Dt,{self:!0});for(let s of o)s()}finally{Sn(n),wt(r),K(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(nr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ze(e);let n=Ri(e)?e:Ze(e&&e.provide),r=vx(e);if(!Ri(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Xo(void 0,zl,!0),i.factory=()=>Mg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=K(null);try{if(n.value===_T)throw Gg(nr(e));return n.value===zl&&(n.value=_T,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&Ex(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{K(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ze(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Pg(t){let e=rc(t),n=e!==null?e.factory:Vr(t);if(n!==null)return n;if(t instanceof j)throw new V(204,!1);if(t instanceof Function)return yx(t);throw new V(204,!1)}function yx(t){if(t.length>0)throw new V(204,!1);let n=ix(t);return n!==null?()=>n.factory(t):()=>new t}function vx(t){if(kT(t))return Xo(void 0,t.useValue);{let e=em(t);return Xo(e,zl)}}function em(t,e,n){let r;if(Ri(t)){let i=Ze(t);return Vr(i)||Pg(i)}else if(kT(t))r=()=>Ze(t.useValue);else if(mx(t))r=()=>t.useFactory(...Mg(t.deps||[]));else if(gx(t))r=(i,o)=>ne(Ze(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ze(t&&(t.useClass||t.provide));if(_x(t))r=()=>new i(...Mg(t.deps));else return Vr(i)||Pg(i)}return r}function Za(t){if(t.destroyed)throw new V(205,!1)}function Xo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function _x(t){return!!t.deps}function Ex(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Ix(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function kg(t,e){for(let n of t)Array.isArray(n)?kg(n,e):n&&Ug(n)?kg(n.\u0275providers,e):e(n)}function Je(t,e){let n;t instanceof Ni?(Za(t),n=t):n=new Ng(t);let r,i=Sn(n),o=wt(void 0);try{return e()}finally{Sn(i),wt(o)}}function OT(){return TT()!==void 0||Pl()!=null}var ln=0,B=1,Q=2,qe=3,Qt=4,Tt=5,xi=6,ts=7,Be=8,jt=9,An=10,Se=11,ns=12,tm=13,Oi=14,Ct=15,Ur=16,Fi=17,Rn=18,cc=19,nm=20,tr=21,rd=22,sr=23,Ut=24,Li=25,De=26,FT=1,Br=6,$r=7,uc=8,Vi=9,Xe=10;function Nn(t){return Array.isArray(t)&&typeof t[FT]=="object"}function dn(t){return Array.isArray(t)&&t[FT]===!0}function rm(t){return(t.flags&4)!==0}function Hr(t){return t.componentOffset>-1}function id(t){return(t.flags&1)===1}function hn(t){return!!t.template}function rs(t){return(t[Q]&512)!==0}function Mn(t){return(t[Q]&256)===256}var LT="svg",VT="math";function Yt(t){for(;Array.isArray(t);)t=t[ln];return t}function od(t,e){return Yt(e[t])}function fn(t,e){return Yt(e[t.index])}function ji(t,e){return t.data[e]}function im(t,e){return t[e]}function om(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Zt(t,e){let n=e[t];return Nn(n)?n:n[ln]}function jT(t){return(t[Q]&4)===4}function sd(t){return(t[Q]&128)===128}function UT(t){return dn(t[qe])}function pn(t,e){return e==null?null:t[e]}function sm(t){t[Fi]=0}function am(t){t[Q]&1024||(t[Q]|=1024,sd(t)&&qr(t))}function cm(t,e){for(;t>0;)e=e[Oi],t--;return e}function lc(t){return!!(t[Q]&9216||t[Ut]?.dirty)}function ad(t){t[An].changeDetectionScheduler?.notify(8),t[Q]&64&&(t[Q]|=1024),lc(t)&&qr(t)}function qr(t){t[An].changeDetectionScheduler?.notify(0);let e=jr(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!sd(e)));)e=jr(e)}function dc(t,e){if(Mn(t))throw new V(911,!1);t[tr]===null&&(t[tr]=[]),t[tr].push(e)}function cd(t,e){if(t[tr]===null)return;let n=t[tr].indexOf(e);n!==-1&&t[tr].splice(n,1)}function jr(t){let e=t[qe];return dn(e)?e[qe]:e}function um(t){return t[ts]??=[]}function lm(t){return t.cleanup??=[]}function BT(t,e,n,r){let i=um(e);i.push(n),t.firstCreatePass&&lm(t).push(r,i.length-1)}var oe={lFrame:nC(null),bindingsEnabled:!0,skipHydrationRootTNode:null},hc=function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t}(hc||{}),wx=0,xg=!1;function $T(){return oe.lFrame.elementDepthCount}function HT(){oe.lFrame.elementDepthCount++}function dm(){oe.lFrame.elementDepthCount--}function qT(){return oe.bindingsEnabled}function hm(){return oe.skipHydrationRootTNode!==null}function fm(t){return oe.skipHydrationRootTNode===t}function pm(){oe.skipHydrationRootTNode=null}function Y(){return oe.lFrame.lView}function xe(){return oe.lFrame.tView}function zT(t){return oe.lFrame.contextLView=t,t[Be]}function GT(t){return oe.lFrame.contextLView=null,t}function et(){let t=gm();for(;t!==null&&t.type===64;)t=t.parent;return t}function gm(){return oe.lFrame.currentTNode}function WT(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function is(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function mm(){return oe.lFrame.isParent}function ym(){oe.lFrame.isParent=!1}function KT(){return oe.lFrame.contextLView}function vm(t){Vg("Must never be called in production mode"),wx=t}function _m(){return xg}function os(t){let e=xg;return xg=t,e}function ud(){let t=oe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function QT(){return oe.lFrame.bindingIndex}function YT(t){return oe.lFrame.bindingIndex=t}function ss(){return oe.lFrame.bindingIndex++}function ld(t){let e=oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ZT(){return oe.lFrame.inI18n}function JT(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,dd(e)}function XT(){return oe.lFrame.currentDirectiveIndex}function dd(t){oe.lFrame.currentDirectiveIndex=t}function eC(t){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Em(){return oe.lFrame.currentQueryIndex}function hd(t){oe.lFrame.currentQueryIndex=t}function Dx(t){let e=t[B];return e.type===2?e.declTNode:e.type===1?t[Tt]:null}function Im(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=Dx(o),i===null||(o=o[Oi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=oe.lFrame=tC();return r.currentTNode=e,r.lView=t,!0}function fd(t){let e=tC(),n=t[B];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function tC(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?nC(t):e}function nC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function rC(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var wm=rC;function pd(){let t=rC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function iC(t){return(oe.lFrame.contextLView=cm(t,oe.lFrame.contextLView))[Be]}function Pn(){return oe.lFrame.selectedIndex}function zr(t){oe.lFrame.selectedIndex=t}function Dm(){let t=oe.lFrame;return ji(t.tView,t.selectedIndex)}function oC(){return oe.lFrame.currentNamespace}var sC=!0;function gd(){return sC}function md(t){sC=t}function Og(t,e=null,n=null,r){let i=Tm(t,e,n,r);return i.resolveInjectorInitializers(),i}function Tm(t,e=null,n=null,r,i=new Set){let o=[n||Dt,MT(t)];return r=r||(typeof t=="object"?void 0:nr(t)),new Ni(o,e||ac(),r||null,i)}var Ue=class t{static THROW_IF_NOT_FOUND=Si;static NULL=new ec;static create(e,n){if(Array.isArray(e))return Og({name:""},n,e,"");{let r=e.name??"";return Og({name:r},e.parent,e.providers,r)}}static \u0275prov=U({token:t,providedIn:"any",factory:()=>ne(Qg)});static __NG_ELEMENT_ID__=-1},rt=new j(""),ut=(()=>{class t{static __NG_ELEMENT_ID__=Tx;static __NG_ENV_ID__=n=>n}return t})(),tc=class extends ut{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Mn(this._lView)}onDestroy(e){let n=this._lView;return dc(n,e),()=>cd(n,e)}};function Tx(){return new tc(Y())}var Vt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},bt=new j("",{providedIn:"root",factory:()=>{let t=M(je),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Vt),e.handleError(n))}}}),aC={provide:ir,useValue:()=>void M(Vt),multi:!0},Cx=new j("",{providedIn:"root",factory:()=>{let t=M(rt).defaultView;if(!t)return;let e=M(bt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(ut).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function bx(){return un([NT(()=>void M(Cx))])}function Ne(t,e){let[n,r,i]=Tg(t,e?.equal),o=n,s=o[It];return o.set=r,o.update=i,o.asReadonly=Cm.bind(o),o}function Cm(){let t=this[It];if(t.readonlyFn===void 0){let e=()=>this();e[It]=t,t.readonlyFn=e}return t.readonlyFn}var Kt=class{},fc=new j("",{providedIn:"root",factory:()=>!1});var bm=new j(""),yd=new j("");var as=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=Sx}return t})();function Sx(){return new as(Y(),et())}var kn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ct(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new J(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})(),Gr=(()=>{class t{internalPendingTasks=M(kn);scheduler=M(Kt);errorHandler=M(bt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ui(...t){}var pc=(()=>{class t{static \u0275prov=U({token:t,providedIn:"root",factory:()=>new Fg})}return t})(),Fg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function vs(t){return{toString:t}.toString()}var vd="__parameters__";function Fx(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Lx(t,e,n){return vs(()=>{let r=Fx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(vd)?u[vd]:Object.defineProperty(u,vd,{value:[]})[vd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var cr=CT(Lx("Optional"),8);function Vx(t){return typeof t=="function"}var Sd=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function qC(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var yn=(()=>{let t=()=>zC;return t.ngInherit=!0,t})();function zC(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ux),jx}function jx(){let t=WC(this),e=t?.current;if(e){let n=t.previous;if(n===cn)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Ux(t,e,n,r,i){let o=this.declaredInputs[r],s=WC(t)||Bx(t,{previous:cn,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Sd(l&&l.currentValue,n,u===cn),qC(t,e,i,n)}var GC="__ngSimpleChanges__";function WC(t){return t[GC]||null}function Bx(t,e){return t[GC]=e}var cC=[];var pe=function(t,e=null,n){for(let r=0;r<cC.length;r++){let i=cC[r];i(t,e,n)}};function $x(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=zC(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Hx(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Id(t,e,n){KC(t,e,3,n)}function wd(t,e,n,r){(t[Q]&3)===n&&KC(t,e,n,r)}function Sm(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function KC(t,e,n,r){let i=r!==void 0?t[Fi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Fi]+=65536),(a<o||o==-1)&&(qx(t,n,e,u),t[Fi]=(t[Fi]&4294901760)+u+2),u++}function uC(t,e){pe(4,t,e);let n=K(null);try{e.call(t)}finally{K(n),pe(5,t,e)}}function qx(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[Q]>>14<t[Fi]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,uC(a,o)):uC(a,o)}var ds=-1,$i=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function zx(t){return(t.flags&8)!==0}function Gx(t){return(t.flags&16)!==0}function Wx(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Kx(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function QC(t){return t===3||t===4||t===6}function Kx(t){return t.charCodeAt(0)===64}function fs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?lC(t,n,i,null,e[++r]):lC(t,n,i,null,null))}}return t}function lC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function YC(t){return t!==ds}function Ad(t){return t&32767}function Qx(t){return t>>16}function Rd(t,e){let n=Qx(t),r=e;for(;n>0;)r=r[Oi],n--;return r}var Um=!0;function Nd(t){let e=Um;return Um=t,e}var Yx=256,ZC=Yx-1,JC=5,Zx=0,xn={};function Jx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Pi)&&(r=n[Pi]),r==null&&(r=n[Pi]=Zx++);let i=r&ZC,o=1<<i;e.data[t+(i>>JC)]|=o}function Md(t,e){let n=XC(t,e);if(n!==-1)return n;let r=e[B];r.firstCreatePass&&(t.injectorIndex=e.length,Am(r.data,t),Am(e,null),Am(r.blueprint,null));let i=yy(t,e),o=t.injectorIndex;if(YC(i)){let s=Ad(i),a=Rd(i,e),u=a[B].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Am(t,e){t.push(0,0,0,0,0,0,0,0,e)}function XC(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function yy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=ib(i),r===null)return ds;if(n++,i=i[Oi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ds}function Bm(t,e,n){Jx(t,e,n)}function Xx(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(QC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function eb(t,e,n){if(n&8||t!==void 0)return t;Jl(e,"NodeInjector")}function tb(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[jt],o=wt(void 0);try{return i?i.get(e,r,n&8):Wg(e,r,n&8)}finally{wt(o)}}return eb(r,e,n)}function nb(t,e,n,r=0,i){if(t!==null){if(e[Q]&2048&&!(r&2)){let s=rO(t,e,n,r,xn);if(s!==xn)return s}let o=rb(t,e,n,r,xn);if(o!==xn)return o}return tb(e,n,r,i)}function rb(t,e,n,r,i){let o=tO(n);if(typeof o=="function"){if(!Im(e,t,r))return r&1?eb(i,n,r):tb(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Jl(n);else return s}finally{wm()}}else if(typeof o=="number"){let s=null,a=XC(t,e),u=ds,l=r&1?e[Ct][Tt]:null;for((a===-1||r&4)&&(u=a===-1?yy(t,e):e[a+8],u===ds||!hC(r,!1)?a=-1:(s=e[B],a=Ad(u),e=Rd(u,e)));a!==-1;){let h=e[B];if(dC(o,a,h.data)){let p=eO(a,e,n,s,r,l);if(p!==xn)return p}u=e[a+8],u!==ds&&hC(r,e[B].data[a+8]===l)&&dC(o,a,e)?(s=h,a=Ad(u),e=Rd(u,e)):a=-1}}return i}function eO(t,e,n,r,i,o){let s=e[B],a=s.data[t+8],u=r==null?Hr(a)&&Um:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Dd(a,s,n,u,l);return h!==null?yc(e,s,h,a,i):xn}function Dd(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let I=s[y];if(y<u&&n===I||y>=u&&I.type===n)return y}if(i){let y=s[u];if(y&&hn(y)&&y.type===n)return u}return null}function yc(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof $i){let a=o;if(a.resolving){let y=Wl(s[n]);throw Gg(y)}let u=Nd(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?wt(a.injectImpl):null,g=Im(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&$x(n,s[n],e)}finally{p!==null&&wt(p),Nd(u),a.resolving=!1,wm()}}return o}function tO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Pi)?t[Pi]:void 0;return typeof e=="number"?e>=0?e&ZC:nO:e}function dC(t,e,n){let r=1<<t;return!!(n[e+(t>>JC)]&r)}function hC(t,e){return!(t&2)&&!(t&1&&e)}var Bi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return nb(this._tNode,this._lView,e,Ai(r),n)}};function nO(){return new Bi(et(),Y())}function Qr(t){return vs(()=>{let e=t.prototype.constructor,n=e[Xa]||$m(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Xa]||$m(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function $m(t){return Lg(t)?()=>{let e=$m(Ze(t));return e&&e()}:Vr(t)}function rO(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Q]&2048&&!rs(s);){let a=rb(o,s,n,r|2,xn);if(a!==xn)return a;let u=o.parent;if(!u){let l=s[nm];if(l){let h=l.get(n,xn,r);if(h!==xn)return h}u=ib(s),s=s[Oi]}o=u}return i}function ib(t){let e=t[B],n=e.type;return n===2?e.declTNode:n===1?t[Tt]:null}function Dc(t){return Xx(et(),t)}function iO(){return _s(et(),Y())}function _s(t,e){return new gt(fn(t,e))}var gt=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=iO}return t})();function oO(t){return t instanceof gt?t.nativeElement:t}function sO(){return this._results[Symbol.iterator]()}var Pd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ve}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=ST(e);(this._changesDetected=!bT(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=sO};function ob(t){return(t.flags&128)===128}var vy=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(vy||{}),sb=new Map,aO=0;function cO(){return aO++}function uO(t){sb.set(t[cc],t)}function Hm(t){sb.delete(t[cc])}var fC="__ngContext__";function ps(t,e){Nn(e)?(t[fC]=e[cc],uO(e)):t[fC]=e}function ab(t){return ub(t[ns])}function cb(t){return ub(t[Qt])}function ub(t){for(;t!==null&&!dn(t);)t=t[Qt];return t}var qm;function _y(t){qm=t}function lb(){if(qm!==void 0)return qm;if(typeof document<"u")return document;throw new V(210,!1)}var Kd=new j("",{providedIn:"root",factory:()=>lO}),lO="ng",Qd=new j(""),Yr=new j("",{providedIn:"platform",factory:()=>"unknown"});var Yd=new j("",{providedIn:"root",factory:()=>lb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dO="h",hO="b";var db="r";var Ey="di",Iy="s";var hb=!1,fb=new j("",{providedIn:"root",factory:()=>hb});var pb=new j("");var us=new WeakMap;var cs=null,Rm=0,zm=class{callbacks=new Set;listener=()=>{for(let e of this.callbacks)e()}};function fO(){return new IntersectionObserver(t=>{for(let e of t)e.isIntersecting&&us.has(e.target)&&us.get(e.target).listener()})}function pO(t,e,n){let r=us.get(t);return cs=cs||n(),r||(r=new zm,cs.observe(t),us.set(t,r),Rm++),r.callbacks.add(e),()=>{us.has(t)&&(r.callbacks.delete(e),r.callbacks.size===0&&(cs?.unobserve(t),us.delete(t),Rm--),Rm===0&&(cs?.disconnect(),cs=null))}}var gO=(t,e,n,r)=>{};function mO(t,e,n,r){gO(t,e,n,r)}var gb=new j("");function Zd(t){return(t.flags&32)===32}var yO=()=>null;function mb(t,e,n=!1){return yO(t,e,n)}function yb(t){return t.get(pb,!1,{optional:!0})}function vb(t,e){let n=t.contentQueries;if(n!==null){let r=K(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];hd(o),a.contentQueries(2,e[s],s)}}}finally{K(r)}}}function Gm(t,e,n){hd(0);let r=K(null);try{e(t,n)}finally{K(r)}}function _b(t,e,n){if(rm(e)){let r=K(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{K(r)}}}var ar=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ar||{});var _d;function vO(){if(_d===void 0&&(_d=null,nc.trustedTypes))try{_d=nc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return _d}function pC(t){return vO()?.createScriptURL(t)||t}var kd=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ql})`}};function Tc(t){return t instanceof kd?t.changingThisBreaksApplicationSecurity:t}function wy(t,e){let n=Eb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ql})`)}return n===e}function Eb(t){return t instanceof kd&&t.getTypeName()||null}var _O=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ib(t){return t=String(t),t.match(_O)?t:"unsafe:"+t}var Jd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Jd||{});function wb(t){let e=Tb();return e?e.sanitize(Jd.URL,t)||"":wy(t,"URL")?Tc(t):Ib(ki(t))}function Db(t){let e=Tb();if(e)return pC(e.sanitize(Jd.RESOURCE_URL,t)||"");if(wy(t,"ResourceURL"))return pC(Tc(t));throw new V(904,!1)}function EO(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?Db:wb}function Dy(t,e,n){return EO(e,n)(t)}function Tb(){let t=Y();return t&&t[An].sanitizer}function Cb(t){return t instanceof Function?t():t}function IO(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var bb="ng-template";function wO(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&IO(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ty(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ty(t){return t.type===4&&t.value!==bb}function DO(t,e,n){let r=t.type===4&&!n?bb:t.value;return e===r}function TO(t,e,n){let r=4,i=t.attrs,o=i!==null?SO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!gn(r)&&!gn(u))return!1;if(s&&gn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!DO(t,u,n)||u===""&&e.length===1){if(gn(r))return!1;s=!0}}else if(r&8){if(i===null||!wO(t,i,u,n)){if(gn(r))return!1;s=!0}}else{let l=e[++a],h=CO(u,i,Ty(t),n);if(h===-1){if(gn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(gn(r))return!1;s=!0}}}}return gn(r)||s}function gn(t){return(t&1)===0}function CO(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return AO(e,t)}function Sb(t,e,n=!1){for(let r=0;r<e.length;r++)if(TO(t,e[r],n))return!0;return!1}function bO(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if((n&1)===0)return e[n+1]}return null}function SO(t){for(let e=0;e<t.length;e++){let n=t[e];if(QC(n))return e}return t.length}function AO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function RO(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function gC(t,e){return t?":not("+e.trim()+")":e}function NO(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!gn(s)&&(e+=gC(o,i),i=""),r=s,o=o||!gn(r);n++}return i!==""&&(e+=gC(o,i)),e}function MO(t){return t.map(NO).join(",")}function PO(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!gn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var St={};function kO(t,e){return t.createText(e)}function xO(t,e,n){t.setValue(e,n)}function Ab(t,e,n){return t.createElement(e,n)}function xd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Rb(t,e,n){t.appendChild(e,n)}function mC(t,e,n,r,i){r!==null?xd(t,e,n,r,i):Rb(t,e,n)}function Nb(t,e,n){t.removeChild(null,e,n)}function OO(t,e,n){t.setAttribute(e,"style",n)}function FO(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Mb(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Wx(t,e,r),i!==null&&FO(t,e,i),o!==null&&OO(t,e,o)}function Cy(t,e,n,r,i,o,s,a,u,l,h){let p=De+r,g=p+i,y=LO(p,g),I=typeof l=="function"?l():l;return y[B]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:I,incompleteFirstPass:!1,ssrId:h}}function LO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:St);return n}function VO(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Cy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function by(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[ln]=i,p[Q]=r|4|128|8|64|1024,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),sm(p),p[qe]=p[Oi]=t,p[Be]=n,p[An]=s||t&&t[An],p[Se]=a||t&&t[Se],p[jt]=u||t&&t[jt]||null,p[Tt]=o,p[cc]=cO(),p[xi]=h,p[nm]=l,p[Ct]=e.type==2?t[Ct]:p,p}function jO(t,e,n){let r=fn(e,t),i=VO(n),o=t[An].rendererFactory,s=Sy(t,by(t,i,null,Pb(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function Pb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function kb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Sy(t,e){return t[ns]?t[tm][Qt]=e:t[ns]=e,t[tm]=e,e}function UO(t=1){xb(xe(),Y(),Pn()+t,!1)}function xb(t,e,n,r){if(!r)if((e[Q]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Id(e,o,n)}else{let o=t.preOrderHooks;o!==null&&wd(e,o,0,n)}zr(n)}var Xd=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Xd||{});function Wm(t,e,n,r){let i=K(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Xd.SignalBased)!==0&&(u=e[o][It]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):qC(e,u,o,r)}finally{K(i)}}var On=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(On||{}),BO;function Ay(t,e){return BO(t,e)}function ls(t,e,n,r,i){if(r!=null){let o,s=!1;dn(r)?o=r:Nn(r)&&(s=!0,r=r[ln]);let a=Yt(r);t===0&&n!==null?i==null?Rb(e,n,a):xd(e,n,a,i||null,!0):t===1&&n!==null?xd(e,n,a,i||null,!0):t===2?Nb(e,a,s):t===3&&e.destroyNode(a),o!=null&&ZO(e,t,o,n,i)}}function $O(t,e){Ob(t,e),e[ln]=null,e[Tt]=null}function HO(t,e,n,r,i,o){r[ln]=i,r[Tt]=e,th(t,r,n,1,i,o)}function Ob(t,e){e[An].changeDetectionScheduler?.notify(9),th(t,e,e[Se],2,null,null)}function qO(t){let e=t[ns];if(!e)return Nm(t[B],t);for(;e;){let n=null;if(Nn(e))n=e[ns];else{let r=e[Xe];r&&(n=r)}if(!n){for(;e&&!e[Qt]&&e!==t;)Nn(e)&&Nm(e[B],e),e=e[qe];e===null&&(e=t),Nn(e)&&Nm(e[B],e),n=e&&e[Qt]}e=n}}function Ry(t,e){let n=t[Vi],r=n.indexOf(e);n.splice(r,1)}function eh(t,e){if(Mn(e))return;let n=e[Se];n.destroyNode&&th(t,e,n,3,null,null),qO(e)}function Nm(t,e){if(Mn(e))return;let n=K(null);try{e[Q]&=-129,e[Q]|=256,e[Ut]&&Zo(e[Ut]),GO(t,e),zO(t,e),e[B].type===1&&e[Se].destroy();let r=e[Ur];if(r!==null&&dn(e[qe])){r!==e[qe]&&Ry(r,e);let i=e[Rn];i!==null&&i.detachView(t)}Hm(e)}finally{K(n)}}function zO(t,e){let n=t.cleanup,r=e[ts];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[ts]=null);let i=e[tr];if(i!==null){e[tr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[sr];if(o!==null){e[sr]=null;for(let s of o)s.destroy()}}function GO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof $i)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];pe(4,a,u);try{u.call(a)}finally{pe(5,a,u)}}else{pe(4,i,o);try{o.call(i)}finally{pe(5,i,o)}}}}}function Fb(t,e,n){return WO(t,e.parent,n)}function WO(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[ln];if(Hr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===ar.None||i===ar.Emulated)return null}return fn(r,n)}function Lb(t,e,n){return QO(t,e,n)}function KO(t,e,n){return t.type&40?fn(t,n):null}var QO=KO,yC;function Ny(t,e,n,r){let i=Fb(t,r,e),o=e[Se],s=r.parent||e[Tt],a=Lb(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)mC(o,i,n[u],a,!1);else mC(o,i,n,a,!1);yC!==void 0&&yC(o,r,e,n,i)}function gc(t,e){if(e!==null){let n=e.type;if(n&3)return fn(e,t);if(n&4)return Km(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return gc(t,r);{let i=t[e.index];return dn(i)?Km(-1,i):Yt(i)}}else{if(n&128)return gc(t,e.next);if(n&32)return Ay(e,t)()||Yt(t[e.index]);{let r=Vb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=jr(t[Ct]);return gc(i,r)}else return gc(t,e.next)}}}return null}function Vb(t,e){if(e!==null){let r=t[Ct][Tt],i=e.projection;return r.projection[i]}return null}function Km(t,e){let n=Xe+t+1;if(n<e.length){let r=e[n],i=r[B].firstChild;if(i!==null)return gc(r,i)}return e[$r]}function My(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&ps(Yt(a),r),n.flags|=2),!Zd(n))if(u&8)My(t,e,n.child,r,i,o,!1),ls(e,t,i,a,o);else if(u&32){let l=Ay(n,r),h;for(;h=l();)ls(e,t,i,h,o);ls(e,t,i,a,o)}else u&16?jb(t,e,r,n,i,o):ls(e,t,i,a,o);n=s?n.projectionNext:n.next}}function th(t,e,n,r,i,o){My(n,r,t.firstChild,e,i,o,!1)}function YO(t,e,n){let r=e[Se],i=Fb(t,n,e),o=n.parent||e[Tt],s=Lb(o,n,e);jb(r,0,e,n,i,s)}function jb(t,e,n,r,i,o){let s=n[Ct],u=s[Tt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ls(e,t,i,h,o)}else{let l=u,h=s[qe];ob(r)&&(l.flags|=128),My(t,e,l,h,i,o,!0)}}function ZO(t,e,n,r,i){let o=n[$r],s=Yt(n);o!==s&&ls(e,t,r,o,i);for(let a=Xe;a<n.length;a++){let u=n[a];th(u[B],u,t,e,r,o)}}function JO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:On.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=On.Important),t.setStyle(n,r,i,o))}}function Ub(t,e,n,r,i){let o=Pn(),s=r&2;try{zr(-1),s&&e.length>De&&xb(t,e,De,!1),pe(s?2:0,i,n),n(r,i)}finally{zr(o),pe(s?3:1,i,n)}}function Bb(t,e,n){s1(t,e,n),(n.flags&64)===64&&a1(t,e,n)}function Py(t,e,n=fn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function XO(t,e,n,r){let o=r.get(fb,hb)||n===ar.ShadowDom,s=t.selectRootElement(e,o);return e1(s),s}function e1(t){t1(t)}var t1=()=>null;function n1(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function r1(t,e,n,r,i,o){let s=e[B];if(xy(t,s,e,n,r)){Hr(t)&&o1(e,t.index);return}t.type&3&&(n=n1(n)),i1(t,e,n,r,i,o)}function i1(t,e,n,r,i,o){if(t.type&3){let s=fn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function o1(t,e){let n=Zt(e,t);n[Q]&16||(n[Q]|=64)}function s1(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Hr(n)&&jO(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Md(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=yc(e,t,s,n);if(ps(u,e),o!==null&&h1(e,s-r,u,a,n,o),hn(a)){let l=Zt(n.index,e);l[Be]=yc(e,t,s,n)}}}function a1(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=XT();try{zr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];dd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&c1(u,l)}}finally{zr(-1),dd(s)}}function c1(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function u1(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Sb(e,o.selectors,!1)&&(r??=[],hn(o)?r.unshift(o):r.push(o))}return r}function l1(t,e,n,r,i,o){let s=fn(t,e);d1(e[Se],s,o,t.value,n,r,i)}function d1(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?ki(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function h1(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Wm(r,n,u,l)}}function $b(t,e,n,r,i){let o=De+n,s=e[B],a=i(s,e,t,r,n);e[o]=a,is(t,!0);let u=t.type===2;return u?(Mb(e[Se],a,t),($T()===0||id(t))&&ps(a,e),HT()):ps(a,e),gd()&&(!u||!Zd(t))&&Ny(s,e,a,t),t}function Hb(t){let e=t;return mm()?ym():(e=e.parent,is(e,!1)),e}function ky(t,e){let n=t[jt];if(!n)return;n.get(bt,null)?.(e)}function xy(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Wm(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Wm(h,l,r,i),a=!0}return a}function f1(t,e){let n=Zt(e,t),r=n[B];p1(r,n);let i=n[ln];i!==null&&n[xi]===null&&(n[xi]=mb(i,n[jt])),pe(18),Oy(r,n,n[Be]),pe(19,n[Be])}function p1(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Oy(t,e,n){fd(e);try{let r=t.viewQuery;r!==null&&Gm(1,r,n);let i=t.template;i!==null&&Ub(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Rn]?.finishViewCreation(t),t.staticContentQueries&&vb(t,e),t.staticViewQueries&&Gm(2,t.viewQuery,n);let o=t.components;o!==null&&g1(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,pd()}}function g1(t,e){for(let n=0;n<e.length;n++)f1(t,e[n])}function Es(t,e,n,r){let i=K(null);try{let o=e.tView,a=t[Q]&4096?4096:16,u=by(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ur]=l;let h=t[Rn];return h!==null&&(u[Rn]=h.createEmbeddedView(o)),Oy(o,u,n),u}finally{K(i)}}function Hi(t,e){return!e||e.firstChild===null||ob(t)}var vC=!1,m1=new j("");function vc(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Yt(o)),dn(o)&&qb(o,r);let s=n.type;if(s&8)vc(t,e,n.child,r);else if(s&32){let a=Ay(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=Vb(e,n);if(Array.isArray(a))r.push(...a);else{let u=jr(e[Ct]);vc(u[B],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function qb(t,e){for(let n=Xe;n<t.length;n++){let r=t[n],i=r[B].firstChild;i!==null&&vc(r[B],r,i,e)}t[$r]!==t[ln]&&e.push(t[$r])}function zb(t){if(t[Li]!==null){for(let e of t[Li])e.impl.addSequence(e);t[Li].length=0}}var Gb=[];function y1(t){return t[Ut]??v1(t)}function v1(t){let e=Gb.pop()??Object.create(E1);return e.lView=t,e}function _1(t){t.lView[Ut]!==t&&(t.lView=null,Gb.push(t))}var E1=W(k({},Fr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{qr(t.lView)},consumerOnSignalRead(){this.lView[Ut]=this}});function I1(t){let e=t[Ut]??Object.create(w1);return e.lView=t,e}var w1=W(k({},Fr),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=jr(t.lView);for(;e&&!Wb(e[B]);)e=jr(e);e&&am(e)},consumerOnSignalRead(){this.lView[Ut]=this}});function Wb(t){return t.type!==2}function Kb(t){if(t[sr]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[sr])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Q]&8192)}}var D1=100;function Fy(t,e=0){let r=t[An].rendererFactory,i=!1;i||r.begin?.();try{T1(t,e)}finally{i||r.end?.()}}function T1(t,e){let n=_m();try{os(!0),Qm(t,e);let r=0;for(;lc(t);){if(r===D1)throw new V(103,!1);r++,Qm(t,1)}}finally{os(n)}}function Qb(t,e){vm(e?hc.Exhaustive:hc.OnlyDirtyViews);try{Fy(t)}finally{vm(hc.Off)}}function C1(t,e,n,r){if(Mn(e))return;let i=e[Q],o=!1,s=!1;fd(e);let a=!0,u=null,l=null;o||(Wb(t)?(l=y1(e),u=Lr(l)):Vl()===null?(a=!1,l=I1(e),u=Lr(l)):e[Ut]&&(Zo(e[Ut]),e[Ut]=null));try{sm(e),YT(t.bindingStartIndex),n!==null&&Ub(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Id(e,y,null)}else{let y=t.preOrderHooks;y!==null&&wd(e,y,0,null),Sm(e,0)}if(s||b1(e),Kb(e),Yb(e,0),t.contentQueries!==null&&vb(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Id(e,y)}else{let y=t.contentHooks;y!==null&&wd(e,y,1),Sm(e,1)}A1(t,e);let p=t.components;p!==null&&Jb(e,p,0);let g=t.viewQuery;if(g!==null&&Gm(2,g,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Id(e,y)}else{let y=t.viewHooks;y!==null&&wd(e,y,2),Sm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[rd]){for(let y of e[rd])y();e[rd]=null}o||(zb(e),e[Q]&=-73)}catch(h){throw o||qr(e),h}finally{l!==null&&(bi(l,u),a&&_1(l)),pd()}}function Yb(t,e){for(let n=ab(t);n!==null;n=cb(n))for(let r=Xe;r<n.length;r++){let i=n[r];Zb(i,e)}}function b1(t){for(let e=ab(t);e!==null;e=cb(e)){if(!(e[Q]&2))continue;let n=e[Vi];for(let r=0;r<n.length;r++){let i=n[r];am(i)}}}function S1(t,e,n){pe(18);let r=Zt(e,t);Zb(r,n),pe(19,r[Be])}function Zb(t,e){sd(t)&&Qm(t,e)}function Qm(t,e){let r=t[B],i=t[Q],o=t[Ut],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Yo(o)),s||=!1,o&&(o.dirty=!1),t[Q]&=-9217,s)C1(r,t,r.template,t[Be]);else if(i&8192){let a=K(null);try{Kb(t),Yb(t,1);let u=r.components;u!==null&&Jb(t,u,1),zb(t)}finally{K(a)}}}function Jb(t,e,n){for(let r=0;r<e.length;r++)S1(t,e[r],n)}function A1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)zr(~i);else{let o=i,s=n[++r],a=n[++r];JT(s,o);let u=e[o];pe(24,u),a(2,u),pe(25,u)}}}finally{zr(-1)}}function nh(t,e){let n=_m()?64:1088;for(t[An].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=jr(t);if(rs(t)&&!r)return t;t=r}return null}function Xb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function eS(t,e){let n=Xe+e;if(n<t.length)return t[n]}function Is(t,e,n,r=!0){let i=e[B];if(R1(i,e,t,n),r){let s=Km(n,t),a=e[Se],u=a.parentNode(t[$r]);u!==null&&HO(i,t[Tt],a,e,u,s)}let o=e[xi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ly(t,e){let n=_c(t,e);return n!==void 0&&eh(n[B],n),n}function _c(t,e){if(t.length<=Xe)return;let n=Xe+e,r=t[n];if(r){let i=r[Ur];i!==null&&i!==t&&Ry(i,r),e>0&&(t[n-1][Qt]=r[Qt]);let o=ic(t,Xe+e);$O(r[B],r);let s=o[Rn];s!==null&&s.detachView(o[B]),r[qe]=null,r[Qt]=null,r[Q]&=-129}return r}function R1(t,e,n,r){let i=Xe+r,o=n.length;r>0&&(n[i-1][Qt]=e),r<o-Xe?(e[Qt]=n[i],Kg(n,Xe+r,e)):(n.push(e),e[Qt]=null),e[qe]=n;let s=e[Ur];s!==null&&n!==s&&tS(s,e);let a=e[Rn];a!==null&&a.insertView(t),ad(e),e[Q]|=128}function tS(t,e){let n=t[Vi],r=e[qe];if(Nn(r))t[Q]|=2;else{let i=r[qe][Ct];e[Ct]!==i&&(t[Q]|=2)}n===null?t[Vi]=[e]:n.push(e)}var Kr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[B];return vc(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Be]}set context(e){this._lView[Be]=e}get destroyed(){return Mn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[qe];if(dn(e)){let n=e[uc],r=n?n.indexOf(this):-1;r>-1&&(_c(e,r),ic(n,r))}this._attachedToViewContainer=!1}eh(this._lView[B],this._lView)}onDestroy(e){dc(this._lView,e)}markForCheck(){nh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){ad(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,Fy(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[jt].get(m1,vC)}catch{this.exhaustive=vC}}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=rs(this._lView),n=this._lView[Ur];n!==null&&!e&&Ry(n,this._lView),Ob(this._lView[B],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e;let n=rs(this._lView),r=this._lView[Ur];r!==null&&!n&&tS(r,this._lView),ad(this._lView)}};var gs=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=N1;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Es(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Kr(o)}}return t})();function N1(){return Vy(et(),Y())}function Vy(t,e){return t.type&4?new gs(e,t,_s(t,e)):null}function Cc(t,e,n,r,i){let o=t.data[e];if(o===null)o=M1(t,e,n,r,i),ZT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=WT();o.injectorIndex=s===null?-1:s.injectorIndex}return is(o,!0),o}function M1(t,e,n,r,i){let o=gm(),s=mm(),a=s?o:o&&o.parent,u=t.data[e]=k1(t,a,n,e,r,i);return P1(t,u,o,s),u}function P1(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function k1(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return hm()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var aK=new RegExp(`^(\\d+)*(${hO}|${dO})*(.*)`);function x1(t){let e=t[Br]??[],r=t[qe][Se],i=[];for(let o of e)o.data[Ey]!==void 0?i.push(o):O1(o,r);t[Br]=i}function O1(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[db];for(;n<i;){let o=r.nextSibling;Nb(e,r,!1),r=o,n++}}}var F1=()=>null,L1=()=>null;function Od(t,e){return F1(t,e)}function nS(t,e,n){return L1(t,e,n)}var rS=class{},rh=class{},Ym=class{resolveComponentFactory(e){throw new V(917,!1)}},bc=class{static NULL=new Ym},qi=class{},Jt=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>V1()}return t})();function V1(){let t=Y(),e=et(),n=Zt(e.index,t);return(Nn(n)?n:t)[Se]}var iS=(()=>{class t{static \u0275prov=U({token:t,providedIn:"root",factory:()=>null})}return t})();var Td={},hs=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Td,r);return i!==Td||n===Td?i:this.parentInjector.get(e,n,r)}};function Fd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Yl(i,a);else if(o==2){let u=a,l=e[++s];r=Yl(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function X(t,e=0){let n=Y();if(n===null)return ne(t,e);let r=et();return nb(r,n,Ze(t),e)}function j1(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}$1(t,e,n,a,o,u,l)}o!==null&&r!==null&&U1(n,r,o)}function U1(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new V(-301,!1);r.push(e[i],o)}}function B1(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function $1(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&hn(y)&&(u=!0,B1(t,n,g)),Bm(Md(n,e),t,y.type)}K1(n,t.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=kb(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=fs(n.mergedAttrs,y.hostAttrs),q1(t,n,e,p,y),W1(p,y,i),s!==null&&s.has(y)){let[S,R]=s.get(y);n.directiveToIndex.set(y.type,[p,S+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let I=y.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(I.ngOnChanges||I.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}H1(t,n,o)}function H1(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))_C(0,e,i,r),_C(1,e,i,r),IC(e,r,!1);else{let o=n.get(i);EC(0,e,o,r),EC(1,e,o,r),IC(e,r,!0)}}}function _C(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),oS(e,o)}}function EC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),oS(e,s)}}function oS(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function IC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Ty(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function q1(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Vr(i.type,!0)),s=new $i(o,hn(i),X,null);t.blueprint[r]=s,n[r]=s,z1(t,e,r,kb(t,n,i.hostVars,St),i)}function z1(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;G1(s)!=a&&s.push(a),s.push(n,r,o)}}function G1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function W1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;hn(e)&&(n[""]=t)}}function K1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function sS(t,e,n,r,i,o,s,a){let u=e[B],l=u.consts,h=pn(l,s),p=Cc(u,t,n,r,h);return o&&j1(u,e,p,pn(l,a),i),p.mergedAttrs=fs(p.mergedAttrs,p.attrs),p.attrs!==null&&Fd(p,p.attrs,!1),p.mergedAttrs!==null&&Fd(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function aS(t,e){Hx(t,e),rm(e)&&t.queries.elementEnd(e)}function Q1(t,e,n,r,i,o){let s=e.consts,a=pn(s,i),u=Cc(e,t,n,r,a);if(u.mergedAttrs=fs(u.mergedAttrs,u.attrs),o!=null){let l=pn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Fd(u,u.attrs,!1),u.mergedAttrs!==null&&Fd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function jy(t,e,n){return t[e]=n}function Y1(t,e){return t[e]}function Fn(t,e,n){if(n===St)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function cS(t,e,n,r){let i=Fn(t,e,n);return Fn(t,e+1,r)||i}function Cd(t,e,n){return function r(i){let o=Hr(t)?Zt(t.index,e):e;nh(o,5);let s=e[Be],a=wC(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=wC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function wC(t,e,n,r){let i=K(null);try{return pe(6,e,n),n(r)!==!1}catch(o){return ky(t,o),!1}finally{pe(7,e,n),K(i)}}function uS(t,e,n,r,i,o,s,a){let u=id(t),l=!1,h=null;if(!r&&u&&(h=Z1(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=fn(t,n),g=r?r(p):p;mO(n,g,o,a);let y=i.listen(g,o,a),I=r?S=>r(Yt(S[t.index])):t.index;lS(I,e,n,o,a,y,!1)}return l}function Z1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[ts],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function lS(t,e,n,r,i,o,s){let a=e.firstCreatePass?lm(e):null,u=um(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function DC(t,e,n,r,i,o){let s=e[n],a=e[B],l=a.data[n].outputs[r],p=s[l].subscribe(o);lS(t.index,a,e,i,o,p,!0)}var Zm=Symbol("BINDING");var Ld=class extends bc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=or(e);return new ms(n,this.ngModule)}};function J1(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Xd.SignalBased)!==0};return i&&(o.transform=i),o})}function X1(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function eF(t,e,n){let r=e instanceof je?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new hs(n,r):n}function tF(t){let e=t.get(qi,null);if(e===null)throw new V(407,!1);let n=t.get(iS,null),r=t.get(Kt,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function nF(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return Ab(e,n,n==="svg"?LT:n==="math"?VT:null)}var ms=class extends rh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=J1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=X1(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=MO(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){pe(22);let a=K(null);try{let u=this.componentDef,l=rF(r,u,s,o),h=eF(u,i||this.ngModule,e),p=tF(h),g=p.rendererFactory.createRenderer(null,u),y=r?XO(g,r,u.encapsulation,h):nF(u,g),I=s?.some(TC)||o?.some(x=>typeof x!="function"&&x.bindings.some(TC)),S=by(null,l,null,512|Pb(u),null,null,p,g,h,null,mb(y,h,!0));S[De]=y,fd(S);let R=null;try{let x=sS(De,S,2,"#host",()=>l.directiveRegistry,!0,0);y&&(Mb(g,y,x),ps(y,S)),Bb(l,S,x),_b(l,x,S),aS(l,x),n!==void 0&&oF(x,this.ngContentSelectors,n),R=Zt(x.index,S),S[Be]=R[Be],Oy(l,S,null)}catch(x){throw R!==null&&Hm(R),Hm(S),x}finally{pe(23),pd()}return new Vd(this.componentType,S,!!I)}finally{K(a)}}};function rF(t,e,n,r){let i=t?["ng-version","20.1.2"]:PO(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[Zm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[Zm].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=oc(p);u.push(g)}return Cy(0,null,iF(o,s),1,a,u,null,null,null,[i],null)}function iF(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function TC(t){let e=t[Zm].kind;return e==="input"||e==="twoWay"}var Vd=class extends rS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ji(n[B],De),this.location=_s(this._tNode,n),this.instance=Zt(this._tNode.index,n)[Be],this.hostView=this.changeDetectorRef=new Kr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=xy(r,i[B],i,e,n);this.previousInputValues.set(e,n);let s=Zt(r.index,i);nh(s,1)}get injector(){return new Bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function oF(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ki=(()=>{class t{static __NG_ELEMENT_ID__=sF}return t})();function sF(){let t=et();return hS(t,Y())}var aF=Ki,dS=class extends aF{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return _s(this._hostTNode,this._hostLView)}get injector(){return new Bi(this._hostTNode,this._hostLView)}get parentInjector(){let e=yy(this._hostTNode,this._hostLView);if(YC(e)){let n=Rd(e,this._hostLView),r=Ad(e),i=n[B].data[r+8];return new Bi(i,n)}else return new Bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=CC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Xe}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Od(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Hi(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!Vx(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new ms(or(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let x=(u?p:this.parentInjector).get(je,null);x&&(o=x)}let g=or(h.componentType??{}),y=Od(this._lContainer,g?.id??null),I=y?.firstChild??null,S=h.create(p,i,I,o,s,a);return this.insertImpl(S.hostView,l,Hi(this._hostTNode,y)),S}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(UT(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[qe],l=new dS(u,u[Tt],u[qe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Is(s,i,o,r),e.attachToViewContainerRef(),Kg(Mm(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=CC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=_c(this._lContainer,n);r&&(ic(Mm(this._lContainer),n),eh(r[B],r))}detach(e){let n=this._adjustIndex(e,-1),r=_c(this._lContainer,n);return r&&ic(Mm(this._lContainer),n)!=null?new Kr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function CC(t){return t[uc]}function Mm(t){return t[uc]||(t[uc]=[])}function hS(t,e){let n,r=e[t.index];return dn(r)?n=r:(n=Xb(r,e,null,t),e[t.index]=n,Sy(e,n)),uF(n,e,t,r),new dS(n,t,e)}function cF(t,e){let n=t[Se],r=n.createComment(""),i=fn(e,t),o=n.parentNode(i);return xd(n,o,r,n.nextSibling(i),!1),r}var uF=dF,lF=()=>!1;function fS(t,e,n){return lF(t,e,n)}function dF(t,e,n,r){if(t[$r])return;let i;n.type&8?i=Yt(r):i=cF(e,n),t[$r]=i}var Jm=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Xm=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Uy(e,n).matches!==null&&this.queries[n].setDirty()}},jd=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=_F(e):this.predicate=e}},ey=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},ty=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,hF(n,o)),this.matchTNodeWithReadOption(e,n,Dd(n,e,o,!1,!1))}else r===gs?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Dd(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===gt||i===Ki||i===gs&&n.type&4)this.addMatch(n.index,-2);else{let o=Dd(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function hF(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function fF(t,e){return t.type&11?_s(t,e):t.type&4?Vy(t,e):null}function pF(t,e,n,r){return n===-1?fF(e,t):n===-2?gF(t,e,r):yc(t,t[B],n,e)}function gF(t,e,n){if(n===gt)return _s(e,t);if(n===gs)return Vy(e,t);if(n===Ki)return hS(e,t)}function pS(t,e,n,r){let i=e[Rn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(pF(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function ny(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=pS(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=Xe;p<h.length;p++){let g=h[p];g[Ur]===g[qe]&&ny(g[B],g,l,r)}if(h[Vi]!==null){let p=h[Vi];for(let g=0;g<p.length;g++){let y=p[g];ny(y[B],y,l,r)}}}}}return r}function mF(t,e){return t[Rn].queries[e].queryList}function gS(t,e,n){let r=new Pd((n&4)===4);return BT(t,e,r,r.destroy),(e[Rn]??=new Xm).queries.push(new Jm(r))-1}function yF(t,e,n){let r=xe();return r.firstCreatePass&&(mS(r,new jd(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),gS(r,Y(),e)}function vF(t,e,n,r){let i=xe();if(i.firstCreatePass){let o=et();mS(i,new jd(e,n,r),o.index),EF(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return gS(i,Y(),n)}function _F(t){return t.split(",").map(e=>e.trim())}function mS(t,e,n){t.queries===null&&(t.queries=new ey),t.queries.track(new ty(e,n))}function EF(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Uy(t,e){return t.queries.getByIndex(e)}function IF(t,e){let n=t[B],r=Uy(n,e);return r.crossesNgTemplate?ny(n,t,e,[]):pS(n,t,r,e)}var bC=new Set;function vn(t){bC.has(t)||(bC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var zi=class{},ih=class{};var Ud=class extends zi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ld(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Zg(e);this._bootstrapComponents=Cb(o.bootstrap),this._r3Injector=Tm(e,n,[{provide:zi,useValue:this},{provide:bc,useValue:this.componentFactoryResolver},...r],nr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Bd=class extends ih{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ud(this.moduleType,e,[])}};var Ec=class extends zi{injector;componentFactoryResolver=new Ld(this);instance=null;constructor(e){super();let n=new Ni([...e.providers,{provide:zi,useValue:this},{provide:bc,useValue:this.componentFactoryResolver}],e.parent||ac(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ws(t,e,n=null){return new Ec({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var wF=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=nd(!1,n.type),i=r.length>0?ws([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=U({token:t,providedIn:"environment",factory:()=>new t(ne(je))})}return t})();function Sc(t){return vs(()=>{let e=yS(t),n=W(k({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===vy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(wF).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ar.Emulated,styles:t.styles||Dt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&vn("NgStandalone"),vS(n);let r=t.dependencies;return n.directiveDefs=SC(r,DF),n.pipeDefs=SC(r,Jg),n.id=bF(n),n})}function DF(t){return or(t)||oc(t)}function Zr(t){return vs(()=>({type:t.type,bootstrap:t.bootstrap||Dt,declarations:t.declarations||Dt,imports:t.imports||Dt,exports:t.exports||Dt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function TF(t,e){if(t==null)return cn;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Xd.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function CF(t){if(t==null)return cn;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function de(t){return vs(()=>{let e=yS(t);return vS(e),e})}function Ac(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function yS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||cn,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Dt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:TF(t.inputs,e),outputs:CF(t.outputs),debugInfo:null}}function vS(t){t.features?.forEach(e=>e(t))}function SC(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function bF(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function SF(t){return Object.getPrototypeOf(t.prototype).constructor}function Ot(t){let e=SF(t.type),n=!0,r=[t];for(;e;){let i;if(hn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new V(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Pm(t.inputs),s.declaredInputs=Pm(t.declaredInputs),s.outputs=Pm(t.outputs);let a=i.hostBindings;a&&PF(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&NF(t,u),l&&MF(t,l),AF(t,i),ET(t.outputs,i.outputs),hn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Ot&&(n=!1)}}e=Object.getPrototypeOf(e)}RF(r)}function AF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function RF(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fs(i.hostAttrs,n=fs(n,i.hostAttrs))}}function Pm(t){return t===cn?{}:t===Dt?[]:t}function NF(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function MF(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function PF(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function By(t){let e=n=>{let r=Array.isArray(t);n.hostDirectives===null?(n.resolveHostDirectives=kF,n.hostDirectives=r?t.map(ry):[t]):r?n.hostDirectives.unshift(...t.map(ry)):n.hostDirectives.unshift(t)};return e.ngInherit=!0,e}function kF(t){let e=[],n=!1,r=null,i=null;for(let o=0;o<t.length;o++){let s=t[o];if(s.hostDirectives!==null){let a=e.length;r??=new Map,i??=new Map,_S(s,e,r),i.set(s,[a,e.length-1])}o===0&&hn(s)&&(n=!0,e.push(s))}for(let o=n?1:0;o<t.length;o++)e.push(t[o]);return[e,r,i]}function _S(t,e,n){if(t.hostDirectives!==null)for(let r of t.hostDirectives)if(typeof r=="function"){let i=r();for(let o of i)AC(ry(o),e,n)}else AC(r,e,n)}function AC(t,e,n){let r=oc(t.directive);xF(r.declaredInputs,t.inputs),_S(r,e,n),n.set(r,t),e.push(r)}function ry(t){return typeof t=="function"?{directive:Ze(t),inputs:cn,outputs:cn}:{directive:Ze(t.directive),inputs:RC(t.inputs),outputs:RC(t.outputs)}}function RC(t){if(t===void 0||t.length===0)return cn;let e={};for(let n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e}function xF(t,e){for(let n in e)if(e.hasOwnProperty(n)){let r=e[n],i=t[n];t[r]=i}}function OF(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=fs(t.mergedAttrs,t.attrs);let h=t.tView=Cy(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),is(t,!1);let u=FF(n,e,t,r);gd()&&Ny(n,e,u,t),ps(u,e);let l=Xb(u,e,u,t);e[r+De]=l,Sy(e,l),fS(l,t,e)}function Gi(t,e,n,r,i,o,s,a,u,l,h){let p=n+De,g;if(e.firstCreatePass){if(g=Cc(e,p,4,s||null,a||null),l!=null){let y=pn(e.consts,l);g.localNames=[];for(let I=0;I<y.length;I+=2)g.localNames.push(y[I],-1)}}else g=e.data[p];return OF(g,t,e,n,r,i,o,u),l!=null&&Py(t,g,h),g}function ES(t,e,n,r,i,o,s,a){let u=Y(),l=xe(),h=pn(l.consts,o);return Gi(u,l,t,e,n,r,i,h,void 0,s,a),ES}var FF=LF;function LF(t,e,n,r){return md(!0),e[Se].createComment("")}var xt=function(t){return t[t.NOT_STARTED=0]="NOT_STARTED",t[t.IN_PROGRESS=1]="IN_PROGRESS",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t}(xt||{}),NC=0,VF=1,$e=function(t){return t[t.Placeholder=0]="Placeholder",t[t.Loading=1]="Loading",t[t.Complete=2]="Complete",t[t.Error=3]="Error",t}($e||{}),$y=function(t){return t[t.Initial=-1]="Initial",t}($y||{}),jF=0,Rc=1;var UF=4,BF=5,$F=6,HF=7,km=8,qF=9,Hy=function(t){return t[t.Manual=0]="Manual",t[t.Playthrough=1]="Playthrough",t}(Hy||{});function IS(t,e,n){let r=DS(t);e[r]===null&&(e[r]=[]),e[r].push(n)}function bd(t,e){let n=DS(t),r=e[n];if(r!==null){for(let i of r)i();e[n]=null}}function wS(t){bd(1,t),bd(0,t),bd(2,t)}function DS(t){let e=UF;return t===1?e=BF:t===2&&(e=qF),e}var oh=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(oh||{}),Qi=new j(""),TS=!1,iy=class extends Ve{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,OT()&&(this.destroyRef=M(ut,{optional:!0})??void 0,this.pendingTasks=M(kn,{optional:!0})??void 0)}emit(e){let n=K(null);try{super.next(e)}finally{K(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Pe&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Oe=iy;function CS(t){let e,n;function r(){t=Ui;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function MC(t){return queueMicrotask(()=>t()),()=>{t=Ui}}var qy="isAngularZone",$d=qy+"_ID",zF=0,_e=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Oe(!1);onMicrotaskEmpty=new Oe(!1);onStable=new Oe(!1);onError=new Oe(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=TS}=e;if(typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,KF(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qy)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new V(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,GF,Ui,Ui);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},GF={};function zy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function WF(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){CS(()=>{t.callbackScheduled=!1,oy(t),t.isCheckStableRunning=!0,zy(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),oy(t)}function KF(t){let e=()=>{WF(t)},n=zF++;t._inner=t._inner.fork({name:"angular",properties:{[qy]:!0,[$d]:n,[$d+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(QF(u))return r.invokeTask(o,s,a,u);try{return PC(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),kC(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return PC(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!YF(u)&&e(),kC(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,oy(t),zy(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function oy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function PC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function kC(t){t._nesting--,zy(t)}var Ic=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Oe;onMicrotaskEmpty=new Oe;onStable=new Oe;onError=new Oe;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function QF(t){return bS(t,"__ignore_ng_zone__")}function YF(t){return bS(t,"__scheduler_tick__")}function bS(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Gy=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})(),SS=[0,1,2,3],AS=(()=>{class t{ngZone=M(_e);scheduler=M(Kt);errorHandler=M(Vt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(Qi,{optional:!0})}execute(){let n=this.sequences.size>0;n&&pe(16),this.executing=!0;for(let r of SS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&pe(17)}register(n){let{view:r}=n;r!==void 0?((r[Li]??=[]).push(n),qr(r),r[Q]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(oh.AFTER_NEXT_RENDER,n):n()}static \u0275prov=U({token:t,providedIn:"root",factory:()=>new t})}return t})(),Hd=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Li];e&&(this.view[Li]=e.filter(n=>n!==this))}};function RS(t,e){let n=e?.injector??M(Ue);return vn("NgAfterRender"),NS(t,n,e,!1)}function sh(t,e){let n=e?.injector??M(Ue);return vn("NgAfterNextRender"),NS(t,n,e,!0)}function ZF(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function NS(t,e,n,r){let i=e.get(Gy);i.impl??=e.get(AS);let o=e.get(Qi,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(ut):null,a=e.get(as,null,{optional:!0}),u=new Hd(i.impl,ZF(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}function ah(t){return t+1}function Ds(t,e){let n=t[B],r=ah(e.index);return t[r]}function JF(t,e,n){let r=t[B],i=ah(e);t[i]=n}function Ts(t,e){let n=ah(e.index);return t.data[n]}function XF(t,e,n){let r=ah(e);t.data[r]=n}function eL(t,e,n){let r=e[B],i=Ts(r,n);switch(t){case $e.Complete:return i.primaryTmplIndex;case $e.Loading:return i.loadingTmplIndex;case $e.Error:return i.errorTmplIndex;case $e.Placeholder:return i.placeholderTmplIndex;default:return null}}function xC(t,e){return e===$e.Placeholder?t.placeholderBlockConfig?.[NC]??null:e===$e.Loading?t.loadingBlockConfig?.[NC]??null:null}function tL(t){return t.loadingBlockConfig?.[VF]??null}function OC(t,e){if(!t||t.length===0)return e;let n=new Set(t);for(let r of e)n.add(r);return t.length===n.size?t:Array.from(n)}function nL(t,e){let n=e.primaryTmplIndex+De;return ji(t,n)}function rL(t,e,n){let r=n.get(_e);return pO(t,()=>r.run(e),()=>r.runOutsideAngular(()=>fO()))}function iL(t,e,n){return n==null?t:n>=0?cm(n,t):t[e.index][Xe]??null}function oL(t,e){return od(De+e,t)}function sL(t,e,n,r,i,o,s){let a=t[jt],u=a.get(_e),l;function h(){if(Mn(t)){l.destroy();return}let p=Ds(t,e),g=p[Rc];if(g!==$y.Initial&&g!==$e.Placeholder){l.destroy();return}let y=iL(t,e,r);if(!y||(l.destroy(),Mn(y)))return;let I=oL(y,n),S=i(I,()=>{u.run(()=>{t!==y&&cd(y,S),o()})},a);t!==y&&dc(y,S),IS(s,p,S)}l=RS({read:h},{injector:a})}var aL=(()=>{class t{cachedInjectors=new Map;getOrCreateInjector(n,r,i,o){if(!this.cachedInjectors.has(n)){let s=i.length>0?ws(i,r,o):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=U({token:t,providedIn:"environment",factory:()=>new t})}return t})();var MS=new j("");function xm(t,e,n){return t.get(aL).getOrCreateInjector(e,t,n,"")}function cL(t,e,n){if(t instanceof hs){let i=t.injector,o=t.parentInjector,s=xm(o,e,n);return new hs(i,s)}let r=t.get(je);if(r!==t){let i=xm(r,e,n);return new hs(t,i)}return xm(t,e,n)}function Wr(t,e,n,r=!1){let i=n[qe],o=i[B];if(Mn(i))return;let s=Ds(i,e),a=s[Rc],u=s[HF];if(!(u!==null&&t<u)&&FC(a,t)&&FC(s[jF]??-1,t)){let l=Ts(o,e),p=!r&&!0&&(tL(l)!==null||xC(l,$e.Loading)!==null||xC(l,$e.Placeholder))?hL:lL;try{p(t,s,n,e,i)}catch(g){ky(i,g)}}}function uL(t,e){let n=t[Br]?.findIndex(i=>i.data[Iy]===e[Rc])??-1;return{dehydratedView:n>-1?t[Br][n]:null,dehydratedViewIx:n}}function lL(t,e,n,r,i){pe(20);let o=eL(t,i,r);if(o!==null){e[Rc]=t;let s=i[B],a=o+De,u=ji(s,a),l=0;Ly(n,l);let h;if(t===$e.Complete){let I=Ts(s,r),S=I.providers;S&&S.length>0&&(h=cL(i[jt],I,S))}let{dehydratedView:p,dehydratedViewIx:g}=uL(n,e),y=Es(i,u,null,{injector:h,dehydratedView:p});if(Is(n,y,l,Hi(u,p)),nh(y,2),g>-1&&n[Br]?.splice(g,1),(t===$e.Complete||t===$e.Error)&&Array.isArray(e[km])){for(let I of e[km])I();e[km]=null}}pe(21)}function FC(t,e){return t<e}function dL(t,e){let n=t[e.index];Wr($e.Placeholder,e,n)}function LC(t,e,n){t.loadingPromise.then(()=>{t.loadingState===xt.COMPLETE?Wr($e.Complete,e,n):t.loadingState===xt.FAILED&&Wr($e.Error,e,n)})}var hL=null;var Wy=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Ky=new j("");function Jr(t){return!!t&&typeof t.then=="function"}function Qy(t){return!!t&&typeof t.subscribe=="function"}var PS=new j("");var Yy=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M(PS,{optional:!0})??[];injector=M(Ue);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Je(this.injector,i);if(Jr(o))n.push(o);else if(Qy(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ch=new j("");function kS(){Dg(()=>{let t="";throw new V(600,t)})}function xS(t){return t.isBoundToModule}var fL=10;var ur=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(bt);afterRenderManager=M(Gy);zonelessEnabled=M(fc);rootEffectScheduler=M(pc);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ve;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(kn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ce(n=>!n))}constructor(){M(Qi,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(je);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ue.NULL){return this._injector.get(_e).run(()=>{pe(10);let s=n instanceof rh;if(!this._injector.get(Yy).done){let I="";throw new V(405,I)}let u;s?u=n:u=this._injector.get(bc).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=xS(u)?void 0:this._injector.get(zi),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Ky,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),mc(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),pe(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){pe(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(oh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new V(101,!1);let n=K(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,K(n),this.afterTick.next(),pe(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(qi,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<fL;)pe(14),this.synchronizeOnce(),pe(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!lc(i))continue;let o=r&&!this.zonelessEnabled?0:1;Fy(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>lc(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;mc(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(ch,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>mc(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new V(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function OS(t,e,n){let r=e[jt],i=e[B];if(t.loadingState!==xt.NOT_STARTED)return t.loadingPromise??Promise.resolve();let o=Ds(e,n),s=nL(i,t);t.loadingState=xt.IN_PROGRESS,bd(1,o);let a=t.dependencyResolverFn,u=r.get(Gr).add();return a?(t.loadingPromise=Promise.allSettled(a()).then(l=>{let h=!1,p=[],g=[];for(let y of l)if(y.status==="fulfilled"){let I=y.value,S=or(I)||oc(I);if(S)p.push(S);else{let R=Jg(I);R&&g.push(R)}}else{h=!0;break}if(h){if(t.loadingState=xt.FAILED,t.errorTmplIndex===null){let y="",I=new V(-750,!1);ky(e,I)}}else{t.loadingState=xt.COMPLETE;let y=s.tView;if(p.length>0){y.directiveRegistry=OC(y.directiveRegistry,p);let I=p.map(R=>R.type),S=nd(!1,...I);t.providers=S}g.length>0&&(y.pipeRegistry=OC(y.pipeRegistry,g))}}),t.loadingPromise.finally(()=>{t.loadingPromise=null,u()})):(t.loadingPromise=Promise.resolve().then(()=>{t.loadingPromise=null,t.loadingState=xt.COMPLETE,u()}),t.loadingPromise)}function pL(t,e){return e[jt].get(MS,null,{optional:!0})?.behavior!==Hy.Manual}function gL(t,e,n){let r=e[B],i=e[n.index];if(!pL(t,e))return;let o=Ds(e,n),s=Ts(r,n);switch(wS(o),s.loadingState){case xt.NOT_STARTED:Wr($e.Loading,n,i),OS(s,e,n),s.loadingState===xt.IN_PROGRESS&&LC(s,n,i);break;case xt.IN_PROGRESS:Wr($e.Loading,n,i),LC(s,n,i);break;case xt.COMPLETE:Wr($e.Complete,n,i);break;case xt.FAILED:Wr($e.Error,n,i);break;default:}}function mL(t,e,n){return t===0?VC(e,n):t===2?!VC(e,n):!0}function yL(t){return t!=null&&(t&1)===1}function VC(t,e){let n=t[jt],r=Ts(t[B],e),i=yb(n),o=yL(r.flags),a=Ds(t,e)[$F]!==null;return!(o&&a&&i)}function vL(t,e,n,r,i,o,s,a,u,l){let h=Y(),p=xe(),g=t+De,y=Gi(h,p,t,null,0,0),I=h[jt];if(p.firstCreatePass){vn("NgDefer");let Le={primaryTmplIndex:e,loadingTmplIndex:r??null,placeholderTmplIndex:i??null,errorTmplIndex:o??null,placeholderBlockConfig:null,loadingBlockConfig:null,dependencyResolverFn:n??null,loadingState:xt.NOT_STARTED,loadingPromise:null,providers:null,hydrateTriggers:null,debug:null,flags:l??0};u?.(p,Le,a,s),XF(p,g,Le)}let S=h[g];fS(S,y,h);let R=null,x=null;if(S[Br]?.length>0){let Le=S[Br][0].data;x=Le[Ey]??null,R=Le[Iy]}let $=[null,$y.Initial,null,null,null,null,x,R,null,null];JF(h,g,$);let G=null;x!==null&&(G=I.get(gb),G.add(x,{lView:h,tNode:y,lContainer:S}));let ye=()=>{wS($),x!==null&&G?.cleanup([x])};IS(0,$,()=>cd(h,ye)),dc(h,ye)}function _L(t,e){let n=Y(),r=et();mL(0,n,r)&&(dL(n,r),sL(n,r,t,e,rL,()=>gL(0,n,r),0))}function Nc(t,e,n,r){let i=Y(),o=ss();if(Fn(i,o,e)){let s=xe(),a=Dm();l1(a,i,t,e,n,r)}return Nc}var sy=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Om(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function EL(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Om(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let g=t.at(s),y=e[u],I=Om(s,g,u,y,n);if(I!==0){I<0&&t.updateValue(s,y),s--,u--;continue}let S=n(o,l),R=n(s,g),x=n(o,h);if(Object.is(x,R)){let $=n(u,y);Object.is($,S)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new qd,i??=UC(t,o,s,n),ay(t,r,o,x))t.updateValue(o,h),o++,s++;else if(i.has(x))r.set(S,t.detach(o)),s--;else{let $=t.create(o,e[o]);t.attach(o,$),o++,s++}}for(;o<=u;)jC(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,g=Om(o,h,o,p,n);if(g!==0)g<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new qd,i??=UC(t,o,s,n);let y=n(o,p);if(ay(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let I=n(o,h);r.set(I,t.detach(o)),s--}}}for(;!l.done;)jC(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function ay(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function jC(t,e,n,r,i){if(ay(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function UC(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var qd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function IL(t,e,n,r,i,o,s,a){vn("NgControlFlow");let u=Y(),l=xe(),h=pn(l.consts,o);return Gi(u,l,t,e,n,r,i,h,256,s,a),Zy}function Zy(t,e,n,r,i,o,s,a){vn("NgControlFlow");let u=Y(),l=xe(),h=pn(l.consts,o);return Gi(u,l,t,e,n,r,i,h,512,s,a),Zy}function wL(t,e){vn("NgControlFlow");let n=Y(),r=ss(),i=n[r]!==St?n[r]:-1,o=i!==-1?zd(n,De+i):void 0,s=0;if(Fn(n,r,t)){let a=K(null);try{if(o!==void 0&&Ly(o,s),t!==-1){let u=De+t,l=zd(n,u),h=dy(n[B],u),p=nS(l,h,n),g=Es(n,h,e,{dehydratedView:p});Is(l,g,s,Hi(h,p))}}finally{K(a)}}else if(o!==void 0){let a=eS(o,s);a!==void 0&&(a[Be]=e)}}var cy=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Xe}};function DL(t){return t}function TL(t,e){return e}var uy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function CL(t,e,n,r,i,o,s,a,u,l,h,p,g){vn("NgControlFlow");let y=Y(),I=xe(),S=u!==void 0,R=Y(),x=a?s.bind(R[Ct][Be]):s,$=new uy(S,x);R[De+t]=$,Gi(y,I,t+1,e,n,r,i,pn(I.consts,o),256),S&&Gi(y,I,t+2,u,l,h,p,pn(I.consts,g),512)}var ly=class extends sy{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Xe}at(e){return this.getLView(e)[Be].$implicit}attach(e,n){let r=n[xi];this.needsIndexUpdate||=e!==this.length,Is(this.lContainer,n,e,Hi(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,SL(this.lContainer,e)}create(e,n){let r=Od(this.lContainer,this.templateTNode.tView.ssrId),i=Es(this.hostLView,this.templateTNode,new cy(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){eh(e[B],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Be].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Be].$index=e}getLView(e){return AL(this.lContainer,e)}};function bL(t){let e=K(null),n=Pn();try{let r=Y(),i=r[B],o=r[n],s=n+1,a=zd(r,s);if(o.liveCollection===void 0){let l=dy(i,s);o.liveCollection=new ly(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(EL(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=ss(),h=u.length===0;if(Fn(r,l,h)){let p=n+2,g=zd(r,p);if(h){let y=dy(i,p),I=nS(g,y,r),S=Es(r,y,void 0,{dehydratedView:I});Is(g,S,0,Hi(y,I))}else i.firstUpdatePass&&x1(g),Ly(g,0)}}}finally{K(e)}}function zd(t,e){return t[e]}function SL(t,e){return _c(t,e)}function AL(t,e){return eS(t,e)}function dy(t,e){return ji(t,e)}function FS(t,e,n){let r=Y(),i=ss();if(Fn(r,i,e)){let o=xe(),s=Dm();r1(s,r,t,e,r[Se],n)}return FS}function hy(t,e,n,r,i){xy(e,t,n,i?"class":"style",r)}function Jy(t,e,n,r){let i=Y(),o=i[B],s=t+De,a=o.firstCreatePass?sS(s,i,2,e,u1,qT(),n,r):o.data[s];if($b(a,i,t,e,VS),id(a)){let u=i[B];Bb(u,i,a),_b(u,a,i)}return r!=null&&Py(i,a),Jy}function Xy(){let t=xe(),e=et(),n=Hb(e);return t.firstCreatePass&&aS(t,n),fm(n)&&pm(),dm(),n.classesWithoutHost!=null&&zx(n)&&hy(t,n,Y(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Gx(n)&&hy(t,n,Y(),n.stylesWithoutHost,!1),Xy}function Cs(t,e,n,r){return Jy(t,e,n,r),Xy(),Cs}function ev(t,e,n,r){let i=Y(),o=i[B],s=t+De,a=o.firstCreatePass?Q1(s,o,2,e,n,r):o.data[s];return $b(a,i,t,e,VS),r!=null&&Py(i,a),ev}function tv(){let t=et(),e=Hb(t);return fm(e)&&pm(),dm(),tv}function LS(t,e,n,r){return ev(t,e,n,r),tv(),LS}var VS=(t,e,n,r,i)=>(md(!0),Ab(e[Se],r,oC()));function RL(){return Y()}var Mc="en-US";var NL=Mc;function jS(t){typeof t=="string"&&(NL=t.toLowerCase().replace(/_/g,"-"))}function _n(t,e,n){let r=Y(),i=xe(),o=et();return ML(i,r,r[Se],o,t,e,n),_n}function US(t,e,n){let r=Y(),i=xe(),o=et();return(o.type&3||n)&&uS(o,i,r,n,r[Se],t,e,Cd(o,r,e)),US}function ML(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Cd(r,e,o),uS(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Cd(r,e,o),DC(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Cd(r,e,o),DC(r,e,p,i,i,u)}}function PL(t=1){return iC(t)}function kL(t,e){let n=null,r=bO(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?Sb(t,o,!0):RO(r,o))return i}return n}function xL(t){let e=Y()[Ct][Tt];if(!e.projection){let n=t?t.length:1,r=e.projection=AT(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?kL(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function OL(t,e=0,n,r,i,o){let s=Y(),a=xe(),u=r?t+1:null;u!==null&&Gi(s,a,u,r,i,o,null,n);let l=Cc(a,De+t,16,null,n||null);l.projection===null&&(l.projection=e),ym();let p=!s[xi]||hm();s[Ct][Tt].projection[l.projection]===null&&u!==null?FL(s,a,u):p&&!Zd(l)&&YO(a,s,l)}function FL(t,e,n){let r=De+n,i=e.data[r],o=t[r],s=Od(o,i.tView.ssrId),a=Es(t,i,void 0,{dehydratedView:s});Is(o,a,0,Hi(i,s))}function nv(t,e,n,r){vF(t,e,n,r)}function LL(t,e,n){yF(t,e,n)}function rv(t){let e=Y(),n=xe(),r=Em();hd(r+1);let i=Uy(n,r);if(t.dirty&&jT(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=IF(e,r);t.reset(o,oO),t.notifyOnChanges()}return!0}return!1}function iv(){return mF(Y(),Em())}function VL(t){let e=KT();return im(e,De+t)}function Ed(t,e){return t<<17|e<<2}function Wi(t){return t>>17&32767}function jL(t){return(t&2)==2}function UL(t,e){return t&131071|e<<17}function fy(t){return t|2}function ys(t){return(t&131068)>>2}function Fm(t,e){return t&-131069|e<<2}function BL(t){return(t&1)===1}function py(t){return t|1}function $L(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Wi(s),u=ys(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||es(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let g=Wi(t[a+1]);t[r+1]=Ed(g,a),g!==0&&(t[g+1]=Fm(t[g+1],r)),t[a+1]=UL(t[a+1],r)}else t[r+1]=Ed(a,0),a!==0&&(t[a+1]=Fm(t[a+1],r)),a=r;else t[r+1]=Ed(u,0),a===0?a=r:t[u+1]=Fm(t[u+1],r),u=r;l&&(t[r+1]=fy(t[r+1])),BC(t,h,r,!0),BC(t,h,r,!1),HL(e,h,t,r,o),s=Ed(a,u),o?e.classBindings=s:e.styleBindings=s}function HL(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&es(o,e)>=0&&(n[r+1]=py(n[r+1]))}function BC(t,e,n,r){let i=t[n+1],o=e===null,s=r?Wi(i):ys(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];qL(u,e)&&(a=!0,t[s+1]=r?py(l):fy(l)),s=r?Wi(l):ys(l)}a&&(t[n+1]=r?fy(i):py(i))}function qL(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?es(t,e)>=0:!1}var mn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zL(t){return t.substring(mn.key,mn.keyEnd)}function GL(t){return WL(t),BS(t,$S(t,0,mn.textEnd))}function BS(t,e){let n=mn.textEnd;return n===e?-1:(e=mn.keyEnd=KL(t,mn.key=e,n),$S(t,e,n))}function WL(t){mn.key=0,mn.keyEnd=0,mn.value=0,mn.valueEnd=0,mn.textEnd=t.length}function $S(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function KL(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Pc(t,e){return YL(t,e,null,!0),Pc}function ov(t){ZL(rV,QL,t,!0)}function QL(t,e){for(let n=GL(e);n>=0;n=BS(e,n))ed(t,zL(e),!0)}function YL(t,e,n,r){let i=Y(),o=xe(),s=ld(2);if(o.firstUpdatePass&&qS(o,t,s,r),e!==St&&Fn(i,s,e)){let a=o.data[Pn()];zS(o,a,i,i[Se],t,i[s+1]=oV(e,n),r,s)}}function ZL(t,e,n,r){let i=xe(),o=ld(2);i.firstUpdatePass&&qS(i,null,o,r);let s=Y();if(n!==St&&Fn(s,o,n)){let a=i.data[Pn()];if(GS(a,r)&&!HS(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=Yl(u,n||"")),hy(i,a,s,n,r)}else iV(i,a,s,s[Se],s[o+1],s[o+1]=nV(t,e,n),r,o)}}function HS(t,e){return e>=t.expandoStartIndex}function qS(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Pn()],s=HS(t,n);GS(o,r)&&e===null&&!s&&(e=!1),e=JL(i,o,e,r),$L(i,o,e,n,s,r)}}function JL(t,e,n,r){let i=eC(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Lm(null,t,e,n,r),n=wc(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Lm(i,t,e,n,r),o===null){let u=XL(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Lm(null,t,e,u[1],r),u=wc(u,e.attrs,r),eV(t,e,r,u))}else o=tV(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function XL(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ys(r)!==0)return t[Wi(r)]}function eV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Wi(i)]=r}function tV(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=wc(r,s,n)}return wc(r,e.attrs,n)}function Lm(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=wc(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function wc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ed(t,s,n?!0:e[++o]))}return t===void 0?null:t}function nV(t,e,n){if(n==null||n==="")return Dt;let r=[],i=Tc(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function rV(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&ed(t,r,n)}function iV(t,e,n,r,i,o,s,a){i===St&&(i=Dt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,I=null,S;h===p?(u+=2,l+=2,g!==y&&(I=p,S=y)):p===null||h!==null&&h<p?(u+=2,I=h):(l+=2,I=p,S=y),I!==null&&zS(t,e,n,r,I,S,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function zS(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=BL(l)?$C(u,e,n,i,ys(l),s):void 0;if(!Gd(h)){Gd(o)||jL(l)&&(o=$C(u,null,n,i,a,s));let p=od(Pn(),n);JO(r,s,p,i,o)}}function $C(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=n[i+1];g===St&&(g=p?Dt:void 0);let y=p?td(g,r):h===r?g:void 0;if(l&&!Gd(y)&&(y=td(u,r)),Gd(y)&&(a=y,s))return a;let I=t[i+1];i=s?Wi(I):ys(I)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=td(u,r))}return a}function Gd(t){return t!==void 0}function oV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=nr(Tc(t)))),t}function GS(t,e){return(t.flags&(e?8:16))!==0}function sV(t,e=""){let n=Y(),r=xe(),i=t+De,o=r.firstCreatePass?Cc(r,i,1,e,null):r.data[i],s=aV(r,n,o,e,t);n[i]=s,gd()&&Ny(r,n,s,o),is(o,!1)}var aV=(t,e,n,r,i)=>(md(!0),kO(e[Se],r));function cV(t,e,n,r=""){return Fn(t,ss(),n)?e+ki(n)+r:St}function uV(t,e,n,r,i,o=""){let s=QT(),a=cS(t,s,n,i);return ld(2),a?e+ki(n)+r+ki(i)+o:St}function WS(t){return sv("",t),WS}function sv(t,e,n){let r=Y(),i=cV(r,t,e,n);return i!==St&&QS(r,Pn(),i),sv}function KS(t,e,n,r,i){let o=Y(),s=uV(o,t,e,n,r,i);return s!==St&&QS(o,Pn(),s),KS}function QS(t,e,n){let r=od(e,t);xO(t[Se],r,n)}function lV(t,e,n){let r=xe();if(r.firstCreatePass){let i=hn(t);gy(n,r.data,r.blueprint,i,!0),gy(e,r.data,r.blueprint,i,!1)}}function gy(t,e,n,r,i){if(t=Ze(t),Array.isArray(t))for(let o=0;o<t.length;o++)gy(t[o],e,n,r,i);else{let o=xe(),s=Y(),a=et(),u=Ri(t)?t:Ze(t.provide),l=em(t),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Ri(t)||!t.multi){let y=new $i(l,i,X,null),I=jm(u,e,i?h:h+g,p);I===-1?(Bm(Md(a,s),o,u),Vm(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[I]=y,s[I]=y)}else{let y=jm(u,e,h+g,p),I=jm(u,e,h,h+g),S=y>=0&&n[y],R=I>=0&&n[I];if(i&&!R||!i&&!S){Bm(Md(a,s),o,u);let x=fV(i?hV:dV,n.length,i,r,l,t);!i&&R&&(n[I].providerFactory=x),Vm(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),s.push(x)}else{let x=YS(n[i?I:y],l,!i&&r);Vm(o,t,y>-1?y:I,x)}!i&&r&&R&&n[I].componentProviders++}}}function Vm(t,e,n,r){let i=Ri(e),o=xT(e);if(i||o){let u=(o?Ze(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function YS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function jm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function dV(t,e,n,r,i){return my(this.multi,[])}function hV(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=yc(r,r[B],this.providerFactory.index,i);s=u.slice(0,a),my(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],my(o,s);return s}function my(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function fV(t,e,n,r,i,o){let s=new $i(t,n,X,null);return s.multi=[],s.index=e,s.componentProviders=0,YS(s,i,r&&!n),s}function Xr(t,e=[]){return n=>{n.providersResolver=(r,i)=>lV(r,i?i(t):t,e)}}function pV(t,e,n){let r=ud()+t,i=Y();return i[r]===St?jy(i,r,n?e.call(n):e()):Y1(i,r)}function gV(t,e,n,r,i){return yV(Y(),ud(),t,e,n,r,i)}function ZS(t,e){let n=t[e];return n===St?void 0:n}function mV(t,e,n,r,i,o){let s=e+n;return Fn(t,s,i)?jy(t,s+1,o?r.call(o,i):r(i)):ZS(t,s+1)}function yV(t,e,n,r,i,o,s){let a=e+n;return cS(t,a,i,o)?jy(t,a+2,s?r.call(s,i,o):r(i,o)):ZS(t,a+2)}function vV(t,e){let n=xe(),r,i=t+De;n.firstCreatePass?(r=_V(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Vr(r.type,!0)),s,a=wt(X);try{let u=Nd(!1),l=o();return Nd(u),om(n,Y(),i,l),l}finally{wt(a)}}function _V(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function EV(t,e,n){let r=t+De,i=Y(),o=im(i,r);return IV(i,r)?mV(i,ud(),e,o.transform,n,o):o.transform(n)}function IV(t,e){return t[B].data[e].pure}var Wd=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},av=(()=>{class t{compileModuleSync(n){return new Bd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Zg(n),o=Cb(i.declarations).reduce((s,a)=>{let u=or(a);return u&&s.push(new ms(u)),s},[]);return new Wd(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var wV=(()=>{class t{zone=M(_e);changeDetectionScheduler=M(Kt);applicationRef=M(ur);applicationErrorHandler=M(bt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function JS({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new _e(W(k({},XS()),{scheduleInRootZone:n})),[{provide:_e,useFactory:t},{provide:ir,multi:!0,useFactory:()=>{let r=M(wV,{optional:!0});return()=>r.initialize()}},{provide:ir,multi:!0,useFactory:()=>{let r=M(DV);return()=>{r.initialize()}}},e===!0?{provide:bm,useValue:!0}:[],{provide:yd,useValue:n??TS},{provide:bt,useFactory:()=>{let r=M(_e),i=M(je),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Vt),o.handleError(s))})}}}]}function XS(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var DV=(()=>{class t{subscription=new Pe;initialized=!1;zone=M(_e);pendingTasks=M(kn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var cv=(()=>{class t{applicationErrorHandler=M(bt);appRef=M(ur);taskService=M(kn);ngZone=M(_e);zonelessEnabled=M(fc);tracing=M(Qi,{optional:!0});disableScheduling=M(bm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($d):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(yd,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ic||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?MC:CS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($d+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,MC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function TV(){return vn("NgZoneless"),un([{provide:Kt,useExisting:cv},{provide:_e,useClass:Ic},{provide:fc,useValue:!0},{provide:yd,useValue:!1},[]])}function CV(){return typeof $localize<"u"&&$localize.locale||Mc}var uh=new j("",{providedIn:"root",factory:()=>M(uh,{optional:!0,skipSelf:!0})||CV()});var lh=class{destroyed=!1;listeners=null;errorHandler=M(Vt,{optional:!0});destroyRef=M(ut);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new V(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed){console.warn(Mi(953,!1));return}if(this.listeners===null)return;let n=K(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{K(n)}}};function Bt(t){return yT(t)}function Xt(t,e){return Hl(t,e?.equal)}var uv=class{[It];constructor(e){this[It]=e}destroy(){this[It].destroy()}};function dh(t,e){let n=e?.injector??M(Ue),r=e?.manualCleanup!==!0?n.get(ut):null,i,o=n.get(as,null,{optional:!0}),s=n.get(Kt);return o!==null?(i=AV(o.view,s,t),r instanceof tc&&r._lView===o.view&&(r=null)):i=RV(t,n.get(pc),s),i.injector=n,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new uv(i)}var e0=W(k({},Fr),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:Ui,run(){if(this.dirty=!1,this.hasRun&&!Yo(this))return;this.hasRun=!0;let t=r=>(this.cleanupFns??=[]).push(r),e=Lr(this),n=os(!1);try{this.maybeCleanup(),this.fn(t)}finally{os(n),bi(this,e)}},maybeCleanup(){if(!this.cleanupFns?.length)return;let t=K(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],K(t)}}}),bV=W(k({},e0),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Zo(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),SV=W(k({},e0),{consumerMarkedDirty(){this.view[Q]|=8192,qr(this.view),this.notifier.notify(13)},destroy(){Zo(this),this.onDestroyFn(),this.maybeCleanup(),this.view[sr]?.delete(this)}});function AV(t,e,n){let r=Object.create(SV);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=n,t[sr]??=new Set,t[sr].add(r),r.consumerMarkedDirty(r),r}function RV(t,e,n){let r=Object.create(bV);return r.fn=t,r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}var n0=Symbol("InputSignalNode#UNSET"),KV=W(k({},ql),{transformFn:void 0,applyValueToInputSignal(t,e){Jo(t,e)}});function r0(t,e){let n=Object.create(KV);n.value=t,n.transformFn=e?.transform;function r(){if(Qo(n),n.value===n0){let i=null;throw new V(-950,i)}return n.value}return r[It]=n,r}var fh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Dc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},QV=new j("");QV.__NG_ELEMENT_ID__=t=>{let e=et();if(e===null)throw new V(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new V(204,!1)};function i0(t){return new lh}function t0(t,e){return r0(t,e)}function YV(t){return r0(n0,t)}var Ss=(t0.required=YV,t0);var bs=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},o0=new bs("20.1.2");var lv=new j(""),ZV=new j("");function kc(t){return!t.moduleRef}function JV(t){let e=kc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(_e);return n.run(()=>{kc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(bt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),kc(t)){let o=()=>e.destroy(),s=t.platformInjector.get(lv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(lv);s.add(o),t.moduleRef.onDestroy(()=>{mc(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return e2(r,n,()=>{let o=e.get(kn),s=o.add(),a=e.get(Yy);return a.runInitializers(),a.donePromise.then(()=>{try{let u=e.get(uh,Mc);if(jS(u||Mc),!e.get(ZV,!0))return kc(t)?e.get(ur):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(kc(t)){let h=e.get(ur);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return XV?.(t.moduleRef,t.allPlatformModules),t.moduleRef}finally{o.remove(s)}})})})}var XV;function e2(t,e,n){try{let r=n();return Jr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var hh=null;function t2(t=[],e){return Ue.create({name:e,providers:[{provide:sc,useValue:"platform"},{provide:lv,useValue:new Set([()=>hh=null])},...t]})}function n2(t=[]){if(hh)return hh;let e=t2(t);return hh=e,kS(),r2(e),e}function r2(t){let e=t.get(Qd,null);Je(t,()=>{e?.forEach(n=>n())})}function dv(){return!1}var Yi=(()=>{class t{static __NG_ELEMENT_ID__=i2}return t})();function i2(t){return o2(et(),Y(),(t&16)===16)}function o2(t,e,n){if(Hr(t)&&!n){let r=Zt(t.index,e);return new Kr(r,r)}else if(t.type&175){let r=e[Ct];return new Kr(r,e)}return null}function s0(t){pe(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=n2(r),o=[JS({}),{provide:Kt,useExisting:cv},aC,...n||[]],s=new Ec({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return JV({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{pe(9)}}function xc(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var u0=null;function en(){return u0}function hv(t){u0??=t}var Oc=class{},fv=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>M(l0),providedIn:"platform"})}return t})();var l0=(()=>{class t extends fv{_location;_history;_doc=M(rt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return en().getBaseHref(this._doc)}onPopState(n){let r=en().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=en().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function d0(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function a0(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function ei(t){return t&&t[0]!=="?"?`?${t}`:t}var As=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>M(f0),providedIn:"root"})}return t})(),h0=new j(""),f0=(()=>{class t extends As{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(rt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return d0(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ei(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ei(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ei(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ne(fv),ne(h0,8))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Rs=(()=>{class t{_subject=new Ve;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=c2(a0(c0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ei(r))}normalize(n){return t.stripTrailingSlash(a2(this._basePath,c0(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ei(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ei(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ei;static joinWithSlash=d0;static stripTrailingSlash=a0;static \u0275fac=function(r){return new(r||t)(ne(As))};static \u0275prov=U({token:t,factory:()=>s2(),providedIn:"root"})}return t})();function s2(){return new Rs(ne(As))}function a2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function c0(t){return t.replace(/\/index.html$/,"")}function c2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function u2(t,e){return new V(2100,!1)}var l2=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,d2=(()=>{class t{transform(n){if(n==null)return null;if(typeof n!="string")throw u2(t,n);return n.replace(l2,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||t)};static \u0275pipe=Ac({name:"titlecase",type:t,pure:!0})}return t})();function pv(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Fc=class{};var p0="browser";var gh=new j(""),_v=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new V(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ne(gh),ne(_e))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),Lc=class{_doc;constructor(e){this._doc=e}manager},gv="ng-app-id";function g0(t){for(let e of t)e.remove()}function m0(t,e){let n=e.createElement("style");return n.textContent=t,n}function g2(t,e,n,r){let i=t.head?.querySelectorAll(`style[${gv}="${e}"],link[${gv}="${e}"]`);if(i)for(let o of i)o.removeAttribute(gv),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function yv(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Ev=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,g2(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,m0);r?.forEach(i=>this.addUsage(i,this.external,yv))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(g0(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])g0(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,m0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,yv(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ne(rt),ne(Kd),ne(Yd,8),ne(Yr))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),mv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Iv=/%COMP%/g;var v0="%COMP%",m2=`_nghost-${v0}`,y2=`_ngcontent-${v0}`,v2=!0,_2=new j("",{providedIn:"root",factory:()=>v2});function E2(t){return y2.replace(Iv,t)}function I2(t){return m2.replace(Iv,t)}function _0(t,e){return e.map(n=>n.replace(Iv,t))}var wv=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Vc(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof ph?i.applyToHost(n):i instanceof jc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case ar.Emulated:o=new ph(u,l,r,this.appId,h,s,a,p,g);break;case ar.ShadowDom:return new vv(u,l,n,r,s,a,this.nonce,p,g);default:o=new jc(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ne(_v),ne(Ev),ne(Kd),ne(_2),ne(rt),ne(Yr),ne(_e),ne(Yd),ne(Qi,8))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),Vc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(mv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(y0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(y0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new V(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=mv[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=mv[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(On.DashCase|On.Important)?e.style.setProperty(n,r,i&On.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&On.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=en().getGlobalEventTarget(this.doc,e),!e))throw new V(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function y0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var vv=class extends Vc{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=_0(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=yv(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},jc=class extends Vc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?_0(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ph=class extends jc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=E2(h),this.hostAttr=I2(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var mh=class t extends Oc{supportsDOMEvents=!0;static makeCurrent(){hv(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=w2();return n==null?null:D2(n)}resetBaseElement(){Uc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return pv(document.cookie,e)}},Uc=null;function w2(){return Uc=Uc||document.head.querySelector("base"),Uc?Uc.getAttribute("href"):null}function D2(t){return new URL(t,document.baseURI).pathname}var T2=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),I0=(()=>{class t extends Lc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ne(rt))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})(),E0=["alt","control","meta","shift"],C2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},b2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},w0=(()=>{class t extends Lc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>en().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),E0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=C2[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),E0.forEach(s=>{if(s!==i){let a=b2[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ne(rt))};static \u0275prov=U({token:t,factory:t.\u0275fac})}return t})();function S2(t,e){return s0(k({rootComponent:t},A2(e)))}function A2(t){return{appProviders:[...k2,...t?.providers??[]],platformProviders:P2}}function R2(){mh.makeCurrent()}function N2(){return new Vt}function M2(){return _y(document),document}var P2=[{provide:Yr,useValue:p0},{provide:Qd,useValue:R2,multi:!0},{provide:rt,useFactory:M2}];var k2=[{provide:sc,useValue:"root"},{provide:Vt,useFactory:N2},{provide:gh,useClass:I0,multi:!0,deps:[rt]},{provide:gh,useClass:w0,multi:!0,deps:[rt]},wv,Ev,_v,{provide:qi,useExisting:wv},{provide:Fc,useClass:T2},[]];var D0=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ne(rt))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var re="primary",tu=Symbol("RouteTitle"),Sv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Xi(t){return new Sv(t)}function M0(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function O2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ln(t[n],e[n]))return!1;return!0}function Ln(t,e){let n=t?Av(t):void 0,r=e?Av(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!P0(t[i],e[i]))return!1;return!0}function Av(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function P0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function k0(t){return t.length>0?t[t.length-1]:null}function hr(t){return fg(t)?t:Jr(t)?Re(Promise.resolve(t)):Z(t)}var F2={exact:O0,subset:F0},x0={exact:L2,subset:V2,ignored:()=>!0};function T0(t,e,n){return F2[n.paths](t.root,e.root,n.matrixParams)&&x0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function L2(t,e){return Ln(t,e)}function O0(t,e,n){if(!Zi(t.segments,e.segments)||!_h(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!O0(t.children[r],e.children[r],n))return!1;return!0}function V2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>P0(t[n],e[n]))}function F0(t,e,n){return L0(t,e,e.segments,n)}function L0(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Zi(i,n)||e.hasChildren()||!_h(i,n,r))}else if(t.segments.length===n.length){if(!Zi(t.segments,n)||!_h(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!F0(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Zi(t.segments,i)||!_h(t.segments,i,r)||!t.children[re]?!1:L0(t.children[re],e,o,r)}}function _h(t,e,n){return e.every((r,i)=>x0[n](t[i].parameters,r.parameters))}var jn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ge([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Xi(this.queryParams),this._queryParamMap}toString(){return B2.serialize(this)}},ge=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Eh(this)}},ti=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Xi(this.parameters),this._parameterMap}toString(){return j0(this)}};function j2(t,e){return Zi(t,e)&&t.every((n,r)=>Ln(n.parameters,e[r].parameters))}function Zi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function U2(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===re&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==re&&(n=n.concat(e(i,r)))}),n}var nu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>new eo,providedIn:"root"})}return t})(),eo=class{parse(e){let n=new Nv(e);return new jn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Bc(e.root,!0)}`,r=q2(e.queryParams),i=typeof e.fragment=="string"?`#${$2(e.fragment)}`:"";return`${n}${r}${i}`}},B2=new eo;function Eh(t){return t.segments.map(e=>j0(e)).join("/")}function Bc(t,e){if(!t.hasChildren())return Eh(t);if(e){let n=t.children[re]?Bc(t.children[re],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${Bc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=U2(t,(r,i)=>i===re?[Bc(t.children[re],!1)]:[`${i}:${Bc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${Eh(t)}/${n[0]}`:`${Eh(t)}/(${n.join("//")})`}}function V0(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yh(t){return V0(t).replace(/%3B/gi,";")}function $2(t){return encodeURI(t)}function Rv(t){return V0(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ih(t){return decodeURIComponent(t)}function C0(t){return Ih(t.replace(/\+/g,"%20"))}function j0(t){return`${Rv(t.path)}${H2(t.parameters)}`}function H2(t){return Object.entries(t).map(([e,n])=>`;${Rv(e)}=${Rv(n)}`).join("")}function q2(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${yh(n)}=${yh(i)}`).join("&"):`${yh(n)}=${yh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var z2=/^[^\/()?;#]+/;function Dv(t){let e=t.match(z2);return e?e[0]:""}var G2=/^[^\/()?;=#]+/;function W2(t){let e=t.match(G2);return e?e[0]:""}var K2=/^[^=?&#]+/;function Q2(t){let e=t.match(K2);return e?e[0]:""}var Y2=/^[^&#]+/;function Z2(t){let e=t.match(Y2);return e?e[0]:""}var Nv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[re]=new ge(e,n)),r}parseSegment(){let e=Dv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new ti(Ih(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=W2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Dv(this.remaining);i&&(r=i,this.capture(r))}e[Ih(n)]=Ih(r)}parseQueryParam(e){let n=Q2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=Z2(this.remaining);s&&(r=s,this.capture(r))}let i=C0(n),o=C0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Dv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new V(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[re]:new ge([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}};function U0(t){return t.segments.length>0?new ge([],{[re]:t}):t}function B0(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=B0(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ge(t.segments,e);return J2(n)}function J2(t){if(t.numberOfChildren===1&&t.children[re]){let e=t.children[re];return new ge(t.segments.concat(e.segments),e.children)}return t}function ni(t){return t instanceof jn}function $0(t,e,n=null,r=null){let i=H0(t);return q0(i,e,n,r)}function H0(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new ge(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=U0(r);return e??i}function q0(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Tv(i,i,i,n,r);let o=X2(e);if(o.toRoot())return Tv(i,i,new ge([],{}),n,r);let s=ej(o,i,t),a=s.processChildren?Hc(s.segmentGroup,s.index,o.commands):G0(s.segmentGroup,s.index,o.commands);return Tv(i,s.segmentGroup,a,n,r)}function wh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Gc(t){return typeof t=="object"&&t!=null&&t.outlets}function Tv(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=z0(t,e,n);let a=U0(B0(s));return new jn(a,o,i)}function z0(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=z0(o,e,n)}),new ge(t.segments,r)}var Dh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&wh(r[0]))throw new V(4003,!1);let i=r.find(Gc);if(i&&i!==k0(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function X2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Dh(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Dh(n,e,r)}var Ps=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function ej(t,e,n){if(t.isAbsolute)return new Ps(e,!0,0);if(!n)return new Ps(e,!1,NaN);if(n.parent===null)return new Ps(n,!0,0);let r=wh(t.commands[0])?0:1,i=n.segments.length-1+r;return tj(n,i,t.numberOfDoubleDots)}function tj(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new Ps(r,!1,i-o)}function nj(t){return Gc(t[0])?t[0].outlets:{[re]:t}}function G0(t,e,n){if(t??=new ge([],{}),t.segments.length===0&&t.hasChildren())return Hc(t,e,n);let r=rj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ge(t.segments.slice(0,r.pathIndex),{});return o.children[re]=new ge(t.segments.slice(r.pathIndex),t.children),Hc(o,0,i)}else return r.match&&i.length===0?new ge(t.segments,{}):r.match&&!t.hasChildren()?Mv(t,e,n):r.match?Hc(t,0,i):Mv(t,e,n)}function Hc(t,e,n){if(n.length===0)return new ge(t.segments,{});{let r=nj(n),i={};if(Object.keys(r).some(o=>o!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let o=Hc(t.children[re],e,n);return new ge(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=G0(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ge(t.segments,i)}}function rj(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Gc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!S0(u,l,s))return o;r+=2}else{if(!S0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Mv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Gc(o)){let u=ij(o.outlets);return new ge(r,u)}if(i===0&&wh(n[0])){let u=t.segments[e];r.push(new ti(u.path,b0(n[0]))),i++;continue}let s=Gc(o)?o.outlets[re]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&wh(a)?(r.push(new ti(s,b0(a))),i+=2):(r.push(new ti(s,{})),i++)}return new ge(r,{})}function ij(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Mv(new ge([],{}),0,r))}),e}function b0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function S0(t,e,n){return t==n.path&&Ln(e,n.parameters)}var qc="imperative",it=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(it||{}),Ht=class{id;url;constructor(e,n){this.id=e,this.url=n}},to=class extends Ht{type=it.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},In=class extends Ht{urlAfterRedirects;type=it.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},At=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(At||{}),Wc=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Wc||{}),Vn=class extends Ht{reason;code;type=it.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},lr=class extends Ht{reason;code;type=it.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},xs=class extends Ht{error;target;type=it.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Kc=class extends Ht{urlAfterRedirects;state;type=it.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Th=class extends Ht{urlAfterRedirects;state;type=it.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ch=class extends Ht{urlAfterRedirects;state;shouldActivate;type=it.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},bh=class extends Ht{urlAfterRedirects;state;type=it.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sh=class extends Ht{urlAfterRedirects;state;type=it.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ah=class{route;type=it.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rh=class{route;type=it.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nh=class{snapshot;type=it.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mh=class{snapshot;type=it.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ph=class{snapshot;type=it.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kh=class{snapshot;type=it.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Qc=class{},Os=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function oj(t){return!(t instanceof Qc)&&!(t instanceof Os)}function sj(t,e){return t.providers&&!t._injector&&(t._injector=ws(t.providers,e,`Route: ${t.path}`)),t._injector??e}function En(t){return t.outlet||re}function aj(t,e){let n=t.filter(r=>En(r)===e);return n.push(...t.filter(r=>En(r)!==e)),n}function Vs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var xh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Vs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new js(this.rootInjector)}},js=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new xh(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ne(je))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Oh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Pv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Pv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=kv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return kv(e,this._root).map(n=>n.value)}};function Pv(t,e){if(t===e.value)return e;for(let n of e.children){let r=Pv(t,n);if(r)return r}return null}function kv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=kv(t,n);if(r.length)return r.unshift(e),r}return[]}var $t=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ms(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Yc=class extends Oh{snapshot;constructor(e,n){super(e),this.snapshot=n,Bv(this,e)}toString(){return this.snapshot.toString()}};function W0(t){let e=cj(t),n=new ct([new ti("",{})]),r=new ct({}),i=new ct({}),o=new ct({}),s=new ct(""),a=new dr(n,r,o,s,i,re,t,e.root);return a.snapshot=e.root,new Yc(new $t(a,[]),e)}function cj(t){let e={},n={},r={},i="",o=new Ji([],e,r,i,n,re,t,null,{});return new Zc("",new $t(o,[]))}var dr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ce(l=>l[tu]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(e=>Xi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(e=>Xi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Fh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),t.params),data:k(k({},e.data),t.data),resolve:k(k(k(k({},t.data),e.data),i?.data),t._resolvedData)}:r={params:k({},t.params),data:k({},t.data),resolve:k(k({},t.data),t._resolvedData??{})},i&&Q0(i)&&(r.resolve[tu]=i.title),r}var Ji=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[tu]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Zc=class extends Oh{url;constructor(e,n){super(n),this.url=e,Bv(this,n)}toString(){return K0(this._root)}};function Bv(t,e){e.value._routerState=t,e.children.forEach(n=>Bv(t,n))}function K0(t){let e=t.children.length>0?` { ${t.children.map(K0).join(", ")} } `:"";return`${t.value}${e}`}function Cv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ln(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ln(e.params,n.params)||t.paramsSubject.next(n.params),O2(e.url,n.url)||t.urlSubject.next(n.url),Ln(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function xv(t,e){let n=Ln(t.params,e.params)&&j2(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||xv(t.parent,e.parent))}function Q0(t){return typeof t.title=="string"||t.title===null}var Y0=new j(""),$v=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new Oe;deactivateEvents=new Oe;attachEvents=new Oe;detachEvents=new Oe;routerOutletData=Ss(void 0);parentContexts=M(js);location=M(Ki);changeDetector=M(Yi);inputBinder=M(Uh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new V(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Ov(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=de({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[yn]})}return t})(),Ov=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===dr?this.route:e===js?this.childContexts:e===Y0?this.outletData:this.parent.get(e,n)}},Uh=new j("");var Hv=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Sc({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Cs(0,"router-outlet")},dependencies:[$v],encapsulation:2})}return t})();function qv(t){let e=t.children&&t.children.map(qv),n=e?W(k({},t),{children:e}):k({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==re&&(n.component=Hv),n}function uj(t,e,n){let r=Jc(t,e._root,n?n._root:void 0);return new Yc(r,e)}function Jc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=lj(t,e,n);return new $t(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Jc(t,a)),s}}let r=dj(e.value),i=e.children.map(o=>Jc(t,o));return new $t(r,i)}}function lj(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Jc(t,r,i);return Jc(t,r)})}function dj(t){return new dr(new ct(t.url),new ct(t.params),new ct(t.queryParams),new ct(t.fragment),new ct(t.data),t.outlet,t.component,t)}var Fs=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Z0="ngNavigationCancelingError";function Lh(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ni(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=J0(!1,At.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function J0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Z0]=!0,n.cancellationCode=e,n}function hj(t){return X0(t)&&ni(t.url)}function X0(t){return!!t&&t[Z0]}var fj=(t,e,n,r)=>ce(i=>(new Fv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Fv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Cv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ms(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ms(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ms(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ms(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new kh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Mh(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Cv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Cv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Vh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ks=class{component;route;constructor(e,n){this.component=e,this.route=n}};function pj(t,e,n){let r=t._root,i=e?e._root:null;return $c(r,i,n,[r.value])}function gj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Us(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!jg(t)?t:e.get(t):r}function $c(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ms(e);return t.children.forEach(s=>{mj(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>zc(a,n.getContext(s),i)),i}function mj(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=yj(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Vh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?$c(t,e,a?a.children:null,r,i):$c(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ks(a.outlet.component,s))}else s&&zc(e,a,i),i.canActivateChecks.push(new Vh(r)),o.component?$c(t,null,a?a.children:null,r,i):$c(t,null,n,r,i);return i}function yj(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Zi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Zi(t.url,e.url)||!Ln(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xv(t,e)||!Ln(t.queryParams,e.queryParams);case"paramsChange":default:return!xv(t,e)}}function zc(t,e,n){let r=Ms(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?zc(s,e.children.getContext(o),n):zc(s,null,n):zc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ks(e.outlet.component,i)):n.canDeactivateChecks.push(new ks(null,i)):n.canDeactivateChecks.push(new ks(null,i))}function ru(t){return typeof t=="function"}function vj(t){return typeof t=="boolean"}function _j(t){return t&&ru(t.canLoad)}function Ej(t){return t&&ru(t.canActivate)}function Ij(t){return t&&ru(t.canActivateChild)}function wj(t){return t&&ru(t.canDeactivate)}function Dj(t){return t&&ru(t.canMatch)}function eA(t){return t instanceof Zn||t?.name==="EmptyError"}var vh=Symbol("INITIAL_VALUE");function Ls(){return Wt(t=>Rl(t.map(e=>e.pipe(Xn(1),vg(vh)))).pipe(ce(e=>{for(let n of e)if(n!==!0){if(n===vh)return vh;if(n===!1||Tj(n))return n}return!0}),Mt(e=>e!==vh),Xn(1)))}function Tj(t){return ni(t)||t instanceof Fs}function Cj(t,e){return ke(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Z(W(k({},n),{guardsResult:!0})):bj(s,r,i,t).pipe(ke(a=>a&&vj(a)?Sj(r,o,t,e):Z(a)),ce(a=>W(k({},n),{guardsResult:a})))})}function bj(t,e,n,r){return Re(t).pipe(ke(i=>Pj(i.component,i.route,n,e,r)),er(i=>i!==!0,!0))}function Sj(t,e,n,r){return Re(e).pipe(Ci(i=>Go(Rj(i.route.parent,r),Aj(i.route,r),Mj(t,i.path,n),Nj(t,i.route,n))),er(i=>i!==!0,!0))}function Aj(t,e){return t!==null&&e&&e(new Ph(t)),Z(!0)}function Rj(t,e){return t!==null&&e&&e(new Nh(t)),Z(!0)}function Nj(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Wa(()=>{let s=Vs(e)??n,a=Us(o,s),u=Ej(a)?a.canActivate(e,t):Je(s,()=>a(e,t));return hr(u).pipe(er())}));return Z(i).pipe(Ls())}function Mj(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>gj(s)).filter(s=>s!==null).map(s=>Wa(()=>{let a=s.guards.map(u=>{let l=Vs(s.node)??n,h=Us(u,l),p=Ij(h)?h.canActivateChild(r,t):Je(l,()=>h(r,t));return hr(p).pipe(er())});return Z(a).pipe(Ls())}));return Z(o).pipe(Ls())}function Pj(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=Vs(e)??i,l=Us(a,u),h=wj(l)?l.canDeactivate(t,e,n,r):Je(u,()=>l(t,e,n,r));return hr(h).pipe(er())});return Z(s).pipe(Ls())}function kj(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=Us(s,t),u=_j(a)?a.canLoad(e,n):Je(t,()=>a(e,n));return hr(u)});return Z(o).pipe(Ls(),tA(r))}function tA(t){return ag(nt(e=>{if(typeof e!="boolean")throw Lh(t,e)}),ce(e=>e===!0))}function xj(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=Us(s,t),u=Dj(a)?a.canMatch(e,n):Je(t,()=>a(e,n));return hr(u)});return Z(o).pipe(Ls(),tA(r))}var Xc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},eu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ns(t){return Ho(new Xc(t))}function Oj(t){return Ho(new V(4e3,!1))}function Fj(t){return Ho(J0(!1,At.GuardRejected))}var Lv=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[re])return Oj(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,n,r,i,o){return Lj(n,i,o).pipe(ce(s=>{if(s instanceof jn)throw new eu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new eu(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new jn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new ge(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new V(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function Lj(t,e,n){if(typeof t=="string")return Z(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return hr(Je(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var Vv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vj(t,e,n,r,i){let o=nA(t,e,n);return o.matched?(r=sj(e,r),xj(r,e,n,i).pipe(ce(s=>s===!0?o:k({},Vv)))):Z(o)}function nA(t,e,n){if(e.path==="**")return jj(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?k({},Vv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||M0)(n,t,e);if(!i)return k({},Vv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?k(k({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function jj(t){return{matched:!0,parameters:t.length>0?k0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function A0(t,e,n,r){return n.length>0&&$j(t,n,r)?{segmentGroup:new ge(e,Bj(r,new ge(n,t.children))),slicedSegments:[]}:n.length===0&&Hj(t,n,r)?{segmentGroup:new ge(t.segments,Uj(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ge(t.segments,t.children),slicedSegments:n}}function Uj(t,e,n,r){let i={};for(let o of n)if(Bh(t,e,o)&&!r[En(o)]){let s=new ge([],{});i[En(o)]=s}return k(k({},r),i)}function Bj(t,e){let n={};n[re]=e;for(let r of t)if(r.path===""&&En(r)!==re){let i=new ge([],{});n[En(r)]=i}return n}function $j(t,e,n){return n.some(r=>Bh(t,e,r)&&En(r)!==re)}function Hj(t,e,n){return n.some(r=>Bh(t,e,r))}function Bh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function qj(t,e,n){return e.length===0&&!t.children[n]}var jv=class{};function zj(t,e,n,r,i,o,s="emptyOnly"){return new Uv(t,e,n,r,i,s,o).recognize()}var Gj=31,Uv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Lv(this.urlSerializer,this.urlTree)}noMatchError(e){return new V(4002,`'${e.segmentGroup}'`)}recognize(){let e=A0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ce(({children:n,rootSnapshot:r})=>{let i=new $t(r,n),o=new Zc("",i),s=$0(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Ji([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,n).pipe(ce(r=>({children:r,rootSnapshot:n})),Jn(r=>{if(r instanceof eu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ce(s=>s instanceof $t?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Re(o).pipe(Ci(s=>{let a=r.children[s],u=aj(n,s);return this.processSegmentGroup(e,u,a,s,i)}),yg((s,a)=>(s.push(...a),s)),Or(null),mg(),ke(s=>{if(s===null)return Ns(r);let a=rA(s);return Wj(a),Z(a)}))}processSegment(e,n,r,i,o,s,a){return Re(n).pipe(Ci(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Jn(l=>{if(l instanceof Xc)return Z(null);throw l}))),er(u=>!!u),Jn(u=>{if(eA(u))return qj(r,i,o)?Z(new jv):Ns(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return En(r)!==s&&(s===re||!Bh(i,o,r))?Ns(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Ns(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=nA(n,i,o);if(!u)return Ns(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Gj&&(this.allowRedirects=!1));let y=new Ji(o,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,R0(i),En(i),i.component??i._loadedComponent??null,i,N0(i)),I=Fh(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(I.params),y.data=Object.freeze(I.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Wt(R=>this.applyRedirects.lineralizeSegments(i,R)),ke(R=>this.processSegment(e,r,n,R.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=Vj(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Wt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Wt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,I=new Ji(g,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,R0(r),En(r),r.component??r._loadedComponent??null,r,N0(r)),S=Fh(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(S.params),I.data=Object.freeze(S.data);let{segmentGroup:R,slicedSegments:x}=A0(n,g,y,l);if(x.length===0&&R.hasChildren())return this.processChildren(h,l,R,I).pipe(ce(G=>new $t(I,G)));if(l.length===0&&x.length===0)return Z(new $t(I,[]));let $=En(r)===o;return this.processSegment(h,l,R,x,$?re:o,!0,I).pipe(ce(G=>new $t(I,G instanceof $t?[G]:[])))}))):Ns(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):kj(e,n,r,this.urlSerializer).pipe(ke(i=>i?this.configLoader.loadChildren(e,n).pipe(nt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Fj(n))):Z({routes:[],injector:e})}};function Wj(t){t.sort((e,n)=>e.value.outlet===re?-1:n.value.outlet===re?1:e.value.outlet.localeCompare(n.value.outlet))}function Kj(t){let e=t.value.routeConfig;return e&&e.path===""}function rA(t){let e=[],n=new Set;for(let r of t){if(!Kj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=rA(r.children);e.push(new $t(r.value,i))}return e.filter(r=>!n.has(r))}function R0(t){return t.data||{}}function N0(t){return t.resolve||{}}function Qj(t,e,n,r,i,o){return ke(s=>zj(t,e,n,r,s.extractedUrl,i,o).pipe(ce(({state:a,tree:u})=>W(k({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function Yj(t,e){return ke(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Z(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of iA(u))s.add(l);let a=0;return Re(s).pipe(Ci(u=>o.has(u)?Zj(u,r,t,e):(u.data=Fh(u,u.parent,t).resolve,Z(void 0))),nt(()=>a++),Wo(1),ke(u=>a===s.size?Z(n):Pt))})}function iA(t){let e=t.children.map(n=>iA(n)).flat();return[t,...e]}function Zj(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Q0(i)&&(o[tu]=i.title),Wa(()=>(t.data=Fh(t,t.parent,n).resolve,Jj(o,t,e,r).pipe(ce(s=>(t._resolvedData=s,t.data=k(k({},t.data),s),null)))))}function Jj(t,e,n,r){let i=Av(t);if(i.length===0)return Z({});let o={};return Re(i).pipe(ke(s=>Xj(t[s],e,n,r).pipe(er(),nt(a=>{if(a instanceof Fs)throw Lh(new eo,a);o[s]=a}))),Wo(1),ce(()=>o),Jn(s=>eA(s)?Pt:Ho(s)))}function Xj(t,e,n,r){let i=Vs(e)??r,o=Us(t,i),s=o.resolve?o.resolve(e,n):Je(i,()=>o(e,n));return hr(s)}function bv(t){return Wt(e=>{let n=t(e);return n?Re(n).pipe(ce(()=>e)):Z(e)})}var zv=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(n){return n.data[tu]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>M(oA),providedIn:"root"})}return t})(),oA=(()=>{class t extends zv{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ne(D0))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Bs=new j("",{providedIn:"root",factory:()=>({})}),iu=new j(""),sA=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(av);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=hr(Je(n,()=>r.loadComponent())).pipe(ce(cA),nt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Ka(()=>{this.componentLoaders.delete(r)})),o=new Vo(i,()=>new Ve).pipe(Lo());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=aA(r,this.compiler,n,this.onLoadEndListener).pipe(Ka(()=>{this.childrenLoaders.delete(r)})),s=new Vo(o,()=>new Ve).pipe(Lo());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aA(t,e,n,r){return hr(Je(n,()=>t.loadChildren())).pipe(ce(cA),ke(i=>i instanceof ih||Array.isArray(i)?Z(i):Re(e.compileModuleAsync(i))),ce(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(iu,[],{optional:!0,self:!0}).flat()),{routes:s.map(qv),injector:o}}))}function eU(t){return t&&typeof t=="object"&&"default"in t}function cA(t){return eU(t)?t.default:t}var $h=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>M(tU),providedIn:"root"})}return t})(),tU=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),uA=new j("");var Gv=new j(""),lA=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ve;transitionAbortWithErrorSubject=new Ve;configLoader=M(sA);environmentInjector=M(je);destroyRef=M(ut);urlSerializer=M(nu);rootContexts=M(js);location=M(Rs);inputBindingEnabled=M(Uh,{optional:!0})!==null;titleStrategy=M(zv);options=M(Bs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M($h);createViewTransition=M(uA,{optional:!0});navigationErrorHandler=M(Gv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Z(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Ah(i)),r=i=>this.events.next(new Rh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(W(k({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(n){return this.transitions=new ct(null),this.transitions.pipe(Mt(r=>r!==null),Wt(r=>{let i=!1;return Z(r).pipe(Wt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",At.SupersededByNewNavigation),Pt;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?W(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload"){let u="";return this.events.next(new lr(o.id,this.urlSerializer.serialize(o.rawUrl),u,Wc.IgnoredSameUrlNavigation)),o.resolve(!1),Pt}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Z(o).pipe(Wt(u=>(this.events.next(new to(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Pt:Promise.resolve(u))),Qj(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=W(k({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new Kc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new to(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let I=W0(this.rootComponentType).snapshot;return this.currentTransition=r=W(k({},o),{targetSnapshot:I,urlAfterRedirects:l,extras:W(k({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,Z(r)}else{let u="";return this.events.next(new lr(o.id,this.urlSerializer.serialize(o.extractedUrl),u,Wc.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Pt}}),nt(o=>{let s=new Th(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ce(o=>(this.currentTransition=r=W(k({},o),{guards:pj(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),Cj(this.environmentInjector,o=>this.events.next(o)),nt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Lh(this.urlSerializer,o.guardsResult);let s=new Ch(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Mt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",At.GuardRejected),!1)),bv(o=>{if(o.guards.canActivateChecks.length!==0)return Z(o).pipe(nt(s=>{let a=new bh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Wt(s=>{let a=!1;return Z(s).pipe(Yj(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",At.NoDataFromResolver)}}))}),nt(s=>{let a=new Sh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),bv(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=Vs(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(nt(h=>{a.component=h}),ce(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Rl(s(o.targetSnapshot.root)).pipe(Or(null),Xn(1))}),bv(()=>this.afterPreactivation()),Wt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Re(a).pipe(ce(()=>r)):Z(r)}),ce(o=>{let s=uj(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=W(k({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),nt(()=>{this.events.next(new Qc)}),fj(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Xn(1),Ml(new J(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Mt(()=>!i&&!r.targetRouterState),nt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",At.Aborted)}))),nt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new In(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ml(this.transitionAbortWithErrorSubject.pipe(nt(o=>{throw o}))),Ka(()=>{i||this.cancelNavigationTransition(r,"",At.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Jn(o=>{if(this.destroyed)return r.resolve(!1),Pt;if(i=!0,X0(o))this.events.next(new Vn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),hj(o)?this.events.next(new Os(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new xs(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Je(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Fs){let{message:u,cancellationCode:l}=Lh(this.urlSerializer,a);this.events.next(new Vn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Os(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Pt}))}))}cancelNavigationTransition(n,r,i){let o=new Vn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nU(t){return t!==qc}var dA=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>M(rU),providedIn:"root"})}return t})(),jh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},rU=(()=>{class t extends jh{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qr(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hA=(()=>{class t{urlSerializer=M(nu);options=M(Bs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(Rs);urlHandlingStrategy=M($h);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new jn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof jn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=W0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:()=>M(iU),providedIn:"root"})}return t})(),iU=(()=>{class t extends hA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof to?this.updateStateMemento():n instanceof lr?this.commitTransition(r):n instanceof Kc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Qc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Vn&&n.code!==At.SupersededByNewNavigation&&n.code!==At.Redirect?this.restoreHistory(r):n instanceof xs?this.restoreHistory(r,!0):n instanceof In&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=k(k({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=k(k({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qr(t)))(i||t)}})();static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Wv(t,e){t.events.pipe(Mt(n=>n instanceof In||n instanceof Vn||n instanceof xs||n instanceof lr),ce(n=>n instanceof In||n instanceof lr?0:(n instanceof Vn?n.code===At.Redirect||n.code===At.SupersededByNewNavigation:!1)?2:1),Mt(n=>n!==2),Xn(1)).subscribe(()=>{e()})}var oU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$s=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(Wy);stateManager=M(hA);options=M(Bs,{optional:!0})||{};pendingTasks=M(kn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(lA);urlSerializer=M(nu);location=M(Rs);urlHandlingStrategy=M($h);injector=M(je);_events=new Ve;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(dA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(iu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(Uh,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Pe;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Vn&&r.code!==At.Redirect&&r.code!==At.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof In)this.navigated=!0;else if(r instanceof Os){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||nU(i.source)},s);this.scheduleNavigation(a,qc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}oj(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),qc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=k({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(bt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(qv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=H0(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return q0(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=ni(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,qc,null,r)}navigate(n,r={skipLocationChange:!1}){return aU(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=k({},oU):r===!1?i=k({},sU):i=r,ni(n))return T0(this.currentUrlTree,n,i);let o=this.parseUrl(n);return T0(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return Wv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aU(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new V(4008,!1)}var Hh=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ne(null);get href(){return Bt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ve;applicationErrorHandler=M(bt);options=M(Bs,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(M(new fh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof In&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ni(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:ni(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(X($s),X(dr),Dc("tabindex"),X(Jt),X(gt),X(As))};static \u0275dir=de({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&_n("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Nc("href",i.reactiveHref(),Dy)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",xc],skipLocationChange:[2,"skipLocationChange","skipLocationChange",xc],replaceUrl:[2,"replaceUrl","replaceUrl",xc],routerLink:"routerLink"},features:[yn]})}return t})(),uU=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Oe;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof In&&this.update()})}ngAfterContentInit(){Z(this.links.changes,Z(null)).pipe(zo()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Re(n).pipe(zo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=lU(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(X($s),X(gt),X(Jt),X(Yi),X(Hh,8))};static \u0275dir=de({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&nv(o,Hh,5),r&2){let s;rv(s=iv())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[yn]})}return t})();function lU(t){return!!t.paths}var dU=new j("");function hU(t,...e){return un([{provide:iu,multi:!0,useValue:t},[],{provide:dr,useFactory:fU,deps:[$s]},{provide:ch,multi:!0,useFactory:gU},e.map(n=>n.\u0275providers)])}function fU(t){return t.routerState.root}function pU(t,e){return{\u0275kind:t,\u0275providers:e}}function gU(){let t=M(Ue);return e=>{let n=t.get(ur);if(e!==n.components[0])return;let r=t.get($s),i=t.get(mU);t.get(yU)===1&&r.initialNavigation(),t.get(vU,null,{optional:!0})?.setUpPreloading(),t.get(dU,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var mU=new j("",{factory:()=>new Ve}),yU=new j("",{providedIn:"root",factory:()=>1});var vU=new j("");function _U(t){return pU(7,[{provide:Gv,useValue:t}])}function pre(t,e){let r=!e?.manualCleanup?e?.injector?.get(ut)??M(ut):null,i=EU(e?.equal),o;e?.requireSync?o=Ne({kind:0},{equal:i}):o=Ne({kind:1,value:e?.initialValue},{equal:i});let s,a=t.subscribe({next:u=>o.set({kind:1,value:u}),error:u=>{o.set({kind:2,error:u}),s?.()},complete:()=>{s?.()}});if(e?.requireSync&&o().kind===0)throw new V(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),Xt(()=>{let u=o();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new V(601,!1)}},{equal:e?.equal})}function EU(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}function fA(t){t===void 0&&(t=M(Ue));let e=t.get(Gr);return n=>new J(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var pA=()=>{};var yA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},IU=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},qh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Qv;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let I=l<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Qv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},wU=function(t){let e=yA(t);return qh.encodeByteArray(e,!0)},su=function(t){return wU(t).replace(/\./g,"")},zh=function(t){try{return qh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Zv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var DU=()=>Zv().__FIREBASE_DEFAULTS__,TU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&zh(t[1]);return e&&JSON.parse(e)},Gh=()=>{try{return pA()||DU()||TU()||CU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vA=t=>{var e,n;return(n=(e=Gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},_A=t=>{let e=vA(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Jv=()=>{var t;return(t=Gh())===null||t===void 0?void 0:t.config},EA=t=>{var e;return(e=Gh())===null||e===void 0?void 0:e[`_${t}`]};var no=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ro(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xv(t){return(await fetch(t,{credentials:"include"})).ok}function IA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[su(JSON.stringify(n)),su(JSON.stringify(s)),""].join(".")}var ou={};function bU(){let t={prod:[],emulator:[]};for(let e of Object.keys(ou))ou[e]?t.emulator.push(e):t.prod.push(e);return t}function SU(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var gA=!1;function e_(t,e){if(typeof window>"u"||typeof document>"u"||!ro(window.location.host)||ou[t]===e||ou[t]||gA)return;ou[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=bU().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{gA=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=SU(r),y=n("text"),I=document.getElementById(y)||document.createElement("span"),S=n("learnmore"),R=document.getElementById(S)||document.createElement("a"),x=n("preprendIcon"),$=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let G=g.element;a(G),h(R,S);let ye=l();u($,x),G.append($,I,R,ye),document.body.appendChild(G)}o?(I.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function AU(){var t;let e=(t=Gh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bA(){return!AU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function au(){try{return typeof indexedDB=="object"}catch{return!1}}function SA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var RU="FirebaseError",tn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=RU,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wn.prototype.create)}},wn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?NU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new tn(i,a,r)}};function NU(t,e){return t.replace(MU,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var MU=/\{\$([^}]+)}/g;function io(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(mA(o)&&mA(s)){if(!io(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function mA(t){return t!==null&&typeof t=="object"}function t_(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function AA(t,e){let n=new Yv(t,e);return n.subscribe.bind(n)}var Yv=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Kv),i.error===void 0&&(i.error=Kv),i.complete===void 0&&(i.complete=Kv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function PU(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kv(){}var _re=4*60*60*1e3;function lt(t){return t&&t._delegate?t._delegate:t}var Rt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var oo="[DEFAULT]";var n_=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new no;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xU(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function kU(t){return t===oo?void 0:t}function xU(t){return t.instantiationMode==="EAGER"}var Wh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new n_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var OU=[],ue=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ue||{}),FU={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},LU=ue.INFO,VU={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},jU=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=VU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Un=class{constructor(e){this.name=e,this._logLevel=LU,this._logHandler=jU,this._userLogHandler=null,OU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var UU=(t,e)=>e.some(n=>t instanceof n),RA,NA;function BU(){return RA||(RA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $U(){return NA||(NA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var MA=new WeakMap,i_=new WeakMap,PA=new WeakMap,r_=new WeakMap,s_=new WeakMap;function HU(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Bn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&MA.set(n,t)}).catch(()=>{}),s_.set(e,t),e}function qU(t){if(i_.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});i_.set(t,e)}var o_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return i_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kA(t){o_=t(o_)}function zU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Kh(this),e,...n);return PA.set(r,e.sort?e.sort():[e]),Bn(r)}:$U().includes(t)?function(...e){return t.apply(Kh(this),e),Bn(MA.get(this))}:function(...e){return Bn(t.apply(Kh(this),e))}}function GU(t){return typeof t=="function"?zU(t):(t instanceof IDBTransaction&&qU(t),UU(t,BU())?new Proxy(t,o_):t)}function Bn(t){if(t instanceof IDBRequest)return HU(t);if(r_.has(t))return r_.get(t);let e=GU(t);return e!==t&&(r_.set(t,e),s_.set(e,t)),e}var Kh=t=>s_.get(t);function OA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Bn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Bn(s.result),u.oldVersion,u.newVersion,Bn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var WU=["get","getKey","getAll","getAllKeys","count"],KU=["put","add","delete","clear"],a_=new Map;function xA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(a_.get(e))return a_.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=KU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WU.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return a_.set(e,o),o}kA(t=>W(k({},t),{get:(e,n,r)=>xA(e,n)||t.get(e,n,r),has:(e,n)=>!!xA(e,n)||t.has(e,n)}));var u_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QU(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function QU(t){let e=t.getComponent();return e?.type==="VERSION"}var l_="@firebase/app",FA="0.13.2";var fr=new Un("@firebase/app"),YU="@firebase/app-compat",ZU="@firebase/analytics-compat",JU="@firebase/analytics",XU="@firebase/app-check-compat",eB="@firebase/app-check",tB="@firebase/auth",nB="@firebase/auth-compat",rB="@firebase/database",iB="@firebase/data-connect",oB="@firebase/database-compat",sB="@firebase/functions",aB="@firebase/functions-compat",cB="@firebase/installations",uB="@firebase/installations-compat",lB="@firebase/messaging",dB="@firebase/messaging-compat",hB="@firebase/performance",fB="@firebase/performance-compat",pB="@firebase/remote-config",gB="@firebase/remote-config-compat",mB="@firebase/storage",yB="@firebase/storage-compat",vB="@firebase/firestore",_B="@firebase/ai",EB="@firebase/firestore-compat",IB="firebase",wB="11.10.0";var d_="[DEFAULT]",DB={[l_]:"fire-core",[YU]:"fire-core-compat",[JU]:"fire-analytics",[ZU]:"fire-analytics-compat",[eB]:"fire-app-check",[XU]:"fire-app-check-compat",[tB]:"fire-auth",[nB]:"fire-auth-compat",[rB]:"fire-rtdb",[iB]:"fire-data-connect",[oB]:"fire-rtdb-compat",[sB]:"fire-fn",[aB]:"fire-fn-compat",[cB]:"fire-iid",[uB]:"fire-iid-compat",[lB]:"fire-fcm",[dB]:"fire-fcm-compat",[hB]:"fire-perf",[fB]:"fire-perf-compat",[pB]:"fire-rc",[gB]:"fire-rc-compat",[mB]:"fire-gcs",[yB]:"fire-gcs-compat",[vB]:"fire-fst",[EB]:"fire-fst-compat",[_B]:"fire-vertex","fire-js":"fire-js",[IB]:"fire-js-all"};var cu=new Map,TB=new Map,h_=new Map;function LA(t,e){try{t.container.addComponent(e)}catch(n){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Dn(t){let e=t.name;if(h_.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;h_.set(e,t);for(let n of cu.values())LA(n,t);for(let n of TB.values())LA(n,t);return!0}function Qh(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pr(t){return t==null?!1:t.settings!==void 0}var CB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ri=new wn("app","Firebase",CB);var f_=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}};var Hs=wB;function m_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:d_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ri.create("bad-app-name",{appName:String(i)});if(n||(n=Jv()),!n)throw ri.create("no-options");let o=cu.get(i);if(o){if(io(n,o.options)&&io(r,o.config))return o;throw ri.create("duplicate-app",{appName:i})}let s=new Wh(i);for(let u of h_.values())s.addComponent(u);let a=new f_(n,r,s);return cu.set(i,a),a}function qs(t=d_){let e=cu.get(t);if(!e&&t===d_&&Jv())return m_();if(!e)throw ri.create("no-app",{appName:t});return e}function Yh(){return Array.from(cu.values())}function He(t,e,n){var r;let i=(r=DB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(a.join(" "));return}Dn(new Rt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var bB="firebase-heartbeat-database",SB=1,uu="firebase-heartbeat-store",c_=null;function BA(){return c_||(c_=OA(bB,SB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ri.create("idb-open",{originalErrorMessage:t.message})})),c_}async function AB(t){try{let n=(await BA()).transaction(uu),r=await n.objectStore(uu).get($A(t));return await n.done,r}catch(e){if(e instanceof tn)fr.warn(e.message);else{let n=ri.create("idb-get",{originalErrorMessage:e?.message});fr.warn(n.message)}}}async function VA(t,e){try{let r=(await BA()).transaction(uu,"readwrite");await r.objectStore(uu).put(e,$A(t)),await r.done}catch(n){if(n instanceof tn)fr.warn(n.message);else{let r=ri.create("idb-set",{originalErrorMessage:n?.message});fr.warn(r.message)}}}function $A(t){return`${t.name}!${t.options.appId}`}var RB=1024,NB=30,p_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new g_(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=jA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>NB){let s=PB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=jA(),{heartbeatsToSend:r,unsentEntries:i}=MB(this._heartbeatsCache.heartbeats),o=su(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return fr.warn(n),""}}};function jA(){return new Date().toISOString().substring(0,10)}function MB(t,e=RB){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),UA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),UA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var g_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return au()?SA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await AB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return VA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return VA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function UA(t){return su(JSON.stringify({version:2,heartbeats:t})).length}function PB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function kB(t){Dn(new Rt("platform-logger",e=>new u_(e),"PRIVATE")),Dn(new Rt("heartbeat",e=>new p_(e),"PRIVATE")),He(l_,FA,t),He(l_,FA,"esm2017"),He("fire-js","")}kB("");var xB="firebase",OB="11.10.0";He(xB,OB,"app");var ao=new bs("ANGULARFIRE2_VERSION");function Jh(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Gs=(t,e)=>{let n=e?[e]:Yh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},zs=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(zs||{}),HA=dv()&&typeof Zone<"u"?zs.WARN:zs.SILENT;var Zh=class{zone;delegate;constructor(e,n=dg){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},co=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=M(_e);this.outsideAngular=n.runOutsideAngular(()=>new Zh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Zh(typeof Zone>"u"?void 0:Zone.current,Mr))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),qA=!1;function FB(t,e){!qA&&(HA>zs.SILENT||dv())&&(qA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),HA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function LB(t){let e=M(_e,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function so(t){let e=M(_e,{optional:!0});return e?e.run(()=>t()):t()}var VB=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Je(n,()=>so(()=>t.apply(void 0,r)))),Nt=(t,e,n)=>(n||=e?zs.WARN:zs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=M(co),s=M(Gr),a=M(je)}catch{return FB(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=so(()=>s.add())),i[l]=VB(i[l],r,a));let u=LB(()=>t.apply(this,i));return e?u instanceof J?u.pipe(xr(o.outsideAngular),kr(o.insideAngular),fA(a)):u instanceof Promise?so(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>Je(a,()=>so(()=>h(g))),g=>Je(a,()=>so(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:so(()=>u):u instanceof J?u.pipe(xr(o.outsideAngular),kr(o.insideAngular)):so(()=>u)});var uo=class{constructor(e){return e}},lu=class{constructor(){return Yh()}};function jB(t){return t&&t.length===1?t[0]:new uo(qs())}var y_=new j("angularfire2._apps"),UB={provide:uo,useFactory:jB,deps:[[new cr,y_]]},BB={provide:lu,deps:[[new cr,y_]]};function $B(t){return(e,n)=>{let r=n.get(Yr);He("angularfire",ao.full,"core"),He("angularfire",ao.full,"app"),He("angular",o0.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new uo(i)}}function iie(t,...e){return un([UB,BB,{provide:y_,useFactory:$B(t),multi:!0,deps:[_e,Ue,co,...e]}])}var oie=Nt(m_,!0);var HB=new Map,qB={activated:!1,tokenObservers:[]},zB={initialized:!1,enabled:!1};function Tn(t){return HB.get(t)||Object.assign({},qB)}function KA(){return zB}var GB="https://content-firebaseappcheck.googleapis.com/v1";var WB="exchangeDebugToken",zA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},pie=24*60*60*1e3;var E_=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new no,this.pending.promise.catch(n=>{}),await KB(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new no,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function KB(t){return new Promise(e=>{setTimeout(e,t)})}var QB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ii=new wn("appCheck","AppCheck",QB);function QA(t){if(!Tn(t).activated)throw ii.create("use-before-activation",{appName:t.name})}async function YA({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw ii.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw ii.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw ii.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ii.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function ZA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${GB}/projects/${n}/apps/${r}:${WB}?key=${i}`,body:{debug_token:e}}}var YB="firebase-app-check-database",ZB=1,I_="firebase-app-check-store";var Xh=null;function JB(){return Xh||(Xh=new Promise((t,e)=>{try{let n=indexedDB.open(YB,ZB);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(ii.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(I_,{keyPath:"compositeKey"})}}}catch(n){e(ii.create("storage-open",{originalErrorMessage:n?.message}))}}),Xh)}function XB(t,e){return e$(t$(t),e)}async function e$(t,e){let r=(await JB()).transaction(I_,"readwrite"),o=r.objectStore(I_).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(ii.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function t$(t){return`${t.options.appId}-${t.name}`}var du=new Un("@firebase/app-check");function v_(t,e){return au()?XB(t,e).catch(n=>{du.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function JA(){return KA().enabled}async function XA(){let t=KA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var n$={error:"UNKNOWN_ERROR"};function r$(t){return qh.encodeString(JSON.stringify(t),!1)}async function w_(t,e=!1,n=!1){let r=t.app;QA(r);let i=Tn(r),o=i.token,s;if(o&&!hu(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(hu(l)?o=l:await v_(r,void 0))}if(!e&&o&&hu(o))return{token:o.token};let a=!1;if(JA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=YA(ZA(r,await XA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await v_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?du.warn(l.message):n&&du.error(l),__(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await Tn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?du.warn(l.message):n&&du.error(l),s=l}let u;return o?s?hu(o)?u={token:o.token,internalError:s}:u=__(s):(u={token:o.token},i.token=o,await v_(r,o)):u=__(s),a&&a$(r,u),u}async function i$(t){let e=t.app;QA(e);let{provider:n}=Tn(e);if(JA()){let r=await XA(),{token:i}=await YA(ZA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function o$(t,e,n,r){let{app:i}=t,o=Tn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&hu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),GA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>GA(t))}function eR(t,e){let n=Tn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function GA(t){let{app:e}=t,n=Tn(e),r=n.tokenRefresher;r||(r=s$(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function s$(t){let{app:e}=t;return new E_(async()=>{let n=Tn(e),r;if(n.token?r=await w_(t,!0):r=await w_(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=Tn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},zA.RETRIAL_MIN_WAIT,zA.RETRIAL_MAX_WAIT)}function a$(t,e){let n=Tn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function hu(t){return t.expireTimeMillis-Date.now()>0}function __(t){return{token:r$(n$),error:t}}var D_=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Tn(this.app);for(let n of e)eR(this.app,n.next);return Promise.resolve()}};function c$(t,e){return new D_(t,e)}function u$(t){return{getToken:e=>w_(t,e),getLimitedUseToken:()=>i$(t),addTokenListener:e=>o$(t,"INTERNAL",e),removeTokenListener:e=>eR(t.app,e)}}var l$="@firebase/app-check",d$="0.10.1";var h$="app-check",WA="app-check-internal";function f$(){Dn(new Rt(h$,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return c$(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(WA).initialize()})),Dn(new Rt(WA,t=>{let e=t.getProvider("app-check").getImmediate();return u$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),He(l$,d$)}f$();var p$="app-check";var ef=class{constructor(){return Gs(p$)}};var g$=["localhost","0.0.0.0","127.0.0.1"],bie=typeof window<"u"&&g$.includes(window.location.hostname);function cR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var uR=cR,lR=new wn("auth","Firebase",cR());var of=new Un("@firebase/auth");function m$(t,...e){of.logLevel<=ue.WARN&&of.warn(`Auth (${Hs}): ${t}`,...e)}function nf(t,...e){of.logLevel<=ue.ERROR&&of.error(`Auth (${Hs}): ${t}`,...e)}function tR(t,...e){throw O_(t,...e)}function x_(t,...e){return O_(t,...e)}function dR(t,e,n){let r=Object.assign(Object.assign({},uR()),{[e]:n});return new wn("auth","Firebase",r).create(e,{appName:t.name})}function rf(t){return dR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function O_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return lR.create(t,...e)}function me(t,e,...n){if(!t)throw O_(e,...n)}function fu(t){let e="INTERNAL ASSERTION FAILED: "+t;throw nf(e),new Error(e)}function sf(t,e){t||fu(e)}function y$(){return nR()==="http:"||nR()==="https:"}function nR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function v$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y$()||TA()||"connection"in navigator)?navigator.onLine:!0}function _$(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var fo=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,sf(n>e,"Short delay should be less than long delay!"),this.isMobile=wA()||CA()}get(){return v$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function E$(t,e){sf(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var af=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var I$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var w$=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],D$=new fo(3e4,6e4);function hR(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function hf(t,e,n,r,i={}){return fR(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=t_(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:u},o);return DA()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&ro(t.emulatorConfig.host)&&(l.credentials="include"),af.fetch()(await pR(t,t.config.apiHost,n,a),l)})}async function fR(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},I$),e);try{let i=new b_(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw tf(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw tf(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw tf(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw tf(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw dR(t,h,l);tR(t,h)}}catch(i){if(i instanceof tn)throw i;tR(t,"network-request-failed",{message:String(i)})}}async function pR(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?E$(t.config,i):`${t.config.apiScheme}://${i}`;return w$.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var b_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(x_(this.auth,"network-request-failed")),D$.get())})}};function tf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=x_(t,e,r);return i.customData._tokenResponse=n,i}async function T$(t,e){return hf(t,"POST","/v1/accounts:delete",e)}async function cf(t,e){return hf(t,"POST","/v1/accounts:lookup",e)}function pu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function F_(t,e=!1){let n=lt(t),r=await n.getIdToken(e),i=gR(r);me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:pu(T_(i.auth_time)),issuedAtTime:pu(T_(i.iat)),expirationTime:pu(T_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function T_(t){return Number(t)*1e3}function gR(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nf("JWT malformed, contained fewer than 3 sections"),null;try{let i=zh(n);return i?JSON.parse(i):(nf("Failed to decode base64 JWT payload"),null)}catch(i){return nf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rR(t){let e=gR(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function S_(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof tn&&C$(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function C$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var A_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var mu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pu(this.lastLoginAt),this.creationTime=pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function uf(t){var e;let n=t.auth,r=await t.getIdToken(),i=await S_(t,cf(n,{idToken:r}));me(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?mR(o.providerUserInfo):[],a=b$(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new mu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function L_(t){let e=lt(t);await uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function b$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function mR(t){return t.map(e=>{var{providerId:n}=e,r=hg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function S$(t,e){let n=await fR(t,{},async()=>{let r=t_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await pR(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&ro(t.emulatorConfig.host)&&(u.credentials="include"),af.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function A$(t,e){return hf(t,"POST","/v2/accounts:revokeToken",hR(t,e))}var gu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");let n=rR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await S$(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(me(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(me(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return fu("not implemented")}};function oi(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var lo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new A_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new mu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await S_(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return F_(this,e)}reload(){return L_(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await uf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(rf(this.auth));let e=await this.getIdToken();return await S_(this,T$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,I=(s=n.photoURL)!==null&&s!==void 0?s:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,$=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:G,emailVerified:ye,isAnonymous:Le,providerData:Ie,stsTokenManager:D}=n;me(G&&D,e,"internal-error");let v=gu.fromJSON(this.name,D);me(typeof G=="string",e,"internal-error"),oi(p,e.name),oi(g,e.name),me(typeof ye=="boolean",e,"internal-error"),me(typeof Le=="boolean",e,"internal-error"),oi(y,e.name),oi(I,e.name),oi(S,e.name),oi(R,e.name),oi(x,e.name),oi($,e.name);let E=new t({uid:G,auth:e,email:g,emailVerified:ye,displayName:p,isAnonymous:Le,photoURL:I,phoneNumber:y,tenantId:S,stsTokenManager:v,createdAt:x,lastLoginAt:$});return Ie&&Array.isArray(Ie)&&(E.providerData=Ie.map(w=>Object.assign({},w))),R&&(E._redirectEventId=R),E}static async _fromIdTokenResponse(e,n,r=!1){let i=new gu;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await uf(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];me(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?mR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new gu;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new mu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var iR=new Map;function ho(t){sf(t instanceof Function,"Expected a class definition");let e=iR.get(t);return e?(sf(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iR.set(t,e),e)}var R$=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),R_=R$;function C_(t,e,n){return`firebase:${t}:${e}:${n}`}var lf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=C_(this.userKey,i.apiKey,o),this.fullPersistenceKey=C_("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await cf(this.auth,{idToken:e}).catch(()=>{});return n?lo._fromGetAccountInfoResponse(this.auth,n,e):null}return lo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(ho(R_),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||ho(R_),s=C_(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await cf(e,{idToken:h}).catch(()=>{});if(!g)break;p=await lo._fromGetAccountInfoResponse(e,g,h)}else p=lo._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function oR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(k$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(N$(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(O$(e))return"Blackberry";if(F$(e))return"Webos";if(M$(e))return"Safari";if((e.includes("chrome/")||P$(e))&&!e.includes("edge/"))return"Chrome";if(x$(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function N$(t=qt()){return/firefox\//i.test(t)}function M$(t=qt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function P$(t=qt()){return/crios\//i.test(t)}function k$(t=qt()){return/iemobile/i.test(t)}function x$(t=qt()){return/android/i.test(t)}function O$(t=qt()){return/blackberry/i.test(t)}function F$(t=qt()){return/webos/i.test(t)}function yR(t,e=[]){let n;switch(t){case"Browser":n=oR(qt());break;case"Worker":n=`${oR(qt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hs}/${r}`}var N_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function L$(t,e={}){return hf(t,"GET","/v2/passwordPolicy",hR(t,e))}var V$=6,M_=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:V$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var P_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new df(this),this.idTokenSubscription=new df(this),this.beforeStateQueue=new N_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ho(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await lf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await cf(this,{idToken:e}),r=await lo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_$()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(rf(this));let n=e?lt(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pr(this.app)?Promise.reject(rf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(rf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ho(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await L$(this),n=new M_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await A$(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&ho(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await lf.create(this,[ho(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&m$(`Error while retrieving App Check token: ${n.error}`),n?.token}};function j$(t){return lt(t)}var df=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=AA(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var U$={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function B$(t){U$=t}function $$(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function H$(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ho);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var Vie=$$("rcb"),jie=new fo(3e4,6e4);var Uie=new fo(2e3,1e4);var Bie=10*60*1e3;var $ie=new fo(3e4,6e4);var Hie=new fo(5e3,15e3);var qie=encodeURIComponent("fac");var sR="@firebase/auth",aR="1.10.8";var k_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function q$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function z$(t){Dn(new Rt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;me(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yR(t)},l=new P_(r,i,o,u);return H$(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Dn(new Rt("auth-internal",e=>{let n=j$(e.getProvider("auth").getImmediate());return(r=>new k_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),He(sR,aR,q$(t)),He(sR,aR,"esm2017")}var G$=5*60,zie=EA("authIdTokenMaxAge")||G$;function W$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}B$({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=x_("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",W$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});z$("Browser");var zH="auth";var ff=class{constructor(){return Gs(zH)}};var vR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_R={};var gr,V_;(function(){var t;function e(D,v){function E(){}E.prototype=v.prototype,D.D=v.prototype,D.prototype=new E,D.prototype.constructor=D,D.C=function(w,T,b){for(var _=Array(arguments.length-2),Kn=2;Kn<arguments.length;Kn++)_[Kn-2]=arguments[Kn];return v.prototype[T].apply(w,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,E){E||(E=0);var w=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)w[T]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(T=0;16>T;++T)w[T]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=D.g[0],E=D.g[1],T=D.g[2];var b=D.g[3],_=v+(b^E&(T^b))+w[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=b+(T^v&(E^T))+w[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(E^b&(v^E))+w[2]+606105819&4294967295,T=b+(_<<17&4294967295|_>>>15),_=E+(v^T&(b^v))+w[3]+3250441966&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(b^E&(T^b))+w[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(T^v&(E^T))+w[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(E^b&(v^E))+w[6]+2821735955&4294967295,T=b+(_<<17&4294967295|_>>>15),_=E+(v^T&(b^v))+w[7]+4249261313&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(b^E&(T^b))+w[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(T^v&(E^T))+w[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(E^b&(v^E))+w[10]+4294925233&4294967295,T=b+(_<<17&4294967295|_>>>15),_=E+(v^T&(b^v))+w[11]+2304563134&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(b^E&(T^b))+w[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(T^v&(E^T))+w[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(E^b&(v^E))+w[14]+2792965006&4294967295,T=b+(_<<17&4294967295|_>>>15),_=E+(v^T&(b^v))+w[15]+1236535329&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(T^b&(E^T))+w[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^T&(v^E))+w[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(b^v))+w[11]+643717713&4294967295,T=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(T^b))+w[0]+3921069994&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^b&(E^T))+w[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^T&(v^E))+w[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(b^v))+w[15]+3634488961&4294967295,T=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(T^b))+w[4]+3889429448&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^b&(E^T))+w[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^T&(v^E))+w[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(b^v))+w[3]+4107603335&4294967295,T=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(T^b))+w[8]+1163531501&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^b&(E^T))+w[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^T&(v^E))+w[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(b^v))+w[7]+1735328473&4294967295,T=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(T^b))+w[12]+2368359562&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(E^T^b)+w[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^T)+w[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^E)+w[11]+1839030562&4294967295,T=b+(_<<16&4294967295|_>>>16),_=E+(T^b^v)+w[14]+4259657740&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^b)+w[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^T)+w[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^E)+w[7]+4139469664&4294967295,T=b+(_<<16&4294967295|_>>>16),_=E+(T^b^v)+w[10]+3200236656&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^b)+w[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^T)+w[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^E)+w[3]+3572445317&4294967295,T=b+(_<<16&4294967295|_>>>16),_=E+(T^b^v)+w[6]+76029189&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^b)+w[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^T)+w[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^E)+w[15]+530742520&4294967295,T=b+(_<<16&4294967295|_>>>16),_=E+(T^b^v)+w[2]+3299628645&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(T^(E|~b))+w[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~T))+w[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~E))+w[14]+2878612391&4294967295,T=b+(_<<15&4294967295|_>>>17),_=E+(b^(T|~v))+w[5]+4237533241&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~b))+w[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~T))+w[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~E))+w[10]+4293915773&4294967295,T=b+(_<<15&4294967295|_>>>17),_=E+(b^(T|~v))+w[1]+2240044497&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~b))+w[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~T))+w[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~E))+w[6]+2734768916&4294967295,T=b+(_<<15&4294967295|_>>>17),_=E+(b^(T|~v))+w[13]+1309151649&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~b))+w[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~T))+w[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~E))+w[2]+718787259&4294967295,T=b+(_<<15&4294967295|_>>>17),_=E+(b^(T|~v))+w[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(T+(_<<21&4294967295|_>>>11))&4294967295,D.g[2]=D.g[2]+T&4294967295,D.g[3]=D.g[3]+b&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var E=v-this.blockSize,w=this.B,T=this.h,b=0;b<v;){if(T==0)for(;b<=E;)i(this,D,b),b+=this.blockSize;if(typeof D=="string"){for(;b<v;)if(w[T++]=D.charCodeAt(b++),T==this.blockSize){i(this,w),T=0;break}}else for(;b<v;)if(w[T++]=D[b++],T==this.blockSize){i(this,w),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var E=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=E&255,E/=256;for(this.u(D),D=Array(16),v=E=0;4>v;++v)for(var w=0;32>w;w+=8)D[E++]=this.g[v]>>>w&255;return D};function o(D,v){var E=a;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=v(D)}function s(D,v){this.h=v;for(var E=[],w=!0,T=D.length-1;0<=T;T--){var b=D[T]|0;w&&b==v||(E[T]=b,w=!1)}this.g=E}var a={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var v=[],E=1,w=0;D>=E;w++)v[w]=D/E|0,E*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return R(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),w=p,T=0;T<D.length;T+=8){var b=Math.min(8,D.length-T),_=parseInt(D.substring(T,T+b),v);8>b?(b=l(Math.pow(v,b)),w=w.j(b).add(l(_))):(w=w.j(E),w=w.add(l(_)))}return w}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(S(this))return-R(this).m();for(var D=0,v=1,E=0;E<this.g.length;E++){var w=this.i(E);D+=(0<=w?w:4294967296+w)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(S(this))return"-"+R(this).toString(D);for(var v=l(Math.pow(D,6)),E=this,w="";;){var T=ye(E,v).g;E=x(E,T.j(v));var b=((0<E.g.length?E.g[0]:E.h)>>>0).toString(D);if(E=T,I(E))return b+w;for(;6>b.length;)b="0"+b;w=b+w}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function S(D){return D.h==-1}t.l=function(D){return D=x(this,D),S(D)?-1:I(D)?0:1};function R(D){for(var v=D.g.length,E=[],w=0;w<v;w++)E[w]=~D.g[w];return new s(E,~D.h).add(g)}t.abs=function(){return S(this)?R(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0,T=0;T<=v;T++){var b=w+(this.i(T)&65535)+(D.i(T)&65535),_=(b>>>16)+(this.i(T)>>>16)+(D.i(T)>>>16);w=_>>>16,b&=65535,_&=65535,E[T]=_<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function x(D,v){return D.add(R(v))}t.j=function(D){if(I(this)||I(D))return p;if(S(this))return S(D)?R(this).j(R(D)):R(R(this).j(D));if(S(D))return R(this.j(R(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,E=[],w=0;w<2*v;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var T=0;T<D.g.length;T++){var b=this.i(w)>>>16,_=this.i(w)&65535,Kn=D.i(T)>>>16,ba=D.i(T)&65535;E[2*w+2*T]+=_*ba,$(E,2*w+2*T),E[2*w+2*T+1]+=b*ba,$(E,2*w+2*T+1),E[2*w+2*T+1]+=_*Kn,$(E,2*w+2*T+1),E[2*w+2*T+2]+=b*Kn,$(E,2*w+2*T+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function $(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function G(D,v){this.g=D,this.h=v}function ye(D,v){if(I(v))throw Error("division by zero");if(I(D))return new G(p,p);if(S(D))return v=ye(R(D),v),new G(R(v.g),R(v.h));if(S(v))return v=ye(D,R(v)),new G(R(v.g),v.h);if(30<D.g.length){if(S(D)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,w=v;0>=w.l(D);)E=Le(E),w=Le(w);var T=Ie(E,1),b=Ie(w,1);for(w=Ie(w,2),E=Ie(E,2);!I(w);){var _=b.add(w);0>=_.l(D)&&(T=T.add(E),b=_),w=Ie(w,1),E=Ie(E,1)}return v=x(D,T.j(v)),new G(T,v)}for(T=p;0<=D.l(v);){for(E=Math.max(1,Math.floor(D.m()/v.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),b=l(E),_=b.j(v);S(_)||0<_.l(D);)E-=w,b=l(E),_=b.j(v);I(b)&&(b=g),T=T.add(b),D=x(D,_)}return new G(T,D)}t.A=function(D){return ye(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)&D.i(w);return new s(E,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)|D.i(w);return new s(E,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)^D.i(w);return new s(E,this.h^D.h)};function Le(D){for(var v=D.g.length+1,E=[],w=0;w<v;w++)E[w]=D.i(w)<<1|D.i(w-1)>>>31;return new s(E,D.h)}function Ie(D,v){var E=v>>5;v%=32;for(var w=D.g.length-E,T=[],b=0;b<w;b++)T[b]=0<v?D.i(b+E)>>>v|D.i(b+E+1)<<32-v:D.i(b+E);return new s(T,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,V_=_R.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,gr=_R.Integer=s}).apply(typeof vR<"u"?vR:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mr={};var j_,GH,Ws,U_,yu,gf,B_,$_,H_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var C=c[m];if(!(C in f))break e;f=f[C]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,C={next:function(){if(!m&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function I(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,C,A){for(var O=Array(arguments.length-2),we=2;we<arguments.length;we++)O[we-2]=arguments[we];return d.prototype[C].apply(m,O)}}function S(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let C=c.length||0,A=m.length||0;c.length=C+A;for(let O=0;O<A;O++)c[C+O]=m[O]}else c.push(m)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ye(c){return ye[" "](c),c}ye[" "]=function(){};var Le=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function Ie(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)c[f]=m[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function b(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Rp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Kn{constructor(){this.h=this.g=null}add(d,f){let m=ba.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var ba=new x(()=>new OP,c=>c.reset());class OP{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Sa,Aa=!1,Rp=new Kn,kw=()=>{let c=a.Promise.resolve(void 0);Sa=()=>{c.then(FP)}};var FP=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){b(f)}var d=ba;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Aa=!1};function Sr(){this.s=this.s,this.C=this.C}Sr.prototype.s=!1,Sr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Sr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function dt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}dt.prototype.h=function(){this.defaultPrevented=!0};var LP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ra(c,d){if(dt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Le){e:{try{ye(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:VP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ra.aa.h.call(this)}}I(Ra,dt);var VP={2:"touch",3:"pen",4:"mouse"};Ra.prototype.h=function(){Ra.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Na="closure_listenable_"+(1e6*Math.random()|0),jP=0;function UP(c,d,f,m,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=C,this.key=++jP,this.da=this.fa=!1}function zu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Gu(c){this.src=c,this.g={},this.h=0}Gu.prototype.add=function(c,d,f,m,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var O=Mp(c,d,m,C);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new UP(d,this.src,A,!!m,C),d.fa=f,c.push(d)),d};function Np(c,d){var f=d.type;if(f in c.g){var m=c.g[f],C=Array.prototype.indexOf.call(m,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(m,C,1),A&&(zu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Mp(c,d,f,m){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==m)return C}return-1}var Pp="closure_lm_"+(1e6*Math.random()|0),kp={};function xw(c,d,f,m,C){if(m&&m.once)return Fw(c,d,f,m,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)xw(c,d[A],f,m,C);return null}return f=Lp(f),c&&c[Na]?c.K(d,f,l(m)?!!m.capture:!!m,C):Ow(c,d,f,!1,m,C)}function Ow(c,d,f,m,C,A){if(!d)throw Error("Invalid event type");var O=l(C)?!!C.capture:!!C,we=Op(c);if(we||(c[Pp]=we=new Gu(c)),f=we.add(d,f,m,O,A),f.proxy)return f;if(m=BP(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)LP||(C=O),C===void 0&&(C=!1),c.addEventListener(d.toString(),m,C);else if(c.attachEvent)c.attachEvent(Vw(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function BP(){function c(f){return d.call(c.src,c.listener,f)}let d=$P;return c}function Fw(c,d,f,m,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)Fw(c,d[A],f,m,C);return null}return f=Lp(f),c&&c[Na]?c.L(d,f,l(m)?!!m.capture:!!m,C):Ow(c,d,f,!0,m,C)}function Lw(c,d,f,m,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)Lw(c,d[A],f,m,C);else m=l(m)?!!m.capture:!!m,f=Lp(f),c&&c[Na]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Mp(A,f,m,C),-1<f&&(zu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Op(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Mp(d,f,m,C)),(f=-1<c?d[c]:null)&&xp(f))}function xp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Na])Np(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(Vw(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Op(d))?(Np(f,c),f.h==0&&(f.src=null,d[Pp]=null)):zu(c)}}}function Vw(c){return c in kp?kp[c]:kp[c]="on"+c}function $P(c,d){if(c.da)c=!0;else{d=new Ra(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&xp(c),c=f.call(m,d)}return c}function Op(c){return c=c[Pp],c instanceof Gu?c:null}var Fp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lp(c){return typeof c=="function"?c:(c[Fp]||(c[Fp]=function(d){return c.handleEvent(d)}),c[Fp])}function ht(){Sr.call(this),this.i=new Gu(this),this.M=this,this.F=null}I(ht,Sr),ht.prototype[Na]=!0,ht.prototype.removeEventListener=function(c,d,f,m){Lw(this,c,d,f,m)};function _t(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new dt(d,c);else if(d instanceof dt)d.target=d.target||c;else{var C=d;d=new dt(m,c),w(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var O=d.g=f[A];C=Wu(O,m,!0,d)&&C}if(O=d.g=c,C=Wu(O,m,!0,d)&&C,C=Wu(O,m,!1,d)&&C,f)for(A=0;A<f.length;A++)O=d.g=f[A],C=Wu(O,m,!1,d)&&C}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)zu(f[m]);delete c.g[d],c.h--}}this.F=null},ht.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},ht.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Wu(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var O=d[A];if(O&&!O.da&&O.capture==f){var we=O.listener,at=O.ha||O.src;O.fa&&Np(c.i,O),C=we.call(at,m)!==!1&&C}}return C&&!m.defaultPrevented}function jw(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Uw(c){c.g=jw(()=>{c.g=null,c.i&&(c.i=!1,Uw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class HP extends Sr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Uw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ma(c){Sr.call(this),this.h=c,this.g={}}I(Ma,Sr);var Bw=[];function $w(c){Ie(c.g,function(d,f){this.g.hasOwnProperty(f)&&xp(d)},c),c.g={}}Ma.prototype.N=function(){Ma.aa.N.call(this),$w(this)},Ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vp=a.JSON.stringify,qP=a.JSON.parse,zP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function jp(){}jp.prototype.h=null;function Hw(c){return c.h||(c.h=c.i())}function qw(){}var Pa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Up(){dt.call(this,"d")}I(Up,dt);function Bp(){dt.call(this,"c")}I(Bp,dt);var yi={},zw=null;function Ku(){return zw=zw||new ht}yi.La="serverreachability";function Gw(c){dt.call(this,yi.La,c)}I(Gw,dt);function ka(c){let d=Ku();_t(d,new Gw(d))}yi.STAT_EVENT="statevent";function Ww(c,d){dt.call(this,yi.STAT_EVENT,c),this.stat=d}I(Ww,dt);function Et(c){let d=Ku();_t(d,new Ww(d,c))}yi.Ma="timingevent";function Kw(c,d){dt.call(this,yi.Ma,c),this.size=d}I(Kw,dt);function xa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Oa(){this.g=!0}Oa.prototype.xa=function(){this.g=!1};function GP(c,d,f,m,C,A){c.info(function(){if(c.g)if(A)for(var O="",we=A.split("&"),at=0;at<we.length;at++){var fe=we[at].split("=");if(1<fe.length){var ft=fe[0];fe=fe[1];var pt=ft.split("_");O=2<=pt.length&&pt[1]=="type"?O+(ft+"="+fe+"&"):O+(ft+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+d+`
`+f+`
`+O})}function WP(c,d,f,m,C,A,O){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+O})}function Ao(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+QP(c,f)+(m?" "+m:"")})}function KP(c,d){c.info(function(){return"TIMEOUT: "+d})}Oa.prototype.info=function(){};function QP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<C.length;O++)C[O]=""}}}}return Vp(f)}catch{return d}}var Qu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$p;function Yu(){}I(Yu,jp),Yu.prototype.g=function(){return new XMLHttpRequest},Yu.prototype.i=function(){return{}},$p=new Yu;function Ar(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new Ma(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yw}function Yw(){this.i=null,this.g="",this.h=!1}var Zw={},Hp={};function qp(c,d,f){c.L=1,c.v=el(Qn(d)),c.m=f,c.P=!0,Jw(c,null)}function Jw(c,d){c.F=Date.now(),Zu(c),c.A=Qn(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),hD(f.i,"t",m),c.C=0,f=c.j.J,c.h=new Yw,c.g=ND(c.j,f?d:null,!c.m),0<c.O&&(c.M=new HP(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(Bw[0]=C.toString()),C=Bw);for(var A=0;A<C.length;A++){var O=xw(f,C[A],m||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ka(),GP(c.i,c.u,c.A,c.l,c.R,c.m)}Ar.prototype.ca=function(c){c=c.target;let d=this.M;d&&Yn(c)==3?d.j():this.Y(c)},Ar.prototype.Y=function(c){try{if(c==this.g)e:{let pt=Yn(this.g);var d=this.g.Ba();let Mo=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||_D(this.g)))){this.J||pt!=4||d==7||(d==8||0>=Mo?ka(3):ka(2)),zp(this);var f=this.g.Z();this.X=f;t:if(Xw(this)){var m=_D(this.g);c="";var C=m.length,A=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vi(this),Fa(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(A&&d==C-1)});m.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,WP(this.i,this.u,this.A,this.l,this.R,pt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var we,at=this.g;if((we=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(we)){var fe=we;break t}}fe=null}if(f=fe)Ao(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gp(this,f);else{this.o=!1,this.s=3,Et(12),vi(this),Fa(this);break e}}if(this.P){f=!0;let on;for(;!this.J&&this.C<O.length;)if(on=YP(this,O),on==Hp){pt==4&&(this.s=4,Et(14),f=!1),Ao(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Zw){this.s=4,Et(15),Ao(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Ao(this.i,this.l,on,null),Gp(this,on);if(Xw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||O.length!=0||this.h.h||(this.s=1,Et(16),f=!1),this.o=this.o&&f,!f)Ao(this.i,this.l,O,"[Invalid Chunked Response]"),vi(this),Fa(this);else if(0<O.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Jp(ft),ft.M=!0,Et(11))}}else Ao(this.i,this.l,O,null),Gp(this,O);pt==4&&vi(this),this.o&&!this.J&&(pt==4?bD(this.j,this):(this.o=!1,Zu(this)))}else fk(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),vi(this),Fa(this)}}}catch{}finally{}};function Xw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function YP(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Hp:(f=Number(d.substring(f,m)),isNaN(f)?Zw:(m+=1,m+f>d.length?Hp:(d=d.slice(m,m+f),c.C=m+f,d)))}Ar.prototype.cancel=function(){this.J=!0,vi(this)};function Zu(c){c.S=Date.now()+c.I,eD(c,c.I)}function eD(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=xa(g(c.ba,c),d)}function zp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ar.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(KP(this.i,this.A),this.L!=2&&(ka(),Et(17)),vi(this),this.s=2,Fa(this)):eD(this,this.S-c)};function Fa(c){c.j.G==0||c.J||bD(c.j,c)}function vi(c){zp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,$w(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Gp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Wp(f.h,c))){if(!c.K&&Wp(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)ol(f),rl(f);else break e;Zp(f),Et(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=xa(g(f.Za,f),6e3));if(1>=rD(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ei(f,11)}else if((c.K||f.g==c)&&ol(f),!$(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let fe=C[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let ft=fe[3];ft!=null&&(f.la=ft,f.j.info("VER="+f.la));let pt=fe[4];pt!=null&&(f.Aa=pt,f.j.info("SVER="+f.Aa));let Mo=fe[5];Mo!=null&&typeof Mo=="number"&&0<Mo&&(m=1.5*Mo,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let on=c.g;if(on){let al=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var A=m.h;A.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Kp(A,A.h),A.h=null))}if(m.D){let Xp=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Xp&&(m.ya=Xp,Te(m.I,m.D,Xp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=c;if(m.qa=RD(m,m.J?m.ia:null,m.W),O.K){iD(m.h,O);var we=O,at=m.L;at&&(we.I=at),we.B&&(zp(we),Zu(we)),m.g=O}else TD(m);0<f.i.length&&il(f)}else fe[0]!="stop"&&fe[0]!="close"||Ei(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Ei(f,7):Yp(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}ka(4)}catch{}}var ZP=class{constructor(c,d){this.g=c,this.map=d}};function tD(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nD(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function rD(c){return c.h?1:c.g?c.g.size:0}function Wp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Kp(c,d){c.g?c.g.add(d):c.h=d}function iD(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}tD.prototype.cancel=function(){if(this.i=oD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function oD(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return S(c.i)}function JP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function XP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function sD(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=XP(c),m=JP(c),C=m.length,A=0;A<C;A++)d.call(void 0,m[A],f&&f[A],c)}var aD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ek(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),C=null;if(0<=m){var A=c[f].substring(0,m);C=c[f].substring(m+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function _i(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof _i){this.h=c.h,Ju(this,c.j),this.o=c.o,this.g=c.g,Xu(this,c.s),this.l=c.l;var d=c.i,f=new ja;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),cD(this,f),this.m=c.m}else c&&(d=String(c).match(aD))?(this.h=!1,Ju(this,d[1]||"",!0),this.o=La(d[2]||""),this.g=La(d[3]||"",!0),Xu(this,d[4]),this.l=La(d[5]||"",!0),cD(this,d[6]||"",!0),this.m=La(d[7]||"")):(this.h=!1,this.i=new ja(null,this.h))}_i.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Va(d,uD,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Va(d,uD,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Va(f,f.charAt(0)=="/"?rk:nk,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Va(f,ok)),c.join("")};function Qn(c){return new _i(c)}function Ju(c,d,f){c.j=f?La(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Xu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function cD(c,d,f){d instanceof ja?(c.i=d,sk(c.i,c.h)):(f||(d=Va(d,ik)),c.i=new ja(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function el(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function La(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Va(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,tk),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function tk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var uD=/[#\/\?@]/g,nk=/[#\?:]/g,rk=/[#\?]/g,ik=/[#\?@]/g,ok=/#/g;function ja(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Rr(c){c.g||(c.g=new Map,c.h=0,c.i&&ek(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ja.prototype,t.add=function(c,d){Rr(this),this.i=null,c=Ro(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function lD(c,d){Rr(c),d=Ro(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function dD(c,d){return Rr(c),d=Ro(c,d),c.g.has(d)}t.forEach=function(c,d){Rr(this),this.g.forEach(function(f,m){f.forEach(function(C){c.call(d,C,m,this)},this)},this)},t.na=function(){Rr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let C=c[m];for(let A=0;A<C.length;A++)f.push(d[m])}return f},t.V=function(c){Rr(this);let d=[];if(typeof c=="string")dD(this,c)&&(d=d.concat(this.g.get(Ro(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Rr(this),this.i=null,c=Ro(this,c),dD(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function hD(c,d,f){lD(c,d),0<f.length&&(c.i=null,c.g.set(Ro(c,d),S(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let A=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var C=A;O[m]!==""&&(C+="="+encodeURIComponent(String(O[m]))),c.push(C)}}return this.i=c.join("&")};function Ro(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function sk(c,d){d&&!c.j&&(Rr(c),c.i=null,c.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(lD(this,m),hD(this,C,f))},c)),c.j=d}function ak(c,d){let f=new Oa;if(a.Image){let m=new Image;m.onload=y(Nr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Nr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Nr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Nr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function ck(c,d){let f=new Oa,m=new AbortController,C=setTimeout(()=>{m.abort(),Nr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(C),A.ok?Nr(f,"TestPingServer: ok",!0,d):Nr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Nr(f,"TestPingServer: error",!1,d)})}function Nr(c,d,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function uk(){this.g=new zP}function lk(c,d,f){let m=f||"";try{sD(c,function(C,A){let O=C;l(C)&&(O=Vp(C)),d.push(m+A+"="+encodeURIComponent(O))})}catch(C){throw d.push(m+"type="+encodeURIComponent("_badmap")),C}}function Ua(c){this.l=c.Ub||null,this.j=c.eb||!1}I(Ua,jp),Ua.prototype.g=function(){return new tl(this.l,this.j)},Ua.prototype.i=function(c){return function(){return c}}({});function tl(c,d){ht.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(tl,ht),t=tl.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,$a(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ba(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,$a(this)),this.g&&(this.readyState=3,$a(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fD(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function fD(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ba(this):$a(this),this.readyState==3&&fD(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ba(this))},t.Qa=function(c){this.g&&(this.response=c,Ba(this))},t.ga=function(){this.g&&Ba(this)};function Ba(c){c.readyState=4,c.l=null,c.j=null,c.v=null,$a(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function $a(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function pD(c){let d="";return Ie(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Qp(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=pD(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Me(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Me,ht);var dk=/^https?$/i,hk=["POST","PUT"];t=Me.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$p.g(),this.v=this.o?Hw(this.o):Hw($p),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){gD(this,A);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())f.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hk,d,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of f)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vD(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){gD(this,A)}};function gD(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,mD(c),nl(c)}function mD(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_t(this,"complete"),_t(this,"abort"),nl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nl(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yD(this):this.bb())},t.bb=function(){yD(this)};function yD(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Yn(c)!=4||c.Z()!=2)){if(c.u&&Yn(c)==4)jw(c.Ea,0,c);else if(_t(c,"readystatechange"),Yn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=O===0){var C=String(c.D).match(aD)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),m=!dk.test(C?C.toLowerCase():"")}f=m}if(f)_t(c,"complete"),_t(c,"success");else{c.m=6;try{var A=2<Yn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",mD(c)}}finally{nl(c)}}}}function nl(c,d){if(c.g){vD(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||_t(c,"ready");try{f.onreadystatechange=m}catch{}}}function vD(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Yn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),qP(d)}};function _D(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function fk(c){let d={};c=(c.g&&2<=Yn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if($(c[m]))continue;var f=T(c[m]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}D(d,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ha(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function ED(c){this.Aa=0,this.i=[],this.j=new Oa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ha("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ha("baseRetryDelayMs",5e3,c),this.cb=Ha("retryDelaySeedMs",1e4,c),this.Wa=Ha("forwardChannelMaxRetries",2,c),this.wa=Ha("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new tD(c&&c.concurrentRequestLimit),this.Da=new uk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ED.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,m){Et(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=RD(this,null,this.W),il(this)};function Yp(c){if(ID(c),c.G==3){var d=c.U++,f=Qn(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),qa(c,f),d=new Ar(c,c.j,d),d.L=2,d.v=el(Qn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=ND(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Zu(d)}AD(c)}function rl(c){c.g&&(Jp(c),c.g.cancel(),c.g=null)}function ID(c){rl(c),c.u&&(a.clearTimeout(c.u),c.u=null),ol(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function il(c){if(!nD(c.h)&&!c.s){c.s=!0;var d=c.Ga;Sa||kw(),Aa||(Sa(),Aa=!0),Rp.add(d,c),c.B=0}}function pk(c,d){return rD(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=xa(g(c.Ga,c,d),SD(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new Ar(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=DD(this,C,d),f=Qn(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),qa(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(pD(A)))+"&"+d:this.m&&Qp(f,this.m,A)),Kp(this.h,C),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),C.T=!0,qp(C,f,null)):qp(C,f,d),this.G=2}}else this.G==3&&(c?wD(this,c):this.i.length==0||nD(this.h)||wD(this))};function wD(c,d){var f;d?f=d.l:f=c.U++;let m=Qn(c.I);Te(m,"SID",c.K),Te(m,"RID",f),Te(m,"AID",c.T),qa(c,m),c.m&&c.o&&Qp(m,c.m,c.o),f=new Ar(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=DD(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Kp(c.h,f),qp(f,m,d)}function qa(c,d){c.H&&Ie(c.H,function(f,m){Te(d,m,f)}),c.l&&sD({},function(f,m){Te(d,m,f)})}function DD(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let O=["count="+f];A==-1?0<f?(A=C[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let we=!0;for(let at=0;at<f;at++){let fe=C[at].g,ft=C[at].map;if(fe-=A,0>fe)A=Math.max(0,C[at].g-100),we=!1;else try{lk(ft,O,"req"+fe+"_")}catch{m&&m(ft)}}if(we){m=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function TD(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Sa||kw(),Aa||(Sa(),Aa=!0),Rp.add(d,c),c.v=0}}function Zp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=xa(g(c.Fa,c),SD(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,CD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=xa(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),rl(this),CD(this))};function Jp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function CD(c){c.g=new Ar(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Qn(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),qa(c,d),c.m&&c.o&&Qp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=el(Qn(d)),f.m=null,f.P=!0,Jw(f,c)}t.Za=function(){this.C!=null&&(this.C=null,rl(this),Zp(this),Et(19))};function ol(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function bD(c,d){var f=null;if(c.g==d){ol(c),Jp(c),c.g=null;var m=2}else if(Wp(c.h,d))f=d.D,iD(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;m=Ku(),_t(m,new Kw(m,f)),il(c)}else TD(c);else if(C=d.s,C==3||C==0&&0<d.X||!(m==1&&pk(c,d)||m==2&&Zp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:Ei(c,5);break;case 4:Ei(c,10);break;case 3:Ei(c,6);break;default:Ei(c,2)}}}function SD(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Ei(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let C=!m;m=new _i(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ju(m,"https"),el(m),C?ak(m.toString(),f):ck(m.toString(),f)}else Et(2);c.G=0,c.l&&c.l.sa(d),AD(c),ID(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function AD(c){if(c.G=0,c.ka=[],c.l){let d=oD(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function RD(c,d,f){var m=f instanceof _i?Qn(f):new _i(f);if(m.g!="")d&&(m.g=d+"."+m.g),Xu(m,m.s);else{var C=a.location;m=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new _i(null);m&&Ju(A,m),d&&(A.g=d),C&&Xu(A,C),f&&(A.l=f),m=A}return f=c.D,d=c.ya,f&&d&&Te(m,f,d),Te(m,"VER",c.la),qa(c,m),m}function ND(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Me(new Ua({eb:f})):new Me(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function MD(){}t=MD.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sl(){}sl.prototype.g=function(c,d){return new Ft(c,d)};function Ft(c,d){ht.call(this),this.g=new ED(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!$(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new No(this)}I(Ft,ht),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Yp(this.g)},Ft.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Vp(c),c=f);d.i.push(new ZP(d.Ya++,c)),d.G==3&&il(d)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Yp(this.g),delete this.g,Ft.aa.N.call(this)};function PD(c){Up.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}I(PD,Up);function kD(){Bp.call(this),this.status=1}I(kD,Bp);function No(c){this.g=c}I(No,MD),No.prototype.ua=function(){_t(this.g,"a")},No.prototype.ta=function(c){_t(this.g,new PD(c))},No.prototype.sa=function(c){_t(this.g,new kD)},No.prototype.ra=function(){_t(this.g,"b")},sl.prototype.createWebChannel=sl.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,H_=mr.createWebChannelTransport=function(){return new sl},$_=mr.getStatEventTarget=function(){return Ku()},B_=mr.Event=yi,gf=mr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qu.NO_ERROR=0,Qu.TIMEOUT=8,Qu.HTTP_ERROR=6,yu=mr.ErrorCode=Qu,Qw.COMPLETE="complete",U_=mr.EventType=Qw,qw.EventType=Pa,Pa.OPEN="a",Pa.CLOSE="b",Pa.ERROR="c",Pa.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Ws=mr.WebChannel=qw,GH=mr.FetchXmlHttpFactory=Ua,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,j_=mr.XhrIo=Me}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});var ER="@firebase/firestore",IR="4.8.0";var ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");var ya="11.10.0";var mo=new Un("@firebase/firestore");function Ks(){return mo.logLevel}function L(t,...e){if(mo.logLevel<=ue.DEBUG){let n=e.map(OI);mo.debug(`Firestore (${ya}): ${t}`,...n)}}function vr(t,...e){if(mo.logLevel<=ue.ERROR){let n=e.map(OI);mo.error(`Firestore (${ya}): ${t}`,...n)}}function li(t,...e){if(mo.logLevel<=ue.WARN){let n=e.map(OI);mo.warn(`Firestore (${ya}): ${t}`,...n)}}function OI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,dN(t,r,n)}function dN(t,e,n){let r=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw vr(r),new Error(r)}function Ee(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||dN(e,i,r)}function ee(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends tn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $n=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var wf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},K_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ot.UNAUTHENTICATED))}shutdown(){}},Q_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Y_=class{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new $n,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new $n)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new wf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new ot(e)}},Z_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},J_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Z_(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Df=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},X_=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ee(this.o===void 0,3512);let r=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Df(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Df(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function WH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function hN(){return new TextEncoder}var wu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=WH(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function se(t,e){return t<e?-1:t>e?1:0}function eE(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return se(r,i);{let o=hN(),s=KH(o.encode(wR(t,n)),o.encode(wR(e,n)));return s!==0?s:se(r,i)}}n+=r>65535?2:1}return se(t.length,e.length)}function wR(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function KH(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return se(t[n],e[n]);return se(t.length,e.length)}function oa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var DR="__name__",Tf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return se(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):eE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gr.fromString(e.substring(4,e.length-2))}},Ce=class t extends Tf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new F(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},QH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Gt=class t extends Tf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return QH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DR}static keyField(){return new t([DR])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new F(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new F(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ce.fromString(e))}static fromName(e){return new t(Ce.fromString(e).popFirst(5))}static empty(){return new t(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ce(e.slice()))}};function fN(t,e,n){if(!n)throw new F(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YH(t,e,n,r){if(e===!0&&r===!0)throw new F(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function TR(t){if(!H.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function CR(t){if(H.isDocumentKey(t))throw new F(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function tp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z(12329,{type:typeof t})}function yo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=tp(t);throw new F(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ZH(t,e){if(e<=0)throw new F(N.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Ke(t,e){let n={typeString:t};return e&&(n.value=e),n}function Ou(t,e){if(!pN(t))throw new F(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new F(N.INVALID_ARGUMENT,n);return!0}var bR=-62135596800,SR=1e6,Qe=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*SR);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<bR)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/SR}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ou(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-bR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:Ke("string",Qe._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};var te=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Qe(0,0))}static max(){return new t(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Du=-1,tE=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};tE.UNKNOWN_ID=-1;function JH(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new vo(i,H.empty(),e)}function XH(t){return new vo(t.readTime,t.key,Du)}var vo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),H.empty(),Du)}static max(){return new t(te.max(),H.empty(),Du)}};function e4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}var t4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function va(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==t4)throw t;L("LocalStore","Unexpectedly lost primary lease")}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function n4(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _a(t){return t.name==="IndexedDbTransactionError"}var FI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),LI=-1;function np(t){return t==null}function Tu(t){return t===0&&1/t==-1/0}function r4(t){return typeof t=="number"&&Number.isInteger(t)&&!Tu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var gN="";function i4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=AR(e)),e=o4(t.get(n),e);return AR(e)}function o4(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case gN:n+="";break;default:n+=o}}return n}function AR(t){return t+gN+""}var s4="remoteDocuments",mN="owner";var yN="mutationQueues";var vN="mutations";var _N="documentMutations",a4="remoteDocumentsV14";var EN="remoteDocumentGlobal";var IN="targets";var wN="targetDocuments";var DN="targetGlobal",TN="collectionParents";var CN="clientMetadata";var bN="bundles";var SN="namedQueries";var c4="indexConfiguration";var u4="indexState";var l4="indexEntries";var AN="documentOverlays";var d4="globals";var h4=[yN,vN,_N,s4,IN,mN,DN,wN,CN,EN,TN,bN,SN],Koe=[...h4,AN],f4=[yN,vN,_N,a4,IN,mN,DN,wN,CN,EN,TN,bN,SN,AN],p4=f4,g4=[...p4,c4,u4,l4];var Qoe=[...g4,d4];function RR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function gi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Fe=class t{constructor(e,n){this.comparator=e,this.root=n||Hn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Js(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Js(this.root,e,this.comparator,!1)}getReverseIterator(){return new Js(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Js(this.root,e,this.comparator,!0)}},Js=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Hn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw z(27949);return e+(this.isRed()?0:1)}};Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw z(57766)}get value(){throw z(16141)}get color(){throw z(16727)}get left(){throw z(29726)}get right(){throw z(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var st=class t{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Cf(this.data.getIterator())}getIteratorFrom(e){return new Cf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Cf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var rn=class t{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new t([])}unionWith(e){let n=new st(Gt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oa(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var bf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var vt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new bf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};vt.EMPTY_BYTE_STRING=new vt("");var m4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _r(t){if(Ee(!!t,39018),typeof t=="string"){let e=0,n=m4.exec(t);if(Ee(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Er(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}var NN="server_timestamp",MN="__type__",PN="__previous_value__",kN="__local_write_time__";function rp(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[MN])===null||n===void 0?void 0:n.stringValue)===NN}function ip(t){let e=t.mapValue.fields[PN];return rp(e)?ip(e):e}function Cu(t){let e=_r(t.mapValue.fields[kN].timestampValue);return new Qe(e.seconds,e.nanos)}var rE=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Sf="(default)",Af=class t{constructor(e,n){this.projectId=e,this.database=n||Sf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Sf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var VI="__type__",xN="__max__",mf={mapValue:{fields:{__type__:{stringValue:xN}}}},jI="__vector__",sa="value";function di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rp(t)?4:FN(t)?9007199254740991:ON(t)?10:11:z(28295,{value:t})}function Gn(t,e){if(t===e)return!0;let n=di(t);if(n!==di(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cu(t).isEqual(Cu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=_r(i.timestampValue),a=_r(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Er(i.bytesValue).isEqual(Er(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ae(i.geoPointValue.latitude)===Ae(o.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ae(i.integerValue)===Ae(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ae(i.doubleValue),a=Ae(o.doubleValue);return s===a?Tu(s)===Tu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return oa(t.arrayValue.values||[],e.arrayValue.values||[],Gn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(RR(s)!==RR(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Gn(s[u],a[u])))return!1;return!0}(t,e);default:return z(52216,{left:t})}}function bu(t,e){return(t.values||[]).find(n=>Gn(n,e))!==void 0}function aa(t,e){if(t===e)return 0;let n=di(t),r=di(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ae(o.integerValue||o.doubleValue),u=Ae(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return NR(t.timestampValue,e.timestampValue);case 4:return NR(Cu(t),Cu(e));case 5:return eE(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Er(o),u=Er(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=se(a[l],u[l]);if(h!==0)return h}return se(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=se(Ae(o.latitude),Ae(s.latitude));return a!==0?a:se(Ae(o.longitude),Ae(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return MR(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[sa])===null||a===void 0?void 0:a.arrayValue,I=(u=g[sa])===null||u===void 0?void 0:u.arrayValue,S=se(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=I?.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:MR(y,I)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===mf.mapValue&&s===mf.mapValue)return 0;if(o===mf.mapValue)return 1;if(s===mf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=eE(u[p],h[p]);if(g!==0)return g;let y=aa(a[u[p]],l[h[p]]);if(y!==0)return y}return se(u.length,h.length)}(t.mapValue,e.mapValue);default:throw z(23264,{le:n})}}function NR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);let n=_r(t),r=_r(e),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function MR(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=aa(n[i],r[i]);if(o)return o}return se(n.length,r.length)}function ca(t){return iE(t)}function iE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=_r(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Er(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=iE(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${iE(n.fields[s])}`;return i+"}"}(t.mapValue):z(61005,{value:t})}function _f(t){switch(di(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ip(t);return e?16+_f(e):16;case 5:return 2*t.stringValue.length;case 6:return Er(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+_f(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return gi(r.fields,(o,s)=>{i+=o.length+_f(s)}),i}(t.mapValue);default:throw z(13486,{value:t})}}function Rf(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function oE(t){return!!t&&"integerValue"in t}function UI(t){return!!t&&"arrayValue"in t}function PR(t){return!!t&&"nullValue"in t}function kR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ef(t){return!!t&&"mapValue"in t}function ON(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[VI])===null||n===void 0?void 0:n.stringValue)===jI}function _u(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_u(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_u(t.arrayValue.values[n]);return e}return Object.assign({},t)}function FN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===xN}var Zoe={mapValue:{fields:{[VI]:{stringValue:jI},[sa]:{arrayValue:{}}}}};var zt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ef(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(n)}setAll(e){let n=Gt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=_u(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Ef(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Gn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ef(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){gi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(_u(this.value))}};function LN(t){let e=[];return gi(t.fields,(n,r)=>{let i=new Gt([n]);if(Ef(r)){let o=LN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new rn(e)}var Cn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),zt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var hi=class{constructor(e,n){this.position=e,this.inclusive=n}};function xR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),n.key):r=aa(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function OR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Gn(t.position[n],e.position[n]))return!1;return!0}var _o=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function y4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Nf=class{},We=class t extends Nf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aE(e,n,r):n==="array-contains"?new lE(e,r):n==="in"?new dE(e,r):n==="not-in"?new hE(e,r):n==="array-contains-any"?new fE(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cE(e,r):new uE(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(aa(n,this.value)):n!==null&&di(this.value)===di(n)&&this.matchesComparison(aa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},bn=class t extends Nf{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return VN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function VN(t){return t.op==="and"}function jN(t){return v4(t)&&VN(t)}function v4(t){for(let e of t.filters)if(e instanceof bn)return!1;return!0}function sE(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+ca(t.value);if(jN(t))return t.filters.map(e=>sE(e)).join(",");{let e=t.filters.map(n=>sE(n)).join(",");return`${t.op}(${e})`}}function UN(t,e){return t instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&Gn(r.value,i.value)}(t,e):t instanceof bn?function(r,i){return i instanceof bn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&UN(s,i.filters[a]),!0):!1}(t,e):void z(19439)}function BN(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${ca(n.value)}`}(t):t instanceof bn?function(n){return n.op.toString()+" {"+n.getFilters().map(BN).join(" ,")+"}"}(t):"Filter"}var aE=class extends We{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},cE=class extends We{constructor(e,n){super(e,"in",n),this.keys=$N("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},uE=class extends We{constructor(e,n){super(e,"not-in",n),this.keys=$N("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function $N(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var lE=class extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return UI(n)&&bu(n.arrayValue,this.value)}},dE=class extends We{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&bu(this.value.arrayValue,n)}},hE=class extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bu(this.value.arrayValue,n)}},fE=class extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!UI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bu(this.value.arrayValue,r))}};var pE=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function FR(t,e=null,n=[],r=[],i=null,o=null,s=null){return new pE(t,e,n,r,i,o,s)}function BI(t){let e=ee(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),np(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ca(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ca(r)).join(",")),e.Pe=n}return e.Pe}function $I(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!y4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!OR(t.startAt,e.startAt)&&OR(t.endAt,e.endAt)}function gE(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ir=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function _4(t,e,n,r,i,o,s,a){return new Ir(t,e,n,r,i,o,s,a)}function HN(t){return new Ir(t)}function LR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HI(t){return t.collectionGroup!==null}function ea(t){let e=ee(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new st(Gt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new _o(o,r))}),n.has(Gt.keyField().canonicalString())||e.Te.push(new _o(Gt.keyField(),r))}return e.Te}function qn(t){let e=ee(t);return e.Ie||(e.Ie=E4(e,ea(t))),e.Ie}function E4(t,e){if(t.limitType==="F")return FR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new _o(i.field,o)});let n=t.endAt?new hi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hi(t.startAt.position,t.startAt.inclusive):null;return FR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function mE(t,e){let n=t.filters.concat([e]);return new Ir(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mf(t,e,n){return new Ir(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function op(t,e){return $I(qn(t),qn(e))&&t.limitType===e.limitType}function qN(t){return`${BI(qn(t))}|lt:${t.limitType}`}function Qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>BN(i)).join(", ")}]`),np(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ca(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ca(i)).join(",")),`Target(${r})`}(qn(t))}; limitType=${t.limitType})`}function sp(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of ea(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=xR(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,ea(r),i)||r.endAt&&!function(s,a,u){let l=xR(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,ea(r),i))}(t,e)}function I4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zN(t){return(e,n)=>{let r=!1;for(let i of ea(t)){let o=w4(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function w4(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?aa(u,l):z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z(19790,{direction:t.dir})}}var wr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return RN(this.inner)}size(){return this.innerSize}};var D4=new Fe(H.comparator);function Dr(){return D4}var GN=new Fe(H.comparator);function vu(...t){let e=GN;for(let n of t)e=e.insert(n.key,n);return e}function WN(t){let e=GN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function po(){return Eu()}function KN(){return Eu()}function Eu(){return new wr(t=>t.toString(),(t,e)=>t.isEqual(e))}var T4=new Fe(H.comparator),C4=new st(H.comparator);function le(...t){let e=C4;for(let n of t)e=e.add(n);return e}var b4=new st(se);function S4(){return b4}function qI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tu(e)?"-0":e}}function QN(t){return{integerValue:""+t}}function A4(t,e){return r4(e)?QN(e):qI(t,e)}var ua=class{constructor(){this._=void 0}};function R4(t,e,n){return t instanceof la?function(i,o){let s={fields:{[MN]:{stringValue:NN},[kN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&rp(o)&&(o=ip(o)),o&&(s.fields[PN]=o),{mapValue:s}}(n,e):t instanceof Eo?ZN(t,e):t instanceof Io?JN(t,e):function(i,o){let s=YN(i,o),a=VR(s)+VR(i.Ee);return oE(s)&&oE(i.Ee)?QN(a):qI(i.serializer,a)}(t,e)}function N4(t,e,n){return t instanceof Eo?ZN(t,e):t instanceof Io?JN(t,e):n}function YN(t,e){return t instanceof da?function(r){return oE(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var la=class extends ua{},Eo=class extends ua{constructor(e){super(),this.elements=e}};function ZN(t,e){let n=XN(e);for(let r of t.elements)n.some(i=>Gn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Io=class extends ua{constructor(e){super(),this.elements=e}};function JN(t,e){let n=XN(e);for(let r of t.elements)n=n.filter(i=>!Gn(i,r));return{arrayValue:{values:n}}}var da=class extends ua{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function VR(t){return Ae(t.integerValue||t.doubleValue)}function XN(t){return UI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function M4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Eo&&i instanceof Eo||r instanceof Io&&i instanceof Io?oa(r.elements,i.elements,Gn):r instanceof da&&i instanceof da?Gn(r.Ee,i.Ee):r instanceof la&&i instanceof la}(t.transform,e.transform)}var yE=class{constructor(e,n){this.version=e,this.transformResults=n}},yr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function If(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ha=class{};function eM(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Su(t.key,yr.none()):new wo(t.key,t.data,yr.none());{let n=t.data,r=zt.empty(),i=new st(Gt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Wn(t.key,r,new rn(i.toArray()),yr.none())}}function P4(t,e,n){t instanceof wo?function(i,o,s){let a=i.value.clone(),u=UR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Wn?function(i,o,s){if(!If(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=UR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(tM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Iu(t,e,n,r){return t instanceof wo?function(o,s,a,u){if(!If(o.precondition,s))return a;let l=o.value.clone(),h=BR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Wn?function(o,s,a,u){if(!If(o.precondition,s))return a;let l=BR(o.fieldTransforms,u,s),h=s.data;return h.setAll(tM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return If(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function k4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=YN(r.transform,i||null);o!=null&&(n===null&&(n=zt.empty()),n.set(r.field,o))}return n||null}function jR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oa(r,i,(o,s)=>M4(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var wo=class extends ha{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Wn=class extends ha{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function tM(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function UR(t,e,n){let r=new Map;Ee(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,N4(s,a,n[i]))}return r}function BR(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,R4(o,s,e))}return r}var Su=class extends ha{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},vE=class extends ha{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var _E=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&P4(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Iu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Iu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=KN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=eM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&oa(this.mutations,e.mutations,(n,r)=>jR(n,r))&&oa(this.baseMutations,e.baseMutations,(n,r)=>jR(n,r))}},EE=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ee(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return T4}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var IE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var wE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ze,he;function x4(t){switch(t){case N.OK:return z(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return z(15467,{code:t})}}function nM(t){if(t===void 0)return vr("GRPC error has no .code"),N.UNKNOWN;switch(t){case ze.OK:return N.OK;case ze.CANCELLED:return N.CANCELLED;case ze.UNKNOWN:return N.UNKNOWN;case ze.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ze.INTERNAL:return N.INTERNAL;case ze.UNAVAILABLE:return N.UNAVAILABLE;case ze.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ze.NOT_FOUND:return N.NOT_FOUND;case ze.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ze.ABORTED:return N.ABORTED;case ze.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ze.DATA_LOSS:return N.DATA_LOSS;default:return z(39323,{code:t})}}(he=ze||(ze={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var $R=null;var O4=new gr([4294967295,4294967295],0);function HR(t){let e=hN().encode(t),n=new V_;return n.update(e),new Uint8Array(n.digest())}function qR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new gr([n,r],0),new gr([i,o],0)]}var DE=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new go(`Invalid padding: ${n}`);if(r<0)throw new go(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new go(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new go(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=gr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(gr.fromNumber(r)));return i.compare(O4)===1&&(i=new gr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=HR(e),[r,i]=qR(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=HR(e),[r,i]=qR(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},go=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Pf=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new Fe(se),Dr(),le())}},Au=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var ta=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},kf=class{constructor(e,n){this.targetId=e,this.De=n}},xf=class{constructor(e,n,r=vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Of=class{constructor(){this.ve=0,this.Ce=zR(),this.Fe=vt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=le(),n=le(),r=le();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z(38017,{changeType:o})}}),new Au(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=zR()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},TE=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Dr(),this.je=yf(),this.Je=yf(),this.He=new Fe(se)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(gE(o))if(r===0){let s=new H(o.path);this.Xe(n,s,Cn.newNoDocument(s,te.min()))}else Ee(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}$R?.ct(function(h,p,g,y,I){var S,R,x,$,G,ye;let Le={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Ie=p.unchangedNames;return Ie&&(Le.bloomFilter={applied:I===0,hashCount:(S=Ie?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:($=(x=(R=Ie?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&$!==void 0?$:0,padding:(ye=(G=Ie?.bits)===null||G===void 0?void 0:G.padding)!==null&&ye!==void 0?ye:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),Le}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Er(r).toUint8Array()}catch(u){if(u instanceof bf)return li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new DE(s,i,o)}catch(u){return li(u instanceof go?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&gE(a.target)){let u=new H(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,Cn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=le();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Pf(e,n,this.He,this.ze,r);return this.ze=Dr(),this.je=yf(),this.Je=yf(),this.He=new Fe(se),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Of,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new st(se),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new st(se),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Of),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function yf(){return new Fe(H.comparator)}function zR(){return new Fe(H.comparator)}var F4={asc:"ASCENDING",desc:"DESCENDING"},L4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},V4={and:"AND",or:"OR"},CE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function bE(t,e){return t.useProto3Json||np(e)?e:{value:e}}function Ff(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rM(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function j4(t,e){return Ff(t,e.toTimestamp())}function zn(t){return Ee(!!t,49232),te.fromTimestamp(function(n){let r=_r(n);return new Qe(r.seconds,r.nanos)}(t))}function zI(t,e){return SE(t,e).canonicalString()}function SE(t,e){let n=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iM(t){let e=Ce.fromString(t);return Ee(uM(e),10190,{key:e.toString()}),e}function AE(t,e){return zI(t.databaseId,e.path)}function q_(t,e){let n=iM(e);if(n.get(1)!==t.databaseId.projectId)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(sM(n))}function oM(t,e){return zI(t.databaseId,e)}function U4(t){let e=iM(t);return e.length===4?Ce.emptyPath():sM(e)}function RE(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sM(t){return Ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function GR(t,e,n){return{name:AE(t,e),fields:n.value.mapValue.fields}}function B4(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Ee(h===void 0||typeof h=="string",58123),vt.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?N.UNKNOWN:nM(l.code);return new F(h,l.message||"")}(s);n=new xf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=q_(t,r.document.name),o=zn(r.document.updateTime),s=r.document.createTime?zn(r.document.createTime):te.min(),a=new zt({mapValue:{fields:r.document.fields}}),u=Cn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ta(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=q_(t,r.document),o=r.readTime?zn(r.readTime):te.min(),s=Cn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ta([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=q_(t,r.document),o=r.removedTargetIds||[];n=new ta([],o,i,null)}else{if(!("filter"in e))return z(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new wE(i,o),a=r.targetId;n=new kf(a,s)}}return n}function $4(t,e){let n;if(e instanceof wo)n={update:GR(t,e.key,e.value)};else if(e instanceof Su)n={delete:AE(t,e.key)};else if(e instanceof Wn)n={update:GR(t,e.key,e.data),updateMask:Z4(e.fieldMask)};else{if(!(e instanceof vE))return z(16599,{Rt:e.type});n={verify:AE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof la)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Eo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Io)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof da)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw z(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:j4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z(27497)}(t,e.precondition)),n}function H4(t,e){return t&&t.length>0?(Ee(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?zn(i.updateTime):zn(o);return s.isEqual(te.min())&&(s=zn(o)),new yE(s,i.transformResults||[])}(n,e))):[]}function q4(t,e){return{documents:[oM(t,e.path)]}}function z4(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oM(t,i);let o=function(l){if(l.length!==0)return cM(bn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Ys(g.field),direction:K4(g.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=bE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:n,parent:i}}function G4(t){let e=U4(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ee(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let g=aM(p);return g instanceof bn&&jN(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(I){return new _o(Zs(I.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,np(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new hi(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new hi(y,g)}(n.endAt)),_4(e,i,s,o,a,"F",u,l)}function W4(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aM(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Zs(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Zs(n.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Zs(n.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Zs(n.unaryFilter.field);return We.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return z(61313);default:return z(60726)}}(t):t.fieldFilter!==void 0?function(n){return We.create(Zs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return z(58110);default:return z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bn.create(n.compositeFilter.filters.map(r=>aM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z(1026)}}(n.compositeFilter.op))}(t):z(30097,{filter:t})}function K4(t){return F4[t]}function Q4(t){return L4[t]}function Y4(t){return V4[t]}function Ys(t){return{fieldPath:t.canonicalString()}}function Zs(t){return Gt.fromServerFormat(t.fieldPath)}function cM(t){return t instanceof We?function(n){if(n.op==="=="){if(kR(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NAN"}};if(PR(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kR(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NOT_NAN"}};if(PR(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ys(n.field),op:Q4(n.op),value:n.value}}}(t):t instanceof bn?function(n){let r=n.getFilters().map(i=>cM(i));return r.length===1?r[0]:{compositeFilter:{op:Y4(n.op),filters:r}}}(t):z(54877,{filter:t})}function Z4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uM(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ru=class t{constructor(e,n,r,i,o=te.min(),s=te.min(),a=vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var NE=class{constructor(e){this.gt=e}};function J4(t){let e=G4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mf(e,e.limit,"L"):e}var Lf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Ae(e.integerValue));else if("doubleValue"in e){let r=Ae(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Tu(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=_r(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(Er(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?FN(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):ON(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):z(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=sa,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(Ae(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),H.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Lf.Ut=new Lf;var ME=class{constructor(){this.Dn=new PE}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(vo.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(vo.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},PE=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new st(Ce.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new st(Ce.comparator)).toArray()}};var Joe=new Uint8Array(0);var WR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lM=41943040,nn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(lM,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var Nu=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var KR="LruGarbageCollector",X4=1048576;function QR([t,e],[n,r]){let i=se(t,n);return i===0?se(e,r):i}var kE=class{constructor(e){this.Tr=e,this.buffer=new st(QR),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();QR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},xE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){L(KR,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_a(n)?L(KR,"Ignoring IndexedDB error during garbage collection: ",n):await va(n)}await this.Rr(3e5)})}},OE=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(FI.ue);let r=new kE(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(WR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),WR):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ks()<=ue.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function eq(t,e){return new OE(t,e)}var FE=class{constructor(){this.changes=new wr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var LE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var VE=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Iu(r.mutation,i,rn.empty(),Qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=po();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=vu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=po();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Dr(),s=Eu(),a=function(){return Eu()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Wn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Iu(h.mutation,l,h.mutation.getFieldMask(),Qe.now())):s.set(l.key,rn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new LE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Eu(),i=new Fe((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||rn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||le()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=KN();h.forEach(g=>{if(!o.has(g)){let y=eM(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(po()),a=Du,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:a,changes:WN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=vu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=vu();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=function(p,g){return new Ir(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Cn.newInvalidDocument(h)))});let a=vu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Iu(h.mutation,l,rn.empty(),Qe.now()),sp(n,l)&&(a=a.insert(u,l))}),a})}};var jE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:J4(i.bundledQuery),readTime:zn(i.readTime)}}(n)),P.resolve()}};var UE=class{constructor(){this.overlays=new Fe(H.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=po();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=po(),o=n.length+1,s=new H(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Fe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=po(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=po(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new IE(n,r));let o=this.kr.get(n);o===void 0&&(o=le(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var BE=class{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var Mu=class{constructor(){this.qr=new st(Ge.Qr),this.$r=new st(Ge.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Ge(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ge(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new H(new Ce([])),r=new Ge(n,e),i=new Ge(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new H(new Ce([])),r=new Ge(n,e),i=new Ge(n,e+1),o=le();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ge(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ge=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return H.comparator(e.key,n.key)||se(e.Hr,n.Hr)}static Ur(e,n){return se(e.Hr,n.Hr)||H.comparator(e.key,n.key)}};var $E=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new st(Ge.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new _E(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ge(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?LI:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ge(n,0),i=new Ge(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new st(se);return n.forEach(i=>{let o=new Ge(i,0),s=new Ge(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new Ge(new H(o),0),a=new st(se);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ee(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new Ge(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Ge(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var HE=class{constructor(e){this.ni=e,this.docs=function(){return new Fe(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(n))}getEntries(e,n){let r=Dr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Cn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Dr(),s=n.path,a=new H(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||e4(XH(h),r)<=0||(i.has(h.key)||sp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){z(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new qE(this)}getSize(e){return P.resolve(this.size)}},qE=class extends FE{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var zE=class{constructor(e){this.persistence=e,this.ii=new wr(n=>BI(n),$I),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.si=0,this.oi=new Mu,this.targetCount=0,this._i=Nu.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new Nu(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var Vf=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new FI(0),this.ci=!1,this.ci=!0,this.li=new BE,this.referenceDelegate=e(this),this.hi=new zE(this),this.indexManager=new ME,this.remoteDocumentCache=function(i){return new HE(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new NE(n),this.Ti=new jE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new $E(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){L("MemoryPersistence","Starting transaction:",e);let i=new GE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},GE=class extends nE{constructor(e){super(),this.currentSequenceNumber=e}},WE=class t{constructor(e){this.persistence=e,this.Ai=new Mu,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw z(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=H.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,te.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},jf=class t{constructor(e,n){this.persistence=e,this.gi=new wr(r=>i4(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=eq(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_f(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var KE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=le(),i=le();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var QE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var YE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return bA()?8:n4(qt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new QE;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Ks()<=ue.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",Qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Ks()<=ue.DEBUG&&L("QueryEngine","Query:",Qs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ks()<=ue.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",Qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qn(n))):P.resolve())}ps(e,n){if(LR(n))return P.resolve(null);let r=qn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Mf(n,null,"F"),r=qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,Mf(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return LR(n)||i.isEqual(te.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(Ks()<=ue.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qs(n)),this.vs(e,s,n,JH(i,Du)).next(a=>a))})}bs(e,n){let r=new st(zN(e));return n.forEach((i,o)=>{sp(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Ks()<=ue.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Qs(n)),this.gs.getDocumentsMatchingQuery(e,n,vo.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var GI="LocalStore",tq=3e8,ZE=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Fe(se),this.Ms=new wr(o=>BI(o),$I),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function nq(t,e,n,r){return new ZE(t,e,n,r)}async function dM(t,e){let n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=le();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function rq(t,e){let n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),y=P.resolve();return g.forEach(I=>{y=y.next(()=>h.getEntry(u,I)).next(S=>{let R=l.docVersions.get(I);Ee(R!==null,48541),S.version.compareTo(R)<0&&(p.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),h.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function hM(t){let e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function iq(t,e){let n=ee(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(vt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(S,R,x){return S.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=tq?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=Dr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(oq(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(te.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function oq(t,e,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Dr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):L(GI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function sq(t,e){let n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=LI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aq(t,e){let n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Ru(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function JE(t,e,n){let r=ee(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!_a(s))throw s;L(GI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function YR(t,e,n){let r=ee(t),i=te.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=ee(u),g=p.Ms.get(h);return g!==void 0?P.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)}(r,s,qn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:te.min(),n?o:le())).next(a=>(cq(r,I4(e),a),{documents:a,qs:o})))}function cq(t,e,n){let r=t.xs.get(e)||te.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var Uf=class{constructor(){this.activeTargetIds=S4()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var XE=class{constructor(){this.Fo=new Uf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Uf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var eI=class{xo(e){}shutdown(){}};var ZR="ConnectivityMonitor",Bf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){L(ZR,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){L(ZR,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var vf=null;function tI(){return vf===null?vf=function(){return 268435456+Math.round(2147483648*Math.random())}():vf++,"0x"+vf.toString(16)}var z_="RestConnection",uq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},nI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Sf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=tI(),a=this.Go(e,n.toUriEncodedString());L(z_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=ro(l);return this.jo(e,a,u,r,h).then(p=>(L(z_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw li(z_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ya}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=uq[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var rI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var mt="WebChannelConnection",iI=class extends nI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=tI();return new Promise((a,u)=>{let l=new j_;l.setWithCredentials(!0),l.listenOnce(U_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case yu.NO_ERROR:let p=l.getResponseJson();L(mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case yu.TIMEOUT:L(mt,`RPC '${e}' ${s} timed out`),u(new F(N.DEADLINE_EXCEEDED,"Request time out"));break;case yu.HTTP_ERROR:let g=l.getStatus();if(L(mt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let I=y?.error;if(I&&I.status&&I.message){let S=function(x){let $=x.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf($)>=0?$:N.UNKNOWN}(I.status);u(new F(S,I.message))}else u(new F(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new F(N.UNAVAILABLE,"Connection failed."));break;default:z(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{L(mt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);L(mt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=tI(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=H_(),a=$_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");L(mt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,I=new rI({Ho:R=>{y?L(mt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(L(mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),L(mt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),S=(R,x,$)=>{R.listen(x,G=>{try{$(G)}catch(ye){setTimeout(()=>{throw ye},0)}})};return S(p,Ws.EventType.OPEN,()=>{y||(L(mt,`RPC '${e}' stream ${i} transport opened.`),I.s_())}),S(p,Ws.EventType.CLOSE,()=>{y||(y=!0,L(mt,`RPC '${e}' stream ${i} transport closed`),I.__(),this.I_(p))}),S(p,Ws.EventType.ERROR,R=>{y||(y=!0,li(mt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),I.__(new F(N.UNAVAILABLE,"The operation could not be completed")))}),S(p,Ws.EventType.MESSAGE,R=>{var x;if(!y){let $=R.data[0];Ee(!!$,16349);let G=$,ye=G?.error||((x=G[0])===null||x===void 0?void 0:x.error);if(ye){L(mt,`RPC '${e}' stream ${i} received error:`,ye);let Le=ye.status,Ie=function(E){let w=ze[E];if(w!==void 0)return nM(w)}(Le),D=ye.message;Ie===void 0&&(Ie=N.INTERNAL,D="Unknown error status: "+Le+" with message "+ye.message),y=!0,I.__(new F(Ie,D)),p.close()}else L(mt,`RPC '${e}' stream ${i} received:`,$),I.a_($)}}),S(a,B_.STAT_EVENT,R=>{R.stat===gf.PROXY?L(mt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===gf.NOPROXY&&L(mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function G_(){return typeof document<"u"?document:null}function ap(t){return new CE(t,!0)}var $f=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var JR="PersistentStream",Hf=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new $f(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(vr(n.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new F(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return L(JR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(L(JR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},oI=class extends Hf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=B4(this.serializer,e),r=function(o){if(!("targetChange"in o))return te.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?te.min():s.readTime?zn(s.readTime):te.min()}(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=RE(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=gE(u)?{documents:q4(o,u)}:{query:z4(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=rM(o,s.resumeToken);let l=bE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(te.min())>0){a.readTime=Ff(o,s.snapshotVersion.toTimestamp());let l=bE(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=W4(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=RE(this.serializer),n.removeTarget=e,this.k_(n)}},sI=class extends Hf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=H4(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=RE(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>$4(this.serializer,r))};this.k_(n)}};var aI=class{},cI=class extends aI{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,SE(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,SE(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},uI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(vr(n),this._a=!1):L("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Do="RemoteStore",lI=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Co(this)&&(L(Do,"Restarting streams for network reachability change."),await async function(u){let l=ee(u);l.Ia.add(4),await Fu(l),l.Aa.set("Unknown"),l.Ia.delete(4),await cp(l)}(this))})}),this.Aa=new uI(r,i)}};async function cp(t){if(Co(t))for(let e of t.da)await e(!0)}async function Fu(t){for(let e of t.da)await e(!1)}function fM(t,e){let n=ee(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),YI(n)?QI(n):Ea(n).x_()&&KI(n,e))}function WI(t,e){let n=ee(t),r=Ea(n);n.Ta.delete(e),r.x_()&&pM(n,e),n.Ta.size===0&&(r.x_()?r.B_():Co(n)&&n.Aa.set("Unknown"))}function KI(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ea(t).H_(e)}function pM(t,e){t.Ra.$e(e),Ea(t).Y_(e)}function QI(t){t.Ra=new TE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ea(t).start(),t.Aa.aa()}function YI(t){return Co(t)&&!Ea(t).M_()&&t.Ta.size>0}function Co(t){return ee(t).Ia.size===0}function gM(t){t.Ra=void 0}async function lq(t){t.Aa.set("Online")}async function dq(t){t.Ta.forEach((e,n)=>{KI(t,e)})}async function hq(t,e){gM(t),YI(t)?(t.Aa.la(e),QI(t)):t.Aa.set("Unknown")}async function fq(t,e,n){if(t.Aa.set("Online"),e instanceof xf&&e.state===2&&e.cause)try{await async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){L(Do,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qf(t,r)}else if(e instanceof ta?t.Ra.Ye(e):e instanceof kf?t.Ra.it(e):t.Ra.et(e),!n.isEqual(te.min()))try{let r=await hM(t.localStore);n.compareTo(r)>=0&&await function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(vt.EMPTY_BYTE_STRING,h.snapshotVersion)),pM(o,u);let p=new Ru(h.target,u,l,h.sequenceNumber);KI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){L(Do,"Failed to raise snapshot:",r),await qf(t,r)}}async function qf(t,e,n){if(!_a(e))throw e;t.Ia.add(1),await Fu(t),t.Aa.set("Offline"),n||(n=()=>hM(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{L(Do,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await cp(t)})}function mM(t,e){return e().catch(n=>qf(t,n,e))}async function up(t){let e=ee(t),n=fi(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:LI;for(;pq(e);)try{let i=await sq(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,gq(e,i)}catch(i){await qf(e,i)}yM(e)&&vM(e)}function pq(t){return Co(t)&&t.Pa.length<10}function gq(t,e){t.Pa.push(e);let n=fi(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function yM(t){return Co(t)&&!fi(t).M_()&&t.Pa.length>0}function vM(t){fi(t).start()}async function mq(t){fi(t).na()}async function yq(t){let e=fi(t);for(let n of t.Pa)e.X_(n.mutations)}async function vq(t,e,n){let r=t.Pa.shift(),i=EE.from(r,e,n);await mM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await up(t)}async function _q(t,e){e&&fi(t).Z_&&await async function(r,i){if(function(s){return x4(s)&&s!==N.ABORTED}(i.code)){let o=r.Pa.shift();fi(r).N_(),await mM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await up(r)}}(t,e),yM(t)&&vM(t)}async function XR(t,e){let n=ee(t);n.asyncQueue.verifyOperationInProgress(),L(Do,"RemoteStore received new credentials");let r=Co(n);n.Ia.add(3),await Fu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await cp(n)}async function Eq(t,e){let n=ee(t);e?(n.Ia.delete(2),await cp(n)):e||(n.Ia.add(2),await Fu(n),n.Aa.set("Unknown"))}function Ea(t){return t.Va||(t.Va=function(n,r,i){let o=ee(n);return o.ia(),new oI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:lq.bind(null,t),e_:dq.bind(null,t),n_:hq.bind(null,t),J_:fq.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),YI(t)?QI(t):t.Aa.set("Unknown")):(await t.Va.stop(),gM(t))})),t.Va}function fi(t){return t.ma||(t.ma=function(n,r,i){let o=ee(n);return o.ia(),new sI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:mq.bind(null,t),n_:_q.bind(null,t),ea:yq.bind(null,t),ta:vq.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await up(t)):(await t.ma.stop(),t.Pa.length>0&&(L(Do,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}var dI=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ZI(t,e){if(vr("AsyncQueue",`${e}: ${t}`),_a(t))return new F(N.UNAVAILABLE,`${e}: ${t}`);throw t}var zf=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=vu(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Gf=class{constructor(){this.fa=new Fe(H.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):z(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},fa=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,zf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&op(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var hI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},fI=class{constructor(){this.queries=eN(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=ee(n),o=i.queries;i.queries=eN(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new F(N.ABORTED,"Firestore shutting down"))}};function eN(){return new wr(t=>qN(t),op)}async function Iq(t,e){let n=ee(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new hI,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=ZI(s,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&JI(n)}async function wq(t,e){let n=ee(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Dq(t,e){let n=ee(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&JI(n)}function Tq(t,e,n){let r=ee(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function JI(t){t.Da.forEach(e=>{e.next()})}var pI,tN;(tN=pI||(pI={})).Fa="default",tN.Cache="cache";var gI=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==pI.Cache}};var Wf=class{constructor(e){this.key=e}},Kf=class{constructor(e){this.key=e}},mI=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=le(),this.mutatedKeys=le(),this.Xa=zN(e),this.eu=new zf(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new Gf,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=sp(this.query,p)?p:null,I=!!g&&this.mutatedKeys.has(g.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;g&&y?g.data.isEqual(y.data)?I!==S&&(r.track({type:3,doc:y}),R=!0):this.iu(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=S?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,I){let S=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z(20277,{At:R})}};return S(y)-S(I)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new fa(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Gf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=le(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Kf(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Wf(r))}),n}uu(e){this.Ha=e.qs,this.Za=le();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return fa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},XI="SyncEngine",yI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},vI=class{constructor(e){this.key=e,this.lu=!1}},_I=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new wr(a=>qN(a),op),this.Tu=new Map,this.Iu=new Set,this.du=new Fe(H.comparator),this.Eu=new Map,this.Au=new Mu,this.Ru={},this.Vu=new Map,this.mu=Nu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function Cq(t,e,n=!0){let r=TM(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await _M(r,e,n,!0),i}async function bq(t,e){let n=TM(t);await _M(n,e,!0,!1)}async function _M(t,e,n,r){let i=await aq(t.localStore,qn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await Sq(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&fM(t.remoteStore,i),a}async function Sq(t,e,n,r,i){t.gu=(p,g,y)=>async function(S,R,x,$){let G=R.view.nu(x);G.Ds&&(G=await YR(S.localStore,R.query,!1).then(({documents:D})=>R.view.nu(D,G)));let ye=$&&$.targetChanges.get(R.targetId),Le=$&&$.targetMismatches.get(R.targetId)!=null,Ie=R.view.applyChanges(G,S.isPrimaryClient,ye,Le);return rN(S,R.targetId,Ie._u),Ie.snapshot}(t,p,g,y);let o=await YR(t.localStore,e,!0),s=new mI(e,o.qs),a=s.nu(o.documents),u=Au.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);rN(t,n,l._u);let h=new yI(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot}async function Aq(t,e,n){let r=ee(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!op(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await JE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&WI(r.remoteStore,i.targetId),EI(r,i.targetId)}).catch(va)):(EI(r,i.targetId),await JE(r.localStore,i.targetId,!0))}async function Rq(t,e){let n=ee(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),WI(n.remoteStore,r.targetId))}async function Nq(t,e,n){let r=Lq(t);try{let i=await function(s,a){let u=ee(s),l=Qe.now(),h=a.reduce((y,I)=>y.add(I.key),le()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=Dr(),S=le();return u.Os.getEntries(y,h).next(R=>{I=R,I.forEach((x,$)=>{$.isValidDocument()||(S=S.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,I)).next(R=>{p=R;let x=[];for(let $ of a){let G=k4($,p.get($.key).overlayedDocument);G!=null&&x.push(new Wn($.key,G,LN(G.value.mapValue),yr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,x,a)}).next(R=>{g=R;let x=R.applyToLocalDocumentSet(p,S);return u.documentOverlayCache.saveOverlays(y,R.batchId,x)})}).then(()=>({batchId:g.batchId,changes:WN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Fe(se)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,n),await Lu(r,i.changes),await up(r.remoteStore)}catch(i){let o=ZI(i,"Failed to persist write");n.reject(o)}}async function EM(t,e){let n=ee(t);try{let r=await iq(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Ee(s.lu,14607):i.removedDocuments.size>0&&(Ee(s.lu,42227),s.lu=!1))}),await Lu(n,r,e)}catch(r){await va(r)}}function nN(t,e,n){let r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=ee(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&JI(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Mq(t,e,n){let r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Fe(H.comparator);s=s.insert(o,Cn.newNoDocument(o,te.min()));let a=le().add(o),u=new Pf(te.min(),new Map,new Fe(se),s,a);await EM(r,u),r.du=r.du.remove(o),r.Eu.delete(e),ew(r)}else await JE(r.localStore,e,!1).then(()=>EI(r,e,n)).catch(va)}async function Pq(t,e){let n=ee(t),r=e.batch.batchId;try{let i=await rq(n.localStore,e);wM(n,r,null),IM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lu(n,i)}catch(i){await va(i)}}async function kq(t,e,n){let r=ee(t);try{let i=await function(s,a){let u=ee(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ee(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);wM(r,e,n),IM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Lu(r,i)}catch(i){await va(i)}}function IM(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function wM(t,e,n){let r=ee(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function EI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||DM(t,r)})}function DM(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(WI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),ew(t))}function rN(t,e,n){for(let r of n)r instanceof Wf?(t.Au.addReference(r.key,e),xq(t,r)):r instanceof Kf?(L(XI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||DM(t,r.key)):z(19791,{yu:r})}function xq(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(L(XI,"New document in limbo: "+n),t.Iu.add(r),ew(t))}function ew(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new H(Ce.fromString(e)),r=t.mu.next();t.Eu.set(r,new vI(n)),t.du=t.du.insert(n,r),fM(t.remoteStore,new Ru(qn(HN(n.path)),r,"TargetPurposeLimboResolution",FI.ue))}}async function Lu(t,e,n){let r=ee(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=KE.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await async function(u,l){let h=ee(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,g=>P.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>P.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!_a(p))throw p;L(GI,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),I=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(I);h.Fs=h.Fs.insert(g,S)}}}(r.localStore,o))}async function Oq(t,e){let n=ee(t);if(!n.currentUser.isEqual(e)){L(XI,"User change. New user:",e.toKey());let r=await dM(n.localStore,e);n.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new F(N.CANCELLED,s))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lu(n,r.Bs)}}function Fq(t,e){let n=ee(t),r=n.Eu.get(e);if(r&&r.lu)return le().add(r.key);{let i=le(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function TM(t){let e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mq.bind(null,e),e.hu.J_=Dq.bind(null,e.eventManager),e.hu.pu=Tq.bind(null,e.eventManager),e}function Lq(t){let e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kq.bind(null,e),e}var CM=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=ap(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)}Cu(n,r){return null}Fu(n,r){return null}vu(n){return nq(this.persistence,new YE,n.initialUser,this.serializer)}Du(n){return new Vf(WE.Vi,this.serializer)}bu(n){return new XE}async terminate(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),II=class extends CM{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Ee(this.persistence.referenceDelegate instanceof jf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new xE(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new Vf(r=>jf.Vi(r,n),this.serializer)}};var Vq=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Oq.bind(null,this.syncEngine),await Eq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return function(){return new fI}()}createDatastore(n){let r=ap(n.databaseInfo.databaseId),i=function(s){return new iI(s)}(n.databaseInfo);return function(s,a,u,l){return new cI(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new lI(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>nN(this.syncEngine,r,0),function(){return Bf.C()?new Bf:new eI}())}createSyncEngine(n,r){return function(o,s,a,u,l,h,p){let g=new _I(o,s,a,u,l,h);return p&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){var n,r;await async function(o){let s=ee(o);L(Do,"RemoteStore shutting down."),s.Ia.add(5),await Fu(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return t.provider={build:()=>new t},t})();var wI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var pi="FirestoreClient",DI=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ot.UNAUTHENTICATED,this.clientId=wu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{L(pi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(L(pi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ZI(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function W_(t,e){t.asyncQueue.verifyOperationInProgress(),L(pi,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await dM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{li("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{L("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{li("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function iN(t,e){t.asyncQueue.verifyOperationInProgress();let n=await jq(t);L(pi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>XR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>XR(e.remoteStore,i)),t._onlineComponents=e}async function jq(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L(pi,"Using user provided OfflineComponentProvider");try{await W_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;li("Error using user provided cache. Falling back to memory cache: "+n),await W_(t,new CM)}}else L(pi,"Using default OfflineComponentProvider"),await W_(t,new II(void 0));return t._offlineComponents}async function bM(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(L(pi,"Using user provided OnlineComponentProvider"),await iN(t,t._uninitializedComponentsProvider._online)):(L(pi,"Using default OnlineComponentProvider"),await iN(t,new Vq))),t._onlineComponents}function Uq(t){return bM(t).then(e=>e.syncEngine)}async function Bq(t){let e=await bM(t),n=e.eventManager;return n.onListen=Cq.bind(null,e.syncEngine),n.onUnlisten=Aq.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=bq.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Rq.bind(null,e.syncEngine),n}function $q(t,e,n={}){let r=new $n;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){let h=new wI({next:g=>{h.Ou(),s.enqueueAndForget(()=>wq(o,p)),g.fromCache&&u.source==="server"?l.reject(new F(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new gI(a,h,{includeMetadataChanges:!0,ka:!0});return Iq(o,p)}(await Bq(t),t.asyncQueue,e,n,r)),r.promise}function SM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var oN=new Map;var AM="firestore.googleapis.com",sN=!0,Qf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new F(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AM,this.ssl=sN}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:sN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<X4)throw new F(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new F(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},pa=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new K_;switch(r.type){case"firstParty":return new J_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new F(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=oN.get(n);r&&(L("ComponentProvider","Removing Datastore"),oN.delete(n),r.terminate())}(this),Promise.resolve()}};function RM(t,e,n,r={}){var i;t=yo(t,pa);let o=ro(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Xv(`https://${u}`),e_("Firestore",!0)),s.host!==AM&&s.host!==u&&li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!io(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=ot.MOCK_USER;else{h=IA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new F(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ot(g)}t._authCredentials=new Q_(new wf(h,p))}}var Tr=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},yt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ou(n,t._jsonSchema))return new t(e,r||null,new H(Ce.fromString(n.referencePath)))}};yt._jsonSchemaVersion="firestore/documentReference/1.0",yt._jsonSchema={type:Ke("string",yt._jsonSchemaVersion),referencePath:Ke("string")};var si=class t extends Tr{constructor(e,n,r){super(e,n,HN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function NM(t,e,...n){if(t=lt(t),fN("collection","path",e),t instanceof pa){let r=Ce.fromString(e,...n);return CR(r),new si(t,null,r)}{if(!(t instanceof yt||t instanceof si))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ce.fromString(e,...n));return CR(r),new si(t.firestore,null,r)}}function tw(t,e,...n){if(t=lt(t),arguments.length===1&&(e=wu.newId()),fN("doc","path",e),t instanceof pa){let r=Ce.fromString(e,...n);return TR(r),new yt(t,null,new H(r))}{if(!(t instanceof yt||t instanceof si))throw new F(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ce.fromString(e,...n));return TR(r),new yt(t.firestore,t instanceof si?t.converter:null,new H(r))}}var aN="AsyncQueue",Yf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new $f(this,"async_queue_retry"),this.oc=()=>{let r=G_();r&&L(aN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=G_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=G_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new $n;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!_a(e))throw e;L(aN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,vr("INTERNAL UNHANDLED ERROR: ",cN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=dI.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&z(47125,{hc:cN(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function cN(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var To=class extends pa{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Yf,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Yf(e),this._firestoreClient=void 0,await e}}};function MM(t,e){let n=typeof t=="object"?t:qs(),r=typeof t=="string"?t:e||Sf,i=Qh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=_A("firestore");o&&RM(i,...o)}return i}function PM(t){if(t._terminated)throw new F(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Hq(t),t._firestoreClient}function Hq(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new rE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,SM(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new DI(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var ai=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(vt.fromBase64String(e))}catch(n){throw new F(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ou(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};ai._jsonSchemaVersion="firestore/bytes/1.0",ai._jsonSchema={type:Ke("string",ai._jsonSchemaVersion),bytes:Ke("string")};var ga=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Pu=class{constructor(e){this._methodName=e}};var ci=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Ou(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};ci._jsonSchemaVersion="firestore/geoPoint/1.0",ci._jsonSchema={type:Ke("string",ci._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};var ui=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ou(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new F(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:Ke("string",ui._jsonSchemaVersion),vectorValues:Ke("object")};var qq=/^__.*__$/,TI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Wn(e,this.data,this.fieldMask,n,this.fieldTransforms):new wo(e,this.data,n,this.fieldTransforms)}},Zf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Wn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function kM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z(40011,{Ec:t})}}var CI=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Xf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(kM(this.Ec)&&qq.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},bI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ap(e)}Dc(e,n,r,i=!1){return new CI({Ec:e,methodName:n,bc:r,path:Gt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function lp(t){let e=t._freezeSettings(),n=ap(t._databaseId);return new bI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zq(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);nw("Data must be an object, but it was:",s,r);let a=OM(r,s),u,l;if(o.merge)u=new rn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=SI(e,p,n);if(!s.contains(g))throw new F(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);LM(h,g)||h.push(g)}u=new rn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new TI(new zt(a),u,l)}var Jf=class t extends Pu{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Gq(t,e,n,r){let i=t.Dc(1,e,n);nw("Data must be an object, but it was:",i,r);let o=[],s=zt.empty();gi(r,(u,l)=>{let h=rw(e,u,n);l=lt(l);let p=i.gc(h);if(l instanceof Jf)o.push(h);else{let g=Vu(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new rn(o);return new Zf(s,a,i.fieldTransforms)}function Wq(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[SI(e,r,n)],u=[i];if(o.length%2!=0)throw new F(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(SI(e,o[g])),u.push(o[g+1]);let l=[],h=zt.empty();for(let g=a.length-1;g>=0;--g)if(!LM(l,a[g])){let y=a[g],I=u[g];I=lt(I);let S=s.gc(y);if(I instanceof Jf)l.push(y);else{let R=Vu(I,S);R!=null&&(l.push(y),h.set(y,R))}}let p=new rn(l);return new Zf(h,p,s.fieldTransforms)}function xM(t,e,n,r=!1){return Vu(n,t.Dc(r?4:3,e))}function Vu(t,e){if(FM(t=lt(t)))return nw("Unsupported field value:",e,t),OM(t,e);if(t instanceof Pu)return function(r,i){if(!kM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Vu(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return A4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Qe.fromDate(r);return{timestampValue:Ff(i.serializer,o)}}if(r instanceof Qe){let o=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ff(i.serializer,o)}}if(r instanceof ci)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ai)return{bytesValue:rM(i.serializer,r._byteString)};if(r instanceof yt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:zI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ui)return function(s,a){return{mapValue:{fields:{[VI]:{stringValue:jI},[sa]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return qI(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${tp(r)}`)}(t,e)}function OM(t,e){let n={};return RN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gi(t,(r,i)=>{let o=Vu(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function FM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof ci||t instanceof ai||t instanceof yt||t instanceof Pu||t instanceof ui)}function nw(t,e,n){if(!FM(n)||!pN(n)){let r=tp(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function SI(t,e,n){if((e=lt(e))instanceof ga)return e._internalPath;if(typeof e=="string")return rw(t,e);throw Xf("Field path arguments must be of type string or ",t,!1,void 0,n)}var Kq=new RegExp("[~\\*/\\[\\]]");function rw(t,e,n){if(e.search(Kq)>=0)throw Xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ga(...e.split("."))._internalPath}catch{throw Xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new F(N.INVALID_ARGUMENT,a+t+u)}function LM(t,e){return t.some(n=>n.isEqual(e))}var ku=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new AI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(dp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},AI=class extends ku{data(){return super.data()}};function dp(t,e){return typeof e=="string"?rw(t,e):e instanceof ga?e._internalPath:e._delegate._internalPath}function Qq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xu=class{},ma=class extends xu{};function VM(t,e,...n){let r=[];e instanceof xu&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof RI).length,a=o.filter(u=>u instanceof ep).length;if(s>1||s>0&&a>0)throw new F(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var ep=class t extends ma{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return BM(e._query,n),new Tr(e.firestore,e.converter,mE(e._query,n))}_parse(e){let n=lp(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new F(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){lN(p,h);let I=[];for(let S of p)I.push(uN(u,o,S));g={arrayValue:{values:I}}}else g=uN(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||lN(p,h),g=xM(a,s,p,h==="in"||h==="not-in");return We.create(l,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function jM(t,e,n){let r=e,i=dp("where",t);return ep._create(i,r,n)}var RI=class t extends xu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:bn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)BM(s,u),s=mE(s,u)}(e._query,n),new Tr(e.firestore,e.converter,mE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var NI=class t extends ma{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new F(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _o(o,s)}(e._query,this._field,this._direction);return new Tr(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ir(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function UM(t,e="asc"){let n=e,r=dp("orderBy",t);return NI._create(r,n)}var MI=class t extends ma{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Tr(e.firestore,e.converter,Mf(e._query,this._limit,this._limitType))}};function iw(t){return ZH("limit",t),MI._create("limit",t,"F")}var PI=class t extends ma{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=Yq(e,this.type,this._docOrFields,this._inclusive);return new Tr(e.firestore,e.converter,function(i,o){return new Ir(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function ow(...t){return PI._create("startAt",t,!0)}function Yq(t,e,n,r){if(n[0]=lt(n[0]),n[0]instanceof ku)return function(o,s,a,u,l){if(!u)throw new F(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of ea(o))if(p.field.isKeyField())h.push(Rf(s,u.key));else{let g=u.data.field(p.field);if(rp(g))throw new F(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=p.field.canonicalString();throw new F(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(g)}return new hi(h,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=lp(t.firestore);return function(s,a,u,l,h,p){let g=s.explicitOrderBy;if(h.length>g.length)throw new F(N.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let I=0;I<h.length;I++){let S=h[I];if(g[I].field.isKeyField()){if(typeof S!="string")throw new F(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!HI(s)&&S.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);let R=s.path.child(Ce.fromString(S));if(!H.isDocumentKey(R))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);let x=new H(R);y.push(Rf(a,x))}else{let R=xM(u,l,S);y.push(R)}}return new hi(y,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function uN(t,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new F(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HI(e)&&n.indexOf("/")!==-1)throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ce.fromString(n));if(!H.isDocumentKey(r))throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rf(t,new H(r))}if(n instanceof yt)return Rf(t,n._key);throw new F(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tp(n)}.`)}function lN(t,e){if(!Array.isArray(t)||t.length===0)throw new F(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BM(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var kI=class{convertValue(e,n="none"){switch(di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return gi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[sa].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ae(s.doubleValue));return new ui(o)}convertGeoPoint(e){return new ci(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=ip(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cu(e));default:return null}}convertTimestamp(e){let n=_r(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ce.fromString(e);Ee(uM(r),9688,{name:e});let i=new Af(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(n)||vr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Zq(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Xs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},na=class t extends ku{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ra(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(dp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new F(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};na._jsonSchemaVersion="firestore/documentSnapshot/1.0",na._jsonSchema={type:Ke("string",na._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};var ra=class extends na{data(e={}){return super.data(e)}},ia=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ra(this._firestore,this._userDataWriter,r.key,r,new Xs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ra(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ra(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Jq(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new F(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Jq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z(61501,{type:t})}}ia._jsonSchemaVersion="firestore/querySnapshot/1.0",ia._jsonSchema={type:Ke("string",ia._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};var xI=class extends kI{constructor(e){super(),this.firestore=e}convertBytes(e){return new ai(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}};function $M(t){t=yo(t,Tr);let e=yo(t.firestore,To),n=PM(e),r=new xI(e);return Qq(t._query),$q(n,t._query).then(i=>new ia(e,r,t,i))}function HM(t,e,n,...r){t=yo(t,yt);let i=yo(t.firestore,To),o=lp(i),s;return s=typeof(e=lt(e))=="string"||e instanceof ga?Wq(o,"updateDoc",t._key,e,n,r):Gq(o,"updateDoc",t._key,e),sw(i,[s.toMutation(t._key,yr.exists(!0))])}function qM(t){return sw(yo(t.firestore,To),[new Su(t._key,yr.none())])}function zM(t,e){let n=yo(t.firestore,To),r=tw(t),i=Zq(t.converter,e);return sw(n,[zq(lp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,yr.exists(!1))]).then(()=>r)}function sw(t,e){return function(r,i){let o=new $n;return r.asyncQueue.enqueueAndForget(async()=>Nq(await Uq(r),i,o)),o.promise}(PM(t),e)}(function(e,n=!0){(function(i){ya=i})(Hs),Dn(new Rt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new To(new Y_(r.getProvider("auth-internal")),new X_(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new F(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Af(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),He(ER,IR,e),He(ER,IR,"esm2017")})();var bo=class{constructor(e){return e}},GM="firestore",aw=class{constructor(){return Gs(GM)}};var cw=new j("angularfire2.firestore-instances");function Xq(t,e){let n=Jh(GM,t,e);return n&&new bo(n)}function e3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new bo(r)}}var t3={provide:aw,deps:[[new cr,cw]]},n3={provide:bo,useFactory:Xq,deps:[[new cr,cw],uo]};function tae(t,...e){return He("angularfire",ao.full,"fst"),un([n3,t3,{provide:cw,useFactory:e3(t),multi:!0,deps:[_e,Ue,co,lu,[new cr,ff],[new cr,ef],...e]}])}var hp=Nt(zM,!0,2);var fp=Nt(NM,!0,2);var WM=Nt(qM,!0,2);var ju=Nt(tw,!0,2);var Cr=Nt($M,!0);var nae=Nt(MM,!0);var KM=Nt(UM,!0,2),br=Nt(VM,!0,2);var pp=Nt(HM,!0,2);var Ia=Nt(jM,!0,2);var gp=class t{async updateCategoryPromptCount(e,n){let r=ju(this.firestore,"categories",e);await pp(r,{prompt_count:n,fecha_edicion:new Date})}async createCategory(e){await hp(this.categoriesCollection,W(k({},e),{slug:this.generateSlug(e.name||""),fecha_creacion:new Date}))}async updateTagPromptCount(e,n){let r=ju(this.firestore,"tags",e);await pp(r,{prompt_count:n,fecha_edicion:new Date})}async createTag(e){await hp(this.tagsCollection,W(k({},e),{slug:this.generateSlug(e.name||""),fecha_creacion:new Date}))}firestore=M(bo);promptsCollection=fp(this.firestore,"prompts");categoriesCollection=fp(this.firestore,"categories");tagsCollection=fp(this.firestore,"tags");currCategories=Ne([]);currTags=Ne([]);currPrompts=Ne([]);error=Ne(null);async getPrompts(){try{this.error.set(null);let e=this.currPrompts(),n=e.length===0?0:e[e.length-1].old_id,r=await Cr(br(this.promptsCollection,KM("old_id","asc"),ow(n),iw(10))),i=this.mapQuerySnapshotToPrompts(r);return console.log("Prompts obtenidos:",i,e),this.currPrompts.set([...e,...i.slice(1)]),this.currPrompts()}catch(e){let n=`Error al obtener prompts: ${e}`;return this.error.set(n),console.error(n),[]}}async getPromptById(e){try{this.error.set(null);let n=br(this.promptsCollection,Ia("slug","==",e)),r=await Cr(n);if(r.empty)return null;let i=r.docs[0];return i.exists()?this.mapDocumentToPrompt(i.id,i.data()):null}catch(n){let r=`Error al obtener prompt ${e}: ${n}`;return this.error.set(r),console.error(r),null}}async createPrompt(e){try{this.error.set(null);let n=W(k({},e),{old_id:-1,slug:e.titulo??this.generateSlug(e.titulo),fecha_creacion:new Date});return(await hp(this.promptsCollection,n)).id}catch(n){let r=`Error al crear prompt: ${n}`;return this.error.set(r),console.error(r),null}}async updatePrompt(e,n){try{this.error.set(null);let r=ju(this.firestore,"prompts",e);return await pp(r,W(k({},n),{fechaModificacion:new Date})),!0}catch(r){let i=`Error al actualizar prompt ${e}: ${r}`;return this.error.set(i),console.error(i),!1}}async deletePrompt(e){try{this.error.set(null);let n=ju(this.firestore,"prompts",e);return await WM(n),!0}catch(n){let r=`Error al eliminar prompt ${e}: ${n}`;return this.error.set(r),console.error(r),!1}}async searchPrompts(e){try{this.error.set(null);let n=e.toLowerCase();return(await this.getPrompts()).filter(i=>i.titulo.toLowerCase().includes(n)||i.prompt.toLowerCase().includes(n)||i.descripcion.toLowerCase().includes(n)||i.categoria.toLowerCase().includes(n)||i.tags.some(o=>o.toLowerCase().includes(n)))}catch(n){let r=`Error en b\xFAsqueda: ${n}`;return this.error.set(r),console.error(r),[]}}async getPromptsByCategory(e){try{this.error.set(null);let n=br(this.promptsCollection,Ia("categoria","==",e)),r=await Cr(n);return this.mapQuerySnapshotToPrompts(r)}catch(n){let r=`Error al obtener prompts por categor\xEDa: ${n}`;return this.error.set(r),console.error(r),[]}}async getPromptsByTag(e){try{this.error.set(null);let n=br(this.promptsCollection,Ia("tags","array-contains",e)),r=await Cr(n);return this.mapQuerySnapshotToPrompts(r)}catch(n){let r=`Error al obtener prompts por tag: ${n}`;return this.error.set(r),console.error(r),[]}}async getCategories(){if(this.currCategories().length>0)return this.currCategories();try{this.error.set(null);let e=br(this.categoriesCollection),n=await Cr(e),r=this.mapQuerySnapshotToCategories(n);return this.currCategories.set(r),r}catch(e){let n=`Error al obtener categor\xEDs: ${e}`;return this.error.set(n),console.error(n),[]}}async getTags(){if(this.currTags().length>0)return this.currTags();try{this.error.set(null);let e=br(this.tagsCollection),n=await Cr(e),r=this.mapQuerySnapshotToTags(n);return this.currTags.set(r),r}catch(e){let n=`Error al obtener etiquetas: ${e}`;return this.error.set(n),console.error(n),[]}}async getCategoryBySlug(e){try{this.error.set(null);let n=br(this.categoriesCollection,Ia("slug","==",e)),r=await Cr(n);if(r.empty)return null;let i=r.docs[0];return i.exists()?this.mapDocumentToCategory(i.id,i.data()):null}catch(n){let r=`Error al obtener category ${e}: ${n}`;return this.error.set(r),console.error(r),null}}async getTagBySlug(e){try{this.error.set(null);let n=br(this.tagsCollection,Ia("slug","==",e)),r=await Cr(n);if(r.empty)return null;let i=r.docs[0];return i.exists()?this.mapDocumentToTag(i.id,i.data()):null}catch(n){let r=`Error al obtener tag ${e}: ${n}`;return this.error.set(r),console.error(r),null}}mapQuerySnapshotToPrompts(e){return e.docs.map(n=>this.mapDocumentToPrompt(n.id,n.data()))}mapQuerySnapshotToCategories(e){return e.docs.map(n=>this.mapDocumentToCategory(n.id,n.data()))}mapQuerySnapshotToTags(e){return e.docs.map(n=>this.mapDocumentToTag(n.id,n.data()))}mapDocumentToPrompt(e,n){return{id:e,old_id:n.old_id?parseInt(n.old_id):void 0,titulo:n.titulo||"",prompt:n.prompt||"",descripcion:n.descripcion||"",autor:n.autor||"",categoria:n.categoria||"",tags:n.tags||[],uso:n.uso||"texto",idioma:n.idioma||"es-AR",fecha_creacion:n.fecha_creacion?.toDate()||new Date,slug:n.slug||this.generateSlug(n.titulo||""),fecha_edicion:n.fecha_edicion?.toDate()||new Date,modelo:n.modelo,ejemplo:n.ejemplo,fuente:n.fuente,referencias:n.referencias,notas:n.notas,estado:n.estado,version:n.version,comentarios:n.comentarios,feedback:n.feedback,rating:n.rating,visibilidad:n.visibilidad,licencia:n.licencia}}mapDocumentToCategory(e,n){return{id:e,name:n.name||"",slug:n.slug||this.generateSlug(n.name||""),prompt_count:Number(n.prompt_count)||0,fecha_creacion:n.fecha_creacion?.toDate()||new Date}}mapDocumentToTag(e,n){return{id:e,name:n.name||"",slug:n.slug||this.generateSlug(n.name||""),prompt_count:Number(n.prompt_count)||0,fecha_creacion:n.fecha_creacion?.toDate()||new Date}}generateSlug(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var QM=class t{firestoreService=M(gp);error=Xt(()=>this.firestoreService.error());search(e,n=!0){return this.searchInFirestore(e,n)}async prompts(){return await this.firestoreService.getPrompts()}async categories(){return await this.firestoreService.getCategories()}async tags(){return await this.firestoreService.getTags()}async byCategory(e){return this.firestoreService.getCategoryBySlug(e).then(async r=>{if(!r)throw new Error(`No se encontr\xF3 la categor\xEDa '${e}'.`);let i=await this.firestoreService.getPromptsByCategory(r.name);return{name:this.titleCase(r.name),prompts:i}})}async byTag(e){let n=await this.firestoreService.getTagBySlug(e);if(!n)throw new Error(`No se encontr\xF3 el tag '${e}'.`);let r=await this.firestoreService.getPromptsByTag(n.name);return{name:this.titleCase(n.name),prompts:r}}async createPrompt(e){return await this.firestoreService.createPrompt(e)}async updateTagsAndCategory(e,n){let i=(await this.categories()).find(s=>s.name.toLowerCase()===n);if(i){let s=(i.prompt_count??0)+1;await this.firestoreService.updateCategoryPromptCount(i.id,s)}else await this.firestoreService.createCategory({name:n,prompt_count:1,slug:""});let o=await this.tags();for(let s of e){let a=o.find(u=>u.name.toLowerCase()===s);if(a){let u=(a.prompt_count??0)+1;await this.firestoreService.updateTagPromptCount(a.id,u)}else await this.firestoreService.createTag({name:s,prompt_count:1,slug:""})}}async byId(e){let n=await this.firestoreService.getPromptById(e);if(!n)throw new Error(`No se encontr\xF3 un prompt '${e}'.`);return n}async searchInFirestore(e,n){try{let i=(await this.firestoreService.searchPrompts(e)).map(o=>({item:o,foundIn:"titulo",position:0,relevanceScore:1}));return{search:e,found:i}}catch(r){return console.error("Error en b\xFAsqueda de Firestore:",r),{search:e,found:[]}}}titleCase(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var YM=class t{showNotification=Ne(!1);notificationMessage=Ne({type:"success",message:""});lastTimeoutId=void 0;abort=void 0;success(e){this.notificationMessage.set({type:"success",message:e??""}),this.setNotification(!0)}warn(e){this.notificationMessage.set({type:"warn",message:e??""}),this.setNotification(!0)}notFound(e){this.notificationMessage.set({type:"404",message:e??""}),this.setNotification(!0)}setNotification(e){if(this.showNotification.set(e),this.abort?.abort(),this.showNotification()){this.abort=new AbortController;let n=this.abort.signal;window.addEventListener("keydown",this.onKeyDown.bind(this),{once:!0,signal:n,capture:!0}),window.addEventListener("click",this.onClick.bind(this),{once:!0,signal:n,capture:!0}),this.setHideTimeout()}else this.clearHideTimeout()}setHideTimeout(){this.clearHideTimeout(),this.lastTimeoutId=window.setTimeout(()=>{this.setNotification(!1)},3e3)}clearHideTimeout(){this.lastTimeoutId&&(clearTimeout(this.lastTimeoutId),this.lastTimeoutId=void 0)}onKeyDown(e){e.key==="Escape"&&this.setNotification(!1)}onClick(e){this.setNotification(!1)}ngOnDestroy(){this.abort?.abort()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var r3={menu:"M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z",back:"m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z",search:"M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z",copy:"M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z",share:"M680-80q-50 0-85-35t-35-85q0-6 3-28L282-392q-16 15-37 23.5t-45 8.5q-50 0-85-35t-35-85q0-50 35-85t85-35q24 0 45 8.5t37 23.5l281-164q-2-7-2.5-13.5T560-760q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35q-24 0-45-8.5T598-672L317-508q2 7 2.5 13.5t.5 14.5q0 8-.5 14.5T317-452l281 164q16-15 37-23.5t45-8.5q50 0 85 35t35 85q0 50-35 85t-85 35Z","dark-mode":"M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z","light-mode":"M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z",close:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z",link:"M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z",terminal:"M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H160v400Zm140-40-56-56 103-104-104-104 57-56 160 160-160 160Zm180 0v-80h240v80H480Z",check:"M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z",add:"M440-120v-320H120v-80h320v-320h80v320h320v80H520v320h-80Z"},mp=class t{elementRef=M(gt);renderer=M(Jt);icon=Ss.required({alias:"pdIcon"});size=Ss(24);fill=Ss("currentColor");constructor(){dh(()=>{this.createSvgIcon()})}createSvgIcon(){let e=r3[this.icon()];if(!e){console.warn(`Icon "${this.icon()}" not found`);return}this.elementRef.nativeElement.innerHTML="";let n=this.renderer.createElement("svg","http://www.w3.org/2000/svg");this.renderer.setAttribute(n,"height",`${this.size()}px`),this.renderer.setAttribute(n,"width",`${this.size()}px`),this.renderer.setAttribute(n,"viewBox","0 -960 960 960"),this.renderer.setAttribute(n,"fill",this.fill());let r=this.renderer.createElement("path","http://www.w3.org/2000/svg");this.renderer.setAttribute(r,"d",e),this.renderer.appendChild(n,r),this.renderer.appendChild(this.elementRef.nativeElement,n)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=de({type:t,selectors:[["","pdIcon",""]],inputs:{icon:[1,"pdIcon","icon"],size:[1,"size"],fill:[1,"fill"]}})};var yp=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=de({type:t,selectors:[["button","pdHeaderButton",""]],hostAttrs:[1,"h-10","min-w-10","flex","active:scale-95","items-center","justify-center","rounded-md","hover:bg-button-hover","transition-colors","text-header-contrast"]})};var ZM=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=de({type:t,selectors:[["","pdTruncate",""]],hostAttrs:[1,"w-full","inline-block","truncate"]})};var o3=new Intl.RelativeTimeFormat("es",{numeric:"auto"});function uw(t){let e=new Date,n=t.getTime()-e.getTime(),r=s3(n);return o3.format(a3(n,r),r)}var lw=60*1e3,dw=60*lw,hw=24*dw,fw=7*hw,pw=4*fw,JM=pw*12;function s3(t){return t=Math.abs(t),t<lw?"second":t<dw?"minute":t<hw?"hour":t<fw?"day":t<pw?"week":t<JM?"month":"year"}function a3(t,e){return Math.round(e==="minute"?t/lw:e==="hour"?t/dw:e==="day"?t/hw:e==="week"?t/fw:e==="month"?t/pw:e==="year"?t/JM:t/1e3)}var XM=class t{transform(e){return e?(uw(e instanceof Date?e:new Date(e)),uw(new Date(e))):"Sin informaci\xF3n"}static \u0275fac=function(n){return new(n||t)};static \u0275pipe=Ac({name:"relDate",type:t,pure:!0})};var c3=["pdHeaderBackButton",""],eP=class t{back=i0();onClick(e){this.back.emit(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Sc({type:t,selectors:[["button","pdHeaderBackButton",""]],hostAttrs:["title","Volver","aria-label","Volver"],hostBindings:function(n,r){n&1&&_n("click",function(o){return r.onClick(o)})},outputs:{back:"back"},features:[By([yp])],attrs:c3,decls:1,vars:0,consts:[["pdIcon","back"]],template:function(n,r){n&1&&Cs(0,"span",0)},dependencies:[mp],encapsulation:2})};var gw=class t{get height(){return this.actualHeight()}double=Ne(!1);actualHeight=Xt(()=>this.double()?"h-30":"h-14");static \u0275fac=function(n){return new(n||t)};static \u0275dir=de({type:t,selectors:[["","pdHeaderLayout",""]],hostAttrs:[1,"sticky","left-0","top-0","z-10","bg-header"],hostVars:2,hostBindings:function(n,r){n&2&&ov(r.height)}})},tP=class t extends gw{constructor(){super(),this.double.set(!0)}static \u0275fac=function(n){return new(n||t)};static \u0275dir=de({type:t,selectors:[["","pdDoubleHeaderLayout",""]],features:[Ot]})},nP=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=de({type:t,selectors:[["","pdHeaderContent",""]],hostAttrs:[1,"px-3","flex","flex-col","justify-center","gap-1","bg-header"]})},rP=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=de({type:t,selectors:[["","pdHeaderRow",""]],hostAttrs:[1,"flex","items-center","overflow-hidden","justify-between","gap-2","h-14"]})};var iP=class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=de({type:t,selectors:[["button","pdHeaderActionButton",""]],hostAttrs:[1,"hover:shadow-md","active:scale-95","hover:shadow-black/20","shadow-black/40","h-10","min-w-10","flex","items-center","justify-center","rounded-full","bg-action","hover:bg-action-hover","transition-colors","text-header-contrast"]})};var fP=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(X(Jt),X(gt))};static \u0275dir=de({type:t})}return t})(),ww=(()=>{class t extends fP{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qr(t)))(i||t)}})();static \u0275dir=de({type:t,features:[Ot]})}return t})(),qu=new j("");var u3={provide:qu,useExisting:an(()=>pP),multi:!0};function l3(){let t=en()?en().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var d3=new j(""),pP=(()=>{class t extends fP{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!l3())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(X(Jt),X(gt),X(d3,8))};static \u0275dir=de({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&_n("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Xr([u3]),Ot]})}return t})();function Dw(t){return t==null||Tw(t)===0}function Tw(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var Cw=new j(""),bw=new j(""),h3=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,oP=class{static min(e){return f3(e)}static max(e){return p3(e)}static required(e){return g3(e)}static requiredTrue(e){return m3(e)}static email(e){return y3(e)}static minLength(e){return v3(e)}static maxLength(e){return _3(e)}static pattern(e){return E3(e)}static nullValidator(e){return gP()}static compose(e){return IP(e)}static composeAsync(e){return DP(e)}};function f3(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function p3(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function g3(t){return Dw(t.value)?{required:!0}:null}function m3(t){return t.value===!0?null:{required:!0}}function y3(t){return Dw(t.value)||h3.test(t.value)?null:{email:!0}}function v3(t){return e=>{let n=e.value?.length??Tw(e.value);return n===null||n===0?null:n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}function _3(t){return e=>{let n=e.value?.length??Tw(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function E3(t){if(!t)return gP;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Dw(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function gP(t){return null}function mP(t){return t!=null}function yP(t){return Jr(t)?Re(t):t}function vP(t){let e={};return t.forEach(n=>{e=n!=null?k(k({},e),n):e}),Object.keys(e).length===0?null:e}function _P(t,e){return e.map(n=>n(t))}function I3(t){return!t.validate}function EP(t){return t.map(e=>I3(e)?e:n=>e.validate(n))}function IP(t){if(!t)return null;let e=t.filter(mP);return e.length==0?null:function(n){return vP(_P(n,e))}}function wP(t){return t!=null?IP(EP(t)):null}function DP(t){if(!t)return null;let e=t.filter(mP);return e.length==0?null:function(n){let r=_P(n,e).map(yP);return pg(r).pipe(ce(vP))}}function TP(t){return t!=null?DP(EP(t)):null}function sP(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function CP(t){return t._rawValidators}function bP(t){return t._rawAsyncValidators}function mw(t){return t?Array.isArray(t)?t:[t]:[]}function Ep(t,e){return Array.isArray(t)?t.includes(e):t===e}function aP(t,e){let n=mw(e);return mw(t).forEach(i=>{Ep(n,i)||n.push(i)}),n}function cP(t,e){return mw(e).filter(n=>!Ep(t,n))}var Ip=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ta=class extends Ip{name;get formDirective(){return null}get path(){return null}},So=class extends Ip{_parent=null;name=null;valueAccessor=null},wp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},w3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},rce=W(k({},w3),{"[class.ng-submitted]":"isSubmitted"}),ice=(()=>{class t extends wp{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(X(So,2))};static \u0275dir=de({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Pc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ot]})}return t})(),oce=(()=>{class t extends wp{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(X(Ta,10))};static \u0275dir=de({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Pc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Ot]})}return t})();var Uu="VALID",vp="INVALID",wa="PENDING",Bu="DISABLED",mi=class{},Dp=class extends mi{value;source;constructor(e,n){super(),this.value=e,this.source=n}},$u=class extends mi{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},Hu=class extends mi{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Da=class extends mi{status;source;constructor(e,n){super(),this.status=e,this.source=n}},yw=class extends mi{source;constructor(e){super(),this.source=e}},vw=class extends mi{source;constructor(e){super(),this.source=e}};function Sw(t){return(Ap(t)?t.validators:t)||null}function D3(t){return Array.isArray(t)?wP(t):t||null}function Aw(t,e){return(Ap(e)?e.asyncValidators:t)||null}function T3(t){return Array.isArray(t)?TP(t):t||null}function Ap(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function SP(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new V(1e3,"");if(!r[n])throw new V(1001,"")}function AP(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new V(1002,"")})}var Ca=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Bt(this.statusReactive)}set status(e){Bt(()=>this.statusReactive.set(e))}_status=Xt(()=>this.statusReactive());statusReactive=Ne(void 0);get valid(){return this.status===Uu}get invalid(){return this.status===vp}get pending(){return this.status==wa}get disabled(){return this.status===Bu}get enabled(){return this.status!==Bu}errors;get pristine(){return Bt(this.pristineReactive)}set pristine(e){Bt(()=>this.pristineReactive.set(e))}_pristine=Xt(()=>this.pristineReactive());pristineReactive=Ne(!0);get dirty(){return!this.pristine}get touched(){return Bt(this.touchedReactive)}set touched(e){Bt(()=>this.touchedReactive.set(e))}_touched=Xt(()=>this.touchedReactive());touchedReactive=Ne(!1);get untouched(){return!this.touched}_events=new Ve;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(aP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(aP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cP(e,this._rawAsyncValidators))}hasValidator(e){return Ep(this._rawValidators,e)}hasAsyncValidator(e){return Ep(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(W(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Hu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Hu(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(W(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new $u(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new $u(!0,r))}markAsPending(e={}){this.status=wa;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Da(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(W(k({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Bu,this.errors=null,this._forEachChild(i=>{i.disable(W(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dp(this.value,r)),this._events.next(new Da(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(W(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Uu,this._forEachChild(r=>{r.enable(W(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(W(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Uu||this.status===wa)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Dp(this.value,n)),this._events.next(new Da(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(W(k({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bu:Uu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=wa,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=yP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Da(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Oe,this.statusChanges=new Oe}_calculateStatus(){return this._allControlsDisabled()?Bu:this.errors?vp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wa)?wa:this._anyControlsHaveStatus(vp)?vp:Uu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new $u(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Hu(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ap(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=D3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=T3(this._rawAsyncValidators)}},Tp=class extends Ca{constructor(e,n,r){super(Sw(n),Aw(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){AP(this,!0,e),Object.keys(e).forEach(r=>{SP(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var _w=class extends Tp{};var Rw=new j("",{providedIn:"root",factory:()=>Nw}),Nw="always";function C3(t,e){return[...e.path,t]}function Ew(t,e,n=Nw){Mw(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),S3(t,e),R3(t,e),A3(t,e),b3(t,e)}function Cp(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Sp(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function bp(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function b3(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Mw(t,e){let n=CP(t);e.validator!==null?t.setValidators(sP(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=bP(t);e.asyncValidator!==null?t.setAsyncValidators(sP(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();bp(e._rawValidators,i),bp(e._rawAsyncValidators,i)}function Sp(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=CP(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=bP(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return bp(e._rawValidators,r),bp(e._rawAsyncValidators,r),n}function S3(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&RP(t,e)})}function A3(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&RP(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function RP(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function R3(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function N3(t,e){t==null,Mw(t,e)}function M3(t,e){return Sp(t,e)}function NP(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function P3(t){return Object.getPrototypeOf(t.constructor)===ww}function k3(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function MP(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===pP?n=o:P3(o)?r=o:i=o}),i||r||n||null}function x3(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function uP(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function lP(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var _p=class extends Ca{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(Sw(n),Aw(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ap(n)&&(n.nonNullable||n.initialValueIsDefault)&&(lP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){uP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){uP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){lP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var O3=t=>t instanceof _p;var ace=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=de({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var Pw=new j(""),F3={provide:So,useExisting:an(()=>L3)},L3=(()=>{class t extends So{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(n){}model;update=new Oe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=MP(this,i)}ngOnChanges(n){if(this._isControlChanged(n)){let r=n.form.previousValue;r&&Cp(r,this,!1),Ew(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}NP(n,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Cp(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_isControlChanged(n){return n.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||t)(X(Cw,10),X(bw,10),X(qu,10),X(Pw,8),X(Rw,8))};static \u0275dir=de({type:t,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[Xr([F3]),Ot,yn]})}return t})(),V3={provide:Ta,useExisting:an(()=>j3)},j3=(()=>{class t extends Ta{callSetDisabledState;get submitted(){return Bt(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=Xt(()=>this._submittedReactive());_submittedReactive=Ne(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Oe;constructor(n,r,i){super(),this.callSetDisabledState=i,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Sp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let r=this.form.get(n.path);return Ew(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){Cp(n.control||null,n,!1),x3(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this._submittedReactive.set(!0),k3(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new yw(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0,r={}){this.form.reset(n,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new vw(this.form))}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&(Cp(r||null,n),O3(i)&&(Ew(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);N3(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&M3(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Mw(this.form,this),this._oldForm&&Sp(this._oldForm,this)}static \u0275fac=function(r){return new(r||t)(X(Cw,10),X(bw,10),X(Rw,8))};static \u0275dir=de({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&_n("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Xr([V3]),Ot,yn]})}return t})();var U3={provide:So,useExisting:an(()=>B3)},B3=(()=>{class t extends So{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new Oe;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=MP(this,o)}ngOnChanges(n){this._added||this._setUpControl(),NP(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return C3(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||t)(X(Ta,13),X(Cw,10),X(bw,10),X(qu,10),X(Pw,8))};static \u0275dir=de({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Xr([U3]),Ot,yn]})}return t})();var $3={provide:qu,useExisting:an(()=>kP),multi:!0};function PP(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function H3(t){return t.split(":")[0]}var kP=(()=>{class t extends ww{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=M(ur).injector;appRefDestroyRef=this.appRefInjector.get(ut);destroyRef=M(ut);cdr=M(Yi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefDestroyRef.destroyed||(this._queuedWrite=!0,sh({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=PP(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=H3(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qr(t)))(i||t)}})();static \u0275dir=de({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&_n("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Xr([$3]),Ot]})}return t})(),cce=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(PP(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(X(gt),X(Jt),X(kP,9))};static \u0275dir=de({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),q3={provide:qu,useExisting:an(()=>xP),multi:!0};function dP(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function z3(t){return t.split(":")[0]}var xP=(()=>{class t extends ww{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=z3(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qr(t)))(i||t)}})();static \u0275dir=de({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&_n("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Xr([q3]),Ot]})}return t})(),uce=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(dP(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(dP(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(X(gt),X(Jt),X(xP,9))};static \u0275dir=de({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();var G3=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Zr({type:t});static \u0275inj=rr({})}return t})(),Iw=class extends Ca{constructor(e,n,r){super(Sw(n),Aw(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){AP(this,!1,e),e.forEach((r,i)=>{SP(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function hP(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var lce=(()=>{class t{useNonNullable=!1;get nonNullable(){let n=new t;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return hP(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Tp(i,o)}record(n,r=null){let i=this._reduceControls(n);return new _w(i,r)}control(n,r,i){let o={};return this.useNonNullable?(hP(r)?o=r:(o.validators=r,o.asyncValidators=i),new _p(n,W(k({},o),{nonNullable:!0}))):new _p(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new Iw(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof _p)return n;if(n instanceof Ca)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var dce=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Pw,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Rw,useValue:n.callSetDisabledState??Nw}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Zr({type:t});static \u0275inj=rr({imports:[G3]})}return t})();export{k as a,W as b,Z as c,ce as d,ke as e,gg as f,Mt as g,Gk as h,nt as i,Kk as j,U as k,M as l,zT as m,GT as n,bx as o,Ne as p,yn as q,gt as r,UO as s,Jt as t,X as u,Sc as v,de as w,By as x,ES as y,Oe as z,_e as A,vL as B,_L as C,Nc as D,IL as E,wL as F,DL as G,TL as H,CL as I,bL as J,FS as K,Jy as L,Xy as M,Cs as N,ev as O,tv as P,LS as Q,RL as R,_n as S,US as T,PL as U,xL as V,OL as W,LL as X,rv as Y,iv as Z,VL as _,Pc as $,sV as aa,WS as ba,sv as ca,KS as da,pV as ea,gV as fa,vV as ga,EV as ha,TV as ia,Xt as ja,dh as ka,i0 as la,Ss as ma,fv as na,h0 as oa,d2 as pa,S2 as qa,D0 as ra,dr as sa,$v as ta,$s as ua,Hh as va,uU as wa,hU as xa,_U as ya,YM as za,pre as Aa,iie as Ba,oie as Ca,tae as Da,nae as Ea,QM as Fa,mp as Ga,yp as Ha,ZM as Ia,uw as Ja,XM as Ka,eP as La,gw as Ma,tP as Na,nP as Oa,rP as Pa,iP as Qa,pP as Ra,oP as Sa,ice as Ta,oce as Ua,_p as Va,ace as Wa,L3 as Xa,j3 as Ya,B3 as Za,kP as _a,cce as $a,uce as ab,lce as bb,dce as cb};
