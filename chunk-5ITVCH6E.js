var SO=Object.defineProperty,AO=Object.defineProperties;var RO=Object.getOwnPropertyDescriptors;var nT=Object.getOwnPropertySymbols;var NO=Object.prototype.hasOwnProperty,MO=Object.prototype.propertyIsEnumerable;var rT=(n,e,t)=>e in n?SO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,P=(n,e)=>{for(var t in e||={})NO.call(e,t)&&rT(n,t,e[t]);if(nT)for(var t of nT(e))MO.call(e,t)&&rT(n,t,e[t]);return n},ne=(n,e)=>AO(n,RO(e));var ry;function Fd(){return ry}function hr(n){let e=ry;return ry=n,e}var iT=Symbol("NotFound");function Vs(n){return n===iT||n?.name==="\u0275NotFound"}function Bd(n,e){return Object.is(n,e)}var yt=null,Ld=!1,iy=1,xO=null,Lt=Symbol("SIGNAL");function re(n){let e=yt;return yt=n,e}function Hd(){return yt}var Ai={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function js(n){if(Ld)throw new Error("");if(yt===null)return;yt.consumerOnSignalRead(n);let e=yt.nextProducerIndex++;if(zd(yt),e<yt.producerNode.length&&yt.producerNode[e]!==n&&ou(yt)){let t=yt.producerNode[e];qd(t,yt.producerIndexOfThis[e])}yt.producerNode[e]!==n&&(yt.producerNode[e]=n,yt.producerIndexOfThis[e]=ou(yt)?sT(n,yt,e):0),yt.producerLastReadVersion[e]=n.version}function oT(){iy++}function $d(n){if(!(ou(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===iy)){if(!n.producerMustRecompute(n)&&!Us(n)){Ud(n);return}n.producerRecomputeValue(n),Ud(n)}}function oy(n){if(n.liveConsumerNode===void 0)return;let e=Ld;Ld=!0;try{for(let t of n.liveConsumerNode)t.dirty||PO(t)}finally{Ld=e}}function sy(){return yt?.consumerAllowSignalWrites!==!1}function PO(n){n.dirty=!0,oy(n),n.consumerMarkedDirty?.(n)}function Ud(n){n.dirty=!1,n.lastCleanEpoch=iy}function Ri(n){return n&&(n.nextProducerIndex=0),re(n)}function Do(n,e){if(re(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ou(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)qd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Us(n){zd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||($d(t),r!==t.version))return!0}return!1}function Bs(n){if(zd(n),ou(n))for(let e=0;e<n.producerNode.length;e++)qd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function sT(n,e,t){if(aT(n),n.liveConsumerNode.length===0&&cT(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=sT(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function qd(n,e){if(aT(n),n.liveConsumerNode.length===1&&cT(n))for(let r=0;r<n.producerNode.length;r++)qd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];zd(i),i.producerIndexOfThis[r]=e}}function ou(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function zd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function aT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function cT(n){return n.producerNode!==void 0}function Gd(n){xO?.(n)}function Wd(n,e){let t=Object.create(kO);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if($d(t),js(t),t.value===iu)throw t.error;return t.value};return r[Lt]=t,Gd(t),r}var Vd=Symbol("UNSET"),jd=Symbol("COMPUTING"),iu=Symbol("ERRORED"),kO=ne(P({},Ai),{value:Vd,dirty:!0,error:null,equal:Bd,kind:"computed",producerMustRecompute(n){return n.value===Vd||n.value===jd},producerRecomputeValue(n){if(n.value===jd)throw new Error("");let e=n.value;n.value=jd;let t=Ri(n),r,i=!1;try{r=n.computation(),re(null),i=e!==Vd&&e!==iu&&r!==iu&&n.equal(e,r)}catch(o){r=iu,n.error=o}finally{Do(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function OO(){throw new Error}var uT=OO;function lT(n){uT(n)}function ay(n){uT=n}var FO=null;function cy(n,e){let t=Object.create(Kd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>dT(t);return r[Lt]=t,Gd(t),[r,s=>Hs(t,s),s=>uy(t,s)]}function dT(n){return js(n),n.value}function Hs(n,e){sy()||lT(n),n.equal(n.value,e)||(n.value=e,LO(n))}function uy(n,e){sy()||lT(n),Hs(n,e(n.value))}var Kd=ne(P({},Ai),{equal:Bd,value:void 0,kind:"signal"});function LO(n){n.version++,oT(),oy(n),FO?.(n)}function ue(n){return typeof n=="function"}function $s(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Qd=$s(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function To(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ue(r))try{r()}catch(o){e=o instanceof Qd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{hT(o)}catch(s){e=e??[],s instanceof Qd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Qd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)hT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&To(t,e)}remove(e){let{_finalizers:t}=this;t&&To(t,e),e instanceof n&&e._removeParent(this)}};Ke.EMPTY=(()=>{let n=new Ke;return n.closed=!0,n})();var ly=Ke.EMPTY;function Yd(n){return n instanceof Ke||n&&"closed"in n&&ue(n.remove)&&ue(n.add)&&ue(n.unsubscribe)}function hT(n){ue(n)?n():n.unsubscribe()}var zn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qs={setTimeout(n,e,...t){let{delegate:r}=qs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=qs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Zd(n){qs.setTimeout(()=>{let{onUnhandledError:e}=zn;if(e)e(n);else throw n})}function su(){}var fT=dy("C",void 0,void 0);function pT(n){return dy("E",void 0,n)}function gT(n){return dy("N",n,void 0)}function dy(n,e,t){return{kind:n,value:e,error:t}}var Co=null;function zs(n){if(zn.useDeprecatedSynchronousErrorHandling){let e=!Co;if(e&&(Co={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Co;if(Co=null,t)throw r}}else n()}function mT(n){zn.useDeprecatedSynchronousErrorHandling&&Co&&(Co.errorThrown=!0,Co.error=n)}var So=class extends Ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Yd(e)&&e.add(this)):this.destination=UO}static create(e,t,r){return new Gs(e,t,r)}next(e){this.isStopped?fy(gT(e),this):this._next(e)}error(e){this.isStopped?fy(pT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fy(fT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},VO=Function.prototype.bind;function hy(n,e){return VO.call(n,e)}var py=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Jd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Jd(r)}else Jd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Jd(t)}}},Gs=class extends So{constructor(e,t,r){super();let i;if(ue(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&zn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hy(e.next,o),error:e.error&&hy(e.error,o),complete:e.complete&&hy(e.complete,o)}):i=e}this.destination=new py(i)}};function Jd(n){zn.useDeprecatedSynchronousErrorHandling?mT(n):Zd(n)}function jO(n){throw n}function fy(n,e){let{onStoppedNotification:t}=zn;t&&qs.setTimeout(()=>t(n,e))}var UO={closed:!0,next:su,error:jO,complete:su};var Ws=typeof Symbol=="function"&&Symbol.observable||"@@observable";function mn(n){return n}function gy(...n){return my(n)}function my(n){return n.length===0?mn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var de=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=HO(t)?t:new Gs(t,r,i);return zs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=yT(r),new r((i,o)=>{let s=new Gs({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ws](){return this}pipe(...t){return my(t)(this)}toPromise(t){return t=yT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function yT(n){var e;return(e=n??zn.Promise)!==null&&e!==void 0?e:Promise}function BO(n){return n&&ue(n.next)&&ue(n.error)&&ue(n.complete)}function HO(n){return n&&n instanceof So||BO(n)&&Yd(n)}function yy(n){return ue(n?.lift)}function we(n){return e=>{if(yy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,r,i){return new vy(n,e,t,r,i)}var vy=class extends So{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ks(){return we((n,e)=>{let t=null;n._refCount++;let r=ye(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Qs=class extends de{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,yy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ke;let t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ke.EMPTY)}return e}refCount(){return Ks()(this)}};var vT=$s(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var tt=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Xd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new vT}next(t){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ly:(this.currentObservers=null,o.push(t),new Ke(()=>{this.currentObservers=null,To(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new de;return t.source=this,t}}return n.create=(e,t)=>new Xd(e,t),n})(),Xd=class extends tt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ly}};var Mt=class extends tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var _y={now(){return(_y.delegate||Date).now()},delegate:void 0};var eh=class extends Ke{constructor(e,t){super()}schedule(e,t=0){return this}};var au={setInterval(n,e,...t){let{delegate:r}=au;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=au;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ys=class extends eh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return au.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&au.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,To(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Zs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Zs.now=_y.now;var Js=class extends Zs{constructor(e,t=Zs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var cu=new Js(Ys);var th=class extends Ys{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var nh=class extends Js{};var Ey=new nh(th);var on=new de(n=>n.complete());function _T(n){return n&&ue(n.schedule)}function ET(n){return n[n.length-1]}function rh(n){return ue(ET(n))?n.pop():void 0}function Ni(n){return _T(ET(n))?n.pop():void 0}function ih(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function wT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function IT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ao(n){return this instanceof Ao?(this.v=n,this):new Ao(n)}function bT(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(I){return Promise.resolve(I).then(y,p)}}function a(y,I){r[y]&&(i[y]=function(A){return new Promise(function(N,k){o.push([y,A,N,k])>1||u(y,A)})},I&&(i[y]=I(i[y])))}function u(y,I){try{l(r[y](I))}catch(A){g(o[0][3],A)}}function l(y){y.value instanceof Ao?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,I){y(I),o.shift(),o.length&&u(o[0][0],o[0][1])}}function DT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof IT=="function"?IT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var oh=n=>n&&typeof n.length=="number"&&typeof n!="function";function sh(n){return ue(n?.then)}function ah(n){return ue(n[Ws])}function ch(n){return Symbol.asyncIterator&&ue(n?.[Symbol.asyncIterator])}function uh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function $O(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var lh=$O();function dh(n){return ue(n?.[lh])}function hh(n){return bT(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ao(t.read());if(i)return yield Ao(void 0);yield yield Ao(r)}}finally{t.releaseLock()}})}function fh(n){return ue(n?.getReader)}function at(n){if(n instanceof de)return n;if(n!=null){if(ah(n))return qO(n);if(oh(n))return zO(n);if(sh(n))return GO(n);if(ch(n))return TT(n);if(dh(n))return WO(n);if(fh(n))return KO(n)}throw uh(n)}function qO(n){return new de(e=>{let t=n[Ws]();if(ue(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function zO(n){return new de(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function GO(n){return new de(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Zd)})}function WO(n){return new de(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function TT(n){return new de(e=>{QO(n,e).catch(t=>e.error(t))})}function KO(n){return TT(hh(n))}function QO(n,e){var t,r,i,o;return wT(this,void 0,void 0,function*(){try{for(t=DT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function sn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Mi(n,e=0){return we((t,r)=>{t.subscribe(ye(r,i=>sn(r,n,()=>r.next(i),e),()=>sn(r,n,()=>r.complete(),e),i=>sn(r,n,()=>r.error(i),e)))})}function xi(n,e=0){return we((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function CT(n,e){return at(n).pipe(xi(e),Mi(e))}function ST(n,e){return at(n).pipe(xi(e),Mi(e))}function AT(n,e){return new de(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function RT(n,e){return new de(t=>{let r;return sn(t,e,()=>{r=n[lh](),sn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ue(r?.return)&&r.return()})}function ph(n,e){if(!n)throw new Error("Iterable cannot be null");return new de(t=>{sn(t,e,()=>{let r=n[Symbol.asyncIterator]();sn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function NT(n,e){return ph(hh(n),e)}function MT(n,e){if(n!=null){if(ah(n))return CT(n,e);if(oh(n))return AT(n,e);if(sh(n))return ST(n,e);if(ch(n))return ph(n,e);if(dh(n))return RT(n,e);if(fh(n))return NT(n,e)}throw uh(n)}function Be(n,e){return e?MT(n,e):at(n)}function Y(...n){let e=Ni(n);return Be(n,e)}function Xs(n,e){let t=ue(n)?n:()=>n,r=i=>i.error(t());return new de(e?i=>e.schedule(r,0,i):r)}function Iy(n){return!!n&&(n instanceof de||ue(n.lift)&&ue(n.subscribe))}var zr=$s(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function pe(n,e){return we((t,r)=>{let i=0;t.subscribe(ye(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:YO}=Array;function ZO(n,e){return YO(e)?n(...e):n(e)}function gh(n){return pe(e=>ZO(n,e))}var{isArray:JO}=Array,{getPrototypeOf:XO,prototype:eF,keys:tF}=Object;function mh(n){if(n.length===1){let e=n[0];if(JO(e))return{args:e,keys:null};if(nF(e)){let t=tF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function nF(n){return n&&typeof n=="object"&&XO(n)===eF}function yh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function vh(...n){let e=Ni(n),t=rh(n),{args:r,keys:i}=mh(n);if(r.length===0)return Be([],e);let o=new de(rF(r,e,i?s=>yh(i,s):mn));return t?o.pipe(gh(t)):o}function rF(n,e,t=mn){return r=>{xT(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)xT(e,()=>{let l=Be(n[u],e),h=!1;l.subscribe(ye(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function xT(n,e,t){n?sn(t,n,e):e()}function PT(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?I(A):u.push(A),I=A=>{o&&e.next(A),l++;let N=!1;at(t(A,h++)).subscribe(ye(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let k=u.shift();s?sn(e,s,()=>I(k)):I(k)}g()}catch(k){e.error(k)}}))};return n.subscribe(ye(e,y,()=>{p=!0,g()})),()=>{a?.()}}function ct(n,e,t=1/0){return ue(e)?ct((r,i)=>pe((o,s)=>e(r,o,i,s))(at(n(r,i))),t):(typeof e=="number"&&(t=e),we((r,i)=>PT(r,i,n,t)))}function ea(n=1/0){return ct(mn,n)}function kT(){return ea(1)}function ta(...n){return kT()(Be(n,Ni(n)))}function uu(n){return new de(e=>{at(n()).subscribe(e)})}function wy(...n){let e=rh(n),{args:t,keys:r}=mh(n),i=new de(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;at(t[h]).subscribe(ye(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?yh(r,a):a),o.complete())}))}});return e?i.pipe(gh(e)):i}function an(n,e){return we((t,r)=>{let i=0;t.subscribe(ye(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Gr(n){return we((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ye(t,void 0,void 0,s=>{o=at(n(s,Gr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function OT(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ye(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Ro(n,e){return ue(e)?ct(n,e,1):ct(n,1)}function by(n,e=cu){return we((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+n,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}t.subscribe(ye(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Pi(n){return we((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Nn(n){return n<=0?()=>on:we((e,t)=>{let r=0;e.subscribe(ye(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function _h(n=iF){return we((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function iF(){return new zr}function lu(n){return we((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Wr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?an((i,o)=>n(i,o,r)):mn,Nn(1),t?Pi(e):_h(()=>new zr))}function na(n){return n<=0?()=>on:we((e,t)=>{let r=[];e.subscribe(ye(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Dy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?an((i,o)=>n(i,o,r)):mn,na(1),t?Pi(e):_h(()=>new zr))}function Ty(n,e){return we(OT(n,e,arguments.length>=2,!0))}function Cy(...n){let e=Ni(n);return we((t,r)=>{(e?ta(n,t,e):ta(n,t)).subscribe(r)})}function Wt(n,e){return we((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ye(r,u=>{i?.unsubscribe();let l=0,h=o++;at(n(u,h)).subscribe(i=ye(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Eh(n){return we((e,t)=>{at(n).subscribe(ye(t,()=>t.complete(),su)),!t.closed&&e.subscribe(t)})}function nt(n,e,t){let r=ue(n)||e||t?{next:n,error:e,complete:t}:n;return r?we((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ye(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):mn}function FT(n){let e=re(null);try{return n()}finally{re(e)}}var Th="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,t){super(ko(e,t)),this.code=e}};function oF(n){return`NG0${Math.abs(n)}`}function ko(n,e){return`${oF(n)}${e?": "+e:""}`}var mu=globalThis;function xe(n){for(let e in n)if(n[e]===xe)return e;throw Error("")}function jT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Qr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Qr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Ch(n,e){return n?e?`${n} ${e}`:n:e||""}var sF=xe({__forward_ref__:xe});function vn(n){return n.__forward_ref__=vn,n.toString=function(){return Qr(this())},n}function vt(n){return Vy(n)?n():n}function Vy(n){return typeof n=="function"&&n.hasOwnProperty(sF)&&n.__forward_ref__===vn}function UT(n,e){n==null&&jy(e,n,null,"!=")}function jy(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function F(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Gn(n){return{providers:n.providers||[],imports:n.imports||[]}}function yu(n){return aF(n,Sh)}function Uy(n){return yu(n)!==null}function aF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function cF(n){let e=n?.[Sh]??null;return e||null}function Ay(n){return n&&n.hasOwnProperty(wh)?n[wh]:null}var Sh=xe({\u0275prov:xe}),wh=xe({\u0275inj:xe}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=F({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function By(n){return n&&!!n.\u0275providers}var Hy=xe({\u0275cmp:xe}),$y=xe({\u0275dir:xe}),qy=xe({\u0275pipe:xe}),zy=xe({\u0275mod:xe}),fu=xe({\u0275fac:xe}),Oo=xe({__NG_ELEMENT_ID__:xe}),LT=xe({__NG_ENV_ID__:xe});function Fo(n){return typeof n=="string"?n:n==null?"":String(n)}function bh(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Fo(n)}var Gy=xe({ngErrorCode:xe}),BT=xe({ngErrorMessage:xe}),hu=xe({ngTokenPath:xe});function Wy(n,e){return HT("",-200,e)}function Ah(n,e){throw new j(-201,!1)}function uF(n,e){n[hu]??=[];let t=n[hu],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(UT(e.provide,"Token with multi: true should have a provide property"),r=bh(e.provide)):r=bh(e),t[0]!==r&&n[hu].unshift(r)}function lF(n,e){let t=n[hu],r=n[Gy],i=n[BT]||n.message;return n.message=hF(i,r,t,e),n}function HT(n,e,t){let r=new j(e,n);return r[Gy]=e,r[BT]=n,t&&(r[hu]=t),r}function dF(n){return n[Gy]}function hF(n,e,t=[],r=null){let i="";t&&t.length>1&&(i=` Path: ${t.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return ko(e,`${n}${o}${i}`)}var Ry;function $T(){return Ry}function Kt(n){let e=Ry;return Ry=n,e}function Ky(n,e,t){let r=yu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ah(n,"Injector")}var fF={},No=fF,Ny="__NG_DI_FLAG__",My=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Mo(t)||0;try{return this.injector.get(e,r&8?null:No,r)}catch(i){if(Vs(i))return i;throw i}}};function pF(n,e=0){let t=Fd();if(t===void 0)throw new j(-203,!1);if(t===null)return Ky(n,void 0,e);{let r=gF(e),i=t.retrieve(n,r);if(Vs(i)){if(r.optional)return null;throw i}return i}}function G(n,e=0){return($T()||pF)(vt(n),e)}function S(n,e){return G(n,Mo(e))}function Mo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function gF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function xy(n){let e=[];for(let t=0;t<n.length;t++){let r=vt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=mF(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(G(i,o))}else e.push(G(r))}return e}function Qy(n,e){return n[Ny]=e,n.prototype[Ny]=e,n}function mF(n){return n[Ny]}function ki(n,e){let t=n.hasOwnProperty(fu);return t?n[fu]:null}function qT(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function zT(n){return n.flat(Number.POSITIVE_INFINITY)}function Rh(n,e){n.forEach(t=>Array.isArray(t)?Rh(t,e):e(t))}function Yy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function vu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function GT(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function WT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Nh(n,e,t){let r=ia(n,e);return r>=0?n[r|1]=t:(r=~r,WT(n,r,e,t)),r}function Mh(n,e){let t=ia(n,e);if(t>=0)return n[t|1]}function ia(n,e){return yF(n,e,1)}function yF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Wn={},Qt=[],Yr=new U(""),Zy=new U("",-1),Jy=new U(""),pu=class{get(e,t=No){if(t===No){let i=HT("",-201);throw i.name="\u0275NotFound",i}return t}};function Xy(n){return n[zy]||null}function Zr(n){return n[Hy]||null}function _u(n){return n[$y]||null}function ev(n){return n[qy]||null}function _n(n){return{\u0275providers:n}}function KT(n){return _n([{provide:Yr,multi:!0,useValue:n}])}function QT(...n){return{\u0275providers:xh(!0,n),\u0275fromNgModule:!0}}function xh(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Rh(e,s=>{let a=s;Dh(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&YT(i,o),t}function YT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];tv(i,o=>{e(o,r)})}}function Dh(n,e,t,r){if(n=vt(n),!n)return!1;let i=null,o=Ay(n),s=!o&&Zr(n);if(!o&&!s){let u=n.ngModule;if(o=Ay(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Dh(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Rh(o.imports,h=>{Dh(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&YT(l,e)}if(!a){let l=ki(i)||(()=>new i);e({provide:i,useFactory:l,deps:Qt},i),e({provide:Jy,useValue:i,multi:!0},i),e({provide:Yr,useValue:()=>G(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;tv(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function tv(n,e){for(let t of n)By(t)&&(t=t.\u0275providers),Array.isArray(t)?tv(t,e):e(t)}var vF=xe({provide:String,useValue:xe});function ZT(n){return n!==null&&typeof n=="object"&&vF in n}function _F(n){return!!(n&&n.useExisting)}function EF(n){return!!(n&&n.useFactory)}function xo(n){return typeof n=="function"}function JT(n){return!!n.useClass}var Eu=new U(""),Ih={},VT={},Sy;function Iu(){return Sy===void 0&&(Sy=new pu),Sy}var rt=class{},Po=class extends rt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,ky(e,s=>this.processProvider(s)),this.records.set(Zy,ra(void 0,this)),i.has("environment")&&this.records.set(rt,ra(void 0,this));let o=this.records.get(Eu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Jy,Qt,{self:!0}))}retrieve(e,t){let r=Mo(t)||0;try{return this.get(e,No,r)}catch(i){if(Vs(i))return i;throw i}}destroy(){du(this),this._destroyed=!0;let e=re(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),re(e)}}onDestroy(e){return du(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){du(this);let t=hr(this),r=Kt(void 0),i;try{return e()}finally{hr(t),Kt(r)}}get(e,t=No,r){if(du(this),e.hasOwnProperty(LT))return e[LT](this);let i=Mo(r),o,s=hr(this),a=Kt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=TF(e)&&yu(e);h&&this.injectableDefInScope(h)?l=ra(Py(e),Ih):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Iu():this.parent;return t=i&8&&t===No?null:t,u.get(e,t)}catch(u){let l=dF(u);throw l===-200||l===-201?new j(l,null):u}finally{Kt(a),hr(s)}}resolveInjectorInitializers(){let e=re(null),t=hr(this),r=Kt(void 0),i;try{let o=this.get(Yr,Qt,{self:!0});for(let s of o)s()}finally{hr(t),Kt(r),re(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Qr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=vt(e);let t=xo(e)?e:vt(e&&e.provide),r=wF(e);if(!xo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ra(void 0,Ih,!0),i.factory=()=>xy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=re(null);try{if(t.value===VT)throw Wy(Qr(e));return t.value===Ih&&(t.value=VT,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&DF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{re(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=vt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Py(n){let e=yu(n),t=e!==null?e.factory:ki(n);if(t!==null)return t;if(n instanceof U)throw new j(204,!1);if(n instanceof Function)return IF(n);throw new j(204,!1)}function IF(n){if(n.length>0)throw new j(204,!1);let t=cF(n);return t!==null?()=>t.factory(n):()=>new n}function wF(n){if(ZT(n))return ra(void 0,n.useValue);{let e=nv(n);return ra(e,Ih)}}function nv(n,e,t){let r;if(xo(n)){let i=vt(n);return ki(i)||Py(i)}else if(ZT(n))r=()=>vt(n.useValue);else if(EF(n))r=()=>n.useFactory(...xy(n.deps||[]));else if(_F(n))r=(i,o)=>G(vt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=vt(n&&(n.useClass||n.provide));if(bF(n))r=()=>new i(...xy(n.deps));else return ki(i)||Py(i)}return r}function du(n){if(n.destroyed)throw new j(205,!1)}function ra(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function bF(n){return!!n.deps}function DF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function TF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function ky(n,e){for(let t of n)Array.isArray(t)?ky(t,e):t&&By(t)?ky(t.\u0275providers,e):e(t)}function _t(n,e){let t;n instanceof Po?(du(n),t=n):t=new My(n);let r,i=hr(t),o=Kt(void 0);try{return e()}finally{hr(i),Kt(o)}}function XT(){return $T()!==void 0||Fd()!=null}var Kn=0,$=1,ie=2,ut=3,xn=4,Yt=5,Lo=6,oa=7,it=8,En=9,fr=10,Le=11,sa=12,rv=13,Vo=14,Zt=15,Fi=16,jo=17,pr=18,wu=19,iv=20,Kr=21,Ph=22,Jr=23,In=24,Uo=25,Ve=26,eC=1,Li=6,Vi=7,bu=8,Bo=9,Et=10;function gr(n){return Array.isArray(n)&&typeof n[eC]=="object"}function Qn(n){return Array.isArray(n)&&n[eC]===!0}function ov(n){return(n.flags&4)!==0}function ji(n){return n.componentOffset>-1}function Du(n){return(n.flags&1)===1}function Yn(n){return!!n.template}function aa(n){return(n[ie]&512)!==0}function mr(n){return(n[ie]&256)===256}var tC="svg",nC="math";function Pn(n){for(;Array.isArray(n);)n=n[Kn];return n}function kh(n,e){return Pn(e[n])}function Zn(n,e){return Pn(e[n.index])}function Ho(n,e){return n.data[e]}function sv(n,e){return n[e]}function av(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function kn(n,e){let t=e[n];return gr(t)?t:t[Kn]}function rC(n){return(n[ie]&4)===4}function Oh(n){return(n[ie]&128)===128}function iC(n){return Qn(n[ut])}function wn(n,e){return e==null?null:n[e]}function cv(n){n[jo]=0}function uv(n){n[ie]&1024||(n[ie]|=1024,Oh(n)&&Ui(n))}function lv(n,e){for(;n>0;)e=e[Vo],n--;return e}function Tu(n){return!!(n[ie]&9216||n[In]?.dirty)}function Fh(n){n[fr].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),Tu(n)&&Ui(n)}function Ui(n){n[fr].changeDetectionScheduler?.notify(0);let e=Oi(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!Oh(e)));)e=Oi(e)}function Cu(n,e){if(mr(n))throw new j(911,!1);n[Kr]===null&&(n[Kr]=[]),n[Kr].push(e)}function Lh(n,e){if(n[Kr]===null)return;let t=n[Kr].indexOf(e);t!==-1&&n[Kr].splice(t,1)}function Oi(n){let e=n[ut];return Qn(e)?e[ut]:e}function dv(n){return n[oa]??=[]}function hv(n){return n.cleanup??=[]}function oC(n,e,t,r){let i=dv(e);i.push(t),n.firstCreatePass&&hv(n).push(r,i.length-1)}var ge={lFrame:yC(null),bindingsEnabled:!0,skipHydrationRootTNode:null},Su=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(Su||{}),CF=0,Oy=!1;function sC(){return ge.lFrame.elementDepthCount}function aC(){ge.lFrame.elementDepthCount++}function fv(){ge.lFrame.elementDepthCount--}function pv(){return ge.bindingsEnabled}function gv(){return ge.skipHydrationRootTNode!==null}function mv(n){return ge.skipHydrationRootTNode===n}function yv(){ge.skipHydrationRootTNode=null}function Q(){return ge.lFrame.lView}function je(){return ge.lFrame.tView}function ve(n){return ge.lFrame.contextLView=n,n[it]}function _e(n){return ge.lFrame.contextLView=null,n}function lt(){let n=vv();for(;n!==null&&n.type===64;)n=n.parent;return n}function vv(){return ge.lFrame.currentTNode}function cC(){let n=ge.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ca(n,e){let t=ge.lFrame;t.currentTNode=n,t.isParent=e}function _v(){return ge.lFrame.isParent}function Ev(){ge.lFrame.isParent=!1}function uC(){return ge.lFrame.contextLView}function Iv(n){jy("Must never be called in production mode"),CF=n}function wv(){return Oy}function ua(n){let e=Oy;return Oy=n,e}function Au(){let n=ge.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function lC(){return ge.lFrame.bindingIndex}function dC(n){return ge.lFrame.bindingIndex=n}function Bi(){return ge.lFrame.bindingIndex++}function Vh(n){let e=ge.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function hC(){return ge.lFrame.inI18n}function fC(n,e){let t=ge.lFrame;t.bindingIndex=t.bindingRootIndex=n,jh(e)}function pC(){return ge.lFrame.currentDirectiveIndex}function jh(n){ge.lFrame.currentDirectiveIndex=n}function gC(n){let e=ge.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function bv(){return ge.lFrame.currentQueryIndex}function Uh(n){ge.lFrame.currentQueryIndex=n}function SF(n){let e=n[$];return e.type===2?e.declTNode:e.type===1?n[Yt]:null}function Dv(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=SF(o),i===null||(o=o[Vo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ge.lFrame=mC();return r.currentTNode=e,r.lView=n,!0}function Bh(n){let e=mC(),t=n[$];ge.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function mC(){let n=ge.lFrame,e=n===null?null:n.child;return e===null?yC(n):e}function yC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function vC(){let n=ge.lFrame;return ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Tv=vC;function Hh(){let n=vC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _C(n){return(ge.lFrame.contextLView=lv(n,ge.lFrame.contextLView))[it]}function yr(){return ge.lFrame.selectedIndex}function Hi(n){ge.lFrame.selectedIndex=n}function Ru(){let n=ge.lFrame;return Ho(n.tView,n.selectedIndex)}function EC(){return ge.lFrame.currentNamespace}var IC=!0;function $h(){return IC}function qh(n){IC=n}function Fy(n,e=null,t=null,r){let i=Cv(n,e,t,r);return i.resolveInjectorInitializers(),i}function Cv(n,e=null,t=null,r,i=new Set){let o=[t||Qt,QT(n)];return r=r||(typeof n=="object"?void 0:Qr(n)),new Po(o,e||Iu(),r||null,i)}var ze=class n{static THROW_IF_NOT_FOUND=No;static NULL=new pu;static create(e,t){if(Array.isArray(e))return Fy({name:""},t,e,"");{let r=e.name??"";return Fy({name:r},e.parent,e.providers,r)}}static \u0275prov=F({token:n,providedIn:"any",factory:()=>G(Zy)});static __NG_ELEMENT_ID__=-1},wt=new U(""),xt=(()=>{class n{static __NG_ELEMENT_ID__=AF;static __NG_ENV_ID__=t=>t}return n})(),gu=class extends xt{_lView;constructor(e){super(),this._lView=e}get destroyed(){return mr(this._lView)}onDestroy(e){let t=this._lView;return Cu(t,e),()=>Lh(t,e)}};function AF(){return new gu(Q())}var yn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Vt=new U("",{providedIn:"root",factory:()=>{let n=S(rt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(yn),e.handleError(t))}}}),wC={provide:Yr,useValue:()=>void S(yn),multi:!0},RF=new U("",{providedIn:"root",factory:()=>{let n=S(wt).defaultView;if(!n)return;let e=S(Vt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),S(xt).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function NF(){return _n([KT(()=>void S(RF))])}function Sv(n){return typeof n=="function"&&n[Lt]!==void 0}function Ce(n,e){let[t,r,i]=cy(n,e?.equal),o=t,s=o[Lt];return o.set=r,o.update=i,o.asReadonly=Av.bind(o),o}function Av(){let n=this[Lt];if(n.readonlyFn===void 0){let e=()=>this();e[Lt]=n,n.readonlyFn=e}return n.readonlyFn}function Rv(n){return Sv(n)&&typeof n.set=="function"}var Mn=class{},Nu=new U("",{providedIn:"root",factory:()=>!1});var Nv=new U(""),zh=new U("");var la=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=MF}return n})();function MF(){return new la(Q(),lt())}var vr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Mt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new de(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),$i=(()=>{class n{internalPendingTasks=S(vr);scheduler=S(Mn);errorHandler=S(Vt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})();function $o(...n){}var Mu=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:()=>new Ly})}return n})(),Ly=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Ea(n){return{toString:n}.toString()}var Gh="__parameters__";function jF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function oS(n,e,t){return Ea(()=>{let r=jF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Gh)?u[Gh]:Object.defineProperty(u,Gh,{value:[]})[Gh];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var un=Qy(oS("Optional"),8);var sS=Qy(oS("SkipSelf"),4);function UF(n){return typeof n=="function"}var tf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function aS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var bn=(()=>{let n=()=>cS;return n.ngInherit=!0,n})();function cS(n){return n.type.prototype.ngOnChanges&&(n.setInput=HF),BF}function BF(){let n=lS(this),e=n?.current;if(e){let t=n.previous;if(t===Wn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function HF(n,e,t,r,i){let o=this.declaredInputs[r],s=lS(n)||$F(n,{previous:Wn,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new tf(l&&l.currentValue,t,u===Wn),aS(n,e,i,t)}var uS="__ngSimpleChanges__";function lS(n){return n[uS]||null}function $F(n,e){return n[uS]=e}var bC=[];var Re=function(n,e=null,t){for(let r=0;r<bC.length;r++){let i=bC[r];i(n,e,t)}};function qF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=cS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function dS(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Qh(n,e,t){hS(n,e,3,t)}function Yh(n,e,t,r){(n[ie]&3)===t&&hS(n,e,t,r)}function Mv(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function hS(n,e,t,r){let i=r!==void 0?n[jo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[jo]+=65536),(a<o||o==-1)&&(zF(n,t,e,u),n[jo]=(n[jo]&4294901760)+u+2),u++}function DC(n,e){Re(4,n,e);let t=re(null);try{e.call(n)}finally{re(t),Re(5,n,e)}}function zF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ie]>>14<n[jo]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,DC(a,o)):DC(a,o)}var pa=-1,zo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function GF(n){return(n.flags&8)!==0}function WF(n){return(n.flags&16)!==0}function KF(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];QF(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function fS(n){return n===3||n===4||n===6}function QF(n){return n.charCodeAt(0)===64}function ma(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?TC(n,t,i,null,e[++r]):TC(n,t,i,null,null))}}return n}function TC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function pS(n){return n!==pa}function nf(n){return n&32767}function YF(n){return n>>16}function rf(n,e){let t=YF(n),r=e;for(;t>0;)r=r[Vo],t--;return r}var qv=!0;function of(n){let e=qv;return qv=n,e}var ZF=256,gS=ZF-1,mS=5,JF=0,_r={};function XF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Oo)&&(r=t[Oo]),r==null&&(r=t[Oo]=JF++);let i=r&gS,o=1<<i;e.data[n+(i>>mS)]|=o}function sf(n,e){let t=yS(n,e);if(t!==-1)return t;let r=e[$];r.firstCreatePass&&(n.injectorIndex=e.length,xv(r.data,n),xv(e,null),xv(r.blueprint,null));let i=I_(n,e),o=n.injectorIndex;if(pS(i)){let s=nf(i),a=rf(i,e),u=a[$].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function xv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function yS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function I_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=wS(i),r===null)return pa;if(t++,i=i[Vo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return pa}function zv(n,e,t){XF(n,e,t)}function eL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(fS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function vS(n,e,t){if(t&8||n!==void 0)return n;Ah(e,"NodeInjector")}function _S(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[En],o=Kt(void 0);try{return i?i.get(e,r,t&8):Ky(e,r,t&8)}finally{Kt(o)}}return vS(r,e,t)}function ES(n,e,t,r=0,i){if(n!==null){if(e[ie]&2048&&!(r&2)){let s=iL(n,e,t,r,_r);if(s!==_r)return s}let o=IS(n,e,t,r,_r);if(o!==_r)return o}return _S(e,t,r,i)}function IS(n,e,t,r,i){let o=nL(t);if(typeof o=="function"){if(!Dv(e,n,r))return r&1?vS(i,t,r):_S(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ah(t);else return s}finally{Tv()}}else if(typeof o=="number"){let s=null,a=yS(n,e),u=pa,l=r&1?e[Zt][Yt]:null;for((a===-1||r&4)&&(u=a===-1?I_(n,e):e[a+8],u===pa||!SC(r,!1)?a=-1:(s=e[$],a=nf(u),e=rf(u,e)));a!==-1;){let h=e[$];if(CC(o,a,h.data)){let p=tL(a,e,t,s,r,l);if(p!==_r)return p}u=e[a+8],u!==pa&&SC(r,e[$].data[a+8]===l)&&CC(o,a,e)?(s=h,a=nf(u),e=rf(u,e)):a=-1}}return i}function tL(n,e,t,r,i,o){let s=e[$],a=s.data[n+8],u=r==null?ji(a)&&qv:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Zh(a,s,t,u,l);return h!==null?ku(e,s,h,a,i):_r}function Zh(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let I=s[y];if(y<u&&t===I||y>=u&&I.type===t)return y}if(i){let y=s[u];if(y&&Yn(y)&&y.type===t)return u}return null}function ku(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof zo){let a=o;if(a.resolving){let y=bh(s[t]);throw Wy(y)}let u=of(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?Kt(a.injectImpl):null,g=Dv(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&qF(t,s[t],e)}finally{p!==null&&Kt(p),of(u),a.resolving=!1,Tv()}}return o}function nL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Oo)?n[Oo]:void 0;return typeof e=="number"?e>=0?e&gS:rL:e}function CC(n,e,t){let r=1<<n;return!!(t[e+(n>>mS)]&r)}function SC(n,e){return!(n&2)&&!(n&1&&e)}var qo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ES(this._tNode,this._lView,e,Mo(r),t)}};function rL(){return new qo(lt(),Q())}function ei(n){return Ea(()=>{let e=n.prototype.constructor,t=e[fu]||Gv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[fu]||Gv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Gv(n){return Vy(n)?()=>{let e=Gv(vt(n));return e&&e()}:ki(n)}function iL(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!aa(s);){let a=IS(o,s,t,r|2,_r);if(a!==_r)return a;let u=o.parent;if(!u){let l=s[iv];if(l){let h=l.get(t,_r,r);if(h!==_r)return h}u=wS(s),s=s[Vo]}o=u}return i}function wS(n){let e=n[$],t=e.type;return t===2?e.declTNode:t===1?n[Yt]:null}function Uu(n){return eL(lt(),n)}function oL(){return Ia(lt(),Q())}function Ia(n,e){return new jt(Zn(n,e))}var jt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=oL}return n})();function sL(n){return n instanceof jt?n.nativeElement:n}function aL(){return this._results[Symbol.iterator]()}var af=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new tt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=zT(e);(this._changesDetected=!qT(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=aL};function bS(n){return(n.flags&128)===128}var w_=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(w_||{}),DS=new Map,cL=0;function uL(){return cL++}function lL(n){DS.set(n[wu],n)}function Wv(n){DS.delete(n[wu])}var AC="__ngContext__";function ya(n,e){gr(e)?(n[AC]=e[wu],lL(e)):n[AC]=e}function TS(n){return SS(n[sa])}function CS(n){return SS(n[xn])}function SS(n){for(;n!==null&&!Qn(n);)n=n[xn];return n}var Kv;function b_(n){Kv=n}function AS(){if(Kv!==void 0)return Kv;if(typeof document<"u")return document;throw new j(210,!1)}var bf=new U("",{providedIn:"root",factory:()=>dL}),dL="ng",Df=new U(""),Gi=new U("",{providedIn:"platform",factory:()=>"unknown"});var Tf=new U("",{providedIn:"root",factory:()=>AS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var hL="h",fL="b";var RS="r";var D_="di",T_="s";var NS=!1,MS=new U("",{providedIn:"root",factory:()=>NS});var xS=new U("");var ha=new WeakMap;var da=null,Pv=0,Qv=class{callbacks=new Set;listener=()=>{for(let e of this.callbacks)e()}};function pL(){return new IntersectionObserver(n=>{for(let e of n)e.isIntersecting&&ha.has(e.target)&&ha.get(e.target).listener()})}function gL(n,e,t){let r=ha.get(n);return da=da||t(),r||(r=new Qv,da.observe(n),ha.set(n,r),Pv++),r.callbacks.add(e),()=>{ha.has(n)&&(r.callbacks.delete(e),r.callbacks.size===0&&(da?.unobserve(n),ha.delete(n),Pv--),Pv===0&&(da?.disconnect(),da=null))}}var mL=(n,e,t,r)=>{};function yL(n,e,t,r){mL(n,e,t,r)}var PS=new U("");function Cf(n){return(n.flags&32)===32}var vL=()=>null;function kS(n,e,t=!1){return vL(n,e,t)}function OS(n){return n.get(xS,!1,{optional:!0})}function FS(n,e){let t=n.contentQueries;if(t!==null){let r=re(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Uh(o),a.contentQueries(2,e[s],s)}}}finally{re(r)}}}function Yv(n,e,t){Uh(0);let r=re(null);try{e(n,t)}finally{re(r)}}function LS(n,e,t){if(ov(e)){let r=re(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{re(r)}}}var Xr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Xr||{});var Wh;function _L(){if(Wh===void 0&&(Wh=null,mu.trustedTypes))try{Wh=mu.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Wh}function RC(n){return _L()?.createScriptURL(n)||n}var cf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Th})`}};function Bu(n){return n instanceof cf?n.changingThisBreaksApplicationSecurity:n}function C_(n,e){let t=VS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Th})`)}return t===e}function VS(n){return n instanceof cf&&n.getTypeName()||null}var EL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function jS(n){return n=String(n),n.match(EL)?n:"unsafe:"+n}var Sf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Sf||{});function US(n){let e=HS();return e?e.sanitize(Sf.URL,n)||"":C_(n,"URL")?Bu(n):jS(Fo(n))}function BS(n){let e=HS();if(e)return RC(e.sanitize(Sf.RESOURCE_URL,n)||"");if(C_(n,"ResourceURL"))return RC(Bu(n));throw new j(904,!1)}function IL(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?BS:US}function S_(n,e,t){return IL(e,t)(n)}function HS(){let n=Q();return n&&n[fr].sanitizer}function $S(n){return n instanceof Function?n():n}function wL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var qS="ng-template";function bL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&wL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(A_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function A_(n){return n.type===4&&n.value!==qS}function DL(n,e,t){let r=n.type===4&&!t?qS:n.value;return e===r}function TL(n,e,t){let r=4,i=n.attrs,o=i!==null?AL(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Jn(r)&&!Jn(u))return!1;if(s&&Jn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!DL(n,u,t)||u===""&&e.length===1){if(Jn(r))return!1;s=!0}}else if(r&8){if(i===null||!bL(n,i,u,t)){if(Jn(r))return!1;s=!0}}else{let l=e[++a],h=CL(u,i,A_(n),t);if(h===-1){if(Jn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Jn(r))return!1;s=!0}}}}return Jn(r)||s}function Jn(n){return(n&1)===0}function CL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return RL(e,n)}function zS(n,e,t=!1){for(let r=0;r<e.length;r++)if(TL(n,e[r],t))return!0;return!1}function SL(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function AL(n){for(let e=0;e<n.length;e++){let t=n[e];if(fS(t))return e}return n.length}function RL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function NL(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function NC(n,e){return n?":not("+e.trim()+")":e}function ML(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Jn(s)&&(e+=NC(o,i),i=""),r=s,o=o||!Jn(r);t++}return i!==""&&(e+=NC(o,i)),e}function xL(n){return n.map(ML).join(",")}function PL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Jn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Jt={};function kL(n,e){return n.createText(e)}function OL(n,e,t){n.setValue(e,t)}function GS(n,e,t){return n.createElement(e,t)}function uf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function WS(n,e,t){n.appendChild(e,t)}function MC(n,e,t,r,i){r!==null?uf(n,e,t,r,i):WS(n,e,t)}function KS(n,e,t){n.removeChild(null,e,t)}function FL(n,e,t){n.setAttribute(e,"style",t)}function LL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function QS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&KF(n,e,r),i!==null&&LL(n,e,i),o!==null&&FL(n,e,o)}function R_(n,e,t,r,i,o,s,a,u,l,h){let p=Ve+r,g=p+i,y=VL(p,g),I=typeof l=="function"?l():l;return y[$]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:I,incompleteFirstPass:!1,ssrId:h}}function VL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Jt);return t}function jL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=R_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function N_(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Kn]=i,p[ie]=r|4|128|8|64|1024,(l!==null||n&&n[ie]&2048)&&(p[ie]|=2048),cv(p),p[ut]=p[Vo]=n,p[it]=t,p[fr]=s||n&&n[fr],p[Le]=a||n&&n[Le],p[En]=u||n&&n[En]||null,p[Yt]=o,p[wu]=uL(),p[Lo]=h,p[iv]=l,p[Zt]=e.type==2?n[Zt]:p,p}function UL(n,e,t){let r=Zn(e,n),i=jL(t),o=n[fr].rendererFactory,s=M_(n,N_(n,i,null,YS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function YS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function ZS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function M_(n,e){return n[sa]?n[rv][xn]=e:n[sa]=e,n[rv]=e,e}function W(n=1){JS(je(),Q(),yr()+n,!1)}function JS(n,e,t,r){if(!r)if((e[ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Qh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Yh(e,o,0,t)}Hi(t)}var Af=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Af||{});function Zv(n,e,t,r){let i=re(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Af.SignalBased)!==0&&(u=e[o][Lt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):aS(e,u,o,r)}finally{re(i)}}var Er=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Er||{}),BL;function x_(n,e){return BL(n,e)}function fa(n,e,t,r,i){if(r!=null){let o,s=!1;Qn(r)?o=r:gr(r)&&(s=!0,r=r[Kn]);let a=Pn(r);n===0&&t!==null?i==null?WS(e,t,a):uf(e,t,a,i||null,!0):n===1&&t!==null?uf(e,t,a,i||null,!0):n===2?KS(e,a,s):n===3&&e.destroyNode(a),o!=null&&ZL(e,n,o,t,i)}}function HL(n,e){XS(n,e),e[Kn]=null,e[Yt]=null}function $L(n,e,t,r,i,o){r[Kn]=i,r[Yt]=e,Nf(n,r,t,1,i,o)}function XS(n,e){e[fr].changeDetectionScheduler?.notify(9),Nf(n,e,e[Le],2,null,null)}function qL(n){let e=n[sa];if(!e)return kv(n[$],n);for(;e;){let t=null;if(gr(e))t=e[sa];else{let r=e[Et];r&&(t=r)}if(!t){for(;e&&!e[xn]&&e!==n;)gr(e)&&kv(e[$],e),e=e[ut];e===null&&(e=n),gr(e)&&kv(e[$],e),t=e&&e[xn]}e=t}}function P_(n,e){let t=n[Bo],r=t.indexOf(e);t.splice(r,1)}function Rf(n,e){if(mr(e))return;let t=e[Le];t.destroyNode&&Nf(n,e,t,3,null,null),qL(e)}function kv(n,e){if(mr(e))return;let t=re(null);try{e[ie]&=-129,e[ie]|=256,e[In]&&Bs(e[In]),GL(n,e),zL(n,e),e[$].type===1&&e[Le].destroy();let r=e[Fi];if(r!==null&&Qn(e[ut])){r!==e[ut]&&P_(r,e);let i=e[pr];i!==null&&i.detachView(n)}Wv(e)}finally{re(t)}}function zL(n,e){let t=n.cleanup,r=e[oa];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[oa]=null);let i=e[Kr];if(i!==null){e[Kr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Jr];if(o!==null){e[Jr]=null;for(let s of o)s.destroy()}}function GL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof zo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Re(4,a,u);try{u.call(a)}finally{Re(5,a,u)}}else{Re(4,i,o);try{o.call(i)}finally{Re(5,i,o)}}}}}function eA(n,e,t){return WL(n,e.parent,t)}function WL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Kn];if(ji(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Xr.None||i===Xr.Emulated)return null}return Zn(r,t)}function tA(n,e,t){return QL(n,e,t)}function KL(n,e,t){return n.type&40?Zn(n,t):null}var QL=KL,xC;function k_(n,e,t,r){let i=eA(n,r,e),o=e[Le],s=r.parent||e[Yt],a=tA(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)MC(o,i,t[u],a,!1);else MC(o,i,t,a,!1);xC!==void 0&&xC(o,r,e,t,i)}function xu(n,e){if(e!==null){let t=e.type;if(t&3)return Zn(e,n);if(t&4)return Jv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return xu(n,r);{let i=n[e.index];return Qn(i)?Jv(-1,i):Pn(i)}}else{if(t&128)return xu(n,e.next);if(t&32)return x_(e,n)()||Pn(n[e.index]);{let r=nA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Oi(n[Zt]);return xu(i,r)}else return xu(n,e.next)}}}return null}function nA(n,e){if(e!==null){let r=n[Zt][Yt],i=e.projection;return r.projection[i]}return null}function Jv(n,e){let t=Et+n+1;if(t<e.length){let r=e[t],i=r[$].firstChild;if(i!==null)return xu(r,i)}return e[Vi]}function O_(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&ya(Pn(a),r),t.flags|=2),!Cf(t))if(u&8)O_(n,e,t.child,r,i,o,!1),fa(e,n,i,a,o);else if(u&32){let l=x_(t,r),h;for(;h=l();)fa(e,n,i,h,o);fa(e,n,i,a,o)}else u&16?rA(n,e,r,t,i,o):fa(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Nf(n,e,t,r,i,o){O_(t,r,n.firstChild,e,i,o,!1)}function YL(n,e,t){let r=e[Le],i=eA(n,t,e),o=t.parent||e[Yt],s=tA(o,t,e);rA(r,0,e,t,i,s)}function rA(n,e,t,r,i,o){let s=t[Zt],u=s[Yt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];fa(e,n,i,h,o)}else{let l=u,h=s[ut];bS(r)&&(l.flags|=128),O_(n,e,l,h,i,o,!0)}}function ZL(n,e,t,r,i){let o=t[Vi],s=Pn(t);o!==s&&fa(e,n,r,o,i);for(let a=Et;a<t.length;a++){let u=t[a];Nf(u[$],u,n,e,r,o)}}function JL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Er.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Er.Important),n.setStyle(t,r,i,o))}}function iA(n,e,t,r,i){let o=yr(),s=r&2;try{Hi(-1),s&&e.length>Ve&&JS(n,e,Ve,!1),Re(s?2:0,i,t),t(r,i)}finally{Hi(o),Re(s?3:1,i,t)}}function F_(n,e,t){iV(n,e,t),(t.flags&64)===64&&oV(n,e,t)}function Mf(n,e,t=Zn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function XL(n,e,t,r){let o=r.get(MS,NS)||t===Xr.ShadowDom,s=n.selectRootElement(e,o);return eV(s),s}function eV(n){tV(n)}var tV=()=>null;function nV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function oA(n,e,t,r,i,o){let s=e[$];if(V_(n,s,e,t,r)){ji(n)&&rV(e,n.index);return}n.type&3&&(t=nV(t)),sA(n,e,t,r,i,o)}function sA(n,e,t,r,i,o){if(n.type&3){let s=Zn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function rV(n,e){let t=kn(e,n);t[ie]&16||(t[ie]|=64)}function iV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ji(t)&&UL(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||sf(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=ku(e,n,s,t);if(ya(u,e),o!==null&&uV(e,s-r,u,a,t,o),Yn(a)){let l=kn(t.index,e);l[it]=ku(e,n,s,t)}}}function oV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=pC();try{Hi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];jh(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&sV(u,l)}}finally{Hi(-1),jh(s)}}function sV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function aA(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];zS(e,o.selectors,!1)&&(r??=[],Yn(o)?r.unshift(o):r.push(o))}return r}function aV(n,e,t,r,i,o){let s=Zn(n,e);cV(e[Le],s,o,n.value,t,r,i)}function cV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Fo(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function uV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Zv(r,t,u,l)}}function cA(n,e,t,r,i){let o=Ve+t,s=e[$],a=i(s,e,n,r,t);e[o]=a,ca(n,!0);let u=n.type===2;return u?(QS(e[Le],a,n),(sC()===0||Du(n))&&ya(a,e),aC()):ya(a,e),$h()&&(!u||!Cf(n))&&k_(s,e,a,n),n}function uA(n){let e=n;return _v()?Ev():(e=e.parent,ca(e,!1)),e}function L_(n,e){let t=n[En];if(!t)return;t.get(Vt,null)?.(e)}function V_(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Zv(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Zv(h,l,r,i),a=!0}return a}function lV(n,e){let t=kn(e,n),r=t[$];dV(r,t);let i=t[Kn];i!==null&&t[Lo]===null&&(t[Lo]=kS(i,t[En])),Re(18),j_(r,t,t[it]),Re(19,t[it])}function dV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function j_(n,e,t){Bh(e);try{let r=n.viewQuery;r!==null&&Yv(1,r,t);let i=n.template;i!==null&&iA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[pr]?.finishViewCreation(n),n.staticContentQueries&&FS(n,e),n.staticViewQueries&&Yv(2,n.viewQuery,t);let o=n.components;o!==null&&hV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,Hh()}}function hV(n,e){for(let t=0;t<e.length;t++)lV(n,e[t])}function wa(n,e,t,r){let i=re(null);try{let o=e.tView,a=n[ie]&4096?4096:16,u=N_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Fi]=l;let h=n[pr];return h!==null&&(u[pr]=h.createEmbeddedView(o)),j_(o,u,t),u}finally{re(i)}}function Go(n,e){return!e||e.firstChild===null||bS(n)}var PC=!1,fV=new U("");function Ou(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Pn(o)),Qn(o)&&lA(o,r);let s=t.type;if(s&8)Ou(n,e,t.child,r);else if(s&32){let a=x_(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=nA(e,t);if(Array.isArray(a))r.push(...a);else{let u=Oi(e[Zt]);Ou(u[$],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function lA(n,e){for(let t=Et;t<n.length;t++){let r=n[t],i=r[$].firstChild;i!==null&&Ou(r[$],r,i,e)}n[Vi]!==n[Kn]&&e.push(n[Vi])}function dA(n){if(n[Uo]!==null){for(let e of n[Uo])e.impl.addSequence(e);n[Uo].length=0}}var hA=[];function pV(n){return n[In]??gV(n)}function gV(n){let e=hA.pop()??Object.create(yV);return e.lView=n,e}function mV(n){n.lView[In]!==n&&(n.lView=null,hA.push(n))}var yV=ne(P({},Ai),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ui(n.lView)},consumerOnSignalRead(){this.lView[In]=this}});function vV(n){let e=n[In]??Object.create(_V);return e.lView=n,e}var _V=ne(P({},Ai),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Oi(n.lView);for(;e&&!fA(e[$]);)e=Oi(e);e&&uv(e)},consumerOnSignalRead(){this.lView[In]=this}});function fA(n){return n.type!==2}function pA(n){if(n[Jr]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Jr])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ie]&8192)}}var EV=100;function U_(n,e=0){let r=n[fr].rendererFactory,i=!1;i||r.begin?.();try{IV(n,e)}finally{i||r.end?.()}}function IV(n,e){let t=wv();try{ua(!0),Xv(n,e);let r=0;for(;Tu(n);){if(r===EV)throw new j(103,!1);r++,Xv(n,1)}}finally{ua(t)}}function gA(n,e){Iv(e?Su.Exhaustive:Su.OnlyDirtyViews);try{U_(n)}finally{Iv(Su.Off)}}function wV(n,e,t,r){if(mr(e))return;let i=e[ie],o=!1,s=!1;Bh(e);let a=!0,u=null,l=null;o||(fA(n)?(l=pV(e),u=Ri(l)):Hd()===null?(a=!1,l=vV(e),u=Ri(l)):e[In]&&(Bs(e[In]),e[In]=null));try{cv(e),dC(n.bindingStartIndex),t!==null&&iA(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Qh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Yh(e,y,0,null),Mv(e,0)}if(s||bV(e),pA(e),mA(e,0),n.contentQueries!==null&&FS(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Qh(e,y)}else{let y=n.contentHooks;y!==null&&Yh(e,y,1),Mv(e,1)}TV(n,e);let p=n.components;p!==null&&vA(e,p,0);let g=n.viewQuery;if(g!==null&&Yv(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Qh(e,y)}else{let y=n.viewHooks;y!==null&&Yh(e,y,2),Mv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ph]){for(let y of e[Ph])y();e[Ph]=null}o||(dA(e),e[ie]&=-73)}catch(h){throw o||Ui(e),h}finally{l!==null&&(Do(l,u),a&&mV(l)),Hh()}}function mA(n,e){for(let t=TS(n);t!==null;t=CS(t))for(let r=Et;r<t.length;r++){let i=t[r];yA(i,e)}}function bV(n){for(let e=TS(n);e!==null;e=CS(e)){if(!(e[ie]&2))continue;let t=e[Bo];for(let r=0;r<t.length;r++){let i=t[r];uv(i)}}}function DV(n,e,t){Re(18);let r=kn(e,n);yA(r,t),Re(19,r[it])}function yA(n,e){Oh(n)&&Xv(n,e)}function Xv(n,e){let r=n[$],i=n[ie],o=n[In],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Us(o)),s||=!1,o&&(o.dirty=!1),n[ie]&=-9217,s)wV(r,n,r.template,n[it]);else if(i&8192){let a=re(null);try{pA(n),mA(n,1);let u=r.components;u!==null&&vA(n,u,1),dA(n)}finally{re(a)}}}function vA(n,e,t){for(let r=0;r<e.length;r++)DV(n,e[r],t)}function TV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Hi(~i);else{let o=i,s=t[++r],a=t[++r];fC(s,o);let u=e[o];Re(24,u),a(2,u),Re(25,u)}}}finally{Hi(-1)}}function xf(n,e){let t=wv()?64:1088;for(n[fr].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let r=Oi(n);if(aa(n)&&!r)return n;n=r}return null}function _A(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function EA(n,e){let t=Et+e;if(t<n.length)return n[t]}function ba(n,e,t,r=!0){let i=e[$];if(CV(i,e,n,t),r){let s=Jv(t,n),a=e[Le],u=a.parentNode(n[Vi]);u!==null&&$L(i,n[Yt],a,e,u,s)}let o=e[Lo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function B_(n,e){let t=Fu(n,e);return t!==void 0&&Rf(t[$],t),t}function Fu(n,e){if(n.length<=Et)return;let t=Et+e,r=n[t];if(r){let i=r[Fi];i!==null&&i!==n&&P_(i,r),e>0&&(n[t-1][xn]=r[xn]);let o=vu(n,Et+e);HL(r[$],r);let s=o[pr];s!==null&&s.detachView(o[$]),r[ut]=null,r[xn]=null,r[ie]&=-129}return r}function CV(n,e,t,r){let i=Et+r,o=t.length;r>0&&(t[i-1][xn]=e),r<o-Et?(e[xn]=t[i],Yy(t,Et+r,e)):(t.push(e),e[xn]=null),e[ut]=t;let s=e[Fi];s!==null&&t!==s&&IA(s,e);let a=e[pr];a!==null&&a.insertView(n),Fh(e),e[ie]|=128}function IA(n,e){let t=n[Bo],r=e[ut];if(gr(r))n[ie]|=2;else{let i=r[ut][Zt];e[Zt]!==i&&(n[ie]|=2)}t===null?n[Bo]=[e]:t.push(e)}var zi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[$];return Ou(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[it]}set context(e){this._lView[it]=e}get destroyed(){return mr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ut];if(Qn(e)){let t=e[bu],r=t?t.indexOf(this):-1;r>-1&&(Fu(e,r),vu(t,r))}this._attachedToViewContainer=!1}Rf(this._lView[$],this._lView)}onDestroy(e){Cu(this._lView,e)}markForCheck(){xf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){Fh(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,U_(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[En].get(fV,PC)}catch{this.exhaustive=PC}}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=aa(this._lView),t=this._lView[Fi];t!==null&&!e&&P_(t,this._lView),XS(this._lView[$],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=aa(this._lView),r=this._lView[Fi];r!==null&&!t&&IA(r,this._lView),Fh(this._lView)}};var Wo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=SV;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=wa(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new zi(o)}}return n})();function SV(){return H_(lt(),Q())}function H_(n,e){return n.type&4?new Wo(e,n,Ia(n,e)):null}function Da(n,e,t,r,i){let o=n.data[e];if(o===null)o=AV(n,e,t,r,i),hC()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=cC();o.injectorIndex=s===null?-1:s.injectorIndex}return ca(o,!0),o}function AV(n,e,t,r,i){let o=vv(),s=_v(),a=s?o:o&&o.parent,u=n.data[e]=NV(n,a,t,e,r,i);return RV(n,u,o,s),u}function RV(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function NV(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return gv()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var jZ=new RegExp(`^(\\d+)*(${fL}|${hL})*(.*)`);function MV(n){let e=n[Li]??[],r=n[ut][Le],i=[];for(let o of e)o.data[D_]!==void 0?i.push(o):xV(o,r);n[Li]=i}function xV(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[RS];for(;t<i;){let o=r.nextSibling;KS(e,r,!1),r=o,t++}}}var PV=()=>null,kV=()=>null;function lf(n,e){return PV(n,e)}function wA(n,e,t){return kV(n,e,t)}var bA=class{},Pf=class{},e_=class{resolveComponentFactory(e){throw new j(917,!1)}},Hu=class{static NULL=new e_},Ko=class{},ln=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>OV()}return n})();function OV(){let n=Q(),e=lt(),t=kn(e.index,n);return(gr(t)?t:n)[Le]}var DA=(()=>{class n{static \u0275prov=F({token:n,providedIn:"root",factory:()=>null})}return n})();var Jh={},ga=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Jh,r);return i!==Jh||t===Jh?i:this.parentInjector.get(e,t,r)}};function df(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ch(i,a);else if(o==2){let u=a,l=e[++s];r=Ch(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function q(n,e=0){let t=Q();if(t===null)return G(n,e);let r=lt();return ES(r,t,vt(n),e)}function TA(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}VV(n,e,t,a,o,u,l)}o!==null&&r!==null&&FV(t,r,o)}function FV(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function LV(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function VV(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&Yn(y)&&(u=!0,LV(n,t,g)),zv(sf(t,e),n,y.type)}qV(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=ZS(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=ma(t.mergedAttrs,y.hostAttrs),UV(n,t,e,p,y),$V(p,y,i),s!==null&&s.has(y)){let[A,N]=s.get(y);t.directiveToIndex.set(y.type,[p,A+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let I=y.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}jV(n,t,o)}function jV(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))kC(0,e,i,r),kC(1,e,i,r),FC(e,r,!1);else{let o=t.get(i);OC(0,e,o,r),OC(1,e,o,r),FC(e,r,!0)}}}function kC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),CA(e,o)}}function OC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),CA(e,s)}}function CA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function FC(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||A_(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function UV(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ki(i.type,!0)),s=new zo(o,Yn(i),q,null);n.blueprint[r]=s,t[r]=s,BV(n,e,r,ZS(n,t,i.hostVars,Jt),i)}function BV(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;HV(s)!=a&&s.push(a),s.push(t,r,o)}}function HV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function $V(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Yn(e)&&(t[""]=n)}}function qV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function SA(n,e,t,r,i,o,s,a){let u=e[$],l=u.consts,h=wn(l,s),p=Da(u,n,t,r,h);return o&&TA(u,e,p,wn(l,a),i),p.mergedAttrs=ma(p.mergedAttrs,p.attrs),p.attrs!==null&&df(p,p.attrs,!1),p.mergedAttrs!==null&&df(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function AA(n,e){dS(n,e),ov(e)&&n.queries.elementEnd(e)}function zV(n,e,t,r,i,o){let s=e.consts,a=wn(s,i),u=Da(e,n,t,r,a);if(u.mergedAttrs=ma(u.mergedAttrs,u.attrs),o!=null){let l=wn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&df(u,u.attrs,!1),u.mergedAttrs!==null&&df(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function $_(n){return NA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function RA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function NA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function q_(n,e,t){return n[e]=t}function GV(n,e){return n[e]}function On(n,e,t){if(t===Jt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function MA(n,e,t,r){let i=On(n,e,t);return On(n,e+1,r)||i}function Xh(n,e,t){return function r(i){let o=ji(n)?kn(n.index,e):e;xf(o,5);let s=e[it],a=LC(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=LC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function LC(n,e,t,r){let i=re(null);try{return Re(6,e,t),t(r)!==!1}catch(o){return L_(n,o),!1}finally{Re(7,e,t),re(i)}}function xA(n,e,t,r,i,o,s,a){let u=Du(n),l=!1,h=null;if(!r&&u&&(h=WV(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Zn(n,t),g=r?r(p):p;yL(t,g,o,a);let y=i.listen(g,o,a),I=r?A=>r(Pn(A[n.index])):n.index;PA(I,e,t,o,a,y,!1)}return l}function WV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[oa],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function PA(n,e,t,r,i,o,s){let a=e.firstCreatePass?hv(e):null,u=dv(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function VC(n,e,t,r,i,o){let s=e[t],a=e[$],l=a.data[t].outputs[r],p=s[l].subscribe(o);PA(n.index,a,e,i,o,p,!0)}var t_=Symbol("BINDING");var hf=class extends Hu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Zr(e);return new va(t,this.ngModule)}};function KV(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Af.SignalBased)!==0};return i&&(o.transform=i),o})}function QV(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function YV(n,e,t){let r=e instanceof rt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new ga(t,r):t}function ZV(n){let e=n.get(Ko,null);if(e===null)throw new j(407,!1);let t=n.get(DA,null),r=n.get(Mn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function JV(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return GS(e,t,t==="svg"?tC:t==="math"?nC:null)}var va=class extends Pf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=KV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=QV(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=xL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Re(22);let a=re(null);try{let u=this.componentDef,l=XV(r,u,s,o),h=YV(u,i||this.ngModule,e),p=ZV(h),g=p.rendererFactory.createRenderer(null,u),y=r?XL(g,r,u.encapsulation,h):JV(u,g),I=s?.some(jC)||o?.some(k=>typeof k!="function"&&k.bindings.some(jC)),A=N_(null,l,null,512|YS(u),null,null,p,g,h,null,kS(y,h,!0));A[Ve]=y,Bh(A);let N=null;try{let k=SA(Ve,A,2,"#host",()=>l.directiveRegistry,!0,0);y&&(QS(g,y,k),ya(y,A)),F_(l,A,k),LS(l,k,A),AA(l,k),t!==void 0&&t2(k,this.ngContentSelectors,t),N=kn(k.index,A),A[it]=N[it],j_(l,A,null)}catch(k){throw N!==null&&Wv(N),Wv(A),k}finally{Re(23),Hh()}return new ff(this.componentType,A,!!I)}finally{re(a)}}};function XV(n,e,t,r){let i=n?["ng-version","20.1.2"]:PL(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[t_].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[t_].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=_u(p);u.push(g)}return R_(0,null,e2(o,s),1,a,u,null,null,null,[i],null)}function e2(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function jC(n){let e=n[t_].kind;return e==="input"||e==="twoWay"}var ff=class extends bA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Ho(t[$],Ve),this.location=Ia(this._tNode,t),this.instance=kn(this._tNode.index,t)[it],this.hostView=this.changeDetectorRef=new zi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=V_(r,i[$],i,e,t);this.previousInputValues.set(e,t);let s=kn(r.index,i);xf(s,1)}get injector(){return new qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function t2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Wi=(()=>{class n{static __NG_ELEMENT_ID__=n2}return n})();function n2(){let n=lt();return OA(n,Q())}var r2=Wi,kA=class extends r2{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ia(this._hostTNode,this._hostLView)}get injector(){return new qo(this._hostTNode,this._hostLView)}get parentInjector(){let e=I_(this._hostTNode,this._hostLView);if(pS(e)){let t=rf(e,this._hostLView),r=nf(e),i=t[$].data[r+8];return new qo(i,t)}else return new qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=UC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Et}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=lf(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Go(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!UF(e),l;if(u)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let h=u?e:new va(Zr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let k=(u?p:this.parentInjector).get(rt,null);k&&(o=k)}let g=Zr(h.componentType??{}),y=lf(this._lContainer,g?.id??null),I=y?.firstChild??null,A=h.create(p,i,I,o,s,a);return this.insertImpl(A.hostView,l,Go(this._hostTNode,y)),A}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(iC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ut],l=new kA(u,u[Yt],u[ut]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return ba(s,i,o,r),e.attachToViewContainerRef(),Yy(Ov(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=UC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Fu(this._lContainer,t);r&&(vu(Ov(this._lContainer),t),Rf(r[$],r))}detach(e){let t=this._adjustIndex(e,-1),r=Fu(this._lContainer,t);return r&&vu(Ov(this._lContainer),t)!=null?new zi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function UC(n){return n[bu]}function Ov(n){return n[bu]||(n[bu]=[])}function OA(n,e){let t,r=e[n.index];return Qn(r)?t=r:(t=_A(r,e,null,n),e[n.index]=t,M_(e,t)),o2(t,e,n,r),new kA(t,n,e)}function i2(n,e){let t=n[Le],r=t.createComment(""),i=Zn(e,n),o=t.parentNode(i);return uf(t,o,r,t.nextSibling(i),!1),r}var o2=a2,s2=()=>!1;function FA(n,e,t){return s2(n,e,t)}function a2(n,e,t,r){if(n[Vi])return;let i;t.type&8?i=Pn(r):i=i2(e,t),n[Vi]=i}var n_=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},r_=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)z_(e,t).matches!==null&&this.queries[t].setDirty()}},pf=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=g2(e):this.predicate=e}},i_=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},o_=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,c2(t,o)),this.matchTNodeWithReadOption(e,t,Zh(t,e,o,!1,!1))}else r===Wo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Zh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===jt||i===Wi||i===Wo&&t.type&4)this.addMatch(t.index,-2);else{let o=Zh(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function c2(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function u2(n,e){return n.type&11?Ia(n,e):n.type&4?H_(n,e):null}function l2(n,e,t,r){return t===-1?u2(e,n):t===-2?d2(n,e,r):ku(n,n[$],t,e)}function d2(n,e,t){if(t===jt)return Ia(e,n);if(t===Wo)return H_(e,n);if(t===Wi)return OA(e,n)}function LA(n,e,t,r){let i=e[pr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(l2(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function s_(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=LA(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=Et;p<h.length;p++){let g=h[p];g[Fi]===g[ut]&&s_(g[$],g,l,r)}if(h[Bo]!==null){let p=h[Bo];for(let g=0;g<p.length;g++){let y=p[g];s_(y[$],y,l,r)}}}}}return r}function h2(n,e){return n[pr].queries[e].queryList}function VA(n,e,t){let r=new af((t&4)===4);return oC(n,e,r,r.destroy),(e[pr]??=new r_).queries.push(new n_(r))-1}function f2(n,e,t){let r=je();return r.firstCreatePass&&(jA(r,new pf(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),VA(r,Q(),e)}function p2(n,e,t,r){let i=je();if(i.firstCreatePass){let o=lt();jA(i,new pf(e,t,r),o.index),m2(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return VA(i,Q(),t)}function g2(n){return n.split(",").map(e=>e.trim())}function jA(n,e,t){n.queries===null&&(n.queries=new i_),n.queries.track(new o_(e,t))}function m2(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function z_(n,e){return n.queries.getByIndex(e)}function y2(n,e){let t=n[$],r=z_(t,e);return r.crossesNgTemplate?s_(t,n,e,[]):LA(t,n,r,e)}var BC=new Set;function er(n){BC.has(n)||(BC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Qo=class{},kf=class{};var gf=class extends Qo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new hf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Xy(e);this._bootstrapComponents=$S(o.bootstrap),this._r3Injector=Cv(e,t,[{provide:Qo,useValue:this},{provide:Hu,useValue:this.componentFactoryResolver},...r],Qr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},mf=class extends kf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new gf(this.moduleType,e,[])}};var Lu=class extends Qo{injector;componentFactoryResolver=new hf(this);instance=null;constructor(e){super();let t=new Po([...e.providers,{provide:Qo,useValue:this},{provide:Hu,useValue:this.componentFactoryResolver}],e.parent||Iu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ta(n,e,t=null){return new Lu({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var v2=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=xh(!1,t.type),i=r.length>0?Ta([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:n,providedIn:"environment",factory:()=>new n(G(rt))})}return n})();function se(n){return Ea(()=>{let e=UA(n),t=ne(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===w_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(v2).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Xr.Emulated,styles:n.styles||Qt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&er("NgStandalone"),BA(t);let r=n.dependencies;return t.directiveDefs=HC(r,_2),t.pipeDefs=HC(r,ev),t.id=w2(t),t})}function _2(n){return Zr(n)||_u(n)}function Ir(n){return Ea(()=>({type:n.type,bootstrap:n.bootstrap||Qt,declarations:n.declarations||Qt,imports:n.imports||Qt,exports:n.exports||Qt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function E2(n,e){if(n==null)return Wn;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Af.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function I2(n){if(n==null)return Wn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ae(n){return Ea(()=>{let e=UA(n);return BA(e),e})}function Ca(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function UA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Wn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Qt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:E2(n.inputs,e),outputs:I2(n.outputs),debugInfo:null}}function BA(n){n.features?.forEach(e=>e(n))}function HC(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function w2(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function b2(n){return Object.getPrototypeOf(n.prototype).constructor}function Ut(n){let e=b2(n.type),t=!0,r=[n];for(;e;){let i;if(Yn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Fv(n.inputs),s.declaredInputs=Fv(n.declaredInputs),s.outputs=Fv(n.outputs);let a=i.hostBindings;a&&A2(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&C2(n,u),l&&S2(n,l),D2(n,i),jT(n.outputs,i.outputs),Yn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Ut&&(t=!1)}}e=Object.getPrototypeOf(e)}T2(r)}function D2(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function T2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ma(i.hostAttrs,t=ma(t,i.hostAttrs))}}function Fv(n){return n===Wn?{}:n===Qt?[]:n}function C2(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function S2(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function A2(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function It(n){let e=t=>{let r=Array.isArray(n);t.hostDirectives===null?(t.resolveHostDirectives=R2,t.hostDirectives=r?n.map(a_):[n]):r?t.hostDirectives.unshift(...n.map(a_)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function R2(n){let e=[],t=!1,r=null,i=null;for(let o=0;o<n.length;o++){let s=n[o];if(s.hostDirectives!==null){let a=e.length;r??=new Map,i??=new Map,HA(s,e,r),i.set(s,[a,e.length-1])}o===0&&Yn(s)&&(t=!0,e.push(s))}for(let o=t?1:0;o<n.length;o++)e.push(n[o]);return[e,r,i]}function HA(n,e,t){if(n.hostDirectives!==null)for(let r of n.hostDirectives)if(typeof r=="function"){let i=r();for(let o of i)$C(a_(o),e,t)}else $C(r,e,t)}function $C(n,e,t){let r=_u(n.directive);N2(r.declaredInputs,n.inputs),HA(r,e,t),t.set(r,n),e.push(r)}function a_(n){return typeof n=="function"?{directive:vt(n),inputs:Wn,outputs:Wn}:{directive:vt(n.directive),inputs:qC(n.inputs),outputs:qC(n.outputs)}}function qC(n){if(n===void 0||n.length===0)return Wn;let e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function N2(n,e){for(let t in e)if(e.hasOwnProperty(t)){let r=e[t],i=n[t];n[r]=i}}function $A(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=ma(n.mergedAttrs,n.attrs);let h=n.tView=R_(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ca(n,!1);let u=x2(t,e,n,r);$h()&&k_(t,e,u,n),ya(u,e);let l=_A(u,e,u,n);e[r+Ve]=l,M_(e,l),FA(l,n,e)}function M2(n,e,t,r,i,o,s,a,u,l,h){let p=t+Ve,g;return e.firstCreatePass?(g=Da(e,p,4,s||null,a||null),pv()&&TA(e,n,g,wn(e.consts,l),aA),dS(e,g)):g=e.data[p],$A(g,n,e,t,r,i,o,u),Du(g)&&F_(e,n,g),l!=null&&Mf(n,g,h),g}function Yo(n,e,t,r,i,o,s,a,u,l,h){let p=t+Ve,g;if(e.firstCreatePass){if(g=Da(e,p,4,s||null,a||null),l!=null){let y=wn(e.consts,l);g.localNames=[];for(let I=0;I<y.length;I+=2)g.localNames.push(y[I],-1)}}else g=e.data[p];return $A(g,n,e,t,r,i,o,u),l!=null&&Mf(n,g,h),g}function qA(n,e,t,r,i,o,s,a){let u=Q(),l=je(),h=wn(l.consts,o);return M2(u,l,n,e,t,r,i,h,void 0,s,a),qA}function zA(n,e,t,r,i,o,s,a){let u=Q(),l=je(),h=wn(l.consts,o);return Yo(u,l,n,e,t,r,i,h,void 0,s,a),zA}var x2=P2;function P2(n,e,t,r){return qh(!0),e[Le].createComment("")}var cn=function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n}(cn||{}),zC=0,k2=1,ot=function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n}(ot||{}),G_=function(n){return n[n.Initial=-1]="Initial",n}(G_||{}),O2=0,$u=1;var F2=4,L2=5,V2=6,j2=7,Lv=8,U2=9,W_=function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n}(W_||{});function GA(n,e,t){let r=KA(n);e[r]===null&&(e[r]=[]),e[r].push(t)}function ef(n,e){let t=KA(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function WA(n){ef(1,n),ef(0,n),ef(2,n)}function KA(n){let e=F2;return n===1?e=L2:n===2&&(e=U2),e}var Of=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Of||{}),Jo=new U(""),QA=!1,c_=class extends tt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,XT()&&(this.destroyRef=S(xt,{optional:!0})??void 0,this.pendingTasks=S(vr,{optional:!0})??void 0)}emit(e){let t=re(null);try{super.next(e)}finally{re(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ke&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ge=c_;function YA(n){let e,t;function r(){n=$o;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function GC(n){return queueMicrotask(()=>n()),()=>{n=$o}}var K_="isAngularZone",yf=K_+"_ID",B2=0,Ae=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ge(!1);onMicrotaskEmpty=new Ge(!1);onStable=new Ge(!1);onError=new Ge(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=QA}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,q2(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(K_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,H2,$o,$o);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},H2={};function Q_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function $2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){YA(()=>{n.callbackScheduled=!1,u_(n),n.isCheckStableRunning=!0,Q_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),u_(n)}function q2(n){let e=()=>{$2(n)},t=B2++;n._inner=n._inner.fork({name:"angular",properties:{[K_]:!0,[yf]:t,[yf+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(z2(u))return r.invokeTask(o,s,a,u);try{return WC(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),KC(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return WC(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!G2(u)&&e(),KC(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,u_(n),Q_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function u_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function WC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function KC(n){n._nesting--,Q_(n)}var Vu=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ge;onMicrotaskEmpty=new Ge;onStable=new Ge;onError=new Ge;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function z2(n){return ZA(n,"__ignore_ng_zone__")}function G2(n){return ZA(n,"__scheduler_tick__")}function ZA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Y_=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),JA=[0,1,2,3],XA=(()=>{class n{ngZone=S(Ae);scheduler=S(Mn);errorHandler=S(yn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){S(Jo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Re(16),this.executing=!0;for(let r of JA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Re(17)}register(t){let{view:r}=t;r!==void 0?((r[Uo]??=[]).push(t),Ui(r),r[ie]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Of.AFTER_NEXT_RENDER,t):t()}static \u0275prov=F({token:n,providedIn:"root",factory:()=>new n})}return n})(),vf=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Uo];e&&(this.view[Uo]=e.filter(t=>t!==this))}};function eR(n,e){let t=e?.injector??S(ze);return er("NgAfterRender"),tR(n,t,e,!1)}function Ff(n,e){let t=e?.injector??S(ze);return er("NgAfterNextRender"),tR(n,t,e,!0)}function W2(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function tR(n,e,t,r){let i=e.get(Y_);i.impl??=e.get(XA);let o=e.get(Jo,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(xt):null,a=e.get(la,null,{optional:!0}),u=new vf(i.impl,W2(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}function Lf(n){return n+1}function Sa(n,e){let t=n[$],r=Lf(e.index);return n[r]}function K2(n,e,t){let r=n[$],i=Lf(e);n[i]=t}function Aa(n,e){let t=Lf(e.index);return n.data[t]}function Q2(n,e,t){let r=Lf(e);n.data[r]=t}function Y2(n,e,t){let r=e[$],i=Aa(r,t);switch(n){case ot.Complete:return i.primaryTmplIndex;case ot.Loading:return i.loadingTmplIndex;case ot.Error:return i.errorTmplIndex;case ot.Placeholder:return i.placeholderTmplIndex;default:return null}}function QC(n,e){return e===ot.Placeholder?n.placeholderBlockConfig?.[zC]??null:e===ot.Loading?n.loadingBlockConfig?.[zC]??null:null}function Z2(n){return n.loadingBlockConfig?.[k2]??null}function YC(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function J2(n,e){let t=e.primaryTmplIndex+Ve;return Ho(n,t)}function X2(n,e,t){let r=t.get(Ae);return gL(n,()=>r.run(e),()=>r.runOutsideAngular(()=>pL()))}function ej(n,e,t){return t==null?n:t>=0?lv(t,n):n[e.index][Et]??null}function tj(n,e){return kh(Ve+e,n)}function nj(n,e,t,r,i,o,s){let a=n[En],u=a.get(Ae),l;function h(){if(mr(n)){l.destroy();return}let p=Sa(n,e),g=p[$u];if(g!==G_.Initial&&g!==ot.Placeholder){l.destroy();return}let y=ej(n,e,r);if(!y||(l.destroy(),mr(y)))return;let I=tj(y,t),A=i(I,()=>{u.run(()=>{n!==y&&Lh(y,A),o()})},a);n!==y&&Cu(y,A),GA(s,p,A)}l=eR({read:h},{injector:a})}var rj=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?Ta(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=F({token:n,providedIn:"environment",factory:()=>new n})}return n})();var nR=new U("");function Vv(n,e,t){return n.get(rj).getOrCreateInjector(e,n,t,"")}function ij(n,e,t){if(n instanceof ga){let i=n.injector,o=n.parentInjector,s=Vv(o,e,t);return new ga(i,s)}let r=n.get(rt);if(r!==n){let i=Vv(r,e,t);return new ga(n,i)}return Vv(n,e,t)}function qi(n,e,t,r=!1){let i=t[ut],o=i[$];if(mr(i))return;let s=Sa(i,e),a=s[$u],u=s[j2];if(!(u!==null&&n<u)&&ZC(a,n)&&ZC(s[O2]??-1,n)){let l=Aa(o,e),p=!r&&!0&&(Z2(l)!==null||QC(l,ot.Loading)!==null||QC(l,ot.Placeholder))?cj:sj;try{p(n,s,t,e,i)}catch(g){L_(i,g)}}}function oj(n,e){let t=n[Li]?.findIndex(i=>i.data[T_]===e[$u])??-1;return{dehydratedView:t>-1?n[Li][t]:null,dehydratedViewIx:t}}function sj(n,e,t,r,i){Re(20);let o=Y2(n,i,r);if(o!==null){e[$u]=n;let s=i[$],a=o+Ve,u=Ho(s,a),l=0;B_(t,l);let h;if(n===ot.Complete){let I=Aa(s,r),A=I.providers;A&&A.length>0&&(h=ij(i[En],I,A))}let{dehydratedView:p,dehydratedViewIx:g}=oj(t,e),y=wa(i,u,null,{injector:h,dehydratedView:p});if(ba(t,y,l,Go(u,p)),xf(y,2),g>-1&&t[Li]?.splice(g,1),(n===ot.Complete||n===ot.Error)&&Array.isArray(e[Lv])){for(let I of e[Lv])I();e[Lv]=null}}Re(21)}function ZC(n,e){return n<e}function aj(n,e){let t=n[e.index];qi(ot.Placeholder,e,t)}function JC(n,e,t){n.loadingPromise.then(()=>{n.loadingState===cn.COMPLETE?qi(ot.Complete,e,t):n.loadingState===cn.FAILED&&qi(ot.Error,e,t)})}var cj=null;var Z_=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var J_=new U("");function ti(n){return!!n&&typeof n.then=="function"}function Vf(n){return!!n&&typeof n.subscribe=="function"}var rR=new U("");var X_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=S(rR,{optional:!0})??[];injector=S(ze);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=_t(this.injector,i);if(ti(o))t.push(o);else if(Vf(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jf=new U("");function iR(){ay(()=>{let n="";throw new j(600,n)})}function oR(n){return n.isBoundToModule}var uj=10;var ni=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=S(Vt);afterRenderManager=S(Y_);zonelessEnabled=S(Nu);rootEffectScheduler=S(Mu);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new tt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=S(vr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(pe(t=>!t))}constructor(){S(Jo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=S(rt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=ze.NULL){return this._injector.get(Ae).run(()=>{Re(10);let s=t instanceof Pf;if(!this._injector.get(X_).done){let I="";throw new j(405,I)}let u;s?u=t:u=this._injector.get(Hu).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=oR(u)?void 0:this._injector.get(Qo),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(J_,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Pu(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Re(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Re(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Of.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let t=re(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,re(t),this.afterTick.next(),Re(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ko,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<uj;)Re(14),this.synchronizeOnce(),Re(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Tu(i))continue;let o=r&&!this.zonelessEnabled?0:1;U_(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Tu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Pu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(jf,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Pu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Pu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function sR(n,e,t){let r=e[En],i=e[$];if(n.loadingState!==cn.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=Sa(e,t),s=J2(i,n);n.loadingState=cn.IN_PROGRESS,ef(1,o);let a=n.dependencyResolverFn,u=r.get($i).add();return a?(n.loadingPromise=Promise.allSettled(a()).then(l=>{let h=!1,p=[],g=[];for(let y of l)if(y.status==="fulfilled"){let I=y.value,A=Zr(I)||_u(I);if(A)p.push(A);else{let N=ev(I);N&&g.push(N)}}else{h=!0;break}if(h){if(n.loadingState=cn.FAILED,n.errorTmplIndex===null){let y="",I=new j(-750,!1);L_(e,I)}}else{n.loadingState=cn.COMPLETE;let y=s.tView;if(p.length>0){y.directiveRegistry=YC(y.directiveRegistry,p);let I=p.map(N=>N.type),A=xh(!1,...I);n.providers=A}g.length>0&&(y.pipeRegistry=YC(y.pipeRegistry,g))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,u()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=cn.COMPLETE,u()}),n.loadingPromise)}function lj(n,e){return e[En].get(nR,null,{optional:!0})?.behavior!==W_.Manual}function dj(n,e,t){let r=e[$],i=e[t.index];if(!lj(n,e))return;let o=Sa(e,t),s=Aa(r,t);switch(WA(o),s.loadingState){case cn.NOT_STARTED:qi(ot.Loading,t,i),sR(s,e,t),s.loadingState===cn.IN_PROGRESS&&JC(s,t,i);break;case cn.IN_PROGRESS:qi(ot.Loading,t,i),JC(s,t,i);break;case cn.COMPLETE:qi(ot.Complete,t,i);break;case cn.FAILED:qi(ot.Error,t,i);break;default:}}function hj(n,e,t){return n===0?XC(e,t):n===2?!XC(e,t):!0}function fj(n){return n!=null&&(n&1)===1}function XC(n,e){let t=n[En],r=Aa(n[$],e),i=OS(t),o=fj(r.flags),a=Sa(n,e)[V2]!==null;return!(o&&a&&i)}function pj(n,e,t,r,i,o,s,a,u,l){let h=Q(),p=je(),g=n+Ve,y=Yo(h,p,n,null,0,0),I=h[En];if(p.firstCreatePass){er("NgDefer");let et={primaryTmplIndex:e,loadingTmplIndex:r??null,placeholderTmplIndex:i??null,errorTmplIndex:o??null,placeholderBlockConfig:null,loadingBlockConfig:null,dependencyResolverFn:t??null,loadingState:cn.NOT_STARTED,loadingPromise:null,providers:null,hydrateTriggers:null,debug:null,flags:l??0};u?.(p,et,a,s),Q2(p,g,et)}let A=h[g];FA(A,y,h);let N=null,k=null;if(A[Li]?.length>0){let et=A[Li][0].data;k=et[D_]??null,N=et[T_]}let z=[null,G_.Initial,null,null,null,null,k,N,null,null];K2(h,g,z);let te=null;k!==null&&(te=I.get(PS),te.add(k,{lView:h,tNode:y,lContainer:A}));let Me=()=>{WA(z),k!==null&&te?.cleanup([k])};GA(0,z,()=>Lh(h,Me)),Cu(h,Me)}function gj(n,e){let t=Q(),r=lt();hj(0,t,r)&&(aj(t,r),nj(t,r,n,e,X2,()=>dj(0,t,r),0))}function Ra(n,e,t,r){let i=Q(),o=Bi();if(On(i,o,e)){let s=je(),a=Ru();aV(a,i,n,e,t,r)}return Ra}var l_=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function jv(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function mj(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=n.at(o),h=e[o],p=jv(o,l,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let g=n.at(s),y=e[u],I=jv(s,g,u,y,t);if(I!==0){I<0&&n.updateValue(s,y),s--,u--;continue}let A=t(o,l),N=t(s,g),k=t(o,h);if(Object.is(k,N)){let z=t(u,y);Object.is(z,A)?(n.swap(o,s),n.updateValue(s,y),u--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new _f,i??=tS(n,o,s,t),d_(n,r,o,k))n.updateValue(o,h),o++,s++;else if(i.has(k))r.set(A,n.detach(o)),s--;else{let z=n.create(o,e[o]);n.attach(o,z),o++,s++}}for(;o<=u;)eS(n,r,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=n.at(o),p=l.value,g=jv(o,h,o,p,t);if(g!==0)g<0&&n.updateValue(o,p),o++,l=u.next();else{r??=new _f,i??=tS(n,o,s,t);let y=t(o,p);if(d_(n,r,o,y))n.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))n.attach(o,n.create(o,p)),o++,s++,l=u.next();else{let I=t(o,h);r.set(I,n.detach(o)),s--}}}for(;!l.done;)eS(n,r,t,n.length,l.value),l=u.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(u=>{n.destroy(u)})}function d_(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function eS(n,e,t,r,i){if(d_(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function tS(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var _f=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function dn(n,e,t,r,i,o,s,a){er("NgControlFlow");let u=Q(),l=je(),h=wn(l.consts,o);return Yo(u,l,n,e,t,r,i,h,256,s,a),qu}function qu(n,e,t,r,i,o,s,a){er("NgControlFlow");let u=Q(),l=je(),h=wn(l.consts,o);return Yo(u,l,n,e,t,r,i,h,512,s,a),qu}function hn(n,e){er("NgControlFlow");let t=Q(),r=Bi(),i=t[r]!==Jt?t[r]:-1,o=i!==-1?Ef(t,Ve+i):void 0,s=0;if(On(t,r,n)){let a=re(null);try{if(o!==void 0&&B_(o,s),n!==-1){let u=Ve+n,l=Ef(t,u),h=g_(t[$],u),p=wA(l,h,t),g=wa(t,h,e,{dehydratedView:p});ba(l,g,s,Go(h,p))}}finally{re(a)}}else if(o!==void 0){let a=EA(o,s);a!==void 0&&(a[it]=e)}}var h_=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Et}};function eE(n){return n}function tE(n,e){return e}var f_=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function zu(n,e,t,r,i,o,s,a,u,l,h,p,g){er("NgControlFlow");let y=Q(),I=je(),A=u!==void 0,N=Q(),k=a?s.bind(N[Zt][it]):s,z=new f_(A,k);N[Ve+n]=z,Yo(y,I,n+1,e,t,r,i,wn(I.consts,o),256),A&&Yo(y,I,n+2,u,l,h,p,wn(I.consts,g),512)}var p_=class extends l_{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Et}at(e){return this.getLView(e)[it].$implicit}attach(e,t){let r=t[Lo];this.needsIndexUpdate||=e!==this.length,ba(this.lContainer,t,e,Go(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,yj(this.lContainer,e)}create(e,t){let r=lf(this.lContainer,this.templateTNode.tView.ssrId),i=wa(this.hostLView,this.templateTNode,new h_(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Rf(e[$],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[it].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[it].$index=e}getLView(e){return vj(this.lContainer,e)}};function Gu(n){let e=re(null),t=yr();try{let r=Q(),i=r[$],o=r[t],s=t+1,a=Ef(r,s);if(o.liveCollection===void 0){let l=g_(i,s);o.liveCollection=new p_(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(mj(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Bi(),h=u.length===0;if(On(r,l,h)){let p=t+2,g=Ef(r,p);if(h){let y=g_(i,p),I=wA(g,y,r),A=wa(r,y,void 0,{dehydratedView:I});ba(g,A,0,Go(y,I))}else i.firstUpdatePass&&MV(g),B_(g,0)}}}finally{re(e)}}function Ef(n,e){return n[e]}function yj(n,e){return Fu(n,e)}function vj(n,e){return EA(n,e)}function g_(n,e){return Ho(n,e)}function Ee(n,e,t){let r=Q(),i=Bi();if(On(r,i,e)){let o=je(),s=Ru();oA(s,r,n,e,r[Le],t)}return Ee}function m_(n,e,t,r,i){V_(e,n,t,i?"class":"style",r)}function H(n,e,t,r){let i=Q(),o=i[$],s=n+Ve,a=o.firstCreatePass?SA(s,i,2,e,aA,pv(),t,r):o.data[s];if(cA(a,i,n,e,aR),Du(a)){let u=i[$];F_(u,i,a),LS(u,a,i)}return r!=null&&Mf(i,a),H}function B(){let n=je(),e=lt(),t=uA(e);return n.firstCreatePass&&AA(n,t),mv(t)&&yv(),fv(),t.classesWithoutHost!=null&&GF(t)&&m_(n,t,Q(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&WF(t)&&m_(n,t,Q(),t.stylesWithoutHost,!1),B}function Oe(n,e,t,r){return H(n,e,t,r),B(),Oe}function fn(n,e,t,r){let i=Q(),o=i[$],s=n+Ve,a=o.firstCreatePass?zV(s,o,2,e,t,r):o.data[s];return cA(a,i,n,e,aR),r!=null&&Mf(i,a),fn}function Xt(){let n=lt(),e=uA(n);return mv(e)&&yv(),fv(),Xt}function Ki(n,e,t,r){return fn(n,e,t,r),Xt(),Ki}var aR=(n,e,t,r,i)=>(qh(!0),GS(e[Le],r,EC()));function dt(){return Q()}function cR(n,e,t){let r=Q(),i=Bi();if(On(r,i,e)){let o=je(),s=Ru();sA(s,r,n,e,r[Le],t)}return cR}var Wu="en-US";var _j=Wu;function uR(n){typeof n=="string"&&(_j=n.toLowerCase().replace(/_/g,"-"))}function Z(n,e,t){let r=Q(),i=je(),o=lt();return lR(i,r,r[Le],o,n,e,t),Z}function Na(n,e,t){let r=Q(),i=je(),o=lt();return(o.type&3||t)&&xA(o,i,r,t,r[Le],n,e,Xh(o,r,e)),Na}function lR(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Xh(r,e,o),xA(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=Xh(r,e,o),VC(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Xh(r,e,o),VC(r,e,p,i,i,u)}}function De(n=1){return _C(n)}function Ej(n,e){let t=null,r=SL(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?zS(n,o,!0):NL(r,o))return i}return t}function Ku(n){let e=Q()[Zt][Yt];if(!e.projection){let t=n?n.length:1,r=e.projection=GT(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?Ej(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Qu(n,e=0,t,r,i,o){let s=Q(),a=je(),u=r?n+1:null;u!==null&&Yo(s,a,u,r,i,o,null,t);let l=Da(a,Ve+n,16,null,t||null);l.projection===null&&(l.projection=e),Ev();let p=!s[Lo]||gv();s[Zt][Yt].projection[l.projection]===null&&u!==null?Ij(s,a,u):p&&!Cf(l)&&YL(a,s,l)}function Ij(n,e,t){let r=Ve+t,i=e.data[r],o=n[r],s=lf(o,i.tView.ssrId),a=wa(n,i,void 0,{dehydratedView:s});ba(o,a,0,Go(i,s))}function nE(n,e,t,r){p2(n,e,t,r)}function Yu(n,e,t){f2(n,e,t)}function Xo(n){let e=Q(),t=je(),r=bv();Uh(r+1);let i=z_(t,r);if(n.dirty&&rC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=y2(e,r);n.reset(o,sL),n.notifyOnChanges()}return!0}return!1}function es(){return h2(Q(),bv())}function ts(n){let e=uC();return sv(e,Ve+n)}function Kh(n,e){return n<<17|e<<2}function Zo(n){return n>>17&32767}function wj(n){return(n&2)==2}function bj(n,e){return n&131071|e<<17}function y_(n){return n|2}function _a(n){return(n&131068)>>2}function Uv(n,e){return n&-131069|e<<2}function Dj(n){return(n&1)===1}function v_(n){return n|1}function Tj(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Zo(s),u=_a(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||ia(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let g=Zo(n[a+1]);n[r+1]=Kh(g,a),g!==0&&(n[g+1]=Uv(n[g+1],r)),n[a+1]=bj(n[a+1],r)}else n[r+1]=Kh(a,0),a!==0&&(n[a+1]=Uv(n[a+1],r)),a=r;else n[r+1]=Kh(u,0),a===0?a=r:n[u+1]=Uv(n[u+1],r),u=r;l&&(n[r+1]=y_(n[r+1])),nS(n,h,r,!0),nS(n,h,r,!1),Cj(e,h,n,r,o),s=Kh(a,u),o?e.classBindings=s:e.styleBindings=s}function Cj(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&ia(o,e)>=0&&(t[r+1]=v_(t[r+1]))}function nS(n,e,t,r){let i=n[t+1],o=e===null,s=r?Zo(i):_a(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];Sj(u,e)&&(a=!0,n[s+1]=r?v_(l):y_(l)),s=r?Zo(l):_a(l)}a&&(n[t+1]=r?y_(i):v_(i))}function Sj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ia(n,e)>=0:!1}var Xn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Aj(n){return n.substring(Xn.key,Xn.keyEnd)}function Rj(n){return Nj(n),dR(n,hR(n,0,Xn.textEnd))}function dR(n,e){let t=Xn.textEnd;return t===e?-1:(e=Xn.keyEnd=Mj(n,Xn.key=e,t),hR(n,e,t))}function Nj(n){Xn.key=0,Xn.keyEnd=0,Xn.value=0,Xn.valueEnd=0,Xn.textEnd=n.length}function hR(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Mj(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function en(n,e){return Pj(n,e,null,!0),en}function rE(n){kj(Uj,xj,n,!0)}function xj(n,e){for(let t=Rj(e);t>=0;t=dR(e,t))Nh(n,Aj(e),!0)}function Pj(n,e,t,r){let i=Q(),o=je(),s=Vh(2);if(o.firstUpdatePass&&pR(o,n,s,r),e!==Jt&&On(i,s,e)){let a=o.data[yr()];gR(o,a,i,i[Le],n,i[s+1]=Hj(e,t),r,s)}}function kj(n,e,t,r){let i=je(),o=Vh(2);i.firstUpdatePass&&pR(i,null,o,r);let s=Q();if(t!==Jt&&On(s,o,t)){let a=i.data[yr()];if(mR(a,r)&&!fR(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Ch(u,t||"")),m_(i,a,s,t,r)}else Bj(i,a,s,s[Le],s[o+1],s[o+1]=jj(n,e,t),r,o)}}function fR(n,e){return e>=n.expandoStartIndex}function pR(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[yr()],s=fR(n,t);mR(o,r)&&e===null&&!s&&(e=!1),e=Oj(i,o,e,r),Tj(i,o,e,t,s,r)}}function Oj(n,e,t,r){let i=gC(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Bv(null,n,e,t,r),t=ju(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Bv(i,n,e,t,r),o===null){let u=Fj(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Bv(null,n,e,u[1],r),u=ju(u,e.attrs,r),Lj(n,e,r,u))}else o=Vj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Fj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(_a(r)!==0)return n[Zo(r)]}function Lj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Zo(i)]=r}function Vj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ju(r,s,t)}return ju(r,e.attrs,t)}function Bv(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ju(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ju(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Nh(n,s,t?!0:e[++o]))}return n===void 0?null:n}function jj(n,e,t){if(t==null||t==="")return Qt;let r=[],i=Bu(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function Uj(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&Nh(n,r,t)}function Bj(n,e,t,r,i,o,s,a){i===Jt&&(i=Qt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,I=null,A;h===p?(u+=2,l+=2,g!==y&&(I=p,A=y)):p===null||h!==null&&h<p?(u+=2,I=h):(l+=2,I=p,A=y),I!==null&&gR(n,e,t,r,I,A,s,a),h=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function gR(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=Dj(l)?rS(u,e,t,i,_a(l),s):void 0;if(!If(h)){If(o)||wj(l)&&(o=rS(u,null,t,i,a,s));let p=kh(yr(),t);JL(r,s,p,i,o)}}function rS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=t[i+1];g===Jt&&(g=p?Qt:void 0);let y=p?Mh(g,r):h===r?g:void 0;if(l&&!If(y)&&(y=Mh(u,r)),If(y)&&(a=y,s))return a;let I=n[i+1];i=s?Zo(I):_a(I)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Mh(u,r))}return a}function If(n){return n!==void 0}function Hj(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Qr(Bu(n)))),n}function mR(n,e){return(n.flags&(e?8:16))!==0}function he(n,e=""){let t=Q(),r=je(),i=n+Ve,o=r.firstCreatePass?Da(r,i,1,e,null):r.data[i],s=$j(r,t,o,e,n);t[i]=s,$h()&&k_(r,t,s,o),ca(o,!1)}var $j=(n,e,t,r,i)=>(qh(!0),kL(e[Le],r));function qj(n,e,t,r=""){return On(n,Bi(),t)?e+Fo(t)+r:Jt}function zj(n,e,t,r,i,o=""){let s=lC(),a=MA(n,s,t,i);return Vh(2),a?e+Fo(t)+r+Fo(i)+o:Jt}function Fn(n){return Qe("",n),Fn}function Qe(n,e,t){let r=Q(),i=qj(r,n,e,t);return i!==Jt&&yR(r,yr(),i),Qe}function Uf(n,e,t,r,i){let o=Q(),s=zj(o,n,e,t,r,i);return s!==Jt&&yR(o,yr(),s),Uf}function yR(n,e,t){let r=kh(e,n);OL(n[Le],r,t)}function Ma(n,e,t){Rv(e)&&(e=e());let r=Q(),i=Bi();if(On(r,i,e)){let o=je(),s=Ru();oA(s,r,n,e,r[Le],t)}return Ma}function Zu(n,e){let t=Rv(n);return t&&n.set(e),t}function xa(n,e){let t=Q(),r=je(),i=lt();return lR(r,t,t[Le],i,n,e),xa}function Gj(n,e,t){let r=je();if(r.firstCreatePass){let i=Yn(n);__(t,r.data,r.blueprint,i,!0),__(e,r.data,r.blueprint,i,!1)}}function __(n,e,t,r,i){if(n=vt(n),Array.isArray(n))for(let o=0;o<n.length;o++)__(n[o],e,t,r,i);else{let o=je(),s=Q(),a=lt(),u=xo(n)?n:vt(n.provide),l=nv(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(xo(n)||!n.multi){let y=new zo(l,i,q,null),I=$v(u,e,i?h:h+g,p);I===-1?(zv(sf(a,s),o,u),Hv(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[I]=y,s[I]=y)}else{let y=$v(u,e,h+g,p),I=$v(u,e,h,h+g),A=y>=0&&t[y],N=I>=0&&t[I];if(i&&!N||!i&&!A){zv(sf(a,s),o,u);let k=Qj(i?Kj:Wj,t.length,i,r,l,n);!i&&N&&(t[I].providerFactory=k),Hv(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=vR(t[i?I:y],l,!i&&r);Hv(o,n,y>-1?y:I,k)}!i&&r&&N&&t[I].componentProviders++}}}function Hv(n,e,t,r){let i=xo(e),o=JT(e);if(i||o){let u=(o?vt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function vR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function $v(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Wj(n,e,t,r,i){return E_(this.multi,[])}function Kj(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=ku(r,r[$],this.providerFactory.index,i);s=u.slice(0,a),E_(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],E_(o,s);return s}function E_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Qj(n,e,t,r,i,o){let s=new zo(n,t,q,null);return s.multi=[],s.index=e,s.componentProviders=0,vR(s,i,r&&!t),s}function wr(n,e=[]){return t=>{t.providersResolver=(r,i)=>Gj(r,i?i(n):n,e)}}function Ju(n,e,t){let r=Au()+n,i=Q();return i[r]===Jt?q_(i,r,t?e.call(t):e()):GV(i,r)}function iE(n,e,t,r){return ER(Q(),Au(),n,e,t,r)}function oE(n,e,t,r,i){return Yj(Q(),Au(),n,e,t,r,i)}function _R(n,e){let t=n[e];return t===Jt?void 0:t}function ER(n,e,t,r,i,o){let s=e+t;return On(n,s,i)?q_(n,s+1,o?r.call(o,i):r(i)):_R(n,s+1)}function Yj(n,e,t,r,i,o,s){let a=e+t;return MA(n,a,i,o)?q_(n,a+2,s?r.call(s,i,o):r(i,o)):_R(n,a+2)}function ri(n,e){let t=je(),r,i=n+Ve;t.firstCreatePass?(r=Zj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ki(r.type,!0)),s,a=Kt(q);try{let u=of(!1),l=o();return of(u),av(t,Q(),i,l),l}finally{Kt(a)}}function Zj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function ii(n,e,t){let r=n+Ve,i=Q(),o=sv(i,r);return Jj(i,r)?ER(i,Au(),e,o.transform,t,o):o.transform(t)}function Jj(n,e){return n[$].data[e].pure}var wf=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},sE=(()=>{class n{compileModuleSync(t){return new mf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Xy(t),o=$S(i.declarations).reduce((s,a)=>{let u=Zr(a);return u&&s.push(new va(u)),s},[]);return new wf(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Xj=(()=>{class n{zone=S(Ae);changeDetectionScheduler=S(Mn);applicationRef=S(ni);applicationErrorHandler=S(Vt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function IR({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ae(ne(P({},wR()),{scheduleInRootZone:t})),[{provide:Ae,useFactory:n},{provide:Yr,multi:!0,useFactory:()=>{let r=S(Xj,{optional:!0});return()=>r.initialize()}},{provide:Yr,multi:!0,useFactory:()=>{let r=S(eU);return()=>{r.initialize()}}},e===!0?{provide:Nv,useValue:!0}:[],{provide:zh,useValue:t??QA},{provide:Vt,useFactory:()=>{let r=S(Ae),i=S(rt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(yn),o.handleError(s))})}}}]}function wR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var eU=(()=>{class n{subscription=new Ke;initialized=!1;zone=S(Ae);pendingTasks=S(vr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ae.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ae.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var aE=(()=>{class n{applicationErrorHandler=S(Vt);appRef=S(ni);taskService=S(vr);ngZone=S(Ae);zonelessEnabled=S(Nu);tracing=S(Jo,{optional:!0});disableScheduling=S(Nv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ke;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(yf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(S(zh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Vu||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?GC:YA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(yf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,GC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tU(){return er("NgZoneless"),_n([{provide:Mn,useExisting:aE},{provide:Ae,useClass:Vu},{provide:Nu,useValue:!0},{provide:zh,useValue:!1},[]])}function nU(){return typeof $localize<"u"&&$localize.locale||Wu}var Bf=new U("",{providedIn:"root",factory:()=>S(Bf,{optional:!0,skipSelf:!0})||nU()});var Hf=class{destroyed=!1;listeners=null;errorHandler=S(yn,{optional:!0});destroyRef=S(xt);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new j(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(ko(953,!1));return}if(this.listeners===null)return;let t=re(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{re(t)}}};function tn(n){return FT(n)}function Bt(n,e){return Wd(n,e?.equal)}var cE=class{[Lt];constructor(e){this[Lt]=e}destroy(){this[Lt].destroy()}};function Pa(n,e){let t=e?.injector??S(ze),r=e?.manualCleanup!==!0?t.get(xt):null,i,o=t.get(la,null,{optional:!0}),s=t.get(Mn);return o!==null?(i=oU(o.view,s,n),r instanceof gu&&r._lView===o.view&&(r=null)):i=sU(n,t.get(Mu),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new cE(i)}var bR=ne(P({},Ai),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:$o,run(){if(this.dirty=!1,this.hasRun&&!Us(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=Ri(this),t=ua(!1);try{this.maybeCleanup(),this.fn(n)}finally{ua(t),Do(this,e)}},maybeCleanup(){if(!this.cleanupFns?.length)return;let n=re(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],re(n)}}}),rU=ne(P({},bR),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Bs(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),iU=ne(P({},bR),{consumerMarkedDirty(){this.view[ie]|=8192,Ui(this.view),this.notifier.notify(13)},destroy(){Bs(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Jr]?.delete(this)}});function oU(n,e,t){let r=Object.create(iU);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[Jr]??=new Set,n[Jr].add(r),r.consumerMarkedDirty(r),r}function sU(n,e,t){let r=Object.create(rU);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}var SR=Symbol("InputSignalNode#UNSET"),DU=ne(P({},Kd),{transformFn:void 0,applyValueToInputSignal(n,e){Hs(n,e)}});function AR(n,e){let t=Object.create(DU);t.value=n,t.transformFn=e?.transform;function r(){if(js(t),t.value===SR){let i=null;throw new j(-950,i)}return t.value}return r[Lt]=t,r}var qf=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Uu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},TU=new U("");TU.__NG_ELEMENT_ID__=n=>{let e=lt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new j(204,!1)};function Ye(n){return new Hf}function DR(n,e){return AR(n,e)}function CU(n){return AR(SR,n)}var X=(DR.required=CU,DR);var ka=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},RR=new ka("20.1.2");var uE=new U(""),SU=new U("");function Xu(n){return!n.moduleRef}function AU(n){let e=Xu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ae);return t.run(()=>{Xu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Vt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Xu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(uE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(uE);s.add(o),n.moduleRef.onDestroy(()=>{Pu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return NU(r,t,()=>{let o=e.get(vr),s=o.add(),a=e.get(X_);return a.runInitializers(),a.donePromise.then(()=>{try{let u=e.get(Bf,Wu);if(uR(u||Wu),!e.get(SU,!0))return Xu(n)?e.get(ni):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Xu(n)){let h=e.get(ni);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return RU?.(n.moduleRef,n.allPlatformModules),n.moduleRef}finally{o.remove(s)}})})})}var RU;function NU(n,e,t){try{let r=t();return ti(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var $f=null;function MU(n=[],e){return ze.create({name:e,providers:[{provide:Eu,useValue:"platform"},{provide:uE,useValue:new Set([()=>$f=null])},...n]})}function xU(n=[]){if($f)return $f;let e=MU(n);return $f=e,iR(),PU(e),e}function PU(n){let e=n.get(Df,null);_t(n,()=>{e?.forEach(t=>t())})}function pE(){return!1}var oi=(()=>{class n{static __NG_ELEMENT_ID__=kU}return n})();function kU(n){return OU(lt(),Q(),(n&16)===16)}function OU(n,e,t){if(ji(n)&&!t){let r=kn(n.index,e);return new zi(r,r)}else if(n.type&175){let r=e[Zt];return new zi(r,e)}return null}var lE=class{constructor(){}supports(e){return $_(e)}create(e){return new dE(e)}},FU=(n,e)=>e,dE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||FU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<TR(r,i,o)?t:r,a=TR(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,I=y+g;h<=I&&I<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!$_(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,RA(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new hE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new zf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new zf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},hE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},fE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},zf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new fE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function TR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function CR(){return new gE([new lE])}var gE=(()=>{class n{factories;static \u0275prov=F({token:n,providedIn:"root",factory:CR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||CR()),deps:[[n,new sS,new un]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new j(901,!1)}}return n})();function NR(n){Re(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=xU(r),o=[IR({}),{provide:Mn,useExisting:aE},wC,...t||[]],s=new Lu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return AU({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Re(9)}}function ns(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var br=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=ae({type:n,selectors:[["button","pd-button",""]],hostAttrs:[1,"h-10","min-w-10","flex","items-center","justify-center","active:scale-95","transition-all","duration-150"]})};var Gf=class n{clicked=Ye();onClick(e){this.clicked.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=ae({type:n,selectors:[["button","pd-action-button",""]],hostAttrs:[1,"shadow-md/80","rounded-full","shadow-black/60","text-action-contrast","bg-action"],hostBindings:function(t,r){t&1&&Z("click",function(o){return r.onClick(o)})},outputs:{clicked:"clicked"},features:[It([br])]})};var Oa=class n{showNotification=Ce(!1);notificationMessage=Ce({type:"success",message:""});lastTimeoutId=void 0;abort=void 0;success(e){this.notificationMessage.set({type:"success",message:e??""}),this.setNotification(!0)}warn(e){this.notificationMessage.set({type:"warn",message:e??""}),this.setNotification(!0)}error(e){this.notificationMessage.set({type:"warn",message:e??""}),this.setNotification(!0)}notFound(e){this.notificationMessage.set({type:"404",message:e??""}),this.setNotification(!0)}setNotification(e){if(this.showNotification.set(e),this.abort?.abort(),this.showNotification()){this.abort=new AbortController;let t=this.abort.signal;window.addEventListener("keydown",this.onKeyDown.bind(this),{once:!0,signal:t,capture:!0}),window.addEventListener("click",this.onClick.bind(this),{once:!0,signal:t,capture:!0}),this.setHideTimeout()}else this.clearHideTimeout()}setHideTimeout(){this.clearHideTimeout(),this.lastTimeoutId=window.setTimeout(()=>{this.setNotification(!1)},3e3)}clearHideTimeout(){this.lastTimeoutId&&(clearTimeout(this.lastTimeoutId),this.lastTimeoutId=void 0)}onKeyDown(e){e.key==="Escape"&&this.setNotification(!1)}onClick(e){this.setNotification(!1)}ngOnDestroy(){this.abort?.abort()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wf=class n{notificationService=S(Oa);copy(e,t){navigator.clipboard?(navigator.clipboard.writeText(e),this.notificationService.success(t??"Copiado!")):this.notificationService.warn(t??"No se puede copiar!")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kf=class n{baseId="prompt-dict";save(e,t){localStorage.setItem(this.fullIdentifier(e),JSON.stringify(t))}get(e){let t=localStorage.getItem(this.fullIdentifier(e));if(t)try{return JSON.parse(t)}catch(r){return console.error(`Error parsing value for ${e}:`,r),null}return null}delete(e){localStorage.removeItem(this.fullIdentifier(e))}fullIdentifier(e){return`${this.baseId}-${e}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qf=class n{store=S(Kf);darkMode=Ce(this.store.get("darkMode")??this.darkModeSystem());toggle(){this.darkMode.set(!this.darkMode())}constructor(){Pa(()=>this.apply(this.darkMode()))}apply(e){this.store.save("darkMode",e),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");let t=document.querySelector("meta[name='color-scheme']");if(t)t.setAttribute("content",e?"dark light":"light");else{let r=document.createElement("meta");r.setAttribute("name","color-scheme"),r.setAttribute("content",e?"dark light":"light"),document.head.appendChild(r)}}darkModeSystem(){return window.matchMedia("(prefers-color-scheme: dark)").matches}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var MR=()=>{};var kR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},LU=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Yf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):LU(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new vE;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let I=l<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},vE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},VU=function(n){let e=kR(n);return Yf.encodeByteArray(e,!0)},tl=function(n){return VU(n).replace(/\./g,"")},Zf=function(n){try{return Yf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function EE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var jU=()=>EE().__FIREBASE_DEFAULTS__,UU=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BU=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Zf(n[1]);return e&&JSON.parse(e)},Jf=()=>{try{return MR()||jU()||UU()||BU()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IE=n=>{var e,t;return(t=(e=Jf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},OR=n=>{let e=IE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wE=()=>{var n;return(n=Jf())===null||n===void 0?void 0:n.config},bE=n=>{var e;return(e=Jf())===null||e===void 0?void 0:e[`_${n}`]};var rs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Qi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xf(n){return(await fetch(n,{credentials:"include"})).ok}function FR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[tl(JSON.stringify(t)),tl(JSON.stringify(s)),""].join(".")}var el={};function HU(){let n={prod:[],emulator:[]};for(let e of Object.keys(el))el[e]?n.emulator.push(e):n.prod.push(e);return n}function $U(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var xR=!1;function ep(n,e){if(typeof window>"u"||typeof document>"u"||!Qi(window.location.host)||el[n]===e||el[n]||xR)return;el[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=HU().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{xR=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=$U(r),y=t("text"),I=document.getElementById(y)||document.createElement("span"),A=t("learnmore"),N=document.getElementById(A)||document.createElement("a"),k=t("preprendIcon"),z=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let te=g.element;a(te),h(N,A);let Me=l();u(z,k),te.append(z,I,N,Me),document.body.appendChild(te)}o?(I.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function qU(){var n;let e=(n=Jf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function UR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BR(){let n=bt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function HR(){return!qU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nl(){try{return typeof indexedDB=="object"}catch{return!1}}function $R(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var zU="FirebaseError",Dn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=zU,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tr.prototype.create)}},tr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?GU(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Dn(i,a,r)}};function GU(n,e){return n.replace(WU,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var WU=/\{\$([^}]+)}/g;function qR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Dr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(PR(o)&&PR(s)){if(!Dr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function PR(n){return n!==null&&typeof n=="object"}function Fa(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zR(n,e){let t=new _E(n,e);return t.subscribe.bind(t)}var _E=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");KU(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=yE),i.error===void 0&&(i.error=yE),i.complete===void 0&&(i.complete=yE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function KU(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function yE(){}var $re=4*60*60*1e3;function ht(n){return n&&n._delegate?n._delegate:n}var nn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var is="[DEFAULT]";var DE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new rs;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YU(e))try{this.getOrInitializeService({instanceIdentifier:is})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=is){return this.instances.has(e)}getOptions(e=is){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QU(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=is){return this.component?this.component.multipleInstances?e:is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function QU(n){return n===is?void 0:n}function YU(n){return n.instantiationMode==="EAGER"}var tp=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new DE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var ZU=[],Ie=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(Ie||{}),JU={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},XU=Ie.INFO,eB={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},tB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=eB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Tr=class{constructor(e){this.name=e,this._logLevel=XU,this._logHandler=tB,this._userLogHandler=null,ZU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}};var nB=(n,e)=>e.some(t=>n instanceof t),GR,WR;function rB(){return GR||(GR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iB(){return WR||(WR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var KR=new WeakMap,CE=new WeakMap,QR=new WeakMap,TE=new WeakMap,AE=new WeakMap;function oB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Cr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&KR.set(t,n)}).catch(()=>{}),AE.set(e,n),e}function sB(n){if(CE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});CE.set(n,e)}var SE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return CE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||QR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Cr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function YR(n){SE=n(SE)}function aB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(np(this),e,...t);return QR.set(r,e.sort?e.sort():[e]),Cr(r)}:iB().includes(n)?function(...e){return n.apply(np(this),e),Cr(KR.get(this))}:function(...e){return Cr(n.apply(np(this),e))}}function cB(n){return typeof n=="function"?aB(n):(n instanceof IDBTransaction&&sB(n),nB(n,rB())?new Proxy(n,SE):n)}function Cr(n){if(n instanceof IDBRequest)return oB(n);if(TE.has(n))return TE.get(n);let e=cB(n);return e!==n&&(TE.set(n,e),AE.set(e,n)),e}var np=n=>AE.get(n);function JR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Cr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Cr(s.result),u.oldVersion,u.newVersion,Cr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var uB=["get","getKey","getAll","getAllKeys","count"],lB=["put","add","delete","clear"],RE=new Map;function ZR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(RE.get(e))return RE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=lB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||uB.includes(t)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&u.done]))[0]};return RE.set(e,o),o}YR(n=>ne(P({},n),{get:(e,t,r)=>ZR(e,t)||n.get(e,t,r),has:(e,t)=>!!ZR(e,t)||n.has(e,t)}));var ME=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function dB(n){let e=n.getComponent();return e?.type==="VERSION"}var xE="@firebase/app",XR="0.13.2";var si=new Tr("@firebase/app"),hB="@firebase/app-compat",fB="@firebase/analytics-compat",pB="@firebase/analytics",gB="@firebase/app-check-compat",mB="@firebase/app-check",yB="@firebase/auth",vB="@firebase/auth-compat",_B="@firebase/database",EB="@firebase/data-connect",IB="@firebase/database-compat",wB="@firebase/functions",bB="@firebase/functions-compat",DB="@firebase/installations",TB="@firebase/installations-compat",CB="@firebase/messaging",SB="@firebase/messaging-compat",AB="@firebase/performance",RB="@firebase/performance-compat",NB="@firebase/remote-config",MB="@firebase/remote-config-compat",xB="@firebase/storage",PB="@firebase/storage-compat",kB="@firebase/firestore",OB="@firebase/ai",FB="@firebase/firestore-compat",LB="firebase",VB="11.10.0";var PE="[DEFAULT]",jB={[xE]:"fire-core",[hB]:"fire-core-compat",[pB]:"fire-analytics",[fB]:"fire-analytics-compat",[mB]:"fire-app-check",[gB]:"fire-app-check-compat",[yB]:"fire-auth",[vB]:"fire-auth-compat",[_B]:"fire-rtdb",[EB]:"fire-data-connect",[IB]:"fire-rtdb-compat",[wB]:"fire-fn",[bB]:"fire-fn-compat",[DB]:"fire-iid",[TB]:"fire-iid-compat",[CB]:"fire-fcm",[SB]:"fire-fcm-compat",[AB]:"fire-perf",[RB]:"fire-perf-compat",[NB]:"fire-rc",[MB]:"fire-rc-compat",[xB]:"fire-gcs",[PB]:"fire-gcs-compat",[kB]:"fire-fst",[FB]:"fire-fst-compat",[OB]:"fire-vertex","fire-js":"fire-js",[LB]:"fire-js-all"};var rl=new Map,UB=new Map,kE=new Map;function eN(n,e){try{n.container.addComponent(e)}catch(t){si.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function nr(n){let e=n.name;if(kE.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;kE.set(e,n);for(let t of rl.values())eN(t,n);for(let t of UB.values())eN(t,n);return!0}function La(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Tn(n){return n==null?!1:n.settings!==void 0}var BB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new tr("app","Firebase",BB);var OE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}};var Zi=VB;function VE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:PE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Yi.create("bad-app-name",{appName:String(i)});if(t||(t=wE()),!t)throw Yi.create("no-options");let o=rl.get(i);if(o){if(Dr(t,o.options)&&Dr(r,o.config))return o;throw Yi.create("duplicate-app",{appName:i})}let s=new tp(i);for(let u of kE.values())s.addComponent(u);let a=new OE(t,r,s);return rl.set(i,a),a}function os(n=PE){let e=rl.get(n);if(!e&&n===PE&&wE())return VE();if(!e)throw Yi.create("no-app",{appName:n});return e}function rp(){return Array.from(rl.values())}function Ze(n,e,t){var r;let i=(r=jB[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(a.join(" "));return}nr(new nn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var HB="firebase-heartbeat-database",$B=1,il="firebase-heartbeat-store",NE=null;function iN(){return NE||(NE=JR(HB,$B,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(il)}catch(t){console.warn(t)}}}}).catch(n=>{throw Yi.create("idb-open",{originalErrorMessage:n.message})})),NE}async function qB(n){try{let t=(await iN()).transaction(il),r=await t.objectStore(il).get(oN(n));return await t.done,r}catch(e){if(e instanceof Dn)si.warn(e.message);else{let t=Yi.create("idb-get",{originalErrorMessage:e?.message});si.warn(t.message)}}}async function tN(n,e){try{let r=(await iN()).transaction(il,"readwrite");await r.objectStore(il).put(e,oN(n)),await r.done}catch(t){if(t instanceof Dn)si.warn(t.message);else{let r=Yi.create("idb-set",{originalErrorMessage:t?.message});si.warn(r.message)}}}function oN(n){return`${n.name}!${n.options.appId}`}var zB=1024,GB=30,FE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new LE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=nN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>GB){let s=KB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){si.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=nN(),{heartbeatsToSend:r,unsentEntries:i}=WB(this._heartbeatsCache.heartbeats),o=tl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return si.warn(t),""}}};function nN(){return new Date().toISOString().substring(0,10)}function WB(n,e=zB){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),rN(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),rN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var LE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nl()?$R().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await qB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return tN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return tN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function rN(n){return tl(JSON.stringify({version:2,heartbeats:n})).length}function KB(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function QB(n){nr(new nn("platform-logger",e=>new ME(e),"PRIVATE")),nr(new nn("heartbeat",e=>new FE(e),"PRIVATE")),Ze(xE,XR,n),Ze(xE,XR,"esm2017"),Ze("fire-js","")}QB("");var YB="firebase",ZB="11.10.0";Ze(YB,ZB,"app");function vie(n,e){let r=!e?.manualCleanup?e?.injector?.get(xt)??S(xt):null,i=JB(e?.equal),o;e?.requireSync?o=Ce({kind:0},{equal:i}):o=Ce({kind:1,value:e?.initialValue},{equal:i});let s,a=n.subscribe({next:u=>o.set({kind:1,value:u}),error:u=>{o.set({kind:2,error:u}),s?.()},complete:()=>{s?.()}});if(e?.requireSync&&o().kind===0)throw new j(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),Bt(()=>{let u=o();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new j(601,!1)}},{equal:e?.equal})}function JB(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function sN(n){n===void 0&&(n=S(ze));let e=n.get($i);return t=>new de(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Ji=new ka("ANGULARFIRE2_VERSION");function ol(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ja=(n,e)=>{let t=e?[e]:rp(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Va=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Va||{}),aN=pE()&&typeof Zone<"u"?Va.WARN:Va.SILENT;var ip=class{zone;delegate;constructor(e,t=Ey){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Xi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=S(Ae);this.outsideAngular=t.runOutsideAngular(()=>new ip(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new ip(typeof Zone>"u"?void 0:Zone.current,cu))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cN=!1;function XB(n,e){!cN&&(aN>Va.SILENT||pE())&&(cN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),aN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function eH(n){let e=S(Ae,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ss(n){let e=S(Ae,{optional:!0});return e?e.run(()=>n()):n()}var tH=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),_t(t,()=>ss(()=>n.apply(void 0,r)))),Ht=(n,e,t)=>(t||=e?Va.WARN:Va.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=S(Xi),s=S($i),a=S(rt)}catch{return XB(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=ss(()=>s.add())),i[l]=tH(i[l],r,a));let u=eH(()=>n.apply(this,i));return e?u instanceof de?u.pipe(xi(o.outsideAngular),Mi(o.insideAngular),sN(a)):u instanceof Promise?ss(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>_t(a,()=>ss(()=>h(g))),g=>_t(a,()=>ss(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:ss(()=>u):u instanceof de?u.pipe(xi(o.outsideAngular),Mi(o.insideAngular)):ss(()=>u)});var ai=class{constructor(e){return e}},as=class{constructor(){return rp()}};function nH(n){return n&&n.length===1?n[0]:new ai(os())}var jE=new U("angularfire2._apps"),rH={provide:ai,useFactory:nH,deps:[[new un,jE]]},iH={provide:as,deps:[[new un,jE]]};function oH(n){return(e,t)=>{let r=t.get(Gi);Ze("angularfire",Ji.full,"core"),Ze("angularfire",Ji.full,"app"),Ze("angular",RR.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ai(i)}}function Lie(n,...e){return _n([rH,iH,{provide:jE,useFactory:oH(n),multi:!0,deps:[Ae,ze,Xi,...e]}])}var Vie=Ht(VE,!0);var dN=null;function Ln(){return dN}function UE(n){dN??=n}var sl=class{},BE=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>S(hN),providedIn:"platform"})}return n})();var hN=(()=>{class n extends BE{_location;_history;_doc=S(wt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ln().getBaseHref(this._doc)}onPopState(t){let r=Ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ln().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function fN(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function uN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function eo(n){return n&&n[0]!=="?"?`?${n}`:n}var Ua=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>S(pN),providedIn:"root"})}return n})(),op=new U(""),pN=(()=>{class n extends Ua{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??S(wt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return fN(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+eo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+eo(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+eo(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(G(BE),G(op,8))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ba=(()=>{class n{_subject=new tt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=cH(uN(lN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+eo(r))}normalize(t){return n.stripTrailingSlash(aH(this._basePath,lN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+eo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+eo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=eo;static joinWithSlash=fN;static stripTrailingSlash=uN;static \u0275fac=function(r){return new(r||n)(G(Ua))};static \u0275prov=F({token:n,factory:()=>sH(),providedIn:"root"})}return n})();function sH(){return new Ba(G(Ua))}function aH(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function lN(n){return n.replace(/\/index.html$/,"")}function cH(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var sp=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},mN=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new sp(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),gN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);gN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(q(Wi),q(Wo),q(gE))};static \u0275dir=ae({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function gN(n,e){n.context.$implicit=e.item}function yN(n,e){return new j(2100,!1)}var HE=class{createSubscription(e,t,r){return tn(()=>e.subscribe({next:t,error:r}))}dispose(e){tn(()=>e.unsubscribe())}},$E=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},uH=new $E,lH=new HE,cs=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=S(Vt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(ti(t))return uH;if(Vf(t))return lH;throw yN(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(q(oi,16))};static \u0275pipe=Ca({name:"async",type:n,pure:!1})}return n})();var dH=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,hH=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw yN(n,t);return t.replace(dH,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Ca({name:"titlecase",type:n,pure:!0})}return n})();var vN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ir({type:n});static \u0275inj=Gn({})}return n})();function qE(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var al=class{};var _N="browser";var pH=new Map,gH={activated:!1,tokenObservers:[]},mH={initialized:!1,enabled:!1};function rr(n){return pH.get(n)||Object.assign({},gH)}function bN(){return mH}var yH="https://content-firebaseappcheck.googleapis.com/v1";var vH="exchangeDebugToken",EN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Dse=24*60*60*1e3;var WE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new rs,this.pending.promise.catch(t=>{}),await _H(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new rs,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function _H(n){return new Promise(e=>{setTimeout(e,n)})}var EH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},to=new tr("appCheck","AppCheck",EH);function DN(n){if(!rr(n).activated)throw to.create("use-before-activation",{appName:n.name})}async function TN({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(n,o)}catch(p){throw to.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw to.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw to.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw to.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function CN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${yH}/projects/${t}/apps/${r}:${vH}?key=${i}`,body:{debug_token:e}}}var IH="firebase-app-check-database",wH=1,KE="firebase-app-check-store";var ap=null;function bH(){return ap||(ap=new Promise((n,e)=>{try{let t=indexedDB.open(IH,wH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(to.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(KE,{keyPath:"compositeKey"})}}}catch(t){e(to.create("storage-open",{originalErrorMessage:t?.message}))}}),ap)}function DH(n,e){return TH(CH(n),e)}async function TH(n,e){let r=(await bH()).transaction(KE,"readwrite"),o=r.objectStore(KE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(to.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function CH(n){return`${n.options.appId}-${n.name}`}var cl=new Tr("@firebase/app-check");function zE(n,e){return nl()?DH(n,e).catch(t=>{cl.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function SN(){return bN().enabled}async function AN(){let n=bN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var SH={error:"UNKNOWN_ERROR"};function AH(n){return Yf.encodeString(JSON.stringify(n),!1)}async function QE(n,e=!1,t=!1){let r=n.app;DN(r);let i=rr(r),o=i.token,s;if(o&&!ul(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(ul(l)?o=l:await zE(r,void 0))}if(!e&&o&&ul(o))return{token:o.token};let a=!1;if(SN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=TN(CN(r,await AN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await zE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?cl.warn(l.message):t&&cl.error(l),GE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await rr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?cl.warn(l.message):t&&cl.error(l),s=l}let u;return o?s?ul(o)?u={token:o.token,internalError:s}:u=GE(s):(u={token:o.token},i.token=o,await zE(r,o)):u=GE(s),a&&xH(r,u),u}async function RH(n){let e=n.app;DN(e);let{provider:t}=rr(e);if(SN()){let r=await AN(),{token:i}=await TN(CN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function NH(n,e,t,r){let{app:i}=n,o=rr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ul(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),IN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>IN(n))}function RN(n,e){let t=rr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function IN(n){let{app:e}=n,t=rr(e),r=t.tokenRefresher;r||(r=MH(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function MH(n){let{app:e}=n;return new WE(async()=>{let t=rr(e),r;if(t.token?r=await QE(n,!0):r=await QE(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=rr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},EN.RETRIAL_MIN_WAIT,EN.RETRIAL_MAX_WAIT)}function xH(n,e){let t=rr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ul(n){return n.expireTimeMillis-Date.now()>0}function GE(n){return{token:AH(SH),error:n}}var YE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=rr(this.app);for(let t of e)RN(this.app,t.next);return Promise.resolve()}};function PH(n,e){return new YE(n,e)}function kH(n){return{getToken:e=>QE(n,e),getLimitedUseToken:()=>RH(n),addTokenListener:e=>NH(n,"INTERNAL",e),removeTokenListener:e=>RN(n.app,e)}}var OH="@firebase/app-check",FH="0.10.1";var LH="app-check",wN="app-check-internal";function VH(){nr(new nn(LH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return PH(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(wN).initialize()})),nr(new nn(wN,n=>{let e=n.getProvider("app-check").getImmediate();return kH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ze(OH,FH)}VH();var jH="app-check";var Ha=class{constructor(){return ja(jH)}};var UH=["localhost","0.0.0.0","127.0.0.1"],Fse=typeof window<"u"&&UH.includes(window.location.hostname);function qN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var zN=qN,GN=new tr("auth","Firebase",qN());var fp=new Tr("@firebase/auth");function BH(n,...e){fp.logLevel<=Ie.WARN&&fp.warn(`Auth (${Zi}): ${n}`,...e)}function up(n,...e){fp.logLevel<=Ie.ERROR&&fp.error(`Auth (${Zi}): ${n}`,...e)}function Ar(n,...e){throw pI(n,...e)}function ir(n,...e){return pI(n,...e)}function fI(n,e,t){let r=Object.assign(Object.assign({},zN()),{[e]:t});return new tr("auth","Firebase",r).create(e,{appName:n.name})}function us(n){return fI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HH(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ar(n,"argument-error"),fI(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return GN.create(n,...e)}function oe(n,e,...t){if(!n)throw pI(e,...t)}function ci(n){let e="INTERNAL ASSERTION FAILED: "+n;throw up(e),new Error(e)}function li(n,e){n||ci(e)}function XE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function $H(){return NN()==="http:"||NN()==="https:"}function NN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function qH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($H()||jR()||"connection"in navigator)?navigator.onLine:!0}function zH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ls=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,li(t>e,"Short delay should be less than long delay!"),this.isMobile=LR()||UR()}get(){return qH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function gI(n,e){li(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var pp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var GH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var WH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KH=new ls(3e4,6e4);function mI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function qa(n,e,t,r,i={}){return WN(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Fa(Object.assign({key:n.config.apiKey},s)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:u},o);return VR()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Qi(n.emulatorConfig.host)&&(l.credentials="include"),pp.fetch()(await KN(n,n.config.apiHost,t,a),l)})}async function WN(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},GH),e);try{let i=new eI(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw cp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw cp(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw cp(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw cp(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw fI(n,h,l);Ar(n,h)}}catch(i){if(i instanceof Dn)throw i;Ar(n,"network-request-failed",{message:String(i)})}}async function QH(n,e,t,r,i={}){let o=await qa(n,e,t,r,i);return"mfaPendingCredential"in o&&Ar(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function KN(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?gI(n.config,i):`${n.config.apiScheme}://${i}`;return WH.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var eI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ir(this.auth,"network-request-failed")),KH.get())})}};function cp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ir(n,e,r);return i.customData._tokenResponse=t,i}async function YH(n,e){return qa(n,"POST","/v1/accounts:delete",e)}async function gp(n,e){return qa(n,"POST","/v1/accounts:lookup",e)}function ll(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yI(n,e=!1){let t=ht(n),r=await t.getIdToken(e),i=vI(r);oe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:ll(ZE(i.auth_time)),issuedAtTime:ll(ZE(i.iat)),expirationTime:ll(ZE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function ZE(n){return Number(n)*1e3}function vI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return up("JWT malformed, contained fewer than 3 sections"),null;try{let i=Zf(t);return i?JSON.parse(i):(up("Failed to decode base64 JWT payload"),null)}catch(i){return up("Caught error parsing JWT payload as JSON",i?.toString()),null}}function MN(n){let e=vI(n);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Dn&&ZH(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function ZH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var tI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var fl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ll(this.lastLoginAt),this.creationTime=ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function mp(n){var e;let t=n.auth,r=await n.getIdToken(),i=await hl(n,gp(t,{idToken:r}));oe(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?QN(o.providerUserInfo):[],a=JH(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new fl(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function _I(n){let e=ht(n);await mp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function QN(n){return n.map(e=>{var{providerId:t}=e,r=ih(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function XH(n,e){let t=await WN(n,{},async()=>{let r=Fa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await KN(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&Qi(n.emulatorConfig.host)&&(u.credentials="include"),pp.fetch()(s,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function e$(n,e){return qa(n,"POST","/v2/accounts:revokeToken",mI(n,e))}var dl=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):MN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){oe(e.length!==0,"internal-error");let t=MN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await XH(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(oe(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(oe(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ci("not implemented")}};function no(n,e){oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ro=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=ih(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new fl(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let t=await hl(this,this.stsTokenManager.getToken(this.auth,e));return oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return yI(this,e)}reload(){return _I(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await mp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tn(this.auth.app))return Promise.reject(us(this.auth));let e=await this.getIdToken();return await hl(this,YH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,I=(s=t.photoURL)!==null&&s!==void 0?s:void 0,A=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=t.createdAt)!==null&&l!==void 0?l:void 0,z=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:te,emailVerified:Me,isAnonymous:et,providerData:ke,stsTokenManager:b}=t;oe(te&&b,e,"internal-error");let v=dl.fromJSON(this.name,b);oe(typeof te=="string",e,"internal-error"),no(p,e.name),no(g,e.name),oe(typeof Me=="boolean",e,"internal-error"),oe(typeof et=="boolean",e,"internal-error"),no(y,e.name),no(I,e.name),no(A,e.name),no(N,e.name),no(k,e.name),no(z,e.name);let E=new n({uid:te,auth:e,email:g,emailVerified:Me,displayName:p,isAnonymous:et,photoURL:I,phoneNumber:y,tenantId:A,stsTokenManager:v,createdAt:k,lastLoginAt:z});return ke&&Array.isArray(ke)&&(E.providerData=ke.map(w=>Object.assign({},w))),N&&(E._redirectEventId=N),E}static async _fromIdTokenResponse(e,t,r=!1){let i=new dl;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await mp(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];oe(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?QN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new dl;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new fl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var xN=new Map;function ui(n){li(n instanceof Function,"Expected a class definition");let e=xN.get(n);return e?(li(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,xN.set(n,e),e)}var t$=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),nI=t$;function lp(n,e,t){return`firebase:${n}:${e}:${t}`}var yp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=lp(this.userKey,i.apiKey,o),this.fullPersistenceKey=lp("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await gp(this.auth,{idToken:e}).catch(()=>{});return t?ro._fromGetAccountInfoResponse(this.auth,t,e):null}return ro._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(ui(nI),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||ui(nI),s=lp(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await gp(e,{idToken:h}).catch(()=>{});if(!g)break;p=await ro._fromGetAccountInfoResponse(e,g,h)}else p=ro._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new n(o,e,r))}};function PN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tM(e))return"Blackberry";if(nM(e))return"Webos";if(ZN(e))return"Safari";if((e.includes("chrome/")||JN(e))&&!e.includes("edge/"))return"Chrome";if(eM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function YN(n=bt()){return/firefox\//i.test(n)}function ZN(n=bt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JN(n=bt()){return/crios\//i.test(n)}function XN(n=bt()){return/iemobile/i.test(n)}function eM(n=bt()){return/android/i.test(n)}function tM(n=bt()){return/blackberry/i.test(n)}function nM(n=bt()){return/webos/i.test(n)}function EI(n=bt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function n$(n=bt()){var e;return EI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function r$(){return BR()&&document.documentMode===10}function rM(n=bt()){return EI(n)||eM(n)||nM(n)||tM(n)||/windows phone/i.test(n)||XN(n)}function iM(n,e=[]){let t;switch(n){case"Browser":t=PN(bt());break;case"Worker":t=`${PN(bt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Zi}/${r}`}var rI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function i$(n,e={}){return qa(n,"GET","/v2/passwordPolicy",mI(n,e))}var o$=6,iI=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:o$,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var oI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vp(this),this.idTokenSubscription=new vp(this),this.beforeStateQueue=new rI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ui(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await yp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await gp(this,{idToken:e}),r=await ro._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Tn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await mp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tn(this.app))return Promise.reject(us(this));let t=e?ht(e):null;return t&&oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tn(this.app)?Promise.reject(us(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tn(this.app)?Promise.reject(us(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await i$(this),t=new iI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await e$(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ui(e)||this._popupRedirectResolver;oe(t,this,"argument-error"),this.redirectPersistenceManager=await yp.create(this,[ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&BH(`Error while retrieving App Check token: ${t.error}`),t?.token}};function Cp(n){return ht(n)}var vp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=zR(t=>this.observer=t)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var II={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s$(n){II=n}function a$(n){return II.loadJS(n)}function c$(){return II.gapiScript}function oM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function wI(n,e){let t=La(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Dr(o,e??{}))return i;Ar(i,"already-initialized")}return t.initialize({options:e})}function u$(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ui);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function bI(n,e,t){let r=Cp(n);oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=sM(e),{host:s,port:a}=l$(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),oe(Dr(l,r.config.emulator)&&Dr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Qi(s)?(Xf(`${o}//${s}${u}`),ep("Auth",!0)):i||d$()}function sM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function l$(n){let e=sM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:kN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:kN(s)}}}function kN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function d$(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var pl=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,t){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}};async function $a(n,e){return QH(n,"POST","/v1/accounts:signInWithIdp",mI(n,e))}var h$="http://localhost",_p=class n extends pl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ar("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=ih(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return $a(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,$a(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,$a(e,t)}buildRequest(){let e={requestUri:h$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fa(t)}return e}};var gl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ep=class extends gl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var DI=(()=>{class n extends Ep{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return _p._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var ml=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await ro._fromIdTokenResponse(e,r,i),s=ON(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=ON(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function ON(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var sI=class n extends Dn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function aM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?sI._fromErrorAndOperation(n,o,e,r):o})}async function f$(n,e,t=!1){let r=await hl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ml._forOperation(n,"link",r)}async function p$(n,e,t=!1){let{auth:r}=n;if(Tn(r.app))return Promise.reject(us(r));let i="reauthenticate";try{let o=await hl(n,aM(r,i,e,n),t);oe(o.idToken,r,"internal-error");let s=vI(o.idToken);oe(s,r,"internal-error");let{sub:a}=s;return oe(n.uid===a,r,"user-mismatch"),ml._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ar(r,"user-mismatch"),o}}async function g$(n,e,t=!1){if(Tn(n.app))return Promise.reject(us(n));let r="signIn",i=await aM(n,r,e),o=await ml._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function TI(n,e,t,r){return ht(n).onIdTokenChanged(e,t,r)}function CI(n,e,t){return ht(n).beforeAuthStateChanged(e,t)}function SI(n){return ht(n).signOut()}var Ip="__sak";var wp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ip,"1"),this.storage.removeItem(Ip),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var m$=1e3,y$=10,v$=(()=>{class n extends wp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);r$()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,y$):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},m$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),cM=v$;var _$=(()=>{class n extends wp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),AI=_$;function E$(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var I$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await E$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function RI(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var aI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=RI("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Sr(){return window}function w$(n){Sr().location.href=n}function uM(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function b$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function D$(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function T$(){return uM()?self:null}var lM="firebaseLocalStorageDb",C$=1,bp="firebaseLocalStorage",dM="fbase_key",ds=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Sp(n,e){return n.transaction([bp],e?"readwrite":"readonly").objectStore(bp)}function S$(){let n=indexedDB.deleteDatabase(lM);return new ds(n).toPromise()}function cI(){let n=indexedDB.open(lM,C$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(bp,{keyPath:dM})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(bp)?e(r):(r.close(),await S$(),e(await cI()))})})}async function FN(n,e,t){let r=Sp(n,!0).put({[dM]:e,value:t});return new ds(r).toPromise()}async function A$(n,e){let t=Sp(n,!1).get(e),r=await new ds(t).toPromise();return r===void 0?null:r.value}function LN(n,e){let t=Sp(n,!0).delete(e);return new ds(t).toPromise()}var R$=800,N$=3,M$=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cI(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>N$)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=I$._getInstance(T$()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await b$(),!this.activeServiceWorker)return;this.sender=new aI(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||D$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await cI();return await FN(t,Ip,"1"),await LN(t,Ip),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>FN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>A$(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>LN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=Sp(o,!1).getAll();return new ds(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),R$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),hM=M$;var Gse=oM("rcb"),Wse=new ls(3e4,6e4);function fM(n,e){return e?ui(e):(oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var yl=class extends pl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $a(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $a(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $a(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function x$(n){return g$(n.auth,new yl(n),n.bypassAuthState)}function P$(n){let{auth:e,user:t}=n;return oe(t,e,"internal-error"),p$(t,new yl(n),n.bypassAuthState)}async function k$(n){let{auth:e,user:t}=n;return oe(t,e,"internal-error"),f$(t,new yl(n),n.bypassAuthState)}var Dp=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return x$;case"linkViaPopup":case"linkViaRedirect":return k$;case"reauthViaPopup":case"reauthViaRedirect":return P$;default:Ar(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var O$=new ls(2e3,1e4);async function NI(n,e,t){if(Tn(n.app))return Promise.reject(ir(n,"operation-not-supported-in-this-environment"));let r=Cp(n);HH(n,e,gl);let i=fM(r,t);return new F$(r,"signInViaPopup",e,i).executeNotNull()}var F$=(()=>{class n extends Dp{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return oe(t,this.auth,"internal-error"),t}async onExecution(){li(this.filter.length===1,"Popup operations only handle one event");let t=RI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,O$.get())};t()}}n.currentPopupAction=null;return n})(),L$="pendingRedirect",dp=new Map,uI=class extends Dp{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=dp.get(this.auth._key());if(!e){try{let r=await V$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}dp.set(this.auth._key(),e)}return this.bypassAuthState||dp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function V$(n,e){let t=B$(e),r=U$(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function j$(n,e){dp.set(n._key(),e)}function U$(n){return ui(n._redirectPersistence)}function B$(n){return lp(L$,n.config.apiKey,n.name)}async function H$(n,e,t=!1){if(Tn(n.app))return Promise.reject(us(n));let r=Cp(n),i=fM(r,e),s=await new uI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var $$=10*60*1e3,lI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!q$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!pM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ir(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$$&&this.cachedEventUids.clear(),this.cachedEventUids.has(VN(e))}saveEventToCache(e){this.cachedEventUids.add(VN(e)),this.lastProcessedEventTime=Date.now()}};function VN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function pM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function q$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pM(n);default:return!1}}async function z$(n,e={}){return qa(n,"GET","/v1/projects",e)}var G$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W$=/^https?/;async function K$(n){if(n.config.emulator)return;let{authorizedDomains:e}=await z$(n);for(let t of e)try{if(Q$(t))return}catch{}Ar(n,"unauthorized-domain")}function Q$(n){let e=XE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!W$.test(t))return!1;if(G$.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Y$=new ls(3e4,6e4);function jN(){let n=Sr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Z$(n){return new Promise((e,t)=>{var r,i,o;function s(){jN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jN(),t(ir(n,"network-request-failed"))},timeout:Y$.get()})}if(!((i=(r=Sr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Sr().gapi)===null||o===void 0)&&o.load)s();else{let a=oM("iframefcb");return Sr()[a]=()=>{gapi.load?s():t(ir(n,"network-request-failed"))},a$(`${c$()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw hp=null,e})}var hp=null;function J$(n){return hp=hp||Z$(n),hp}var X$=new ls(5e3,15e3),e4="__/auth/iframe",t4="emulator/auth/iframe",n4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i4(n){let e=n.config;oe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?gI(e,t4):`https://${n.config.authDomain}/${e4}`,r={apiKey:e.apiKey,appName:n.name,v:Zi},i=r4.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Fa(r).slice(1)}`}async function o4(n){let e=await J$(n),t=Sr().gapi;return oe(t,n,"internal-error"),e.open({where:document.body,url:i4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:n4,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=ir(n,"network-request-failed"),a=Sr().setTimeout(()=>{o(s)},X$.get());function u(){Sr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var s4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},a4=500,c4=600,u4="_blank",l4="http://localhost",Tp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function d4(n,e,t,r=a4,i=c4){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},s4),{width:r.toString(),height:i.toString(),top:o,left:s}),l=bt().toLowerCase();t&&(a=JN(l)?u4:t),YN(l)&&(e=e||l4,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,I])=>`${g}${y}=${I},`,"");if(n$(l)&&a!=="_self")return h4(e||"",a),new Tp(null);let p=window.open(e||"",a,h);oe(p,n,"popup-blocked");try{p.focus()}catch{}return new Tp(p)}function h4(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var f4="__/auth/handler",p4="emulator/auth/handler",g4=encodeURIComponent("fac");async function UN(n,e,t,r,i,o){oe(n.config.authDomain,n,"auth-domain-config-required"),oe(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Zi,eventId:i};if(e instanceof gl){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",qR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Ep){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await n._getAppCheckToken(),l=u?`#${g4}=${encodeURIComponent(u)}`:"";return`${m4(n)}?${Fa(a).slice(1)}${l}`}function m4({config:n}){return n.emulator?gI(n,p4):`https://${n.authDomain}/${f4}`}var JE="webStorageSupport",dI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AI,this._completeRedirectFn=H$,this._overrideRedirectResult=j$}async _openPopup(e,t,r,i){var o;li((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await UN(e,t,r,XE(),i);return d4(e,s,RI())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await UN(e,t,r,XE(),i);return w$(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(li(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await o4(e),r=new lI(e);return t.register("authEvent",i=>(oe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(JE,{type:JE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[JE];s!==void 0&&t(!!s),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=K$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rM()||ZN()||EI()}},gM=dI;var BN="@firebase/auth",HN="1.10.8";var hI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function y4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function v4(n){nr(new nn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;oe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iM(n)},l=new oI(r,i,o,u);return u$(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),nr(new nn("auth-internal",e=>{let t=Cp(e.getProvider("auth").getImmediate());return(r=>new hI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ze(BN,HN,y4(n)),Ze(BN,HN,"esm2017")}var _4=5*60,E4=bE("authIdTokenMaxAge")||_4,$N=null,I4=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>E4)return;let i=t?.token;$N!==i&&($N=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function MI(n=os()){let e=La(n,"auth");if(e.isInitialized())return e.getImmediate();let t=wI(n,{popupRedirectResolver:gM,persistence:[hM,cM,AI]}),r=bE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=I4(o.toString());CI(t,s,()=>s(t.currentUser)),TI(t,a=>s(a))}}let i=IE("auth");return i&&bI(t,`http://${i}`),t}function w4(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}s$({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ir("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",w4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});v4("Browser");var mM="auth",di=class{constructor(e){return e}},vl=class{constructor(){return ja(mM)}};var xI=new U("angularfire2.auth-instances");function f3(n,e){let t=ol(mM,n,e);return t&&new di(t)}function p3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new di(r)}}var g3={provide:vl,deps:[[new un,xI]]},m3={provide:di,useFactory:f3,deps:[[new un,xI],ai]};function Pae(n,...e){return Ze("angularfire",Ji.full,"auth"),_n([m3,g3,{provide:xI,useFactory:p3(n),multi:!0,deps:[Ae,ze,Xi,as,[new un,Ha],...e]}])}var kae=Ht(MI,!0);var yM=Ht(NI,!0,2);var vM=Ht(SI,!0,2);var _M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},EM={};var hi,PI;(function(){var n;function e(b,v){function E(){}E.prototype=v.prototype,b.D=v.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(w,D,C){for(var _=Array(arguments.length-2),Hr=2;Hr<arguments.length;Hr++)_[Hr-2]=arguments[Hr];return v.prototype[D].apply(w,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,E){E||(E=0);var w=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)w[D]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(D=0;16>D;++D)w[D]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=b.g[0],E=b.g[1],D=b.g[2];var C=b.g[3],_=v+(C^E&(D^C))+w[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+w[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+w[2]+606105819&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+w[3]+3250441966&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(C^E&(D^C))+w[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+w[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+w[6]+2821735955&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+w[7]+4249261313&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(C^E&(D^C))+w[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+w[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+w[10]+4294925233&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+w[11]+2304563134&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(C^E&(D^C))+w[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(D^v&(E^D))+w[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=D+(E^C&(v^E))+w[14]+2792965006&4294967295,D=C+(_<<17&4294967295|_>>>15),_=E+(v^D&(C^v))+w[15]+1236535329&4294967295,E=D+(_<<22&4294967295|_>>>10),_=v+(D^C&(E^D))+w[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+w[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+w[11]+643717713&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+w[0]+3921069994&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(E^D))+w[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+w[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+w[15]+3634488961&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+w[4]+3889429448&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(E^D))+w[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+w[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+w[3]+4107603335&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+w[8]+1163531501&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(D^C&(E^D))+w[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^D&(v^E))+w[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=D+(v^E&(C^v))+w[7]+1735328473&4294967295,D=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(D^C))+w[12]+2368359562&4294967295,E=D+(_<<20&4294967295|_>>>12),_=v+(E^D^C)+w[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+w[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+w[11]+1839030562&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+w[14]+4259657740&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^C)+w[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+w[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+w[7]+4139469664&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+w[10]+3200236656&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^C)+w[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+w[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+w[3]+3572445317&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+w[6]+76029189&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(E^D^C)+w[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^D)+w[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=D+(C^v^E)+w[15]+530742520&4294967295,D=C+(_<<16&4294967295|_>>>16),_=E+(D^C^v)+w[2]+3299628645&4294967295,E=D+(_<<23&4294967295|_>>>9),_=v+(D^(E|~C))+w[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+w[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+w[14]+2878612391&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+w[5]+4237533241&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~C))+w[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+w[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+w[10]+4293915773&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+w[1]+2240044497&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~C))+w[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+w[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+w[6]+2734768916&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+w[13]+1309151649&4294967295,E=D+(_<<21&4294967295|_>>>11),_=v+(D^(E|~C))+w[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~D))+w[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=D+(v^(C|~E))+w[2]+718787259&4294967295,D=C+(_<<15&4294967295|_>>>17),_=E+(C^(D|~v))+w[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+C&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var E=v-this.blockSize,w=this.B,D=this.h,C=0;C<v;){if(D==0)for(;C<=E;)i(this,b,C),C+=this.blockSize;if(typeof b=="string"){for(;C<v;)if(w[D++]=b.charCodeAt(C++),D==this.blockSize){i(this,w),D=0;break}}else for(;C<v;)if(w[D++]=b[C++],D==this.blockSize){i(this,w),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var E=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=E&255,E/=256;for(this.u(b),b=Array(16),v=E=0;4>v;++v)for(var w=0;32>w;w+=8)b[E++]=this.g[v]>>>w&255;return b};function o(b,v){var E=a;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=v(b)}function s(b,v){this.h=v;for(var E=[],w=!0,D=b.length-1;0<=D;D--){var C=b[D]|0;w&&C==v||(E[D]=C,w=!1)}this.g=E}var a={};function u(b){return-128<=b&&128>b?o(b,function(v){return new s([v|0],0>v?-1:0)}):new s([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return N(l(-b));for(var v=[],E=1,w=0;b>=E;w++)v[w]=b/E|0,E*=4294967296;return new s(v,0)}function h(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return N(h(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),w=p,D=0;D<b.length;D+=8){var C=Math.min(8,b.length-D),_=parseInt(b.substring(D,D+C),v);8>C?(C=l(Math.pow(v,C)),w=w.j(C).add(l(_))):(w=w.j(E),w=w.add(l(_)))}return w}var p=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-N(this).m();for(var b=0,v=1,E=0;E<this.g.length;E++){var w=this.i(E);b+=(0<=w?w:4294967296+w)*v,v*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I(this))return"0";if(A(this))return"-"+N(this).toString(b);for(var v=l(Math.pow(b,6)),E=this,w="";;){var D=Me(E,v).g;E=k(E,D.j(v));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=D,I(E))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function I(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function A(b){return b.h==-1}n.l=function(b){return b=k(this,b),A(b)?-1:I(b)?0:1};function N(b){for(var v=b.g.length,E=[],w=0;w<v;w++)E[w]=~b.g[w];return new s(E,~b.h).add(g)}n.abs=function(){return A(this)?N(this):this},n.add=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],w=0,D=0;D<=v;D++){var C=w+(this.i(D)&65535)+(b.i(D)&65535),_=(C>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);w=_>>>16,C&=65535,_&=65535,E[D]=_<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(b,v){return b.add(N(v))}n.j=function(b){if(I(this)||I(b))return p;if(A(this))return A(b)?N(this).j(N(b)):N(N(this).j(b));if(A(b))return N(this.j(N(b)));if(0>this.l(y)&&0>b.l(y))return l(this.m()*b.m());for(var v=this.g.length+b.g.length,E=[],w=0;w<2*v;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var D=0;D<b.g.length;D++){var C=this.i(w)>>>16,_=this.i(w)&65535,Hr=b.i(D)>>>16,jc=b.i(D)&65535;E[2*w+2*D]+=_*jc,z(E,2*w+2*D),E[2*w+2*D+1]+=C*jc,z(E,2*w+2*D+1),E[2*w+2*D+1]+=_*Hr,z(E,2*w+2*D+1),E[2*w+2*D+2]+=C*Hr,z(E,2*w+2*D+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function z(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function te(b,v){this.g=b,this.h=v}function Me(b,v){if(I(v))throw Error("division by zero");if(I(b))return new te(p,p);if(A(b))return v=Me(N(b),v),new te(N(v.g),N(v.h));if(A(v))return v=Me(b,N(v)),new te(N(v.g),v.h);if(30<b.g.length){if(A(b)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,w=v;0>=w.l(b);)E=et(E),w=et(w);var D=ke(E,1),C=ke(w,1);for(w=ke(w,2),E=ke(E,2);!I(w);){var _=C.add(w);0>=_.l(b)&&(D=D.add(E),C=_),w=ke(w,1),E=ke(E,1)}return v=k(b,D.j(v)),new te(D,v)}for(D=p;0<=b.l(v);){for(E=Math.max(1,Math.floor(b.m()/v.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=l(E),_=C.j(v);A(_)||0<_.l(b);)E-=w,C=l(E),_=C.j(v);I(C)&&(C=g),D=D.add(C),b=k(b,_)}return new te(D,b)}n.A=function(b){return Me(this,b).h},n.and=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)&b.i(w);return new s(E,this.h&b.h)},n.or=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)|b.i(w);return new s(E,this.h|b.h)},n.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),E=[],w=0;w<v;w++)E[w]=this.i(w)^b.i(w);return new s(E,this.h^b.h)};function et(b){for(var v=b.g.length+1,E=[],w=0;w<v;w++)E[w]=b.i(w)<<1|b.i(w-1)>>>31;return new s(E,b.h)}function ke(b,v){var E=v>>5;v%=32;for(var w=b.g.length-E,D=[],C=0;C<w;C++)D[C]=0<v?b.i(C+E)>>>v|b.i(C+E+1)<<32-v:b.i(C+E);return new s(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PI=EM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,hi=EM.Integer=s}).apply(typeof _M<"u"?_M:typeof self<"u"?self:typeof window<"u"?window:{});var Ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fi={};var kI,y3,za,OI,_l,Rp,FI,LI,VI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ap=="object"&&Ap];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var T=c[m];if(!(T in f))break e;f=f[T]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,T={next:function(){if(!m&&f<c.length){var R=f++;return{value:d(R,c[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function I(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,T,R){for(var O=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)O[Fe-2]=arguments[Fe];return d.prototype[T].apply(m,O)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let T=c.length||0,R=m.length||0;c.length=T+R;for(let O=0;O<R;O++)c[T+O]=m[O]}else c.push(m)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function z(c){return/^[\s\xa0]*$/.test(c)}function te(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Me(c){return Me[" "](c),c}Me[" "]=function(){};var et=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function ke(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function b(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(c,d){let f,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(f in m)c[f]=m[f];for(let R=0;R<E.length;R++)f=E[R],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function _(){var c=xm;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Hr{constructor(){this.h=this.g=null}add(d,f){let m=jc.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var jc=new k(()=>new W1,c=>c.reset());class W1{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Uc,Bc=!1,xm=new Hr,tD=()=>{let c=a.Promise.resolve(void 0);Uc=()=>{c.then(K1)}};var K1=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){C(f)}var d=jc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Bc=!1};function Di(){this.s=this.s,this.C=this.C}Di.prototype.s=!1,Di.prototype.ma=function(){this.s||(this.s=!0,this.N())},Di.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var Q1=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Hc(c,d){if(Pt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(et){e:{try{Me(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Y1[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Hc.aa.h.call(this)}}I(Hc,Pt);var Y1={2:"touch",3:"pen",4:"mouse"};Hc.prototype.h=function(){Hc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var $c="closure_listenable_"+(1e6*Math.random()|0),Z1=0;function J1(c,d,f,m,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=T,this.key=++Z1,this.da=this.fa=!1}function _d(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ed(c){this.src=c,this.g={},this.h=0}Ed.prototype.add=function(c,d,f,m,T){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var O=km(c,d,m,T);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new J1(d,this.src,R,!!m,T),d.fa=f,c.push(d)),d};function Pm(c,d){var f=d.type;if(f in c.g){var m=c.g[f],T=Array.prototype.indexOf.call(m,d,void 0),R;(R=0<=T)&&Array.prototype.splice.call(m,T,1),R&&(_d(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function km(c,d,f,m){for(var T=0;T<c.length;++T){var R=c[T];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==m)return T}return-1}var Om="closure_lm_"+(1e6*Math.random()|0),Fm={};function nD(c,d,f,m,T){if(m&&m.once)return iD(c,d,f,m,T);if(Array.isArray(d)){for(var R=0;R<d.length;R++)nD(c,d[R],f,m,T);return null}return f=Um(f),c&&c[$c]?c.K(d,f,l(m)?!!m.capture:!!m,T):rD(c,d,f,!1,m,T)}function rD(c,d,f,m,T,R){if(!d)throw Error("Invalid event type");var O=l(T)?!!T.capture:!!T,Fe=Vm(c);if(Fe||(c[Om]=Fe=new Ed(c)),f=Fe.add(d,f,m,O,R),f.proxy)return f;if(m=X1(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)Q1||(T=O),T===void 0&&(T=!1),c.addEventListener(d.toString(),m,T);else if(c.attachEvent)c.attachEvent(sD(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function X1(){function c(f){return d.call(c.src,c.listener,f)}let d=eO;return c}function iD(c,d,f,m,T){if(Array.isArray(d)){for(var R=0;R<d.length;R++)iD(c,d[R],f,m,T);return null}return f=Um(f),c&&c[$c]?c.L(d,f,l(m)?!!m.capture:!!m,T):rD(c,d,f,!0,m,T)}function oD(c,d,f,m,T){if(Array.isArray(d))for(var R=0;R<d.length;R++)oD(c,d[R],f,m,T);else m=l(m)?!!m.capture:!!m,f=Um(f),c&&c[$c]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],f=km(R,f,m,T),-1<f&&(_d(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=Vm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=km(d,f,m,T)),(f=-1<c?d[c]:null)&&Lm(f))}function Lm(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[$c])Pm(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(sD(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Vm(d))?(Pm(f,c),f.h==0&&(f.src=null,d[Om]=null)):_d(c)}}}function sD(c){return c in Fm?Fm[c]:Fm[c]="on"+c}function eO(c,d){if(c.da)c=!0;else{d=new Hc(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&Lm(c),c=f.call(m,d)}return c}function Vm(c){return c=c[Om],c instanceof Ed?c:null}var jm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Um(c){return typeof c=="function"?c:(c[jm]||(c[jm]=function(d){return c.handleEvent(d)}),c[jm])}function kt(){Di.call(this),this.i=new Ed(this),this.M=this,this.F=null}I(kt,Di),kt.prototype[$c]=!0,kt.prototype.removeEventListener=function(c,d,f,m){oD(this,c,d,f,m)};function zt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Pt(d,c);else if(d instanceof Pt)d.target=d.target||c;else{var T=d;d=new Pt(m,c),w(d,T)}if(T=!0,f)for(var R=f.length-1;0<=R;R--){var O=d.g=f[R];T=Id(O,m,!0,d)&&T}if(O=d.g=c,T=Id(O,m,!0,d)&&T,T=Id(O,m,!1,d)&&T,f)for(R=0;R<f.length;R++)O=d.g=f[R],T=Id(O,m,!1,d)&&T}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)_d(f[m]);delete c.g[d],c.h--}}this.F=null},kt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},kt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Id(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,R=0;R<d.length;++R){var O=d[R];if(O&&!O.da&&O.capture==f){var Fe=O.listener,Nt=O.ha||O.src;O.fa&&Pm(c.i,O),T=Fe.call(Nt,m)!==!1&&T}}return T&&!m.defaultPrevented}function aD(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function cD(c){c.g=aD(()=>{c.g=null,c.i&&(c.i=!1,cD(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class tO extends Di{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:cD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qc(c){Di.call(this),this.h=c,this.g={}}I(qc,Di);var uD=[];function lD(c){ke(c.g,function(d,f){this.g.hasOwnProperty(f)&&Lm(d)},c),c.g={}}qc.prototype.N=function(){qc.aa.N.call(this),lD(this)},qc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bm=a.JSON.stringify,nO=a.JSON.parse,rO=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Hm(){}Hm.prototype.h=null;function dD(c){return c.h||(c.h=c.i())}function hD(){}var zc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $m(){Pt.call(this,"d")}I($m,Pt);function qm(){Pt.call(this,"c")}I(qm,Pt);var Eo={},fD=null;function wd(){return fD=fD||new kt}Eo.La="serverreachability";function pD(c){Pt.call(this,Eo.La,c)}I(pD,Pt);function Gc(c){let d=wd();zt(d,new pD(d))}Eo.STAT_EVENT="statevent";function gD(c,d){Pt.call(this,Eo.STAT_EVENT,c),this.stat=d}I(gD,Pt);function Gt(c){let d=wd();zt(d,new gD(d,c))}Eo.Ma="timingevent";function mD(c,d){Pt.call(this,Eo.Ma,c),this.size=d}I(mD,Pt);function Wc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Kc(){this.g=!0}Kc.prototype.xa=function(){this.g=!1};function iO(c,d,f,m,T,R){c.info(function(){if(c.g)if(R)for(var O="",Fe=R.split("&"),Nt=0;Nt<Fe.length;Nt++){var Se=Fe[Nt].split("=");if(1<Se.length){var Ot=Se[0];Se=Se[1];var Ft=Ot.split("_");O=2<=Ft.length&&Ft[1]=="type"?O+(Ot+"="+Se+"&"):O+(Ot+"=redacted&")}}else O=null;else O=R;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+d+`
`+f+`
`+O})}function oO(c,d,f,m,T,R,O){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+d+`
`+f+`
`+R+" "+O})}function ks(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+aO(c,f)+(m?" "+m:"")})}function sO(c,d){c.info(function(){return"TIMEOUT: "+d})}Kc.prototype.info=function(){};function aO(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var R=T[0];if(R!="noop"&&R!="stop"&&R!="close")for(var O=1;O<T.length;O++)T[O]=""}}}}return Bm(f)}catch{return d}}var bd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zm;function Dd(){}I(Dd,Hm),Dd.prototype.g=function(){return new XMLHttpRequest},Dd.prototype.i=function(){return{}},zm=new Dd;function Ti(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new qc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vD}function vD(){this.i=null,this.g="",this.h=!1}var _D={},Gm={};function Wm(c,d,f){c.L=1,c.v=Ad($r(d)),c.m=f,c.P=!0,ED(c,null)}function ED(c,d){c.F=Date.now(),Td(c),c.A=$r(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),kD(f.i,"t",m),c.C=0,f=c.j.J,c.h=new vD,c.g=JD(c.j,f?d:null,!c.m),0<c.O&&(c.M=new tO(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(uD[0]=T.toString()),T=uD);for(var R=0;R<T.length;R++){var O=nD(f,T[R],m||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Gc(),iO(c.i,c.u,c.A,c.l,c.R,c.m)}Ti.prototype.ca=function(c){c=c.target;let d=this.M;d&&qr(c)==3?d.j():this.Y(c)},Ti.prototype.Y=function(c){try{if(c==this.g)e:{let Ft=qr(this.g);var d=this.g.Ba();let Ls=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||BD(this.g)))){this.J||Ft!=4||d==7||(d==8||0>=Ls?Gc(3):Gc(2)),Km(this);var f=this.g.Z();this.X=f;t:if(ID(this)){var m=BD(this.g);c="";var T=m.length,R=qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Io(this),Qc(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(R&&d==T-1)});m.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,oO(this.i,this.u,this.A,this.l,this.R,Ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Nt=this.g;if((Fe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Fe)){var Se=Fe;break t}}Se=null}if(f=Se)ks(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qm(this,f);else{this.o=!1,this.s=3,Gt(12),Io(this),Qc(this);break e}}if(this.P){f=!0;let qn;for(;!this.J&&this.C<O.length;)if(qn=cO(this,O),qn==Gm){Ft==4&&(this.s=4,Gt(14),f=!1),ks(this.i,this.l,null,"[Incomplete Response]");break}else if(qn==_D){this.s=4,Gt(15),ks(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else ks(this.i,this.l,qn,null),Qm(this,qn);if(ID(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||O.length!=0||this.h.h||(this.s=1,Gt(16),f=!1),this.o=this.o&&f,!f)ks(this.i,this.l,O,"[Invalid Chunked Response]"),Io(this),Qc(this);else if(0<O.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),ty(Ot),Ot.M=!0,Gt(11))}}else ks(this.i,this.l,O,null),Qm(this,O);Ft==4&&Io(this),this.o&&!this.J&&(Ft==4?KD(this.j,this):(this.o=!1,Td(this)))}else TO(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),Io(this),Qc(this)}}}catch{}finally{}};function ID(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function cO(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Gm:(f=Number(d.substring(f,m)),isNaN(f)?_D:(m+=1,m+f>d.length?Gm:(d=d.slice(m,m+f),c.C=m+f,d)))}Ti.prototype.cancel=function(){this.J=!0,Io(this)};function Td(c){c.S=Date.now()+c.I,wD(c,c.I)}function wD(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Wc(g(c.ba,c),d)}function Km(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ti.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(sO(this.i,this.A),this.L!=2&&(Gc(),Gt(17)),Io(this),this.s=2,Qc(this)):wD(this,this.S-c)};function Qc(c){c.j.G==0||c.J||KD(c.j,c)}function Io(c){Km(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,lD(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Qm(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Ym(f.h,c))){if(!c.K&&Ym(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Pd(f),Md(f);else break e;ey(f),Gt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Wc(g(f.Za,f),6e3));if(1>=TD(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else bo(f,11)}else if((c.K||f.g==c)&&Pd(f),!z(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let Se=T[d];if(f.T=Se[0],Se=Se[1],f.G==2)if(Se[0]=="c"){f.K=Se[1],f.ia=Se[2];let Ot=Se[3];Ot!=null&&(f.la=Ot,f.j.info("VER="+f.la));let Ft=Se[4];Ft!=null&&(f.Aa=Ft,f.j.info("SVER="+f.Aa));let Ls=Se[5];Ls!=null&&typeof Ls=="number"&&0<Ls&&(m=1.5*Ls,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let qn=c.g;if(qn){let Od=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Od){var R=m.h;R.g||Od.indexOf("spdy")==-1&&Od.indexOf("quic")==-1&&Od.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Zm(R,R.h),R.h=null))}if(m.D){let ny=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;ny&&(m.ya=ny,Ue(m.I,m.D,ny))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=c;if(m.qa=ZD(m,m.J?m.ia:null,m.W),O.K){CD(m.h,O);var Fe=O,Nt=m.L;Nt&&(Fe.I=Nt),Fe.B&&(Km(Fe),Td(Fe)),m.g=O}else GD(m);0<f.i.length&&xd(f)}else Se[0]!="stop"&&Se[0]!="close"||bo(f,7);else f.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?bo(f,7):Xm(f):Se[0]!="noop"&&f.l&&f.l.ta(Se),f.v=0)}}Gc(4)}catch{}}var uO=class{constructor(c,d){this.g=c,this.map=d}};function bD(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function DD(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function TD(c){return c.h?1:c.g?c.g.size:0}function Ym(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Zm(c,d){c.g?c.g.add(d):c.h=d}function CD(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}bD.prototype.cancel=function(){if(this.i=SD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function SD(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function lO(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function dO(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function AD(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=dO(c),m=lO(c),T=m.length,R=0;R<T;R++)d.call(void 0,m[R],f&&f[R],c)}var RD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hO(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),T=null;if(0<=m){var R=c[f].substring(0,m);T=c[f].substring(m+1)}else R=c[f];d(R,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function wo(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof wo){this.h=c.h,Cd(this,c.j),this.o=c.o,this.g=c.g,Sd(this,c.s),this.l=c.l;var d=c.i,f=new Jc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),ND(this,f),this.m=c.m}else c&&(d=String(c).match(RD))?(this.h=!1,Cd(this,d[1]||"",!0),this.o=Yc(d[2]||""),this.g=Yc(d[3]||"",!0),Sd(this,d[4]),this.l=Yc(d[5]||"",!0),ND(this,d[6]||"",!0),this.m=Yc(d[7]||"")):(this.h=!1,this.i=new Jc(null,this.h))}wo.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Zc(d,MD,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Zc(d,MD,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Zc(f,f.charAt(0)=="/"?gO:pO,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Zc(f,yO)),c.join("")};function $r(c){return new wo(c)}function Cd(c,d,f){c.j=f?Yc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Sd(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function ND(c,d,f){d instanceof Jc?(c.i=d,vO(c.i,c.h)):(f||(d=Zc(d,mO)),c.i=new Jc(d,c.h))}function Ue(c,d,f){c.i.set(d,f)}function Ad(c){return Ue(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Yc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Zc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,fO),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function fO(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var MD=/[#\/\?@]/g,pO=/[#\?:]/g,gO=/[#\?]/g,mO=/[#\?@]/g,yO=/#/g;function Jc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ci(c){c.g||(c.g=new Map,c.h=0,c.i&&hO(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Jc.prototype,n.add=function(c,d){Ci(this),this.i=null,c=Os(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function xD(c,d){Ci(c),d=Os(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function PD(c,d){return Ci(c),d=Os(c,d),c.g.has(d)}n.forEach=function(c,d){Ci(this),this.g.forEach(function(f,m){f.forEach(function(T){c.call(d,T,m,this)},this)},this)},n.na=function(){Ci(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let T=c[m];for(let R=0;R<T.length;R++)f.push(d[m])}return f},n.V=function(c){Ci(this);let d=[];if(typeof c=="string")PD(this,c)&&(d=d.concat(this.g.get(Os(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Ci(this),this.i=null,c=Os(this,c),PD(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function kD(c,d,f){xD(c,d),0<f.length&&(c.i=null,c.g.set(Os(c,d),A(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let R=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var T=R;O[m]!==""&&(T+="="+encodeURIComponent(String(O[m]))),c.push(T)}}return this.i=c.join("&")};function Os(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function vO(c,d){d&&!c.j&&(Ci(c),c.i=null,c.g.forEach(function(f,m){var T=m.toLowerCase();m!=T&&(xD(this,m),kD(this,T,f))},c)),c.j=d}function _O(c,d){let f=new Kc;if(a.Image){let m=new Image;m.onload=y(Si,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Si,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Si,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Si,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function EO(c,d){let f=new Kc,m=new AbortController,T=setTimeout(()=>{m.abort(),Si(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(R=>{clearTimeout(T),R.ok?Si(f,"TestPingServer: ok",!0,d):Si(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Si(f,"TestPingServer: error",!1,d)})}function Si(c,d,f,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(f)}catch{}}function IO(){this.g=new rO}function wO(c,d,f){let m=f||"";try{AD(c,function(T,R){let O=T;l(T)&&(O=Bm(T)),d.push(m+R+"="+encodeURIComponent(O))})}catch(T){throw d.push(m+"type="+encodeURIComponent("_badmap")),T}}function Xc(c){this.l=c.Ub||null,this.j=c.eb||!1}I(Xc,Hm),Xc.prototype.g=function(){return new Rd(this.l,this.j)},Xc.prototype.i=function(c){return function(){return c}}({});function Rd(c,d){kt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Rd,kt),n=Rd.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,tu(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,eu(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,tu(this)),this.g&&(this.readyState=3,tu(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;OD(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function OD(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?eu(this):tu(this),this.readyState==3&&OD(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,eu(this))},n.Qa=function(c){this.g&&(this.response=c,eu(this))},n.ga=function(){this.g&&eu(this)};function eu(c){c.readyState=4,c.l=null,c.j=null,c.v=null,tu(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function tu(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Rd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function FD(c){let d="";return ke(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Jm(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=FD(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ue(c,d,f))}function We(c){kt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(We,kt);var bO=/^https?$/i,DO=["POST","PUT"];n=We.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zm.g(),this.v=this.o?dD(this.o):dD(zm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){LD(this,R);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)f.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(DO,d,void 0))||m||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,O]of f)this.g.setRequestHeader(R,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{UD(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){LD(this,R)}};function LD(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,VD(c),Nd(c)}function VD(c){c.A||(c.A=!0,zt(c,"complete"),zt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,zt(this,"complete"),zt(this,"abort"),Nd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nd(this,!0)),We.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?jD(this):this.bb())},n.bb=function(){jD(this)};function jD(c){if(c.h&&typeof s<"u"&&(!c.v[1]||qr(c)!=4||c.Z()!=2)){if(c.u&&qr(c)==4)aD(c.Ea,0,c);else if(zt(c,"readystatechange"),qr(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=O===0){var T=String(c.D).match(RD)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),m=!bO.test(T?T.toLowerCase():"")}f=m}if(f)zt(c,"complete"),zt(c,"success");else{c.m=6;try{var R=2<qr(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",VD(c)}}finally{Nd(c)}}}}function Nd(c,d){if(c.g){UD(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||zt(c,"ready");try{f.onreadystatechange=m}catch{}}}function UD(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function qr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),nO(d)}};function BD(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function TO(c){let d={};c=(c.g&&2<=qr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(z(c[m]))continue;var f=D(c[m]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[T]||[];d[T]=R,R.push(f)}b(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function nu(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function HD(c){this.Aa=0,this.i=[],this.j=new Kc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=nu("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=nu("baseRetryDelayMs",5e3,c),this.cb=nu("retryDelaySeedMs",1e4,c),this.Wa=nu("forwardChannelMaxRetries",2,c),this.wa=nu("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bD(c&&c.concurrentRequestLimit),this.Da=new IO,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=HD.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){Gt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=ZD(this,null,this.W),xd(this)};function Xm(c){if($D(c),c.G==3){var d=c.U++,f=$r(c.I);if(Ue(f,"SID",c.K),Ue(f,"RID",d),Ue(f,"TYPE","terminate"),ru(c,f),d=new Ti(c,c.j,d),d.L=2,d.v=Ad($r(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=JD(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Td(d)}YD(c)}function Md(c){c.g&&(ty(c),c.g.cancel(),c.g=null)}function $D(c){Md(c),c.u&&(a.clearTimeout(c.u),c.u=null),Pd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function xd(c){if(!DD(c.h)&&!c.s){c.s=!0;var d=c.Ga;Uc||tD(),Bc||(Uc(),Bc=!0),xm.add(d,c),c.B=0}}function CO(c,d){return TD(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Wc(g(c.Ga,c,d),QD(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new Ti(this,this.j,c),R=this.o;if(this.S&&(R?(R=v(R),w(R,this.S)):R=this.S),this.m!==null||this.O||(T.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=zD(this,T,d),f=$r(this.I),Ue(f,"RID",c),Ue(f,"CVER",22),this.D&&Ue(f,"X-HTTP-Session-Id",this.D),ru(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(FD(R)))+"&"+d:this.m&&Jm(f,this.m,R)),Zm(this.h,T),this.Ua&&Ue(f,"TYPE","init"),this.P?(Ue(f,"$req",d),Ue(f,"SID","null"),T.T=!0,Wm(T,f,null)):Wm(T,f,d),this.G=2}}else this.G==3&&(c?qD(this,c):this.i.length==0||DD(this.h)||qD(this))};function qD(c,d){var f;d?f=d.l:f=c.U++;let m=$r(c.I);Ue(m,"SID",c.K),Ue(m,"RID",f),Ue(m,"AID",c.T),ru(c,m),c.m&&c.o&&Jm(m,c.m,c.o),f=new Ti(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=zD(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Zm(c.h,f),Wm(f,m,d)}function ru(c,d){c.H&&ke(c.H,function(f,m){Ue(d,m,f)}),c.l&&AD({},function(f,m){Ue(d,m,f)})}function zD(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var T=c.i;let R=-1;for(;;){let O=["count="+f];R==-1?0<f?(R=T[0].g,O.push("ofs="+R)):R=0:O.push("ofs="+R);let Fe=!0;for(let Nt=0;Nt<f;Nt++){let Se=T[Nt].g,Ot=T[Nt].map;if(Se-=R,0>Se)R=Math.max(0,T[Nt].g-100),Fe=!1;else try{wO(Ot,O,"req"+Se+"_")}catch{m&&m(Ot)}}if(Fe){m=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function GD(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Uc||tD(),Bc||(Uc(),Bc=!0),xm.add(d,c),c.v=0}}function ey(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Wc(g(c.Fa,c),QD(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,WD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Wc(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),Md(this),WD(this))};function ty(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function WD(c){c.g=new Ti(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=$r(c.qa);Ue(d,"RID","rpc"),Ue(d,"SID",c.K),Ue(d,"AID",c.T),Ue(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ue(d,"TO",c.ja),Ue(d,"TYPE","xmlhttp"),ru(c,d),c.m&&c.o&&Jm(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Ad($r(d)),f.m=null,f.P=!0,ED(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Md(this),ey(this),Gt(19))};function Pd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function KD(c,d){var f=null;if(c.g==d){Pd(c),ty(c),c.g=null;var m=2}else if(Ym(c.h,d))f=d.D,CD(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;m=wd(),zt(m,new mD(m,f)),xd(c)}else GD(c);else if(T=d.s,T==3||T==0&&0<d.X||!(m==1&&CO(c,d)||m==2&&ey(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:bo(c,5);break;case 4:bo(c,10);break;case 3:bo(c,6);break;default:bo(c,2)}}}function QD(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function bo(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let T=!m;m=new wo(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Cd(m,"https"),Ad(m),T?_O(m.toString(),f):EO(m.toString(),f)}else Gt(2);c.G=0,c.l&&c.l.sa(d),YD(c),$D(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function YD(c){if(c.G=0,c.ka=[],c.l){let d=SD(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function ZD(c,d,f){var m=f instanceof wo?$r(f):new wo(f);if(m.g!="")d&&(m.g=d+"."+m.g),Sd(m,m.s);else{var T=a.location;m=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var R=new wo(null);m&&Cd(R,m),d&&(R.g=d),T&&Sd(R,T),f&&(R.l=f),m=R}return f=c.D,d=c.ya,f&&d&&Ue(m,f,d),Ue(m,"VER",c.la),ru(c,m),m}function JD(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new We(new Xc({eb:f})):new We(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function XD(){}n=XD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function kd(){}kd.prototype.g=function(c,d){return new gn(c,d)};function gn(c,d){kt.call(this),this.g=new HD(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Fs(this)}I(gn,kt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Xm(this.g)},gn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Bm(c),c=f);d.i.push(new uO(d.Ya++,c)),d.G==3&&xd(d)},gn.prototype.N=function(){this.g.l=null,delete this.j,Xm(this.g),delete this.g,gn.aa.N.call(this)};function eT(c){$m.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}I(eT,$m);function tT(){qm.call(this),this.status=1}I(tT,qm);function Fs(c){this.g=c}I(Fs,XD),Fs.prototype.ua=function(){zt(this.g,"a")},Fs.prototype.ta=function(c){zt(this.g,new eT(c))},Fs.prototype.sa=function(c){zt(this.g,new tT)},Fs.prototype.ra=function(){zt(this.g,"b")},kd.prototype.createWebChannel=kd.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,VI=fi.createWebChannelTransport=function(){return new kd},LI=fi.getStatEventTarget=function(){return wd()},FI=fi.Event=Eo,Rp=fi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bd.NO_ERROR=0,bd.TIMEOUT=8,bd.HTTP_ERROR=6,_l=fi.ErrorCode=bd,yD.COMPLETE="complete",OI=fi.EventType=yD,hD.EventType=zc,zc.OPEN="a",zc.CLOSE="b",zc.ERROR="c",zc.MESSAGE="d",kt.prototype.listen=kt.prototype.K,za=fi.WebChannel=hD,y3=fi.FetchXmlHttpFactory=Xc,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,kI=fi.XhrIo=We}).apply(typeof Ap<"u"?Ap:typeof self<"u"?self:typeof window<"u"?window:{});var IM="@firebase/firestore",wM="4.8.0";var Dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");var hc="11.10.0";var ys=new Tr("@firebase/firestore");function Ga(){return ys.logLevel}function V(n,...e){if(ys.logLevel<=Ie.DEBUG){let t=e.map(Sb);ys.debug(`Firestore (${hc}): ${n}`,...t)}}function pi(n,...e){if(ys.logLevel<=Ie.ERROR){let t=e.map(Sb);ys.error(`Firestore (${hc}): ${n}`,...t)}}function co(n,...e){if(ys.logLevel<=Ie.WARN){let t=e.map(Sb);ys.warn(`Firestore (${hc}): ${n}`,...t)}}function Sb(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ee(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,px(n,r,t)}function px(n,e,t){let r=`FIRESTORE (${hc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw pi(r),new Error(r)}function Pe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||px(e,i,r)}function ce(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Dn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Rr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Fp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},$I=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dt.UNAUTHENTICATED))}shutdown(){}},qI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zI=class{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pe(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new Fp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new Dt(e)}},GI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},WI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new GI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Lp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},KI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pe(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Lp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Lp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function v3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function gx(){return new TextEncoder}var Tl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=v3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function me(n,e){return n<e?-1:n>e?1:0}function QI(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return me(r,i);{let o=gx(),s=_3(o.encode(bM(n,t)),o.encode(bM(e,t)));return s!==0?s:me(r,i)}}t+=r>65535?2:1}return me(n.length,e.length)}function bM(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function _3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return me(n[t],e[t]);return me(n.length,e.length)}function Xa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var DM="__name__",Vp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return me(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):QI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hi.fromString(e.substring(4,e.length-2))}},$e=class n extends Vp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},E3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Sn=class n extends Vp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return E3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DM}static keyField(){return new n([DM])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var K=class n{constructor(e){this.path=e}static fromPath(e){return new n($e.fromString(e))}static fromName(e){return new n($e.fromString(e).popFirst(5))}static empty(){return new n($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return $e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new $e(e.slice()))}};function mx(n,e,t){if(!t)throw new L(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function I3(n,e,t,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TM(n){if(!K.isDocumentKey(n))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CM(n){if(K.isDocumentKey(n))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function mg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ee(12329,{type:typeof n})}function Un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=mg(n);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Vl(n,e){if(!yx(n))throw new L(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new L(M.INVALID_ARGUMENT,t);return!0}var SM=-62135596800,AM=1e6,qe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*AM);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<SM)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AM}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vl(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-SM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:mt("string",qe._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};var le=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new qe(0,0))}static max(){return new n(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Cl=-1,YI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};YI.UNKNOWN_ID=-1;function w3(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new qe(t+1,0):new qe(t,r));return new vs(i,K.empty(),e)}function b3(n){return new vs(n.readTime,n.key,Cl)}var vs=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(le.min(),K.empty(),Cl)}static max(){return new n(le.max(),K.empty(),Cl)}};function D3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=K.comparator(n.documentKey,e.documentKey),t!==0?t:me(n.largestBatchId,e.largestBatchId))}var T3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ZI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function fc(n){if(n.code!==M.FAILED_PRECONDITION||n.message!==T3)throw n;V("LocalStore","Unexpectedly lost primary lease")}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function C3(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function pc(n){return n.name==="IndexedDbTransactionError"}var Ab=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Rb=-1;function yg(n){return n==null}function Sl(n){return n===0&&1/n==-1/0}function S3(n){return typeof n=="number"&&Number.isInteger(n)&&!Sl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var vx="";function A3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=RM(e)),e=R3(n.get(t),e);return RM(e)}function R3(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case vx:t+="";break;default:t+=o}}return t}function RM(n){return n+vx+""}var N3="remoteDocuments",_x="owner";var Ex="mutationQueues";var Ix="mutations";var wx="documentMutations",M3="remoteDocumentsV14";var bx="remoteDocumentGlobal";var Dx="targets";var Tx="targetDocuments";var Cx="targetGlobal",Sx="collectionParents";var Ax="clientMetadata";var Rx="bundles";var Nx="namedQueries";var x3="indexConfiguration";var P3="indexState";var k3="indexEntries";var Mx="documentOverlays";var O3="globals";var F3=[Ex,Ix,wx,N3,Dx,_x,Cx,Tx,Ax,bx,Sx,Rx,Nx],Qae=[...F3,Mx],L3=[Ex,Ix,wx,M3,Dx,_x,Cx,Tx,Ax,bx,Sx,Rx,Nx,Mx],V3=L3,j3=[...V3,x3,P3,k3];var Yae=[...j3,O3];function NM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Je=class n{constructor(e,t){this.comparator=e,this.root=t||Nr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ya(this.root,e,this.comparator,!0)}},Ya=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}};Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1;Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Nr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Tt=class n{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jp(this.data.getIterator())}getIteratorFrom(e){return new jp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},jp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var jn=class n{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Tt(Sn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Up=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var qt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Up("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qt.EMPTY_BYTE_STRING=new qt("");var U3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(n){if(Pe(!!n,39018),typeof n=="string"){let e=0,t=U3.exec(n);if(Pe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mi(n){return typeof n=="string"?qt.fromBase64String(n):qt.fromUint8Array(n)}var Px="server_timestamp",kx="__type__",Ox="__previous_value__",Fx="__local_write_time__";function Nb(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[kx])===null||t===void 0?void 0:t.stringValue)===Px}function vg(n){let e=n.mapValue.fields[Ox];return Nb(e)?vg(e):e}function Al(n){let e=gi(n.mapValue.fields[Fx].timestampValue);return new qe(e.seconds,e.nanos)}var JI=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Bp="(default)",Hp=class n{constructor(e,t){this.projectId=e,this.database=t||Bp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Bp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Mb="__type__",Lx="__max__",Np={mapValue:{fields:{__type__:{stringValue:Lx}}}},xb="__vector__",ec="value";function uo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nb(n)?4:jx(n)?9007199254740991:Vx(n)?10:11:ee(28295,{value:n})}function kr(n,e){if(n===e)return!0;let t=uo(n);if(t!==uo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Al(n).isEqual(Al(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=gi(i.timestampValue),a=gi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return mi(i.bytesValue).isEqual(mi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return He(i.geoPointValue.latitude)===He(o.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return He(i.integerValue)===He(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=He(i.doubleValue),a=He(o.doubleValue);return s===a?Sl(s)===Sl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Xa(n.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(NM(s)!==NM(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!kr(s[u],a[u])))return!1;return!0}(n,e);default:return ee(52216,{left:n})}}function Rl(n,e){return(n.values||[]).find(t=>kr(t,e))!==void 0}function tc(n,e){if(n===e)return 0;let t=uo(n),r=uo(e);if(t!==r)return me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return me(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=He(o.integerValue||o.doubleValue),u=He(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return MM(n.timestampValue,e.timestampValue);case 4:return MM(Al(n),Al(e));case 5:return QI(n.stringValue,e.stringValue);case 6:return function(o,s){let a=mi(o),u=mi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=me(a[l],u[l]);if(h!==0)return h}return me(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=me(He(o.latitude),He(s.latitude));return a!==0?a:me(He(o.longitude),He(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return xM(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[ec])===null||a===void 0?void 0:a.arrayValue,I=(u=g[ec])===null||u===void 0?void 0:u.arrayValue,A=me(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=I?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:xM(y,I)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Np.mapValue&&s===Np.mapValue)return 0;if(o===Np.mapValue)return 1;if(s===Np.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=QI(u[p],h[p]);if(g!==0)return g;let y=tc(a[u[p]],l[h[p]]);if(y!==0)return y}return me(u.length,h.length)}(n.mapValue,e.mapValue);default:throw ee(23264,{le:t})}}function MM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return me(n,e);let t=gi(n),r=gi(e),i=me(t.seconds,r.seconds);return i!==0?i:me(t.nanos,r.nanos)}function xM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=tc(t[i],r[i]);if(o)return o}return me(t.length,r.length)}function nc(n){return XI(n)}function XI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=gi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return mi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return K.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=XI(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${XI(t.fields[s])}`;return i+"}"}(n.mapValue):ee(61005,{value:n})}function Pp(n){switch(uo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=vg(n);return e?16+Pp(e):16;case 5:return 2*n.stringValue.length;case 6:return mi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Pp(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return fo(r.fields,(o,s)=>{i+=o.length+Pp(s)}),i}(n.mapValue);default:throw ee(13486,{value:n})}}function PM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ew(n){return!!n&&"integerValue"in n}function Pb(n){return!!n&&"arrayValue"in n}function kM(n){return!!n&&"nullValue"in n}function OM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kp(n){return!!n&&"mapValue"in n}function Vx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Mb])===null||t===void 0?void 0:t.stringValue)===xb}function Il(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return fo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Il(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Il(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Lx}var Jae={mapValue:{fields:{[Mb]:{stringValue:xb},[ec]:{arrayValue:{}}}}};var Cn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!kp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Il(t)}setAll(e){let t=Sn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Il(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());kp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];kp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Il(this.value))}};function Ux(n){let e=[];return fo(n.fields,(t,r)=>{let i=new Sn([t]);if(kp(r)){let o=Ux(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new jn(e)}var or=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),Cn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var rc=class{constructor(e,t){this.position=e,this.inclusive=t}};function FM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=K.comparator(K.fromName(s.referenceValue),t.key):r=tc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function LM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!kr(n.position[t],e.position[t]))return!1;return!0}var ic=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function B3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var $p=class{},gt=class n extends $p{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new nw(e,t,r):t==="array-contains"?new ow(e,r):t==="in"?new sw(e,r):t==="not-in"?new aw(e,r):t==="array-contains-any"?new cw(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new rw(e,r):new iw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(tc(t,this.value)):t!==null&&uo(this.value)===uo(t)&&this.matchesComparison(tc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},sr=class n extends $p{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return Bx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Bx(n){return n.op==="and"}function Hx(n){return H3(n)&&Bx(n)}function H3(n){for(let e of n.filters)if(e instanceof sr)return!1;return!0}function tw(n){if(n instanceof gt)return n.field.canonicalString()+n.op.toString()+nc(n.value);if(Hx(n))return n.filters.map(e=>tw(e)).join(",");{let e=n.filters.map(t=>tw(t)).join(",");return`${n.op}(${e})`}}function $x(n,e){return n instanceof gt?function(r,i){return i instanceof gt&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)}(n,e):n instanceof sr?function(r,i){return i instanceof sr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&$x(s,i.filters[a]),!0):!1}(n,e):void ee(19439)}function qx(n){return n instanceof gt?function(t){return`${t.field.canonicalString()} ${t.op} ${nc(t.value)}`}(n):n instanceof sr?function(t){return t.op.toString()+" {"+t.getFilters().map(qx).join(" ,")+"}"}(n):"Filter"}var nw=class extends gt{constructor(e,t,r){super(e,t,r),this.key=K.fromName(r.referenceValue)}matches(e){let t=K.comparator(e.key,this.key);return this.matchesComparison(t)}},rw=class extends gt{constructor(e,t){super(e,"in",t),this.keys=zx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},iw=class extends gt{constructor(e,t){super(e,"not-in",t),this.keys=zx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function zx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>K.fromName(r.referenceValue))}var ow=class extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Pb(t)&&Rl(t.arrayValue,this.value)}},sw=class extends gt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Rl(this.value.arrayValue,t)}},aw=class extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Rl(this.value.arrayValue,t)}},cw=class extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Pb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rl(this.value.arrayValue,r))}};var uw=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function VM(n,e=null,t=[],r=[],i=null,o=null,s=null){return new uw(n,e,t,r,i,o,s)}function kb(n){let e=ce(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>tw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),yg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nc(r)).join(",")),e.Pe=t}return e.Pe}function Ob(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!B3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$x(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!LM(n.startAt,e.startAt)&&LM(n.endAt,e.endAt)}function lw(n){return K.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var _s=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function $3(n,e,t,r,i,o,s,a){return new _s(n,e,t,r,i,o,s,a)}function Fb(n){return new _s(n)}function jM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Gx(n){return n.collectionGroup!==null}function wl(n){let e=ce(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Tt(Sn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ic(o,r))}),t.has(Sn.keyField().canonicalString())||e.Te.push(new ic(Sn.keyField(),r))}return e.Te}function Mr(n){let e=ce(n);return e.Ie||(e.Ie=q3(e,wl(n))),e.Ie}function q3(n,e){if(n.limitType==="F")return VM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ic(i.field,o)});let t=n.endAt?new rc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new rc(n.startAt.position,n.startAt.inclusive):null;return VM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function dw(n,e){let t=n.filters.concat([e]);return new _s(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function hw(n,e,t){return new _s(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _g(n,e){return Ob(Mr(n),Mr(e))&&n.limitType===e.limitType}function Wx(n){return`${kb(Mr(n))}|lt:${n.limitType}`}function Wa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>qx(i)).join(", ")}]`),yg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>nc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>nc(i)).join(",")),`Target(${r})`}(Mr(n))}; limitType=${n.limitType})`}function Eg(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):K.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of wl(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=FM(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,wl(r),i)||r.endAt&&!function(s,a,u){let l=FM(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,wl(r),i))}(n,e)}function z3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Kx(n){return(e,t)=>{let r=!1;for(let i of wl(n)){let o=G3(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function G3(n,e,t){let r=n.field.isKeyField()?K.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?tc(u,l):ee(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:n.dir})}}var yi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return xx(this.inner)}size(){return this.innerSize}};var W3=new Je(K.comparator);function vi(){return W3}var Qx=new Je(K.comparator);function El(...n){let e=Qx;for(let t of n)e=e.insert(t.key,t);return e}function Yx(n){let e=Qx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function hs(){return bl()}function Zx(){return bl()}function bl(){return new yi(n=>n.toString(),(n,e)=>n.isEqual(e))}var K3=new Je(K.comparator),Q3=new Tt(K.comparator);function be(...n){let e=Q3;for(let t of n)e=e.add(t);return e}var Y3=new Tt(me);function Z3(){return Y3}function Lb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sl(e)?"-0":e}}function Jx(n){return{integerValue:""+n}}function J3(n,e){return S3(e)?Jx(e):Lb(n,e)}var oc=class{constructor(){this._=void 0}};function X3(n,e,t){return n instanceof sc?function(i,o){let s={fields:{[kx]:{stringValue:Px},[Fx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Nb(o)&&(o=vg(o)),o&&(s.fields[Ox]=o),{mapValue:s}}(t,e):n instanceof Es?eP(n,e):n instanceof Is?tP(n,e):function(i,o){let s=Xx(i,o),a=UM(s)+UM(i.Ee);return ew(s)&&ew(i.Ee)?Jx(a):Lb(i.serializer,a)}(n,e)}function e5(n,e,t){return n instanceof Es?eP(n,e):n instanceof Is?tP(n,e):t}function Xx(n,e){return n instanceof ac?function(r){return ew(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var sc=class extends oc{},Es=class extends oc{constructor(e){super(),this.elements=e}};function eP(n,e){let t=nP(e);for(let r of n.elements)t.some(i=>kr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Is=class extends oc{constructor(e){super(),this.elements=e}};function tP(n,e){let t=nP(e);for(let r of n.elements)t=t.filter(i=>!kr(i,r));return{arrayValue:{values:t}}}var ac=class extends oc{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function UM(n){return He(n.integerValue||n.doubleValue)}function nP(n){return Pb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function t5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Es&&i instanceof Es||r instanceof Is&&i instanceof Is?Xa(r.elements,i.elements,kr):r instanceof ac&&i instanceof ac?kr(r.Ee,i.Ee):r instanceof sc&&i instanceof sc}(n.transform,e.transform)}var fw=class{constructor(e,t){this.version=e,this.transformResults=t}},xr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Op(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var cc=class{};function rP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Nl(n.key,xr.none()):new ws(n.key,n.data,xr.none());{let t=n.data,r=Cn.empty(),i=new Tt(Sn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Or(n.key,r,new jn(i.toArray()),xr.none())}}function n5(n,e,t){n instanceof ws?function(i,o,s){let a=i.value.clone(),u=HM(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Or?function(i,o,s){if(!Op(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=HM(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(iP(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Dl(n,e,t,r){return n instanceof ws?function(o,s,a,u){if(!Op(o.precondition,s))return a;let l=o.value.clone(),h=$M(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Or?function(o,s,a,u){if(!Op(o.precondition,s))return a;let l=$M(o.fieldTransforms,u,s),h=s.data;return h.setAll(iP(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Op(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function r5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Xx(r.transform,i||null);o!=null&&(t===null&&(t=Cn.empty()),t.set(r.field,o))}return t||null}function BM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xa(r,i,(o,s)=>t5(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ws=class extends cc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Or=class extends cc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function iP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function HM(n,e,t){let r=new Map;Pe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,e5(s,a,t[i]))}return r}function $M(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,X3(o,s,e))}return r}var Nl=class extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},pw=class extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var gw=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&n5(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Dl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Zx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=rP(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&Xa(this.mutations,e.mutations,(t,r)=>BM(t,r))&&Xa(this.baseMutations,e.baseMutations,(t,r)=>BM(t,r))}},mw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return K3}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var yw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var vw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ft,Te;function i5(n){switch(n){case M.OK:return ee(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return ee(15467,{code:n})}}function oP(n){if(n===void 0)return pi("GRPC error has no .code"),M.UNKNOWN;switch(n){case ft.OK:return M.OK;case ft.CANCELLED:return M.CANCELLED;case ft.UNKNOWN:return M.UNKNOWN;case ft.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ft.INTERNAL:return M.INTERNAL;case ft.UNAVAILABLE:return M.UNAVAILABLE;case ft.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ft.NOT_FOUND:return M.NOT_FOUND;case ft.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ft.ABORTED:return M.ABORTED;case ft.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ft.DATA_LOSS:return M.DATA_LOSS;default:return ee(39323,{code:n})}}(Te=ft||(ft={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";var qM=null;var o5=new hi([4294967295,4294967295],0);function zM(n){let e=gx().encode(n),t=new PI;return t.update(e),new Uint8Array(t.digest())}function GM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hi([t,r],0),new hi([i,o],0)]}var _w=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fs(`Invalid padding: ${t}`);if(r<0)throw new fs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fs(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=hi.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(hi.fromNumber(r)));return i.compare(o5)===1&&(i=new hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=zM(e),[r,i]=GM(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=zM(e),[r,i]=GM(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},fs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var qp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ml.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(le.min(),i,new Je(me),vi(),be())}},Ml=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,be(),be(),be())}};var Za=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},zp=class{constructor(e,t){this.targetId=e,this.De=t}},Gp=class{constructor(e,t,r=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Wp=class{constructor(){this.ve=0,this.Ce=WM(),this.Fe=qt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=be(),t=be(),r=be();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ee(38017,{changeType:o})}}),new Ml(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=WM()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Ew=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=vi(),this.je=Mp(),this.Je=Mp(),this.He=new Je(me)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(lw(o))if(r===0){let s=new K(o.path);this.Xe(t,s,or.newNoDocument(s,le.min()))}else Pe(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}qM?.ct(function(h,p,g,y,I){var A,N,k,z,te,Me;let et={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},ke=p.unchangedNames;return ke&&(et.bloomFilter={applied:I===0,hashCount:(A=ke?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(z=(k=(N=ke?.bits)===null||N===void 0?void 0:N.bitmap)===null||k===void 0?void 0:k.length)!==null&&z!==void 0?z:0,padding:(Me=(te=ke?.bits)===null||te===void 0?void 0:te.padding)!==null&&Me!==void 0?Me:0,mightContain:b=>{var v;return(v=y?.mightContain(b))!==null&&v!==void 0&&v}}),et}(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=mi(r).toUint8Array()}catch(u){if(u instanceof Up)return co("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new _w(s,i,o)}catch(u){return co(u instanceof fs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&lw(a.target)){let u=new K(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,or.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=be();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new qp(e,t,this.He,this.ze,r);return this.ze=vi(),this.je=Mp(),this.Je=Mp(),this.He=new Je(me),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Wp,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Tt(me),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Tt(me),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||V("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Wp),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Mp(){return new Je(K.comparator)}function WM(){return new Je(K.comparator)}var s5={asc:"ASCENDING",desc:"DESCENDING"},a5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c5={and:"AND",or:"OR"},Iw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ww(n,e){return n.useProto3Json||yg(e)?e:{value:e}}function Kp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function u5(n,e){return Kp(n,e.toTimestamp())}function Pr(n){return Pe(!!n,49232),le.fromTimestamp(function(t){let r=gi(t);return new qe(r.seconds,r.nanos)}(n))}function Vb(n,e){return bw(n,e).canonicalString()}function bw(n,e){let t=function(i){return new $e(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function aP(n){let e=$e.fromString(n);return Pe(hP(e),10190,{key:e.toString()}),e}function Dw(n,e){return Vb(n.databaseId,e.path)}function jI(n,e){let t=aP(e);if(t.get(1)!==n.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new K(uP(t))}function cP(n,e){return Vb(n.databaseId,e)}function l5(n){let e=aP(n);return e.length===4?$e.emptyPath():uP(e)}function Tw(n){return new $e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function uP(n){return Pe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function KM(n,e,t){return{name:Dw(n,e),fields:t.value.mapValue.fields}}function d5(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ee(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Pe(h===void 0||typeof h=="string",58123),qt.fromBase64String(h||"")):(Pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),qt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:oP(l.code);return new L(h,l.message||"")}(s);t=new Gp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=jI(n,r.document.name),o=Pr(r.document.updateTime),s=r.document.createTime?Pr(r.document.createTime):le.min(),a=new Cn({mapValue:{fields:r.document.fields}}),u=or.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Za(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=jI(n,r.document),o=r.readTime?Pr(r.readTime):le.min(),s=or.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Za([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=jI(n,r.document),o=r.removedTargetIds||[];t=new Za([],o,i,null)}else{if(!("filter"in e))return ee(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new vw(i,o),a=r.targetId;t=new zp(a,s)}}return t}function h5(n,e){let t;if(e instanceof ws)t={update:KM(n,e.key,e.value)};else if(e instanceof Nl)t={delete:Dw(n,e.key)};else if(e instanceof Or)t={update:KM(n,e.key,e.data),updateMask:I5(e.fieldMask)};else{if(!(e instanceof pw))return ee(16599,{Rt:e.type});t={verify:Dw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof sc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Es)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Is)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ac)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw ee(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:u5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ee(27497)}(n,e.precondition)),t}function f5(n,e){return n&&n.length>0?(Pe(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?Pr(i.updateTime):Pr(o);return s.isEqual(le.min())&&(s=Pr(o)),new fw(s,i.transformResults||[])}(t,e))):[]}function p5(n,e){return{documents:[cP(n,e.path)]}}function g5(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=cP(n,i);let o=function(l){if(l.length!==0)return dP(sr.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(g){return{field:Ka(g.field),direction:v5(g.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=ww(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{Vt:t,parent:i}}function m5(n){let e=l5(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Pe(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let g=lP(p);return g instanceof sr&&Hx(g)?g.getFilters():[g]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(g=>function(I){return new ic(Qa(I.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,yg(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(p){let g=!!p.before,y=p.values||[];return new rc(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let g=!p.before,y=p.values||[];return new rc(y,g)}(t.endAt)),$3(e,i,s,o,a,"F",u,l)}function y5(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Qa(t.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Qa(t.unaryFilter.field);return gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Qa(t.unaryFilter.field);return gt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Qa(t.unaryFilter.field);return gt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}}(n):n.fieldFilter!==void 0?function(t){return gt.create(Qa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return sr.create(t.compositeFilter.filters.map(r=>lP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee(1026)}}(t.compositeFilter.op))}(n):ee(30097,{filter:n})}function v5(n){return s5[n]}function _5(n){return a5[n]}function E5(n){return c5[n]}function Ka(n){return{fieldPath:n.canonicalString()}}function Qa(n){return Sn.fromServerFormat(n.fieldPath)}function dP(n){return n instanceof gt?function(t){if(t.op==="=="){if(OM(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NAN"}};if(kM(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(OM(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NAN"}};if(kM(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(t.field),op:_5(t.op),value:t.value}}}(n):n instanceof sr?function(t){let r=t.getFilters().map(i=>dP(i));return r.length===1?r[0]:{compositeFilter:{op:E5(t.op),filters:r}}}(n):ee(54877,{filter:n})}function I5(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var xl=class n{constructor(e,t,r,i,o=le.min(),s=le.min(),a=qt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Cw=class{constructor(e){this.gt=e}};function w5(n){let e=m5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?hw(e,e.limit,"L"):e}var Qp=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Sl(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=gi(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(mi(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?jx(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Vx(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ee(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=ec,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(He(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),K.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Qp.Ut=new Qp;var Sw=class{constructor(){this.Dn=new Aw}addToCollectionParentIndex(e,t){return this.Dn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(vs.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},Aw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tt($e.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt($e.comparator)).toArray()}};var Xae=new Uint8Array(0);var QM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fP=41943040,Vn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(fP,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);var Pl=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var YM="LruGarbageCollector",b5=1048576;function ZM([n,e],[t,r]){let i=me(n,t);return i===0?me(e,r):i}var Rw=class{constructor(e){this.Tr=e,this.buffer=new Tt(ZM),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();ZM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Nw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){V(YM,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){pc(t)?V(YM,"Ignoring IndexedDB error during garbage collection: ",t):await fc(t)}await this.Rr(3e5)})}},Mw=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(Ab.ue);let r=new Rw(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(QM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QM):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ga()<=Ie.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function D5(n,e){return new Mw(n,e)}var xw=class{constructor(){this.changes=new yi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Pw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var kw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Dl(r.mutation,i,jn.empty(),qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=be()){let i=hs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=El();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=hs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,be()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=vi(),s=bl(),a=function(){return bl()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Or)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Dl(h.mutation,l,h.mutation.getFieldMask(),qe.now())):s.set(l.key,jn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Pw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=bl(),i=new Je((s,a)=>s-a),o=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||jn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||be()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=Zx();h.forEach(g=>{if(!o.has(g)){let y=rP(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return K.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(hs()),a=Cl,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,be())).next(h=>({batchId:a,changes:Yx(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new K(t)).next(r=>{let i=El();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=El();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=function(p,g){return new _s(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,or.newInvalidDocument(h)))});let a=El();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Dl(h.mutation,l,jn.empty(),qe.now()),Eg(t,l)&&(a=a.insert(u,l))}),a})}};var Ow=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return x.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Pr(i.createTime)}}(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(i){return{name:i.name,query:w5(i.bundledQuery),readTime:Pr(i.readTime)}}(t)),x.resolve()}};var Fw=class{constructor(){this.overlays=new Je(K.comparator),this.kr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=hs();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=hs(),o=t.length+1,s=new K(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Je((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=hs(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=hs(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new yw(t,r));let o=this.kr.get(t);o===void 0&&(o=be(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var Lw=class{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var kl=class{constructor(){this.qr=new Tt(pt.Qr),this.$r=new Tt(pt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new pt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new pt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new K(new $e([])),r=new pt(t,e),i=new pt(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new K(new $e([])),r=new pt(t,e),i=new pt(t,e+1),o=be();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new pt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},pt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return K.comparator(e.key,t.key)||me(e.Hr,t.Hr)}static Ur(e,t){return me(e.Hr,t.Hr)||K.comparator(e.key,t.key)}};var Vw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Tt(pt.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new gw(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new pt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?Rb:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new pt(t,0),i=new pt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tt(me);return t.forEach(i=>{let o=new pt(i,0),s=new pt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;K.isDocumentKey(o)||(o=o.child(""));let s=new pt(new K(o),0),a=new Tt(me);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Pe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(t.mutations,i=>{let o=new pt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new pt(t,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var jw=class{constructor(e){this.ni=e,this.docs=function(){return new Je(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():or.newInvalidDocument(t))}getEntries(e,t){let r=vi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():or.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=vi(),s=t.path,a=new K(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||D3(b3(h),r)<=0||(i.has(h.key)||Eg(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ee(9500)}ri(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Uw(this)}getSize(e){return x.resolve(this.size)}},Uw=class extends xw{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var Bw=class{constructor(e){this.persistence=e,this.ii=new yi(t=>kb(t),Ob),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.si=0,this.oi=new kl,this.targetCount=0,this._i=Pl.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),x.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Pl(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.hr(t),x.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.oi.containsKey(t))}};var Yp=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Ab(0),this.ci=!1,this.ci=!0,this.li=new Lw,this.referenceDelegate=e(this),this.hi=new Bw(this),this.indexManager=new Sw,this.remoteDocumentCache=function(i){return new jw(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new Cw(t),this.Ti=new Ow(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new Vw(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){V("MemoryPersistence","Starting transaction:",e);let i=new Hw(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},Hw=class extends ZI{constructor(e){super(),this.currentSequenceNumber=e}},$w=class n{constructor(e){this.persistence=e,this.Ai=new kl,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ee(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=K.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,le.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return x.or([()=>x.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Zp=class n{constructor(e,t){this.persistence=e,this.gi=new yi(r=>A3(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=D5(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pp(e.data.value)),t}Sr(e,t,r){return x.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var qw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=be(),i=be();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var zw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Gw=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return HR()?8:C3(bt())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new zw;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Ga()<=Ie.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Wa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(Ga()<=Ie.DEBUG&&V("QueryEngine","Query:",Wa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ga()<=Ie.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Wa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(t))):x.resolve())}ps(e,t){if(jM(t))return x.resolve(null);let r=Mr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=hw(t,null,"F"),r=Mr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=be(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,hw(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return jM(t)||i.isEqual(le.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?x.resolve(null):(Ga()<=Ie.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wa(t)),this.vs(e,s,t,w3(i,Cl)).next(a=>a))})}bs(e,t){let r=new Tt(Kx(e));return t.forEach((i,o)=>{Eg(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Ga()<=Ie.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Wa(t)),this.gs.getDocumentsMatchingQuery(e,t,vs.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var jb="LocalStore",T5=3e8,Ww=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Je(me),this.Ms=new yi(o=>kb(o),Ob),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kw(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function C5(n,e,t,r){return new Ww(n,e,t,r)}async function pP(n,e){let t=ce(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=be();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function S5(n,e){let t=ce(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,g=p.keys(),y=x.resolve();return g.forEach(I=>{y=y.next(()=>h.getEntry(u,I)).next(A=>{let N=l.docVersions.get(I);Pe(N!==null,48541),A.version.compareTo(N)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=be();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function gP(n){let e=ce(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function A5(n,e){let t=ce(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(qt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,N,k){return A.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=T5?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=vi(),l=be();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(R5(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(le.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function R5(n,e,t){let r=be(),i=be();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=vi();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(le.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(jb,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function N5(n,e){let t=ce(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Rb),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function M5(n,e){let t=ce(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new xl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Kw(n,e,t){let r=ce(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!pc(s))throw s;V(jb,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function JM(n,e,t){let r=ce(n),i=le.min(),o=be();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=ce(u),g=p.Ms.get(h);return g!==void 0?x.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)}(r,s,Mr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:le.min(),t?o:be())).next(a=>(x5(r,z3(e),a),{documents:a,qs:o})))}function x5(n,e,t){let r=n.xs.get(e)||le.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Jp=class{constructor(){this.activeTargetIds=Z3()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Qw=class{constructor(){this.Fo=new Jp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Jp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Yw=class{xo(e){}shutdown(){}};var XM="ConnectivityMonitor",Xp=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){V(XM,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){V(XM,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var xp=null;function Zw(){return xp===null?xp=function(){return 268435456+Math.round(2147483648*Math.random())}():xp++,"0x"+xp.toString(16)}var UI="RestConnection",P5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Jw=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Bp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=Zw(),a=this.Go(e,t.toUriEncodedString());V(UI,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Qi(l);return this.jo(e,a,u,r,h).then(p=>(V(UI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw co(UI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=P5[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var Xw=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var $t="WebChannelConnection",eb=class extends Jw{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=Zw();return new Promise((a,u)=>{let l=new kI;l.setWithCredentials(!0),l.listenOnce(OI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _l.NO_ERROR:let p=l.getResponseJson();V($t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case _l.TIMEOUT:V($t,`RPC '${e}' ${s} timed out`),u(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case _l.HTTP_ERROR:let g=l.getStatus();if(V($t,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let I=y?.error;if(I&&I.status&&I.message){let A=function(k){let z=k.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(z)>=0?z:M.UNKNOWN}(I.status);u(new L(A,I.message))}else u(new L(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(M.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{V($t,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V($t,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=Zw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=VI(),a=LI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V($t,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,I=new Xw({Ho:N=>{y?V($t,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(V($t,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),V($t,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Yo:()=>p.close()}),A=(N,k,z)=>{N.listen(k,te=>{try{z(te)}catch(Me){setTimeout(()=>{throw Me},0)}})};return A(p,za.EventType.OPEN,()=>{y||(V($t,`RPC '${e}' stream ${i} transport opened.`),I.s_())}),A(p,za.EventType.CLOSE,()=>{y||(y=!0,V($t,`RPC '${e}' stream ${i} transport closed`),I.__(),this.I_(p))}),A(p,za.EventType.ERROR,N=>{y||(y=!0,co($t,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),I.__(new L(M.UNAVAILABLE,"The operation could not be completed")))}),A(p,za.EventType.MESSAGE,N=>{var k;if(!y){let z=N.data[0];Pe(!!z,16349);let te=z,Me=te?.error||((k=te[0])===null||k===void 0?void 0:k.error);if(Me){V($t,`RPC '${e}' stream ${i} received error:`,Me);let et=Me.status,ke=function(E){let w=ft[E];if(w!==void 0)return oP(w)}(et),b=Me.message;ke===void 0&&(ke=M.INTERNAL,b="Unknown error status: "+et+" with message "+Me.message),y=!0,I.__(new L(ke,b)),p.close()}else V($t,`RPC '${e}' stream ${i} received:`,z),I.a_(z)}}),A(a,FI.STAT_EVENT,N=>{N.stat===Rp.PROXY?V($t,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Rp.NOPROXY&&V($t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function BI(){return typeof document<"u"?document:null}function Ig(n){return new Iw(n,!0)}var eg=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var ex="PersistentStream",tg=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new eg(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(pi(t.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return V(ex,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(V(ex,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},tb=class extends tg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=d5(this.serializer,e),r=function(o){if(!("targetChange"in o))return le.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?le.min():s.readTime?Pr(s.readTime):le.min()}(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Tw(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=lw(u)?{documents:p5(o,u)}:{query:g5(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=sP(o,s.resumeToken);let l=ww(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(le.min())>0){a.readTime=Kp(o,s.snapshotVersion.toTimestamp());let l=ww(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=y5(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Tw(this.serializer),t.removeTarget=e,this.k_(t)}},nb=class extends tg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=f5(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=Tw(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>h5(this.serializer,r))};this.k_(t)}};var rb=class{},ib=class extends rb{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,bw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,bw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},ob=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(pi(t),this._a=!1):V("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var bs="RemoteStore",sb=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Ts(this)&&(V(bs,"Restarting streams for network reachability change."),await async function(u){let l=ce(u);l.Ia.add(4),await jl(l),l.Aa.set("Unknown"),l.Ia.delete(4),await wg(l)}(this))})}),this.Aa=new ob(r,i)}};async function wg(n){if(Ts(n))for(let e of n.da)await e(!0)}async function jl(n){for(let e of n.da)await e(!1)}function mP(n,e){let t=ce(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),$b(t)?Hb(t):gc(t).x_()&&Bb(t,e))}function Ub(n,e){let t=ce(n),r=gc(t);t.Ta.delete(e),r.x_()&&yP(t,e),t.Ta.size===0&&(r.x_()?r.B_():Ts(t)&&t.Aa.set("Unknown"))}function Bb(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gc(n).H_(e)}function yP(n,e){n.Ra.$e(e),gc(n).Y_(e)}function Hb(n){n.Ra=new Ew({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),gc(n).start(),n.Aa.aa()}function $b(n){return Ts(n)&&!gc(n).M_()&&n.Ta.size>0}function Ts(n){return ce(n).Ia.size===0}function vP(n){n.Ra=void 0}async function k5(n){n.Aa.set("Online")}async function O5(n){n.Ta.forEach((e,t)=>{Bb(n,e)})}async function F5(n,e){vP(n),$b(n)?(n.Aa.la(e),Hb(n)):n.Aa.set("Unknown")}async function L5(n,e,t){if(n.Aa.set("Online"),e instanceof Gp&&e.state===2&&e.cause)try{await async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))}(n,e)}catch(r){V(bs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ng(n,r)}else if(e instanceof Za?n.Ra.Ye(e):e instanceof zp?n.Ra.it(e):n.Ra.et(e),!t.isEqual(le.min()))try{let r=await gP(n.localStore);t.compareTo(r)>=0&&await function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(qt.EMPTY_BYTE_STRING,h.snapshotVersion)),yP(o,u);let p=new xl(h.target,u,l,h.sequenceNumber);Bb(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){V(bs,"Failed to raise snapshot:",r),await ng(n,r)}}async function ng(n,e,t){if(!pc(e))throw e;n.Ia.add(1),await jl(n),n.Aa.set("Offline"),t||(t=()=>gP(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{V(bs,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await wg(n)})}function _P(n,e){return e().catch(t=>ng(n,t,e))}async function bg(n){let e=ce(n),t=lo(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Rb;for(;V5(e);)try{let i=await N5(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,j5(e,i)}catch(i){await ng(e,i)}EP(e)&&IP(e)}function V5(n){return Ts(n)&&n.Pa.length<10}function j5(n,e){n.Pa.push(e);let t=lo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function EP(n){return Ts(n)&&!lo(n).M_()&&n.Pa.length>0}function IP(n){lo(n).start()}async function U5(n){lo(n).na()}async function B5(n){let e=lo(n);for(let t of n.Pa)e.X_(t.mutations)}async function H5(n,e,t){let r=n.Pa.shift(),i=mw.from(r,e,t);await _P(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await bg(n)}async function $5(n,e){e&&lo(n).Z_&&await async function(r,i){if(function(s){return i5(s)&&s!==M.ABORTED}(i.code)){let o=r.Pa.shift();lo(r).N_(),await _P(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await bg(r)}}(n,e),EP(n)&&IP(n)}async function tx(n,e){let t=ce(n);t.asyncQueue.verifyOperationInProgress(),V(bs,"RemoteStore received new credentials");let r=Ts(t);t.Ia.add(3),await jl(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await wg(t)}async function q5(n,e){let t=ce(n);e?(t.Ia.delete(2),await wg(t)):e||(t.Ia.add(2),await jl(t),t.Aa.set("Unknown"))}function gc(n){return n.Va||(n.Va=function(t,r,i){let o=ce(t);return o.ia(),new tb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:k5.bind(null,n),e_:O5.bind(null,n),n_:F5.bind(null,n),J_:L5.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),$b(n)?Hb(n):n.Aa.set("Unknown")):(await n.Va.stop(),vP(n))})),n.Va}function lo(n){return n.ma||(n.ma=function(t,r,i){let o=ce(t);return o.ia(),new nb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:U5.bind(null,n),n_:$5.bind(null,n),ea:B5.bind(null,n),ta:H5.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await bg(n)):(await n.ma.stop(),n.Pa.length>0&&(V(bs,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var ab=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function qb(n,e){if(pi("AsyncQueue",`${e}: ${n}`),pc(n))return new L(M.UNAVAILABLE,`${e}: ${n}`);throw n}var rg=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||K.comparator(t.key,r.key):(t,r)=>K.comparator(t.key,r.key),this.keyedMap=El(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ig=class{constructor(){this.fa=new Je(K.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ee(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},uc=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,rg.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_g(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var cb=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},ub=class{constructor(){this.queries=nx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ce(t),o=i.queries;i.queries=nx(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function nx(){return new yi(n=>Wx(n),_g)}async function wP(n,e){let t=ce(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new cb,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(i,!0);break;case 1:o.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=qb(s,`Initialization of query '${Wa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&zb(t)}async function bP(n,e){let t=ce(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function z5(n,e){let t=ce(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&zb(t)}function G5(n,e,t){let r=ce(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function zb(n){n.Da.forEach(e=>{e.next()})}var lb,rx;(rx=lb||(lb={})).Fa="default",rx.Cache="cache";var og=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new uc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=uc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==lb.Cache}};var sg=class{constructor(e){this.key=e}},ag=class{constructor(e){this.key=e}},db=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=be(),this.mutatedKeys=be(),this.Xa=Kx(e),this.eu=new rg(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new ig,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Eg(this.query,p)?p:null,I=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;g&&y?g.data.isEqual(y.data)?I!==A&&(r.track({type:3,doc:y}),N=!0):this.iu(g,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),N=!0):g&&!y&&(r.track({type:1,doc:g}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>function(y,I){let A=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{At:N})}};return A(y)-A(I)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new uc(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ig,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=be(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new ag(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new sg(r))}),t}uu(e){this.Ha=e.qs,this.Za=be();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return uc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Gb="SyncEngine",hb=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},fb=class{constructor(e){this.key=e,this.lu=!1}},pb=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new yi(a=>Wx(a),_g),this.Tu=new Map,this.Iu=new Set,this.du=new Je(K.comparator),this.Eu=new Map,this.Au=new kl,this.Ru={},this.Vu=new Map,this.mu=Pl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function W5(n,e,t=!0){let r=RP(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await DP(r,e,t,!0),i}async function K5(n,e){let t=RP(n);await DP(t,e,!0,!1)}async function DP(n,e,t,r){let i=await M5(n.localStore,Mr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await Q5(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&mP(n.remoteStore,i),a}async function Q5(n,e,t,r,i){n.gu=(p,g,y)=>async function(A,N,k,z){let te=N.view.nu(k);te.Ds&&(te=await JM(A.localStore,N.query,!1).then(({documents:b})=>N.view.nu(b,te)));let Me=z&&z.targetChanges.get(N.targetId),et=z&&z.targetMismatches.get(N.targetId)!=null,ke=N.view.applyChanges(te,A.isPrimaryClient,Me,et);return ox(A,N.targetId,ke._u),ke.snapshot}(n,p,g,y);let o=await JM(n.localStore,e,!0),s=new db(e,o.qs),a=s.nu(o.documents),u=Ml.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);ox(n,t,l._u);let h=new hb(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function Y5(n,e,t){let r=ce(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!_g(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Kw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ub(r.remoteStore,i.targetId),gb(r,i.targetId)}).catch(fc)):(gb(r,i.targetId),await Kw(r.localStore,i.targetId,!0))}async function Z5(n,e){let t=ce(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ub(t.remoteStore,r.targetId))}async function J5(n,e,t){let r=oq(n);try{let i=await function(s,a){let u=ce(s),l=qe.now(),h=a.reduce((y,I)=>y.add(I.key),be()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=vi(),A=be();return u.Os.getEntries(y,h).next(N=>{I=N,I.forEach((k,z)=>{z.isValidDocument()||(A=A.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,I)).next(N=>{p=N;let k=[];for(let z of a){let te=r5(z,p.get(z.key).overlayedDocument);te!=null&&k.push(new Or(z.key,te,Ux(te.value.mapValue),xr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,a)}).next(N=>{g=N;let k=N.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,N.batchId,k)})}).then(()=>({batchId:g.batchId,changes:Yx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Je(me)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l}(r,i.batchId,t),await Ul(r,i.changes),await bg(r.remoteStore)}catch(i){let o=qb(i,"Failed to persist write");t.reject(o)}}async function TP(n,e){let t=ce(n);try{let r=await A5(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Pe(s.lu,14607):i.removedDocuments.size>0&&(Pe(s.lu,42227),s.lu=!1))}),await Ul(t,r,e)}catch(r){await fc(r)}}function ix(n,e,t){let r=ce(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=ce(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&zb(u)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function X5(n,e,t){let r=ce(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Je(K.comparator);s=s.insert(o,or.newNoDocument(o,le.min()));let a=be().add(o),u=new qp(le.min(),new Map,new Je(me),s,a);await TP(r,u),r.du=r.du.remove(o),r.Eu.delete(e),Wb(r)}else await Kw(r.localStore,e,!1).then(()=>gb(r,e,t)).catch(fc)}async function eq(n,e){let t=ce(n),r=e.batch.batchId;try{let i=await S5(t.localStore,e);SP(t,r,null),CP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ul(t,i)}catch(i){await fc(i)}}async function tq(n,e,t){let r=ce(n);try{let i=await function(s,a){let u=ce(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Pe(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);SP(r,e,t),CP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ul(r,i)}catch(i){await fc(i)}}function CP(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function SP(n,e,t){let r=ce(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function gb(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||AP(n,r)})}function AP(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Ub(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Wb(n))}function ox(n,e,t){for(let r of t)r instanceof sg?(n.Au.addReference(r.key,e),nq(n,r)):r instanceof ag?(V(Gb,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||AP(n,r.key)):ee(19791,{yu:r})}function nq(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(V(Gb,"New document in limbo: "+t),n.Iu.add(r),Wb(n))}function Wb(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new K($e.fromString(e)),r=n.mu.next();n.Eu.set(r,new fb(t)),n.du=n.du.insert(t,r),mP(n.remoteStore,new xl(Mr(Fb(t.path)),r,"TargetPurposeLimboResolution",Ab.ue))}}async function Ul(n,e,t){let r=ce(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=qw.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await async function(u,l){let h=ce(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,g=>x.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>x.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!pc(p))throw p;V(jb,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),I=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(I);h.Fs=h.Fs.insert(g,A)}}}(r.localStore,o))}async function rq(n,e){let t=ce(n);if(!t.currentUser.isEqual(e)){V(Gb,"User change. New user:",e.toKey());let r=await pP(t.localStore,e);t.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ul(t,r.Bs)}}function iq(n,e){let t=ce(n),r=t.Eu.get(e);if(r&&r.lu)return be().add(r.key);{let i=be(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function RP(n){let e=ce(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=TP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=X5.bind(null,e),e.hu.J_=z5.bind(null,e.eventManager),e.hu.pu=G5.bind(null,e.eventManager),e}function oq(n){let e=ce(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tq.bind(null,e),e}var NP=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ig(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return C5(this.persistence,new Gw,t.initialUser,this.serializer)}Du(t){return new Yp($w.Vi,this.serializer)}bu(t){return new Qw}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),mb=class extends NP{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Pe(this.persistence.referenceDelegate instanceof Zp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Nw(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new Yp(r=>Zp.Vi(r,t),this.serializer)}};var sq=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ix(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rq.bind(null,this.syncEngine),await q5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ub}()}createDatastore(t){let r=Ig(t.databaseInfo.databaseId),i=function(s){return new eb(s)}(t.databaseInfo);return function(s,a,u,l){return new ib(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new sb(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>ix(this.syncEngine,r,0),function(){return Xp.C()?new Xp:new Yw}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let g=new pb(o,s,a,u,l,h);return p&&(g.fu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(o){let s=ce(o);V(bs,"RemoteStore shutting down."),s.Ia.add(5),await jl(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var cg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):pi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ho="FirestoreClient",yb=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Dt.UNAUTHENTICATED,this.clientId=Tl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{V(ho,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(V(ho,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=qb(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function HI(n,e){n.asyncQueue.verifyOperationInProgress(),V(ho,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pP(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{co("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{V("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{co("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function sx(n,e){n.asyncQueue.verifyOperationInProgress();let t=await aq(n);V(ho,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>tx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>tx(e.remoteStore,i)),n._onlineComponents=e}async function aq(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){V(ho,"Using user provided OfflineComponentProvider");try{await HI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;co("Error using user provided cache. Falling back to memory cache: "+t),await HI(n,new NP)}}else V(ho,"Using default OfflineComponentProvider"),await HI(n,new mb(void 0));return n._offlineComponents}async function MP(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(V(ho,"Using user provided OnlineComponentProvider"),await sx(n,n._uninitializedComponentsProvider._online)):(V(ho,"Using default OnlineComponentProvider"),await sx(n,new sq))),n._onlineComponents}function cq(n){return MP(n).then(e=>e.syncEngine)}async function vb(n){let e=await MP(n),t=e.eventManager;return t.onListen=W5.bind(null,e.syncEngine),t.onUnlisten=Y5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=K5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Z5.bind(null,e.syncEngine),t}function uq(n,e,t={}){let r=new Rr;return n.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){let h=new cg({next:g=>{h.Ou(),s.enqueueAndForget(()=>bP(o,p)),g.fromCache&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new og(a,h,{includeMetadataChanges:!0,ka:!0});return wP(o,p)}(await vb(n),n.asyncQueue,e,t,r)),r.promise}function xP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ax=new Map;var PP="firestore.googleapis.com",cx=!0,ug=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PP,this.ssl=cx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:cx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<b5)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}I3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},lc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ug({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ug(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $I;switch(r.type){case"firstParty":return new WI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=ax.get(t);r&&(V("ComponentProvider","Removing Datastore"),ax.delete(t),r.terminate())}(this),Promise.resolve()}};function kP(n,e,t,r={}){var i;n=Un(n,lc);let o=Qi(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Xf(`https://${u}`),ep("Firestore",!0)),s.host!==PP&&s.host!==u&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Dr(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Dt.MOCK_USER;else{h=FR(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Dt(g)}n._authCredentials=new qI(new Fp(h,p))}}var Ds=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ct=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Vl(t,n._jsonSchema))return new n(e,r||null,new K($e.fromString(t.referencePath)))}};Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:mt("string",Ct._jsonSchemaVersion),referencePath:mt("string")};var io=class n extends Ds{constructor(e,t,r){super(e,t,Fb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new K(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function OP(n,e,...t){if(n=ht(n),mx("collection","path",e),n instanceof lc){let r=$e.fromString(e,...t);return CM(r),new io(n,null,r)}{if(!(n instanceof Ct||n instanceof io))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child($e.fromString(e,...t));return CM(r),new io(n.firestore,null,r)}}function Kb(n,e,...t){if(n=ht(n),arguments.length===1&&(e=Tl.newId()),mx("doc","path",e),n instanceof lc){let r=$e.fromString(e,...t);return TM(r),new Ct(n,null,new K(r))}{if(!(n instanceof Ct||n instanceof io))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child($e.fromString(e,...t));return TM(r),new Ct(n.firestore,n instanceof io?n.converter:null,new K(r))}}var ux="AsyncQueue",lg=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new eg(this,"async_queue_retry"),this.oc=()=>{let r=BI();r&&V(ux,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=BI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=BI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Rr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!pc(e))throw e;V(ux,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,pi("INTERNAL UNHANDLED ERROR: ",lx(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=ab.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&ee(47125,{hc:lx(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function lx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function dx(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Fr=class extends lc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new lg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new lg(e),this._firestoreClient=void 0,await e}}};function FP(n,e){let t=typeof n=="object"?n:os(),r=typeof n=="string"?n:e||Bp,i=La(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=OR("firestore");o&&kP(i,...o)}return i}function Qb(n){if(n._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||lq(n),n._firestoreClient}function lq(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new JI(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,xP(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new yb(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var oo=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(qt.fromBase64String(e))}catch(t){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vl(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};oo._jsonSchemaVersion="firestore/bytes/1.0",oo._jsonSchema={type:mt("string",oo._jsonSchemaVersion),bytes:mt("string")};var dc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ol=class{constructor(e){this._methodName=e}};var so=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Vl(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};so._jsonSchemaVersion="firestore/geoPoint/1.0",so._jsonSchema={type:mt("string",so._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};var ao=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vl(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new L(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ao._jsonSchemaVersion="firestore/vectorValue/1.0",ao._jsonSchema={type:mt("string",ao._jsonSchemaVersion),vectorValues:mt("object")};var dq=/^__.*__$/,_b=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,t,this.fieldTransforms):new ws(e,this.data,t,this.fieldTransforms)}},dg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Or(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function LP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ec:n})}}var Eb=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return fg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(LP(this.Ec)&&dq.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Ib=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ig(e)}Dc(e,t,r,i=!1){return new Eb({Ec:e,methodName:t,bc:r,path:Sn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Dg(n){let e=n._freezeSettings(),t=Ig(n._databaseId);return new Ib(n._databaseId,!!e.ignoreUndefinedProperties,t)}function VP(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);Yb("Data must be an object, but it was:",s,r);let a=jP(r,s),u,l;if(o.merge)u=new jn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=wb(e,p,t);if(!s.contains(g))throw new L(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);BP(h,g)||h.push(g)}u=new jn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new _b(new Cn(a),u,l)}var hg=class n extends Ol{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function hq(n,e,t,r){let i=n.Dc(1,e,t);Yb("Data must be an object, but it was:",i,r);let o=[],s=Cn.empty();fo(r,(u,l)=>{let h=Zb(e,u,t);l=ht(l);let p=i.gc(h);if(l instanceof hg)o.push(h);else{let g=Bl(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new jn(o);return new dg(s,a,i.fieldTransforms)}function fq(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[wb(e,r,t)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(wb(e,o[g])),u.push(o[g+1]);let l=[],h=Cn.empty();for(let g=a.length-1;g>=0;--g)if(!BP(l,a[g])){let y=a[g],I=u[g];I=ht(I);let A=s.gc(y);if(I instanceof hg)l.push(y);else{let N=Bl(I,A);N!=null&&(l.push(y),h.set(y,N))}}let p=new jn(l);return new dg(h,p,s.fieldTransforms)}function pq(n,e,t,r=!1){return Bl(t,n.Dc(r?4:3,e))}function Bl(n,e){if(UP(n=ht(n)))return Yb("Unsupported field value:",e,n),jP(n,e);if(n instanceof Ol)return function(r,i){if(!LP(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Bl(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return J3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=qe.fromDate(r);return{timestampValue:Kp(i.serializer,o)}}if(r instanceof qe){let o=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kp(i.serializer,o)}}if(r instanceof so)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oo)return{bytesValue:sP(i.serializer,r._byteString)};if(r instanceof Ct){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Vb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ao)return function(s,a){return{mapValue:{fields:{[Mb]:{stringValue:xb},[ec]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return Lb(a.serializer,l)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${mg(r)}`)}(n,e)}function jP(n,e){let t={};return xx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(n,(r,i)=>{let o=Bl(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function UP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qe||n instanceof so||n instanceof oo||n instanceof Ct||n instanceof Ol||n instanceof ao)}function Yb(n,e,t){if(!UP(t)||!yx(t)){let r=mg(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function wb(n,e,t){if((e=ht(e))instanceof dc)return e._internalPath;if(typeof e=="string")return Zb(n,e);throw fg("Field path arguments must be of type string or ",n,!1,void 0,t)}var gq=new RegExp("[~\\*/\\[\\]]");function Zb(n,e,t){if(e.search(gq)>=0)throw fg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dc(...e.split("."))._internalPath}catch{throw fg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+n+u)}function BP(n,e){return n.some(t=>t.isEqual(e))}var pg=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new bb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Jb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},bb=class extends pg{data(){return super.data()}};function Jb(n,e){return typeof e=="string"?Zb(n,e):e instanceof dc?e._internalPath:e._delegate._internalPath}function HP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fl=class{},Db=class extends Fl{};function ar(n,e,...t){let r=[];e instanceof Fl&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Tb).length,a=o.filter(u=>u instanceof gg).length;if(s>1||s>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var gg=class n extends Db{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return $P(e._query,t),new Ds(e.firestore,e.converter,dw(e._query,t))}_parse(e){let t=Dg(e.firestore);return function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){fx(p,h);let I=[];for(let A of p)I.push(hx(u,o,A));g={arrayValue:{values:I}}}else g=hx(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||fx(p,h),g=pq(a,s,p,h==="in"||h==="not-in");return gt.create(l,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function cr(n,e,t){let r=e,i=Jb("where",n);return gg._create(i,r,t)}var Tb=class n extends Fl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:sr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)$P(s,u),s=dw(s,u)}(e._query,t),new Ds(e.firestore,e.converter,dw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function hx(n,e,t){if(typeof(t=ht(t))=="string"){if(t==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gx(e)&&t.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child($e.fromString(t));if(!K.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return PM(n,new K(r))}if(t instanceof Ct)return PM(n,t._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mg(t)}.`)}function fx(n,e){if(!Array.isArray(n)||n.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $P(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Cb=class{convertValue(e,t="none"){switch(uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return fo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ec].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>He(s.doubleValue));return new ao(o)}convertGeoPoint(e){return new so(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=vg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Al(e));default:return null}}convertTimestamp(e){let t=gi(e);return new qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=$e.fromString(e);Pe(hP(r),9688,{name:e});let i=new Hp(r.get(1),r.get(3)),o=new K(r.popFirst(5));return i.isEqual(t)||pi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function qP(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ps=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gs=class n extends pg{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ja(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Jb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};gs._jsonSchemaVersion="firestore/documentSnapshot/1.0",gs._jsonSchema={type:mt("string",gs._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};var Ja=class extends gs{data(e={}){return super.data(e)}},ms=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ps(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ja(this._firestore,this._userDataWriter,r.key,r,new ps(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ja(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ps(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ja(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ps(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:mq(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function mq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:n})}}ms._jsonSchemaVersion="firestore/querySnapshot/1.0",ms._jsonSchema={type:mt("string",ms._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};var Ll=class extends Cb{constructor(e){super(),this.firestore=e}convertBytes(e){return new oo(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,t)}};function Bn(n){n=Un(n,Ds);let e=Un(n.firestore,Fr),t=Qb(e),r=new Ll(e);return HP(n._query),uq(t,n._query).then(i=>new ms(e,r,n,i))}function zP(n,e,t){n=Un(n,Ct);let r=Un(n.firestore,Fr),i=qP(n.converter,e,t);return Tg(r,[VP(Dg(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,xr.none())])}function GP(n,e,t,...r){n=Un(n,Ct);let i=Un(n.firestore,Fr),o=Dg(i),s;return s=typeof(e=ht(e))=="string"||e instanceof dc?fq(o,"updateDoc",n._key,e,t,r):hq(o,"updateDoc",n._key,e),Tg(i,[s.toMutation(n._key,xr.exists(!0))])}function WP(n){return Tg(Un(n.firestore,Fr),[new Nl(n._key,xr.none())])}function KP(n,e){let t=Un(n.firestore,Fr),r=Kb(n),i=qP(n.converter,e);return Tg(t,[VP(Dg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,xr.exists(!1))]).then(()=>r)}function Hl(n,...e){var t,r,i;n=ht(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||dx(e[s])||(o=e[s++]);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(dx(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Ct)l=Un(n.firestore,Fr),h=Fb(n._key.path),u={next:p=>{e[s]&&e[s](yq(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Un(n,Ds);l=Un(p.firestore,Fr),h=p._query;let g=new Ll(l);u={next:y=>{e[s]&&e[s](new ms(l,g,p,y))},error:e[s+1],complete:e[s+2]},HP(n._query)}return function(g,y,I,A){let N=new cg(A),k=new og(y,N,I);return g.asyncQueue.enqueueAndForget(async()=>wP(await vb(g),k)),()=>{N.Ou(),g.asyncQueue.enqueueAndForget(async()=>bP(await vb(g),k))}}(Qb(l),h,a,u)}function Tg(n,e){return function(r,i){let o=new Rr;return r.asyncQueue.enqueueAndForget(async()=>J5(await cq(r),i,o)),o.promise}(Qb(n),e)}function yq(n,e,t){let r=t.docs.get(e._key),i=new Ll(n);return new gs(n,i,e._key,r,new ps(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){hc=i})(Zi),nr(new nn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Fr(new zI(r.getProvider("auth-internal")),new KI(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hp(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ze(IM,wM,e),Ze(IM,wM,"esm2017")})();var _i=class{constructor(e){return e}},QP="firestore",Xb=class{constructor(){return ja(QP)}};var e0=new U("angularfire2.firestore-instances");function vq(n,e){let t=ol(QP,n,e);return t&&new _i(t)}function _q(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new _i(r)}}var Eq={provide:Xb,deps:[[new un,e0]]},Iq={provide:_i,useFactory:vq,deps:[[new un,e0],ai]};function rue(n,...e){return Ze("angularfire",Ji.full,"fst"),_n([Iq,Eq,{provide:e0,useFactory:_q(n),multi:!0,deps:[Ae,ze,Xi,as,[new un,vl],[new un,Ha],...e]}])}var Cg=Ht(KP,!0,2);var St=Ht(OP,!0,2);var mc=Ht(WP,!0,2);var Cs=Ht(Kb,!0,2);var YP=Ht(Bn,!0);var iue=Ht(FP,!0);var ZP=Ht(zP,!0,2);var Sg=Ht(GP,!0,2);var Ag=class n{firestore=S(_i);promptsSubs;catsSubs;tagsSubs;prompts=Ce([]);categories=Ce([]);tags=Ce([]);constructor(){this.promptsSubs=this.trackPrompts(),this.catsSubs=this.trackCategories(),this.tagsSubs=this.trackTags()}trackPrompts(){let e=St(this.firestore,"prompts");return Hl(e,t=>{let r=[];t.forEach(i=>{r.push(P({id:i.id},i.data()))}),this.prompts.set(r)})}trackCategories(){let e=St(this.firestore,"categories");return Hl(e,t=>{let r=[];t.forEach(i=>{r.push(P({id:i.id},i.data()))}),this.categories.set(r)})}trackTags(){let e=St(this.firestore,"tags");return Hl(e,t=>{let r=[];t.forEach(i=>{r.push(P({id:i.id},i.data()))}),this.tags.set(r)})}async categoryNameBySlug(e){return this.categories().length>0?this.categories().find(t=>t.slug.toLowerCase()===e.toLowerCase()).name:await Bn(ar(St(this.firestore,"categories"),cr("slug","==",e))).then(t=>{if(t.empty)throw new Error(`No se encontr\xF3 una categoria ${e} `);return t.docs[0].data().name})}async tagNameBySlug(e){return this.tags().length>0?this.tags().find(t=>t.slug.toLowerCase()===e.toLowerCase()).name:await Bn(ar(St(this.firestore,"tags"),cr("slug","==",e))).then(t=>{if(t.empty)throw new Error(`No se encontr\xF3 un etiqueta ${e} `);return t.docs[0].data().name})}async getPromptBySlug(e){return this.prompts().length>0?this.prompts().find(t=>t.slug===e):await Bn(ar(St(this.firestore,"prompts"),cr("slug","==",e))).then(t=>{if(t.empty)throw new Error(`No se encontr\xF3 un pormpt ${e} `);return t.docs[0].data()})}getPromptById(e){return this.prompts().find(t=>t.id===e)}async getPromptsByCategory(e){return this.prompts().length>0?this.prompts().filter(t=>t.categoria===e):await Bn(ar(St(this.firestore,"prompts"),cr("categoria","==",e))).then(t=>{if(t.empty)throw new Error(`No se encontr\xF3 ning\xFAn prompt para la categor\xEDa ${e} `);return t.docs.map(r=>P({id:r.id},r.data()))})}async getPromptsByTag(e){return this.prompts().length>0?this.prompts().filter(t=>t.tags.includes(e)):await Bn(ar(St(this.firestore,"prompts"),cr("tags","array-contains",e))).then(t=>{if(t.empty)throw new Error(`No se encontr\xF3 ning\xFAn prompt para la etiqueta ${e} `);return t.docs.map(r=>P({id:r.id},r.data()))})}async createPrompt(e){try{let t=ne(P({},e),{old_id:900,slug:e.titulo??this.generateSlug(e.titulo),fecha_creacion:new Date});await Cg(St(this.firestore,"prompts"),t)}catch(t){let r=`Error al crear prompt: ${t}`;console.error(r)}}async deletePrompt(e){try{let t=Cs(this.firestore,"prompts",e);await mc(t)}catch(t){let r=`Error al eliminar prompt ${e}: ${t}`;console.error(r)}}async updateCategoryPromptCount(e,t){let r=await Bn(ar(St(this.firestore,"categories"),cr("name","==",e)));if(r.empty)throw new Error(`No se encontr\xF3 una categor\xEDa con el nombre ${e}`);await Sg(r.docs[0].ref,{prompt_count:t,fecha_edicion:new Date})}async createCategory(e){await Cg(St(this.firestore,"categories"),ne(P({},e),{slug:this.generateSlug(e.name||""),fecha_creacion:new Date}))}async updateTagPromptCount(e,t){let r=await Bn(ar(St(this.firestore,"tags"),cr("name","==",e)));if(r.empty)throw new Error(`No se encontr\xF3 una etiqueta con el nombre ${e}`);await Sg(r.docs[0].ref,{prompt_count:t,fecha_edicion:new Date})}async createTag(e){await Cg(St(this.firestore,"tags"),ne(P({},e),{slug:this.generateSlug(e.name||""),fecha_creacion:new Date}))}async deleteCategory(e){try{let t=await Bn(ar(St(this.firestore,"categories"),cr("name","==",e)));if(t.empty)throw new Error(`No se encontr\xF3 una etiqueta con el nombre ${e}`);await mc(t.docs[0].ref)}catch(t){let r=`Error al eliminar la categor\xEDa ${e}: ${t}`;console.error(r)}}async deleteTag(e){try{let t=await Bn(ar(St(this.firestore,"tags"),cr("name","==",e)));if(t.empty)throw new Error(`No se encontr\xF3 una etiqueta con el nombre ${e}`);await mc(t.docs[0].ref)}catch(t){let r=`Error al eliminar la etiqueta ${e}: ${t}`;console.error(r)}}searchPrompts(e){try{let t=e.toLowerCase();return this.prompts().filter(r=>r.titulo.toLowerCase().includes(t)||r.prompt.toLowerCase().includes(t)||r.descripcion.toLowerCase().includes(t)||r.categoria.toLowerCase().includes(t)||r.tags.some(i=>i.toLowerCase().includes(t)))}catch(t){let r=`Error en b\xFAsqueda: ${t}`;return console.error(r),[]}}async updatePrompt(e,t){try{let r=Cs(this.firestore,"prompts",e);await Sg(r,ne(P({},t),{fechaModificacion:new Date}))}catch(r){let i=`Error al actualizar prompt ${e}: ${r}`;console.error(i)}}generateSlug(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").trim()}ngOnDestroy(){this.promptsSubs?.(),this.catsSubs?.(),this.tagsSubs?.()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var po=class n{firestoreService=S(Ag);search(e){return this.searchInFirestore(e)}prompts(){return this.firestoreService.prompts()}categories(){return this.firestoreService.categories()}tags(){return this.firestoreService.tags()}async categoryNameBySlug(e){return this.firestoreService.categoryNameBySlug(e)}async tagNameBySlug(e){return this.firestoreService.tagNameBySlug(e)}async byCategoryName(e){return{name:this.titleCase(e),prompts:await this.firestoreService.getPromptsByCategory(e)}}async byTagName(e){return{name:this.titleCase(e),prompts:await this.firestoreService.getPromptsByTag(e)}}async createPrompt(e){await this.firestoreService.createPrompt(e).then(t=>{this.addOrUpdateCategory(e.categoria),this.addOrUpdateTags(e.tags)})}async updatePrompt(e,t){await this.firestoreService.updatePrompt(e,t)}async addOrUpdateCategory(e){let t=this.prompts().filter(r=>r.categoria===e.toLowerCase()).length;console.log("Count for category:",e.toLowerCase(),t),t>1?await this.firestoreService.updateCategoryPromptCount(e.toLowerCase(),t+1):await this.firestoreService.createCategory({name:e.toLowerCase(),prompt_count:1,slug:""})}addOrUpdateTags(e){e.forEach(async t=>{let r=this.prompts().filter(i=>i.tags.includes(t.toLowerCase())).length;console.log("Count for tag:",t.toLowerCase(),r),r>1?await this.firestoreService.updateTagPromptCount(t.toLowerCase(),r+1):await this.firestoreService.createTag({name:t.toLowerCase(),prompt_count:1,slug:""})})}async updateOrDeleteCategory(e){let t=this.prompts().filter(r=>r.categoria===e.toLowerCase()).length;console.log("Count for category:",e.toLowerCase(),t),t>0?await this.firestoreService.updateTagPromptCount(e.toLowerCase(),t+1):await this.firestoreService.deleteCategory(e.toLowerCase())}async updateOrDeleteTags(e){e.forEach(async t=>{let r=this.prompts().filter(i=>i.tags.includes(t.toLowerCase())).length;console.log("Count for tag:",t.toLowerCase(),r),r>0?await this.firestoreService.updateTagPromptCount(t.toLowerCase(),r+1):await this.firestoreService.deleteTag(t.toLowerCase())})}async deletePrompt(e){let t=this.firestoreService.getPromptById(e),r=[...t.tags],i=t.categoria;await this.firestoreService.deletePrompt(e).then(()=>{this.updateOrDeleteCategory(i),this.updateOrDeleteTags(r)})}async deleteTag(e){await this.firestoreService.deleteTag(e.toLowerCase())}async deleteCategory(e){await this.firestoreService.deleteCategory(e.toLowerCase())}async bySlug(e){return this.firestoreService.getPromptBySlug(e)}searchInFirestore(e){try{let t=this.firestoreService.searchPrompts(e).map(r=>({item:r,foundIn:"titulo",position:0,relevanceScore:1}));return{search:e,found:t}}catch(t){return console.error("Error en b\xFAsqueda de Firestore:",t),{search:e,found:[]}}}titleCase(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var go=class n{firestore=S(_i);auth=S(di);isAdminCache={};async getAdmins(){let e=St(this.firestore,"admins");return(await YP(e)).docs.map(r=>P({uid:r.id},r.data()))}async addAdminByUid(e,t){let r=Cs(this.firestore,"admins",e);await ZP(r,{email:t})}async removeAdmin(e){let t=Cs(this.firestore,"admins",e);await mc(t)}isCurrentUserAdmin(){return this.auth.currentUser?this.isAdminCache.hasOwnProperty(this.auth.currentUser.uid)?Y(this.isAdminCache[this.auth.currentUser.uid]):Be(this.auth.currentUser.getIdToken()).pipe(Wt(()=>{let e=this.auth.currentUser?.uid;return e?Y(Cs(this.firestore,"admins",e)).pipe(pe(t=>t.id===e),nt(t=>{this.isAdminCache[e]=t})):Y(!1)})):(this.isAdminCache={},Y(!1))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var wq={menu:"M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z",back:"m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z",search:"M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z",copy:"M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z",share:"M680-80q-50 0-85-35t-35-85q0-6 3-28L282-392q-16 15-37 23.5t-45 8.5q-50 0-85-35t-35-85q0-50 35-85t85-35q24 0 45 8.5t37 23.5l281-164q-2-7-2.5-13.5T560-760q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35q-24 0-45-8.5T598-672L317-508q2 7 2.5 13.5t.5 14.5q0 8-.5 14.5T317-452l281 164q16-15 37-23.5t45-8.5q50 0 85 35t35 85q0 50-35 85t-85 35Z","dark-mode":"M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z","light-mode":"M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z",close:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z",link:"M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z",terminal:"M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H160v400Zm140-40-56-56 103-104-104-104 57-56 160 160-160 160Zm180 0v-80h240v80H480Z",check:"M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z",add:"M440-120v-320H120v-80h320v-320h80v320h320v80H520v320h-80Z",delete:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z",logout:"M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z",login:"M480-120v-80h280v-560H480v-80h280q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H480Zm-80-160-55-58 102-102H120v-80h327L345-622l55-58 200 200-200 200Z"},At=class n{elementRef=S(jt);renderer=S(ln);icon=X.required({alias:"pdIcon"});size=X(24);fill=X("currentColor");constructor(){Pa(()=>{this.createSvgIcon()})}createSvgIcon(){let e=wq[this.icon()];if(!e){console.warn(`Icon "${this.icon()}" not found`);return}this.elementRef.nativeElement.innerHTML="";let t=this.renderer.createElement("svg","http://www.w3.org/2000/svg");this.renderer.setAttribute(t,"height",`${this.size()}px`),this.renderer.setAttribute(t,"width",`${this.size()}px`),this.renderer.setAttribute(t,"viewBox","0 -960 960 960"),this.renderer.setAttribute(t,"fill",this.fill());let r=this.renderer.createElement("path","http://www.w3.org/2000/svg");this.renderer.setAttribute(r,"d",e),this.renderer.appendChild(t,r),this.renderer.appendChild(this.elementRef.nativeElement,t)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=ae({type:n,selectors:[["","pdIcon",""]],inputs:{icon:[1,"pdIcon","icon"],size:[1,"size"],fill:[1,"fill"]}})};var Ng=class n{copyService=S(Wf);promptText=X("");promptUrl=X(null);copyPrompt(){this.promptText()&&this.copyService.copy(this.promptText())}copyUrl(){this.promptUrl()&&this.copyService.copy(this.promptUrl())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-copy-actions"]],inputs:{promptText:[1,"promptText"],promptUrl:[1,"promptUrl"]},decls:3,vars:0,consts:[[1,"space-x-2","flex"],["pd-action-button","","title","Copiar la direcci\xF3n","aria-label","Copiar la direcci\xF3n","pdIcon","link",3,"clicked"],["pd-action-button","","title","Copiar el prompt","aria-label","Copiar el prompt","pdIcon","copy",3,"clicked"]],template:function(t,r){t&1&&(H(0,"div",0)(1,"button",1),Z("clicked",function(){return r.copyUrl()}),B(),H(2,"button",2),Z("clicked",function(){return r.copyPrompt()}),B()())},dependencies:[Gf,At],encapsulation:2})};var bq=["*"],JP=class n{constructor(e){this.renderer=e;this.setListeners()}isOpen=Ce(!1);removeDocumentClickListenerFn=null;removeDocumentEscapeListenerFn=null;show(){this.isOpen()!==!0&&(this.isOpen.set(!0),this.setListeners())}hide(){this.isOpen()&&(this.isOpen.set(!1),this.removeDocumentClickListenerFn?.(),this.removeDocumentEscapeListenerFn?.())}onClick(){this.hide()}setListeners(){this.isOpen()===!0&&(this.removeDocumentClickListenerFn=this.renderer.listen("document","click",()=>this.hide()),this.removeDocumentEscapeListenerFn=this.renderer.listen("document","keydown.escape",()=>this.hide(),{passive:!0}))}ngOnDestroy(){this.removeDocumentClickListenerFn?.(),this.removeDocumentEscapeListenerFn?.()}static \u0275fac=function(t){return new(t||n)(q(ln))};static \u0275cmp=se({type:n,selectors:[["pd-drawer"],["","pd-drawer",""]],ngContentSelectors:bq,decls:3,vars:4,consts:[[1,"drawer","shadow-lg/60","dark:shadow-lg/70","md:shadow-sm/40","md:dark:shadow-md/70","fixed","md:top-14","top-0","z-14","dark:shadow-black","shadow-black/80","bg-drawer","bottom-0","overflow-hidden",3,"click"],[1,"fixed","md:hidden","top-0","left-0","z-12","bg-black/10","dark:bg-black/20","block","opacity-100","w-screen","h-screen"]],template:function(t,r){t&1&&(Ku(),fn(0,"div",0),Na("click",function(){return r.onClick()}),Qu(1),Xt(),Ki(2,"div",1)),t&2&&(en("open",r.isOpen()),W(2),en("hidden",!r.isOpen()))},encapsulation:2})};var ck=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(q(ln),q(jt))};static \u0275dir=ae({type:n})}return n})(),s0=(()=>{class n extends ck{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ei(n)))(i||n)}})();static \u0275dir=ae({type:n,features:[Ut]})}return n})(),Ec=new U("");var Dq={provide:Ec,useExisting:vn(()=>Ic),multi:!0};function Tq(){let n=Ln()?Ln().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Cq=new U(""),Ic=(()=>{class n extends ck{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Tq())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(q(ln),q(jt),q(Cq,8))};static \u0275dir=ae({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Z("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[wr([Dq]),Ut]})}return n})();function a0(n){return n==null||c0(n)===0}function c0(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Wl=new U(""),Hg=new U(""),Sq=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,XP=class{static min(e){return Aq(e)}static max(e){return Rq(e)}static required(e){return uk(e)}static requiredTrue(e){return Nq(e)}static email(e){return Mq(e)}static minLength(e){return xq(e)}static maxLength(e){return Pq(e)}static pattern(e){return kq(e)}static nullValidator(e){return xg()}static compose(e){return gk(e)}static composeAsync(e){return yk(e)}};function Aq(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Rq(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function uk(n){return a0(n.value)?{required:!0}:null}function Nq(n){return n.value===!0?null:{required:!0}}function Mq(n){return a0(n.value)||Sq.test(n.value)?null:{email:!0}}function xq(n){return e=>{let t=e.value?.length??c0(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function Pq(n){return e=>{let t=e.value?.length??c0(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function kq(n){if(!n)return xg;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(a0(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function xg(n){return null}function lk(n){return n!=null}function dk(n){return ti(n)?Be(n):n}function hk(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function fk(n,e){return e.map(t=>t(n))}function Oq(n){return!n.validate}function pk(n){return n.map(e=>Oq(e)?e:t=>e.validate(t))}function gk(n){if(!n)return null;let e=n.filter(lk);return e.length==0?null:function(t){return hk(fk(t,e))}}function mk(n){return n!=null?gk(pk(n)):null}function yk(n){if(!n)return null;let e=n.filter(lk);return e.length==0?null:function(t){let r=fk(t,e).map(dk);return wy(r).pipe(pe(hk))}}function vk(n){return n!=null?yk(pk(n)):null}function ek(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function _k(n){return n._rawValidators}function Ek(n){return n._rawAsyncValidators}function t0(n){return n?Array.isArray(n)?n:[n]:[]}function Pg(n,e){return Array.isArray(n)?n.includes(e):n===e}function tk(n,e){let t=t0(e);return t0(n).forEach(i=>{Pg(t,i)||t.push(i)}),t}function nk(n,e){return t0(e).filter(t=>!Pg(n,t))}var kg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=mk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},As=class extends kg{name;get formDirective(){return null}get path(){return null}},Ei=class extends kg{_parent=null;name=null;valueAccessor=null},Og=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Fq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},cle=ne(P({},Fq),{"[class.ng-submitted]":"isSubmitted"}),$g=(()=>{class n extends Og{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(q(Ei,2))};static \u0275dir=ae({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&en("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ut]})}return n})(),ule=(()=>{class n extends Og{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(q(As,10))};static \u0275dir=ae({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&en("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Ut]})}return n})();var $l="VALID",Mg="INVALID",yc="PENDING",ql="DISABLED",mo=class{},Fg=class extends mo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},zl=class extends mo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Gl=class extends mo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},vc=class extends mo{status;source;constructor(e,t){super(),this.status=e,this.source=t}},n0=class extends mo{source;constructor(e){super(),this.source=e}},r0=class extends mo{source;constructor(e){super(),this.source=e}};function u0(n){return(qg(n)?n.validators:n)||null}function Lq(n){return Array.isArray(n)?mk(n):n||null}function l0(n,e){return(qg(e)?e.asyncValidators:n)||null}function Vq(n){return Array.isArray(n)?vk(n):n||null}function qg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Ik(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[t])throw new j(1001,"")}function wk(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new j(1002,"")})}var _c=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return tn(this.statusReactive)}set status(e){tn(()=>this.statusReactive.set(e))}_status=Bt(()=>this.statusReactive());statusReactive=Ce(void 0);get valid(){return this.status===$l}get invalid(){return this.status===Mg}get pending(){return this.status==yc}get disabled(){return this.status===ql}get enabled(){return this.status!==ql}errors;get pristine(){return tn(this.pristineReactive)}set pristine(e){tn(()=>this.pristineReactive.set(e))}_pristine=Bt(()=>this.pristineReactive());pristineReactive=Ce(!0);get dirty(){return!this.pristine}get touched(){return tn(this.touchedReactive)}set touched(e){tn(()=>this.touchedReactive.set(e))}_touched=Bt(()=>this.touchedReactive());touchedReactive=Ce(!1);get untouched(){return!this.touched}_events=new tt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nk(e,this._rawAsyncValidators))}hasValidator(e){return Pg(this._rawValidators,e)}hasAsyncValidator(e){return Pg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ne(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Gl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Gl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ne(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new zl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new zl(!0,r))}markAsPending(e={}){this.status=yc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new vc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ne(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ql,this.errors=null,this._forEachChild(i=>{i.disable(ne(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Fg(this.value,r)),this._events.next(new vc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=$l,this._forEachChild(r=>{r.enable(ne(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ne(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$l||this.status===yc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Fg(this.value,t)),this._events.next(new vc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ne(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ql:$l}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=yc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=dk(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new vc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ge,this.statusChanges=new Ge}_calculateStatus(){return this._allControlsDisabled()?ql:this.errors?Mg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yc)?yc:this._anyControlsHaveStatus(Mg)?Mg:$l}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new zl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Gl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Lq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Vq(this._rawAsyncValidators)}},Lg=class extends _c{constructor(e,t,r){super(u0(t),l0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){wk(this,!0,e),Object.keys(e).forEach(r=>{Ik(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var i0=class extends Lg{};var Kl=new U("",{providedIn:"root",factory:()=>zg}),zg="always";function bk(n,e){return[...e.path,n]}function Vg(n,e,t=zg){d0(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Uq(n,e),Hq(n,e),Bq(n,e),jq(n,e)}function jg(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Bg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ug(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function jq(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function d0(n,e){let t=_k(n);e.validator!==null?n.setValidators(ek(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Ek(n);e.asyncValidator!==null?n.setAsyncValidators(ek(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Ug(e._rawValidators,i),Ug(e._rawAsyncValidators,i)}function Bg(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=_k(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=Ek(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Ug(e._rawValidators,r),Ug(e._rawAsyncValidators,r),t}function Uq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Dk(n,e)})}function Bq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Dk(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Dk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Hq(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function $q(n,e){n==null,d0(n,e)}function qq(n,e){return Bg(n,e)}function h0(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function zq(n){return Object.getPrototypeOf(n.constructor)===s0}function Gq(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function f0(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Ic?t=o:zq(o)?r=o:i=o}),i||r||t||null}function Wq(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ik(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Ss=class extends _c{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(u0(t),l0(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ik(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){rk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){rk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ik(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Kq=n=>n instanceof Ss;var Qq={provide:Ei,useExisting:vn(()=>p0)},ok=Promise.resolve(),p0=(()=>{class n extends Ei{_changeDetectorRef;callSetDisabledState;control=new Ss;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ge;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=f0(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),h0(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Vg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){ok.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ns(r);ok.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?bk(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(q(As,9),q(Wl,10),q(Hg,10),q(Ec,10),q(oi,8),q(Kl,8))};static \u0275dir=ae({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[wr([Qq]),Ut,bn]})}return n})();var dle=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ae({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var g0=new U(""),Yq={provide:Ei,useExisting:vn(()=>m0)},m0=(()=>{class n extends Ei{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new Ge;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=f0(this,i)}ngOnChanges(t){if(this._isControlChanged(t)){let r=t.form.previousValue;r&&jg(r,this,!1),Vg(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}h0(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&jg(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(q(Wl,10),q(Hg,10),q(Ec,10),q(g0,8),q(Kl,8))};static \u0275dir=ae({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[wr([Yq]),Ut,bn]})}return n})(),Zq={provide:As,useExisting:vn(()=>Jq)},Jq=(()=>{class n extends As{callSetDisabledState;get submitted(){return tn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Bt(()=>this._submittedReactive());_submittedReactive=Ce(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ge;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Bg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Vg(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){jg(t.control||null,t,!1),Wq(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Gq(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new n0(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new r0(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(jg(r||null,t),Kq(i)&&(Vg(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);$q(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&qq(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){d0(this.form,this),this._oldForm&&Bg(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(q(Wl,10),q(Hg,10),q(Kl,8))};static \u0275dir=ae({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Z("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[wr([Zq]),Ut,bn]})}return n})();var Xq={provide:Ei,useExisting:vn(()=>e6)},e6=(()=>{class n extends Ei{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ge;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=f0(this,o)}ngOnChanges(t){this._added||this._setUpControl(),h0(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return bk(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(q(As,13),q(Wl,10),q(Hg,10),q(Ec,10),q(g0,8))};static \u0275dir=ae({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[wr([Xq]),Ut,bn]})}return n})();var t6={provide:Ec,useExisting:vn(()=>Gg),multi:!0};function Tk(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function n6(n){return n.split(":")[0]}var Gg=(()=>{class n extends s0{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=S(ni).injector;appRefDestroyRef=this.appRefInjector.get(xt);destroyRef=S(xt);cdr=S(oi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefDestroyRef.destroyed||(this._queuedWrite=!0,Ff({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=Tk(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=n6(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ei(n)))(i||n)}})();static \u0275dir=ae({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Z("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[wr([t6]),Ut]})}return n})(),Ck=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Tk(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(q(jt),q(ln),q(Gg,9))};static \u0275dir=ae({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),r6={provide:Ec,useExisting:vn(()=>Sk),multi:!0};function sk(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function i6(n){return n.split(":")[0]}var Sk=(()=>{class n extends s0{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=i6(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ei(n)))(i||n)}})();static \u0275dir=ae({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Z("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[wr([r6]),Ut]})}return n})(),Ak=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(sk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(sk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(q(jt),q(ln),q(Sk,9))};static \u0275dir=ae({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var o6=(()=>{class n{_validator=xg;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):xg,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ae({type:n,features:[bn]})}return n})();var s6={provide:Wl,useExisting:vn(()=>a6),multi:!0};var a6=(()=>{class n extends o6{required;inputName="required";normalizeInput=ns;createValidator=t=>uk;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ei(n)))(i||n)}})();static \u0275dir=ae({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ra("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[wr([s6]),Ut]})}return n})();var Rk=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ir({type:n});static \u0275inj=Gn({})}return n})(),o0=class extends _c{constructor(e,t,r){super(u0(t),l0(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){wk(this,!1,e),e.forEach((r,i)=>{Ik(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function ak(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var hle=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return ak(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Lg(i,o)}record(t,r=null){let i=this._reduceControls(t);return new i0(i,r)}control(t,r,i){let o={};return this.useNonNullable?(ak(r)?o=r:(o.validators=r,o.asyncValidators=i),new Ss(t,ne(P({},o),{nonNullable:!0}))):new Ss(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new o0(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Ss)return t;if(t instanceof _c)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Nk=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kl,useValue:t.callSetDisabledState??zg}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ir({type:n});static \u0275inj=Gn({imports:[Rk]})}return n})(),Wg=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:g0,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Kl,useValue:t.callSetDisabledState??zg}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ir({type:n});static \u0275inj=Gn({imports:[Rk]})}return n})();var c6=["pd-label-item",""],wc=class n{text=X("",{alias:"pd-label-item"});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["","pd-label-item",""]],hostAttrs:[1,"text-sm","text-inverse","opacity-80"],inputs:{text:[1,"pd-label-item","text"]},attrs:c6,decls:1,vars:1,template:function(t,r){t&1&&he(0),t&2&&Qe("",r.text()," ")},encapsulation:2})};var u6=new Intl.RelativeTimeFormat("es",{numeric:"auto"});function Ql(n){let e=new Date,t=n.getTime()-e.getTime(),r=l6(t);return u6.format(d6(t,r),r)}var y0=60*1e3,v0=60*y0,_0=24*v0,E0=7*_0,I0=4*E0,xk=I0*12;function l6(n){return n=Math.abs(n),n<y0?"second":n<v0?"minute":n<_0?"hour":n<E0?"day":n<I0?"week":n<xk?"month":"year"}function d6(n,e){return Math.round(e==="minute"?n/y0:e==="hour"?n/v0:e==="day"?n/_0:e==="week"?n/E0:e==="month"?n/I0:e==="year"?n/xk:n/1e3)}var h6=["pd-value-item",""],bc=class n{value=X(void 0,{alias:"pd-value-item"});valueText=Bt(()=>{let e=this.value();return e==null?"Sin informaci\xF3n":Array.isArray(e)?e.length>0?e.join(", "):"Sin informaci\xF3n":typeof this.value()=="boolean"?this.value()?"S\xED":"No":e instanceof qe?Ql(e.toDate()):String(this.value())});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["","pd-value-item",""]],hostAttrs:[1,"text-md","text-inverse"],inputs:{value:[1,"pd-value-item","value"]},attrs:h6,decls:1,vars:1,template:function(t,r){t&1&&he(0),t&2&&Qe("",r.valueText()," ")},encapsulation:2})};var f6=["pd-editable-field",""];function p6(n,e){if(n&1){let t=dt();H(0,"textarea",10,0),xa("ngModelChange",function(i){ve(t);let o=De(2);return Zu(o.editValue,i)||(o.editValue=i),_e(i)}),Z("blur",function(){ve(t);let i=De(2);return _e(i.onSave())})("keydown.escape",function(){ve(t);let i=De(2);return _e(i.onCancel())})("keydown.enter",function(){ve(t);let i=De(2);return _e(i.onSave())}),B()}if(n&2){let t=De(2);Ma("ngModel",t.editValue),Ee("placeholder",t.label())}}function g6(n,e){if(n&1&&(H(0,"option",12),he(1),B()),n&2){let t=e.$implicit;Ee("value",t),W(),Fn(t)}}function m6(n,e){if(n&1){let t=dt();H(0,"select",11),xa("ngModelChange",function(i){ve(t);let o=De(2);return Zu(o.editValue,i)||(o.editValue=i),_e(i)}),Z("blur",function(){ve(t);let i=De(2);return _e(i.onSave())})("keydown.escape",function(){ve(t);let i=De(2);return _e(i.onCancel())})("change",function(){ve(t);let i=De(2);return _e(i.onSave())}),zu(1,g6,2,2,"option",12,tE),B()}if(n&2){let t=De(2);Ma("ngModel",t.editValue),W(),Gu(t.selectOptions())}}function y6(n,e){if(n&1){let t=dt();H(0,"input",13,1),xa("ngModelChange",function(i){ve(t);let o=De(2);return Zu(o.editValue,i)||(o.editValue=i),_e(i)}),Z("blur",function(){ve(t);let i=De(2);return _e(i.onSave())})("keydown.escape",function(){ve(t);let i=De(2);return _e(i.onCancel())})("keydown.enter",function(){ve(t);let i=De(2);return _e(i.onSave())}),B()}if(n&2){let t=De(2);Ma("ngModel",t.editValue),Ee("placeholder",t.label())}}function v6(n,e){if(n&1){let t=dt();Oe(0,"div",2),H(1,"div",3),dn(2,p6,2,2,"textarea",4)(3,m6,3,1,"select",5)(4,y6,2,2,"input",6),H(5,"div",7)(6,"button",8),Z("click",function(){ve(t);let i=De();return _e(i.onSave())}),he(7," \u2713 Guardar "),B(),H(8,"button",9),Z("click",function(){ve(t);let i=De();return _e(i.onCancel())}),he(9," \u2715 Cancelar "),B()()()}if(n&2){let t=De();Ee("pd-label-item",t.label()),W(2),hn(t.fieldType()==="textarea"?2:t.fieldType()==="select"?3:4)}}function _6(n,e){if(n&1){let t=dt();Oe(0,"div",2),H(1,"div",14),Z("click",function(){ve(t);let i=De();return _e(i.startEditing())}),B()}if(n&2){let t=De();Ee("pd-label-item",t.label()),W(),Ee("pd-value-item",t.value())}}var Pk=class n{label=X("");value=X(void 0);fieldType=X("text");selectOptions=X([]);maxLength=X(400);valueChange=Ye();isEditing=Ce(!1);editValue=Ce("");originalValue=Ce("");canEditInline=Bt(()=>this.getStringValue().length<=this.maxLength());startEditing(){if(!this.canEditInline()&&this.fieldType()==="textarea")return;let e=this.getStringValue();this.editValue.set(e),this.originalValue.set(e),this.isEditing.set(!0),setTimeout(()=>{document.querySelector("input, textarea, select")?.focus()},0)}onSave(){let e=this.editValue();e!==this.originalValue()&&this.valueChange.emit(e),this.isEditing.set(!1)}onCancel(){this.editValue.set(this.originalValue()),this.isEditing.set(!1)}getStringValue(){let e=this.value();return Array.isArray(e)?e.join(", "):e instanceof qe?e.toDate().toLocaleDateString():String(e||"")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["","pd-editable-field",""]],hostAttrs:[1,"flex","flex-col","pt-1","pb-3","items-start","justify-center","w-full"],inputs:{label:[1,"label"],value:[1,"value"],fieldType:[1,"fieldType"],selectOptions:[1,"selectOptions"],maxLength:[1,"maxLength"]},outputs:{valueChange:"valueChange"},attrs:f6,decls:2,vars:1,consts:[["textArea",""],["inputField",""],[3,"pd-label-item"],[1,"w-full"],["rows","3",1,"w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-800","text-gray-900","dark:text-gray-100","resize-vertical","min-h-[80px]",3,"ngModel","placeholder"],[1,"w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-800","text-gray-900","dark:text-gray-100",3,"ngModel"],["type","text",1,"w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-800","text-gray-900","dark:text-gray-100",3,"ngModel","placeholder"],[1,"flex","gap-2","mt-2"],[1,"px-3","py-1","bg-green-500","text-white","rounded","hover:bg-green-600","text-sm",3,"click"],[1,"px-3","py-1","bg-gray-500","text-white","rounded","hover:bg-gray-600","text-sm",3,"click"],["rows","3",1,"w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-800","text-gray-900","dark:text-gray-100","resize-vertical","min-h-[80px]",3,"ngModelChange","blur","keydown.escape","keydown.enter","ngModel","placeholder"],[1,"w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-800","text-gray-900","dark:text-gray-100",3,"ngModelChange","blur","keydown.escape","change","ngModel"],[3,"value"],["type","text",1,"w-full","p-2","border","border-gray-300","dark:border-gray-600","rounded-md","bg-white","dark:bg-gray-800","text-gray-900","dark:text-gray-100",3,"ngModelChange","blur","keydown.escape","keydown.enter","ngModel","placeholder"],["title","Click para editar",1,"cursor-pointer","hover:bg-gray-100","dark:hover:bg-gray-700","p-1","rounded","transition-colors",3,"click","pd-value-item"]],template:function(t,r){t&1&&dn(0,v6,10,2)(1,_6,2,2),t&2&&hn(r.isEditing()?0:1)},dependencies:[wc,bc,Nk,Ck,Ak,Ic,Gg,$g,p0],encapsulation:2})};var Qg=new U(""),C0=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(G(Qg),G(Ae))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),Yl=class{_doc;constructor(e){this._doc=e}manager},w0="ng-app-id";function kk(n){for(let e of n)e.remove()}function Ok(n,e){let t=e.createElement("style");return t.textContent=n,t}function E6(n,e,t,r){let i=n.head?.querySelectorAll(`style[${w0}="${e}"],link[${w0}="${e}"]`);if(i)for(let o of i)o.removeAttribute(w0),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function D0(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var S0=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,E6(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Ok);r?.forEach(i=>this.addUsage(i,this.external,D0))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(kk(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])kk(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Ok(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,D0(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(G(wt),G(bf),G(Tf,8),G(Gi))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),b0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},A0=/%COMP%/g;var Lk="%COMP%",I6=`_nghost-${Lk}`,w6=`_ngcontent-${Lk}`,b6=!0,D6=new U("",{providedIn:"root",factory:()=>b6});function T6(n){return w6.replace(A0,n)}function C6(n){return I6.replace(A0,n)}function Vk(n,e){return e.map(t=>t.replace(A0,n))}var R0=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new Zl(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Kg?i.applyToHost(t):i instanceof Jl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case Xr.Emulated:o=new Kg(u,l,r,this.appId,h,s,a,p,g);break;case Xr.ShadowDom:return new T0(u,l,t,r,s,a,this.nonce,p,g);default:o=new Jl(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(G(C0),G(S0),G(bf),G(D6),G(wt),G(Gi),G(Ae),G(Tf),G(Jo,8))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),Zl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(b0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Fk(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Fk(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=b0[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=b0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Er.DashCase|Er.Important)?e.style.setProperty(t,r,i&Er.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Er.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Ln().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Fk(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var T0=class extends Zl{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=Vk(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=D0(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Jl=class extends Zl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?Vk(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Kg=class extends Jl{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=T6(h),this.hostAttr=C6(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Yg=class n extends sl{supportsDOMEvents=!0;static makeCurrent(){UE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=S6();return t==null?null:A6(t)}resetBaseElement(){Xl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qE(document.cookie,e)}},Xl=null;function S6(){return Xl=Xl||document.head.querySelector("base"),Xl?Xl.getAttribute("href"):null}function A6(n){return new URL(n,document.baseURI).pathname}var R6=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),Uk=(()=>{class n extends Yl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(G(wt))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})(),jk=["alt","control","meta","shift"],N6={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},M6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Bk=(()=>{class n extends Yl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ln().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),jk.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=N6[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),jk.forEach(s=>{if(s!==i){let a=M6[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(G(wt))};static \u0275prov=F({token:n,factory:n.\u0275fac})}return n})();function x6(n,e){return NR(P({rootComponent:n},P6(e)))}function P6(n){return{appProviders:[...V6,...n?.providers??[]],platformProviders:L6}}function k6(){Yg.makeCurrent()}function O6(){return new yn}function F6(){return b_(document),document}var L6=[{provide:Gi,useValue:_N},{provide:Df,useValue:k6,multi:!0},{provide:wt,useFactory:F6}];var V6=[{provide:Eu,useValue:"root"},{provide:yn,useFactory:O6},{provide:Qg,useClass:Uk,multi:!0,deps:[wt]},{provide:Qg,useClass:Bk,multi:!0,deps:[wt]},R0,S0,C0,{provide:Ko,useExisting:R0},{provide:al,useClass:R6},[]];var Hk=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(G(wt))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fe="primary",pd=Symbol("RouteTitle"),k0=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ms(n){return new k0(n)}function Yk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function U6(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Lr(n[t],e[t]))return!1;return!0}function Lr(n,e){let t=n?O0(n):void 0,r=e?O0(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Zk(n[i],e[i]))return!1;return!0}function O0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Zk(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function Jk(n){return n.length>0?n[n.length-1]:null}function bi(n){return Iy(n)?n:ti(n)?Be(Promise.resolve(n)):Y(n)}var B6={exact:e1,subset:t1},Xk={exact:H6,subset:$6,ignored:()=>!0};function $k(n,e,t){return B6[t.paths](n.root,e.root,t.matrixParams)&&Xk[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function H6(n,e){return Lr(n,e)}function e1(n,e,t){if(!Rs(n.segments,e.segments)||!Xg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!e1(n.children[r],e.children[r],t))return!1;return!0}function $6(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Zk(n[t],e[t]))}function t1(n,e,t){return n1(n,e,e.segments,t)}function n1(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Rs(i,t)||e.hasChildren()||!Xg(i,t,r))}else if(n.segments.length===t.length){if(!Rs(n.segments,t)||!Xg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!t1(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Rs(n.segments,i)||!Xg(n.segments,i,r)||!n.children[fe]?!1:n1(n.children[fe],e,o,r)}}function Xg(n,e,t){return e.every((r,i)=>Xk[t](n[i].parameters,r.parameters))}var jr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ne([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ms(this.queryParams),this._queryParamMap}toString(){return G6.serialize(this)}},Ne=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return em(this)}},yo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ms(this.parameters),this._parameterMap}toString(){return i1(this)}};function q6(n,e){return Rs(n,e)&&n.every((t,r)=>Lr(t.parameters,e[r].parameters))}function Rs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function z6(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var gd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>new xs,providedIn:"root"})}return n})(),xs=class{parse(e){let t=new L0(e);return new jr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ed(e.root,!0)}`,r=Q6(e.queryParams),i=typeof e.fragment=="string"?`#${W6(e.fragment)}`:"";return`${t}${r}${i}`}},G6=new xs;function em(n){return n.segments.map(e=>i1(e)).join("/")}function ed(n,e){if(!n.hasChildren())return em(n);if(e){let t=n.children[fe]?ed(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==fe&&r.push(`${i}:${ed(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=z6(n,(r,i)=>i===fe?[ed(n.children[fe],!1)]:[`${i}:${ed(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${em(n)}/${t[0]}`:`${em(n)}/(${t.join("//")})`}}function r1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zg(n){return r1(n).replace(/%3B/gi,";")}function W6(n){return encodeURI(n)}function F0(n){return r1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tm(n){return decodeURIComponent(n)}function qk(n){return tm(n.replace(/\+/g,"%20"))}function i1(n){return`${F0(n.path)}${K6(n.parameters)}`}function K6(n){return Object.entries(n).map(([e,t])=>`;${F0(e)}=${F0(t)}`).join("")}function Q6(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Zg(t)}=${Zg(i)}`).join("&"):`${Zg(t)}=${Zg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Y6=/^[^\/()?;#]+/;function N0(n){let e=n.match(Y6);return e?e[0]:""}var Z6=/^[^\/()?;=#]+/;function J6(n){let e=n.match(Z6);return e?e[0]:""}var X6=/^[^=?&#]+/;function e8(n){let e=n.match(X6);return e?e[0]:""}var t8=/^[^&#]+/;function n8(n){let e=n.match(t8);return e?e[0]:""}var L0=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new Ne(e,t)),r}parseSegment(){let e=N0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new yo(tm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=J6(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=N0(this.remaining);i&&(r=i,this.capture(r))}e[tm(t)]=tm(r)}parseQueryParam(e){let t=e8(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=n8(this.remaining);s&&(r=s,this.capture(r))}let i=qk(t),o=qk(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=N0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=fe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[fe]:new Ne([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function o1(n){return n.segments.length>0?new Ne([],{[fe]:n}):n}function s1(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=s1(i);if(r===fe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ne(n.segments,e);return r8(t)}function r8(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new Ne(n.segments.concat(e.segments),e.children)}return n}function vo(n){return n instanceof jr}function a1(n,e,t=null,r=null){let i=c1(n);return u1(i,e,t,r)}function c1(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ne(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=o1(r);return e??i}function u1(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return M0(i,i,i,t,r);let o=i8(e);if(o.toRoot())return M0(i,i,new Ne([],{}),t,r);let s=o8(o,i,n),a=s.processChildren?nd(s.segmentGroup,s.index,o.commands):d1(s.segmentGroup,s.index,o.commands);return M0(i,s.segmentGroup,a,t,r)}function nm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function od(n){return typeof n=="object"&&n!=null&&n.outlets}function M0(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=l1(n,e,t);let a=o1(s1(s));return new jr(a,o,i)}function l1(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=l1(o,e,t)}),new Ne(n.segments,r)}var rm=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&nm(r[0]))throw new j(4003,!1);let i=r.find(od);if(i&&i!==Jk(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function i8(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new rm(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new rm(t,e,r)}var Cc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function o8(n,e,t){if(n.isAbsolute)return new Cc(e,!0,0);if(!t)return new Cc(e,!1,NaN);if(t.parent===null)return new Cc(t,!0,0);let r=nm(n.commands[0])?0:1,i=t.segments.length-1+r;return s8(t,i,n.numberOfDoubleDots)}function s8(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Cc(r,!1,i-o)}function a8(n){return od(n[0])?n[0].outlets:{[fe]:n}}function d1(n,e,t){if(n??=new Ne([],{}),n.segments.length===0&&n.hasChildren())return nd(n,e,t);let r=c8(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ne(n.segments.slice(0,r.pathIndex),{});return o.children[fe]=new Ne(n.segments.slice(r.pathIndex),n.children),nd(o,0,i)}else return r.match&&i.length===0?new Ne(n.segments,{}):r.match&&!n.hasChildren()?V0(n,e,t):r.match?nd(n,0,i):V0(n,e,t)}function nd(n,e,t){if(t.length===0)return new Ne(n.segments,{});{let r=a8(t),i={};if(Object.keys(r).some(o=>o!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let o=nd(n.children[fe],e,t);return new Ne(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=d1(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ne(n.segments,i)}}function c8(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(od(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Gk(u,l,s))return o;r+=2}else{if(!Gk(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function V0(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(od(o)){let u=u8(o.outlets);return new Ne(r,u)}if(i===0&&nm(t[0])){let u=n.segments[e];r.push(new yo(u.path,zk(t[0]))),i++;continue}let s=od(o)?o.outlets[fe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&nm(a)?(r.push(new yo(s,zk(a))),i+=2):(r.push(new yo(s,{})),i++)}return new Ne(r,{})}function u8(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=V0(new Ne([],{}),0,r))}),e}function zk(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Gk(n,e,t){return n==t.path&&Lr(e,t.parameters)}var rd="imperative",Rt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Rt||{}),Rn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ps=class extends Rn{type=Rt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},lr=class extends Rn{urlAfterRedirects;type=Rt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},rn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(rn||{}),sd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(sd||{}),Vr=class extends Rn{reason;code;type=Rt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ii=class extends Rn{reason;code;type=Rt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ac=class extends Rn{error;target;type=Rt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ad=class extends Rn{urlAfterRedirects;state;type=Rt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},im=class extends Rn{urlAfterRedirects;state;type=Rt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},om=class extends Rn{urlAfterRedirects;state;shouldActivate;type=Rt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sm=class extends Rn{urlAfterRedirects;state;type=Rt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},am=class extends Rn{urlAfterRedirects;state;type=Rt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cm=class{route;type=Rt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},um=class{route;type=Rt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lm=class{snapshot;type=Rt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dm=class{snapshot;type=Rt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hm=class{snapshot;type=Rt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fm=class{snapshot;type=Rt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var cd=class{},Rc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function l8(n){return!(n instanceof cd)&&!(n instanceof Rc)}function d8(n,e){return n.providers&&!n._injector&&(n._injector=Ta(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ur(n){return n.outlet||fe}function h8(n,e){let t=n.filter(r=>ur(r)===e);return t.push(...n.filter(r=>ur(r)!==e)),t}function xc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var pm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return xc(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Pc(this.rootInjector)}},Pc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new pm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(G(rt))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gm=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=j0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=j0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=U0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return U0(e,this._root).map(t=>t.value)}};function j0(n,e){if(n===e.value)return e;for(let t of e.children){let r=j0(n,t);if(r)return r}return null}function U0(n,e){if(n===e.value)return[e];for(let t of e.children){let r=U0(n,t);if(r.length)return r.unshift(e),r}return[]}var An=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Tc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ud=class extends gm{snapshot;constructor(e,t){super(e),this.snapshot=t,K0(this,e)}toString(){return this.snapshot.toString()}};function h1(n){let e=f8(n),t=new Mt([new yo("",{})]),r=new Mt({}),i=new Mt({}),o=new Mt({}),s=new Mt(""),a=new wi(t,r,o,s,i,fe,n,e.root);return a.snapshot=e.root,new ud(new An(a,[]),e)}function f8(n){let e={},t={},r={},i="",o=new Ns([],e,r,i,t,fe,n,null,{});return new ld("",new An(o,[]))}var wi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(pe(l=>l[pd]))??Y(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(e=>Ms(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(e=>Ms(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&p1(i)&&(r.resolve[pd]=i.title),r}var Ns=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[pd]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ms(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ms(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ld=class extends gm{url;constructor(e,t){super(t),this.url=e,K0(this,t)}toString(){return f1(this._root)}};function K0(n,e){e.value._routerState=n,e.children.forEach(t=>K0(n,t))}function f1(n){let e=n.children.length>0?` { ${n.children.map(f1).join(", ")} } `:"";return`${n.value}${e}`}function x0(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Lr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Lr(e.params,t.params)||n.paramsSubject.next(t.params),U6(e.url,t.url)||n.urlSubject.next(t.url),Lr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function B0(n,e){let t=Lr(n.params,e.params)&&q6(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||B0(n.parent,e.parent))}function p1(n){return typeof n.title=="string"||n.title===null}var g1=new U(""),Q0=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=fe;activateEvents=new Ge;deactivateEvents=new Ge;attachEvents=new Ge;detachEvents=new Ge;routerOutletData=X(void 0);parentContexts=S(Pc);location=S(Wi);changeDetector=S(oi);inputBinder=S(Em,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new H0(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ae({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[bn]})}return n})(),H0=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===wi?this.route:e===Pc?this.childContexts:e===g1?this.outletData:this.parent.get(e,t)}},Em=new U("");var Y0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=se({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Oe(0,"router-outlet")},dependencies:[Q0],encapsulation:2})}return n})();function Z0(n){let e=n.children&&n.children.map(Z0),t=e?ne(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=Y0),t}function p8(n,e,t){let r=dd(n,e._root,t?t._root:void 0);return new ud(r,e)}function dd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=g8(n,e,t);return new An(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>dd(n,a)),s}}let r=m8(e.value),i=e.children.map(o=>dd(n,o));return new An(r,i)}}function g8(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dd(n,r,i);return dd(n,r)})}function m8(n){return new wi(new Mt(n.url),new Mt(n.params),new Mt(n.queryParams),new Mt(n.fragment),new Mt(n.data),n.outlet,n.component,n)}var Nc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},m1="ngNavigationCancelingError";function ym(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=vo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=y1(!1,rn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function y1(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[m1]=!0,t.cancellationCode=e,t}function y8(n){return v1(n)&&vo(n.url)}function v1(n){return!!n&&n[m1]}var v8=(n,e,t,r)=>pe(i=>(new $0(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),$0=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),x0(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Tc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Tc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Tc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Tc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new fm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new dm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(x0(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),x0(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},vm=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Sc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function _8(n,e,t){let r=n._root,i=e?e._root:null;return td(r,i,t,[r.value])}function E8(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function kc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Uy(n)?n:e.get(n):r}function td(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Tc(e);return n.children.forEach(s=>{I8(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>id(a,t.getContext(s),i)),i}function I8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=w8(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new vm(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?td(n,e,a?a.children:null,r,i):td(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Sc(a.outlet.component,s))}else s&&id(e,a,i),i.canActivateChecks.push(new vm(r)),o.component?td(n,null,a?a.children:null,r,i):td(n,null,t,r,i);return i}function w8(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Rs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rs(n.url,e.url)||!Lr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!B0(n,e)||!Lr(n.queryParams,e.queryParams);case"paramsChange":default:return!B0(n,e)}}function id(n,e,t){let r=Tc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?id(s,e.children.getContext(o),t):id(s,null,t):id(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Sc(e.outlet.component,i)):t.canDeactivateChecks.push(new Sc(null,i)):t.canDeactivateChecks.push(new Sc(null,i))}function md(n){return typeof n=="function"}function b8(n){return typeof n=="boolean"}function D8(n){return n&&md(n.canLoad)}function T8(n){return n&&md(n.canActivate)}function C8(n){return n&&md(n.canActivateChild)}function S8(n){return n&&md(n.canDeactivate)}function A8(n){return n&&md(n.canMatch)}function _1(n){return n instanceof zr||n?.name==="EmptyError"}var Jg=Symbol("INITIAL_VALUE");function Mc(){return Wt(n=>vh(n.map(e=>e.pipe(Nn(1),Cy(Jg)))).pipe(pe(e=>{for(let t of e)if(t!==!0){if(t===Jg)return Jg;if(t===!1||R8(t))return t}return!0}),an(e=>e!==Jg),Nn(1)))}function R8(n){return vo(n)||n instanceof Nc}function N8(n,e){return ct(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Y(ne(P({},t),{guardsResult:!0})):M8(s,r,i,n).pipe(ct(a=>a&&b8(a)?x8(r,o,n,e):Y(a)),pe(a=>ne(P({},t),{guardsResult:a})))})}function M8(n,e,t,r){return Be(n).pipe(ct(i=>L8(i.component,i.route,t,e,r)),Wr(i=>i!==!0,!0))}function x8(n,e,t,r){return Be(e).pipe(Ro(i=>ta(k8(i.route.parent,r),P8(i.route,r),F8(n,i.path,t),O8(n,i.route,t))),Wr(i=>i!==!0,!0))}function P8(n,e){return n!==null&&e&&e(new hm(n)),Y(!0)}function k8(n,e){return n!==null&&e&&e(new lm(n)),Y(!0)}function O8(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>uu(()=>{let s=xc(e)??t,a=kc(o,s),u=T8(a)?a.canActivate(e,n):_t(s,()=>a(e,n));return bi(u).pipe(Wr())}));return Y(i).pipe(Mc())}function F8(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>E8(s)).filter(s=>s!==null).map(s=>uu(()=>{let a=s.guards.map(u=>{let l=xc(s.node)??t,h=kc(u,l),p=C8(h)?h.canActivateChild(r,n):_t(l,()=>h(r,n));return bi(p).pipe(Wr())});return Y(a).pipe(Mc())}));return Y(o).pipe(Mc())}function L8(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=xc(e)??i,l=kc(a,u),h=S8(l)?l.canDeactivate(n,e,t,r):_t(u,()=>l(n,e,t,r));return bi(h).pipe(Wr())});return Y(s).pipe(Mc())}function V8(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=kc(s,n),u=D8(a)?a.canLoad(e,t):_t(n,()=>a(e,t));return bi(u)});return Y(o).pipe(Mc(),E1(r))}function E1(n){return gy(nt(e=>{if(typeof e!="boolean")throw ym(n,e)}),pe(e=>e===!0))}function j8(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=kc(s,n),u=A8(a)?a.canMatch(e,t):_t(n,()=>a(e,t));return bi(u)});return Y(o).pipe(Mc(),E1(r))}var hd=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},fd=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Dc(n){return Xs(new hd(n))}function U8(n){return Xs(new j(4e3,!1))}function B8(n){return Xs(y1(!1,rn.GuardRejected))}var q0=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[fe])return U8(`${e.redirectTo}`);i=i.children[fe]}}applyRedirectCommands(e,t,r,i,o){return H8(t,i,o).pipe(pe(s=>{if(s instanceof jr)throw new fd(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new fd(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new jr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ne(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function H8(n,e,t){if(typeof n=="string")return Y(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return bi(_t(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var z0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $8(n,e,t,r,i){let o=I1(n,e,t);return o.matched?(r=d8(e,r),j8(r,e,t,i).pipe(pe(s=>s===!0?o:P({},z0)))):Y(o)}function I1(n,e,t){if(e.path==="**")return q8(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},z0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Yk)(t,n,e);if(!i)return P({},z0);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function q8(n){return{matched:!0,parameters:n.length>0?Jk(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Wk(n,e,t,r){return t.length>0&&W8(n,t,r)?{segmentGroup:new Ne(e,G8(r,new Ne(t,n.children))),slicedSegments:[]}:t.length===0&&K8(n,t,r)?{segmentGroup:new Ne(n.segments,z8(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ne(n.segments,n.children),slicedSegments:t}}function z8(n,e,t,r){let i={};for(let o of t)if(Im(n,e,o)&&!r[ur(o)]){let s=new Ne([],{});i[ur(o)]=s}return P(P({},r),i)}function G8(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&ur(r)!==fe){let i=new Ne([],{});t[ur(r)]=i}return t}function W8(n,e,t){return t.some(r=>Im(n,e,r)&&ur(r)!==fe)}function K8(n,e,t){return t.some(r=>Im(n,e,r))}function Im(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Q8(n,e,t){return e.length===0&&!n.children[t]}var G0=class{};function Y8(n,e,t,r,i,o,s="emptyOnly"){return new W0(n,e,t,r,i,s,o).recognize()}var Z8=31,W0=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new q0(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=Wk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(pe(({children:t,rootSnapshot:r})=>{let i=new An(r,t),o=new ld("",i),s=a1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ns([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe(pe(r=>({children:r,rootSnapshot:t})),Gr(r=>{if(r instanceof fd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof hd?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(pe(s=>s instanceof An?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Be(o).pipe(Ro(s=>{let a=r.children[s],u=h8(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Ty((s,a)=>(s.push(...a),s)),Pi(null),Dy(),ct(s=>{if(s===null)return Dc(r);let a=w1(s);return J8(a),Y(a)}))}processSegment(e,t,r,i,o,s,a){return Be(t).pipe(Ro(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Gr(l=>{if(l instanceof hd)return Y(null);throw l}))),Wr(u=>!!u),Gr(u=>{if(_1(u))return Q8(r,i,o)?Y(new G0):Dc(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return ur(r)!==s&&(s===fe||!Im(i,o,r))?Dc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Dc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=I1(t,i,o);if(!u)return Dc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Z8&&(this.allowRedirects=!1));let y=new Ns(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Kk(i),ur(i),i.component??i._loadedComponent??null,i,Qk(i)),I=mm(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(I.params),y.data=Object.freeze(I.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Wt(N=>this.applyRedirects.lineralizeSegments(i,N)),ct(N=>this.processSegment(e,r,t,N.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=$8(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Wt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Wt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,I=new Ns(g,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Kk(r),ur(r),r.component??r._loadedComponent??null,r,Qk(r)),A=mm(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(A.params),I.data=Object.freeze(A.data);let{segmentGroup:N,slicedSegments:k}=Wk(t,g,y,l);if(k.length===0&&N.hasChildren())return this.processChildren(h,l,N,I).pipe(pe(te=>new An(I,te)));if(l.length===0&&k.length===0)return Y(new An(I,[]));let z=ur(r)===o;return this.processSegment(h,l,N,k,z?fe:o,!0,I).pipe(pe(te=>new An(I,te instanceof An?[te]:[])))}))):Dc(t)))}getChildConfig(e,t,r){return t.children?Y({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Y({routes:t._loadedRoutes,injector:t._loadedInjector}):V8(e,t,r,this.urlSerializer).pipe(ct(i=>i?this.configLoader.loadChildren(e,t).pipe(nt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):B8(t))):Y({routes:[],injector:e})}};function J8(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function X8(n){let e=n.value.routeConfig;return e&&e.path===""}function w1(n){let e=[],t=new Set;for(let r of n){if(!X8(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=w1(r.children);e.push(new An(r.value,i))}return e.filter(r=>!t.has(r))}function Kk(n){return n.data||{}}function Qk(n){return n.resolve||{}}function ez(n,e,t,r,i,o){return ct(s=>Y8(n,e,t,r,s.extractedUrl,i,o).pipe(pe(({state:a,tree:u})=>ne(P({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function tz(n,e){return ct(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Y(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of b1(u))s.add(l);let a=0;return Be(s).pipe(Ro(u=>o.has(u)?nz(u,r,n,e):(u.data=mm(u,u.parent,n).resolve,Y(void 0))),nt(()=>a++),na(1),ct(u=>a===s.size?Y(t):on))})}function b1(n){let e=n.children.map(t=>b1(t)).flat();return[n,...e]}function nz(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!p1(i)&&(o[pd]=i.title),uu(()=>(n.data=mm(n,n.parent,t).resolve,rz(o,n,e,r).pipe(pe(s=>(n._resolvedData=s,n.data=P(P({},n.data),s),null)))))}function rz(n,e,t,r){let i=O0(n);if(i.length===0)return Y({});let o={};return Be(i).pipe(ct(s=>iz(n[s],e,t,r).pipe(Wr(),nt(a=>{if(a instanceof Nc)throw ym(new xs,a);o[s]=a}))),na(1),pe(()=>o),Gr(s=>_1(s)?on:Xs(s)))}function iz(n,e,t,r){let i=xc(e)??r,o=kc(n,i),s=o.resolve?o.resolve(e,t):_t(i,()=>o(e,t));return bi(s)}function P0(n){return Wt(e=>{let t=n(e);return t?Be(t).pipe(pe(()=>e)):Y(e)})}var J0=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[pd]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>S(D1),providedIn:"root"})}return n})(),D1=(()=>{class n extends J0{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(G(Hk))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oc=new U("",{providedIn:"root",factory:()=>({})}),yd=new U(""),T1=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=S(sE);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Y(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=bi(_t(t,()=>r.loadComponent())).pipe(pe(S1),nt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),lu(()=>{this.componentLoaders.delete(r)})),o=new Qs(i,()=>new tt).pipe(Ks());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=C1(r,this.compiler,t,this.onLoadEndListener).pipe(lu(()=>{this.childrenLoaders.delete(r)})),s=new Qs(o,()=>new tt).pipe(Ks());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function C1(n,e,t,r){return bi(_t(t,()=>n.loadChildren())).pipe(pe(S1),ct(i=>i instanceof kf||Array.isArray(i)?Y(i):Be(e.compileModuleAsync(i))),pe(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(yd,[],{optional:!0,self:!0}).flat()),{routes:s.map(Z0),injector:o}}))}function oz(n){return n&&typeof n=="object"&&"default"in n}function S1(n){return oz(n)?n.default:n}var wm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>S(sz),providedIn:"root"})}return n})(),sz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),A1=new U("");var X0=new U(""),R1=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new tt;transitionAbortWithErrorSubject=new tt;configLoader=S(T1);environmentInjector=S(rt);destroyRef=S(xt);urlSerializer=S(gd);rootContexts=S(Pc);location=S(Ba);inputBindingEnabled=S(Em,{optional:!0})!==null;titleStrategy=S(J0);options=S(Oc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=S(wm);createViewTransition=S(A1,{optional:!0});navigationErrorHandler=S(X0,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Y(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new cm(i)),r=i=>this.events.next(new um(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ne(P({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new Mt(null),this.transitions.pipe(an(r=>r!==null),Wt(r=>{let i=!1;return Y(r).pipe(Wt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",rn.SupersededByNewNavigation),on;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ne(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let u="";return this.events.next(new Ii(o.id,this.urlSerializer.serialize(o.rawUrl),u,sd.IgnoredSameUrlNavigation)),o.resolve(!1),on}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Y(o).pipe(Wt(u=>(this.events.next(new Ps(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?on:Promise.resolve(u))),ez(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=ne(P({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new ad(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new Ps(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let I=h1(this.rootComponentType).snapshot;return this.currentTransition=r=ne(P({},o),{targetSnapshot:I,urlAfterRedirects:l,extras:ne(P({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,Y(r)}else{let u="";return this.events.next(new Ii(o.id,this.urlSerializer.serialize(o.extractedUrl),u,sd.IgnoredByUrlHandlingStrategy)),o.resolve(!1),on}}),nt(o=>{let s=new im(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),pe(o=>(this.currentTransition=r=ne(P({},o),{guards:_8(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),N8(this.environmentInjector,o=>this.events.next(o)),nt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw ym(this.urlSerializer,o.guardsResult);let s=new om(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),an(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",rn.GuardRejected),!1)),P0(o=>{if(o.guards.canActivateChecks.length!==0)return Y(o).pipe(nt(s=>{let a=new sm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Wt(s=>{let a=!1;return Y(s).pipe(tz(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",rn.NoDataFromResolver)}}))}),nt(s=>{let a=new am(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),P0(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let l=xc(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(nt(h=>{a.component=h}),pe(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return vh(s(o.targetSnapshot.root)).pipe(Pi(null),Nn(1))}),P0(()=>this.afterPreactivation()),Wt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Be(a).pipe(pe(()=>r)):Y(r)}),pe(o=>{let s=p8(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ne(P({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),nt(()=>{this.events.next(new cd)}),v8(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Nn(1),Eh(new de(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(an(()=>!i&&!r.targetRouterState),nt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",rn.Aborted)}))),nt({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new lr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Eh(this.transitionAbortWithErrorSubject.pipe(nt(o=>{throw o}))),lu(()=>{i||this.cancelNavigationTransition(r,"",rn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Gr(o=>{if(this.destroyed)return r.resolve(!1),on;if(i=!0,v1(o))this.events.next(new Vr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),y8(o)?this.events.next(new Rc(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Ac(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=_t(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Nc){let{message:u,cancellationCode:l}=ym(this.urlSerializer,a);this.events.next(new Vr(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Rc(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return on}))}))}cancelNavigationTransition(t,r,i){let o=new Vr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function az(n){return n!==rd}var N1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>S(cz),providedIn:"root"})}return n})(),_m=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},cz=(()=>{class n extends _m{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ei(n)))(i||n)}})();static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),M1=(()=>{class n{urlSerializer=S(gd);options=S(Oc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=S(Ba);urlHandlingStrategy=S(wm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new jr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof jr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=h1(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:()=>S(uz),providedIn:"root"})}return n})(),uz=(()=>{class n extends M1{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ps?this.updateStateMemento():t instanceof Ii?this.commitTransition(r):t instanceof ad?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof cd?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Vr&&t.code!==rn.SupersededByNewNavigation&&t.code!==rn.Redirect?this.restoreHistory(r):t instanceof Ac?this.restoreHistory(r,!0):t instanceof lr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=P(P({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=P(P({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ei(n)))(i||n)}})();static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eD(n,e){n.events.pipe(an(t=>t instanceof lr||t instanceof Vr||t instanceof Ac||t instanceof Ii),pe(t=>t instanceof lr||t instanceof Ii?0:(t instanceof Vr?t.code===rn.Redirect||t.code===rn.SupersededByNewNavigation:!1)?2:1),an(t=>t!==2),Nn(1)).subscribe(()=>{e()})}var lz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=S(Z_);stateManager=S(M1);options=S(Oc,{optional:!0})||{};pendingTasks=S(vr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=S(R1);urlSerializer=S(gd);location=S(Ba);urlHandlingStrategy=S(wm);injector=S(rt);_events=new tt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=S(N1);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=S(yd,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!S(Em,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ke;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Vr&&r.code!==rn.Redirect&&r.code!==rn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof lr)this.navigated=!0;else if(r instanceof Rc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||az(i.source)},s);this.scheduleNavigation(a,rd,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}l8(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=P({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Vt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Z0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=c1(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return u1(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=vo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,rd,null,r)}navigate(t,r={skipLocationChange:!1}){return hz(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},lz):r===!1?i=P({},dz):i=r,vo(t))return $k(this.currentUrlTree,t,i);let o=this.parseUrl(t);return $k(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return eD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hz(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}var Ur=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Ce(null);get href(){return tn(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new tt;applicationErrorHandler=S(Vt);options=S(Oc,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(S(new qf("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof lr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(vo(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:vo(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(q(Xe),q(wi),Uu("tabindex"),q(ln),q(jt),q(Ua))};static \u0275dir=ae({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Z("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ra("href",i.reactiveHref(),S_)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ns],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ns],replaceUrl:[2,"replaceUrl","replaceUrl",ns],routerLink:"routerLink"},features:[bn]})}return n})(),pz=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ge;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof lr&&this.update()})}ngAfterContentInit(){Y(this.links.changes,Y(null)).pipe(ea()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Be(t).pipe(ea()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=gz(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(q(Xe),q(jt),q(ln),q(oi),q(Ur,8))};static \u0275dir=ae({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&nE(o,Ur,5),r&2){let s;Xo(s=es())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[bn]})}return n})();function gz(n){return!!n.paths}var mz=new U("");function yz(n,...e){return _n([{provide:yd,multi:!0,useValue:n},[],{provide:wi,useFactory:vz,deps:[Xe]},{provide:jf,multi:!0,useFactory:Ez},e.map(t=>t.\u0275providers)])}function vz(n){return n.routerState.root}function _z(n,e){return{\u0275kind:n,\u0275providers:e}}function Ez(){let n=S(ze);return e=>{let t=n.get(ni);if(e!==t.components[0])return;let r=n.get(Xe),i=n.get(Iz);n.get(wz)===1&&r.initialNavigation(),n.get(bz,null,{optional:!0})?.setUpPreloading(),n.get(mz,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Iz=new U("",{factory:()=>new tt}),wz=new U("",{providedIn:"root",factory:()=>1});var bz=new U("");function Dz(n){return _z(7,[{provide:X0,useValue:n}])}var pn=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=ae({type:n,selectors:[["button","pdHeaderButton",""]],hostAttrs:[1,"rounded-md","hover:bg-button-hover","text-header-contrast"],features:[It([br])]})};var _o=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=ae({type:n,selectors:[["","pdTruncate",""]],hostAttrs:[1,"w-full","inline-block","truncate"]})};var Dm=class n{transform(e){return e?(Ql(e instanceof Date?e:new Date(e)),Ql(new Date(e))):"Sin informaci\xF3n"}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=Ca({name:"relDate",type:n,pure:!0})};var Cz=["pdHeaderBackButton",""],Br=class n{back=Ye();onClick(e){this.back.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["button","pdHeaderBackButton",""]],hostAttrs:["title","Volver","aria-label","Volver"],hostBindings:function(t,r){t&1&&Z("click",function(o){return r.onClick(o)})},outputs:{back:"back"},features:[It([pn])],attrs:Cz,decls:1,vars:0,consts:[["pdIcon","back"]],template:function(t,r){t&1&&Oe(0,"span",0)},dependencies:[At],encapsulation:2})};var dr=class n{get height(){return this.actualHeight()}double=Ce(!1);actualHeight=Bt(()=>this.double()?"h-30":"h-14");static \u0275fac=function(t){return new(t||n)};static \u0275dir=ae({type:n,selectors:[["","pdHeaderLayout",""]],hostAttrs:[1,"sticky","left-0","top-0","z-10","bg-header"],hostVars:2,hostBindings:function(t,r){t&2&&rE(r.height)}})},Tm=class n extends dr{constructor(){super(),this.double.set(!0)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=ae({type:n,selectors:[["","pdDoubleHeaderLayout",""]],features:[Ut]})},Hn=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=ae({type:n,selectors:[["","pdHeaderContent",""]],hostAttrs:[1,"px-3","flex","flex-col","justify-center","gap-1","bg-header"]})},$n=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=ae({type:n,selectors:[["","pdHeaderRow",""]],hostAttrs:[1,"flex","items-center","overflow-hidden","justify-between","gap-2","h-14"]})};var Fc=class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=ae({type:n,selectors:[["button","pdHeaderActionButton",""]],hostAttrs:[1,"hover:shadow-md","hover:shadow-black/20","shadow-black/40","rounded-full","bg-action","hover:bg-action-hover","text-header-contrast"],features:[It([br])]})};var Sz=["pdDialog"],Az=["*"],Lc=class n{dialog;dialogTitle=X("");confirm=Ye();show(){this.dialog.nativeElement.showModal()}onConfirm(e){this.dialog.nativeElement.close(),this.confirm.emit(e)}ngOnDestroy(){this.dialog.nativeElement.close()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-dialog"]],viewQuery:function(t,r){if(t&1&&Yu(Sz,7),t&2){let i;Xo(i=es())&&(r.dialog=i.first)}},inputs:{dialogTitle:[1,"dialogTitle"]},outputs:{confirm:"confirm"},ngContentSelectors:Az,decls:11,vars:1,consts:[["pdDialog",""],["closeBy","any",1,"backdrop:bg-neutral-500/20","fixed","top-1/3","left-1/2","-translate-x-1/2","w-fit","h-fit","max-w-screen-sm","shadow-lg/50","shadow-black/40","p-3","bg-white","dark:bg-neutral-700"],[1,"text-2xl","font-semibold","px-2","mb-4"],[1,"p-3"],[1,"flex","items-center","justify-end","gap-2","text-sm"],["pd-button","","type","button",1,"hover:bg-neutral-200","hover:dark:bg-neutral-600","bg-neutral-100","dark:bg-neutral-700","rounded-md",3,"click"],["pd-button","","autofocus","","type","button",1,"hover:bg-neutral-200","hover:dark:bg-neutral-600","bg-neutral-300","dark:bg-neutral-800","rounded-md",3,"click"]],template:function(t,r){if(t&1){let i=dt();Ku(),H(0,"dialog",1,0)(2,"h1",2),he(3),B(),H(4,"div",3),Qu(5),B(),H(6,"form",4)(7,"button",5),Z("click",function(s){return ve(i),_e(r.onConfirm(s))}),he(8," S\xED "),B(),H(9,"button",6),Z("click",function(s){return ve(i),ts(1).close(),_e(s.stopPropagation())}),he(10," No "),B()()()}t&2&&(W(3),Qe(" ",r.dialogTitle()," "))},dependencies:[br],encapsulation:2})};var Rz=()=>["/prompts/create"];function Nz(n,e){if(n&1){let t=dt();H(0,"button",14),Z("click",function(){ve(t),De();let i=ts(17);return _e(i.show())}),Oe(1,"span",15),B(),Oe(2,"button",16)}n&2&&(W(2),Ee("routerLink",Ju(1,Rz)))}var x1=class n{constructor(e){this.router=e;let t=this.router.parseUrl(this.router.lastSuccessfulNavigation?.initialUrl?.toString()||"/");this.lastName=this.router.lastSuccessfulNavigation?.extras.state?.name||"",this.lastParams=t.queryParams,this.lastUrl=t.toString().split("?")[0]||"/"}adminService=S(go);isAdmin$=this.adminService.isCurrentUserAdmin();lastUrl;lastParams;lastName;titulo=X("Elemento");subtitulo=X("Informaci\xF3n detallada del elemento");copyPrompt=Ye();share=Ye();delete=Ye();onCopyPrompt(e){this.copyPrompt.emit(e)}onBack(e){if(e.stopPropagation(),this.lastName){this.router.navigate([this.lastUrl],{queryParams:this.lastParams,state:{name:this.lastName}});return}else this.router.navigate([this.lastUrl],{queryParams:this.lastParams})}onShare(e){this.share.emit(e)}onDelete(e){e.stopPropagation(),this.delete.emit(e)}static \u0275fac=function(t){return new(t||n)(q(Xe))};static \u0275cmp=se({type:n,selectors:[["pd-detail-header"],["","pd-detail-header",""]],inputs:{titulo:[1,"titulo"],subtitulo:[1,"subtitulo"]},outputs:{copyPrompt:"copyPrompt",share:"share",delete:"delete"},features:[It([Tm])],decls:19,vars:7,consts:[["confirmar",""],["pdHeaderContent",""],["pdHeaderRow","",1,"-mb-2"],["pdHeaderBackButton","",3,"back"],[1,"w-full"],[1,"flex","items-center"],["pdHeaderButton","","title","Copiar el prompt","aria-label","Copiar el prompt",3,"click"],["pdIcon","copy"],["pdHeaderButton","","title","Compartir el prompt","aria-label","Compartir el prompt",3,"click"],["pdIcon","share"],[1,"overflow-hidden","w-full","px-3"],["pdTruncate","",1,"text-header-contrast","text-[1.75rem]/9",3,"title"],["pdTruncate","",1,"text-header-low-contrast","text-sm",3,"title"],["dialogTitle","Eliminar",3,"confirm"],["pdHeaderButton","","title","Eliminar el prompt","aria-label","Eliminar el prompt",1,"ml-4",3,"click"],["pdIcon","delete"],["pdHeaderActionButton","","title","Agregar","aria-label","Agregar","pdIcon","add",1,"ml-4","mr-2",3,"routerLink"]],template:function(t,r){if(t&1){let i=dt();H(0,"div",1)(1,"div",2)(2,"button",3),Z("back",function(s){return ve(i),_e(r.onBack(s))}),B(),Oe(3,"div",4),H(4,"div",5)(5,"button",6),Z("click",function(s){return ve(i),_e(r.onCopyPrompt(s))}),Oe(6,"span",7),B(),H(7,"button",8),Z("click",function(s){return ve(i),_e(r.onShare(s))}),Oe(8,"span",9),B(),dn(9,Nz,3,2),ri(10,"async"),B()(),H(11,"div",10)(12,"h1",11),he(13),B(),H(14,"div",12),he(15),B()()(),H(16,"pd-dialog",13,0),Z("confirm",function(s){return ve(i),_e(r.onDelete(s))}),he(18," Eliminar\xE1 definitivamente el elemento, desea continuar? "),B()}t&2&&(W(9),hn(ii(10,5,r.isAdmin$)?9:-1),W(3),Ee("title",r.titulo()),W(),Qe(" ",r.titulo()," "),W(),Ee("title",r.subtitulo()),W(),Qe(" ",r.subtitulo()," "))},dependencies:[At,pn,Br,Hn,$n,_o,Fc,Ur,Lc,cs],encapsulation:2})};var Cm=class n{modeService=S(Qf);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-mode-toggle"]],decls:1,vars:1,consts:[["pdHeaderButton","",3,"click","pdIcon"]],template:function(t,r){t&1&&(H(0,"button",0),Z("click",function(){return r.modeService.toggle()}),B()),t&2&&Ee("pdIcon",r.modeService.darkMode()?"dark-mode":"light-mode")},dependencies:[At,pn],encapsulation:2})};var Sm=class n{router=S(Xe);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-placeholder-searcher"]],decls:2,vars:0,consts:[[1,"w-full",3,"click"],["type","text","readonly","","placeholder","Buscar prompts...","aria-label","Buscar prompts","aria-autocomplete","list","aria-haspopup","listbox","aria-controls","search-options","aria-activedescendant","search-option-active",1,"w-full","bg-search","ring-0","outline-0","text-search-contrast","placeholder:text-placeholder","placeholder:text-center","rounded-full","px-6","p-1.5"]],template:function(t,r){t&1&&(fn(0,"div",0),Na("click",function(o){return o.stopPropagation(),r.router.navigate(["/searching"])}),Ki(1,"input",1),Xt())},dependencies:[Wg],encapsulation:2})};var Am=class n{auth=S(di);loginWithGoogle(){let e=new DI;return yM(this.auth,e).then(t=>t.user).catch(()=>null)}logout(){return vM(this.auth)}get currentUser$(){return new de(e=>({unsubscribe:this.auth.onAuthStateChanged(r=>e.next(r))}))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Mz=()=>["/admin"];function xz(n,e){if(n&1){let t=dt();H(0,"span",8),he(1),B(),H(2,"button",9),Z("click",function(){ve(t);let i=De();return _e(i.logout())}),B(),Oe(3,"button",10)}n&2&&(W(),Qe(" ",e.email),W(2),Ee("routerLink",Ju(2,Mz)))}function Pz(n,e){if(n&1){let t=dt();H(0,"button",11),Z("click",function(){ve(t);let i=De();return _e(i.login())}),B()}}var P1=class n{open=Ye();authService=S(Am);currentUser$=this.authService.currentUser$;onMainButtonClick(e){e.stopPropagation(),this.open.emit()}login(){this.authService.loginWithGoogle()}logout(){this.authService.logout()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-main-header"],["","pd-main-header",""]],outputs:{open:"open"},features:[It([dr])],decls:12,vars:3,consts:[["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderButton","","title","Abrir men\xFA","aria-label","Abrir men\xFA","pdIcon","menu",1,"md:hidden",3,"click"],[1,"text-2xl/8","hidden","md:inline-flex","items-center","gap-0.5","text-contrast","font-mont-alt","font-semibold",2,"letter-spacing","0.07em"],["pdIcon","terminal",1,"scale-[115%]","text-lime-300"],[1,"w-full","max-w-[500px]"],[1,"flex","items-center","gap-2"],["pdHeaderButton","","title","Iniciar sesi\xF3n","aria-label","Iniciar sesi\xF3n","pdIcon","login"],[1,"text-contrast"],["pdHeaderButton","","title","Cerrar sesi\xF3n","aria-label","Cerrar sesi\xF3n","pdIcon","logout",3,"click"],["pdHeaderButton","","title","Admin","aria-label","Admin","pdIcon","terminal",1,"ml-4","mr-2",3,"routerLink"],["pdHeaderButton","","title","Iniciar sesi\xF3n","aria-label","Iniciar sesi\xF3n","pdIcon","login",3,"click"]],template:function(t,r){if(t&1&&(H(0,"div",0)(1,"div",1)(2,"button",2),Z("click",function(o){return r.onMainButtonClick(o)}),B(),H(3,"div",3),Oe(4,"span",4),he(5," ARTIFICIALMENTE "),B(),Oe(6,"pd-placeholder-searcher",5),H(7,"div",6),dn(8,xz,4,3),ri(9,"async"),qu(10,Pz,1,0,"button",7),Oe(11,"pd-mode-toggle"),B()()()),t&2){let i;W(8),hn((i=ii(9,1,r.currentUser$))?8:10,i)}},dependencies:[Sm,Cm,At,Hn,$n,pn,Ur,cs],encapsulation:2})};var kz=["searchInput"],Rm=class n{clear(e){e.stopPropagation(),this.searchControl.setValue(""),this.search.emit("")}searchInput;searchControl=new Ss("");search=Ye();term=X("");onSearch(){this.search.emit(this.searchControl.value?.trim()??""),this.searchInput.nativeElement.blur()}ngAfterViewInit(){setTimeout(()=>{this.searchInput.nativeElement.focus()},20),this.searchControl.valueChanges.pipe(by(300)).subscribe(e=>{let t=e?.trim()??"";this.search.emit(t)}),this.searchControl.setValue(this.term())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-searcher"]],viewQuery:function(t,r){if(t&1&&Yu(kz,5),t&2){let i;Xo(i=es())&&(r.searchInput=i.first)}},inputs:{term:[1,"term"]},outputs:{search:"search"},decls:4,vars:1,consts:[["searchInput",""],[1,"w-full","flex","flex-row","items-center","gap-2"],["tabindex","0","type","text","autofocus","","placeholder","Buscar prompts...","aria-label","Buscar prompts","aria-autocomplete","list","aria-haspopup","listbox","aria-controls","search-options","aria-activedescendant","search-option-active",1,"w-full","text-primary-contrast","p-1.5","ring-0","outline-0","border-b-[1px]","border-dotted","border-b-contrast",3,"keydown.enter","formControl"],["pdHeaderButton","","title","Abrir men\xFA","aria-label","Abrir men\xFA","pdIcon","close",3,"click"]],template:function(t,r){if(t&1){let i=dt();H(0,"div",1)(1,"input",2,0),Z("keydown.enter",function(){return ve(i),_e(r.onSearch())}),B(),H(3,"button",3),Z("click",function(s){return ve(i),_e(r.clear(s))}),B()()}t&2&&(W(),Ee("formControl",r.searchControl))},dependencies:[Wg,Ic,$g,m0,pn,At],encapsulation:2})};var k1=class n{router=S(Xe);search=Ye();term=X("");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-search-header"],["","pd-search-header",""]],inputs:{term:[1,"term"]},outputs:{search:"search"},features:[It([dr])],decls:4,vars:1,consts:[["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderBackButton","",3,"back"],[1,"w-full",3,"search","term"]],template:function(t,r){t&1&&(H(0,"div",0)(1,"div",1)(2,"button",2),Z("back",function(o){return r.onBack(o)}),B(),H(3,"pd-searcher",3),Z("search",function(o){return r.search.emit(o)}),B()()()),t&2&&(W(3),Ee("term",r.term()))},dependencies:[Hn,$n,Rm,Br],encapsulation:2})};function Oz(n,e){if(n&1){let t=dt();H(0,"button",9),Z("click",function(){ve(t),De();let i=ts(11);return _e(i.show())}),Oe(1,"span",10),B()}if(n&2){let t=De();Ee("disabled",!t.enabled())}}var O1=class n{adminService=S(go);isAdmin$=this.adminService.isCurrentUserAdmin();enabled=X(!1);delete=Ye();router=S(Xe);titulo=X("");subtitulo=X("");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}onDelete(e){e.stopPropagation(),this.delete.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-section-header"],["","pd-section-header",""]],inputs:{enabled:[1,"enabled"],titulo:[1,"titulo"],subtitulo:[1,"subtitulo"]},outputs:{delete:"delete"},features:[It([dr])],decls:13,vars:7,consts:[["confirmar",""],["pdHeaderContent",""],["pdHeaderRow",""],["pdHeaderBackButton","",3,"back"],[1,"overflow-hidden","w-full","flex","flex-col"],["pdTruncate","",1,"text-header-contrast","text-xl",3,"title"],[1,"text-header-low-contrast","text-sm",3,"title"],["pdHeaderButton","","title","Eliminar","aria-label","Eliminar",1,"ml-4","disabled:pointer-events-none","disabled:opacity-50",3,"disabled"],["dialogTitle","Eliminar",3,"confirm"],["pdHeaderButton","","title","Eliminar","aria-label","Eliminar",1,"ml-4","disabled:pointer-events-none","disabled:opacity-50",3,"click","disabled"],["pdIcon","delete"]],template:function(t,r){if(t&1){let i=dt();H(0,"div",1)(1,"div",2)(2,"button",3),Z("back",function(s){return ve(i),_e(r.onBack(s))}),B(),H(3,"div",4)(4,"h1",5),he(5),B(),H(6,"div",6),he(7),B()(),dn(8,Oz,2,1,"button",7),ri(9,"async"),B()(),H(10,"pd-dialog",8,0),Z("confirm",function(s){return ve(i),_e(r.onDelete(s))}),he(12," Eliminar\xE1 definitivamente el elemento, desea continuar? "),B()}t&2&&(W(4),Ee("title",r.titulo()),W(),Qe(" ",r.titulo()," "),W(),Ee("title",r.subtitulo()),W(),Qe(" ",r.subtitulo()," "),W(),hn(ii(9,5,r.isAdmin$)?8:-1))},dependencies:[pn,Br,Hn,$n,_o,At,Lc,cs],encapsulation:2})};var F1=class n{apply=Ye();waiting=X(!1);enabled=X(!0);router=S(Xe);titulo=X("Tarea");onBack(e){e.stopPropagation(),this.router.navigate(["/"])}onTaskButtonClicked(e){e.stopPropagation(),this.apply.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-task-header"]],inputs:{waiting:[1,"waiting"],enabled:[1,"enabled"],titulo:[1,"titulo"]},outputs:{apply:"apply"},features:[It([dr])],decls:7,vars:5,consts:[["pdHeaderContent",""],["pdHeaderRow","",1,""],["pdHeaderBackButton","",3,"back"],["pdTruncate","",1,"text-header-contrast","text-2xl",3,"title"],[1,"spinner"],["pdHeaderActionButton","","title","Aceptar","aria-label","Aceptar","pdIcon","check",1,"mr-2","disabled:pointer-events-none","md:hidden","disabled:bg-neutral-500","dark:disabled:bg-neutral-600","transition-colors","duration-300",3,"click","disabled"]],template:function(t,r){t&1&&(H(0,"div",0)(1,"div",1)(2,"button",2),Z("back",function(o){return r.onBack(o)}),B(),H(3,"h1",3),he(4),B(),Oe(5,"div",4),H(6,"button",5),Z("click",function(o){return r.onTaskButtonClicked(o)}),B()()()),t&2&&(W(3),Ee("title",r.titulo()),W(),Qe(" ",r.titulo()," "),W(),en("spinner-show",r.waiting()),W(),Ee("disabled",!r.enabled()||r.waiting()))},dependencies:[Br,Fc,Hn,$n,At,_o],encapsulation:2})};var Nm=class n{textData=X.required({alias:"pdHighlightText"});partIndex=X.required();isHighlighted=Bt(()=>this.partIndex()===this.textData().in);static \u0275fac=function(t){return new(t||n)};static \u0275dir=ae({type:n,selectors:[["","pdHighlightText",""]],hostAttrs:[1,"whitespace-pre"],hostVars:2,hostBindings:function(t,r){t&2&&en("bg-resaltador",r.isHighlighted())},inputs:{textData:[1,"pdHighlightText","textData"],partIndex:[1,"partIndex"]}})};function Fz(n,e){if(n&1&&(H(0,"span",1),he(1),B()),n&2){let t=e.$implicit,r=e.$index,i=De();Ee("pdHighlightText",i.textData())("partIndex",r),W(),Fn(t)}}var L1=class n{textData=X.required();static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-highlighted-text"]],inputs:{textData:[1,"textData"]},decls:3,vars:0,consts:[[1,"whitespace-nowrap","flex","flex-row","justify-start","items-center"],[3,"pdHighlightText","partIndex"]],template:function(t,r){t&1&&(H(0,"div",0),zu(1,Fz,2,3,"span",1,eE),B()),t&2&&(W(),Gu(r.textData().parts))},dependencies:[Nm],encapsulation:2})};var Lz=["pd-key-value-item",""],V1=class n{label=X("");value=X(void 0);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["","pd-key-value-item",""]],hostAttrs:[1,"flex","flex-col","pt-1","pb-3","items-start","justify-center"],inputs:{label:[1,"label"],value:[1,"value"]},attrs:Lz,decls:2,vars:2,consts:[[3,"pd-label-item"],[3,"pd-value-item"]],template:function(t,r){t&1&&Oe(0,"div",0)(1,"div",1),t&2&&(Ee("pd-label-item",r.label()),W(),Ee("pd-value-item",r.value()))},dependencies:[wc,bc],encapsulation:2})};function Vz(n,e){n&1&&(fn(0,"span",3),he(1,"WARN"),Xt())}function jz(n,e){n&1&&(fn(0,"span",4),he(1,"404"),Xt())}function Uz(n,e){n&1&&(fn(0,"span",5),he(1,"OK"),Xt())}var j1=class n{notificationService=S(Oa);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-notification"]],decls:8,vars:10,consts:[[1,"fixed","duration-200","m-auto","z-35","scale-0","left-0","right-0","w-fit","min-w-64","shadow-lg","shadow-black/30","dark:shadow-black/60","transition-all","ease-out"],[1,"rounded-lg","w-full","flex","bg-neutral-50","dark:bg-neutral-800","items-center","gap-4","p-3"],[1,"w-full","pl-1"],[1,"dark:text-amber-400","font-semibold","text-amber-600","p-0.5","px-1.5","rounded-lg"],[1,"dark:text-red-400","font-semibold","text-red-500","p-0.5","px-1.5","rounded-lg"],[1,"dark:text-green-300","font-semibold","text-green-800","p-0.5","px-1.5","rounded-lg"],[1,"fixed","top-0","left-0","z-30","bg-black/10","dark:bg-black/20","block","opacity-100","w-screen","h-screen"]],template:function(t,r){t&1&&(fn(0,"div",0)(1,"div",1)(2,"span",2),he(3),Xt(),dn(4,Vz,2,0,"span",3)(5,jz,2,0,"span",4)(6,Uz,2,0,"span",5),Xt()(),Ki(7,"div",6)),t&2&&(en("-bottom-8",!r.notificationService.showNotification())("bottom-18",r.notificationService.showNotification())("scale-100",r.notificationService.showNotification()),W(3),Fn(r.notificationService.notificationMessage().message),W(),hn(r.notificationService.notificationMessage().type==="warn"?4:r.notificationService.notificationMessage().type==="404"?5:6),W(3),en("hidden",!r.notificationService.showNotification()))},encapsulation:2})};var U1=class n{quantity=X(0);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-quantity-bagde"]],hostAttrs:[1,"min-w-6","w-6","h-6","inline-flex","items-center","justify-center","rounded-full","bg-primary-light","text-primary-contrast","text-xs"],inputs:{quantity:[1,"quantity"]},decls:2,vars:1,template:function(t,r){t&1&&(fn(0,"span"),he(1),Xt()),t&2&&(W(),Fn(r.quantity()))},encapsulation:2})};function Vc(n){let e=n.paramMap.get("id");if(!e)throw new Error("Route parameter 'id' is required");return e}var B1=class n{constructor(e,t){this.appDataService=e;this.router=t}async resolve(e,t){let r=this.router.getCurrentNavigation()?.extras.state?.name??await this.appDataService.categoryNameBySlug(Vc(e));if(r)return this.appDataService.byCategoryName(r);throw new Error("Route parameter 'slug' is required")}static \u0275fac=function(t){return new(t||n)(G(po),G(Xe))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var H1=class n{constructor(e,t){this.appDataService=e;this.router=t}async resolve(e,t){let r=this.router.getCurrentNavigation()?.extras.state?.name??await this.appDataService.tagNameBySlug(Vc(e));if(r)return this.appDataService.byTagName(r);throw new Error("Route parameter 'slug' is required")}static \u0275fac=function(t){return new(t||n)(G(po),G(Xe))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var $1=class n{constructor(e){this.appDataService=e}async resolve(e,t){let r=Vc(e);if(!r)throw new Error("Route parameter 'slug' is required");return this.appDataService.bySlug(r)}static \u0275fac=function(t){return new(t||n)(G(po))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};function q1(n){return n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim()}function jpe(n,e,t=40){let r=q1(n),i=q1(e),o=r.indexOf(i);if(o===-1)return{parts:[n.slice(0,t)],highlightIndex:-1};let s=Math.floor(t/2),a=e.length,u=Math.max(0,o-s),l=Math.min(n.length,o+a+s),h=o<=s?0:u,p=o+a>=n.length-s?n.length:l,g=n.slice(h,o),y=n.slice(o,o+a),I=n.slice(o+a,p),A=[],N=-1;return g?(A.push(g),N=A.length):N=0,A.push(y),I&&A.push(I),{parts:A,highlightIndex:N}}var z1=class n{constructor(e,t){this.adminService=e;this.router=t}canActivate(e,t){return this.adminService.isCurrentUserAdmin().pipe(Nn(1),pe(r=>r?!0:this.router.createUrlTree(["/"])))}static \u0275fac=function(t){return new(t||n)(G(go),G(Xe))};static \u0275prov=F({token:n,factory:n.\u0275fac,providedIn:"root"})};var Mm=class n{prompt=X({});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-promp-info"]],hostAttrs:[1,"md:flex","justify-end","items-center","text-inverse-low","hidden"],inputs:{prompt:[1,"prompt"]},decls:2,vars:4,template:function(t,r){t&1&&(he(0),ri(1,"relDate")),t&2&&Uf("",ii(1,2,r.prompt().fecha_creacion.toDate()),", ",r.prompt().autor)},dependencies:[Dm],encapsulation:2})};var Bz=(n,e)=>["/",n,e],Hz=n=>({id:n});function $z(n,e){if(n&1&&(Oe(0,"pd-promp-info",1),H(1,"a",2)(2,"div",3),he(3),B()(),H(4,"div",4)(5,"div",5),he(6),B(),H(7,"div",6),he(8),B()(),Oe(9,"pd-copy-actions",7)),n&2){let t=e,r=De();Ee("prompt",t),W(),Ee("routerLink",oE(8,Bz,r.promptUrl,t.slug))("state",iE(11,Hz,t.id)),W(2),Qe(" ",t.titulo," "),W(3),Qe(" ",t.prompt," "),W(2),Fn(t.descripcion),W(),Ee("promptText",t.prompt)("promptUrl",r.baseUrl()+t.slug)}}function qz(n,e){n&1&&(H(0,"div",0),he(1,"No prompt available"),B())}var G1=class n{promptUrl="prompt";basePath=S(op);baseUrl=Ce(window.location.origin+this.basePath+this.promptUrl+"/");visible=Ce(!1);prompt=X(null);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=se({type:n,selectors:[["pd-display-prompt"],["","pd-display-prompt",""]],hostAttrs:[1,"select-none","md:min-w-[16rem]","md:w-[24rem]","md:max-w-[36rem]","grow-1","relative","inline-block","group","px-2","py-4","shadow-md/30","shadow-black/40","dark:shadow-black/80","bg-card","hover:bg-card-hover","dark:hover:bg-card-hover/30","transition-colors","duration-150"],inputs:{prompt:[1,"prompt"]},decls:2,vars:1,consts:[[1,"no-prompt"],[1,"pb-4","px-2","text-xs",3,"prompt"],[3,"routerLink","state"],[1,"text-primary-dark","px-2","text-lg/6","font-titulo","opacity-85","group-hover:opacity-100",2,"text-wrap","balance"],[1,"relative","prompt","opacity-85","group-hover:opacity-100","text-prompt","transition-opacity","duration-150","px-2"],[1,"prompt-text","font-merri","font-[370]","py-3","leading-7","italic"],[1,"text-sm"],["tabindex","2",1,"absolute","bottom-3","right-5","pointer-events-none","transition-discrete","opacity-0","hidden","z-3","group-active:block","group-hover:block","group-focus:block","group-focus:opacity-100","group-hover:opacity-80","hover:opacity-100","transition-all","group-focus:pointer-events-auto","group-hover:pointer-events-auto",3,"promptText","promptUrl"]],template:function(t,r){if(t&1&&dn(0,$z,10,13)(1,qz,2,0,"div",0),t&2){let i;hn((i=r.prompt())?0:1,i)}},dependencies:[Ng,Ur,Mm],encapsulation:2})};export{P as a,ne as b,pe as c,an as d,U as e,S as f,_n as g,ve as h,_e as i,ze as j,NF as k,Ce as l,un as m,W as n,q as o,se as p,qA as q,zA as r,Ae as s,pj as t,gj as u,Ra as v,dn as w,qu as x,hn as y,tE as z,zu as A,Gu as B,Ee as C,H as D,B as E,Oe as F,fn as G,Xt as H,dt as I,cR as J,Z as K,Na as L,De as M,ts as N,en as O,he as P,Fn as Q,Qe as R,iE as S,oE as T,ri as U,ii as V,tU as W,Bt as X,Ye as Y,X as Z,BE as _,op as $,mN as aa,cs as ba,hH as ca,vN as da,x6 as ea,Hk as fa,wi as ga,Q0 as ha,Xe as ia,Ur as ja,pz as ka,yz as la,Dz as ma,Oa as na,Wf as oa,Kf as pa,Qf as qa,OR as ra,Qi as sa,Xf as ta,ep as ua,ht as va,nn as wa,nr as xa,La as ya,Tn as za,os as Aa,Ze as Ba,vie as Ca,Ji as Da,ol as Ea,ja as Fa,Xi as Ga,ai as Ha,as as Ia,Lie as Ja,Vie as Ka,Ha as La,vl as Ma,Pae as Na,kae as Oa,rue as Pa,iue as Qa,po as Ra,go as Sa,JP as Ta,Ic as Ua,XP as Va,$g as Wa,ule as Xa,dle as Ya,Jq as Za,e6 as _a,Gg as $a,Ck as ab,Ak as bb,a6 as cb,hle as db,Wg as eb,Pk as fb,x1 as gb,P1 as hb,k1 as ib,O1 as jb,F1 as kb,L1 as lb,V1 as mb,j1 as nb,U1 as ob,B1 as pb,H1 as qb,$1 as rb,jpe as sb,z1 as tb,G1 as ub};
